<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Do have faith in what you are doing."><title>æˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº† | Keep Writing Codes</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">æˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº†</h1><a id="logo" href="/.">Keep Writing Codes</a><p class="description">Lisp è¿½éšè€…ï¼ŒSICP å—ç›Šè€…ï¼ŒæŒç»­åˆ†äº«ç¼–ç¨‹å¿ƒå¾—</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> é¦–é¡µ</i></a><a href="/archives/"><i class="fa fa-archive"> å½’æ¡£</i></a><a href="/blogrolls/"><i class="fa fa-group"> å‹æƒ…é“¾æ¥</i></a><a href="/about/"><i class="fa fa-user"> å…³äº</i></a><a href="/atom.xml"><i class="fa fa-rss"> è®¢é˜…</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">æˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº†</h1><div class="post-meta">Oct 3, 2015<span> | </span><span class="category"><a href="/categories/PL/">ç¼–ç¨‹è¯­è¨€</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> é˜…è¯»</span></span></div><a data-disqus-identifier="blog/2015/10/03/first-toy-scheme/" href="/blog/2015/10/03/first-toy-scheme/#disqus_thread" class="disqus-comment-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">æ–‡ç« ç›®å½•</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#é¢„å¤‡çŸ¥è¯†"><span class="toc-number">1.</span> <span class="toc-text">é¢„å¤‡çŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å‰ç¼€è¡¨è¾¾å¼"><span class="toc-number">1.1.</span> <span class="toc-text">å‰ç¼€è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ç¼–ç¨‹è¯­è¨€åˆ†ç±»"><span class="toc-number">1.2.</span> <span class="toc-text">ç¼–ç¨‹è¯­è¨€åˆ†ç±»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JCScheme-è§£é‡Šå™¨"><span class="toc-number">1.3.</span> <span class="toc-text">JCScheme è§£é‡Šå™¨</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JCScheme-è¯­æ³•"><span class="toc-number">2.</span> <span class="toc-text">JCScheme è¯­æ³•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è§£æè¿‡ç¨‹"><span class="toc-number">3.</span> <span class="toc-text">è§£æè¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯æ³•åˆ†æ"><span class="toc-number">3.1.</span> <span class="toc-text">è¯æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯­æ³•åˆ†æ"><span class="toc-number">3.2.</span> <span class="toc-text">è¯­æ³•åˆ†æ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#è¯­ä¹‰åˆ†æ"><span class="toc-number">3.3.</span> <span class="toc-text">è¯­ä¹‰åˆ†æ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ±‚å€¼è¿‡ç¨‹"><span class="toc-number">4.</span> <span class="toc-text">æ±‚å€¼è¿‡ç¨‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ç±»å‹å®šä¹‰"><span class="toc-number">4.1.</span> <span class="toc-text">ç±»å‹å®šä¹‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä½œç”¨åŸŸ"><span class="toc-number">4.2.</span> <span class="toc-text">ä½œç”¨åŸŸ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ä¸è¶³"><span class="toc-number">5.</span> <span class="toc-text">ä¸è¶³</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#æ€»ç»“"><span class="toc-number">6.</span> <span class="toc-text">æ€»ç»“</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒ"><span class="toc-number">7.</span> <span class="toc-text">å‚è€ƒ</span></a></li></ol></div></div><div class="post-content"><p>è®°å¾—åœ¨ä¸Šå¤§å­¦é‚£ä¼šï¼Œå°±æƒ³ç€èƒ½å¤Ÿå®ç°ä¸ªè‡ªå·±çš„ç¼–ç¨‹è¯­è¨€ã€‚ç”±äºä¹‹å‰æŠ€èƒ½ä¸è¶³ï¼Œä¸€ç›´æ²¡æ•¢å»å°è¯•ã€‚ç°èµ¶ä¸Šå›½åº†ä¸ƒå¤©å‡æœŸï¼ŒSICP çœ‹çš„ä¹Ÿæ­£èµ·åŠ²ï¼Œç»ˆäºé¼“èµ·å‹‡æ°”ï¼ŒæŠŠè¿™ä¸ªå‘ç»™å¡«ä¸Šäº†ã€‚ç”šæ˜¯å¼€å¿ƒã€‚<br>å®ç° JCScheme è¿™ä¸ªè¯­è¨€å‰åå¤§æ¦‚ç”¨äº†ä¸€å¤©æ—¶é—´ï¼ŒåŠŸèƒ½è™½ç„¶ç®€å•ï¼Œä½†æ˜¯â€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œç¼–ç¨‹è¯­è¨€ä¸­æœ€åŸºæœ¬çš„ç±»å‹ã€ä½œç”¨åŸŸã€å‡½æ•°éƒ½æ¶µç›–äº†ï¼Œä»¥ååœ¨æ‰©å±•æ—¶ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚<br>å¦‚æœä½ å’Œä¹‹å‰çš„æˆ‘ä¸€æ ·ï¼Œæƒ³å®ç°ä¸€é—¨è¯­è¨€ä½†åˆè‹¦äºæ— ä»ä¸‹æ‰‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥èŠ±åŠä¸ªå°æ—¶çœ‹çœ‹æœ¬æ–‡ï¼Œç›¸ä¿¡ä½ è‚¯å®šä¼šæœ‰æ‰€æ”¶è·ã€‚<br>æœ¬æ–‡æ²¡æœ‰å¤æ‚éš¾æ‡‚çš„ç¼–è¯‘åŸç†çŸ¥è¯†ï¼Œæ²¡æœ‰å­¦è¿‡ç¼–è¯‘åŸç†çš„äººä¸è¦å®³æ€•ã€‚</p>
<p>JCScheme å®Œæ•´ä»£ç æ‰˜ç®¡åˆ°æˆ‘çš„ <a href="https://github.com/jiacai2050/JCScheme" target="_blank" rel="external">Github</a>ï¼Œå¹¶ä¸”ä»¥åä¼šæŒç»­æ›´æ–°ï¼Œå¦‚æœä½ å…ˆä»æ— åˆ°æœ‰å®ç°ä¸ªè¯­è¨€å¯ä»¥å…³æ³¨è¿™ä¸ªé¡¹ç›®ã€‚ç”±äº JCScheme ä¸€ç›´åœ¨æ›´æ–°ä¸­ï¼Œä¸‹é¢æŸäº›è®¾è®¡æˆ–é“¾æ¥å¯ä»¥ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½ å…³æ³¨  Github ä¸Šçš„é¡¹ç›®ã€‚</p>
<h2 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h2><h3 id="å‰ç¼€è¡¨è¾¾å¼"><a href="#å‰ç¼€è¡¨è¾¾å¼" class="headerlink" title="å‰ç¼€è¡¨è¾¾å¼"></a>å‰ç¼€è¡¨è¾¾å¼</h3><p>ç”±äº JCScheme æå…¶ç®€å•ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä»€ä¹ˆèƒŒæ™¯çŸ¥è¯†å³å¯çœ‹æ‡‚æœ¬æ–‡ï¼Œä¸è¿‡ä½ æœ€å¥½äº†è§£ç‚¹ Scheme è¯­è¨€ï¼Œå¦‚æœä¸äº†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ JCScheme ä¸­çš„è¯­å¥ä½¿ç”¨<a href="https://zh.wikipedia.org/zh/%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="external">å‰ç¼€è¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºæ³¢å…°è¡¨ç¤ºæ³•ï¼‰</a>ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡äº†è§£è¿‡ï¼Œéœ€è¦é€‚åº”ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># è¿™æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸­ç¼€è¡¨è¾¾å¼</div><div class="line">(5 âˆ’ 6) * 7</div><div class="line"># è¿™å°±æ˜¯å‰ç¼€è¡¨è¾¾å¼</div><div class="line">* (âˆ’ 5 6) 7</div></pre></td></tr></table></figure></p>
<p>å‰ç¼€è¡¨è¾¾å¼æœ€æ˜æ˜¾çš„ä¸€ä¸ªå¥½å¤„æ˜¯å…¶æ“ä½œç¬¦çš„å‚æ•°å¯ä»¥æœ‰ä¸å®šä¸ªï¼Œåƒ<code>(+ 1 2 3 4)</code>ã€‚</p>
<h3 id="ç¼–ç¨‹è¯­è¨€åˆ†ç±»"><a href="#ç¼–ç¨‹è¯­è¨€åˆ†ç±»" class="headerlink" title="ç¼–ç¨‹è¯­è¨€åˆ†ç±»"></a>ç¼–ç¨‹è¯­è¨€åˆ†ç±»</h3><p>ç°åœ¨ç¼–ç¨‹è¯­è¨€å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ol>
<li>ç¼–è¯‘å‹ï¼Œè¯¥ç±»å‹è¯­è¨€æºä»£ç ç»ç”±ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰è½¬åŒ–ä¸ºæœºå™¨è¯­è¨€ï¼Œå†ç”±æœºå™¨è¿è¡Œæœºå™¨ç ã€‚åƒC/C++ å³å±äºè¿™ä¸ªèŒƒç•´ã€‚æ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒ<a href="http://segmentfault.com/a/1190000003814221" target="_blank" rel="external">æ·±å…¥ç†è§£è®¡ç®—æœºä¹‹hello worldèƒŒåçš„æ•…äº‹</a></li>
<li>è§£é‡Šå‹ï¼Œè¯¥ç±»å‹è¯­è¨€ä¸è½¬åŒ–ä¸ºæœ€ç»ˆçš„æœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯ç”±è§£é‡Šå™¨ï¼ˆinterpreterï¼‰é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œåƒ Pythonã€JavaScript å±äºè¿™ä¸ªèŒƒç•´ï¼Œ JCScheme ä¹Ÿæ˜¯è¿™ç§ç±»å‹ã€‚</li>
</ol>
<p>ç”±äºæˆ‘è¿™é‡Œé‡‡ç”¨ Java æ¥å®ç° JCScheme çš„è§£é‡Šå™¨ï¼Œæ‰€ä»¥ JCScheme æºä»£ç çš„æ‰§è¡Œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2548UfVXXXXXiXXXXXXXXXXXX_!!581166664.png" alt="JCScheme æºç¨‹åºæ‰§è¡Œé€»è¾‘"><br></center>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒJCScheme è§£é‡Šå™¨çš„ä¸»è¦å·¥ä½œå°±æ˜¯å°†æŒ‰ç…§è‡ªå®šä¹‰è¯­æ³•è§„åˆ™ä¹¦å†™çš„æºç¨‹åºï¼Œè½¬åŒ–ä¸º Java ä»£ç ï¼Œä¹‹åçš„äº‹æƒ…å°±ç”± JVM æ¥å¤„ç†äº†ã€‚</p>
<h3 id="JCScheme-è§£é‡Šå™¨"><a href="#JCScheme-è§£é‡Šå™¨" class="headerlink" title="JCScheme è§£é‡Šå™¨"></a>JCScheme è§£é‡Šå™¨</h3><p>JCSchemeè§£é‡Šå™¨ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè§£æï¼ˆParseï¼‰å’Œæ±‚å€¼ï¼ˆEvaluationï¼‰ï¼š</p>
<ul>
<li>è§£æï¼šè§£ææºç¨‹åºï¼Œå¹¶ç”Ÿæˆè§£é‡Šå™¨å¯ä»¥ç†è§£çš„ä¸­é—´ï¼ˆIntermediateï¼‰ç»“æ„ã€‚è¿™éƒ¨åˆ†åŒ…å«è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œç”Ÿæˆè¯­æ³•æ ‘ã€‚</li>
<li>æ±‚å€¼ï¼šæ‰§è¡Œè§£æé˜¶æ®µå¾—åˆ°çš„ä¸­ä»‹ç»“æ„ç„¶åå¾—åˆ°è¿è¡Œç»“æœã€‚è¿™éƒ¨åˆ†åŒ…å«ä½œç”¨åŸŸï¼Œç±»å‹ç³»ç»Ÿè®¾è®¡å’Œè¯­æ³•æ ‘éå†ã€‚</li>
</ul>
<p>æ˜ç¡®äº†è§£é‡Šçš„å·¥ä½œåï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯åˆ¶å®šè¯­è¨€çš„è¯­æ³•ï¼Œç„¶åè¿›è¡Œè§£æã€æ±‚å€¼å³å¯ã€‚</p>
<h2 id="JCScheme-è¯­æ³•"><a href="#JCScheme-è¯­æ³•" class="headerlink" title="JCScheme è¯­æ³•"></a>JCScheme è¯­æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">rlwrap java -jar target/JCScheme-*.jar</div><div class="line">&gt;&gt; (* 2 3 4 5)</div><div class="line">120</div><div class="line">&gt;&gt; (def a 4)</div><div class="line">null</div><div class="line">&gt;&gt; (def b 5)</div><div class="line">null</div><div class="line">&gt;&gt; (if (&gt; a b) a b)</div><div class="line">5</div><div class="line">&gt;&gt; (def max (lambda (a b) (if (&gt; a b) a b)))</div><div class="line">null</div><div class="line">&gt;&gt; (def c (max a b))</div><div class="line">null</div><div class="line">&gt;&gt; c</div><div class="line">5</div></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒJCScheme æœ‰ä»¥ä¸‹åŸºæœ¬ç‰¹æ€§ï¼š</p>
<ol>
<li>æ”¯æŒæ•´æ•°ï¼ˆJava intå®ç°ï¼‰ä¸å¸ƒå°”ï¼ˆJava boolå®ç°ï¼‰ã€å‡½æ•°ä¸‰ç§ç±»å‹</li>
<li>æä¾›<code>def</code>è¿›è¡Œå˜é‡å®šä¹‰ã€<code>if</code>è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€<code>lambda</code>è¿›è¡Œå‡½æ•°å£°æ˜</li>
<li>æ”¯æŒæ•´æ•°çš„<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>å››ç§åŸºæœ¬ç®—æœ¯æ“ä½œï¼Œ<code>&gt;</code>ã€<code>&lt;</code>ã€<code>=</code>ä¸‰ç§æ¯”è¾ƒæ“ä½œã€‚å‚æ•°å¯ä»¥ä¸ºå¤šä¸ª</li>
<li>æ›´å¤šçš„ç‰¹æ€§å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/JCScheme#ChangeLog" target="_blank" rel="external">ChangeLog</a></li>
</ol>
<h2 id="è§£æè¿‡ç¨‹"><a href="#è§£æè¿‡ç¨‹" class="headerlink" title="è§£æè¿‡ç¨‹"></a>è§£æè¿‡ç¨‹</h2><p><code>è§£æè¿‡ç¨‹</code>çš„ä¸€èˆ¬é¡ºåºä¸º</p>
<blockquote>
<p>è¯æ³•åˆ†æ â€”-&gt; è¯­æ³•åˆ†æ â€”-&gt; è¯­ä¹‰åˆ†æ</p>
</blockquote>
<p>è§£æè¿‡ç¨‹æœ€ä¸»è¦çš„æ˜¯å¾—åˆ°è¯­æ³•æ ‘ï¼Œä¹‹åï¼Œå°±å¯ä»¥ç”±åé¢çš„<code>æ±‚å€¼è¿‡ç¨‹</code>è¿›è¡Œæ±‚å€¼äº†ã€‚</p>
<h3 id="è¯æ³•åˆ†æ"><a href="#è¯æ³•åˆ†æ" class="headerlink" title="è¯æ³•åˆ†æ"></a>è¯æ³•åˆ†æ</h3><p>è¯æ³•åˆ†æï¼ˆlexical analysisï¼‰å°±æ˜¯å°†æºç¨‹åºä¸­çš„å­—ç¬¦åˆ†å‰²ä¸ºä¸€ä¸ªä¸ªå•è¯ï¼ˆtokenï¼Œæ„æˆæºä»£ç æœ€å°çš„å•ä½ï¼‰ã€‚<br>ç”±äº JCScheme ä¸­ä½¿ç”¨å‰ç¼€è¡¨ç¤ºï¼Œæ‰€ä»¥è¯æ³•è§£æå¾ˆç®€å•ï¼Œä¸¤è¡Œä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">src = src.replaceAll(&quot;\\(&quot;, &quot;( &quot;).replaceAll(&quot;\\)&quot;, &quot; )&quot;);</div><div class="line">String[] tokens = src.split(&quot;\\s+&quot;);</div></pre></td></tr></table></figure></p>
<h3 id="è¯­æ³•åˆ†æ"><a href="#è¯­æ³•åˆ†æ" class="headerlink" title="è¯­æ³•åˆ†æ"></a>è¯­æ³•åˆ†æ</h3><p>è¯­æ³•åˆ†æï¼ˆSyntactic analysisï¼Œä¹Ÿå«Parsingï¼‰ä¹Ÿå°±æ˜¯æŠŠè¯æ³•åˆ†æå¾—åˆ°çš„tokenåºåˆ—è½¬åŒ–ä¸º<a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="external">è¯­æ³•æ ‘ï¼ˆASTï¼‰</a>ï¼Œè¯­æ³•æ ‘æ˜¯ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºå½¢å¼ï¼Œä¸å…·ä½“è¯­è¨€æ— å…³ã€‚JCScheme é‡‡ç”¨ Lisp ä¸­ç»å…¸çš„<a href="https://en.wikipedia.org/wiki/S-expression" target="_blank" rel="external">Sè¡¨è¾¾å¼ï¼ˆS-expressionï¼‰</a>æ¥è¡¨ç¤ºè¯­æ³•æ ‘ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2MKQ2fFXXXXX1XpXXXXXXXXXX_!!581166664.png" alt="(* 2 (+ 3 4)) çš„è¯­æ³•æ ‘"><br></center>

<p>AST æœ¬è´¨æ˜¯ä¸€ç§æ ‘ï¼Œå¤§å®¶å¯ä»¥å…ˆæƒ³æƒ³æ•°æ®ç»“æ„ä¸­ä¸€èˆ¬éƒ½æ˜¯æ€ä¹ˆè®¾è®¡æ ‘çš„å­˜å‚¨ç»“æ„ã€‚ï¼ˆå…¶å®åªè¦è®¾è®¡çš„æ•°æ®ç»“æ„èƒ½å¤Ÿä¿è¯è·å–åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼‰ã€‚ä¸‹é¢çœ‹çœ‹æˆ‘çš„å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">public class SExpression &#123;</div><div class="line">    private String value;</div><div class="line">    private SExpression parent;</div><div class="line">    private List&lt;SExpression&gt; children;</div><div class="line"></div><div class="line">    public SExpression(String value, SExpression parent) &#123;</div><div class="line">        this.value = value;</div><div class="line">        this.parent = parent;</div><div class="line">        this.children = new ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean addChild(SExpression child) &#123;</div><div class="line">        return this.children.add(child);</div><div class="line">    &#125;</div><div class="line">    // 3ä¸ª getter å‡½æ•°çœç•¥</div><div class="line">    // è¿›è¡Œæ±‚å€¼çš„ eval å‡½æ•°çœç•¥ï¼Œè¿™æ˜¯é‡ç‚¹ï¼Œåé¢ä¼šå•ç‹¬ä»‹ç»</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        if (0 == children.size()) &#123;</div><div class="line">            return value;</div><div class="line">        &#125; else &#123;</div><div class="line">            StringBuffer displayBuffer = new StringBuffer(value + &quot; &quot;);</div><div class="line">            for (SExpression child : children) &#123;</div><div class="line">                displayBuffer.append(child.toString() + &quot; &quot;);</div><div class="line">            &#125;</div><div class="line">            return displayBuffer.toString();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è§£ætokenåºåˆ—ç”Ÿäº§ASTçš„å‡½æ•°æ˜¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public static final String START_TOKEN = &quot;(&quot;;</div><div class="line">public static final String END_TOKEN = &quot;)&quot;;</div><div class="line"></div><div class="line">public static SExpression parse(String[] tokens) &#123;</div><div class="line">    SExpression root = new SExpression(&quot;&quot;, null);</div><div class="line">    SExpression parent = root;</div><div class="line">    for (String token : tokens) &#123;</div><div class="line">        SExpression newNode = new SExpression(token, parent);</div><div class="line">        parent.addChild(newNode);</div><div class="line">        switch (token) &#123;</div><div class="line">        case Constants.START_TOKEN:</div><div class="line">            parent = newNode;</div><div class="line">            break;</div><div class="line">        case Constants.END_TOKEN:</div><div class="line">            parent = parent.getParent();</div><div class="line">            break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return root;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ª AST æ ¹èŠ‚ç‚¹æ˜¯tokenä¸ºç©ºï¼Œçˆ¶èŠ‚ç‚¹ä¸º null çš„ä¸€èŠ‚ç‚¹ã€‚<br>è¿™é‡Œè§£æçš„æ–¹æ³•æ˜¯ï¼š</p>
<ol>
<li>æ¯ä¸€ä¸ªtokenä¸ºASTä¸Šçš„ä¸€èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹ä¸º parentï¼ˆåˆå§‹ä¸ºrootï¼‰</li>
<li>é‡åˆ°<code>(</code> tokenæ—¶ï¼Œå¼€å§‹åˆ›å»ºè¯¥èŠ‚ç‚¹çš„å­æ ‘ï¼ˆé€šè¿‡è®©è¿™ä¸ªèŠ‚ç‚¹æˆä¸º parent å®ç°ï¼‰</li>
<li>é‡åˆ°<code>)</code> tokenæ—¶ï¼Œè¿›è¡Œå›æº¯ï¼ˆé€šè¿‡æŠŠ parent èµ‹å€¼ä¸º parent.getParent() å®ç°ï¼‰</li>
</ol>
<p>ä¸‹é¢çœ‹ä¸‹<code>(+ 1 2 (* 3 4))</code>ç”Ÿæˆæ€æ ·çš„ <code>SExpression</code>ï¼š</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2l9NefVXXXXbeXXXXXXXXXXXX_!!581166664.png" alt="(+ 1 2 (* 3 4)) AST ç¤ºæ„å›¾"><br></center><br>ä¸Šå›¾æœ€ä¸»è¦çš„ä¸€ç‚¹å°±æ˜¯</p>
<blockquote>
<p>ä¸å·¦æ‹¬å·ç›¸åŒ¹é…çš„å³æ‹¬å·ä½äºå·¦æ‹¬å·çš„æœ€åä¸€ä¸ªå­©å­èŠ‚ç‚¹ä¸Šï¼ˆä»å·¦åˆ°å³ï¼‰ã€‚</p>
</blockquote>
<h3 id="è¯­ä¹‰åˆ†æ"><a href="#è¯­ä¹‰åˆ†æ" class="headerlink" title="è¯­ä¹‰åˆ†æ"></a>è¯­ä¹‰åˆ†æ</h3><p>è¯­ä¹‰åˆ†æï¼ˆSemantic analysisï¼Œä¹Ÿå«context sensitive analysisï¼‰æ ¹æ®ä¸Šä¸€æ­¥ç”Ÿæˆçš„ASTï¼Œæ”¶é›†æºä»£ç çš„ä¿¡æ¯ï¼Œè¿™åŒ…æ‹¬ç±»å‹æ ¡éªŒã€å˜é‡åœ¨ä½¿ç”¨å‰æ˜¯å¦å£°æ˜ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚</p>
<p>å› ä¸º JCScheme ä¸­ç±»å‹æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”å»åšè¯­ä¹‰åˆ†æï¼Œéœ€è¦åšå¾ˆå¤šå¼‚å¸¸å¤„ç†ï¼Œæœ‰äº›ç¹çï¼Œæˆ‘è¿™é‡Œä¸ºäº†ç®€å•éƒ½å¿½ç•¥äº†ã€‚æ‰€ä»¥å¦‚æœä½ è¾“å…¥çš„è¯­æ³•æœ‰è¯¯ï¼ˆæ¯”å¦‚æ‹¬å·ä¸åŒ¹é…ï¼‰ï¼Œé‚£ä¹ˆè§£é‡Šå™¨å°±ä¼šæŠ¥é”™ï¼Œåœ¨åé¢çš„è¿­ä»£ä¸­ä¼šé€æ­¥æ”¹å–„è¿™å—ã€‚</p>
<h2 id="æ±‚å€¼è¿‡ç¨‹"><a href="#æ±‚å€¼è¿‡ç¨‹" class="headerlink" title="æ±‚å€¼è¿‡ç¨‹"></a>æ±‚å€¼è¿‡ç¨‹</h2><p>ç»è¿‡<code>è§£æè¿‡ç¨‹</code>ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†ä¸å…·ä½“è¯­è¨€æ— å…³çš„ ASTï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ±‚å€¼å‘¢ï¼ŒSICP ä¹¦ä¸­ç»™å‡ºç­”æ¡ˆï¼š<code>eval-apply cycle</code>ï¼Œå¦‚ä¸‹å›¾</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2KjMVfFXXXXbOXpXXXXXXXXXX_!!581166664.png" alt="SICP-eval-apply"><br></center><br>evalã€apply è¿™ä¸¤ä¸ªè§„åˆ™æè¿°äº†æ±‚å€¼è¿‡ç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„åŸºæœ¬å¾ªç¯ã€‚åœ¨è¿™ä¸€å¾ªç¯ä¸­</p>
<blockquote>
<p>è¡¨è¾¾å¼åœ¨ç¯å¢ƒä¸­çš„æ±‚å€¼è¢«è§„çº¦åˆ°è¿‡ç¨‹å¯¹å®é™…å‚æ•°çš„åº”ç”¨ï¼Œè€Œè¿™ç§åº”ç”¨åˆè¢«è§„çº¦åˆ°æ–°çš„è¡¨è¾¾å¼åœ¨æ–°çš„ç¯å¢ƒä¸­çš„æ±‚å€¼ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œç›´åˆ°ä¸‹é™åˆ°ç¬¦å·ï¼ˆå…¶å€¼å¯ä»¥åœ¨ç¯å¢ƒä¸­æ‰¾åˆ°ï¼‰æˆ–è€…åŸºæœ¬è¿‡ç¨‹ï¼ˆå®ƒä»¬å¯ä»¥ç›´æ¥åº”ç”¨ï¼‰ã€‚</p>
</blockquote>
<p>åœ¨<a href="http://stackoverflow.com/a/6269132/2163429" target="_blank" rel="external">StackOverflow</a>ä¸Šæ‰¾åˆ°ä¸€æ¯”è¾ƒå¥½ç†è§£çš„è§£é‡Šï¼š</p>
<ul>
<li>the one that eval is doing, is dealing with the syntactic translation of code to its meaning â€“ but itâ€™s doing almost nothing except dispatching over the expression type</li>
<li>apply is to call function with values.</li>
<li>A major enlightenment moment here is to realize that there is a major difference between this eval and apply â€“ the former inherently deals with syntax, but the latter deals with values.</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿåœ¨è¯» SICPï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„<code>eval</code>ã€ä¸<code>apply</code>çš„å…·ä½“å®ç°ï¼Œå¯¹ Scheme ä¸äº†è§£çš„å¯ä»¥ç›´æ¥ç•¥è¿‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">(define (eval exp env)</div><div class="line">  (cond ((self-evaluating? exp) exp)</div><div class="line">        ((variable? exp) (lookup-variable-value exp env))</div><div class="line">        ((quoted? exp) (text-of-quotation exp))</div><div class="line">        ((assignment? exp) (eval-assignment exp env))</div><div class="line">        ((definition? exp) (eval-definition exp env))</div><div class="line">        ((if? exp) (eval-if exp env))</div><div class="line">        ((lambda? exp)</div><div class="line">         (make-procedure (lambda-parameters exp)</div><div class="line">                         (lambda-body exp)</div><div class="line">                         env))</div><div class="line">        ((begin? exp)</div><div class="line">         (eval-sequence (begin-actions exp) env))</div><div class="line">        ((cond? exp) (eval (cond-&gt;if exp) env))</div><div class="line">        ((application? exp)</div><div class="line">         (apply (eval (operator exp) env)</div><div class="line">                (list-of-values (operands exp) env)))</div><div class="line">        (else</div><div class="line">         (error &quot;Unknown expression type -- EVAL&quot; exp))))</div><div class="line"></div><div class="line">(define (apply procedure arguments)</div><div class="line">  (cond ((primitive-procedure? procedure)</div><div class="line">         (apply-primitive-procedure procedure arguments))</div><div class="line">        ((compound-procedure? procedure)</div><div class="line">         (eval-sequence</div><div class="line">           (procedure-body procedure)</div><div class="line">           (extend-environment</div><div class="line">             (procedure-parameters procedure)</div><div class="line">             arguments</div><div class="line">             (procedure-environment procedure))))</div><div class="line">        (else</div><div class="line">         (error</div><div class="line">          &quot;Unknown procedure type -- APPLY&quot; procedure))))</div></pre></td></tr></table></figure></p>
<p>ç®€å•æ¥è¯´ï¼Œ<code>eval</code>çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç†è§£ AST çš„å«ä¹‰ï¼Œæ ¹æ®å…¶å«ä¹‰è¿›è¡Œç›¸åº”å¤„ç†ï¼Œæ¯”å¦‚èµ‹å€¼è¯­å¥æœ‰å…¶ç‹¬ç‰¹çš„å¤„ç†æ–¹å¼ï¼Œif è¯­å¥æœ‰å…¶ç‹¬ç‰¹çš„å¤„ç†æ–¹å¼ç­‰ç­‰ã€‚<br>ä¸ºäº†èƒ½å¤Ÿè®©<code>apply</code>è¿›è¡Œå‡½æ•°è°ƒç”¨æ±‚å€¼ï¼Œéœ€è¦æŠŠ AST è§£é‡Šä¸º JCScheme ä¸­å†…ç½®çš„ç±»å‹ï¼Œè€Œè¿™å°±æ˜¯ JCScheme ä¸­<code>eval</code>çš„ä¸»è¦ä½œç”¨ã€‚</p>
<h3 id="ç±»å‹å®šä¹‰"><a href="#ç±»å‹å®šä¹‰" class="headerlink" title="ç±»å‹å®šä¹‰"></a>ç±»å‹å®šä¹‰</h3><p>å®šä¹‰ä¸€ä¸ªåŸºç±»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public abstract class SObject &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç„¶åæ˜¯æ•´æ•°ç±»å‹ä¸å¸ƒå°”ç±»å‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">public class SNumber extends SObject&#123;</div><div class="line"></div><div class="line">    private int value;</div><div class="line"></div><div class="line">    public int getValue() &#123;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line">    public SNumber(int value) &#123;</div><div class="line">        this.value = value;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return String.valueOf(value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">public class SBool extends SObject&#123;</div><div class="line">    private boolean value;</div><div class="line"></div><div class="line">    public boolean getValue() &#123;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SBool(boolean value) &#123;</div><div class="line">        this.value = value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return String.valueOf(value);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸¤ä¸ªç±»æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”æ³¨æ„åˆ°æ²¡æœ‰ä¸ºå…¶æˆå‘˜å˜é‡æä¾›<code>setter</code>å‡½æ•°ï¼Œè¿™è¯´æ˜è¿™äº›ç±»å‹æ˜¯ä¸å¯å˜çš„ã€‚<br>æœ€åä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ˜¯å‡½æ•°ç±»å‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">public class SFunction extends SObject&#123;</div><div class="line"></div><div class="line">    List&lt;String&gt; param;</div><div class="line">    SExpression body;</div><div class="line"></div><div class="line">    public SFunction(List&lt;String&gt; param, SExpression body) &#123;</div><div class="line">        this.param = param;</div><div class="line">        this.body = body;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SObject apply(SObject... args) &#123;</div><div class="line">        for(int i = 0; i&lt; args.length; i ++) &#123;</div><div class="line">            SScope.env.put(param.get(i), args[i]);</div><div class="line">        &#125;</div><div class="line">        SObject ret = body.eval();</div><div class="line">        for(int i = 0; i&lt; args.length; i ++) &#123;</div><div class="line">            SScope.env.remove(param.get(i));</div><div class="line">        &#125;</div><div class="line">        return ret;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        StringBuffer buffer = new StringBuffer(&quot;Function : args [&quot;);</div><div class="line">        for(String p : param) &#123;</div><div class="line">            buffer.append(p + &quot;, &quot;);</div><div class="line">        &#125;</div><div class="line">        buffer.append(&quot;]\n&quot;);</div><div class="line">        buffer.append(&quot;Body :\n&quot;);</div><div class="line">        buffer.append(body.toString());</div><div class="line">        return buffer.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>SFunction</code>å†…éƒ¨æœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œç”¨æ¥è¡¨ç¤ºå…¶<code>å‚æ•°åˆ—è¡¨</code>ä¸<code>å‡½æ•°ä½“</code>ã€‚å…¶ä¸­çš„<code>apply</code>è¡¨ç¤ºå‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ°æ— éå°±æ˜¯æŠŠå½¢å¼å‚æ•°ä¸å®é™…å‚æ•°è¿›è¡Œæ†ç»‘ï¼ˆç°åœ¨æ”¾åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼ŒæŒ‰ç†è¯´è¿™æ—¶åº”è¯¥ç”Ÿæˆä¸€æ–°ç¯å¢ƒï¼Œåé¢è®²æ±‚å€¼è¿‡ç¨‹æ—¶ä¼šä»‹ç»æ”¹è¿›ç‰ˆçš„SFunctionï¼‰ï¼Œä¹‹åè°ƒç”¨<code>SExpression</code>çš„<code>eval</code>æ–¹æ³•ï¼Œå¾—åˆ°ç”¨å†…ç½®ç±»å‹è¡¨ç¤ºçš„ç»“æœã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„é‡ç‚¹åˆå›åˆ°<code>eval</code>æ–¹æ³•ä¸Šå»äº†ã€‚ JCScheme çš„ä¸»è¦å¤æ‚ç‚¹ä¹Ÿå°±ç®—åœ¨<code>SExpression</code>çš„<code>eval</code>æ–¹æ³•ä¸Šï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°æŠŠ<code>SExpression</code>è½¬ä¸ºå†…ç½®ç±»å‹ï¼Œæ‰€ä»¥æŒ‰ç†è¯´ä¹Ÿåº”è¯¥æ˜¯å¤æ‚çš„ã€‚</p>
<p><code>eval</code>çš„å·¥ä½œåŸç†æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯çœ‹æºç <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/JCExpression.java#L41" target="_blank" rel="external">JCScheme/SExpression.java</a>ï¼Œè¿™ä¸ªæ–¹æ³•åé¢ä¼šä¸æ–­å®Œå–„ã€‚</p>
<h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸä¹Ÿå¯ä»¥ç†è§£ä¸ºç¯å¢ƒï¼Œé‡Œé¢æ˜¯ä¸€ç³»åˆ—çš„ bindingï¼Œç”¨ä»¥ä¿å­˜å˜é‡åä¸å…¶å¯¹åº”å€¼ã€‚<br>åœ¨ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä½œç”¨åŸŸä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>é™æ€ä½œç”¨åŸŸï¼ˆstatic/lexical scopeï¼‰ï¼Œç¯å¢ƒåœ¨å£°æ˜æ—¶æŒ‡å®šã€‚JCSchemeã€Cã€Javaã€Python ç­‰ç°åœ¨å¤§éƒ¨åˆ†è¯­è¨€éƒ½å±äºæ­¤ç±»ã€‚</li>
<li>åŠ¨æ€ä½œç”¨åŸŸï¼ˆdynamic scopeï¼‰ï¼Œç¯å¢ƒåœ¨è¿è¡Œæ—¶æŒ‡å®šã€‚æœ€å¸¸è§çš„å°±æ˜¯å„ç§ Shellï¼ŒåƒBashã€Kshç­‰ï¼Œå…¶æ¬¡è¿˜æœ‰ emacs-lispã€‚æ›´å¤šå¯å‚è€ƒ <a href="http://stackoverflow.com/questions/1473111/besides-logo-and-emacs-lisp-what-are-other-pure-dynamically-scoped-languages" target="_blank" rel="external">what are other pure dynamically scoped languages?</a></li>
</ul>
<p>ä¸ºäº†è§£å†³åœ¨ JCScheme ä¸­å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ–°åˆ›å»ºç¯å¢ƒçš„çˆ¶ç¯å¢ƒåº”è¯¥æŒ‡å‘è¿è¡Œæ—¶çš„ç¯å¢ƒè¿˜æ˜¯å£°æ˜æ—¶çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å» Stackoverflow ä¸Šæäº†ä¸ª<a href="http://stackoverflow.com/questions/33056236/scheme-environment-model-closure-issue" target="_blank" rel="external">é—®é¢˜</a>ï¼Œå¯¹ä½œç”¨åŸŸä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹çœ‹ã€‚</p>
<p> JCScheme ä¸­ï¼Œä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œåé¢æˆ‘é€æ¸æŠŠè¿™å¿«ç»™å®Œå–„äº†ï¼Œä¸»è¦æ˜¯ <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/SScope.java" target="_blank" rel="external">SScope</a> ç±» ä¸ <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/type/SFunction.java" target="_blank" rel="external">SFunction</a> ç±»ã€‚<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"> public class SScope &#123;</div><div class="line">    // æ¯ä¸ªç¯å¢ƒéƒ½æŒ‡å‘ä¸€ä¸ªçˆ¶ç¯å¢ƒï¼Œå…¨å±€ç¯å¢ƒçˆ¶ç¯å¢ƒä¸º null</div><div class="line">    private SScope parent;</div><div class="line">    private Map&lt;String, SObject&gt; env;</div><div class="line"></div><div class="line">    public SScope getParent() &#123;</div><div class="line">        return parent;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Map&lt;String, SObject&gt; getEnv() &#123;</div><div class="line">        return env;</div><div class="line">    &#125;</div><div class="line">    // åœ¨æŸ¥æ‰¾å˜é‡æ—¶ï¼Œå¦‚ä½•å½“å‰ scope ä¸­æ²¡æœ‰ï¼Œä¼šæ²¿ç€ç¯å¢ƒé“¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ç¯å¢ƒä¸­</div><div class="line">    public SObject findVariable(String var) &#123;</div><div class="line">        if (env.containsKey(var)) &#123;</div><div class="line">            return env.get(var);</div><div class="line">        &#125; else &#123;</div><div class="line">            SScope p = this.getParent();</div><div class="line">            while (p != null) &#123;</div><div class="line">                Map&lt;String, SObject&gt; subEnv = p.getEnv();</div><div class="line">                if (subEnv.containsKey(var)) &#123;</div><div class="line">                    return subEnv.get(var);</div><div class="line">                &#125;</div><div class="line">                p = p.getParent();</div><div class="line">            &#125;</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // å½“å‰çš„ç¯å¢ƒ</div><div class="line">    public static SScope current = null;</div><div class="line">    public static Map&lt;String, String&gt; builtinFuncs = new HashMap&lt;String, String&gt;();</div><div class="line">    public static Map&lt;String, String&gt; builtinKeywords = new HashMap&lt;String, String&gt;();</div><div class="line">    // çœç•¥ä¸€ä¸ªå†…ç½®å‡½æ•°ã€å…³é”®å­—çš„åˆå§‹åŒ–</div><div class="line">    // ...</div><div class="line">&#125;</div><div class="line">public class SFunction extends SObject &#123;</div><div class="line"></div><div class="line">    private List&lt;String&gt; param;</div><div class="line">    private List&lt;SExpression&gt; body;</div><div class="line">    private SScope scope;</div><div class="line"></div><div class="line">    public List&lt;String&gt; getParam() &#123;</div><div class="line">        return param;</div><div class="line">    &#125;</div><div class="line">    // åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œä¼ å…¥å½“å‰çš„ç¯å¢ƒ</div><div class="line">    public SFunction(List&lt;String&gt; param, List&lt;SExpression&gt; body, SScope scope) &#123;</div><div class="line">        this.param = param;</div><div class="line">        this.body = body;</div><div class="line">        this.scope = scope;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SObject apply(SObject... args) &#123;</div><div class="line">        // ä¿å­˜å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ç¯å¢ƒï¼Œç›¸å½“äºå…¥æ ˆ</div><div class="line">        SScope originScope = SScope.current;</div><div class="line">        // åˆ›å»ºä¸€ä¸ªæŒ‡å‘å‡½æ•°å£°æ˜ä¼ å…¥çš„ç¯å¢ƒçš„æ–°ç¯å¢ƒï¼Œä¿å­˜å½¢å‚ä¸å®å‚çš„ç»‘å®šå…³ç³»ã€‚</div><div class="line">        // è¿™é‡Œæ„é€ æ–°ç¯å¢ƒæ—¶ç”¨åˆ°äº†å£°æ˜å‡½æ•°æ—¶ä¼ å…¥çš„ç¯å¢ƒï¼Œè¿™ç‚¹è¯´æ˜äº† JCScheme æ˜¯é™æ€ä½œç”¨åŸŸçš„</div><div class="line">        SScope funcScope = new SScope(this.scope);</div><div class="line">        // è®¾ç½®å½“å‰ç¯å¢ƒä¸º æ–°åˆ›å»ºçš„ç¯å¢ƒï¼Œè¿™æ—¶æ‰€æœ‰çš„æ±‚å€¼ï¼Œéƒ½æ˜¯åœ¨å…¶ä¸­è¿›è¡Œ</div><div class="line">        SScope.current = funcScope;</div><div class="line">        SObject ret = null;</div><div class="line">        for (int i = 0; i &lt; args.length; i++) &#123;</div><div class="line">            SScope.current.getEnv().put(param.get(i), args[i]);</div><div class="line">        &#125;</div><div class="line">        if (args.length &lt; param.size()) &#123;</div><div class="line">            // å®ç°å‡½æ•°éƒ¨åˆ†è°ƒç”¨ï¼Œ currying</div><div class="line">            List&lt;String&gt; subParam = param.subList(args.length, param.size());</div><div class="line">            ret = new SFunction(subParam, body, funcScope);</div><div class="line">        &#125; else &#123;</div><div class="line">            int bodySize = body.size();</div><div class="line">            for (int i = 0; i &lt; bodySize - 1; i++) &#123;</div><div class="line">                body.get(i).eval();</div><div class="line">            &#125;</div><div class="line">            // only return last exp</div><div class="line">            ret = body.get(bodySize - 1).eval();</div><div class="line">        &#125;</div><div class="line">        // GC will clean unused scope</div><div class="line">        // æ¢å¤å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ç¯å¢ƒï¼Œç›¸å½“äºå‡ºæ ˆ</div><div class="line">        SScope.current = originScope;</div><div class="line">        return ret;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h2 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h2><p>ç»è¿‡ä¸Šé¢è¿™äº›å·¥ä½œï¼ŒJCScheme å·²ç»å¤§åŠŸå‘Šæˆäº†ï¼ˆå¸Œæœ›æ²¡æœ‰bugğŸ˜Šï¼‰ã€‚ä½†æ˜¯ä¸‹é¢è¿™äº›ç‚¹éƒ½æ²¡æœ‰æ¶‰åŠ</p>
<ol>
<li>å‡½æ•°çš„é€’å½’è°ƒç”¨</li>
<li><del>åŒ¿åå‡½æ•°çš„ç›´æ¥è°ƒç”¨ï¼Œå¦‚<code>((lambda (a b) (+ a b)) 1 2)</code>ï¼Œç°åœ¨è¿™æ ·çš„æ–¹å¼æ˜¯ä¸æ”¯æŒçš„ï¼Œ éœ€è¦å…ˆå®šä¹‰ä¸ªå˜é‡ï¼Œç„¶ååœ¨è°ƒç”¨</del>ï¼Œå·²ç»æ”¯æŒã€‚</li>
<li><del>å‡½æ•°çš„éƒ¨åˆ†è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯<code>currying</code></del>ï¼Œå·²ç»æ”¯æŒ<br>â€¦â€¦</li>
</ol>
<p>åé¢ä¼šé€æ­¥æ·»å‘ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹ JCScheme çš„ <a href="https://github.com/jiacai2050/JCScheme#ChangeLog" target="_blank" rel="external">ChangeLog</a> è·å–æœ€æ–°è¿›å±•ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ï¼Œæœ€å¼€å§‹æ—¶ï¼Œè§‰å¾—åƒ Scheme è¯­æ³•è¿™ä¹ˆç®€å•çš„è¯­è¨€å®ç°èµ·æ¥åº”è¯¥ä¸éš¾ï¼Œåšäº†åæ‰å‘ç°çœ¼é«˜æ‰‹ä½ã€‚æ¯”å¦‚ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è®¾è®¡<code>SExpression</code>æ—¶æ²¡æœ‰<code>parent</code>è¿™ä¸ªå±æ€§å¯¼è‡´äº†æ— æ³•æ­£ç¡®å®ç°<code>parse</code>å‡½æ•°ã€‚ä»¥åŠåé¢åœ¨è®¾è®¡ä½œç”¨åŸŸæ—¶ï¼Œåˆ†ä¸æ¸…æ¥šåˆ°åº•æ˜¯å£°æ˜æ—¶åˆ›å»ºç¯å¢ƒè¿˜æ˜¯è¿è¡Œæ—¶åˆ›å»ºï¼Œç¯å¢ƒçš„çˆ¶ç¯å¢ƒåº”è¯¥æ€ä¹ˆæŒ‡å‘ï¼Œåº”è¯¥æŒ‡å‘å£°æ˜æ—¶çš„ç¯å¢ƒè¿˜æ˜¯è¿è¡Œæ—¶çš„ç¯å¢ƒã€‚<br>ä¸è¿‡æ„Ÿè§¦æœ€æ·±åº”è¯¥æ˜¯è¿™ç‚¹ï¼šåŠ¨æ‰‹ã€‚åœ¨ä¹‹å‰å­¦ä¹ ç¼–ç¨‹è¯­è¨€ï¼Œè¢«å„ç§è¯­æ³•ç±»åº“è™çš„æ­»å»æ´»æ¥ï¼Œè™½ç„¶æƒ³å°è¯•å»å®ç°ä¸ªè‡ªå·±çš„è¯­è¨€ï¼Œä½†æ˜¯ä¸€ç›´è§‰å¾—è‡ªå·±èƒ½åŠ›ä¸å¤Ÿï¼Œæ²¡æ•¢å»å°è¯•ï¼Œéšç€ä¸æ–­å®Œå–„ JCScheme çš„åŠŸèƒ½ï¼Œå¯¹ç¼–ç¨‹è¯­è¨€æœ‰äº†æ›´æ·±åˆ»çš„è®¤è¯†ï¼ŒçœŸæ˜¯æœ‰ç§â€œä¸å…¥è™ç©´,ç„‰å¾—è™å­â€çš„æ„Ÿè§‰ã€‚</p>
<p>å½“ç„¶ï¼ŒJCScheme è¯­è¨€åªæ˜¯åˆšå¼€å§‹ï¼Œè¿˜æ¯”è¾ƒç®€é™‹ï¼Œé«˜æ‰‹è¯·ä¸è¦è§ç¬‘ï¼Œåé¢éšç€å­¦ä¹ çš„æ·±å…¥æˆ‘ä¼šé€æ­¥å®Œå–„ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li>ç‹å çš„<a href="http://www.yinwang.org/blog-cn/2015/09/19/parser/" target="_blank" rel="external">è°ˆè°ˆParser</a></li>
<li><a href="http://zh.lucida.me/blog/how-to-implement-an-interpreter-in-csharp/" target="_blank" rel="external">90åˆ†é’Ÿå®ç°ä¸€é—¨ç¼–ç¨‹è¯­è¨€â€”â€”æç®€è§£é‡Šå™¨æ•™ç¨‹</a></li>
<li>Wiki <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29" target="_blank" rel="external">Scope (computer science)</a></li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://liujiacai.net/blog/2015/10/03/first-toy-scheme/" data-id="cjaf2kkfu002sf9ljc6p1s61h" class="article-share-link">åˆ†äº«</a><div class="tags"><a href="/tags/scheme/">Scheme</a></div><div class="post-nav"><a href="/blog/2015/10/21/programming-guide/" class="pre">è½¬è½½ã€éç§‘ç­å‡ºèº«çš„äººå­¦ä¹ ç¼–ç¨‹ä¸è´Ÿè´£ä»»æŒ‡å—ã€</a><a href="/blog/2015/09/27/java-weakhashmap/" class="next">Java WeakHashMap æºç è§£æ</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">é˜…è¯»è¯„è®º ã€Œè¯·ç¡®ä¿ disqus.com å¯ä»¥æ­£å¸¸åŠ è½½ã€</button></div><script>var disqus_shortname = 'jiacai2050';
var disqus_identifier = 'blog/2015/10/03/first-toy-scheme/';
var disqus_title = 'æˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº†';
var disqus_url = 'http://liujiacai.net/blog/2015/10/03/first-toy-scheme/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/favicon.ico',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//jiacai2050.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://liujiacai.net"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> åˆ†ç±»</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/bigdata/">å¤§æ•°æ®</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/search-engine/">æœç´¢å¼•æ“</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/life/">çƒ­çˆ±ç”Ÿæ´»</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/aha-computer/">ç†è§£è®¡ç®—æœº</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/ç ”ä¹ ç»å…¸/">ç ”ä¹ ç»å…¸</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/algorithm/">ç®—æ³•</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/PL/">ç¼–ç¨‹è¯­è¨€</a><span class="category-list-count">20</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/è½¬è½½/">è½¬è½½</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> æ ‡ç­¾</i></div><div class="tagcloud"><a href="/tags/regexp/" style="font-size: 15px;">regexp</a> <a href="/tags/music/" style="font-size: 15px;">music</a> <a href="/tags/java/" style="font-size: 15px;">Java</a> <a href="/tags/lucene/" style="font-size: 15px;">lucene</a> <a href="/tags/mooc/" style="font-size: 15px;">mooc</a> <a href="/tags/hadoop/" style="font-size: 15px;">hadoop</a> <a href="/tags/gcd/" style="font-size: 15px;">gcd</a> <a href="/tags/mozilla/" style="font-size: 15px;">mozilla</a> <a href="/tags/lambda/" style="font-size: 15px;">Lambda</a> <a href="/tags/lisp/" style="font-size: 15px;">Lisp</a> <a href="/tags/æœ€ä½³å®è·µ/" style="font-size: 15px;">æœ€ä½³å®è·µ</a> <a href="/tags/GEB/" style="font-size: 15px;">GEB</a> <a href="/tags/javascript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/sicp/" style="font-size: 15px;">sicp</a> <a href="/tags/nodejs/" style="font-size: 15px;">nodejs</a> <a href="/tags/scheme/" style="font-size: 15px;">Scheme</a> <a href="/tags/string/" style="font-size: 15px;">string</a> <a href="/tags/python/" style="font-size: 15px;">Python</a> <a href="/tags/ruby/" style="font-size: 15px;">Ruby</a> <a href="/tags/é©¬æ‹‰æ¾/" style="font-size: 15px;">é©¬æ‹‰æ¾</a> <a href="/tags/Clojure/" style="font-size: 15px;">Clojure</a> <a href="/tags/åƒé‡Œè·¯/" style="font-size: 15px;">åƒé‡Œè·¯</a> <a href="/tags/ideas/" style="font-size: 15px;">ideas</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> æœ€è¿‘æ–‡ç« </i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/blog/2017/11/22/create-firefox-chrome-extensions-in-clojurescript/">ä½¿ç”¨ ClojureScript å¼€å‘æµè§ˆå™¨æ’ä»¶çš„è¿‡ç¨‹ä¸æ”¶è·</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/10/01/macro-in-action/">ç”±æµ…å…¥æ·±å­¦ä¹  Lisp å®ä¹‹å®æˆ˜ç¯‡</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/08/31/master-macro-understand-symbol/">ç”±æµ…å…¥æ·±å­¦ä¹  Lisp å®ä¹‹ç†è®ºç¯‡</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/05/11/review-of-secret-of-silicon-valley/">ã€Šç¡…è°·ä¹‹è°œã€‹è¯»åæ„Ÿ</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/04/02/clojure-web-dev-ring-usage/">Clojure Web å¼€å‘-- Ring ä½¿ç”¨æŒ‡å—</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/03/22/ace-technical-interview/">â€œç©è½¬â€ æŠ€æœ¯é¢è¯•â€”â€”é“¾è¡¨çš„å‡½æ•°è¡¨ç¤ºæ³•</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/03/05/method-vs-proc-in-ruby/">è¾¨æ Ruby ä¸­çš„ Method ä¸ Proc</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/02/09/clojure-compiler-analyze-2/">Clojure è¿è¡ŒåŸç†ä¹‹å­—èŠ‚ç ç”Ÿæˆç¯‡</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/02/05/clojure-compiler-analyze/">Clojure è¿è¡ŒåŸç†ä¹‹ç¼–è¯‘å™¨å‰–æç¯‡</a></li><li class="post-list-item"><a class="post-list-link" href="/blog/2017/01/08/review-2016/">2016 å¹´ç»ˆæ€»ç»“</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> æœ€è¿‘è¯„è®º</i></div><script type="text/javascript" src="//jiacai2050.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright Â© 2017 <a href="/." rel="nofollow">Keep Writing Codes.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?3ffc15f400ce3f8b1db5afc4f29b6ce9";
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>