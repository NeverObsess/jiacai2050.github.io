<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Keep Writing Codes</title>
  <subtitle>åˆ†äº«ä¸äº¤æµï¼ŒLispã€Pythonã€Node.jsã€FPã€Javaã€Algorithm</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://liujiacai.net/"/>
  <updated>2017-09-02T08:04:28.000Z</updated>
  <id>http://liujiacai.net/</id>
  
  <author>
    <name>åˆ˜å®¶è´¢</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç”±æµ…å…¥æ·±å­¦ä¹  Lisp å®ï¼ˆç¬¬ä¸€ç¯‡ï¼‰</title>
    <link href="http://liujiacai.net/blog/2017/08/31/master-macro-understand-symbol/"/>
    <id>http://liujiacai.net/blog/2017/08/31/master-macro-understand-symbol/</id>
    <published>2017-08-31T14:17:52.000Z</published>
    <updated>2017-09-02T08:04:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>å®ï¼ˆmacroï¼‰æ˜¯ Lisp è¯­è¨€ä¸­æœ€é‡è¦çš„æ­¦å™¨ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¿è¡Œæ—¶çš„ä»£ç ã€‚å®ä¹Ÿæ˜¯ç¼–å†™é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰çš„åˆ©å™¨ï¼Œå¯ä»¥åœ¨ä¸æ”¹åŠ¨è¯­è¨€æœ¬èº«çš„åŸºç¡€ä¸Šï¼Œå¢åŠ æ–°çš„ç¨‹åºæ„é€ ä½“ï¼Œè¿™åœ¨å…¶ä»–è¯­è¨€ä¸­æ˜¯ä¸å¯èƒ½ã€‚æ¯”å¦‚ï¼Œç°åœ¨æ¯”è¾ƒæµè¡Œçš„åŒæ­¥æ–¹å¼å†™å¼‚æ­¥ä»£ç çš„ async/awaitï¼Œåœ¨é Lisp è¯­è¨€éœ€è¦è¯­è¨€æœ¬èº«æ”¯æŒï¼Œä½†æ˜¯åœ¨ Lisp é‡Œé¢å¯ä»¥é€šè¿‡å‡ ä¸ªå®æ¥è§£å†³ï¼Œå¯ä»¥å‚è€ƒï¼š<a href="https://github.com/clojure/core.async" target="_blank" rel="external">core.async</a>ã€‚</p>
<blockquote>
<p>With great power comes great responsibility.</p>
</blockquote>
<p>ç”±äºå®çš„å¼ºå¤§ï¼ŒæŒæ¡ç¼–å†™å®ƒçš„æ–¹æ³•æœ‰è¾ƒå¤§çš„éš¾åº¦ï¼Œæ‰€ä»¥ç¤¾åŒºä¸€èˆ¬ä¼šå»ºè®®èƒ½ä¸ç”¨å°±ä¸è¦ç”¨å®ƒï¼Œæˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒè®¤åŒè¿™ä¸€ç‚¹ï¼Œä½†æ˜¯å¯¹äºä¸€äº›åœºæ™¯ç”¨å®ç¡®å®ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œèƒ½ä½¿ç¨‹åºç®€æ´æ˜äº†ï¼Œæ‰€ä»¥è¿˜æ˜¯æœ‰å¿…è¦æŒæ¡å®ƒçš„ï¼Œç­‰æœ‰ä¸€å®šç»éªŒï¼Œå°±å¯ä»¥çŸ¥é“åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨æœ€åˆé€‚äº†ã€‚</p>
<p>ä¸ºäº†ç”±æµ…å…¥æ·±ã€ç³»ç»Ÿåœ°ä»‹ç»å®ï¼Œæ‰“ç®—åˆ†ä¸¤ç¯‡æ–‡ç« æ¥ä»‹ç»ï¼Œç¬¬ä¸€ç¯‡ä¸ºç†è®ºç¯‡ï¼Œä¸»è¦ä»‹ç» </p>
<ul>
<li>Symbol æ•°æ®ç±»å‹ï¼Œä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Œä»¥åŠå…¶ä»–é Lisp è¯­è¨€ä¸ºä»€ä¹ˆæ²¡æœ‰</li>
<li>å®çš„æœ¬è´¨ï¼Œå®è¿è¡Œæ—¶æœŸ</li>
</ul>
<p>ç¬¬äºŒç¯‡æ˜¯å®æˆ˜ç¯‡ï¼Œä»‹ç»å®çš„ä¸€äº›å¸¸è§æŠ€å·§ä»¥åŠä¸€äº›é€šç”¨å®ã€‚è¿™ä¸¤ç¯‡å‡ä»¥ Clojure æ–¹è¨€ä¸ºç¤ºä¾‹ï¼Œä½†å…¶æ¦‚å¿µåŸç†åœ¨å…¶ä»– Lisp ä¸­éƒ½æ˜¯ç›¸é€šçš„ã€‚æœ¬æ–‡ä¸ºç¬¬ä¸€ç¯‡ã€‚</p>
<h2 id="Symbol-æ•°æ®ç±»å‹"><a href="#Symbol-æ•°æ®ç±»å‹" class="headerlink" title="Symbol æ•°æ®ç±»å‹"></a>Symbol æ•°æ®ç±»å‹</h2><p>åœ¨ Clojure é‡Œé¢ï¼Œé™¤äº† numberï¼Œstringï¼Œlistï¼Œmap ç­‰å¸¸è§åŸºæœ¬æ•°æ®ç±»å‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ <a href="https://clojure.org/reference/data_structures#Symbols" target="_blank" rel="external">Symbol ç±»å‹</a>ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>Symbols are identifiers that are normally used to refer to something else.</p>
</blockquote>
<p>å¯ä»¥è¯´ symbol å°±æ˜¯ä¸€äº›æ ‡è¯†ç¬¦ï¼Œç”¨æ¥ä»£æŒ‡å…¶ä»–ä¸œè¥¿ï¼Œå’Œè‹±æ–‡ä¸­ he/she/it ç­‰ã€Œä»£è¯ã€çš„ä½œç”¨å·®ä¸å¤šã€‚<br>ç°åœ¨ç¼–ç¨‹ä½¿ç”¨çš„éƒ½æ˜¯é«˜çº§è¯­è¨€ï¼Œå…¶è¯­è¨€æ„é€ ä½“ï¼ˆlanguageâ€™s constructorï¼‰æ˜¯ç”±ä¸€äº›å…³é”®å­—ä¸ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ç»„æˆï¼Œè€Œè¿™äº›éƒ½æ˜¯ symbolï¼Œæ¯”å¦‚ä¸‹é¢ä¸€ä¸ª Hello World çš„ç¤ºä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(defn hello [greeting]</div><div class="line">  (println &quot;Hello &quot; greeting))</div><div class="line"></div><div class="line">(hello &quot;world&quot;)</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ defn, hello, greeting, println éƒ½æ˜¯ symbolï¼Œç”¨æ¥æŒ‡å‘å…¶ä»–æ•°æ®ç±»å‹ï¼Œåœ¨è¿›è¡Œæ±‚å€¼ï¼ˆevalï¼‰æ—¶ï¼ŒCompiler ä¼šè®¡ç®—å‡ºç›¸åº”å€¼ã€‚Clojure é‡Œé¢æä¾›äº† def è¿™ä¸ª<a href="https://clojure.org/reference/special_forms" target="_blank" rel="external">special form</a>æ¥å»ºç«‹ symbol åˆ°å…¶ä»–å€¼çš„æ˜ å°„å…³ç³»ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(def cat &quot;Tom&quot;)</div></pre></td></tr></table></figure></p>
<p>ç®€å•æ¥è¯´ä¸Šé¢è¿™ä¸€å¥æŠŠ symbol æ‰§è¡Œäº†å­—ç¬¦ä¸²<code>Tom</code>ï¼Œä½†æ˜¯ç”±äº Clojure é‡Œé¢ä¸ºäº†å®ç°å…¶åŠ¨æ€ç‰¹æ€§ï¼ŒçœŸå®çš„æƒ…å†µç¨å¾®å¤æ‚ä¸€äº›ï¼Œè§ä¸‹å›¾ï¼š<br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2vBerXioaPuJjSsplXXbg7XXa_!!581166664.png" alt=""></p>
<p>Var æ˜¯Clojureé‡Œé¢æä¾›çš„<a href="http://clojure-doc.org/articles/language/concurrency_and_parallelism.html#clojure-reference-types" target="_blank" rel="external">å››ç§å¼•ç”¨ç±»å‹</a>ä¸­æœ€å¸¸ç”¨çš„ï¼Œæ”¯æŒåŠ¨æ€ä½œç”¨åŸŸä»¥åŠ thread-local å€¼ã€‚åŠ¨æ€ä½œç”¨åŸŸå‡½æ•°å†…çš„è‡ªç”±å˜é‡çš„å€¼æ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šçš„ï¼Œè¿™é‡Œä¸æ¸…æ¥šçš„å¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« <a href="/blog/2016/05/28/scope-closure/">ã€Šç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ä½œç”¨åŸŸä¸é—­åŒ…ã€‹</a>ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<p>ç»§ç»­å›åˆ°ä¸Šé¢çš„å›¾ç‰‡ï¼Œdef ä¼šæŠŠ symbol æŒ‡å‘åŒåçš„ varï¼ŒåŒæ—¶æŠŠ var æŒ‡å‘å­—ç¬¦ä¸² Tomï¼ˆå«åš root bindingï¼‰ã€‚</p>
<h3 id="å­—é¢é‡"><a href="#å­—é¢é‡" class="headerlink" title="å­—é¢é‡"></a>å­—é¢é‡</h3><p>ç”±ä¸Šé¢ä»‹ç»æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒClojure ç¼–è¯‘å™¨åœ¨é‡åˆ° symbol æ—¶ï¼Œä¼šå¯¹å…¶è¿›è¡Œæ±‚å€¼ï¼Œå¯ä»¥ç”¨<code>&#39;</code>æ¥è¡¨ç¤ºå…¶å­—é¢é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">user&gt; (def tom &apos;tom)  ;; è¿™é‡ŒæŒ‡å‘çš„å€¼ä¸ºä¸€ä¸ª symbol ç±»å‹çš„ tom</div><div class="line">#&apos;user/tom</div><div class="line">user&gt; tom</div><div class="line">tom</div></pre></td></tr></table></figure>
<p>æœ‰ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä»»ä½•ä¸¤ä¸ªåŒåçš„ symbol æ˜¯ä¸ç›¸ç­‰çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">user&gt; (identical? &apos;tom &apos;tom)</div><div class="line">false</div></pre></td></tr></table></figure></p>
<p>åˆæ¬¡æ¥è§¦å¯èƒ½ä¼šæœ‰äº›ç–‘æƒ‘ï¼Œä½†ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œå¯ä»¥æƒ³æƒ³</p>
<blockquote>
<p>ç›¸åŒåçš„å˜é‡ï¼Œåœ¨ä¸åŒåœ°æ–¹ï¼Œä¸åŒæ—¶åˆ»å…·æœ‰ä¸åŒçš„å€¼æ˜¯å†æ­£å¸¸ä¸è¿‡çš„äº†ã€‚</p>
</blockquote>
<p>æœ€åæ¯”è¾ƒé‡è¦çš„ä¸€ç‚¹ï¼Œå®ä¼ å…¥çš„å‚æ•°éƒ½æ˜¯ symbol å­—é¢é‡ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">user&gt; (def a 1)</div><div class="line">#&apos;user/a</div><div class="line">user&gt; (defmacro demo-macro [params] (println params))</div><div class="line">#&apos;user/demo-macro</div><div class="line">user&gt; (demo-macro a)</div><div class="line">a</div><div class="line">nil</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæ‰“å°çš„æ˜¯symbol <code>a</code>ï¼Œè€Œä¸æ˜¯æ•°å­— 1ã€‚ç”±äº<code>demo-macro</code>ä»€ä¹ˆä¹Ÿæ²¡è¿”å›ï¼Œæ‰€ä»¥åœ¨æ‰“å°å‡º a ä¹‹åè¾“å‡ºäº† nilã€‚</p>
<h2 id="å®çš„æœ¬è´¨"><a href="#å®çš„æœ¬è´¨" class="headerlink" title="å®çš„æœ¬è´¨"></a>å®çš„æœ¬è´¨</h2><p>ç”±äº Lisp é‡‡ç”¨ s-expression ä½œä¸ºå…¶è¯­æ³•ï¼Œæ‰€ä»¥å¤©ç„¶å…·æœ‰ code as data çš„ç‰¹ç‚¹ï¼Œä¹Ÿå°±æ˜¯è¯´ Lisp ç¨‹åºæœ¬èº«å°±æ˜¯ä¸€ä¸ª Lisp æ•°æ®ï¼Œå¯ä»¥åƒæ“ä½œå…¶ä»–æ•°æ®ç±»å‹ä¸€æ ·æ¥æ“ä½œç¨‹åºæœ¬èº«ï¼Œè¿™å…¶å®å°±æ˜¯å®åšçš„äº‹æƒ…ã€‚è€ç‰Œ Lisp hacker <a href="http://www.paulgraham.com" target="_blank" rel="external">Paul Graham</a> åœ¨é»‘å®¢ä¸ç”»å®¶ä¸€ä¹¦ä¸­æœ‰<a href="/blog/2016/12/31/dev-in-clojure/#Why-Lisp">æåˆ°</a>ï¼š</p>
<blockquote>
<p>Lisp å¹¶ä¸ä¸¥æ ¼åŒºåˆ†è¯»å–æœŸã€ç¼–è¯‘å™¨ã€è¿è¡ŒæœŸã€‚åœ¨ç¼–è¯‘å™¨é‡Œé¢å»è¿è¡Œå°±æ˜¯å®ï¼Œå¯ä»¥ç”¨æ¥æ‰©å±•è¯­è¨€ã€‚</p>
</blockquote>
<p>å…³äºè¿™ä¸‰ä¸ªæ—¶æœŸçš„å…³ç³»ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å›¾æ¥è¡¨ç¤º<br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB27iCQbiIRMeJjy0FbXXbnqXXa_!!581166664.png" alt="Lisp ä¸­ä¸åŒæ—¶æœŸçš„äº¤äº’å›¾"></p>
<p>ç”±äºè¿è¡ŒæœŸä¸»è¦è¿›è¡Œçš„æ˜¯å‡½æ•°çš„è°ƒç”¨ï¼Œç»“åˆä¸Šé¢ symbol çš„çŸ¥è¯†å¯ä»¥è¿™ä¹ˆå®šä¹‰å®</p>
<blockquote>
<p>å®æ˜¯ç¼–è¯‘æœŸæ‰§è¡Œçš„å‡½æ•°ï¼Œå‚æ•°ä¸º symbol ç±»å‹ï¼Œè¿”å›ç”± symbol ç»„æˆçš„ç¨‹åºï¼ˆä¹Ÿæ˜¯æ•°æ®ï¼‰ã€‚è¿”å›å€¼åœ¨è¿è¡Œæ—¶æ‰§è¡Œã€‚</p>
</blockquote>
<p>å®šä¹‰å®çš„<code>defmacro</code>æœ¬èº«ä¹Ÿæ˜¯ä¸ªå®ï¼Œå¯ä»¥å°†å…¶å±•å¼€ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">user&gt; (macroexpand &apos;(defmacro demo-macro [params] params))</div><div class="line"></div><div class="line">(do</div><div class="line">  (defn demo-macro ([&amp;form &amp;env params] params))</div><div class="line">  (. #&apos;demo-macro (setMacro))</div><div class="line">  #&apos;demo-macro)</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒClojure é‡Œé¢æ˜¯è°ƒç”¨ <code>setMacro</code> æ¥å°†å®ä¸ä¸€èˆ¬çš„å‡½æ•°åˆ†å¼€ã€‚å…³äºå®å±•å¼€ï¼ˆä¸€èˆ¬ä¸è¯´å®è°ƒç”¨ï¼‰åœ¨æ•´ä¸ª Clojure ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­çš„ä½ç½®ï¼Œå¯ä»¥å‚è€ƒä¸‹å›¾ï¼š</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2j7k3dZtnpuFjSZFKXXalFFXa_!!581166664.png" alt="Clojure ç¼–è¯‘å™¨å·¥ä½œæµç¨‹"></p>
<p>å¦‚æœå¯¹å®ç°ç»†èŠ‚æ„Ÿå…´è¶£ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š<a href="/blog/2017/02/05/clojure-compiler-analyze/#macroexpand">ã€ŠClojure è¿è¡ŒåŸç†ä¹‹ç¼–è¯‘å™¨å‰–æç¯‡ã€‹</a>ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¯¹äºåˆå­¦ Lisp çš„åŒå­¦ï¼Œå¯¹ symbol ç±»å‹ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œç©¶å…¶åŸå› æ˜¯è¿™ä¸ªç±»å‹åœ¨é Lisp è¯­è¨€ä¸­æ˜¯ä¸å­˜åœ¨çš„ï¼Œä¸ºä»€ä¹ˆä¸å­˜åœ¨å‘¢ï¼Ÿä¸»è¦æ˜¯å› ä¸ºå®ƒä»¬æ²¡æ³•åƒ Lisp ä¸€æ ·å…·æœ‰ code as data çš„ç‰¹ç‚¹ï¼Œæœ‰äº›é Lisp è¯­è¨€å¯èƒ½ä¹Ÿæœ‰æ‰€è°“çš„ symbol ç±»å‹ï¼Œåƒ rubyï¼Œä½†æ˜¯ DSL åœ¨ ruby ä¸­ä¸ Lisp æ˜¯å®Œå…¨ä¸ä¸€æ ·çš„ã€‚åŒºåˆ«å¯ä»¥å‚è€ƒä¸‹å›¾</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2FQO3bnZRMeJjSspoXXcCOFXa_!!581166664.png" alt="Metaprogramming Ruby vs Lisp"></p>
<blockquote>
<p>What makes Lisp macros possible, is so far still unique to Lisp, perhaps because (a) it requires those parens, or something just as bad, and (b) if you add that final increment of power, you can no longer claim to have invented a new language, but only to have designed a new dialect of Lisp ; -)</p>
<blockquote>
<p>Paul Graham ã€Œ<a href="http://www.paulgraham.com/diff.html" target="_blank" rel="external">What makes Lisp different</a>ã€</p>
</blockquote>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å®ï¼ˆmacroï¼‰æ˜¯ Lisp è¯­è¨€ä¸­æœ€é‡è¦çš„æ­¦å™¨ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨ç”Ÿæˆè¿è¡Œæ—¶çš„ä»£ç ã€‚å®ä¹Ÿæ˜¯ç¼–å†™é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰çš„åˆ©å™¨ï¼Œå¯ä»¥åœ¨ä¸æ”¹åŠ¨è¯­è¨€æœ¬èº«çš„åŸºç¡€ä¸Šï¼Œå¢åŠ æ–°çš„ç¨‹åºæ„é€ ä½“ï¼Œè¿™åœ¨å…¶ä»–è¯­è¨€ä¸­æ˜¯ä¸å¯èƒ½ã€‚æ¯”å¦‚ï¼Œç°åœ¨æ¯”è¾ƒæµè¡Œçš„åŒæ­¥æ–¹å¼å†™å¼‚æ­¥ä»£ç çš„ async/awaitï¼Œåœ¨é Lisp 
    
    </summary>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>ã€Šç¡…è°·ä¹‹è°œã€‹è¯»åæ„Ÿ</title>
    <link href="http://liujiacai.net/blog/2017/05/11/review-of-secret-of-silicon-valley/"/>
    <id>http://liujiacai.net/blog/2017/05/11/review-of-secret-of-silicon-valley/</id>
    <published>2017-05-10T23:07:31.000Z</published>
    <updated>2017-07-08T12:26:25.000Z</updated>
    
    <content type="html"><![CDATA[<p>å´å†›åšå£«çš„<a href="https://book.douban.com/subject/26665230/" target="_blank" rel="external">ã€Šç¡…è°·ä¹‹è°œã€‹</a> åœ¨å¹´å‰å°±ä¹°äº†ï¼Œå¯æ˜¯ä¸€ç›´è¿Ÿè¿Ÿæ²¡ç¿»å¼€ã€‚æœ€è¿‘åœ¨ä¸€æ¬¡å‡ºå·®çš„åŠ¨è½¦ä¸ŠæŠŠå®ƒçœ‹å®Œäº†ï¼Œå¯ä»¥è¯´æ˜¯ä¸€æ°”å‘µæˆï¼Œæ ¹æœ¬åœä¸ä¸‹æ¥ï¼Œé‡Œé¢ä»‹ç»çš„å¾ˆå¤šè§‚ç‚¹éƒ½æ¯”è¾ƒæ·±åˆ»ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•çš„ç½—åˆ—äº‹å®ï¼Œæ›´åƒæ˜¯ç§‘å­¦æ¢ç©¶ï¼Œè¯•å›¾æ‰¾å‡ºæ¯ä¸€ä¸ªäº‹æƒ…èƒŒåçš„åŸç†ã€‚</p>
<p><img src="http://ww1.sinaimg.cn/large/5fee18eegy1ffh87lqu9uj20930bct92.jpg" alt="ç¡…è°·ä¹‹è°œ"></p>
<p>ä¸‹é¢å†…å®¹æ¥è‡ªä¹¦ä¸­çš„ä¸€äº›æ‘˜æŠ„ä¸ç¬”è®°ï¼Œä¸ä»…ä»…æ˜¯è§£é‡Šç¡…è°·ä¹‹è°œï¼Œæ›´å¤šçš„æ˜¯å¯¹äº‹ç‰©ä¸€èˆ¬æ€§çš„æ€»ç»“ä¸å½’çº³ï¼Œå‘ç°èƒŒåçš„å¥¥ç§˜ã€‚</p>
<h2 id="ä¼ªè®ºç‚¹"><a href="#ä¼ªè®ºç‚¹" class="headerlink" title="ä¼ªè®ºç‚¹"></a>ä¼ªè®ºç‚¹</h2><p>æœ¬ä¹¦ä¸€å¼€å§‹æ¢è®¨è¿‡å»åª’ä½“å¯¹ç¡…è°·æˆå› çš„åˆ†æï¼Œå¹¶æŒ‡å‡ºè¿™äº›åŸºæœ¬éƒ½æ˜¯äº‹åè§£é‡Šï¼Œå…¶ä»–å¾ˆå¤šåœ°æ–¹éƒ½å…·æœ‰è¿™äº›ç‰¹ç‚¹ä½†å´æ²¡æœ‰å½¢æˆå¦ä¸€ä¸ªå¥‡è¿¹ï¼Œå¯ä»¥è¯´æ˜¯å¿…è¦ä¸å……åˆ†æ¡ä»¶ã€‚</p>
<ol>
<li>æ°”å€™è¯´ï¼Œå³ç¡…è°·æ‹¥æœ‰è‰¯å¥½çš„æ°”å€™æ¡ä»¶</li>
<li>æ–¯å¦ç¦ä¹‹è¯´ï¼Œå³ç¡…è°·æ˜¯é æ–¯å¦ç¦å¤§å­¦ä¸æ–­å­µåŒ–æ–°çš„å…¬å¸è€Œç»´æŒç¹è£çš„</li>
<li>é£é™©æŠ•èµ„</li>
<li>æ”¿åºœæ‰¶æŒ</li>
<li>çŸ¥è¯†äº§æƒ</li>
</ol>
<h2 id="å›é€†ç²¾ç¥"><a href="#å›é€†ç²¾ç¥" class="headerlink" title="å›é€†ç²¾ç¥"></a>å›é€†ç²¾ç¥</h2><p>åœ¨19ä¸–çºªä¸­å¶æ—¶æœŸï¼Œç¾å›½ä¸œæµ·å²¸çš„æ·˜é‡‘çƒ­å‚¬ç”Ÿäº†ä¸€ä¸ªæ–°çš„åŸå¸‚ï¼Œåæ¥ä¸ºåŒºåˆ«äºæ¾³å¤§åˆ©äºšå¢¨å°”æœ¬ï¼Œæ”¹ç§°ä¸ºâ€œæ—§é‡‘å±±â€ï¼ˆåˆç§°ä¸‰è—©ï¼‰ã€‚åœ¨è¡Œæ”¿åŒºåŸŸåˆ’åˆ†ä¸Šéš¶å±åŠ å·ï¼Œæ˜¯åŠ å·ä»…æ¬¡äºæ´›æ‰çŸ¶çš„ç¬¬äºŒå¤§åŸå¸‚ã€‚æ—§é‡‘å±±æ¹¾åŒºï¼ˆç®€ç§°æ¹¾åŒºï¼‰ã€‚æ˜¯åŒ—åŠ å·å›´ç»•æ—§é‡‘å±±æ¹¾å’Œåœ£å·´å‹ƒç½—æ¹¾æ²³å£çš„ä¸€ç‰‡éƒ½ä¼šåŒºã€‚åŠ å·æœ‰ä¸‰ä¸ªä¸»è¦åŸå¸‚éƒ½åè½åœ¨è¿™é‡Œï¼šæ—§é‡‘å±±ã€åœ£è·è¥¿å’Œå¥¥å…‹å…°ã€‚æ¹¾åŒºèšé›†ç€å¤§é‡çš„åäººå’Œå¢¨è¥¿å“¥äººï¼Œè¿™é‡Œæ˜¯ä¸­å›½å¯Œäººç§»æ°‘çš„é¦–é€‰ä¹‹åœ°ã€‚ç¡…è°·ä¸»è¦åˆ†å¸ƒåœ¨å—æ¹¾é™„è¿‘ã€‚</p>
<p><img src="http://ww1.sinaimg.cn/large/5fee18eegy1ffh86rw9s5j20go0ca0yp.jpg" alt="ç¡…è°·åæ ‡"><br><img src="http://ww1.sinaimg.cn/large/5fee18eegy1ffh4j95w0tj20go0ci78x.jpg" alt="ç¡…è°·å…¬å¸"></p>
<p>ä»æ·˜é‡‘å¼€å§‹ï¼Œç¡…è°·äººè¡€æ¶²é‡Œé¢å°±å……æ»¡äº†å›é€†ã€å†’é™©ã€‚å´å†›æ›´æ˜¯æŠŠç¡…è°·æˆåŠŸçš„å¥¥ç§˜é¦–å…ˆå½’ç»“ä¸ºå›é€†ç²¾ç¥å’Œå¯¹å›é€†çš„å®½å®¹ä¸æ”¯æŒã€‚ç¡…è°·ä»å¾ˆå¤§ç¨‹åº¦ä¸Šæ˜¯ä»ä»™ç«¥åŠå¯¼ä½“ï¼ˆFairchild Semiconductorï¼‰å¼€å§‹çš„ï¼Œä»å®ƒâ€œå›å˜â€å‡ºäº†å¾ˆå¤šå…¬å¸ï¼Œè‹±ç‰¹å°”å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œç”¨ä»Šå¤©çš„è¯è¯´å°±æ˜¯ä»™ç«¥ç³»ã€‚</p>
<p><img src="http://ww1.sinaimg.cn/large/5fee18eegy1ffh4m4fhxhj20yw190ajb.jpg" alt="ä»™ç«¥ç³»å…¬å¸"></p>
<p><img src="http://ww1.sinaimg.cn/large/5fee18eegy1ffh4nthd5vj22io1w0kjl.jpg" alt="æ€ç§‘ç³»å…¬å¸"></p>
<h2 id="ä¿¡æ¯æ—¶ä»£"><a href="#ä¿¡æ¯æ—¶ä»£" class="headerlink" title="ä¿¡æ¯æ—¶ä»£"></a>ä¿¡æ¯æ—¶ä»£</h2><p>å¦‚æœè¯´å›é€†ç²¾ç¥æ˜¯å¤–å› ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯ç¡…è°·æˆåŠŸçš„å†…å› å‘¢ï¼Ÿå´å†›åšå£«è¿™é‡Œä»å·¥ä¸šæ—¶ä»£çš„ä¼ä¸šå¼€å§‹è°ˆèµ·ã€‚</p>
<p>ä»ç“¦ç‰¹çš„è’¸æ±½æœºå¼€å§‹ï¼Œæ ‡å¿—ç€äººç±»è¿›å…¥äº†å·¥ä¸šæ—¶ä»£ï¼Œå¯ä»¥ç”¨ç‰©ç†åŠ¨åŠ›ä»£æ›¿äººå·¥ã€‚è™½ç„¶åœ¨ç“¦ç‰¹ä¹‹å‰å·²ç»æœ‰äº†å¾ˆç®€é™‹çš„è’¸æ±½æœºï¼Œè€Œä¸”åœ¨ä»–ä¹‹åè¥¿é—¨å­ç­‰äººåˆ©ç”¨ç”µåŠ›èƒ½å¤Ÿæä¾›èƒ½æ–¹ä¾¿çš„åŠ¨åŠ›ï¼Œä½†æ˜¯ç“¦ç‰¹æ‰€å‘æ˜çš„ä¸‡ç”¨è’¸æ±½æœºåˆ™ä½¿å¾—äººç±»ç¬¬ä¸€æ¬¡è®©ä¸€ç§å·¥ä¸šå“ï¼ˆç“·å™¨ï¼‰å‡ºç°äº†ä¾›å¤§äºæ±‚çš„ç°è±¡ã€‚å½“ç„¶ç“¦ç‰¹ä¹Ÿæ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¹‹ä¸Šï¼Œå¼•é¢†ç“¦ç‰¹å¼€å¯å·¥ä¸šé©å‘½å¤§é—¨çš„æ˜¯ç‰›é¡¿çš„å·¨ä½œã€Šè‡ªç„¶å“²å­¦çš„æ•°å­¦åŸç†ã€‹ã€‚</p>
<h3 id="æœºæ¢°æ€ç»´"><a href="#æœºæ¢°æ€ç»´" class="headerlink" title="æœºæ¢°æ€ç»´"></a>æœºæ¢°æ€ç»´</h3><p>åœ¨ç‰›é¡¿ä¹‹åï¼Œäººç±»å¼€å§‹å­¦ä¼šç”¨ç†æ€§çš„çœ¼å…‰å¯¹å¾…ä¸€åˆ‡çš„å·²çŸ¥å’ŒæœªçŸ¥ã€‚åœ¨æ•´ä¸ªå·¥ä¸šé©å‘½æ—¶æœŸï¼Œä¸€ç›´åˆ°20ä¸–çºªåˆï¼Œäººä»¬éƒ½ä¹ æƒ¯ç”¨æœºæ¢°çš„æ–¹æ³•æ¥å®ç°æ‰€éœ€è¦çš„ä¸€åˆ‡äº§å“ã€‚åœ¨ç“¦ç‰¹ä¹‹åï¼Œè‹±å›½æŠ€å¸ˆå²è’‚èŠ¬æ£®åˆ©ç”¨æœºæ¢°å‘æ˜äº†ç«è½¦ï¼Œè‹±å›½å‘æ˜å®¶ç‘Ÿä¼¯ï¼ˆCharles Thurberï¼‰ç¬¬ä¸€æ¬¡ç”¨æœºæ¢°çš„æ–¹å¼å®ç°äº†æ›¿ä»£æ‰‹å†™çš„è½¬è½®æ‰“å­—æœºï¼Œç”šè‡³è¿å·´è´å¥‡å‘æ˜çš„èƒ½å¤Ÿè¿›è¡Œå¤æ‚å·®åˆ†è®¡ç®—çš„è®¡ç®—æœºï¼Œä¹Ÿæ˜¯é€šè¿‡æœºæ¢°å®ç°çš„ã€‚</p>
<p>è™½ç„¶ç°åœ¨ä¸€æåˆ°æœºæ¢°æ€ç»´å¯èƒ½æœ‰äº›è´¬ä¹‰ï¼Œä½†æ˜¯åœ¨å·¥ä¸šæ—¶ä»£å´æ˜¯ç›¸å½“æ—¶é«¦ã€å…ˆè¿›ã€‚å†æ¬¡åœ¨æœºæ¢°æ€ç»´çš„æŒ‡å¯¼ä¸‹ï¼Œäººä»¬è®¤ä¸º</p>
<blockquote>
<p>ä»»ä½•ä¸€ä¸ªå¤æ‚çš„é—®é¢˜éƒ½å¯ä»¥åˆ†è§£æˆè‹¥å¹²ä¸ªç®€å•çš„é—®é¢˜ï¼Œè§£å†³è¿™äº›ç®€å•é—®é¢˜ä¹‹åï¼ŒåŸå…ˆçš„å¤æ‚é—®é¢˜å°±å¿…å®šæœ‰è§£ã€‚</p>
</blockquote>
<p>è¿™ä¸€æ€æƒ³ç®—æ˜¯ç°åœ¨çš„<a href="https://en.wikipedia.org/wiki/Divide_and_conquer_algorithm" target="_blank" rel="external">åˆ†æ²»æ³•</a>çš„èµ·æºã€‚</p>
<p>æœºæ¢°å¼€å§‹ä»£æ›¿å¤§é‡äººå·¥ä¹‹åï¼Œäº§å“çš„æ ‡å‡†åŒ–ä»£æ›¿äº†ä¸ªæ€§åŒ–ï¼Œè€Œè¿½æ±‚æ•ˆç‡ä¹Ÿæˆä¸ºå·¥ä¸šä¼ä¸šæé«˜ç«äº‰åŠ›å‡ ä¹å”¯ä¸€çš„é€‰æ‹©ã€‚åœ¨è¯¸å¤šä¼ä¸šç®¡ç†ç†è®ºä¸­ï¼Œæœ€å…·ä»£è¡¨æ€§çš„æ˜¯æ³°å‹’çš„ç†è®ºã€‚</p>
<h3 id="æ³°å‹’ç®¡ç†ç†è®º"><a href="#æ³°å‹’ç®¡ç†ç†è®º" class="headerlink" title="æ³°å‹’ç®¡ç†ç†è®º"></a>æ³°å‹’ç®¡ç†ç†è®º</h3><p><a href="https://en.wikipedia.org/wiki/Frederick_Winslow_Taylor" target="_blank" rel="external">å¼—é›·å¾·é‡Œå…‹Â·æ³°å‹’</a>ï¼ˆFrederick Taylor, 1856â€“1915ï¼‰æ˜¯ç¾å›½ç§‘å­¦ç®¡ç†çš„åˆ›å§‹äººï¼Œè¢«èª‰ä¸ºç§‘å­¦ç®¡ç†ä¹‹çˆ¶ã€‚å…¶ç†è®ºå¯ä»¥åŒ…æ‹¬ä¸‹è¿°å››ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>æ•ˆç‡ä¼˜å…ˆã€‚æ€ä¹ˆæé«˜ç”Ÿäº§æ•ˆç‡å‘¢ï¼Ÿæ³°å‹’æœ€çœ‹é‡çš„æ˜¯<strong>ä¼˜åŒ–æµç¨‹</strong>å’Œ<strong>æ ‡å‡†åŒ–ç®¡ç†</strong>ã€‚æµæ°´çº¿ç”Ÿäº§æ˜¯æœºæ¢°æ€ç»´åœ¨ç”Ÿäº§å’Œç®¡ç†ä¸Šæœ€å…·æœ‰ä»£è¡¨æ€§çš„äº§ç‰©ã€‚åœ¨æ•´ä¸ªå·¥å‚é‡Œï¼Œé™¤äº†å·¥å‚ä¸»å’Œä¸»è¦å·¥ç¨‹å¸ˆçŸ¥é“äº§å“å…¨è²Œï¼Œç”Ÿäº§çº¿çš„å·¥äººåªçŸ¥é“è‡ªå·±æ‰€åšçš„é‚£ä¸€ç‚¹ä¸œè¥¿ã€‚ç¦ç‰¹æ±½è½¦å°±æ˜¯åœ¨è¿™ç§æ ‡å‡†åŒ–çš„æµæ°´çº¿ä¸­å£®å¤§èµ·æ¥çš„ã€‚åœ¨è½¯ä»¶å·¥ç¨‹é‡Œé¢ï¼Œâ€œç å†œâ€å¯¹åº”äº†æµæ°´çº¿å·¥äººï¼Œæ¶æ„å¸ˆå¯¹åº”äºå·¥å‚ä¸»æˆ–å·¥ç¨‹å¸ˆã€‚</li>
<li>åŒæ„çš„æ ‘çŠ¶ç»„ç»‡æ¶æ„ã€‚</li>
<li>äººæ€§åŒ–ç®¡ç†ã€‚äºŒæˆ˜åçš„æ—¥æœ¬ï¼ŒæŠŠè¿™ç‚¹å‘æŒ¥åˆ°äº†æè‡´ã€‚å‘˜å·¥ä¸€æ—¦è¿›å…¥ä¸€å®¶å…¬å¸ï¼Œä¸€ç›´å¹²åˆ°é€€ä¼‘ï¼Œå…¬å¸åŒ…ç®¡å‘˜å·¥ç”Ÿæ´»çš„æ–¹æ–¹é¢é¢ã€‚</li>
<li>å¯é¢„æµ‹æ€§</li>
</ol>
<p>ä¸Šè¿°å››ä¸ªç‰¹ç‚¹æ˜¯æœºæ¢°æ€ç»´çš„å…¸å‹äº§ç‰©ï¼Œæ³°å‹’ç†è®ºåœ¨å·¥ä¸šé©å‘½æ—¶æœŸæå¤§çš„æé«˜äº†å…¨çƒç”Ÿäº§ç‡ã€‚ä½†æ˜¯åˆ°äº†ä¿¡æ¯ç¤¾ä¼šï¼Œå®ƒåœ¨ä¼ä¸šç®¡ç†å’Œåè°ƒåŠ³èµ„å…³ç³»ä¸Šçš„å±€é™æ€§è¶Šæ¥è¶Šçªå‡ºã€‚</p>
<h3 id="ä¿¡æ¯æ—¶ä»£çš„ç§‘å­¦åŸºç¡€"><a href="#ä¿¡æ¯æ—¶ä»£çš„ç§‘å­¦åŸºç¡€" class="headerlink" title="ä¿¡æ¯æ—¶ä»£çš„ç§‘å­¦åŸºç¡€"></a>ä¿¡æ¯æ—¶ä»£çš„ç§‘å­¦åŸºç¡€</h3><p>æœ¬ä¹¦æœ€åä¸€ç« ä»‹ç»ä¸‰è®ºä¸ç®¡ç†ï¼Œä¸»è¦æ˜¯å…‹æœæ³°å‹’ç†è®ºå›ºæœ‰çš„å¼Šç«¯ï¼Œé€‚åº”ä¿¡æ¯æ—¶ä»£çš„è¦æ±‚ã€‚</p>
<p>ä¸‰è®ºå…·ä½“æ˜¯æŒ‡æ§åˆ¶è®ºã€ä¿¡æ¯è®ºå’Œç³»ç»Ÿè®ºã€‚ä¸‰è®ºä¸ä»¥å¾€é‚£äº›å•ä¸€çš„å­¦ç§‘ä¸åŒï¼Œä¸€æ–¹é¢å®ƒæ—¢æ˜¯äº¤å‰å­¦ç§‘ä¹Ÿæ˜¯è¾¹ç¼˜å­¦ç§‘ï¼Œå¦ä¸€æ–¹é¢æ˜¯å¥¹ä»¬ä¸ä»…è¢«ç”¨äºè§£å†³è‡ªèº«å­¦ç§‘å†…çš„å„ç§é—®é¢˜ï¼Œè€Œä¸”å®ƒä»¬è¿˜ä»£è¡¨ç€ä¸€ç§æ–°çš„æ€ç»´æ–¹å¼å’Œåšäº‹æ–¹æ³•ï¼Œæˆä¸ºä¸€ç§å…¨æ–°çš„ä¸–ç•Œè§‚ä¸æ–¹æ³•è®ºã€‚</p>
<ul>
<li>æ§åˆ¶è®ºçš„æ€ç»´æ–¹å¼ä¸»è¦å¼ºè°ƒ<strong>æ ¹æ®å˜åŒ–è¿›è¡Œä¸æ–­æŒ‘æˆ˜</strong>ã€‚è¿™ä¸æœºæ¢°æ€ç»´ï¼ˆåšä¸€ç§å°½å¯èƒ½ç¡®å®šçš„é¢„æµ‹ï¼‰å®Œå…¨ä¸åŒï¼Œé€‚ç”¨äºåšå¤æ‚çš„äº§å“ã€‚åœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­è¿™ä¸€ç‚¹å°¤ä¸ºé‡è¦ï¼Œå› ä¸ºäº§å“ä¼šéšç€æ—¶é—´ä¸æ–­æ¼”åŒ–ï¼Œå¿…é¡»åšåˆ°é¡ºåŠ¿è€Œå˜ã€‚</li>
<li>ä¿¡æ¯è®ºçš„æ€ç»´æ–¹å¼å»ºç«‹åœ¨<strong>ä¸ç¡®å®šæ€§çš„åŸºç¡€ä¸Š</strong>ã€‚é¦™å†œç”¨çƒ­åŠ›å­¦ä¸­ç†µçš„æ¦‚å¿µæ¥æè¿°ä¸ç¡®å®šæ€§ã€‚åœ¨æˆ‘ä»¬ç”Ÿæ´»ä¸­åˆ°å¤„éƒ½å……æ»¡äº†ä¸ç¡®å®šæ€§ï¼Œè¦æƒ³æ¶ˆé™¤è¿™ç§ä¸ç¡®å®šæ€§ï¼Œå°±éœ€è¦å¼•å…¥ä¿¡æ¯ã€‚è¿™ä¸ªè§‚ç‚¹å…¶å®æ­£å¥½å¯¹åº”äº†ç°åœ¨çš„å¤§æ•°æ®æ—¶ä»£ï¼Œè°æŒæ¡äº†ä¿¡æ¯ï¼Œè°å°±èƒ½å¤Ÿå‘å¤§è´¢ï¼Œè¿™å°±å¦‚åŒåœ¨å·¥ä¸šæ—¶ä»£ï¼Œè°æŒæ¡äº†èµ„æœ¬è°å°±èƒ½å‘å¤§è´¢ä¸€æ ·ã€‚</li>
<li>ç³»ç»Ÿè®ºçš„æ€ç»´æ–¹å¼ä¸»è¦å¼ºè°ƒ<strong>å±€éƒ¨æœ€ä¼˜ä¸ä»£è¡¨å…¨å±€æœ€ä¼˜</strong>ã€‚ä¹¦ä¸­ä¸¾çš„æ™ºèƒ½æ‰‹æœºçš„ä¾‹å­å†åˆé€‚ä¸è¿‡ã€‚å¾ˆå¤š Android å‚å•†ä¸€å‘³è¿½æ±‚å„ä¸ªéƒ¨ä»¶çš„å‚æ•°ï¼Œç”šè‡³ä»¥è·‘åˆ†å‡ºé«˜åˆ†ä¸ºè£ï¼Œç›¸æ¯”ä¹‹ä¸‹ iPhone ä»ä¸é¼“å¹è¿™äº›ï¼Œä½†æ˜¯å´æ˜¯ç°åœ¨æœ€å¥½ç”¨çš„æ™ºèƒ½æ‰‹æœºã€‚</li>
</ul>
<p>åœ¨è§£é‡Šä¿¡æ¯è®ºæ—¶ï¼Œè¿˜æé¦™å†œä¸¤å¤§å®šå¾‹ã€‚</p>
<p>ç¬¬ä¸€å®šå¾‹å¤§è‡´å«ä¹‰æ˜¯ï¼šæœ‰ N ç§å¯èƒ½æ€§çš„ä¿¡æ¯æºï¼Œå¯¹å®ƒå‘å‡ºçš„ä¿¡æ¯è¿›è¡Œï¼ˆä¸æŸå¤±ï¼‰ç¼–ç ï¼Œç¼–ç é•¿åº¦ä¸€å®šå¤§äºè¯¥ä¿¡æºçš„ä¿¡æ¯ç†µã€‚ä¸€ä¸ªå®é™…ä¾‹å­ï¼šç¼–ç æ±‰å­—ï¼Œå¸¸ç”¨å­—å¯ä»¥ç¼–ç çŸ­äº›ï¼Œç”Ÿåƒ»å­—ç¼–ç é•¿äº›ï¼Œä½†æ˜¯æ— è®ºæ€ä¹ˆåšï¼Œ<strong>ç¼–ç çš„å¹³å‡é•¿åº¦ä¸€å®šä¼šè¶…è¿‡æ±‰å­çš„ä¸ç¡®å®šæ€§ï¼ˆå³å®ƒä»¬çš„ä¿¡æ¯ç†µï¼‰</strong>ã€‚<br>éœå¤«æ›¼ç¼–ç å¯ä»¥ç»™å‡ºä¸€ç§æœ€ä¼˜çš„ç¼–ç æ–¹æ¡ˆï¼Œè¾¾åˆ°å¹³å‡ç¼–ç é•¿åº¦å¯ä»¥éå¸¸æ¥è¿‘å®ƒçš„ä¸ç¡®å®šæ€§ï¼ˆç†µï¼‰â€”â€”æ¯”å¦‚å¯¹æ±‰å­—è¿›è¡Œç¼–ç åªè¦æŠŠæœ€çŸ­çš„ç¼–ç åˆ†é…ç»™æœ€å¸¸è§æ±‰å­—å³å¯ã€‚å´å†›åšå£«è¿™é‡Œæ›´æ˜¯ç»™å‡ºäº†éœå¤«æ›¼ç¼–ç åŸç†çš„æœ¬è´¨ï¼š</p>
<blockquote>
<p>æŠŠæœ€å¥½çš„èµ„æºåˆ†é…ç»™æœ€æœ‰å¯èƒ½æˆåŠŸçš„äº‹æƒ…ã€‚</p>
</blockquote>
<p>é¦™å†œç¬¬äºŒå®šå¾‹è¯´çš„æ˜¯ï¼Œä¿¡æ¯çš„ä¼ æ’­é€Ÿç‡ä¸å¯èƒ½è¶…è¿‡ä¿¡é“çš„å®¹é‡ã€‚è¿™ä¸¤å¤§å®šå¾‹åœ¨ä¿¡æ¯æ—¶ä»£æ‰€èµ·çš„ä½œç”¨å ªæ¯”ç‰›é¡¿åŠ›å­¦å®šå¾‹ä¹‹äºå·¥ä¸šæ—¶ä»£ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¯»æœ¬ä¹¦ï¼Œè§‰å¾—ç¡…è°·çš„æˆåŠŸçœŸæ˜¯æ¥ä¹‹ä¸æ˜“ï¼Œé™¤äº†é£é™©æŠ•èµ„ã€æ±‡èšäºæ­¤çš„å…¨ä¸–ç•Œçš„ç²¾è‹±ã€å¯¹å·¥ç¨‹å¸ˆçš„å°Šé‡ç­‰å› ç´ ï¼Œæ›´é‡è¦çš„æ˜¯æŒæ¡äº†å¼€å¯ä¿¡æ¯æ—¶ä»£çš„å¤§é—¨çš„é’¥åŒ™ã€‚<br>Â·<br>åœ¨å¤§å·¥ä¸šæ—¶ä»£ï¼Œæ•ˆç‡æ¥è‡ªäºäº‹å…ˆçš„è§„åˆ’å’Œä¸æ–­é‡å¤çš„æ“ä½œï¼›è€Œåœ¨ä¿¡æ¯æ—¶ä»£ï¼Œæ•ˆç‡æ¥è‡ªæ²Ÿé€šçš„å¸¦å®½ï¼Œä»¥åŠå…±åŒéµå®ˆçš„åè®®ã€‚ä¸€ä¸ªæ—¶ä»£çš„æ¥ä¸´ï¼Œéœ€è¦æœ‰ç›¸åº”çš„æŒ‡å¯¼ç†è®ºï¼Œä¸‰è®ºä½œä¸ºä¿¡æ¯æ—¶ä»£çš„è·¯æ ‡ï¼Œå…¶å®å·²ç»åœ¨æ½œç§»é»˜åŒ–ä¸­èå…¥æˆ‘ä»¬çš„ç”Ÿæ´»ï¼Œæˆ‘ä»¬æ€»æ˜¯æƒ³è·å–æ›´å¤šä¿¡æ¯ä»¥ä¾¿å°†æ¥æ›´å¥½çš„å°±ä¸šå°±æ˜¯ä¿¡æ¯è®ºçš„ä½“ç°ã€‚</p>
<p>å…¶æ¬¡ï¼Œæœ¬ä¹¦çº æ­£äº†æˆ‘å¯¹ä¸“åˆ©çš„ç†è§£ï¼š</p>
<blockquote>
<p>ä¸“åˆ©çœŸæ­£ä¿æŠ¤çš„æ˜¯ä¸€ä¸ªè¿‡ç¨‹ï¼ˆåŒ…æ‹¬ä¸€ç§å®ç°æ–¹æ³•ï¼‰å’Œä¸€ä¸ªç»“æœã€‚æ¯”å¦‚ï¼šç‰›é¡¿ä¸‰ä¸ªå®šå¾‹æ˜¯ä¸èƒ½ç”³è¯·ä¸“åˆ©çš„ï¼Œè€Œåˆ©ç”¨è¿™äº›åŸç†å‘æ˜æŸä¸€ç§å·¥ä½œæ–¹å¼ä¸‹çš„è’¸æ±½æœºå°±å¯ä»¥ç”³è¯·ã€‚</p>
</blockquote>
<p>æœ€åå¸Œæœ›èº«å¤„ä¿¡æ¯æ—¶ä»£çš„æˆ‘ä»¬éƒ½èƒ½å¤Ÿé˜…è¯»åŸä½œï¼Œç›¸ä¿¡ä¸€å®šä¼šè·ç›ŠåŒªæµ…ã€‚ç»™å´å†›è€å¸ˆç‚¹ä¸ªèµã€‚ğŸ‘</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å´å†›åšå£«çš„&lt;a href=&quot;https://book.douban.com/subject/26665230/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šç¡…è°·ä¹‹è°œã€‹&lt;/a&gt; åœ¨å¹´å‰å°±ä¹°äº†ï¼Œå¯æ˜¯ä¸€ç›´è¿Ÿè¿Ÿæ²¡ç¿»å¼€ã€‚æœ€è¿‘åœ¨ä¸€æ¬¡å‡ºå·®çš„åŠ¨è½¦ä¸ŠæŠŠå®ƒçœ‹å®Œäº†ï¼Œå¯ä»¥è¯´æ˜¯
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
      <category term="ideas" scheme="http://liujiacai.net/tags/ideas/"/>
    
  </entry>
  
  <entry>
    <title>Clojure Web å¼€å‘-- Ring ä½¿ç”¨æŒ‡å—</title>
    <link href="http://liujiacai.net/blog/2017/04/02/clojure-web-dev-ring-usage/"/>
    <id>http://liujiacai.net/blog/2017/04/02/clojure-web-dev-ring-usage/</id>
    <published>2017-04-02T15:56:30.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ Clojure ä¼—å¤šçš„ Web æ¡†æ¶ä¸­ï¼Œ<a href="https://github.com/ring-clojure/ring" target="_blank" rel="external">Ring</a> ä»¥å…¶ç®€å•ç»Ÿä¸€çš„ HTTP æŠ½è±¡æ¨¡å‹è„±é¢–è€Œå‡ºã€‚Ring å……åˆ†ä½“ç°äº†å‡½æ•°å¼ç¼–ç¨‹çš„æ€æƒ³â€”â€”é€šè¿‡ä¸€ç³»åˆ—å‡½æ•°çš„ç»„åˆå½¢æˆäº†ä¸€ä¸ªæ˜“äºç†è§£ã€æ‰©å±•çš„ HTTP å¤„ç†é“¾ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« é¦–å…ˆä»‹ç» Ring æ ¸å¿ƒæ¦‚å¿µåŠå…¶å®ç°åŸç†ï¼Œç„¶åä»‹ç»å¦‚ä½•åŸºäº Ring + <a href="https://github.com/weavejester/compojure" target="_blank" rel="external">Compojure</a> å®ç°ä¸€ RESTful æœåŠ¡ã€‚</p>
<h2 id="Ring-SPEC"><a href="#Ring-SPEC" class="headerlink" title="Ring SPEC"></a><a href="https://github.com/ring-clojure/ring/blob/master/SPEC" target="_blank" rel="external">Ring SPEC</a></h2><p>Ring è§„èŒƒé‡Œé¢æœ‰å¦‚ä¸‹5ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼š</p>
<ol>
<li>handlersï¼Œåº”ç”¨é€»è¾‘å¤„ç†çš„ä¸»è¦å•å…ƒï¼Œç”±ä¸€ä¸ªæ™®é€šçš„ Clojure å‡½æ•°å®ç°</li>
<li>middlewareï¼Œä¸º handler å¢åŠ é¢å¤–åŠŸèƒ½</li>
<li>adapterï¼Œå°† HTTP è¯·æ±‚è½¬ä¸º Clojure é‡Œçš„ mapï¼Œå°† Clojure é‡Œçš„ map è½¬ä¸º HTTP ç›¸åº”</li>
<li>request mapï¼ŒHTTP è¯·æ±‚çš„ map è¡¨ç¤º</li>
<li>response mapï¼ŒHTTP ç›¸åº”çš„ map è¡¨ç¤º</li>
</ol>
<p>è¿™5ä¸ªç»„ä»¶çš„å…³ç³»å¯ç”¨ä¸‹å›¾è¡¨ç¤ºï¼ˆBy <a href="https://github.com/ring-clojure/ring-defaults/issues/20" target="_blank" rel="external">Ring ä½œè€…</a>ï¼‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">+---------------+</div><div class="line">|  Middleware   |</div><div class="line">|  +---------+  |             +---------+      +--------+</div><div class="line">|  |         |&lt;-- request ----|         |      |        |</div><div class="line">|  | Handler |  |             | Adapter |&lt;----&gt;| Client |</div><div class="line">|  |         |--- response --&gt;|         |      |        |</div><div class="line">|  +---------+  |             +---------+      +--------+</div><div class="line">+---------------+</div></pre></td></tr></table></figure></p>
<h3 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">(ns learn-ring.core</div><div class="line">  (:require [ring.adapter.jetty :refer [run-jetty]]))</div><div class="line"></div><div class="line">(defn handler [req]</div><div class="line">  &#123;:headers &#123;&#125;</div><div class="line">   :status 200</div><div class="line">   :body &quot;Hello World&quot;&#125;)</div><div class="line"></div><div class="line">(defn middleware [handler]</div><div class="line">  &quot;Audit a log per request&quot;</div><div class="line">  (fn [req]</div><div class="line">    (println (:uri req))</div><div class="line">    (handler req)))</div><div class="line"></div><div class="line">(def app</div><div class="line">  (-&gt; handler</div><div class="line">      middleware))</div><div class="line"></div><div class="line">(defn -main [&amp; _]</div><div class="line">  (run-jetty app &#123;:port 3000&#125;))</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„ç¨‹åºï¼Œå°±å¯ä»¥å¯åŠ¨ä¸€ Web åº”ç”¨ï¼Œç„¶ååœ¨æµè§ˆå™¨è®¿é—®å°±å¯ä»¥è¿”å›<code>Hello World</code>ï¼ŒåŒæ—¶åœ¨æ§åˆ¶å°é‡Œé¢ä¼šæ‰“å°å‡ºè¯·æ±‚çš„ uriã€‚</p>
<p><code>run-jetty</code> æ˜¯ Ring æä¾›çš„åŸºäº jetty çš„ adapterï¼Œæ–¹ä¾¿å¼€å‘æµ‹è¯•ã€‚å…¶ä¸»è¦åŠŸèƒ½æ˜¯ä¸¤ä¸ªè½¬æ¢ï¼š</p>
<ol>
<li><code>HttpServletRequest</code> â€”&gt; <code>request map</code></li>
<li><code>response map</code> â€”&gt; <code>HttpServletResponse</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">;; ring.adapter.jetty</div><div class="line">(defn- ^AbstractHandler proxy-handler [handler]</div><div class="line">  (proxy [AbstractHandler] []</div><div class="line">    (handle [_ ^Request base-request request response]</div><div class="line">      (let [request-map  (servlet/build-request-map request)</div><div class="line">            response-map (handler request-map)]</div><div class="line">        (servlet/update-servlet-response response response-map)</div><div class="line">        (.setHandled base-request true)))))</div><div class="line"></div><div class="line">;; ring.util.servlet</div><div class="line"></div><div class="line">;; HttpServletRequest --&gt; request map</div><div class="line"></div><div class="line">(defn build-request-map</div><div class="line">  &quot;Create the request map from the HttpServletRequest object.&quot;</div><div class="line">  [^HttpServletRequest request]</div><div class="line">  &#123;:server-port        (.getServerPort request)</div><div class="line">   :server-name        (.getServerName request)</div><div class="line">   :remote-addr        (.getRemoteAddr request)</div><div class="line">   :uri                (.getRequestURI request)</div><div class="line">   :query-string       (.getQueryString request)</div><div class="line">   :scheme             (keyword (.getScheme request))</div><div class="line">   :request-method     (keyword (.toLowerCase (.getMethod request) Locale/ENGLISH))</div><div class="line">   :protocol           (.getProtocol request)</div><div class="line">   :headers            (get-headers request)</div><div class="line">   :content-type       (.getContentType request)</div><div class="line">   :content-length     (get-content-length request)</div><div class="line">   :character-encoding (.getCharacterEncoding request)</div><div class="line">   :ssl-client-cert    (get-client-cert request)</div><div class="line">   :body               (.getInputStream request)&#125;)</div><div class="line"></div><div class="line">;; response map --&gt; HttpServletResponse</div><div class="line"></div><div class="line">(defn update-servlet-response</div><div class="line">  &quot;Update the HttpServletResponse using a response map. Takes an optional</div><div class="line">  AsyncContext.&quot;</div><div class="line">  ([response response-map]</div><div class="line">   (update-servlet-response response nil response-map))</div><div class="line">  ([^HttpServletResponse response context response-map]</div><div class="line">   (let [&#123;:keys [status headers body]&#125; response-map]</div><div class="line">     (when (nil? response)</div><div class="line">       (throw (NullPointerException. &quot;HttpServletResponse is nil&quot;)))</div><div class="line">     (when (nil? response-map)</div><div class="line">       (throw (NullPointerException. &quot;Response map is nil&quot;)))</div><div class="line">     (when status</div><div class="line">       (.setStatus response status))</div><div class="line">     (set-headers response headers)</div><div class="line">     (let [output-stream (make-output-stream response context)]</div><div class="line">       (protocols/write-body-to-stream body response-map output-stream)))))</div></pre></td></tr></table></figure>
<h2 id="Middleware"><a href="#Middleware" class="headerlink" title="Middleware"></a><a href="https://github.com/ring-clojure/ring/wiki/Middleware-Patterns" target="_blank" rel="external">Middleware</a></h2><p>Ring é‡Œé¢é‡‡ç”¨ Middleware æ¨¡å¼å»æ‰©å±• handler çš„åŠŸèƒ½ï¼Œè¿™å…¶å®æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­å¸¸ç”¨çš„æŠ€å·§ï¼Œç”¨é«˜é˜¶å‡½æ•°å»ç»„åˆå‡½æ•°ï¼Œå®ç°æ›´å¤æ‚çš„åŠŸèƒ½ã€‚åœ¨ Clojure é‡Œé¢ï¼Œå‡½æ•°ç»„åˆæ›´å¸¸è§çš„æ˜¯ç”¨ <code>comp</code>ï¼Œæ¯”å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">((comp #(* % 2) inc) 1)</div><div class="line">;; 4</div></pre></td></tr></table></figure></p>
<p>è¿™å¯¹ä¸€äº›ç®€å•çš„å‡½æ•°éå¸¸åˆé€‚ï¼Œä½†æ˜¯å¦‚æœé€»è¾‘æ¯”è¾ƒå¤æ‚ï¼ŒMiddleware æ¨¡å¼å°±æ¯”è¾ƒåˆé€‚äº†ã€‚ä¾‹å¦‚å¯ä»¥è¿›è¡Œä¸€äº›é€»è¾‘åˆ¤æ–­å†³å®šæ˜¯å¦éœ€è¦è°ƒç”¨æŸå‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(defn middleware-comp [handler]</div><div class="line">  (fn [x]</div><div class="line">    (if (zero? 0)</div><div class="line">      (handler (inc x))</div><div class="line">      (handler x))))</div><div class="line"></div><div class="line">((-&gt; #(* 2 %)</div><div class="line">      middleware-comp) 1)</div><div class="line">;; 4</div><div class="line">((-&gt; #(* 2 %)</div><div class="line">      middleware-comp) 0)</div><div class="line">;; 2</div></pre></td></tr></table></figure></p>
<p>è™½ç„¶ Middleware ä½¿ç”¨éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šå¤šä¸ª middleware ç»„åˆçš„é¡ºåºã€‚åé¢åœ¨è®²è§£ RESTful ç¤ºä¾‹æ—¶ä¼šæ¼”ç¤ºä¸åŒé¡ºåºçš„ middleware å¯¹è¯·æ±‚çš„å½±å“ã€‚</p>
<p>Middleware è¿™ä¸€æ¨¡å¼åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­éå¸¸å¸¸è§ï¼ŒClojure ç”Ÿæ€é‡Œé¢æ–°çš„æ„å»ºå·¥å…· <a href="https://github.com/boot-clj/boot" target="_blank" rel="external">boot-clj</a> é‡Œé¢çš„ task ä¹Ÿæ˜¯é€šè¿‡è¿™ç§æ¨¡å¼ç»„åˆçš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ cat build.boot</div><div class="line">(deftask inc-if-zero-else-dec</div><div class="line">  [n number NUM int &quot;number to test&quot;]</div><div class="line">  (fn [handler]</div><div class="line">    (fn [fileset]</div><div class="line">      (if (zero? number)</div><div class="line">        (handler (merge fileset &#123;:number (inc number)&#125;))</div><div class="line">        (handler (merge fileset &#123;:number (dec number)&#125;))))))</div><div class="line"></div><div class="line">(deftask printer</div><div class="line">  []</div><div class="line">  (fn [handler]</div><div class="line">    (fn [fileset]</div><div class="line">      (println (str &quot;number is &quot; (:number fileset)))</div><div class="line">      fileset)))</div><div class="line"></div><div class="line">$ boot inc-if-zero-else-dec -n 0    printer</div><div class="line">number is 1</div><div class="line">$ boot inc-if-zero-else-dec -n 1    printer</div><div class="line">number is 0</div></pre></td></tr></table></figure>
<h2 id="RESTful-å®æˆ˜"><a href="#RESTful-å®æˆ˜" class="headerlink" title="RESTful å®æˆ˜"></a>RESTful å®æˆ˜</h2><p>ç”±äº Ring åªæ˜¯æä¾›äº†ä¸€ä¸ª Web æœåŠ¡æœ€åŸºæœ¬çš„æŠ½è±¡åŠŸèƒ½ï¼Œå¾ˆå¤šå…¶ä»–åŠŸèƒ½ï¼Œåƒ url è·¯ç”±è§„åˆ™ï¼Œå‚æ•°è§£æç­‰å‡éœ€é€šè¿‡å…¶ä»–æ¨¡å—å®ç°ã€‚<a href="https://github.com/weavejester/compojure" target="_blank" rel="external">Compojure</a> æ˜¯ Ring ç”Ÿæ€é‡Œé¢é»˜è®¤çš„è·¯ç”±å™¨ï¼ŒåŒæ ·çŸ­å°ç²¾æ‚ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚åŸºæœ¬ç”¨æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(def handlers</div><div class="line">  (routes</div><div class="line">   (GET &quot;/&quot; [] &quot;Hello World&quot;)</div><div class="line">   (GET &quot;/about&quot; [] &quot;about page&quot;)</div><div class="line">   (route/not-found &quot;Page not found!&quot;)))</div></pre></td></tr></table></figure>
<p>ä½¿ç”¨è¿™é‡Œçš„ handlers ä»£æ›¿ä¸Šé¢ Hello World çš„ç¤ºä¾‹ä¸­çš„ handler å³å¯å¾—åˆ°ä¸€ä¸ªå…·æœ‰2æ¡è·¯ç”±è§„åˆ™çš„ Web åº”ç”¨ï¼ŒåŒæ—¶é’ˆå¯¹å…¶ä»–è·¯ç”±è¿”å› <code>Page not found!</code>ã€‚</p>
<p>Compojure é‡Œé¢ä½¿ç”¨äº†å¤§é‡å®æ¥ç®€åŒ–è·¯ç”±çš„å®šä¹‰ï¼Œåƒä¸Šé¢ä¾‹å­ä¸­çš„<code>GET</code>ã€<code>not-found</code>ç­‰ã€‚Compojure åº•å±‚ä½¿ç”¨ <a href="https://github.com/weavejester/clout" target="_blank" rel="external">clout</a> è¿™ä¸ªåº“å®ç°ï¼Œè€Œ clout æœ¬èº«æ˜¯åŸºäºä¸€ä¸ª parser generatorï¼ˆ<a href="https://github.com/Engelberg/instaparse" target="_blank" rel="external">instaparse</a>ï¼‰ å®šä¹‰çš„â€œè·¯ç”±â€é¢†åŸŸç‰¹å®šè¯­è¨€ã€‚<a href="https://github.com/weavejester/clout/blob/master/src/clout/core.clj#L56" target="_blank" rel="external">æ ¸å¿ƒè§„åˆ™</a>å¦‚ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">(def ^:private route-parser</div><div class="line">  (insta/parser</div><div class="line">   &quot;route    = (scheme / part) part*</div><div class="line">    scheme   = #&apos;(https?:)?//&apos;</div><div class="line">    &lt;part&gt;   = literal | escaped | wildcard | param</div><div class="line">    literal  = #&apos;(:[^\\p&#123;L&#125;_*&#123;&#125;\\\\]|[^:*&#123;&#125;\\\\])+&apos;</div><div class="line">    escaped  = #&apos;\\\\.&apos;</div><div class="line">    wildcard = &apos;*&apos;</div><div class="line">    param    = key pattern?</div><div class="line">    key      = &lt;&apos;:&apos;&gt; #&apos;([\\p&#123;L&#125;_][\\p&#123;L&#125;_0-9-]*)&apos;</div><div class="line">    pattern  = &apos;&#123;&apos; (#&apos;(?:[^&#123;&#125;\\\\]|\\\\.)+&apos; | pattern)* &apos;&#125;&apos;&quot;</div><div class="line">   :no-slurp true))</div></pre></td></tr></table></figure></p>
<p>Compojure ä¸­è·¯ç”±åŒ¹é…çš„æ–¹å¼ä¹Ÿéå¸¸å·§å¦™ï¼Œè¿™é‡Œè¯¦ç»†ä»‹ç»ä¸€ä¸‹ã€‚</p>
<h3 id="Compojure-è·¯ç”±åˆ†å‘"><a href="#Compojure-è·¯ç”±åˆ†å‘" class="headerlink" title="Compojure è·¯ç”±åˆ†å‘"></a>Compojure è·¯ç”±åˆ†å‘</h3><p>Compojure é€šè¿‡ routes æŠŠä¸€ç³»åˆ— handler å°è£…èµ·æ¥ï¼Œå…¶å†…éƒ¨è°ƒç”¨ routing æ–¹æ³•æ‰¾åˆ°æ­£ç¡®çš„ handlerã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ä»£ç éå¸¸ç®€æ´ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(defn routing</div><div class="line">  &quot;Apply a list of routes to a Ring request map.&quot;</div><div class="line">  [request &amp; handlers]</div><div class="line">  (some #(% request) handlers))</div><div class="line"></div><div class="line">(defn routes</div><div class="line">  &quot;Create a Ring handler by combining several handlers into one.&quot;</div><div class="line">  [&amp; handlers]</div><div class="line">  #(apply routing % handlers))</div></pre></td></tr></table></figure></p>
<p>routing é‡Œé¢é€šè¿‡è°ƒç”¨ <code>some</code> å‡½æ•°è¿”å›ç¬¬ä¸€ä¸ªé nil è°ƒç”¨ï¼Œè¿™æ ·å°±è§£å†³äº†è·¯ç”±åŒ¹é…çš„é—®é¢˜ã€‚ç”±è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡º Clojure è¯­è¨€çš„è¡¨è¾¾åŠ›ã€‚</p>
<p>åœ¨ä½¿ç”¨ <code>GET</code> ç­‰è¿™ç±»å®å®šä¹‰ handler æ—¶ï¼Œä¼šè°ƒç”¨<code>wrap-route-matches</code> æ¥åŒ…è£…çœŸæ­£çš„å¤„ç†é€»è¾‘ï¼Œé€»è¾‘å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(defn- wrap-route-matches [handler method path]</div><div class="line">  (fn [request]</div><div class="line">     (if (method-matches? request method)</div><div class="line">       (if-let [request (route-request request path)]</div><div class="line">         (-&gt; (handler request)</div><div class="line">             (head-response request method))))))</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçœ‹åˆ°åªæœ‰åœ¨ url ä¸ http method å‡åŒ¹é…æ—¶ï¼Œæ‰ä¼šå»è°ƒç”¨ handler å¤„ç† http è¯·æ±‚ï¼Œå…¶ä»–æƒ…å†µç›´æ¥è¿”å› nilï¼Œè¿™ä¸å‰é¢è®²çš„ some è”åˆèµ·æ¥å°±å½¢æˆäº†å®Œæ•´çš„è·¯ç”±åŠŸèƒ½ã€‚</p>
<p>ç”±äº <code>routes</code> çš„è¿”å›å€¼ä¸ handler ä¸€æ ·ï¼Œæ˜¯ä¸€ä¸ªæ¥å— request map è¿”å› response map çš„å‡½æ•°ï¼Œæ‰€ä»¥å¯ä»¥åƒå †ç§¯æœ¨ä¸€æ ·è¿›è¡Œä»»æ„ç»„åˆï¼Œå®ç°ç±»ä¼¼äº <a href="http://flask.pocoo.org/docs/0.12/blueprints/" target="_blank" rel="external">Flask ä¸­ blueprints</a> çš„æ¨¡å—åŒ–åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">;; cat student.clj</div><div class="line">(ns demo.student</div><div class="line">  (:require [compojure.core :refer [GET POST defroutes context]])</div><div class="line"></div><div class="line">(defroutes handlers</div><div class="line">  (context &quot;/student&quot; []</div><div class="line">    (GET &quot;/&quot; [] &quot;student index&quot;)))</div><div class="line"></div><div class="line">;;cat demo.teacher</div><div class="line">(ns demo.teacher</div><div class="line">  (:require [compojure.core :refer [GET POST defroutes context]])</div><div class="line"></div><div class="line">(defroutes handlers</div><div class="line">  (context &quot;/teacher&quot; []</div><div class="line">    (GET &quot;/&quot; [] &quot;teacher index&quot;)))</div><div class="line"></div><div class="line">;; cat demo.core.clj</div><div class="line">(ns demo.core</div><div class="line">  (:require [demo.student :as stu]</div><div class="line">            [demo.teacher :as tea])</div><div class="line"></div><div class="line"></div><div class="line">;; core é‡Œé¢è¿›è¡Œ handler çš„ç»„åˆ</div><div class="line">(defroutes handlers</div><div class="line">  (GET &quot;/&quot; [] &quot;index&quot;)</div><div class="line">  (stu/handlers)</div><div class="line">  (tea/handlers))</div></pre></td></tr></table></figure>
<h3 id="Middleware-åŠŸèƒ½æ‰©å±•"><a href="#Middleware-åŠŸèƒ½æ‰©å±•" class="headerlink" title="Middleware åŠŸèƒ½æ‰©å±•"></a>Middleware åŠŸèƒ½æ‰©å±•</h3><h4 id="å‚æ•°è§£æ"><a href="#å‚æ•°è§£æ" class="headerlink" title="å‚æ•°è§£æ"></a>å‚æ•°è§£æ</h4><p>Compojure è§£å†³äº†è·¯ç”±é—®é¢˜ï¼Œå‚æ•°è·å–æ˜¯é€šè¿‡å®šåˆ¶ä¸èƒ½çš„ middleware å®ç°çš„ï¼Œ<code>compojure.handler</code> å‘½åç©ºé—´æä¾›äº†å¸¸ç”¨çš„ middleware çš„ç»„åˆï¼Œé’ˆå¯¹ RESTful å¯ä»¥ä½¿ç”¨ <a href="https://github.com/weavejester/compojure/blob/master/src/compojure/handler.clj#L22" target="_blank" rel="external">api</a> è¿™ä¸ªç»„åˆå‡½æ•°ï¼Œå®ƒä¼šæŠŠ QueryString ä¸­çš„å‚æ•°è§£æåˆ° request map ä¸­çš„<code>:query-params</code> key ä¸­ï¼Œè¡¨å•ä¸­çš„å‚æ•°è§£æåˆ° request map ä¸­çš„ <code>:form-params</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(def app</div><div class="line">  (-&gt; handlers</div><div class="line">      handler/api))</div></pre></td></tr></table></figure></p>
<h4 id="JSON-åºåˆ—åŒ–"><a href="#JSON-åºåˆ—åŒ–" class="headerlink" title="JSON åºåˆ—åŒ–"></a>JSON åºåˆ—åŒ–</h4><p>ç”±äº RESTful æœåŠ¡ä¸­ï¼Œè¯·æ±‚çš„æ•°æ®ä¸è¿”å›çš„æ•°æ®é€šå¸¸éƒ½æ˜¯ JSON æ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦å¢åŠ ä¸¤ä¸ªé¢å¤–çš„åŠŸèƒ½æ¥å®ç° JSON çš„åºåˆ—åŒ–ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">;; é¦–å…ˆå¼•ç”¨ ring.middleware.json</div><div class="line"></div><div class="line">(def app</div><div class="line">  (-&gt; handlers</div><div class="line">      wrap-json-response</div><div class="line">      wrap-json-body</div><div class="line">      handler/api))</div></pre></td></tr></table></figure></p>
<h4 id="çºªå½•è¯·æ±‚æ—¶é—´"><a href="#çºªå½•è¯·æ±‚æ—¶é—´" class="headerlink" title="çºªå½•è¯·æ±‚æ—¶é—´"></a>çºªå½•è¯·æ±‚æ—¶é—´</h4><p>é€šå¸¸ï¼Œæˆ‘ä»¬éœ€è¦çºªå½•æ¯ä¸ªè¯·æ±‚çš„å¤„ç†æ—¶é—´ï¼Œè¿™å¾ˆç®€å•ï¼Œå®ç°ä¸ª <code>record-response-time</code> å³å¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">(defn record-response-time [handler]</div><div class="line">  (fn [req]</div><div class="line">    (let [start-date (System/currentTimeMillis)]</div><div class="line">      (handler req)</div><div class="line">      (let [res-time (- (System/currentTimeMillis) start-date)]</div><div class="line">        (println (format  &quot;%s took %d ms&quot; (:uri req) res-time))))))</div><div class="line"></div><div class="line">(def app</div><div class="line">  (-&gt; handlers</div><div class="line">      wrap-json-response</div><div class="line">      wrap-json-body</div><div class="line">      handler/api</div><div class="line">      record-response-time))</div></pre></td></tr></table></figure>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>record-response-time</code> éœ€è¦æ”¾åœ¨ middleware æœ€å¤–å±‚ï¼Œè¿™æ ·å®ƒæ‰èƒ½çºªå½•ä¸€ä¸ªè¯·æ±‚ç»è¿‡æ‰€æœ‰ middleware + handler å¤„ç†çš„æ—¶é—´ã€‚</p>
<h4 id="å°è£…å¼‚å¸¸"><a href="#å°è£…å¼‚å¸¸" class="headerlink" title="å°è£…å¼‚å¸¸"></a>å°è£…å¼‚å¸¸</h4><p>å…¶æ¬¡ï¼Œå¦ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚å°±æ˜¯å°è£…å¼‚å¸¸ï¼Œå½“æœåŠ¡ç«¯å‡ºç°é”™è¯¯æ—¶è¿”å›ç»™å®¢æˆ·ç«¯å‹å¥½çš„é”™è¯¯ä¿¡æ¯ï¼Œè€Œä¸æ˜¯æœåŠ¡ç«¯çš„é”™è¯¯å †æ ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">(defn wrap-exception</div><div class="line">  [handler]</div><div class="line">  (fn [request]</div><div class="line">    (try</div><div class="line">      (handler request)</div><div class="line">      (catch Throwable e</div><div class="line">        (response &#123;:code 20001</div><div class="line">                   :msg  &quot;inner error&#125;)))))</div><div class="line"></div><div class="line">(def app</div><div class="line">  (-&gt; handlers</div><div class="line">      wrap-json-response</div><div class="line">      wrap-json-body</div><div class="line">      handler/api</div><div class="line">      wrap-exception</div><div class="line">      record-response-time))</div></pre></td></tr></table></figure></p>
<h4 id="é¡ºåºï¼é¡ºåºï¼é¡ºåºï¼"><a href="#é¡ºåºï¼é¡ºåºï¼é¡ºåºï¼" class="headerlink" title="é¡ºåºï¼é¡ºåºï¼é¡ºåºï¼"></a>é¡ºåºï¼é¡ºåºï¼é¡ºåºï¼</h4><p>ä¸€ä¸ª App ä¸­çš„ middleware è°ƒç”¨é¡ºåºéå¸¸é‡è¦ï¼Œå› ä¸ºä¸åŒçš„ middleware ä¹‹é—´ request map ä¸ response map æ˜¯ç›¸äº’ä¾èµ–çš„ï¼Œæ‰€ä»¥åœ¨å®šä¹‰ middleware æ—¶ä¸€å®šè¦æ³¨æ„é¡ºåºã€‚ä¸€å›¾èƒœåƒè¨€ï¼š</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2BkmmmohnpuFjSZFEXXX0PFXa_!!581166664.png" alt="middleware åº”ç”¨é¡ºåºå›¾"></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨ Java EE ä¸­ï¼Œç¼–å†™ Web é¡¹ç›®é€šå¸¸æ˜¯é…ç½®å„ç§ XML æ–‡ä»¶ï¼Œä»£ç è¿˜æ²¡å¼€å§‹å†™å°±é…ç½®äº†ä¸€å¤§å †jaråŒ…ä¾èµ–ï¼Œè¿™äº› jar åŒ…å¾ˆæœ‰å¯èƒ½ä¼šå†²çªï¼Œç„¶åéœ€è¦èŠ±å¤§é‡æ—¶é—´å¤„ç†è¿™äº›ä¾èµ–å†²çªï¼ŒçœŸå¿ƒéº»çƒ¦ã€‚</p>
<p>Ring ä¸å…¶è¯´æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œä¸å¦‚è¯´æ˜¯ç”±å„ä¸ªçŸ­å°ç²¾æ‚çš„å‡½æ•°ç»„æˆçš„ libï¼Œå……åˆ†å±•ç¤ºäº† Clojure è¯­è¨€çš„å¨åŠ›ï¼Œé€šè¿‡å‡½æ•°çš„ç»„åˆå®šä¹‰å‡ºä¸€å¥—å®Œæ•´çš„ HTTP æŠ½è±¡æœºåˆ¶ï¼Œé€šè¿‡å®æ¥å®ç°â€œè·¯ç”±â€ç‰¹å®šé¢†åŸŸè¯­è¨€ï¼Œæå¤§ç®€åŒ–äº†è·¯ç”±çš„å®šä¹‰ï¼Œæ–¹ä¾¿äº†æ¨¡å—çš„åˆ†è§£ã€‚</p>
<p>é™¤äº†ä¸Šé¢çš„ä»‹ç»ï¼ŒRing ç”Ÿæ€é‡Œé¢è¿˜æœ‰ <a href="https://github.com/weavejester/lein-ring" target="_blank" rel="external">lein-ring</a> ï¼Œå®ƒå¯ä»¥åœ¨ä¸é‡å¯æœåŠ¡çš„æƒ…å†µä¸‹é‡æ–°åŠ è½½æœ‰ä¿®æ”¹çš„å‘½åç©ºé—´ï¼ˆä»¥åŠå…¶å½±å“çš„ï¼‰ï¼Œå¼€å‘ä»æœªå¦‚ä½•é¡ºç•…ã€‚</p>
<p>Ring + Compojure + lein-ring ä½ å€¼å¾—æ‹¥æœ‰ã€‚</p>
<h2 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h2><ul>
<li><a href="http://www.braveclojure.com/appendix-b/" target="_blank" rel="external">Boot, the Fancy Clojure Build Framework</a></li>
<li><a href="http://www.lispcast.com/what-web-framework-should-i-use" target="_blank" rel="external">http://www.lispcast.com/what-web-framework-should-i-use</a></li>
<li><a href="https://github.com/luminus-framework/luminus/blob/master/resources/md/html_templating.md" target="_blank" rel="external">https://github.com/luminus-framework/luminus/blob/master/resources/md/html_templating.md</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨ Clojure ä¼—å¤šçš„ Web æ¡†æ¶ä¸­ï¼Œ&lt;a href=&quot;https://github.com/ring-clojure/ring&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Ring&lt;/a&gt; ä»¥å…¶ç®€å•ç»Ÿä¸€çš„ HTTP æŠ½è±¡æ¨¡å‹è„±é¢–è€Œå‡ºã€‚Ring å……
    
    </summary>
    
      <category term="Web" scheme="http://liujiacai.net/categories/Web/"/>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>â€œç©è½¬â€ æŠ€æœ¯é¢è¯•â€”â€”é“¾è¡¨çš„å‡½æ•°è¡¨ç¤ºæ³•</title>
    <link href="http://liujiacai.net/blog/2017/03/22/ace-technical-interview/"/>
    <id>http://liujiacai.net/blog/2017/03/22/ace-technical-interview/</id>
    <published>2017-03-22T03:31:11.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p><a href="https://aphyr.com/posts/340-acing-the-technical-interview" target="_blank" rel="external">ã€ŠAcing the technical interviewã€‹</a>ï¼Œè€å¤–å†™çš„ç™½æ¿é¢è¯•çš„è°ƒä¾ƒæ–‡ï¼Œå£°è‰²å¹¶èŒ‚ï¼Œå…¼å…·å™è¿°æ–‡çš„ç”ŸåŠ¨ä¸æŠ€æœ¯æ–‡çš„æŠ½è±¡ã€‚æ–‡ä¸­ç”¨å‡½æ•°æ¥æ¨¡æ‹Ÿé“¾è¡¨çš„è¡¨ç¤ºæ³•æˆ‘åœ¨<a href="/blog/2014/10/12/lambda-calculus-introduction/">ã€Šç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculusã€‹</a>é‡Œé¢æœ‰æ·±å…¥è®²è§£ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒã€‚æœ¬æ–‡æœ€åï¼Œç»™å‡ºäº† Pythonã€Ruby è¯­è¨€ä¸­é“¾è¡¨çš„å‡½æ•°è¡¨ç¤ºã€‚</p>
<p>æ–‡ä¸­ä¸ªåˆ«è¯­å¥æˆ‘ç¿»è¯‘çš„ä¸æ˜¯å¾ˆå¥½æˆ–è€…æ²¡æœ‰ç¿»è¯‘ï¼Œå¸Œæœ›æ„Ÿå…´è¶£çš„è¯»è€…äºˆä»¥è¡¥å……ã€‚</p>
<h2 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h2><p>å¦‚æœä½ æ‰“ç®—æ‰¾ä¸€ä»½ç¨‹åºå‘˜ï¼ˆsoftware witchï¼‰çš„å·¥ä½œï¼Œé‚£ä¹ˆä½ ææœ‰å¯èƒ½éœ€è¦é€šè¿‡ç™½æ¿é¢è¯•ã€‚æ¯ä¸ªç¨‹åºå‘˜éƒ½åšè¿‡ç™½æ¿é¢è¯•ï¼Œå®ƒå·²ç»æˆäº†ç¨‹åºå‘˜çš„å®¶å¸¸ä¾¿é¥­ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜ä¼´éšç€åœ¨ä¸€ä¸ªå……æ»¡æ˜Ÿç©ºçš„æ¡Œé¢ä¸Šå·¥æ•´çš„æ‰“å¼€ä¸€ç»„<code>xterm</code>çª—å£ï¼Œä¸ç”±è‡ªä¸»åœ°åœ¨å‘¨è¾¹çš„ç›®å½•é‡Œè¿è¡Œ<code>ls</code>å‘½ä»¤ï¼Œä»¥é˜²æ˜¨æ™šæœ‰ä»€ä¹ˆå˜åŠ¨â€”â€”è¿™å°±åƒåœ¨å¨æˆ¿çš„æŠ½å±‰é‡Œæ‰¾ä¸œè¥¿ï¼Œè€Œè¿™ä¸ªå¨æˆ¿å‚¨è—äº†å„ç§å¥‡æ€ªçš„æ³•å…°ï¼ˆflangesï¼Œä½¿ç®¡å­ä¸ç®¡å­åŠå’Œé˜€é—¨ç›¸äº’è¿æ¥çš„é›¶ä»¶ï¼‰ã€èºä¸åˆ€ä»¥åŠå„ç§ä¸çŸ¥åçš„å®¶ç”¨ç”µå™¨ä¸Šæ‰ä¸‹æ¥çš„é›¶ä»¶å½¢æˆçš„å„ç§å¥‡æ€ªçš„å¡‘æ–™ç¢ç‰‡ï¼Œç°åœ¨è°ä¹Ÿä¸çŸ¥é“è¿™äº›å®¶ç”¨ç”µå™¨çš„ç”¨é€”ï¼Œæˆ–è®¸ä»æ¥å°±æ²¡çŸ¥é“è¿‡ï¼Œä½†å³ä½¿å¦‚æ­¤ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»å°å¿ƒç¿¼ç¿¼çš„å¯¹å¾…å®ƒä»¬ã€‚æˆ‘ç°åœ¨ç»™ä½ åˆ†æä¸€ä¸ªéå¸¸å¸¸è§çš„é¢è¯•é—®é¢˜ï¼šåè½¬é“¾è¡¨ï¼ˆreverse linked listï¼‰ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªé“¾è¡¨ã€‚æ¸…ç©ºä½ å·¥ä½œç©ºé—´é‡Œé¢ä¸å¿…è¦çš„<code>xterm</code>çª—å£ï¼Œç„¶åé€’å½’åœ°åœ¨å…·æœ‰ä¿æŠ¤æ€§çš„æ‹¬å·ï¼ˆè¯‘è€…æ³¨ï¼šLisp é‡Œé¢ç”¨æ‹¬å·åˆ†å‰²ä»£ç å—ï¼‰é‡Œé¢æ’’äº›ç›ï¼ˆè¯‘è€…æ³¨ï¼šè¿™å¥è¯éå¸¸å½¢è±¡ï¼Œæƒ³æƒ³æˆ‘ä»¬åšèœæ—¶æ”¾ç›çš„åœºæ™¯ï¼Œè¡¨ç¤ºè¦å¼€å§‹äº†ï¼Œå¿½ç•¥æŸäº›äººåæ”¾ç›ï¼‰ã€‚ä»é›¶å¼€å§‹åè½¬ä¸€ä¸ªé“¾è¡¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(defn cons [h t] #(if % h t))</div></pre></td></tr></table></figure></p>
<p>â€œè¿™ä¸æ˜¯ä¸€ä¸ªé“¾è¡¨ï¼Œè¿™åªæ˜¯ä¸€ä¸ª<code>if</code>è¯­å¥â€ï¼Œé¢è¯•å®˜è¯´ã€‚<br>â€œä½†å…¶ä»–éƒ¨åˆ†æ˜¯é“¾è¡¨ï¼Œè¿˜æœ‰ä»€ä¹ˆé—®é¢˜å˜›ï¼Ÿâ€ä½ å›ç­”åˆ°ï¼ŒåŒæ—¶ç¿»äº†ä¸€ä¸ªç™½çœ¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">user=&gt; (def x (cons 1 (cons 2 nil)))</div><div class="line">#&apos;user/x</div><div class="line">user=&gt; (x true)</div><div class="line">1</div><div class="line">user=&gt; ((x false) true)</div><div class="line">2</div></pre></td></tr></table></figure></p>
<p>â€œ<code>x</code>åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿâ€é¢è¯•å®˜å°½é‡è®©è‡ªå·±çœ‹èµ·æ¥å‹å–„äº›ã€‚<br>ç­”æ¡ˆåœ¨ REPL é‡Œï¼Œä½†æ˜¯ä¸è¦è¢«å®ƒä¸€æ—¶è¯¯å¯¼äº†ï¼Œå®ƒä»¬å¯ä¸æ˜¯ä½ çš„æœ‹å‹ï¼Œä½ åœ¨æ¥å¾…å…çš„èª“è¨€æ˜¯ä¸å…è®¸è¿™å‘ç”Ÿçš„ï¼ˆYour oath at the Front Desk forbade it. ç¥é©¬æ½œå°è¯ï¼Ÿï¼‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">user=&gt; x</div><div class="line">#object[user$cons$cell__4431 0x3b89cc1c &quot;user$cons$cell__4431@3b89cc1c&quot;]</div></pre></td></tr></table></figure></p>
<p>â€œäº†è§£ä¸€ä¸ªäº‹ç‰©æœ€å¥½çš„æ–¹å¼å°±æ˜¯å¯¹å®ƒå‘½åâ€ï¼Œä½ å»ºè®®åˆ°ã€‚å¥½çš„åå­—éå¸¸æœ‰æ„ä¹‰ï¼ˆTrue names have powerï¼‰ã€‚ç”± Ursula K. Le Guin å‘æ˜çš„ <a href="https://en.wikipedia.org/wiki/K_%28programming_language%29" target="_blank" rel="external">K è¯­è¨€</a>æ˜¯æœ€å¤è€ã€æœ€ç²¾ç»ƒçš„ form ä¹‹ä¸€ï¼ˆè¯‘è€…æ³¨ï¼šform æ˜¯ Lisp ç¨‹åºçš„åŸºæœ¬æ„æˆå•å…ƒï¼‰ã€‚è®©ä¸€ä¸ªæ–°è¯­è¨€æ˜ å°„æˆä½ è‡ªå·±çš„è¯æ±‡éœ€è¦å¿˜æ‰è‡ªå·±ä¹‹å‰çš„è®¤çŸ¥ï¼ŒåŸæœ‰çŸ¥è¯†ä¼šè®©ä½ çš„è®°å¿†ç–¼ç—›ï¼ˆè¯‘è€…æ³¨ï¼šä½œè€…æ˜¯æƒ³è¡¨è¾¾ Lisp é‡Œé¢æƒ¯ç”¨æ³•ä¸å¸¸è§çš„è¯­è¨€å·®è·æ¯”è¾ƒå¤§ï¼Œä¸èƒ½ç®€å•ç±»æ¯”ï¼‰ã€‚</p>
<p>â€œå‘ƒâ€¦ é‚£å¥½ï¼Œé‚£ä½ ä¼šæ€ä¹ˆä»è¿™ä¸ªé“¾è¡¨é‡Œé¢å–å‡ºä¸€ä¸ªå…ƒç´ å‘¢ï¼Ÿâ€</p>
<p>åœ¨ä½ è„‘æµ·ä¸­æœ‰éå¸¸æ¼‚äº®è§£å†³æ–¹å¼ï¼Œå°±åƒä½ èµ¤è£¸çš„åŒè„šä¸‹é“ºå¼€äº†çº¢åœ°æ¯¯ã€‚å¥¥æ–¯å¡çš„æ˜æ˜Ÿæ˜¨æ™šåœ¨è¿™é‡Œå‡ºå¸­è¿‡ï¼Œä½†ä½ è¿˜æ˜¯ç­‰å¾…ç€ä¸åŒçš„æ˜æ˜Ÿæ¥äº²å»ä½ ã€‚è¿™å°±åƒä½ ä½åœ¨<a href="https://en.wikipedia.org/wiki/S%C3%B8r%C3%B8ya" target="_blank" rel="external">ç‘Ÿç•¥å³¶</a>ï¼ˆæŒªå¨ç¬¬å…«å¤§å²›ï¼‰ çš„å±±ä¸Šæ—¶ï¼Œæœˆäº®å°±æ˜¯ä½ çš„çˆ±äººã€‚é™¤äº†ä¸€äº›è¾¹ç•Œæ¡ä»¶çš„æ£€æŸ¥ï¼Œä½ åœ¨ç¬¬ä¸€æ—¶é—´å†™å‡ºäº†æ­£ç¡®çš„è·å–ä¸€ä¸ªå…ƒç´ çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(defn nth [l n]</div><div class="line">  (when l (if (= 0 n)</div><div class="line">            (l true)</div><div class="line">            (recur (l false) (dec n)))))</div></pre></td></tr></table></figure></p>
<p>â€œä½ èƒ½ä¸èƒ½ç»™æˆ‘å†™ä¸€ä¸ªæ­£å¸¸çš„é“¾è¡¨ï¼Œåƒ Python é‡Œé¢çš„é‚£æ ·ï¼Ÿâ€</p>
<p>ä½ æ‘©æ‹³æ“¦æŒèµ·æ¥ï¼Œç«‹é©¬å†™äº†ä¸€ä¸ªå…·æœ‰æ ¼å¼ç¼©è¿›çš„<code>print</code>å‡½æ•°ã€‚ç°åœ¨ä½ çš„æ‰‹æŒé•¿æ»¡è€èŒ§ï¼ˆcallousedï¼‰ï¼Œçœ¼ç‘é‡Œæµéœ²å‡ºæ™¶è¹çš„ã€ç¢³é»‘ï¼ˆsoot-blackï¼‰çš„é›ªèŠ±ã€‚æ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯æœ‰ä»£ä»·çš„ï¼Œå½“ç„¶ï¼Œé™¤éå®ƒä»¬æ˜¯æ— å‰¯ä½œç”¨çš„çº¯å‡½æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(defn prn-list [l]</div><div class="line">  (print &quot;(&quot;)</div><div class="line">  (loop [l l]</div><div class="line">    (if (nil? l)</div><div class="line">      (print &quot;)\n&quot;)</div><div class="line">      (do (print (l true))</div><div class="line">          (when (l false)</div><div class="line">            (print &quot; &quot;))</div><div class="line">          (recur (l false))))))</div></pre></td></tr></table></figure></p>
<p>æ²¡æœ‰æ—¶é—´å»æƒ³æœ‰æ„ä¹‰çš„å˜é‡åã€ç¤ºä¾‹ã€å¸®åŠ©æ–‡æ¡£ï¼ˆè¯‘è€…æ³¨ï¼šdocstringï¼ŒClojureé‡Œé¢å‡½æ•°çš„æ³¨é‡Šï¼‰ã€‚åœ¨ç™½æ¿é¢è¯•è¿‡ç¨‹ä¸­ï¼Œæ—¶é—´å°±æ˜¯ä¸€åˆ‡ï¼ˆtime is of the essenceï¼‰ã€‚ Pretend you are a Haskell programmer, as your grandmother was, before her continuation passedã€‚ï¼ˆè¯‘è€…æ³¨ï¼šä¸æ¸…æ¥šè¿™å¥è¯ä½œè€…æƒ³è¡¨è¾¾ç¥é©¬æ„æ€ï¼Ÿï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">user=&gt; (prn-list (cons 1 (cons 2 (cons 3 nil))))</div><div class="line">(1 2 3)</div></pre></td></tr></table></figure></p>
<p>è¿™æ—¶é¢è¯•å®˜ç»ˆäºå®‰å¿ƒåœ°ç¬‘äº†ï¼Œæœ€èµ·ç ä¸Šé¢çš„è¾“å‡ºçœ‹èµ·æ¥ç»ˆäºæ­£å¸¸äº†ã€‚â€œé‚£ä¹ˆï¼Œå¼€å§‹åè½¬å§ï¼Œä½ éœ€è¦â€¦.â€</p>
<p>ä½ çªç„¶æ”¥ä½é¢è¯•å®˜çš„åŒæ‰‹ï¼Œè¿™æ—¶ä»–çš„å¤§è„‘åƒç´§å¼ å¿™ä¹±çš„é—¹é’Ÿå‘æ¡ä¼¼çš„å‘ç”Ÿäº†æ‰­æ›²ï¼Œé£æ è€Œè¿‡å¿ƒè„é‡Œé¢çš„ç»¦è™«ï¼Œæ‹æŒæ‹æŒçš„å¿ƒå‘ç”Ÿäº†åæ–œï¼Œå¹¶ä¸”ç”¨å¤è€çš„è¯­è¨€é»˜èƒŒä¸€é¦–è®½åˆºè¯—ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(defn reverse [l]</div><div class="line">  (loop [r nil, l l]</div><div class="line">    (if l</div><div class="line">      (recur (cons (l true) r) (l false))</div><div class="line">      r)))</div><div class="line"></div><div class="line">user=&gt; (prn-list (reverse (cons 1 (cons 2 (cons 3 nil)))))</div><div class="line">(3 2 1)</div></pre></td></tr></table></figure></p>
<p>å½“ä½ æ”¾å¼€é¢è¯•å®˜çš„æ‰‹ï¼Œä»–ç»“ç»“å·´å·´çš„è¯´äº†äº›æœ‰ç¤¼è²Œçš„ä¸œè¥¿ï¼Œæ‹‰ä¸Šäº†å…œå¸½ä¸Šè¡£çš„æ‹‰é”æ¥æ©ç›–è‡ªå·±å†·æ±—ã€‚ä¸‹é¢è¿™é‡Œä¼šæœ‰å…¶ä»–ä¼šè®®ï¼Œä½†æ˜¯ä½ ä¸éœ€è¦å‚åŠ ï¼Œä½ å¿«ç‚¹èµ°å§ï¼ˆSend an eagle in your place ï¼Ÿæ˜¯è¿™ä¹ˆç¿»è¯‘å˜›ï¼‰ã€‚</p>
<p>ä»–ä»¬è‚¯å®šä¼šå†³ç»ä½ ï¼Œè€Œä¸”ä¼šå—¤ä¹‹ä»¥é¼»ï¼Œè¯´ä½ ä¸ç¬¦åˆä»–ä»¬çš„å…¬å¸æ–‡åŒ–ï¼ˆlack of culture fitï¼‰ã€‚Alight upon your cloud-pine, and exit through the window. ï¼ˆç¥é©¬æ„æ€ï¼Ÿï¼‰è¿™åœ°æ–¹ä¸é€‚åˆä½ ã€‚</p>
<h2 id="å…¶ä»–å®ç°"><a href="#å…¶ä»–å®ç°" class="headerlink" title="å…¶ä»–å®ç°"></a>å…¶ä»–å®ç°</h2><h3 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">from __future__ import print_function</div><div class="line"></div><div class="line"></div><div class="line">def cons(h, t):</div><div class="line">    return lambda x: h if x else t</div><div class="line"></div><div class="line"></div><div class="line">def printer(l):</div><div class="line">    if l is None:</div><div class="line">        print(&quot;nil&quot;)</div><div class="line">    else:</div><div class="line">        while l:</div><div class="line">            e = l(True)</div><div class="line">            print(e, end=&apos; &apos;)</div><div class="line">            l = l(False)</div><div class="line">        else:</div><div class="line">            print(&quot;&quot;)</div><div class="line"></div><div class="line"></div><div class="line">def reverse(l):</div><div class="line">    reversed_l = None</div><div class="line">    while l:</div><div class="line">        e = l(True)</div><div class="line">        reversed_l = cons(e, reversed_l)</div><div class="line">        l = l(False)</div><div class="line"></div><div class="line">    return reversed_l</div><div class="line"></div><div class="line"></div><div class="line">l = cons(3, cons(2, cons(1, None)))</div><div class="line"></div><div class="line">printer(l)</div><div class="line"># 3 2 1</div><div class="line"></div><div class="line">printer((reverse(l)))</div><div class="line"># 1 2 3</div></pre></td></tr></table></figure>
<h3 id="Ruby"><a href="#Ruby" class="headerlink" title="Ruby"></a>Ruby</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">def cons(h, t)</div><div class="line">  lambda &#123; |e| e ? h : t &#125;</div><div class="line">end</div><div class="line"></div><div class="line">def printer(l)</div><div class="line">  while l</div><div class="line">    e = l.call true</div><div class="line">    print e, &apos; &apos;</div><div class="line">    l = l.call false</div><div class="line">  end</div><div class="line">  puts &apos;&apos;</div><div class="line">end</div><div class="line"></div><div class="line">def reverse(l)</div><div class="line">  reversed_l = nil</div><div class="line">  while l</div><div class="line">    e = l.call true</div><div class="line">    reversed_l = cons e, reversed_l</div><div class="line">    l = l.call false</div><div class="line">  end</div><div class="line">  return reversed_l</div><div class="line">end</div><div class="line"></div><div class="line">l = cons(3, cons(2, cons(1, nil)))</div><div class="line">printer l</div><div class="line"># 3 2 1</div><div class="line">printer reverse l</div><div class="line"># 1 2 3</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://aphyr.com/posts/340-acing-the-technical-interview&quot; ta
    
    </summary>
    
      <category term="è½¬è½½" scheme="http://liujiacai.net/categories/%E8%BD%AC%E8%BD%BD/"/>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>è¾¨æ Ruby ä¸­çš„ Method ä¸ Proc</title>
    <link href="http://liujiacai.net/blog/2017/03/05/method-vs-proc-in-ruby/"/>
    <id>http://liujiacai.net/blog/2017/03/05/method-vs-proc-in-ruby/</id>
    <published>2017-03-05T07:26:28.000Z</published>
    <updated>2017-08-06T07:27:00.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Ruby is simple in appearance, but is very complex inside, just like our human body.  </p>
<blockquote>
<p>â€“ Matz  <a href="https://www.ruby-lang.org/en/about" target="_blank" rel="external">https://www.ruby-lang.org/en/about</a></p>
</blockquote>
</blockquote>
<p>Ruby ä¸ Pythonã€Scala ç±»ä¼¼ï¼Œåœ¨ä¸€åˆ‡çš†æ˜¯å¯¹è±¡ï¼ˆSeeing Everything as an Objectï¼‰çš„åŸºç¡€ä¸Šï¼Œæ”¯æŒå‡½æ•°å¼ç¼–ç¨‹ï¼Œè¿™æ„å‘³ç€å‡½æ•°æ˜¯ä¸€ç­‰æˆå‘˜ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°å€¼è¿”å›ã€‚</p>
<p>ä½†æ˜¯ï¼ŒRuby ä¸­çš„å‡½æ•°å¹¶æ²¡æœ‰å…¶ä»–åŠ¨æ€è¯­è¨€ä¸­é‚£ä¹ˆç®€å•ï¼Œå®ƒæä¾›äº† <a href="http://ruby-doc.org/core-2.4.0/Method.html" target="_blank" rel="external">Method</a> ä¸ <a href="http://ruby-doc.org/core-2.4.0/Proc.html" target="_blank" rel="external">Proc</a> ä¸¤ä¸ªç±»æ¥è¡¨ç¤ºå‡½æ•°çš„æ¦‚å¿µï¼Œå¯¹äºè¿™ä¸¤ä¸ªç±»çš„åŒºåˆ«æ— è®ºæ˜¯å®˜æ–¹æ–‡æ¡£è¿˜æ˜¯ Stackoverflow ä¸Šçš„é—®é¢˜ï¼Œè§£é‡Šçš„éƒ½éå¸¸æ¨¡ç³Šã€‚åœ¨å…¶ä»–è¯­è¨€å‡½æ•°å¾ˆä¹ ä»¥ä¸ºå¸¸çš„ç”¨æ³•åœ¨ Ruby ä¸­å´è¡Œä¸é€šï¼Œå°±å…¶åŸå› è¿˜æ˜¯ä¸æ¸…æ¥šè¿™ä¸¤ä¸ªç±»çš„åŒºåˆ«ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¸®åŠ©å¤§å®¶ç†è§£å¥½ Ruby ä¸­çš„â€œå‡½æ•°â€æ¦‚å¿µï¼Œåšåˆ°æ·±å…¥æµ…å‡ºï¼Œä¸å…¶ä»–å‡½æ•°å¼è¯­è¨€èä¼šè´¯é€šã€‚</p>
<h2 id="Block-oriented-Programming"><a href="#Block-oriented-Programming" class="headerlink" title="Block-oriented Programming"></a>Block-oriented Programming</h2><p>Ruby ä¸­ä»£ç å—æœ€å¸¸è§çš„å½¢å¼æ—¢ä¸æ˜¯ Proc ä¹Ÿä¸æ˜¯ Methodï¼Œè€Œæ˜¯ <code>block</code>ã€‚æ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># éå† Range/Array ç­‰</div><div class="line">(0..10).each do |num|</div><div class="line">    puts num</div><div class="line">end</div><div class="line"></div><div class="line">#  è¯»å–æ–‡ä»¶</div><div class="line">File.foreach(&apos;README.md&apos;).with_index do |line, line_num|</div><div class="line">  puts &quot;#&#123;line_num&#125;: #&#123;line&#125;&quot;</div><div class="line">end</div><div class="line">#  éå†æ–‡ä»¶</div><div class="line">Dir.glob(&apos;*.rb&apos;) &#123;|ruby_src| puts &quot;found #&#123;ruby_src&#125;&quot;&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ç¤ºä¾‹æ¼”ç¤ºäº†<code>block</code>çš„ä¸¤ç§å­—é¢é‡ï¼ˆliteralï¼‰å½¢å¼ï¼Œéå¸¸æ–¹ä¾¿ç®€æ´ã€‚ä½†æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œ<code>block</code> ä»…ä»…æ˜¯ Ruby æä¾›çš„ä¸€è¯­æ³•ç³–è¡£ï¼Œå¹¶ä¸æŠŠå…¶èµ‹å€¼ç»™æŸä¸€å˜é‡ã€‚å¦‚æœè‡ªå®šä¹‰å‡½æ•°éœ€è¦è°ƒç”¨ä¼ å…¥çš„<code>block</code>ï¼Œéœ€è¦é‡‡ç”¨<code>yield</code>æ–¹å¼ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># åœ¨ Array ç±»ä¸­æ·»åŠ è‡ªå®šä¹‰å‡½æ•°</div><div class="line">class Array</div><div class="line">  def my_each</div><div class="line">    0.upto(size) do |i|</div><div class="line">      yield self[i]</div><div class="line">    end</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">%w(a b c).my_each do |item|</div><div class="line">  puts item</div><div class="line">end</div></pre></td></tr></table></figure></p>
<h2 id="é¢å‘å‡½æ•°å¼çš„-Proc"><a href="#é¢å‘å‡½æ•°å¼çš„-Proc" class="headerlink" title="é¢å‘å‡½æ•°å¼çš„ Proc"></a>é¢å‘å‡½æ•°å¼çš„ Proc</h2><p><code>block</code> çš„ä¼˜åŠ¿æ˜¯ç®€æ´ï¼Œä½†æ˜¯æœ‰ä¸ªç¼ºç‚¹å°±æ˜¯æ— æ³•å¤ç”¨ï¼Œå› ä¸ºå¹¶ä¸å­˜åœ¨<code>block</code>ç±»å‹ã€‚ä½†åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œå‡½æ•°åå¯ä»¥éšæ„ä¼ é€’ï¼Œä¸‹é¢ä¸¾ä¸€ Python çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">def myinc(x):</div><div class="line">	return x + 1</div><div class="line"></div><div class="line">map(myinc, [1,2,3]) # =&gt; [2, 3, 4]</div><div class="line">map(myinc, [4,5,6])	# =&gt; [5, 6, 7]</div></pre></td></tr></table></figure></p>
<p>Ruby ä¸­ä¸å…¶å¯¹åº”çš„æ˜¯<code>è¿‡ç¨‹</code>ï¼ˆProcï¼‰ï¼Œä¸ä¸Šé¢åŠŸèƒ½ç­‰ä»·çš„ Ruby ä»£ç ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">myinc = Proc.new &#123;|num| num + 1&#125;</div><div class="line"># æˆ–ä¸‹é¢ä¸¤ç§æ–¹å¼</div><div class="line"># myinc = proc &#123;|num| num + 1&#125;</div><div class="line"># myinc = lambda &#123;|num| num + 1&#125;</div><div class="line"></div><div class="line">[1,2,3].map(&amp;myinc)</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç æœ€å…³é”®çš„æ˜¯<code>&amp;myinc</code>ä¸­çš„<code>&amp;</code>ï¼Œç”±äº map å‡½æ•°åé¢å¯ä»¥è·Ÿä¸€ä¸ª blockï¼Œæ‰€ä»¥éœ€è¦æŠŠ Proc è½¬ä¸º blockã€‚</p>
<blockquote>
<p>å½“<code>&amp;</code>ç¬¦å·å‡ºç°åœ¨å‡½æ•°å‚æ•°åˆ—è¡¨ä¸­æ—¶ï¼Œä¼šæŠŠå…¶åé¢çš„å‚æ•°è½¬ä¸º Procï¼Œå¹¶ä¸”æŠŠè½¬åŒ–åçš„å‚æ•°ä½œä¸º block ä¼ é€’ç»™è°ƒç”¨è€…ã€‚</p>
<blockquote>
<p><a href="http://stackoverflow.com/a/9429972/2163429" target="_blank" rel="external">http://stackoverflow.com/a/9429972/2163429</a></p>
</blockquote>
</blockquote>
<p>æˆ‘è¿™é‡Œæœ‰ä¸ªæ›´å¥½çš„ç†è§£å¤§å®¶å¯ä»¥å‚è€ƒï¼š</p>
<blockquote>
<p><code>&amp;</code>åœ¨Cè¯­è¨€ä¸­ä¸ºå–åœ°å€ç¬¦ï¼ŒRuby ä¸­çš„å‡½æ•°å‚æ•°åé¢å¯ä»¥è·Ÿä¸€ä¸ª blockï¼Œç”±äºè¿™ä¸ª block ä¸æ˜¯å‚æ•°çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥æ²¡æœ‰åå­—ï¼Œè¿™å¾ˆç†æ‰€å½“ç„¶å¯ä»¥æŠŠ block ç†è§£ä¸ºä¸€å†…å­˜åœ°å€ï¼Œ<code>block_given?</code> å‡½æ•°å¯ä»¥æ£€æŸ¥è¿™ä¸ª<code>block</code>æ˜¯å¦å­˜åœ¨ã€‚<code>&amp;myinc</code> å¯ä»¥ç†è§£ä¸ºå– Proc çš„åœ°å€ä¼ ç»™ map å‡½æ•°ã€‚</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[1,2,3].map(myinc)</div><div class="line"># è¿™ç§å†™æ³•ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯</div><div class="line"># in `map&apos;: wrong number of arguments (given 1, expected 0) (ArgumentError)</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ï¼ŒRuby ä¸­çš„ Proc å’Œå…¶ä»–åŠ¨æ€è¯­è¨€çš„å‡½æ•°æ˜¯ç­‰ä»·çš„ï¼Œä¸‹é¢å†ä¸¾ä¸€ä¾‹è¯´æ˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">def myfilter(arr, validator)</div><div class="line">  arr.each do |item|</div><div class="line">    if validator.call(item)</div><div class="line">      puts item</div><div class="line">    end</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">myfilter([1,2,3,4], lambda &#123;|num| num &gt; 3&#125;)  # è¾“å‡º 4</div><div class="line"></div><div class="line"># æ­¤å¤–ï¼Œ è¿˜å¯ä»¥åœ¨å®šä¹‰ myfilter æ—¶ï¼Œåˆ©ç”¨ &amp; å°†æœ€åçš„ block è½¬ä¸º Proc</div><div class="line"></div><div class="line">def myfilter(arr, &amp;validator)</div><div class="line">  arr.each do |item|</div><div class="line">    if validator.call(item)</div><div class="line">      puts item</div><div class="line">    end</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">myfilter([1,2,3,4]) &#123;|num| num &gt; 3&#125;</div><div class="line"># è¾“å‡º 4</div></pre></td></tr></table></figure></p>
<h3 id="proc-vs-lambda"><a href="#proc-vs-lambda" class="headerlink" title="proc vs. lambda"></a>proc vs. lambda</h3><p>ä¸Šé¢ä»‹ç»è¿‡ï¼ŒProc æœ‰ä¸¤ç§å­—é¢é‡å½¢å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">myinc = proc &#123;|num| num + 1&#125;   # ä¸ Proc.new ç­‰ä»·</div><div class="line">myinc = lambda &#123;|num| num + 1&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸¤ç§å½¢å¼çš„ Proc æœ‰ä»¥ä¸‹ä¸¤ç‚¹ä¸åŒï¼š</p>
<ol>
<li><p><code>proc</code>å½¢å¼ä¸é™åˆ¶å‚æ•°ä¸ªæ•°ï¼›è€Œ<code>lambda</code>å½¢å¼ä¸¥æ ¼è¦æ±‚ä¸€è‡´</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">myadd = proc &#123;|x, y| puts x&#125;</div><div class="line"></div><div class="line">myadd.call(1)        # ok</div><div class="line">myadd.call(1, 2)     # ok</div><div class="line">myadd.call(1, 2, 3)  # ok</div><div class="line"></div><div class="line"></div><div class="line">myadd = lambda &#123;|x, y| puts x&#125;</div><div class="line"></div><div class="line">myadd.call(1)        # ArgumentError</div><div class="line">myadd.call(1, 2)     # ok</div><div class="line">myadd.call(1, 2, 3)  #ArgumentError</div></pre></td></tr></table></figure>
</li>
<li><p><code>proc</code>ä¸­çš„<code>return</code>è¯­å¥å¯¹è°ƒç”¨æ–¹æœ‰æ•ˆï¼›è€Œ<code>lambda</code>ä»…ä»…å¯¹å…¶æœ¬èº«èµ·ä½œç”¨</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">def foo(some_proc)</div><div class="line">  some_proc.call</div><div class="line">  puts &quot;foo over&quot;</div><div class="line">end</div><div class="line"></div><div class="line"># 1. æ­£å¸¸è¾“å‡º in lambdaã€foo over</div><div class="line">foo(lambda do</div><div class="line">  puts &quot;in lambda&quot;</div><div class="line">  return</div><div class="line">end)</div><div class="line"># 2. è¾“å‡º in new åæŠ¥  unexpected return (LocalJumpError)</div><div class="line">foo(Proc.new do</div><div class="line">  puts &quot;in new&quot;</div><div class="line">  return</div><div class="line">end)</div><div class="line"># 3. è¾“å‡º in proc åæŠ¥  unexpected return (LocalJumpError)</div><div class="line">foo(proc do</div><div class="line">  puts &quot;in proc&quot;</div><div class="line">  return</div><div class="line">end)</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="é¢å‘å¯¹è±¡çš„-Method"><a href="#é¢å‘å¯¹è±¡çš„-Method" class="headerlink" title="é¢å‘å¯¹è±¡çš„ Method"></a>é¢å‘å¯¹è±¡çš„ Method</h2><p>Ruby ä¸­ä½¿ç”¨<code>def</code>å®šä¹‰çš„â€œå‡½æ•°â€ä¸º<code>Method</code>ç±»å‹ï¼Œä¸“ä¸ºé¢å‘å¯¹è±¡ç‰¹æ€§è®¾è®¡ï¼Œé¢å‘å¯¹è±¡æ›´ä¸€èˆ¬çš„è¯´æ³•æ˜¯æ¶ˆæ¯ä¼ é€’ï¼Œé€šè¿‡ç»™ä¸€å¯¹è±¡å‘é€ä¸åŒæ¶ˆæ¯ï¼Œå¯¹è±¡ä½œå‡ºä¸åŒç›¸åº”ï¼Œè¿™ä¸€ç‚¹ä¸ <a href="/blog/2015/12/26/sicp-chapter3-summary/#ç”¨å˜åŠ¨çš„æ•°æ®åšæ¨¡æ‹Ÿ">SICP ç¬¬ä¸‰ç« </a>çš„å†…å®¹ä¸è°‹è€Œåˆã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">class Rectangle</div><div class="line">  def initialize(width, height)</div><div class="line">    @width = width</div><div class="line">    @height = height</div><div class="line">  end</div><div class="line">  def area</div><div class="line">    @width * @height</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">rect = Rectangle.new 10, 20</div><div class="line"># ä¼ ç»Ÿæ–¹å¼</div><div class="line">puts rect.area</div><div class="line"># æ¶ˆæ¯ä¼ é€’æ–¹å¼</div><div class="line">puts rect.send :area</div></pre></td></tr></table></figure>
<p>ç”±äº Ruby ä¸­æ–¹æ³•åè¡¨ç¤ºçš„æ˜¯è°ƒç”¨ï¼Œæ‰€ä»¥ä¸€èˆ¬å¯ç”¨ä¸æ–¹æ³•åŒåçš„ <a href="http://ruby-doc.org/core-2.4.0/Symbol.html" target="_blank" rel="external">Symbol</a> æ¥è¡¨ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">puts rect.method(:area)</div><div class="line"></div><div class="line">#&lt;Method: Rectangle#area&gt;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥é€šè¿‡ <code>Method</code> çš„ <code>to_proc</code> æ–¹æ³•å¯ä»¥å°† Method è½¬ä¸ºåŠŸèƒ½ç­‰ä»·çš„ Procã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">def myinc(num)</div><div class="line">  num + 1</div><div class="line">end</div><div class="line"></div><div class="line">[1,2,3].map(&amp;method(:myinc).to_proc)</div><div class="line"># =&gt; [2,3,4]</div><div class="line"># åœ¨ Ruby æºæ–‡ä»¶çš„é¡¶å±‚å®šä¹‰çš„å‡½æ•°å±äº main å¯¹è±¡ï¼ˆObject ç±»ï¼‰ï¼Œæ‰€ä»¥ä¸Šé¢çš„è°ƒç”¨ç›¸å½“äºï¼š</div><div class="line"># [1,2,3].map(&amp;Object.method(:myinc))</div></pre></td></tr></table></figure>
<p>é€šè¿‡ <code>define_method</code> å¯ä»¥å°† Proc è½¬ä¸ºæŸå¯¹è±¡çš„å®ä¾‹æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class Foo</div><div class="line">  define_method :pp &#123; puts &quot;p&quot; &#125;</div><div class="line">end</div><div class="line">Foo.new.pp</div><div class="line">=&gt; p</div></pre></td></tr></table></figure></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><code>block</code> ä¸º Proc çš„è¯­æ³•ç³–è¡£ï¼Œç”¨äºå•æ¬¡ä½¿ç”¨æ—¶</li>
<li><code>Proc</code> ä¸“ä¸ºå‡½æ•°å¼ç¼–ç¨‹è®¾è®¡ï¼Œä¸å…¶ä»–åŠ¨æ€è¯­è¨€çš„å‡½æ•°ç­‰ä»·</li>
<li><code>Method</code> ä¸“ä¸ºé¢å‘å¯¹è±¡è®¾è®¡ï¼Œæ¶ˆæ¯ä¼ é€’çš„ç¬¬ä¸€ä¸ªå‚æ•°</li>
</ul>
<p>å¼„æ¸… Method ä¸ Proc çš„åŒºåˆ«åï¼Œä¸å¾—ä¸æ¬£èµ Ruby è¯­è¨€è®¾è®¡çš„å·§å¦™ï¼Œå…¼å…·å‡½æ•°å¼ä¸é¢å‘å¯¹è±¡çš„ç²¾é«“ã€‚å®åœ¨æ˜¯ç¨‹åºå‘˜å¿…å¤‡åˆ©å™¨ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Method_Calls" target="_blank" rel="external">https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Method_Calls</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Ruby is simple in appearance, but is very complex inside, just like our human body.  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;â€“ Matz  &lt;a href=&quot;h
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Ruby" scheme="http://liujiacai.net/tags/ruby/"/>
    
  </entry>
  
  <entry>
    <title>Clojure è¿è¡ŒåŸç†ä¹‹å­—èŠ‚ç ç”Ÿæˆç¯‡</title>
    <link href="http://liujiacai.net/blog/2017/02/09/clojure-compiler-analyze-2/"/>
    <id>http://liujiacai.net/blog/2017/02/09/clojure-compiler-analyze-2/</id>
    <published>2017-02-09T13:51:29.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/blog/2017/02/05/clojure-compiler-analyze/">ä¸Šä¸€ç¯‡æ–‡ç« </a>è®²è¿°äº† Clojure ç¼–è¯‘å™¨å·¥ä½œçš„æ•´ä½“æµç¨‹ï¼Œä¸»è¦æ¶‰åŠ LispReader ä¸ Compiler è¿™ä¸¤ä¸ªç±»ï¼Œè€Œä¸”æŒ‡å‡ºç¼–è¯‘å™¨å¹¶æ²¡æœ‰æŠŠ Clojure è½¬ä¸ºç›¸åº”çš„ Java ä»£ç ï¼Œè€Œæ˜¯ç›´æ¥ä½¿ç”¨ ASM ç”Ÿæˆå¯è¿è¡Œåœ¨ JVM ä¸­çš„ bytecodeã€‚æœ¬æ–‡å°†ä¸»è¦è®¨è®º Clojure ç¼–è¯‘æˆçš„ bytecode å¦‚ä½•å®ç°åŠ¨æ€è¿è¡Œæ—¶ä»¥åŠä¸ºä»€ä¹ˆ Clojure ç¨‹åºå¯åŠ¨æ…¢ï¼Œè¿™ä¼šæ¶‰åŠåˆ° JVM çš„ç±»åŠ è½½æœºåˆ¶ã€‚</p>
<h2 id="ç±»ç”Ÿæˆè§„åˆ™"><a href="#ç±»ç”Ÿæˆè§„åˆ™" class="headerlink" title="ç±»ç”Ÿæˆè§„åˆ™"></a>ç±»ç”Ÿæˆè§„åˆ™</h2><p>JVM è®¾è®¡ä¹‹åˆåªæ˜¯ä¸º Java è¯­è¨€è€ƒè™‘ï¼Œæ‰€ä»¥æœ€åŸºæœ¬çš„æ¦‚å¿µæ˜¯ classï¼Œé™¤äº†å…«ç§åŸºæœ¬ç±»å‹ï¼Œå…¶ä»–éƒ½æ˜¯å¯¹è±¡ã€‚Clojure ä½œä¸ºä¸€æœ¬å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œæœ€åŸºæœ¬çš„æ¦‚å¿µæ˜¯å‡½æ•°ï¼Œæ²¡æœ‰ç±»çš„æ¦‚å¿µï¼Œé‚£ä¹ˆ Clojure ä»£ç ç”Ÿæˆä»¥ç±»ä¸ºä¸»çš„ bytecode å‘¢ï¼Ÿ</p>
<p>ä¸€ç§ç›´è§‚çš„æƒ³æ³•æ˜¯ï¼Œæ¯ä¸ªå‘½åç©ºé—´ï¼ˆnamespaceï¼‰æ˜¯ä¸€ä¸ªç±»ï¼Œå‘½åç©ºé—´é‡Œçš„å‡½æ•°ç›¸å½“äºç±»çš„æˆå‘˜å‡½æ•°ã€‚ä½†ä»”ç»†æƒ³æƒ³ä¼šæœ‰å¦‚ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>åœ¨ REPL é‡Œé¢ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ ã€ä¿®æ”¹å‡½æ•°ï¼Œå¦‚æœä¸€ä¸ªå‘½åç©ºé—´ç›¸å½“äºä¸€ä¸ªç±»ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»ä¼šè¢«åå¤åŠ è½½</li>
<li>ç”±äºå‡½æ•°å’Œå­—ç¬¦ä¸²ä¸€æ ·æ˜¯ä¸€ç­‰æˆå‘˜ï¼Œè¿™æ„å‘³è¿™å‡½æ•°æ—¢å¯ä»¥ä½œä¸ºå‚æ•°ã€ä¹Ÿå¯ä»¥ä½œä¸ºè¿”å›å€¼ï¼Œå¦‚æœå‡½æ•°ä½œä¸ºç±»çš„æ–¹æ³•ï¼Œæ˜¯æ— æ³•å®ç°çš„</li>
</ol>
<p>ä¸Šè¿°é—®é¢˜ 2 å°±è¦æ±‚å¿…é¡»å°†å‡½æ•°ç¼–è¯‘æˆä¸€ä¸ªç±»ã€‚æ ¹æ® <a href="https://clojure.org/reference/compilation" target="_blank" rel="external">Clojure å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¯¹åº”å…³ç³»æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å‡½æ•°ç”Ÿæˆä¸€ä¸ªç±»</li>
<li>æ¯ä¸ªæ–‡ä»¶ï¼ˆç›¸å½“äºä¸€ä¸ªå‘½åç©ºé—´ï¼‰ç”Ÿæˆä¸€ä¸ª<code>&lt;filename&gt;__init</code> çš„åŠ è½½ç±»</li>
<li><code>gen-class</code> ç”Ÿæˆå›ºå®šåå­—çš„ç±»ï¼Œæ–¹ä¾¿ä¸ Java äº¤äº’</li>
<li><code>defrecord</code>ã€<code>deftype</code>ç”ŸæˆåŒåçš„ç±»ï¼Œ<code>proxy</code>ã€<code>reify</code>ç”ŸæˆåŒ¿åçš„ç±»</li>
</ul>
<p>éœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œåªæœ‰åœ¨ AOT ç¼–è¯‘æ—¶ï¼ŒClojure æ‰ä¼šåœ¨æœ¬åœ°ç”Ÿæˆ <code>.class</code> æ–‡ä»¶ï¼Œå…¶ä»–æƒ…å†µä¸‹ç”Ÿæˆçš„ç±»å‡åœ¨å†…å­˜ä¸­ã€‚</p>
<h2 id="åŠ¨æ€è¿è¡Œæ—¶"><a href="#åŠ¨æ€è¿è¡Œæ—¶" class="headerlink" title="åŠ¨æ€è¿è¡Œæ—¶"></a>åŠ¨æ€è¿è¡Œæ—¶</h2><p>æ˜ç¡®äº† Clojure ç±»ç”Ÿæˆè§„åˆ™åï¼Œä¸‹é¢ä»‹ç» Clojure æ˜¯å¦‚ä½•å®ç°åŠ¨æ€è¿è¡Œæ—¶ã€‚è¿™ä¸€é—®é¢˜å°†åˆ†ä¸º AOT ç¼–è¯‘ä¸ DynamicClassLoader ç±»çš„å®ç°ä¸¤éƒ¨åˆ†ã€‚</p>
<h3 id="AOT-ç¼–è¯‘"><a href="#AOT-ç¼–è¯‘" class="headerlink" title="AOT ç¼–è¯‘"></a>AOT ç¼–è¯‘</h3><p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB26GwHd4xmpuFjSZFNXXXrRXXa_!!581166664.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ cat src/how_clojure_work/core.clj</div><div class="line"></div><div class="line">(ns how-clojure-work.core)</div><div class="line"></div><div class="line">(defn -main [&amp; _]</div><div class="line"> (println &quot;Hello, World!&quot;))</div></pre></td></tr></table></figure></p>
<p>ä½¿ç”¨ <code>lein compile</code> ç¼–è¯‘è¿™ä¸ªæ–‡ä»¶ï¼Œä¼šåœ¨<code>*compile-path*</code>æŒ‡å®šçš„æ–‡ä»¶å¤¹ï¼ˆä¸€èˆ¬æ˜¯é¡¹ç›®çš„<code>target</code>ï¼‰ä¸‹ç”Ÿæˆå¦‚ä¸‹æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ ls target/classes/how_clojure_work/</div><div class="line"></div><div class="line">core$fn__38.class</div><div class="line">core$loading__5569__auto____36.class</div><div class="line">core$main.class</div><div class="line">core__init.class</div></pre></td></tr></table></figure>
<p><code>core$main.class</code>ä¸<code>core__init.class</code>åˆ†åˆ«è¡¨ç¤ºåŸæ–‡ä»¶çš„<code>main</code>å‡½æ•°ä¸å‘½åç©ºé—´åŠ è½½ç±»ï¼Œé‚£ä¹ˆå‰©ä¸‹ä¸¤ä¸ªç±»æ˜¯ä»é‚£é‡Œæ¥çš„å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬çŸ¥é“ Clojure é‡Œé¢å¾ˆå¤šâ€œå‡½æ•°â€å…¶å®æ˜¯ç”¨å®å®ç°çš„ï¼Œå®åœ¨ç¼–è¯‘æ—¶ä¼šè¿›è¡Œå±•å¼€ï¼Œç”Ÿæˆæ–°ä»£ç ï¼Œä¸Šé¢ä»£ç ä¸­çš„<code>ns</code>ã€<code>defn</code>éƒ½æ˜¯å®ï¼Œå±•å¼€åï¼ˆåœ¨ Cider + Emacs å¼€å‘ç¯å¢ƒä¸‹ï¼Œ<code>C-c  M-m</code>ï¼‰å¯å¾—<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">(do</div><div class="line">  (in-ns &apos;how-clojure-work.core)</div><div class="line">  ((fn*</div><div class="line">     loading__5569__auto__</div><div class="line">     ([]</div><div class="line">       (. clojure.lang.Var</div><div class="line">        (clojure.core/pushThreadBindings</div><div class="line">          &#123;clojure.lang.Compiler/LOADER</div><div class="line">           (. (. loading__5569__auto__ getClass) getClassLoader)&#125;))</div><div class="line">       (try</div><div class="line">         (refer &apos;clojure.core)</div><div class="line">         (finally</div><div class="line">           (. clojure.lang.Var (clojure.core/popThreadBindings)))))))</div><div class="line">  (if (. &apos;how-clojure-work.core equals &apos;clojure.core)</div><div class="line">    nil</div><div class="line">    (do</div><div class="line">      (. clojure.lang.LockingTransaction</div><div class="line">       (clojure.core/runInTransaction</div><div class="line">         (fn*</div><div class="line">           ([]</div><div class="line">             (commute</div><div class="line">               (deref #&apos;clojure.core/*loaded-libs*)</div><div class="line">               conj</div><div class="line">               &apos;how-clojure-work.core)))))</div><div class="line">      nil)))</div><div class="line"></div><div class="line">(def main (fn* ([&amp; _] (println &quot;Hello, World!&quot;))))</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>ns</code>å±•å¼€åçš„ä»£ç é‡Œé¢åŒ…å«äº†ä¸¤ä¸ªåŒ¿åå‡½æ•°ï¼Œå¯¹åº”æœ¬åœ°ä¸Šå‰©ä½™çš„ä¸¤ä¸ªæ–‡ä»¶ã€‚ä¸‹é¢ä¾æ¬¡åˆ†æè¿™å››ä¸ª<code>class</code>æ–‡ä»¶</p>
<h4 id="core-init"><a href="#core-init" class="headerlink" title="core__init"></a>core__init</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ javap core__init.class</div><div class="line">public class how_clojure_work.core__init &#123;</div><div class="line">  public static final clojure.lang.Var const__0;</div><div class="line">  public static final clojure.lang.AFn const__1;</div><div class="line">  public static final clojure.lang.AFn const__2;</div><div class="line">  public static final clojure.lang.Var const__3;</div><div class="line">  public static final clojure.lang.AFn const__11;</div><div class="line">  public static void load();</div><div class="line">  public static void __init0();</div><div class="line">  public static &#123;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>Clojure é‡Œé¢æ‰€æœ‰çš„å‡½æ•°éƒ½ç»§æ‰¿ <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/IFn.java" target="_blank" rel="external">IFn æ¥å£</a>ï¼Œè¯¥æ¥å£æœ‰ 20 ä¸ªé‡è½½çš„ invoke æ–¹æ³•ï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¹ˆå¤š invoke æ–¹æ³•ï¼Œæ˜¯å› ä¸º <a href="http://stackoverflow.com/a/2736636/2163429" target="_blank" rel="external">JVM æ“…é•¿æ ¹æ®å‚æ•°æ•°ç›®è¿›è¡Œæ–¹æ³•è°ƒåº¦ï¼ˆdispatchï¼‰</a>ã€‚<br><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/AFn.java" target="_blank" rel="external">æŠ½è±¡ç±» AFn</a> ä¸º IFn é‡Œçš„ 20 ä¸ª invoke æ–¹æ³•æä¾›äº†çš„é»˜è®¤å®ç°ï¼ˆé€šè¿‡æŠ› throwArity å¼‚å¸¸ï¼‰ï¼Œè¿™æ ·å…¶ä»–å‡½æ•°å°±åªéœ€è¦ç»§æ‰¿ AFn å¹¶é‡å†™ç›¸åº” invoke æ–¹æ³•å³å¯ã€‚</p>
</blockquote>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå‘½åç©ºé—´åŠ è½½ç±»é‡Œé¢æœ‰ä¸€äº›<code>Var</code>ä¸<code>AFn</code>å˜é‡ï¼Œå¯ä»¥è®¤ä¸ºä¸€ä¸ª<code>Var</code>å¯¹åº”ä¸€ä¸ª<code>AFn</code>ã€‚ä½¿ç”¨ Intellj æˆ– <a href="http://jd.benow.ca/" target="_blank" rel="external">JD</a> æ‰“å¼€è¿™ä¸ªç±»æ–‡ä»¶ï¼Œé¦–å…ˆæŸ¥çœ‹é™æ€ä»£ç å¿«ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">static &#123;</div><div class="line">    __init0();</div><div class="line">    Compiler.pushNSandLoader(RT.classForName(&quot;how_clojure_work.core__init&quot;).getClassLoader());</div><div class="line">    try &#123;</div><div class="line">        load();</div><div class="line">    &#125; catch (Throwable var1) &#123;</div><div class="line">        Var.popThreadBindings();</div><div class="line">        throw var1;</div><div class="line">    &#125;</div><div class="line">    Var.popThreadBindings();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œé¢ä¼šå…ˆè°ƒç”¨<code>__init0</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">public static void __init0() &#123;</div><div class="line">    const__0 = (Var)RT.var(&quot;clojure.core&quot;, &quot;in-ns&quot;);</div><div class="line">    const__1 = (AFn)Symbol.intern((String)null, &quot;how-clojure-work.core&quot;);</div><div class="line">    const__2 = (AFn)Symbol.intern((String)null, &quot;clojure.core&quot;);</div><div class="line">    const__3 = (Var)RT.var(&quot;how-clojure-work.core&quot;, &quot;main&quot;);</div><div class="line">    const__11 = (AFn)RT.map(new Object[] &#123;</div><div class="line">        RT.keyword((String)null, &quot;arglists&quot;), PersistentList.create(Arrays.asList(new Object[] &#123;</div><div class="line">            Tuple.create(Symbol.intern((String)null, &quot;&amp;&quot;),</div><div class="line">            Symbol.intern((String)null, &quot;_&quot;))</div><div class="line">        &#125;)),</div><div class="line">        RT.keyword((String)null, &quot;line&quot;), Integer.valueOf(3),</div><div class="line">        RT.keyword((String)null, &quot;column&quot;), Integer.valueOf(1),</div><div class="line">        RT.keyword((String)null, &quot;file&quot;), &quot;how_clojure_work/core.clj&quot;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>RT</code> æ˜¯ Clojure runtime çš„å®ç°ï¼Œåœ¨<code>__init0</code>é‡Œé¢ä¼šå¯¹å‘½åç©ºé—´é‡Œé¢å‡ºç°çš„ var è¿›è¡Œèµ‹å€¼ã€‚</p>
<p>æ¥ä¸‹æ¥æ˜¯<code>pushNSandLoader</code>ï¼ˆå†…éƒ¨ç”¨<code>pushThreadBindings</code>å®ç°ï¼‰ï¼Œå®ƒä¸åé¢çš„ <code>popThreadBindings</code> å½¢æˆä¸€ä¸ª bindingï¼ŒåŠŸèƒ½ç­‰ä»·ä¸‹é¢çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(binding [clojure.core/*ns* nil</div><div class="line">          clojure.core/*fn-loader* RT.classForName(&quot;how_clojure_work.core__init&quot;).getClassLoader()</div><div class="line">          clojure.core/*read-eval true]</div><div class="line">  (load))</div></pre></td></tr></table></figure></p>
<p>æ¥ç€æŸ¥çœ‹<code>load</code>çš„å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public static void load() &#123;</div><div class="line">    // è°ƒç”¨ in-nsï¼Œä¼ å…¥å‚æ•° how-clojure-work.core</div><div class="line">    ((IFn)const__0.getRawRoot()).invoke(const__1);</div><div class="line">    // æ‰§è¡Œ loading__5569__auto____36ï¼ŒåŠŸèƒ½ç­‰ä»·äº (refer clojure.core)</div><div class="line">    ((IFn)(new loading__5569__auto____36())).invoke();</div><div class="line">    Object var10002;</div><div class="line">    // å¦‚æœå½“å‰çš„å‘½åç©ºé—´ä¸æ˜¯ clojure.core é‚£ä¹ˆä¼šåœ¨ä¸€ä¸ª LockingTransaction é‡Œæ‰§è¡Œ fn__38</div><div class="line">    // åŠŸèƒ½ç­‰ä»·ä¸(commute (deref #&apos;clojure.core/*loaded-libs*) conj &apos;how-clojure-work.core)</div><div class="line">    if(((Symbol)const__1).equals(const__2)) &#123;</div><div class="line">        var10002 = null;</div><div class="line">    &#125; else &#123;</div><div class="line">        LockingTransaction.runInTransaction((Callable)(new fn__38()));</div><div class="line">        var10002 = null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Var var10003 = const__3;</div><div class="line">    // ä¸º main è®¾ç½®å…ƒä¿¡æ¯ï¼ŒåŒ…æ‹¬è¡Œå·ã€åˆ—å·ç­‰</div><div class="line">    const__3.setMeta((IPersistentMap)const__11);</div><div class="line">    var10003.bindRoot(new main());</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è‡³æ­¤ï¼Œå‘½åç©ºé—´åŠ è½½ç±»å°±åˆ†æå®Œäº†ã€‚</p>
<h4 id="loading-5569-auto-36"><a href="#loading-5569-auto-36" class="headerlink" title="loading_5569_auto____36"></a>loading_5569_auto____36</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ javap core\$loading__5569__auto____36.class</div><div class="line">Compiled from &quot;core.clj&quot;</div><div class="line">public final class how_clojure_work.core$loading__5569__auto____36 extends clojure.lang.AFunction &#123;</div><div class="line">  public static final clojure.lang.Var const__0;</div><div class="line">  public static final clojure.lang.AFn const__1;</div><div class="line">  public how_clojure_work.core$loading__5569__auto____36(); // æ„é€ å‡½æ•°</div><div class="line">  public java.lang.Object invoke();</div><div class="line">  public static &#123;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ <code>core__init</code> ç±»ç»“æ„ï¼ŒåŒ…å«ä¸€äº› var èµ‹å€¼ä¸åˆå§‹åŒ–å‡½æ•°ï¼ŒåŒæ—¶å®ƒè¿˜ç»§æ‰¿äº†<code>AFunction</code>ï¼Œä»åå­—å°±å¯ä»¥çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªå‡½æ•°çš„å®ç°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">// é¦–å…ˆæ˜¯ var èµ‹å€¼</div><div class="line">public static final Var const__0 = (Var)RT.var(&quot;clojure.core&quot;, &quot;refer&quot;);</div><div class="line">public static final AFn const__1 = (AFn)Symbol.intern((String)null, &quot;clojure.core&quot;);</div><div class="line">// invoke æ˜¯æ–¹æ³•è°ƒç”¨æ—¶çš„å…¥å£å‡½æ•°</div><div class="line">public Object invoke() &#123;</div><div class="line">    Var.pushThreadBindings((Associative)RT.mapUniqueKeys(new Object[]&#123;Compiler.LOADER, ((Class)this.getClass()).getClassLoader()&#125;));</div><div class="line"></div><div class="line">    Object var1;</div><div class="line">    try &#123;</div><div class="line">        var1 = ((IFn)const__0.getRawRoot()).invoke(const__1);</div><div class="line">    &#125; finally &#123;</div><div class="line">        Var.popThreadBindings();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return var1;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„<code>invoke</code>æ–¹æ³•ç­‰ä»·äº<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">(binding [Compiler.LOADER (Class)this.getClass()).getClassLoader()]</div><div class="line">  (refer &apos;clojure.core))</div></pre></td></tr></table></figure></p>
<p><code>fn__38</code>ä¸<code>loading__5569__auto____36</code> ç±»ä¼¼ï¼Œ è¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<h4 id="core-main"><a href="#core-main" class="headerlink" title="core$main"></a>core$main</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">$ javap  core\$main.class</div><div class="line">Compiled from &quot;core.clj&quot;</div><div class="line">public final class how_clojure_work.core$main extends clojure.lang.RestFn &#123;</div><div class="line">  public static final clojure.lang.Var const__0;</div><div class="line">  public how_clojure_work.core$main();</div><div class="line">  public static java.lang.Object invokeStatic(clojure.lang.ISeq);</div><div class="line">  public java.lang.Object doInvoke(java.lang.Object);</div><div class="line">  public int getRequiredArity();</div><div class="line">  public static &#123;&#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç”±äº<code>main</code>å‡½æ•°çš„å‚æ•°æ•°é‡æ˜¯å¯å˜çš„ï¼Œæ‰€ä»¥å®ƒç»§æ‰¿äº†<code>RestFn</code>ï¼Œé™¤äº† var èµ‹å€¼å¤–ï¼Œé‡è¦çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªå‡½æ•°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public static Object invokeStatic(ISeq _) &#123;</div><div class="line">    // const__0 = (Var)RT.var(&quot;clojure.core&quot;, &quot;println&quot;);</div><div class="line">    return ((IFn)const__0.getRawRoot()).invoke(&quot;Hello, World!&quot;);</div><div class="line">&#125;</div><div class="line">public Object doInvoke(Object var1) &#123;</div><div class="line">    ISeq var10000 = (ISeq)var1;</div><div class="line">    var1 = null;</div><div class="line">    return invokeStatic(var10000);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œæ¯ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œä¼šå»è°ƒç”¨<code>getRawRoot</code>å‡½æ•°å¾—åˆ°è¯¥å‡½æ•°çš„å®ç°ï¼Œè¿™ç§é‡å®šå‘æ˜¯ Clojure å®ç°åŠ¨æ€è¿è¡Œæ—¶éå¸¸é‡è¦ä¸€æªæ–½ã€‚è¿™ç§é‡å®šå‘åœ¨å¼€å‘æ—¶éå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥ç”¨ <a href="https://github.com/clojure/tools.nrepl" target="_blank" rel="external">nrepl</a> è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„ Clojure ç¨‹åºï¼ŒåŠ¨æ€ä¿®æ”¹ç¨‹åºçš„è¡Œä¸ºï¼Œæ— éœ€é‡å¯ã€‚<br>ä½†æ˜¯åœ¨æ­£å¼çš„ç”Ÿäº§ç¯å¢ƒï¼Œè¿™ç§é‡å®šå‘å¯¹æ€§èƒ½æœ‰å½±å“ï¼Œè€Œä¸”ä¹Ÿæ²¡æœ‰é‡å¤å®šä¹‰å‡½æ•°çš„å¿…è¦ï¼Œæ‰€ä»¥å¯ä»¥åœ¨æœåŠ¡å¯åŠ¨æ—¶æŒ‡å®š<code>-Dclojure.compiler.direct-linking=true</code>æ¥é¿å…è¿™ç±»é‡å®šå‘ï¼Œå®˜æ–¹ç§°ä¸º <a href="https://clojure.org/reference/compilation#directlinking" target="_blank" rel="external">Direct linking</a>ã€‚å¯ä»¥åœ¨å®šä¹‰ var æ—¶æŒ‡å®š<code>^:redef</code>è¡¨ç¤ºå¿…é¡»é‡å®šå‘ã€‚<code>^:dynamic</code>çš„ var æ°¸è¿œé‡‡ç”¨é‡å®šå‘çš„æ–¹å¼ç¡®å®šæœ€ç»ˆå€¼ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œvar é‡å®šä¹‰å¯¹é‚£äº›å·²ç» direct linking çš„ä»£ç æ˜¯é€æ˜çš„ã€‚</p>
<h3 id="DynamicClassLoader"><a href="#DynamicClassLoader" class="headerlink" title="DynamicClassLoader"></a>DynamicClassLoader</h3><p>ç†Ÿæ‚‰ JVM ç±»åŠ è½½æœºåˆ¶ï¼ˆä¸æ¸…æ¥šçš„æ¨èæˆ‘å¦ä¸€ç¯‡æ–‡ç« <a href="/blog/2014/07/12/order-of-initialization-in-java/">ã€ŠJVM çš„ç±»åˆå§‹åŒ–æœºåˆ¶ã€‹</a>ï¼‰çš„éƒ½ä¼šçŸ¥é“ï¼Œ</p>
<blockquote>
<p>ä¸€ä¸ªç±»åªä¼šè¢«ä¸€ä¸ª ClassLoader åŠ è½½ä¸€æ¬¡ã€‚</p>
</blockquote>
<p>ä»…ä»…æœ‰ä¸Šé¢ä»‹ç»çš„é‡å®šå‘æœºåˆ¶æ˜¯æ— æ³•å®ç°åŠ¨æ€è¿è¡Œæ—¶çš„ï¼Œè¿˜éœ€è¦ä¸€ä¸ªçµæ´»çš„ ClassLoaderï¼Œå¯ä»¥åœ¨ REPL åšå¦‚ä¸‹å®éªŒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">user&gt; (defn foo [] 1)</div><div class="line">#&apos;user/foo</div><div class="line">user&gt; (.. foo getClass getClassLoader)</div><div class="line">#object[clojure.lang.DynamicClassLoader 0x72d256 &quot;clojure.lang.DynamicClassLoader@72d256&quot;]</div><div class="line">user&gt; (defn foo [] 1)</div><div class="line">#&apos;user/foo</div><div class="line">user&gt; (.. foo getClass getClassLoader)</div><div class="line">#object[clojure.lang.DynamicClassLoader 0x57e2068e &quot;clojure.lang.DynamicClassLoader@57e2068e&quot;]</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåªè¦å¯¹ä¸€ä¸ªå‡½æ•°è¿›è¡Œäº†é‡å®šä¹‰ï¼Œä¸ä¹‹ç›¸å…³çš„ ClassLoader éšä¹‹ä¹Ÿæ”¹å˜äº†ã€‚ä¸‹é¢æ¥çœ‹çœ‹ <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/DynamicClassLoader.java#L72-L82" target="_blank" rel="external">DynamicClassLoader</a> çš„æ ¸å¿ƒå®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">// ç”¨äºå­˜æ”¾å·²ç»åŠ è½½çš„ç±»</div><div class="line">static ConcurrentHashMap&lt;String, Reference&lt;Class&gt;&gt;classCache =</div><div class="line">        new ConcurrentHashMap&lt;String, Reference&lt;Class&gt; &gt;();</div><div class="line"></div><div class="line">// loadClass ä¼šåœ¨ä¸€ä¸ªç±»ç¬¬ä¸€æ¬¡ä¸»åŠ¨ä½¿ç”¨æ—¶è¢« JVM è°ƒç”¨</div><div class="line">Class&lt;?&gt; loadClass(String name, boolean resolve) throws ClassNotFoundException &#123;</div><div class="line">	Class c = findLoadedClass(name);</div><div class="line">	if (c == null) &#123;</div><div class="line">		c = findInMemoryClass(name);</div><div class="line">		if (c == null)</div><div class="line">			c = super.loadClass(name, false);</div><div class="line">    &#125;</div><div class="line">	if (resolve)</div><div class="line">		resolveClass(c);</div><div class="line">	return c;</div><div class="line">&#125;</div><div class="line"></div><div class="line">// ç”¨æˆ·å¯ä»¥è°ƒç”¨ defineClass æ¥åŠ¨æ€ç”Ÿæˆç±»</div><div class="line">// æ¯æ¬¡è°ƒç”¨æ—¶ä¼šå…ˆæ¸…ç©ºç¼“å­˜é‡Œå·²åŠ è½½çš„ç±»</div><div class="line">public Class defineClass(String name, byte[] bytes, Object srcForm)&#123;</div><div class="line">	Util.clearCache(rq, classCache);</div><div class="line">	Class c = defineClass(name, bytes, 0, bytes.length);</div><div class="line">    classCache.put(name, new SoftReference(c,rq));</div><div class="line">    return c;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡æœç´¢ Clojure æºç ï¼Œåªæœ‰åœ¨ <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/RT.java#L2126" target="_blank" rel="external">RT.java çš„ makeClassLoader å‡½æ•°</a> é‡Œé¢æœ‰<code>new DynamicClassLoader</code>è¯­å¥ï¼Œç»§ç»­é€šè¿‡ Intellj çš„ Find Usages å‘ç°æœ‰å¦‚ä¸‹ä¸‰å¤„è°ƒç”¨<code>makeClassLoader</code>ï¼š<a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L7455" target="_blank" rel="external">Compiler/compile1</a>ã€<a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L6897" target="_blank" rel="external">Compiler/eval</a>ã€<a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L7352" target="_blank" rel="external">Compiler/load</a>ã€‚</p>
<p>æ­£å¦‚<a href="/blog/2017/02/05/clojure-compiler-analyze/#Compiler-java">ä¸Šä¸€ç¯‡æ–‡ç« </a>çš„ä»‹ç»ï¼Œè¿™ä¸‰ä¸ªæ–¹æ³•æ­£æ˜¯ Compiler çš„å…¥å£å‡½æ•°ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸Šé¢ REPL ä¸­çš„å®éªŒï¼š</p>
<blockquote>
<p>æ¯æ¬¡é‡å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–° DynamicClassLoader å®ä¾‹å»åŠ è½½å…¶å®ç°ã€‚</p>
</blockquote>
<h2 id="æ…¢å¯åŠ¨"><a href="#æ…¢å¯åŠ¨" class="headerlink" title="æ…¢å¯åŠ¨"></a>æ…¢å¯åŠ¨</h2><p>æ˜ç™½äº† Clojure æ˜¯å¦‚ä½•å®ç°åŠ¨æ€è¿è¡Œæ—¶ï¼Œä¸‹é¢åˆ†æ Clojure ç¨‹åºä¸ºä»€ä¹ˆå¯åŠ¨æ…¢ã€‚</p>
<p>é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ç‚¹ï¼Œ<a href="http://stackoverflow.com/questions/2163411/is-java-really-slow" target="_blank" rel="external">JVM å¹¶ä¸æ…¢</a>ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¹‹å‰çš„ Hello World æ‰“æˆ uberjarï¼Œè¿è¡Œæµ‹è¯•ä¸‹æ—¶é—´ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">;; (:gen-class) æŒ‡ä»¤èƒ½å¤Ÿç”Ÿæˆä¸å‘½åç©ºé—´åŒåçš„ç±»</div><div class="line">(ns how-clojure-work.core</div><div class="line">  (:gen-class))</div><div class="line"></div><div class="line">(defn -main [&amp; _]</div><div class="line">  (println &quot;Hello, World!&quot;))</div><div class="line"></div><div class="line"># ä¸ºäº†èƒ½ç”¨ java -jar æ–¹å¼è¿è¡Œï¼Œéœ€è¦åœ¨ project.clj ä¸­æ·»åŠ </div><div class="line"># :main how-clojure-work.core</div><div class="line">$ lein uberjar</div><div class="line">$ time java -jar target/how-clojure-work-0.1.0-SNAPSHOT-standalone.jar</div><div class="line">Hello, World!</div><div class="line"></div><div class="line">real	0m0.900s</div><div class="line">user	0m1.422s</div><div class="line">sys	0m0.087s</div></pre></td></tr></table></figure></p>
<p>åœ¨å¯åŠ¨æ—¶åŠ å…¥<code>-verbose:class</code> å‚æ•°ï¼Œå¯ä»¥çœ‹åˆ°å¾ˆå¤š clojure.core å¼€å¤´çš„ç±»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">[Loaded clojure.core$cond__GT__GT_ from file:/Users/liujiacai/codes/clojure/how-clojure-work/target/how-clojure-work-0.1.0-SNAPSHOT-standalone.jar]</div><div class="line">[Loaded clojure.core$as__GT_ from file:/Users/liujiacai/codes/clojure/how-clojure-work/target/how-clojure-work-0.1.0-SNAPSHOT-standalone.jar]</div><div class="line">[Loaded clojure.core$some__GT_ from file:/Users/liujiacai/codes/clojure/how-clojure-work/target/how-clojure-work-0.1.0-SNAPSHOT-standalone.jar]</div><div class="line">[Loaded clojure.core$some__GT__GT_ from file:/Users/liujiacai/codes/clojure/how-clojure-work/target/how-clojure-work-0.1.0-SNAPSHOT-standalone.jar]</div><div class="line">...</div></pre></td></tr></table></figure></p>
<p>æŠŠç”Ÿæˆçš„ uberjar è§£å‹æ‰“å¼€ï¼Œå¯ä»¥å‘ç° clojure.core é‡Œé¢çš„å‡½æ•°éƒ½åœ¨ï¼Œè¿™äº›å‡½æ•°åœ¨ç¨‹åºå¯åŠ¨æ—¶éƒ½ä¼šè¢«åŠ è½½ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2Hb_NdHXlpuFjSszfXXcSGXXa_!!581166664.png" alt="Clojure ç‰ˆæœ¬ Hello World"><br></center>

<p>è¿™å°±æ˜¯ Clojure å¯åŠ¨æ…¢çš„åŸå› ï¼šåŠ è½½å¤§é‡ç”¨ä¸åˆ°çš„ç±»ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Clojure ä½œä¸ºä¸€é—¨ host åœ¨ JVM ä¸Šçš„è¯­è¨€ï¼Œå…¶ç‹¬ç‰¹çš„å®ç°æ–¹å¼è®©å…¶æ‹¥åŠ¨æ€çš„è¿è¡Œæ—¶çš„åŒæ—¶ï¼Œæ–¹ä¾¿ä¸ Java è¿›è¡Œäº¤äº’ã€‚å½“ç„¶ï¼ŒClojure è¿˜æœ‰å¾ˆå¤šå¯ä»¥æé«˜çš„åœ°æ–¹ï¼Œæ¯”å¦‚ä¸Šé¢çš„æ…¢å¯åŠ¨é—®é¢˜ã€‚å¦å¤–ï¼ŒJVM 7 ä¸­å¢åŠ äº† <a href="http://docs.oracle.com/javase/7/docs/technotes/guides/vm/multiple-language-support.html" target="_blank" rel="external">invokedynamic</a> æŒ‡ä»¤ï¼Œå¯ä»¥è®©è¿è¡Œåœ¨ JVM ä¸Šçš„åŠ¨æ€è¯­è¨€é€šè¿‡å®ç°ä¸€ä¸ª CallSite ï¼ˆå¯ä»¥è®¤ä¸ºæ˜¯å‡½æ•°è°ƒç”¨ï¼‰çš„ <code>MethodHandle</code> å‡½æ•°æ¥å¸®åŠ©ç¼–è¯‘å™¨æ‰¾åˆ°æ­£ç¡®çš„å®ç°ï¼Œè¿™æ— å¼‚ä¼šæå‡ç¨‹åºçš„æ‰§è¡Œé€Ÿåº¦ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://blog.ndk.io/clojure-compilation2.html" target="_blank" rel="external">http://blog.ndk.io/clojure-compilation2.html</a></li>
<li><a href="http://stackoverflow.com/questions/7471316/how-does-clojure-class-reloading-work" target="_blank" rel="external">http://stackoverflow.com/questions/7471316/how-does-clojure-class-reloading-work</a></li>
<li><a href="http://blog.headius.com/2011/10/why-clojure-doesnt-need-invokedynamic.html" target="_blank" rel="external">http://blog.headius.com/2011/10/why-clojure-doesnt-need-invokedynamic.html</a></li>
<li><a href="http://www.deepbluelambda.org/programming/clojure/how-clojure-works-a-simple-namespace" target="_blank" rel="external">http://www.deepbluelambda.org/programming/clojure/how-clojure-works-a-simple-namespace</a></li>
<li><a href="https://8thlight.com/blog/aaron-lahey/2016/07/20/relationship-between-clojure-functions-symbols-vars-namespaces.html" target="_blank" rel="external">https://8thlight.com/blog/aaron-lahey/2016/07/20/relationship-between-clojure-functions-symbols-vars-namespaces.html</a></li>
<li><a href="http://blog.cognitect.com/blog/2016/9/15/works-on-my-machine-understanding-var-bindings-and-roots" target="_blank" rel="external">http://blog.cognitect.com/blog/2016/9/15/works-on-my-machine-understanding-var-bindings-and-roots</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;/blog/2017/02/05/clojure-compiler-analyze/&quot;&gt;ä¸Šä¸€ç¯‡æ–‡ç« &lt;/a&gt;è®²è¿°äº† Clojure ç¼–è¯‘å™¨å·¥ä½œçš„æ•´ä½“æµç¨‹ï¼Œä¸»è¦æ¶‰åŠ LispReader ä¸ Compiler è¿™ä¸¤ä¸ªç±»ï¼Œè€Œä¸”æŒ‡å‡ºç¼–è¯‘å™¨å¹¶æ²¡æœ‰æŠŠ Clojure 
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>Clojure è¿è¡ŒåŸç†ä¹‹ç¼–è¯‘å™¨å‰–æç¯‡</title>
    <link href="http://liujiacai.net/blog/2017/02/05/clojure-compiler-analyze/"/>
    <id>http://liujiacai.net/blog/2017/02/05/clojure-compiler-analyze/</id>
    <published>2017-02-05T00:53:24.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>Clojure is a compiled language, yet remains completely dynamic â€“ every feature supported by Clojure is supported at runtime.        </p>
<blockquote>
<p>Rich Hickey   <a href="https://clojure.org/" target="_blank" rel="external">https://clojure.org/</a></p>
</blockquote>
</blockquote>
<p>è¿™é‡Œçš„ runtime æŒ‡çš„æ˜¯ JVMï¼ŒJVM ä¹‹åˆæ˜¯ä¸ºè¿è¡Œ Java è¯­è¨€è€Œè®¾è®¡ï¼Œè€Œç°åœ¨å·²ç»å‘å±•æˆä¸€é‡é‡çº§å¹³å°ï¼Œé™¤äº† Clojure ä¹‹å¤–ï¼Œ<a href="https://en.wikipedia.org/wiki/List_of_JVM_languages" target="_blank" rel="external">å¾ˆå¤šåŠ¨æ€è¯­è¨€</a>ä¹Ÿéƒ½é€‰æ‹©åŸºäº JVM å»å®ç°ã€‚<br>ä¸ºäº†æ›´åŠ å…·ä½“æè¿° Clojure è¿è¡ŒåŸç†ï¼Œä¼šåˆ†ä¸¤ç¯‡æ–‡ç« æ¥ä»‹ç»ã€‚<br>æœ¬æ–‡ä¸ºç¬¬ä¸€ç¯‡ï¼Œæ¶‰åŠåˆ°çš„ä¸»è¦å†…å®¹æœ‰ï¼šç¼–è¯‘å™¨å·¥ä½œæµç¨‹ã€Lisp çš„å®æœºåˆ¶ã€‚<br>ç¬¬äºŒç¯‡å°†ä¸»è¦è®¨è®º Clojure ç¼–è¯‘æˆçš„ bytecode å¦‚ä½•å®ç°åŠ¨æ€è¿è¡Œæ—¶ä»¥åŠä¸ºä»€ä¹ˆ Clojure ç¨‹åºå¯åŠ¨æ…¢ï¼Œè¿™ä¼šæ¶‰åŠåˆ° JVM çš„ç±»åŠ è½½æœºåˆ¶ã€‚</p>
<h2 id="ç¼–è¯‘å‹-VS-è§£é‡Šå‹"><a href="#ç¼–è¯‘å‹-VS-è§£é‡Šå‹" class="headerlink" title="ç¼–è¯‘å‹ VS. è§£é‡Šå‹"></a>ç¼–è¯‘å‹ VS. è§£é‡Šå‹</h2><p>SO ä¸Šæœ‰ä¸ªé—®é¢˜ <a href="http://stackoverflow.com/questions/5669933/is-clojure-compiled-or-interpreted" target="_blank" rel="external">Is Clojure compiled or interpreted</a>ï¼Œæ ¹æ®æœ¬æ–‡å¼€å§‹éƒ¨åˆ†çš„å®˜ç½‘å¼•ç”¨ï¼Œè¯´æ˜ Clojure æ˜¯é—¨ç¼–è¯‘å‹è¯­è¨€ï¼Œå°±åƒ Javaã€Scalaã€‚ä½†æ˜¯ Clojure ä¸ Java ä¸ä¸€æ ·çš„åœ°æ–¹åœ¨äºï¼ŒClojure å¯ä»¥åœ¨è¿è¡Œæ—¶è¿›è¡Œç¼–è¯‘ç„¶ååŠ è½½ï¼Œè€Œ Java æ˜ç¡®åŒºåˆ†ç¼–è¯‘æœŸä¸è¿è¡ŒæœŸã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB26GwHd4xmpuFjSZFNXXXrRXXa_!!581166664.png" alt=""><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2WNsBd.hnpuFjSZFPXXb_4XXa_!!581166664.png" alt=""></p>
<h2 id="ç¼–è¯‘å™¨å·¥ä½œæµç¨‹"><a href="#ç¼–è¯‘å™¨å·¥ä½œæµç¨‹" class="headerlink" title="ç¼–è¯‘å™¨å·¥ä½œæµç¨‹"></a>ç¼–è¯‘å™¨å·¥ä½œæµç¨‹</h2><p>ä¸è§£é‡Šå‹è¯­è¨€é‡Œçš„è§£é‡Šå™¨ç±»ä¼¼ï¼Œç¼–è¯‘å‹è¯­è¨€é€šè¿‡ç¼–è¯‘å™¨ï¼ˆCompilerï¼‰æ¥å°†æºç¨‹åºç¼–è¯‘ä¸ºå­—èŠ‚ç ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œç¼–è¯‘å™¨åŒ…æ‹¬<a href="https://en.wikipedia.org/wiki/Compiler#Three_phases_compiler_structure" target="_blank" rel="external">ä¸¤ä¸ªéƒ¨åˆ†</a>ï¼š</p>
<ul>
<li>å‰ç«¯ï¼š<a href="https://en.wikipedia.org/wiki/Lexical_analysis" target="_blank" rel="external">è¯æ³•åˆ†æ</a> â€“&gt; <a href="https://en.wikipedia.org/wiki/Parsing" target="_blank" rel="external">è¯­æ³•åˆ†æ</a> â€“&gt; <a href="https://en.wikipedia.org/wiki/Semantic_analysis_%28compilers%29" target="_blank" rel="external">è¯­ä¹‰åˆ†æ</a></li>
<li>åç«¯ï¼š<a href="https://en.wikipedia.org/wiki/Optimizing_compiler" target="_blank" rel="external">åˆ†æã€ä¼˜åŒ–</a> â€“&gt; <a href="https://en.wikipedia.org/wiki/Code_generation_%28compilers%29" target="_blank" rel="external">ç›®æ ‡ä»£ç ç”Ÿæˆ</a></li>
</ul>
<p>Clojure çš„ç¼–è¯‘å™¨ä¹Ÿéµå¾ªè¿™ä¸ªæ¨¡å¼ï¼Œå¤§è‡´å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸¤ä¸ªæ¨¡å—ï¼š</p>
<ul>
<li>è¯»å– Clojure æºç¨‹åº â€“&gt; åˆ†è¯ â€“&gt; æ„é€  S-è¡¨è¾¾å¼ï¼Œç”± <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/LispReader.java#L223-L294" target="_blank" rel="external">LispReader.java</a> ç±»å®ç°</li>
<li>å®æ‰©å±• â€“&gt; è¯­ä¹‰åˆ†æ â€“&gt; ç”Ÿæˆ JVM å­—èŠ‚ç ï¼Œç”± <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L7446-L7481" target="_blank" rel="external">Compiler.java</a> ç±»å®ç°</li>
</ul>
<center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2j7k3dZtnpuFjSZFKXXalFFXa_!!581166664.png" alt="Clojure ç¼–è¯‘å™¨å·¥ä½œæµ"><br></center>

<p>ä¸Šå›¾ç»™å‡ºäº†ä¸åŒé˜¶æ®µçš„è¾“å…¥è¾“å‡ºï¼Œå…·ä½“å®ç°ä¸‹é¢ä¸€ä¸€è®²è§£ã€‚</p>
<h3 id="LispReader-java"><a href="#LispReader-java" class="headerlink" title="LispReader.java"></a><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/LispReader.java" target="_blank" rel="external">LispReader.java</a></h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œå…·æœ‰å¤æ‚è¯­æ³•çš„ç¼–ç¨‹è¯­è¨€ä¼šæŠŠè¯æ³•åˆ†æä¸è¯­æ³•åˆ†æåˆ†å¼€å®ç°ä¸º Lexer ä¸ Parserï¼Œä½†åœ¨ Lisp å®¶æ—ä¸­ï¼Œæºç¨‹åºçš„è¯­æ³•å°±å·²ç»æ˜¯ AST äº†ï¼Œæ‰€ä»¥ä¼šæŠŠ Lexer ä¸ Parser åˆå¹¶ä¸ºä¸€ä¸ªè¿‡ç¨‹ Readerï¼Œ<a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/LispReader.java#L223-L294" target="_blank" rel="external">æ ¸å¿ƒä»£ç </a>å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">for (; ; ) &#123;</div><div class="line"></div><div class="line">    if (pendingForms instanceof List &amp;&amp; !((List) pendingForms).isEmpty())</div><div class="line">        return ((List) pendingForms).remove(0);</div><div class="line"></div><div class="line">    int ch = read1(r);</div><div class="line"></div><div class="line">    while (isWhitespace(ch))</div><div class="line">        ch = read1(r);</div><div class="line"></div><div class="line">    if (ch == -1) &#123;</div><div class="line">        if (eofIsError)</div><div class="line">            throw Util.runtimeException(&quot;EOF while reading&quot;);</div><div class="line">        return eofValue;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (returnOn != null &amp;&amp; (returnOn.charValue() == ch)) &#123;</div><div class="line">        return returnOnValue;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (Character.isDigit(ch)) &#123;</div><div class="line">        Object n = readNumber(r, (char) ch);</div><div class="line">        return n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    IFn macroFn = getMacro(ch);</div><div class="line">    if (macroFn != null) &#123;</div><div class="line">        Object ret = macroFn.invoke(r, (char) ch, opts, pendingForms);</div><div class="line">        //no op macros return the reader</div><div class="line">        if (ret == r)</div><div class="line">            continue;</div><div class="line">        return ret;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    if (ch == &apos;+&apos; || ch == &apos;-&apos;) &#123;</div><div class="line">        int ch2 = read1(r);</div><div class="line">        if (Character.isDigit(ch2)) &#123;</div><div class="line">            unread(r, ch2);</div><div class="line">            Object n = readNumber(r, (char) ch);</div><div class="line">            return n;</div><div class="line">        &#125;</div><div class="line">        unread(r, ch2);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    String token = readToken(r, (char) ch);</div><div class="line">    return interpretToken(token);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Reader çš„è¡Œä¸ºæ˜¯ç”±å†…ç½®æ„é€ å™¨ï¼ˆç›®å‰æœ‰æ•°å­—ã€å­—ç¬¦ã€Symbol è¿™ä¸‰ç±»ï¼‰ä¸ä¸€ä¸ªç§°ä¸º<code>read table</code>çš„æ‰©å±•æœºåˆ¶ï¼ˆgetMacroï¼‰é©±åŠ¨çš„ï¼Œ<code>read table</code> é‡Œé¢æ¯é¡¹è®°å½•æä¾›äº†ç”±ç‰¹æ€§ç¬¦å·ï¼ˆç§°ä¸º<code>macro characters</code>ï¼‰åˆ°ç‰¹å®šè¯»å–è¡Œä¸ºï¼ˆç§°ä¸º<code>reader macros</code>ï¼‰çš„æ˜ å°„ã€‚</p>
<p>ä¸ Common Lisp ä¸åŒï¼Œæ™®é€šç”¨æˆ·æ— æ³•æ‰©å±• Clojure é‡Œé¢çš„<code>read table</code>ã€‚å…³äºæ‰©å±•<code>read table</code>çš„å¥½å¤„ï¼Œå¯ä»¥å‚è€ƒ StackOverflow ä¸Šçš„ <a href="http://stackoverflow.com/questions/5746801/what-advantage-does-common-lisp-reader-macros-have-that-clojure-does-not-have" target="_blank" rel="external">What advantage does common lisp reader macros have that Clojure does not have?</a>ã€‚Rich Hickey åœ¨<a href="https://groups.google.com/forum/#!topic/clojure/8RSLNWno0nU" target="_blank" rel="external">ä¸€ Google Group</a>é‡Œé¢æœ‰é˜è¿°ä¸å¼€æ”¾ <code>read table</code> çš„ç†ç”±ï¼Œè¿™é‡Œæ‘˜æŠ„å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>I am unconvinced that reader macros are needed in Clojure at this<br>time. They greatly reduce the readability of code that uses them (by<br>people who otherwise know Clojure), encourage incompatible custom mini-<br>languages and dialects (vs namespace-partitioned macros), and<br>complicate loading and evaluation.<br>To the extent Iâ€™m willing to accommodate common needs different from<br>my own (e.g. regexes), I think many things that would otherwise have<br>forced people to reader macros may end up in Clojure, where everyone<br>can benefit from a common approach.<br>Clojure is arguably a very simple language, and in that simplicity<br>lies a different kind of power.<br>Iâ€™m going to pass on pursuing this for now,</p>
</blockquote>
<p>æˆªæ­¢åˆ° Clojure 1.8 ç‰ˆæœ¬ï¼Œå…±æœ‰å¦‚ä¸‹ä¹ä¸ª<code>macro characters</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Quote (&apos;)</div><div class="line">Character (\)</div><div class="line">Comment (;)</div><div class="line">Deref (@)</div><div class="line">Metadata (^)</div><div class="line">Dispatch (#)</div><div class="line">Syntax-quote (`)</div><div class="line">Unquote (~)</div><div class="line">Unquote-splicing (~@)</div></pre></td></tr></table></figure></p>
<p>å®ƒä»¬çš„å…·ä½“å«ä¹‰å¯å‚è€ƒ<a href="https://clojure.org/reference/reader#macrochars" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£ reader#macrochars</a>ã€‚</p>
<h3 id="Compiler-java"><a href="#Compiler-java" class="headerlink" title="Compiler.java"></a><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java" target="_blank" rel="external">Compiler.java</a></h3><p>Compiler ç±»ä¸»è¦æœ‰ä¸‰ä¸ªå…¥å£å‡½æ•°ï¼š</p>
<ul>
<li><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L7483-L7646" target="_blank" rel="external">compile</a>ï¼Œå½“è°ƒç”¨<code>clojure.core/compile</code>æ—¶ä½¿ç”¨</li>
<li><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L7344-L7399" target="_blank" rel="external">load</a>ï¼Œå½“è°ƒç”¨<code>clojure.core/require</code>ã€<code>clojure.core/use</code>æ—¶ä½¿ç”¨</li>
<li><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L6893-L6946" target="_blank" rel="external">eval</a>ï¼Œå½“è°ƒç”¨<code>clojure.core/eval</code>æ—¶ä½¿ç”¨</li>
</ul>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2i5Medl0kpuFjSsziXXa.oVXa_!!581166664.png" alt="Compiler ç±»çš„ UML"><br></center>

<p>è¿™ä¸‰ä¸ªå…¥å£å‡½æ•°éƒ½ä¼šä¾æ¬¡è°ƒç”¨ <a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L6836-L6841" target="_blank" rel="external">macroexpand</a>ã€<a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L6628-L6692" target="_blank" rel="external">analyze</a> æ–¹æ³•ï¼Œç”Ÿæˆ<code>Expr</code>å¯¹è±¡ï¼Œcompile å‡½æ•°è¿˜ä¼šé¢å¤–è°ƒç”¨ emit æ–¹æ³•ç”Ÿæˆ bytecodeã€‚</p>
<h4 id="macroexpand"><a href="#macroexpand" class="headerlink" title="macroexpand"></a>macroexpand</h4><p>Macro æ¯«æ— ç–‘é—®æ˜¯ Lisp ä¸­çš„å± é¾™åˆ€ï¼Œå¯ä»¥åœ¨<code>ç¼–è¯‘æ—¶</code>è‡ªåŠ¨ç”Ÿæˆä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">static Object macroexpand(Object form) &#123;</div><div class="line">    Object exf = macroexpand1(form);</div><div class="line">    if (exf != form)</div><div class="line">        return macroexpand(exf);</div><div class="line">    return form;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><a href="https://github.com/clojure/clojure/blob/clojure-1.8.0/src/jvm/clojure/lang/Compiler.java#L6763-L6834" target="_blank" rel="external">macroexpand1</a> å‡½æ•°è¿›è¡Œä¸»è¦çš„æ‰©å±•å·¥ä½œï¼Œå®ƒä¼šè°ƒç”¨<code>isMacro</code>åˆ¤æ–­å½“å‰<code>Var</code>æ˜¯å¦ä¸ºä¸€ä¸ªå®ï¼Œè€Œè¿™åˆæ˜¯é€šè¿‡æ£€æŸ¥<code>var</code>æ˜¯å¦ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”å…ƒä¿¡æ¯ä¸­<code>macro</code>æ˜¯å¦ä¸º<code>true</code>ã€‚<br>Clojure é‡Œé¢é€šè¿‡<code>defmacro</code>å‡½æ•°åˆ›å»ºå®ï¼Œå®ƒä¼šè°ƒç”¨<code>var</code>çš„<code>setMacro</code>å‡½æ•°æ¥è®¾ç½®å…ƒä¿¡æ¯<code>macro</code>ä¸º<code>true</code>ã€‚</p>
<h4 id="analyze"><a href="#analyze" class="headerlink" title="analyze"></a>analyze</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">interface Expr &#123;</div><div class="line">    Object eval();</div><div class="line">    void emit(C context, ObjExpr objx, GeneratorAdapter gen);</div><div class="line">    boolean hasJavaClass();</div><div class="line">    Class getJavaClass();</div><div class="line">&#125;</div><div class="line">private static Expr analyze(C context, Object form, String name)</div></pre></td></tr></table></figure>
<p>analyze è¿›è¡Œä¸»è¦çš„è¯­ä¹‰åˆ†æï¼Œ<code>form</code>å‚æ•°å³æ˜¯å®å±•å¼€åçš„å„ç§æ•°æ®ç»“æ„ï¼ˆString/ISeq/IPersistentList ç­‰ï¼‰ï¼Œè¿”å›å€¼ç±»å‹ä¸º<code>Expr</code>ï¼Œå¯ä»¥çŒœæµ‹å‡ºï¼Œ<code>Expr</code>çš„å­ç±»æ˜¯ç¨‹åºçš„ä¸»ä½“ï¼Œéµå¾ªæ¨¡å—åŒ–çš„ç¼–ç¨‹é£æ ¼ï¼Œæ¯ä¸ªå­ç±»éƒ½çŸ¥é“å¦‚ä½•å¯¹å…¶è‡ªèº«æ±‚å€¼ï¼ˆevalï¼‰æˆ–è¾“å‡º bytecodeï¼ˆemitï¼‰ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2M8IrdbtlpuFjSspoXXbcDpXa_!!581166664.png" alt="Expr ç±»ç»§æ‰¿å…³ç³»ï¼ˆéƒ¨åˆ†ï¼‰"><br></center>

<h4 id="emit"><a href="#emit" class="headerlink" title="emit"></a>emit</h4><p>è¿™é‡Œéœ€è¦æ˜ç¡®ä¸€ç‚¹çš„æ˜¯ï¼ŒClojure ç¼–è¯‘å™¨å¹¶æ²¡æœ‰æŠŠ Clojure ä»£ç è½¬ä¸ºç›¸åº”çš„ Java ä»£ç ï¼Œè€Œæ˜¯å€ŸåŠ© bytecode æ“ä½œåº“ <a href="http://asm.ow2.org/" target="_blank" rel="external">ASM</a> ç›´æ¥ç”Ÿæˆå¯è¿è¡Œåœ¨ JVM ä¸Šçš„ bytecodeã€‚</p>
<p>æ ¹æ® JVM bytecode çš„è§„èŒƒï¼Œæ¯ä¸ª<code>.class</code>æ–‡ä»¶éƒ½å¿…é¡»ç”±ç±»ç»„æˆï¼Œè€Œ Clojure ä½œä¸ºä¸€ä¸ªå‡½æ•°å¼è¯­è¨€ï¼Œä¸»ä½“æ˜¯å‡½æ•°ï¼Œé€šè¿‡ namespace æ¥å°è£…ã€éš”ç¦»å‡½æ•°ï¼Œä½ å¯èƒ½ä¼šæƒ³å½“ç„¶çš„è®¤ä¸ºæ¯ä¸ª namespace å¯¹åº”ä¸€ä¸ªç±»ï¼Œnamespace é‡Œé¢çš„æ¯ä¸ªå‡½æ•°å¯¹åº”ç±»é‡Œé¢çš„æ–¹æ³•ï¼Œè€Œå®é™…ä¸Šå¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œæ ¹æ® <a href="https://clojure.org/reference/compilation" target="_blank" rel="external">Clojure å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¯¹åº”å…³ç³»æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>å‡½æ•°ç”Ÿæˆä¸€ä¸ªç±»</li>
<li>æ¯ä¸ªæ–‡ä»¶ï¼ˆç›¸å½“äºä¸€ä¸ªå‘½åç©ºé—´ï¼‰ç”Ÿæˆä¸€ä¸ª<code>&lt;filename&gt;__init</code> çš„åŠ è½½ç±»</li>
<li><code>gen-class</code> ç”Ÿæˆå›ºå®šåå­—çš„ç±»ï¼Œæ–¹ä¾¿ä¸ Java äº¤äº’</li>
</ul>
<p>ç”Ÿæˆçš„ bytecode ä¼šåœ¨æœ¬ç³»åˆ—ç¬¬äºŒç¯‡æ–‡ç« ä¸­è¯¦ç»†ä»‹ç»ï¼Œæ•¬è¯·æœŸå¾…ã€‚</p>
<h4 id="eval"><a href="#eval" class="headerlink" title="eval"></a>eval</h4><p>æ¯ä¸ª <code>Expr</code> çš„å­ç±»éƒ½æœ‰ eval æ–¹æ³•çš„ç›¸åº”å®ç°ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µä¸º <code>LispExpr.eval</code> çš„å®ç°ï¼Œå…¶ä½™å­ç±»å®ç°ä¹Ÿç±»ä¼¼ï¼Œè¿™é‡Œä¸åœ¨èµ˜è¿°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public Object eval() &#123;</div><div class="line">    IPersistentVector ret = PersistentVector.EMPTY;</div><div class="line">    for (int i = 0; i &lt; args.count(); i++)</div><div class="line">        // è¿™é‡Œé€’å½’çš„æ±‚åˆ—è¡¨ä¸­æ¯é¡¹çš„å€¼</div><div class="line">        ret = (IPersistentVector) ret.cons(((Expr) args.nth(i)).eval());</div><div class="line">    return ret.seq();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä¹‹å‰çœ‹ SICP åå®ç°è¿‡å‡ ä¸ªè§£é‡Šå™¨ï¼Œä½†æ˜¯ç›¸å¯¹æ¥è¯´éƒ½æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡åˆ†æ Clojure ç¼–è¯‘å™¨çš„å®ç°ï¼ŒåŠ æ·±äº†å¯¹ <a href="/blog/2015/10/03/first-toy-scheme/#æ±‚å€¼è¿‡ç¨‹">eval-apply å¾ªç¯</a>çš„ç†è§£ï¼Œè¿˜æœ‰ä¸€ç‚¹å°±æ˜¯æ­å¼€äº†å®çš„çœŸå®é¢è²Œï¼Œä¹‹å‰ä¸€ç›´è®¤ä¸ºå®æ˜¯ä¸ªå¾ˆç¥å¥‡çš„ä¸œè¥¿ï¼Œå…¶å®å®ƒåªä¸è¿‡æ˜¯<code>ç¼–è¯‘æ—¶è¿è¡Œçš„å‡½æ•°</code>è€Œå·²ï¼Œè¾“å…¥ä¸è¾“å‡ºçš„å†…å®¹æ—¢æ˜¯æ„æˆç¨‹åºçš„æ•°æ®ç»“æ„ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ç¨‹åºå†…åœ¨çš„ ASTã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://blog.guillermowinkler.com/blog/2014/04/21/decompiling-clojure-ii/" target="_blank" rel="external">Decompiling Clojure II, the Compiler</a></li>
<li><a href="http://blog.ndk.io/clojure-compilation.html" target="_blank" rel="external">Clojure Compilation: Parenthetical Prose to Bewildering Bytecode</a></li>
<li><a href="http://blog.fogus.me/2012/04/25/the-clojurescript-compilation-pipeline/" target="_blank" rel="external">The ClojureScript Compilation Pipeline</a></li>
<li><a href="https://clojure.org/reference/compilation" target="_blank" rel="external">Ahead-of-time Compilation and Class Generation</a></li>
<li><a href="https://clojure.org/reference/reader" target="_blank" rel="external">The Reader</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Clojure is a compiled language, yet remains completely dynamic â€“ every feature supported by Clojure is supported at runtime.
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>2016 å¹´ç»ˆæ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2017/01/08/review-2016/"/>
    <id>http://liujiacai.net/blog/2017/01/08/review-2016/</id>
    <published>2017-01-08T01:30:31.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆåˆ°ä¸€å¹´æ€»ç»“æ—¶ï¼Œæœ¬æ¥æƒ³ç€åœ¨å†œå†å¹´å‰è€ƒå®Œç§‘ç›®ä¸‰æ‹¿åˆ°é©¾ç…§åå†å†™çš„ï¼Œç›®å‰æ¥çœ‹å¸Œæœ›ä¸å¤§äº†ï¼Œè¿™ä¸ªç›®æ ‡åªèƒ½ç•™åœ¨17å¹´å»å®ç°äº†ï¼Œæœ‰ç§ä¹¦åˆ°ç”¨æ—¶æ–¹æ¨æ™šçš„æ„Ÿè§‰ã€‚<br>ä¸€ä¸ªè¯æ¥æ€»ç»“ 16 å¹´â€”â€”â€œè¿åŠ¨å…ƒå¹´â€ï¼Œç®—æ˜¯å®Œæˆäº† <a href="/blog/2016/01/08/review-2015/#å‡è‚¥">15 å¹´ä¸€å°ç›®æ ‡</a>ã€‚OKï¼Œä¸‹é¢ç®€å•å›é¡¾ä¸‹ 16 å¹´é‚£äº›â€œé‡å¤§äº‹ä»¶â€å§ã€‚</p>
<h2 id="å¼ºèº«å¥ä½“"><a href="#å¼ºèº«å¥ä½“" class="headerlink" title="å¼ºèº«å¥ä½“"></a>å¼ºèº«å¥ä½“</h2><h3 id="å‡è‚¥å¤§è®¡"><a href="#å‡è‚¥å¤§è®¡" class="headerlink" title="å‡è‚¥å¤§è®¡"></a>å‡è‚¥å¤§è®¡</h3><p>ä» 4 æœˆåˆå¼€å§‹åˆ°ç°åœ¨ï¼Œä½“é‡å¤§æ¦‚ä»100KGå‡åˆ°ç°åœ¨çš„85KGï¼Œæœ€è½»çš„æ—¶å€™åˆ°äº†80KGï¼Œå†¬å¤©åˆåå¼¹äº†5KGå·¦å³ã€‚å•çœ‹æ•°å­—å…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆï¼Œç½‘ä¸Šå¾ˆå¤šäººåœ¨åŠå¹´å†…éƒ½èƒ½åšåˆ°ï¼Œä½†æ˜¯å¯¹æˆ‘æ¥è¯´æ„ä¹‰è¦æ›´æ·±è¿œã€‚ä»å»å¥èº«æˆ¿å¼€å§‹ï¼Œå‘ç°äº†å¦ä¸€ç§ç”Ÿæ´»æ–¹å¼ï¼Œç”Ÿæ´»ä¸åœ¨åªæœ‰ä»£ç ï¼Œç”Ÿæ´»å¯ä»¥æ›´ä¸°å¯Œå¤šå½©ï¼Œåœ¨æ­¤æœŸé—´æˆ‘ä¹Ÿè·‘äº†<a href="/blog/2016/11/07/run-2-marathon-in-a-week/">ä¸¤æ¬¡é©¬æ‹‰æ¾</a>ï¼Œçˆ¬äº†å¥½å¤šå±±ã€‚å¯¹è‡ªå·±çš„èº«ä½“ä¹Ÿæœ‰äº†æ›´å¤šçš„äº†è§£ï¼Œä¹‹å‰è®¤ä¸ºå‡è‚¥å°±æ˜¯ä½“é‡ä¸‹é™ï¼Œå…¶å®è¿™æ—¶éå¸¸è‚¤æµ…çš„ï¼Œå¦‚æœå¥èº«èƒ½å¤Ÿè®©ä½ æ”¹å˜ä¹‹å‰æ‡’æ•£çš„ç”Ÿæ´»æ–¹å¼ï¼Œå‘¨æœ«èµ°å‡ºæˆ¿é—¨ï¼Œæ‹¥æŠ±å¤§è‡ªç„¶ï¼Œè®¤è¯†æ›´å¤šçš„æœ‹å‹ï¼Œé‚£ä¹ˆä½“é‡å¯¹ä½ æ¥è¯´è¿˜é‚£ä¹ˆé‡è¦å˜›ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB28ADTc5RnpuFjSZFCXXX2DXXa_!!581166664.png" alt="å¥èº«æ‰“å¡1"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2.342cCtkpuFjy0FhXXXQzFXa_!!581166664.png" alt="å¥èº«æ‰“å¡2"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2YmZacY4npuFjSZFmXXXl4FXa_!!581166664.jpg" alt="æˆ‘ä¸æ•™ç»ƒ"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2H6nZcZtnpuFjSZFKXXalFFXa_!!581166664.jpg" alt="æ™¨è·‘"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2URzWcYJmpuFjSZFBXXXaZXXa_!!581166664.png_620x10000.jpg" alt="è¿åŠ¨æ—¥è®°"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2b68KcU5O.eBjSZFxXXaaJFXa_!!581166664.jpg_620x10000.jpg" alt="æ­å·å…¨é©¬ç»ˆç‚¹"><br></center>

<h3 id="ä¹’ä¹“çƒ"><a href="#ä¹’ä¹“çƒ" class="headerlink" title="ä¹’ä¹“çƒ"></a>ä¹’ä¹“çƒ</h3><p>åœ¨æˆ‘è¿åŠ¨ç»†èƒé«˜æ¶¨æœŸé—´ï¼Œç»„ç»‡äº†å…¬å¸çš„ä¹’ä¹“çƒåä¼šï¼Œå¹¶åœ¨å¹´åº•çš„æ¯”èµ›ä¸­è·å¾—ç¬¬äºŒåã€‚ä¹’ä¹“çƒä»å°å°±å–œæ¬¢ç©ï¼Œå¯ä»¥æ˜¯ä¹‹å‰ä½“é‡çš„ç¼˜æ•…ï¼Œåªèƒ½ç©è¿™ç§å°çƒğŸ˜‚ï¼Œå¤§äºŒä½“è‚²è¯¾è¿˜é€‰ä¿®äº†ä¸€å¹´ã€‚åœ¨åä¼šé‡Œè®¤è¯†äº†å„ç±»é«˜æ‰‹ï¼Œæ¯å¤©ä¸‹ç­åå»æ‰“ä¸¤å±€ä¹Ÿæˆäº†å¸¸æ€ï¼Œå¿ƒé‡Œçš„æ»¡è¶³æ„Ÿæé«˜ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2Y54QcuJ8puFjy1XbXXagqVXa_!!581166664.png_620x10000.jpg" alt="é€‰æ‰‹é£é‡‡"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2w6J4cB0kpuFjy1zdXXXuUVXa_!!581166664.jpg_620x10000.jpg" alt="å‰ä¸‰å"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2jhh8crplpuFjSspiXXcdfFXa_!!581166664.gif" alt="å¼€å±€å‰ä¸‰æ¿"><br></center>

<h2 id="å¤©å¤©å‘ä¸Š"><a href="#å¤©å¤©å‘ä¸Š" class="headerlink" title="å¤©å¤©å‘ä¸Š"></a>å¤©å¤©å‘ä¸Š</h2><h3 id="è¯»ä¹¦"><a href="#è¯»ä¹¦" class="headerlink" title="è¯»ä¹¦"></a>è¯»ä¹¦</h3><p>16 å¹´è¯»çš„ä¹¦ä¸å¤šï¼Œ15 å¹´ç»ˆæ€»ç»“æ—¶<a href="/blog/2016/01/08/review-2015/#è¯»ä¹¦-1">åˆ—å‡ºçš„ä¹¦</a>åªå®Œæˆäº†ä¸¤æœ¬ã€‚</p>
<p>ä¸ŠåŠå¹´ç»ˆäºå®Œæˆã€ŠSICPã€‹çš„é˜…è¯»ï¼Œ<a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">Github ä¸Šçš„ç¬”è®°</a> æœ‰äº† 248 ä¸ª starã€37 ä¸ª forkã€33 ä¸ª watchï¼Œè¯»å®Œè¿™æœ¬ä¹¦ï¼Œä¸ä»…ä»…æ˜¯å¯¹ç¼–ç¨‹è¯­è¨€æœ‰äº†æ–°çš„è®¤è¯†ï¼Œæ›´é‡è¦çš„æ˜¯æŒ‘æˆ˜è‡ªå·±ï¼Œçœ‹çœ‹æ˜¯å¦èƒ½åšæŒåšå¥½ä¸€ä»¶äº‹ã€‚</p>
<p>å¦ä¸€æœ¬çœ‹å®Œçš„ä¹¦æ˜¯<a href="http://book.douban.com/subject/1494026/" target="_blank" rel="external">ã€ŠCODEã€‹</a>ï¼Œè¿™æœ¬ä¹¦ç›¸å¯¹æ¥è¯´åç¡¬ä»¶ï¼Œç§‘æ™®ç±»å‹ï¼Œä½†æ˜¯å¯¹ç†è§£è®¡ç®—æœºå†…éƒ¨æ„é€ è¿˜æ˜¯éå¸¸æœ‰å¸®åŠ©çš„ï¼Œä»ç®€å•çš„é—¨ç”µè·¯ï¼Œåˆ°äºŒå…«è¯‘ç å™¨ï¼Œé”å­˜å™¨ï¼ŒäºŒæç®¡ï¼Œä¸€æ­¥æ­¥æ·±å…¥ï¼Œå»ºè®®æ¯ä¸€ä½åŒå­¦éƒ½è¯»è¯»ã€‚</p>
<p>ä¸Šé¢ä¸¤æœ¬æ˜¯è®¡åˆ’å†…çš„ï¼Œæ­¤å¤–è¿˜å®Œæˆäº†<a href="https://book.douban.com/subject/4743790/" target="_blank" rel="external">ã€ŠThe Joy of Clojureã€‹</a>ã€<a href="https://book.douban.com/subject/25783324/" target="_blank" rel="external">ã€Š Clojure Cookbook ã€‹</a>ã€‚<br><a href="https://book.douban.com/subject/3273420/" target="_blank" rel="external">ã€ŠPython Essential Referenceã€‹</a> çœ‹åˆ°äº†ç¬¬13ç« ï¼Œå å…¨ä¹¦çš„37%å·¦å³ã€‚</p>
<p>å‰å‡ å¤©çœ‹åˆ°ä¸€ç¯‡æ–‡ç« <a href="http://www.jianshu.com/p/0e22c900809b" target="_blank" rel="external">ã€Šä¹°ä¸ªä¹¦ï¼Œä½ è¿˜å‡‘ä»€ä¹ˆè¿è´¹ï¼Ÿã€‹</a>ï¼Œæ˜¯çš„ï¼Œå°±åƒè¯¥æ–‡è¯´çš„ï¼Œæˆ‘ä¹Ÿæœ‰å›¤ä¹¦â€œç—…â€ï¼Œå…¶å®è¿™ä¸ªé“ç†å¤§å®¶éƒ½æ‡‚ï¼Œå°±æ˜¯åšèµ·æ¥æ¯”è¾ƒéš¾è€Œå·²ï¼Œè¿™é‡Œå†æŠŠ 16 å¹´å¹´åˆå®šçš„ç›®æ ‡æ‹¿è¿‡æ¥ï¼Œ17 å¹´ç»§ç»­ï¼š</p>
<ul>
<li><a href="http://book.douban.com/subject/1230413/" target="_blank" rel="external">Computer Systems: A Programmerâ€™s Perspective</a>ï¼Œè¿™æœ¬ä¹¦ä¸»è¦æ˜¯è®©æˆ‘èƒ½å¤Ÿæ›´å¥½çš„ç†è§£æ“ä½œç³»ç»Ÿã€‚</li>
<li><a href="http://book.douban.com/subject/25854634/" target="_blank" rel="external">å…¬å…±é—®é¢˜ç»æµå­¦</a>ï¼Œä¸»è¦æ˜¯ä¸€äº›ç»æµå­¦çŸ¥è¯†ï¼Œåœ¨ç°ä»£ç¤¾ä¼šï¼Œæ¯ä¸ªäººéƒ½éœ€è¦æ‡‚ä¸€äº›ç»æµå­¦ï¼Œä¸æ˜¯å˜›</li>
<li><a href="http://book.douban.com/subject/1888733/" target="_blank" rel="external">Java Concurrency in Practice</a>ï¼Œä¸»è¦è®²æˆå¤šçº¿ç¨‹æ–¹é¢çš„çŸ¥è¯†ã€‚</li>
<li><a href="http://book.douban.com/subject/1632977/" target="_blank" rel="external">The Little Schemer - 4th Edition</a>ï¼Œè¿™æ˜¯ä¸€æœ¬å°å·§ç²¾ç‚¼çš„ä¹¦ï¼Œä¸»è¦è®²è§£ Scheme æ–¹é¢çš„ä¸œè¥¿ï¼Œå¯¹ç†è§£ä¸€äº›æ¦‚å¿µï¼Œåƒé€’å½’ã€lambda å¾ˆæœ‰å¸®åŠ©ï¼Œæ˜¯ SICP å¾ˆå¥½çš„è¾…åŠ©ä¹¦ç±ã€‚</li>
<li><a href="http://book.douban.com/subject/1726083/" target="_blank" rel="external">The Seasoned Schemer</a>ï¼ŒTLS çš„æ™‹çº§ç¯‡</li>
<li><a href="https://book.douban.com/subject/1432683/" target="_blank" rel="external">On Lisp</a>ï¼ŒAdvanced Techniques for Common LISPï¼Œä¸»è¦æ˜¯å­¦ä¹  Lisp ä¸­å®çš„å¼ºå¤§</li>
</ul>
<p><del>ä¸ºäº†ä¸é‡è¹ˆè¦†è¾™ï¼Œä¹‹åä¼šåšä¸ªè¯¦ç»†çš„è¯»ä¹¦è®¡åˆ’</del>ï¼Œç›®æ ‡å¤ªå¤§ä¸å®¹æ˜“å®ç°ï¼Œåˆ‡åˆ†æˆå°ç›®æ ‡å°±å¥½å¤šäº†ï¼Œå’Œå‡è‚¥ä¸€ä¸ªé“ç†ã€‚ç›®æ ‡æ˜¯åœ¨ 17 å¹´æŠŠä¸Šé¢å‡ æœ¬ä¹¦å…¨éƒ¨æ¶ˆç­ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2mf.BancCL1FjSZFPXXXZgpXa_!!581166664.png" alt="17 å¹´è¯»ä¹¦è®¡åˆ’æ—¶é—´è¡¨ï¼ŒFrom æ—¥äº‹æ¸…APP"></p>
<h3 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h3><p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2F20LcwJlpuFjSspjXXcT.pXa_!!581166664.png" alt="16 å¹´çš„ Github Contributions"></p>
<p>ä»æ•°å­—æ¥çœ‹ï¼Œ370 æ¬¡æ¯”å»å¹´çš„ 459 æ¬¡å°‘äº†äº›ï¼Œæäº¤ä¹ŸåŸºæœ¬ä¸Šæ˜¯åœ¨ä¸ŠåŠå¹´ï¼Œåº”è¯¥ä¹Ÿæ˜¯åœ¨çœ‹ SICP çš„é˜¶æ®µï¼Œ7 æœˆä»½åä¸šä½™æ—¶é—´éƒ½ç”¨åœ¨äº†å¥èº«ä¸Šï¼Œçœ‹ä¹¦ä¸å†™ä»£ç çš„æ—¶é—´ç¡®å®å°‘äº†ä¸å°‘ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2kFyjcrRkpuFjSspmXXc.9XXa_!!581166664.png" alt=""></p>
<ul>
<li>15å¹´åä¸€æœŸé—´å†™äº† <a href="https://github.com/jiacai2050/JCScheme" target="_blank" rel="external">Java ç‰ˆ Scheme</a>ï¼Œ16 å¹´ç”¨ Clojure <a href="https://github.com/jiacai2050/scheme.clj" target="_blank" rel="external">é‡æ–°å®ç°</a>äº†æ¬¡ï¼Œç›®å‰æœ‰ 3 ä¸ª watchï¼Œ11 ä¸ª starï¼›</li>
<li>è¿˜å†™äº†ä¸€ä¸ªæµè§ˆå™¨æ’ä»¶ <a href="https://github.com/jiacai2050/better-history" target="_blank" rel="external">Advance History</a>ï¼Œç”¨äºç»Ÿè®¡åˆ†ææµé‡çºªå½•ï¼Œç›®å‰æœ‰ 83 ä¸ª starï¼Œ6 ä¸ª watchï¼Œ11 ä¸ª fork</li>
<li>çœ‹ Python Essential æœŸé—´ï¼Œå†™äº†ä¸ª <a href="https://github.com/jiacai2050/pysh/" target="_blank" rel="external">Python ç‰ˆçš„ Shell</a>ï¼Œä¸»è¦æ˜¯ç”¨generator æ¥å®ç°ä¸åŒå‘½ä»¤é—´çš„ pipelineï¼Œå¯æƒœç›®å‰æ²¡æœ‰æŒç»­å¼€å‘ï¼Œ17 å¹´åº”è¯¥ä¼šå†åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šå‘åŠ›ã€‚ç›®å‰ 3 ä¸ª watchï¼Œ19 ä¸ª starã€‚</li>
</ul>
<h3 id="åšå®¢"><a href="#åšå®¢" class="headerlink" title="åšå®¢"></a>åšå®¢</h3><p>ç°åœ¨æ¥çœ‹çœ‹ 16 å¹´çš„åšå®¢ï¼Œäº§é‡æ˜æ˜¾ä½äºé¢„æœŸï¼Œæ²¡èƒ½åšåˆ°æ¯æœˆéƒ½æœ‰äº§å‡ºã€‚</p>
<ul>
<li>è´¨é‡æœ€é«˜çš„åº”è¯¥ç®—<a href="/blog/2016/10/31/socket-programming/">ã€ŠSocket ç¼–ç¨‹å®æˆ˜ã€‹</a>ï¼Œç°åœ¨çš„å¼€å‘ç¦»ä¸å¼€ç½‘ç»œï¼Œä½†æ˜¯å¯¹äºç½‘ç»œé€šä¿¡ï¼Œå¾ˆå¤šäººä¸æ˜¯éå¸¸äº†è§£ï¼Œè¿™ç¯‡æ–‡ç« ç®—æ˜¯ç»™å‡ºäº†è¾ƒä¸ºè¯¦ç»†çš„è§£é‡Šï¼›</li>
<li>æœ€è£… X çš„æ–‡ç« åº”è¯¥æ˜¯<a href="/blog/2016/11/07/run-2-marathon-in-a-week/">ã€Šæˆ‘ä¸ºä»€ä¹ˆä¸€å‘¨å†…è¿è·‘ 2 ä¸ªé©¬æ‹‰æ¾ã€‹</a>ï¼Œç”¨äº†â€œæ´ªè’ä¹‹åŠ›â€æ‰å®Œæˆçš„ï¼Œä¸»è¦çºªå½•è‡ªå·±ä»ä¸€ä¸ªå°èƒ–å­ï¼Œæ€ä¹ˆä¸€æ­¥æ­¥å®Œæˆå…¨é©¬ï¼ˆ42.195KMï¼‰çš„å¿ƒç†å†ç¨‹ï¼›</li>
<li><a href="/blog/2016/02/22/recursion-without-name/">ã€Šå¦‚ä½•å®ç°ä¸€ä¸ªæ²¡æœ‰åå­—çš„é€’å½’å‡½æ•°ã€‹</a> ä¸»è¦å†™çš„æ˜¯ Y ç®—å­ï¼Œç®—æ˜¯<a href="/blog/2014/10/12/lambda-calculus-introduction/">ã€Š ç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculus ã€‹</a>çš„ç»§æ‰¿ç¯‡ï¼Œä½†æ˜¯æ„Ÿè§‰è¿™ä¸¤ç¯‡æ–‡ç« å†™çš„éƒ½ä¸æ˜¯å¾ˆå¥½ï¼Œ17 å¹´ç†è§£åŠ æ·±åéœ€è¦å†å®Œå–„è¿™ä¸¤ä¸ªå‡½æ•°å¼ç¼–ç¨‹ä¸­çš„åŸºæœ¬æ¦‚å¿µï¼›</li>
<li><a href="/blog/2016/05/28/scope-closure/">ã€Šç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ä½œç”¨åŸŸä¸é—­åŒ…ã€‹</a>ç®—æ˜¯åœ¨ SICP ç¬¬å››ç« ç¯å¢ƒæ¨¡å‹çš„åŸºç¡€ä¸Šï¼Œé‡ç‚¹ä»‹ç»äº† JS ä¸ Python ä¸­çš„å˜é‡ä½œç”¨åŸŸï¼Œä¹‹åä¸€å¥è¯è§£é‡Šä»€ä¹ˆæ˜¯é—­åŒ…ï¼š<code>ä¸€ä¸ªé—­åŒ…å¯¹è±¡åŒ…å«ï¼šä¸€ä¸ªå‡½æ•°ä¸å£°æ˜å‡½æ•°æ—¶çš„ç¯å¢ƒ</code>ï¼Œé—­åŒ…æ˜¯ä¸ºäº†è§£å†³è‡ªç”±å˜é‡ä½œç”¨åŸŸçš„é—®é¢˜è€Œæå‡ºçš„æ¦‚å¿µï¼›</li>
<li><a href="/blog/2016/03/26/python-ruby-javascript/">ã€Špython, ruby, javascript æµ…æã€‹ </a> è¿™ç¯‡æ–‡ç« ç¬¬ä¸€æ¬¡æ¶‰åŠåˆ°äº† Ruby è¯­è¨€ï¼Œç›¸æ¯” Pythonï¼ŒRuby æ›´çµæ´»ï¼Œæ›´é€‚åˆå…ƒç¼–ç¨‹ï¼›</li>
<li><a href="/blog/2016/04/23/sicp-chapter4-summary/">ã€ŠSICP ç¬¬å››ç« æ€»ç»“ã€‹</a>ã€<a href="/blog/2016/05/21/sicp-chapter5-summary/">ã€ŠSICP ç¬¬äº”ç« æ€»ç»“ã€‹</a> æ˜¯ SICP ä¸€ä¹¦æœ€åä¸¤ç« ï¼Œç¬¬äº”ç« åé‡ç¼–è¯‘å™¨å®ç°çš„ç»†èŠ‚ï¼Œçœ‹åˆ°ä¸æ˜¯å¾ˆè¯¦ç»†ï¼Œä»¥åå¯èƒ½ä¼šæœ‰ Clojure æŠŠ SICP ä¸Šçš„é‡è¦ä¹ é¢˜å†åšä¸€éï¼Œæ¸©æ•…çŸ¥æ–°ï¼›</li>
<li><a href="/blog/2016/12/07/hello-jeju/">ã€ŠéŸ©å›½æµå·å²›4æ—¥æ¸¸ã€‹</a>ã€<a href="/blog/2016/12/18/zoo-hupao-of-hangzhou/">ã€Šå¤œçˆ¬åˆä½“éªŒã€‹</a> æ˜¯ä¸¤æ¬¡éå¸¸æ„‰å¿«çš„ç»å†ï¼Œç¬¬ä¸€æ¬¡èµ°å‡ºå›½é—¨ï¼Œç¬¬ä¸€æ¬¡é»‘å¤œçˆ¬å±±ï¼Œéƒ½éå¸¸éš¾å¿˜ï¼›</li>
<li><a href="/blog/2016/12/31/dev-in-clojure/">ã€ŠClojure å¼€å‘é‚£äº›äº‹ã€‹</a> 16 å¹´æœ€åä¸€ç¯‡æ–‡ç« ï¼Œçœ‹å®Œ SICP ä»¥åå°±è§‰å¾—è¦æ‰¾ä¸€é—¨ Lisp æ–¹è¨€ä½œä¸ºä¸»åŠ›è¯­è¨€ï¼Œè¿™ç¯‡æ–‡ç« ç®—æ˜¯å¼€ä¸ªå¤´ï¼Œé¢„è®¡æ¥ä¸‹æ¥çš„å‡ å¹´å†…éƒ½ä¼šé‡ç‚¹ä½¿ç”¨ Lispã€‚</li>
</ul>
<p>æŠ€æœ¯æ–‡ç« é™¤äº†å‘åœ¨ä¸ªäººåšå®¢ï¼Œä»Šå¹´ä¾æ¬¡å¼€é€šäº†<a href="http://weixin.sogou.com/weixin?query=keepwritingcodes" target="_blank" rel="external">å¾®ä¿¡å…¬ä¼—å·</a>ï¼Œ<a href="https://gold.xitu.io/user/57c2431b165abd00665ee39f" target="_blank" rel="external">æ˜é‡‘ä¸“æ </a>ï¼Œä¸€æ–¹é¢æ˜¯æå‡è‡ªå·±æ–‡ç« æ›å…‰ç‡ï¼Œå»ºç«‹è‡ªå·±çš„å“ç‰Œï¼›å¦ä¸€æ–¹é¢æ˜¯æ‰¾åˆ°å¿—åŒé“åˆçš„å°ä¼™ä¼´ï¼Œä¸ªäººåšå®¢æ–‡ç« éš¾å…ä¼šæœ‰é—æ¼ã€é”™è¯¯çš„åœ°æ–¹ï¼Œéœ€è¦å¿—åŒé“åˆè€…æŒ‡å‡ºï¼Œå…±åŒè¿›æ­¥ã€‚ä¸ºäº†åŒºåˆ†ç”Ÿæ´»ç±»æ–‡ç« ï¼Œå¼€é€š<a href="http://www.jianshu.com/u/8a5466e37198" target="_blank" rel="external">ç®€ä¹¦</a>ï¼Œä»¥åç”Ÿæ´»æ„Ÿæ‚Ÿçš„æ–‡ç« ä¸»è¦ä¼šæ”¾åœ¨è¿™é‡Œã€‚</p>
<h3 id="å­¦æ´‹æ–‡"><a href="#å­¦æ´‹æ–‡" class="headerlink" title="å­¦æ´‹æ–‡"></a>å­¦æ´‹æ–‡</h3><p>16 å¹´åˆå†³å®šç”¨æ‰‡è´æ‰“å¡ï¼Œåˆ°ä»Šå¤©ä¸ºæ­¢æ‰“å¡ 167 å¤©ï¼Œä¸åˆ°åŠå¹´ã€‚è€Œä¸”æœ‰äº›å¤©æ°´åˆ†ä¹Ÿæ¯”è¾ƒå¤§ï¼ŒåŸºæœ¬ä¸Š 2 åˆ†é’Ÿå°±æ‰“å¡äº†ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2TpGdcB8kpuFjSspeXXc7IpXa_!!581166664.jpg_620x10000.jpg" alt="æ‰‡è´æ‰“å¡çºªå½•"><br></center>

<p>æœŸé—´ä¹Ÿä¹°è¿‡ iPhone ä¸Šçš„<a href="https://itunes.apple.com/ec/app/voa-ying-yu-ting-li-xin-wen/id1010195720?l=en&amp;mt=8" target="_blank" rel="external">VOAé›†åˆ</a>ï¼Œå¬äº†ä¸¤å¤©ä¹Ÿæ²¡åšæŒä¸‹æ¥ï¼Œè™½ç„¶è®¡ç®—æœºæ–¹é¢çš„ä¹¦èƒ½çœ‹è‹±æ–‡æˆ‘å°½é‡çœ‹è‹±æ–‡ï¼Œä½†æ˜¯è‹±æ–‡é˜…è¯»èƒ½åŠ›è¿˜æ˜¯æ¯æé«˜å¤šå°‘ï¼Œå°±å…¶åŸå› ï¼Œè§‰å¾—è¿˜æ˜¯å¤§å¤šæ•°æ—¶å€™æˆ‘éƒ½ä¸æ±‚ç”šè§£ï¼Œå¾ˆå¤šå¤æ‚å¥å¼è‡ªå·±ä¹Ÿæ‡’å¾—å»åˆ†æï¼Œä¹…è€Œä¹…ä¹‹å¯èƒ½å°±ä¸§å¤±äº†è¿™ç§èƒ½åŠ›ï¼ŒåŠ ä¸Šæ‰‹æœºä¸Šé˜…è¯»æœ¬èº«å°±èƒ½éš¾é›†ä¸­æ³¨æ„åŠ›ï¼Œæ‰€ä»¥ä¸€å¹´ä¸‹æ¥è‹±è¯­æ°´å¹³è¿˜æ˜¯é‚£ä¹ˆæ ·ã€‚</p>
<p>å‰ä¸¤å¤©çœ‹åˆ°ä¸€ç¯‡æ–‡ç« <a href="http://www.jianshu.com/p/74ec33aa2038" target="_blank" rel="external">ã€Šæ²¡äººä¼šç­‰ä½ ä¼˜ç§€ï¼Œé‡åˆ°åˆ«äººæ—¶ä½ å¿…é¡»å·²ç»å¾ˆä¼˜ç§€ã€‹</a>ï¼Œè‡ªå·±æƒ³å‡ºå›½ä½†æ˜¯è¯­è¨€åˆä¸€ç›´åŸåœ°æ‰“è½¬æ€ä¹ˆå¯ä»¥å‘¢ï¼Ÿæœºä¼šæ˜¯ç•™ç»™æœ‰å‡†å¤‡çš„äººã€‚17 å¹´çš„è‹±è¯­å­¦ä¹ è®¡åˆ’è¦å¤šå»åŠ¨ç¬”åŠ¨è„‘ï¼Œå­¦ä¹ è‹±è¯­æ—¶ç›´æ¥å¼€é£è¡Œæ¨¡å¼ï¼ŒæŠŠå¹²æ‰°é™åˆ°æœ€ä½ï¼Œæ­£å¥½æ‰‡è´æœ‰ä¸ª<a href="https://www.shanbay.com/web/annual-plan/intro" target="_blank" rel="external">æ–°å¹´è®¡åˆ’</a>ï¼Œäº¤è´¹20.17å…ƒï¼Œå®šä¸ª300å¤©æ‰“å¡çš„å°ç›®æ ‡ï¼Œç­‰åˆ° 18 å¹´å†è§è¯æ•ˆæœã€‚</p>
<h2 id="æ€»ç»“ä¸å±•æœ›"><a href="#æ€»ç»“ä¸å±•æœ›" class="headerlink" title="æ€»ç»“ä¸å±•æœ›"></a>æ€»ç»“ä¸å±•æœ›</h2><p>16 å¹´æ˜¯æ­£å¼å·¥ä½œçš„ç¬¬äºŒå¹´ï¼Œè¿™ä¸€å¹´çš„å·¥ä½œå¹³æ·¡æ— å¥‡ï¼Œæ²¡ä»€ä¹ˆç‰¹åˆ«çªå‡ºçš„åœ°æ–¹ï¼Œä»£ç é£æ ¼ç›¸å¯¹æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„ï¼Œæ€»ç»“å‡ºäº† <a href="http://python-best-practice.liujiacai.net/#/" target="_blank" rel="external">Python æœ€ä½³å®è·µ</a>ï¼Œå¹¶åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨ï¼›ç”¨ Node.js å®Œæˆäº†ä¸€å†…éƒ¨å·¥å…·ï¼Œä¾› BI çš„åŒå­¦ä½¿ç”¨ï¼Œè¿™ä¸ªé¡¹ç›®é™†é™†ç»­ç»­åšäº†ä¸€å¹´åŠï¼Œäº‹å®è¯æ˜ Node.js çš„å›è°ƒç¡®å®æŒºå‘ï¼Œç»´æŠ¤èµ·æ¥æˆæœ¬ç•¥é«˜ï¼›å¹´åº•æ—¶ï¼ŒæŠŠ Clojure æ­£å¼åº”ç”¨åˆ°å·¥ä½œä¸­ï¼Œç®—æ˜¯è·¨å‡º Lisp å¤§é—¨çš„ç¬¬ä¸€æ­¥ï¼Œåé¢æ‰“ç®—åœ¨å…¬å¸å†…éƒ¨åšå‡ æ¬¡åˆ†äº«ï¼Œæ¥æ¨å¹¿ Clojureï¼Œå¹³æ—¶ä¹Ÿä¼šå¤šå»å­¦ä¹  Github ä¸Šçš„å¼€æºé¡¹ç›®ï¼ŒClojure ç¬¬ä¸‰æ–¹åº“ä¸€èˆ¬éƒ½æ¯”è¾ƒçŸ­å°ç²¾æ‚ï¼Œç”±äºå…¶è¯­è¨€æœ¬èº«çš„æ‰©å±•æ€§éå¸¸å¥½ï¼Œæ‰€ä»¥å¯ä»¥ç”¨è¾ƒå°‘çš„ä»£ç æ¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼Œ17 å¹´ä¼šå†™å‡ ç¯‡æ–‡ç« æ¥æ€»ç»“è¿™æ–¹é¢çš„ç»éªŒã€‚</p>
<p>å¦‚æœè¯´ 16 å¹´æ˜¯è¿åŠ¨å…ƒå¹´ï¼Œé‚£ä¹ˆ 17 å¹´å°†ä¼šæ˜¯è¿åŠ¨ç¿Œå¹´ï¼Œå¥èº«åº”è¯¥æ˜¯ä¸€ä»¶å¾ˆäº«å—çš„äº‹æƒ…ï¼Œè·‘æ­¥æœºä¸ŠæŒ¥æ±—å¦‚é›¨ä¹‹åï¼Œç»ƒç»ƒè‚©ï¼Œç»ƒç»ƒè…¿ï¼Œæœ€åå†²ä¸ªæ¾¡ï¼Œå›å»å¤§ç¡ä¸€è§‰ï¼Œç”Ÿæ´»è¿˜èƒ½æ›´ç¾å¥½å˜›ï¼Ÿï¼17 å¹´è¿˜åº”è¯¥ä¼šå»çˆ¬é»„å±±ã€åºå±±ã€åå±±ã€‚</p>
<p>16 å¹´é«˜è´¨é‡æ–‡ç« è¾ƒå°‘ï¼Œ17 å¹´ä¼šåœ¨é˜…è¯»ç»å…¸ä¹¦ç±çš„åŒæ—¶ï¼Œå¤šå»æ€»ç»“ï¼Œå‘æ•£æ€ç»´ï¼Œæœ€å°‘åšåˆ°æ¯æœˆä¸€ç¯‡é«˜è´¨é‡åšå®¢ï¼Œç°åœ¨æœ‰äº†<a href="http://weixin.sogou.com/weixin?query=keepwritingcodes" target="_blank" rel="external">å…¬ä¼—å·</a>åï¼Œæ›´è¦å‹¤å¥‹ï¼ŒæŠŠè‡ªå·±çš„å“ç‰Œï¼ˆKeepWritingCodesï¼‰å»ºç«‹èµ·æ¥ã€‚</p>
<p>å¥½äº†ï¼Œæ€»ç»“çš„å·®ä¸å¤šäº†ï¼Œæœ€åæ”¾å‡ å¼ æœ‰æ„ä¹‰çš„ç…§ç‰‡å‘Šåˆ«2016ï¼Œè¿æ¥å´­æ–°çš„2017ã€‚<code>&lt;/2016&gt;Hello World&lt;2017&gt;</code></p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB24FskXS0mpuFjSZPiXXbssVXa_!!581166664.jpg" alt="éŸ©å›½æµå·å²›ï¼Œæ¸…æ™¨"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2y9z6c.lnpuFjSZFjXXXTaVXa_!!581166664.jpg" alt="éŸ©å›½æµå·å²›ï¼Œæ±‰æ‹¿å±±"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2z2kdc9FmpuFjSZFrXXayOXXa_!!581166664.jpg_620x10000.jpg" alt="æ­å·ï¼Œæ›²é™¢é£è·"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2faKbcB0kpuFjSsziXXa.oVXa_!!581166664.jpg" alt="æ­å·ï¼ŒåŒ—é«˜å³°"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2yBr6c.lnpuFjSZFjXXXTaVXa_!!581166664.jpg_620x10000.jpg" alt="åŒ—äº¬ï¼Œé¸Ÿå·¢"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB29fMfcYBmpuFjSZFAXXaQ0pXa_!!581166664.jpg" alt="ä¸´æ²‚ï¼Œå¤©è’™ï¼Œå®¶è¾‰"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2zP.bc5pnpuFjSZFkXXc4ZpXa_!!581166664.jpg_620x10000.jpg" alt="ä¸´æ²‚ï¼Œå¤©è’™ï¼Œå®¶é’°"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB23mv2cYJmpuFjSZFwXXaE4VXa_!!581166664.jpg" alt="å®¶è¾‰å†™çš„å¤©è’™ä¸€æ—¥æ¸¸"><br><br></center>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆåˆ°ä¸€å¹´æ€»ç»“æ—¶ï¼Œæœ¬æ¥æƒ³ç€åœ¨å†œå†å¹´å‰è€ƒå®Œç§‘ç›®ä¸‰æ‹¿åˆ°é©¾ç…§åå†å†™çš„ï¼Œç›®å‰æ¥çœ‹å¸Œæœ›ä¸å¤§äº†ï¼Œè¿™ä¸ªç›®æ ‡åªèƒ½ç•™åœ¨17å¹´å»å®ç°äº†ï¼Œæœ‰ç§ä¹¦åˆ°ç”¨æ—¶æ–¹æ¨æ™šçš„æ„Ÿè§‰ã€‚&lt;br&gt;ä¸€ä¸ªè¯æ¥æ€»ç»“ 16 å¹´â€”â€”â€œè¿åŠ¨å…ƒå¹´â€ï¼Œç®—æ˜¯å®Œæˆäº† &lt;a href=&quot;/blog/2016/01/08/review-2015
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>Clojure å¼€å‘é‚£äº›äº‹</title>
    <link href="http://liujiacai.net/blog/2016/12/31/dev-in-clojure/"/>
    <id>http://liujiacai.net/blog/2016/12/31/dev-in-clojure/</id>
    <published>2016-12-31T08:49:17.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>Clojure â€”â€” æ–°ä¸–çºªçš„ Lisp æ–¹è¨€ï¼Œç›¸ä¿¡å¤§å¤šæ•°åŒå­¦å¤šå¤šå°‘å°‘éƒ½å¬è¿‡ï¼Œæ¯•ç«Ÿæœ‰ä¸ªæ€æ‰‹çº§åº”ç”¨ <a href="http://storm.apache.org/" target="_blank" rel="external">Storm</a>ï¼Œä½†æ˜¯çœŸæ­£å»å†™ Clojure çš„åŒå­¦ä¼°è®¡ä¸å¤šï¼Œå›½å†…ä¹Ÿç½•è§å“ªä¸ªå…¬å¸æ‹› Clojure ç¨‹åºå‘˜ã€‚<br>ä½œä¸ºæ¨å¹¿ Clojure ä¸‡é‡Œé•¿åŸçš„ç¬¬ä¸€æ­¥ï¼Œè¿™ç¯‡æ–‡ç« é¦–å…ˆä»‹ç»ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Lisp å¼€å‘ï¼Œä¹‹åå¼€å§‹ä»‹ç» Clojure è¯­æ³•å…¥é—¨ï¼Œç´§æ¥ç€ä»‹ç» Clojure å¼€å‘ç¯å¢ƒæ­å»ºï¼Œç„¶åä»‹ç»ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“æ—¶çš„ä¸€äº›æ³¨æ„ç‚¹ï¼Œæœ€åä»‹ç»ä¸€ä¸‹å¸¸è§çš„æµ‹è¯•æ–¹æ³•ã€‚æœ¬ç¯‡æ–‡ç« æ‰€ä»‹ç»å†…å®¹éƒ½æ˜¯æˆ‘è‡ªå·±å®è·µå¾—å‡ºï¼Œä¸è¶³ä¹‹å¤„è¯·å„ä½ Clojurians æŒ‡å‡ºã€‚</p>
<h2 id="Why-Lisp"><a href="#Why-Lisp" class="headerlink" title="Why Lisp"></a>Why Lisp</h2><p>Lisp è¯­è¨€è¯ç”Ÿè¿™ä¹ˆä¹…äº†ï¼Œä¸ºä»€ä¹ˆä¸€ç›´é‚£ä¹ˆå°ä¼—ï¼ŸåŸå› å°±åœ¨äº Lisp è¯­è¨€è¿‡äºå¼ºå¤§ï¼Œä¸å¿…ä¹Ÿä¸å¯èƒ½åƒ Java é‚£ä¹ˆæ™®åŠã€‚ä½ èƒ½è¦æ±‚æ¯ä¸ªäººéƒ½èƒ½ä¸º CTO å—ï¼Ÿ<br>ç¡…è°·åˆ›ä¸šä¹‹çˆ¶ <a href="http://www.paulgraham.com/" target="_blank" rel="external">Paul Graham</a> åœ¨å…¶è‘—ä½œ<a href="https://book.douban.com/subject/6021440/" target="_blank" rel="external">ã€Šé»‘å®¢ä¸ç”»å®¶ã€‹</a>ä¸­æåŠ›æ¨è Lisp è¯­è¨€ï¼Œå¹¶ä¸”è®²åˆ°å¾ˆå¤š Lisp çš„ç‰¹æ€§é€æ¸èå…¥åˆ°å…¶ä»–è¯­è¨€ä¸­ã€‚è¯¥ä¹¦ä¸­åˆ—ä¸¾äº† Lisp ä¸­ 9 ç§æ–°æ€æƒ³ï¼Œä¾æ¬¡ä¸ºï¼š</p>
<ol>
<li>æ¡ä»¶ç»“æ„ if-then-else</li>
<li>å‡½æ•°ä¹Ÿæ˜¯ä¸€ç§æ•°æ®ç±»å‹</li>
<li>é€’å½’</li>
<li>å˜é‡çš„åŠ¨æ€ç±»å‹ï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯æŒ‡é’ˆ</li>
<li>åƒåœ¾å›æ”¶æœºåˆ¶</li>
<li>ç¨‹åºç”±è¡¨è¾¾å¼ç»„æˆ</li>
<li>ç¬¦å·ç±»å‹ï¼Œç¬¦åˆå®é™…æ˜¯ä¸€ç§æŒ‡é’ˆï¼ŒæŒ‡å‘å­˜å‚¨åœ¨å“ˆå¸Œè¡¨ä¸­çš„å­—ç¬¦ä¸²</li>
<li>ä»£ç ä½¿ç”¨ç¬¦å·å’Œå¸¸é‡ç»„æˆçš„æ ‘å½¢è¡¨ç¤ºæ³•</li>
<li>æ— è®ºä»€ä¹ˆæ—¶åˆ»ï¼Œæ•´ä¸ªè¯­è¨€éƒ½æ˜¯å¯ç”¨ã€‚Lisp å¹¶ä¸çœŸæ­£åŒºåˆ†è¯»å–æœŸã€ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸ</li>
</ol>
<p>å‰ 7 ç§ç‰¹æ€§å¯ä»¥åœ¨å¦‚ä»Šè¾ƒæµè¡Œçš„ç¼–ç¨‹è¯­è¨€æ‰¾åˆ°ï¼Œä½†æœ€åä¸¤ç§æ˜¯ Lisp ç‰¹æœ‰çš„ã€‚Lisp æœ€æ“…é•¿çš„é¢†åŸŸæ˜¯å†™ç¼–è¾‘å™¨ï¼ˆå…ƒç¼–ç¨‹ï¼‰ã€é¢†åŸŸç‰¹å®šè¯­è¨€DSLï¼Œç°åœ¨ç”¨çš„æœ€å¹¿çš„æ˜¯ Emacs ä¸ AutoACDï¼Œå…¶å¯¹åº”çš„è„šæœ¬è¯­è¨€åˆ†åˆ«æ˜¯ <a href="https://en.wikipedia.org/wiki/Emacs_Lisp" target="_blank" rel="external">Emacs Lisp</a>ã€<a href="https://en.wikipedia.org/wiki/AutoLISP" target="_blank" rel="external">AutoLisp</a>ã€‚<br>å¯ä»¥å¥½ä¸å¤¸å¼ çš„è¯´ï¼Œè½¯ä»¶ä¹Ÿå¤æ‚ï¼Œè¶Šé€‚åˆç”¨ Lispã€‚å…¶æ¬¡ï¼ŒClojure ä½œä¸ºæ–°ä¸–çºªçš„ Lisp æ–¹è¨€ï¼Œåœ¨ Web ã€å¤§æ•°æ®ã€æ•°æ®åº“ç­‰ç°åœ¨å¸¸è§é¢†åŸŸéƒ½æœ‰ä¸°å¯Œçš„ç±»åº“ä¸æ–‡æ¡£ã€‚</p>
<p>ç›®å‰å›½å†…ä½¿ç”¨ Clojure æˆåŠŸæ¡ˆä¾‹è¾ƒå°‘ï¼Œ<a href="https://leancloud.cn/jobs/" target="_blank" rel="external">LeanCloud</a> åœ¨å…¶æ‹›è˜ç½‘é¡µä¸Šå†™åˆ°å…¶æˆå‘˜éƒ½æ˜¯ Clojure ç¤¾åŒºæˆå‘˜ï¼Œä½†å¹¶ä¸äº†è§£å…¶å†…éƒ¨ä½¿ç”¨æƒ…å†µã€‚å›½å¤–çš„å°±æ¯”è¾ƒå¤šäº†ï¼Œå¯ä»¥å‚è€ƒ Clojure ä¹‹çˆ¶ Rich Hickey æ‰€åœ¨å…¬å¸ Congitect åˆ—ä¸¾çš„ <a href="http://cognitect.com/resources#success-stories" target="_blank" rel="external">Success Stories</a>ã€‚</p>
<h2 id="è¯­æ³•å…¥é—¨"><a href="#è¯­æ³•å…¥é—¨" class="headerlink" title="è¯­æ³•å…¥é—¨"></a>è¯­æ³•å…¥é—¨</h2><h3 id="æ‹¬å·"><a href="#æ‹¬å·" class="headerlink" title="æ‹¬å·"></a>æ‹¬å·</h3><p>Lisp è¯­æ³•æœ€æ˜¾è‘—çš„ç‰¹ç‚¹æ˜¯â€œæ‹¬å·å¤šâ€ï¼Œä¸è¿‡è¿™åªæ˜¯å…¶å¤–åœ¨è¡¨ç°ï¼Œå†…åœ¨è¡¨ç°æ˜¯é˜…è¯»ä»£ç çš„æ–¹å¼ï¼Œéœ€è¦ä»æœ€é‡Œé¢çš„è¡¨è¾¾å¼å¼€å§‹ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">;; Clojure</div><div class="line">&gt; (split (upper-case &quot;hello, world&quot;) #&quot;, &quot;)</div><div class="line">[&quot;HELLO&quot; &quot;WORLD&quot;]</div><div class="line"></div><div class="line">;; Python</div><div class="line">&gt;&gt;&gt; &quot;hello, world&quot;.upper().split(&quot;, &quot;)</div><div class="line">[&apos;HELLO&apos;, &apos;WORLD&apos;]</div></pre></td></tr></table></figure>
<p>ä¸ºäº†é˜²æ­¢è¿‡åº¦åµŒå¥—ï¼Œéœ€è¦ç»å¸¸å®šä¹‰ä¸€äº›è¾…åŠ©å‡½æ•°ï¼Œå¾ˆå¹¸è¿ï¼ŒClojure é‡Œé¢å‡½æ•°æ˜¯ä¸€çº§æˆå‘˜ï¼Œè¿™æ„å‘³ç€å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºå‡½æ•°å€¼è¿”å›ï¼Œèƒ½å¤Ÿè¿›è¡Œè¿™ä¸¤ç±»æ“ä½œçš„å‡½æ•°ç§°ä¸ºâ€œé«˜é˜¶å‡½æ•°â€ï¼ˆhigh-order functionsï¼‰ï¼Œè¿™åœ¨ä»»ä½•ä¸€é—¨å‡½æ•°å¼è¯­è¨€ä¸­éƒ½å¾ˆæ™®åŠã€‚</p>
<p>é™¤äº†æœ€åŸºæœ¬çš„åœ†æ‹¬å·<code>()</code>å¤–ï¼Œæ–¹æ‹¬å·<code>[]</code>ä¸èŠ±æ‹¬å·<code>{}</code>åœ¨ Clojure ç”¨çš„ä¹Ÿæ¯”å…¶ä»– Lisp æ–¹è¨€ä¸­å¤šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[1 2 &quot;buckle my shoe&quot;]        ;; æ•°ç»„</div><div class="line">&#123;:ace 1, :deuce 2, &quot;trey&quot; 3&#125;  ;; å“ˆå¸Œè¡¨</div><div class="line">#&#123;:a :b :c&#125;                   ;; é›†åˆ</div></pre></td></tr></table></figure>
<p>Clojure ä¸­åŸºæœ¬çš„æ•°æ®ç»“æ„å¯ä»¥å‚è€ƒå…¶<a href="http://clojure.org/reference/data_structures" target="_blank" rel="external">å®˜æ–¹ç½‘ç«™</a>ï¼Œæˆ‘ä¸ªäººè§‰å¾—ï¼ŒLisp æ–¹è¨€çš„è‹±æ–‡ä»‹ç»å¾€å¾€è¿‡äºç²¾ç‚¼ã€æ™¦æ¶©ï¼Œä¸é€‚åˆåˆå­¦è€…ç›´æ¥é˜…è¯»ï¼Œä¸ºäº†å¤¯å®åŸºç¡€ï¼Œè¿˜æ˜¯å»ºè®®å¤§å®¶æ‰¾æœ¬ä¹¦æ¥çœ‹ï¼Œçœ‹ä¹¦çš„å¥½å¤„æ˜¯ä¸ä»…ä»…çŸ¥é“æŸä¸ªçŸ¥è¯†ç‚¹ï¼Œæ›´é‡è¦çš„æ˜¯äº†è§£ä¸åŒçŸ¥è¯†ç‚¹ä¹‹é—´çš„åŒºåˆ«ä¸è”ç³»ï¼Œåˆå­¦æœŸé—´ï¼Œæˆ‘é˜…è¯»äº†ä¸‹é¢ä¸¤æœ¬ä¹¦ï¼š</p>
<ul>
<li><a href="https://book.douban.com/subject/4743790/" target="_blank" rel="external">The Joy of Clojure</a>ï¼Œè¿™æœ¬ä¹¦å¯¹æˆ‘å¸®åŠ©æ¯”è¾ƒå¤§ï¼Œä½†æ˜¯ç½‘ä¸Šæ™®éè¯´è¿™æœ¬ä¹¦æ¯”è¾ƒéš¾æ‡‚ï¼Œæˆ‘åªèƒ½è¯´èåœé’èœå„æœ‰æ‰€çˆ±ã€‚</li>
<li><a href="https://book.douban.com/subject/21661495/" target="_blank" rel="external">Clojureç¼–ç¨‹</a>ï¼Œè¿™æœ¬ä¹¦åº”è¯¥æ¯‹åº¸ç½®ç–‘æ˜¯æ–°æ‰‹çš„å¿…é¡»ä¹¦</li>
</ul>
<p>é™¤äº†çœ‹ä¹¦å¤–ï¼Œä¸‹é¢çš„æ–‡æ¡£ä¹Ÿéå¸¸ newbie-friendlyï¼Œæ¨èå¤§å®¶å¤šå»é€›é€›ï¼š</p>
<ul>
<li><a href="http://clojure-doc.org/" target="_blank" rel="external">http://clojure-doc.org/</a>ï¼Œå¯¹ Clojure è¯­è¨€çš„æ•´ä¸ªç”Ÿæ€æœ‰éå¸¸è¯¦ç»†çš„ä»‹ç»</li>
<li><a href="https://clojuredocs.org/" target="_blank" rel="external">https://clojuredocs.org/</a>ï¼Œå¯ä»¥æ–¹ä¾¿æŸ¥çœ‹å…·ä½“å‡½æ•°çš„ä½¿ç”¨æ–¹æ³•</li>
</ul>
<h3 id="æ•°æ®ä¸å¯å˜"><a href="#æ•°æ®ä¸å¯å˜" class="headerlink" title="æ•°æ®ä¸å¯å˜"></a>æ•°æ®ä¸å¯å˜</h3><p>æ‹¬å·é—®é¢˜é€‚åº”åï¼Œå¦ä¸€ä¸ªæ¯”è¾ƒæŒ‘æˆ˜çš„æ˜¯æ•°æ®çš„ä¸å¯å˜æ€§ï¼Œè¿™èåˆåœ¨ Clojure è¯­è¨€çš„è®¾è®¡ä¹‹ä¸­ï¼Œè¡¨è±¡å°±æ˜¯æ²¡æœ‰èµ‹å€¼è¯­å¥äº†ï¼Œä½†åœ¨å®ç°æ—¶ï¼Œä¸ºäº†è¾¾åˆ°æ—¶é—´ã€ç©ºé—´ä¸Šçš„é«˜æ•ˆï¼Œé‡‡ç”¨äº†éå¸¸å¤æ‚çš„ç®—æ³•ï¼Œæˆ‘åˆ°ç°åœ¨ä¹Ÿè¿˜æ˜¯ä¸€çŸ¥åŠè§£ï¼Œä¸æ˜¯å¾ˆæ¸…æ¥šã€‚ã€ŠThe Joy of Clojureã€‹ä¸€ä¹¦ä¸­æœ‰ç®€å•ä»‹ç»ï¼Œä¸è¿‡æˆ‘è§‰å¾—åˆå­¦è€…å¯ä»¥å®Œå…¨ä¸ç”¨å»å…³å¿ƒå®ç°çš„ç»†èŠ‚ï¼Œåœ¨é‡åˆ°æ€§èƒ½é—®é¢˜æ—¶åœ¨è€ƒè™‘å»ä¼˜åŒ–ã€‚æˆ‘è¿™é‡Œæ”¾ä¸€äº›ç›¸å…³çš„èµ„æ–™ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå–ï¼š</p>
<ul>
<li><a href="http://hypirion.com/musings/understanding-persistent-vector-pt-1" target="_blank" rel="external">Understanding Clojureâ€™s Persistent Vectors</a></li>
<li><a href="https://www.youtube.com/watch?v=7BFF50BHPPo" target="_blank" rel="external">What Lies Beneath - A Deep Dive Into Clojureâ€™s Data Structures</a> YouTube è§†é¢‘ï¼Œéœ€ç¿»å¢™</li>
</ul>
<h3 id="æ‰˜ç®¡å‹è¯­è¨€"><a href="#æ‰˜ç®¡å‹è¯­è¨€" class="headerlink" title="æ‰˜ç®¡å‹è¯­è¨€"></a>æ‰˜ç®¡å‹è¯­è¨€</h3><blockquote>
<p><a href="http://clojure.org/about/jvm_hosted" target="_blank" rel="external">Clojure is desgined to be a hosted language</a>.</p>
</blockquote>
<p>è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä¼°è®¡ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ Clojure è¾ƒå…¶ä»– Lisp æ–¹è¨€æ›´æµè¡Œçš„åŸå› ã€‚Clojure çš„å®¿ä¸»å¹³å°ç°åœ¨ä¸»è¦æœ‰ä¸¤ä¸ªï¼šä¸€ä¸ªæ˜¯ JVMï¼›å¦ä¸€ä¸ªæ˜¯å¾®è½¯ .NET ï¼ˆ<a href="https://github.com/clojure/clojure-clr" target="_blank" rel="external">Clojure-CLR</a>ï¼‰ï¼Œç°åœ¨è¿˜æœ‰ä¸€ä¸ªå‘å±•è¿…çŒ›çš„ ClojureScriptï¼Œå¯ä»¥å°† Clojure ä»£ç ç¼–è¯‘ä¸ºæ— å¤„ä¸åœ¨çš„ Javascriptã€‚</p>
<p>è¿™ä¹Ÿå°±æ„å‘³æˆ‘ä»¬æˆ–å¤šæˆ–å°‘éœ€è¦äº†è§£è¿™äº›å®¿ä¸»è¯­è¨€ï¼Œæ¯”å¦‚ Clojure é‡Œé¢æ²¡æœ‰æä¾›ç›´æ¥æ“ä½œæ–‡ä»¶ç³»ç»Ÿã€ç½‘ç»œçš„ç±»åº“ï¼Œè€Œæ˜¯é‡‡ç”¨é—´æ¥çš„æ–¹æ³•å»è°ƒç”¨å…¶å®¿ä¸»è¯­è¨€çš„ç›¸åº”ç±»åº“ã€‚è¿™ä¸€ç‚¹ä¹Ÿè®© Clojure åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å˜å¾—å¯èƒ½ï¼Œæ¯”å¦‚ <a href="https://github.com/dakrone/clj-http" target="_blank" rel="external">clj-http</a> å°±æ˜¯å¯¹ <a href="http://hc.apache.org/httpcomponents-client-ga/" target="_blank" rel="external">Apache HttpComponents</a> çš„åŒ…è£…ï¼Œæ›´ç¬¦åˆ Clojure ä½¿ç”¨ä¹ æƒ¯è€Œå·²ã€‚</p>
<h2 id="å¼€å‘ç¯å¢ƒæ­å»º"><a href="#å¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="å¼€å‘ç¯å¢ƒæ­å»º"></a>å¼€å‘ç¯å¢ƒæ­å»º</h2><p>å·¥æ¬²å–„å…¶äº‹ï¼Œå¿…å…ˆåˆ©å…¶å™¨ã€‚<br>è¿™é‡Œä¸»è¦ä»‹ç» Intellj + Cursive ä¸ Emacs + Cider ä¸¤ä¸ªç¯å¢ƒï¼Œè¿™ä¸¤ä¸ªæ˜¯æˆ‘ç”¨çš„æœ€é¡ºæ‰‹ï¼Œä¹Ÿæ˜¯ç°åœ¨è¾ƒä¸ºæµè¡Œçš„æ–¹å¼ã€‚</p>
<h3 id="Intellj-Cursive"><a href="#Intellj-Cursive" class="headerlink" title="Intellj + Cursive"></a>Intellj + Cursive</h3><p>åœ¨ä¸Šé¢è¯­æ³•å…¥é—¨éƒ¨åˆ†å°±ä»‹ç»äº†ï¼ŒClojure ä¸å®¿ä¸»è¯­è¨€ç»å¸¸éœ€è¦äº¤äº’ï¼Œæ¯‹åº¸ç½®ç–‘ <a href="https://www.jetbrains.com/idea/" target="_blank" rel="external">Intellj</a> æ˜¯ Java å¼€å‘çš„åˆ©å™¨ï¼Œç¤¾åŒºç‰ˆè¶³ä»¥æ»¡è¶³éœ€è¦ï¼Œä¸ç”¨å†å»åšæ‰¾ç ´è§£ç‰ˆé‚£äº›ä¸é“å¾·çš„äº‹æƒ…ï¼Œå¦‚æœä½ è¿˜åœ¨ç”¨ Eclipseï¼Œå¯ä»¥è€ƒè™‘è¿ç§»äº†ã€‚<br><a href="https://cursive-ide.com/" target="_blank" rel="external">Cursive</a> åšåˆ°äº†å¼€ç®±å³ç”¨ï¼Œè€Œä¸”è¶³å¤Ÿçš„å¥½ç”¨ï¼Œè€Œä¸”ä¹Ÿæœ‰<a href="https://cursive-ide.com/buy.html" target="_blank" rel="external">éå•†ä¸šå…è´¹ç‰ˆ</a>ï¼Œè¿™æå¤§æ–¹ä¾¿äº†å­¦ç”Ÿå…šï¼Œé€‚åº”äº†ä¸­å›½å›½æƒ…ã€‚</p>
<p>å®‰è£…ã€ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œé€šè¿‡ Intellj æ’ä»¶ç®¡ç†å™¨å®‰è£…åï¼Œè®¾ç½®ä¸‹<a href="https://cursive-ide.com/userguide/keybindings.html" target="_blank" rel="external">å¿«æ·é”®ç±»å‹</a>å°±å¯ä»¥ä½¿ç”¨äº†ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2McCFcbxmpuFjSZJiXXXauVXa_!!581166664.png" alt="Cursive å¿«æ·é”®è®¾ç½®"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2th5wcohnpuFjSZFpXXcpuXXa_!!581166664.png" alt="Cursive REPL"></p>
<h3 id="Emacs-Cider"><a href="#Emacs-Cider" class="headerlink" title="Emacs + Cider"></a>Emacs + Cider</h3><p>ä½œä¸ºä¸€é—¨ Lisp æ–¹è¨€ï¼Œæ€ä¹ˆèƒ½æ²¡æœ‰ä¸€ä¸ªå¥½çš„ Emacs mode å‘¢ï¼Ÿ<a href="https://github.com/clojure-emacs/cider" target="_blank" rel="external">Cider</a> å…¨ç§°</p>
<blockquote>
<p>The Clojure Interactive Development Environment that Rocks for Emacs</p>
</blockquote>
<p>è€Œä¸” Emacs æœ¬èº«å°±æ˜¯ä¸ªç”¨ Lisp æ–¹è¨€å†™çš„â€œæ“ä½œç³»ç»Ÿâ€ï¼Œå¯¹ä»¥æ‹¬å·è‘—ç§°çš„ Lisp è¯­è¨€æœ‰å¤©ç„¶çš„æ”¯æŒï¼Œæ‹¬å·åŒ¹é…ä¸»è¦æ˜¯ Paredit modeï¼Œå¯ä»¥æ–¹ä¾¿çš„æŠŠæ‹¬å·ä½œä¸ºä¸€ä¸ªæ•´ä½“æ“ä½œï¼Œä¸è¿‡åƒ Cursive è¿™ç§æ’ä»¶ä¹Ÿé›†æˆäº† Paredit çš„ä¸»è¦åŠŸèƒ½ï¼Œæ‰€ä»¥ä¸ç”¨ Emacs çš„åŒå­¦ä¹Ÿä¸ç”¨æ‹…å¿ƒï¼Œæ¯•ç«Ÿ Emacs å­¦ä¹ æˆæœ¬å®åœ¨æ˜¯å¤ªé«˜ï¼Œæˆ‘ä¸ªäººè§‰å¾—æ¯” Vim æœ‰è¿‡ä¹‹è€Œæ— ä¸åŠï¼Œç›¸å¯¹äº Vim çš„æ¨¡æ€æ¦‚å¿µï¼ŒEmacs é‡Œé¢é€šè¿‡ Ctrl ä¸ Meta é”®æ¥ä¸ä¸€èˆ¬æŒ‰é”®åŒºåˆ«ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸å¿…å¯¹æŸä¸ªç¼–è¾‘å™¨æœ‰è¿‡å¤šçš„åè§ï¼Œå®ƒä»¬éƒ½æ˜¯ç”Ÿäº§åŠ›çš„å·¥å…·è€Œå·²ï¼Œå†™å¥½ä»£ç æ‰æ˜¯é‡è¦çš„ã€‚</p>
<p>åˆå­¦è€…å¦‚æœè¦å°è¯• Emacs å»ºè®®å‚è€ƒã€ŠClojure For the Brave and Trueã€‹çš„ç¬¬äºŒç« <a href="http://www.braveclojure.com/basic-emacs/" target="_blank" rel="external">How to Use Emacs, an Excellent Clojure Editor</a>ï¼Œæˆ‘æœ€åˆçš„ç¯å¢ƒä¹Ÿæ˜¯ä»¿ç…§è¿™ä»½é…ç½®ï¼Œç„¶åä¸€ç‚¹ç‚¹æ ¹æ®è‡ªå·±çš„éœ€æ±‚å¢åŠ çš„ã€‚<a href="https://github.com/jiacai2050/conf/tree/master/.emacs.d" target="_blank" rel="external"> .emacs.d</a> æ˜¯æˆ‘çš„é…ç½®ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB26VWrchtmpuFjSZFqXXbHFpXa_!!581166664.png" alt="Emacs + Cider ç¼–ç¨‹ç¯å¢ƒ"></p>
<p>Emacs + Cider çš„ç»„åˆç›¸æ¯” Intellj ï¼‹ Cursive æœ€å¤§çš„ä¼˜åŠ¿å°±æ˜¯å¯¹å®çš„æ”¯æŒï¼ŒCider æä¾›äº†å¯¹å®å±•å¼€çš„å¿«æ·é”®ï¼Œä½†åœ¨ Cursive ä¸­æˆ‘æ²¡æ‰¾åˆ°ï¼Œä¸è¿‡å®ä¹Ÿæ˜¯æ¯”è¾ƒé«˜çº§çš„åŠŸèƒ½ï¼Œåˆå­¦è€…åº”è¯¥ç”¨ä¸åˆ°ï¼Œç­‰åˆ°ç”¨çš„å¤šçš„æ—¶å€™ï¼Œå°±å¯ä»¥æŠŠ Emacs ç¯å¢ƒç†Ÿæ‚‰èµ·æ¥äº†ã€‚</p>
<p>æœ€åè¿˜æ˜¯å»ºè®®åˆå­¦è€…ä¸è¦ç”¨ Emacsï¼Œå­¦ä¹ æˆæœ¬å¤ªå¤§ï¼Œè€Œä¸”å¾ˆå®¹æ˜“å°±æŠŠæ³¨æ„åŠ›è½¬ç§»åˆ°ç¼–è¾‘å™¨çš„å­¦ä¹ ä¸Šï¼Œç­‰åˆ°å­¦ä¹ äº†ä¸€æ®µæ—¶é—´ååœ¨å°è¯•ä¸è¿Ÿã€‚</p>
<h2 id="ç¬¬ä¸‰æ–¹ç±»åº“çš„é€‰æ‹©"><a href="#ç¬¬ä¸‰æ–¹ç±»åº“çš„é€‰æ‹©" class="headerlink" title="ç¬¬ä¸‰æ–¹ç±»åº“çš„é€‰æ‹©"></a>ç¬¬ä¸‰æ–¹ç±»åº“çš„é€‰æ‹©</h2><p>ç”±äº Clojure è¯­è¨€å®šä½å°±æ˜¯ä¸ªå¯„å®¿è¯­è¨€ï¼Œæ‰€ä»¥æ— è®ºæ˜¯ Web æ¡†æ¶ï¼Œè¿˜æ˜¯æ•°æ®åº“è¿æ¥æ± ï¼ŒClojure é‡Œéƒ½æœ‰ä¸ Java ç‰ˆç›¸å¯¹åº”åŒ…è£…ç±»åº“ï¼Œå¤§å®¶ä¸å¿…æ‹…å¿ƒè¦ä½¿ç”¨æŸä¸ªåŠŸèƒ½ï¼Œè€Œæ²¡æœ‰ç›¸åº”åº“çš„é—®é¢˜ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘å¿…é¡»è¯´æ˜ä¸€ç‚¹ï¼ŒClojure ç±»åº“çš„æ–‡æ¡£å¯¹åˆå­¦è€…ä¸å¤Ÿå‹å¥½ï¼Œæœ€èµ·ç å¯¹æˆ‘æ¥è¯´æ˜¯çš„ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä¸å¯èƒ½æ˜¯ä¸ªä¾‹ã€‚å°±æ‹¿æ‰“å°æ—¥å¿—æ¥è¯´ï¼ŒGithub ä¸Šæœä¸€ä¸‹ï¼Œåº”è¯¥èƒ½å¤Ÿæ‰¾åˆ°æœ€ idiomatic åº”è¯¥æ˜¯ <a href="https://github.com/ptaoussanis/timbre" target="_blank" rel="external">timbre</a>ï¼Œé€šè¯»å…¶ README åï¼Œæ€ä¹ˆé…ç½®è¿˜ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œç»§ç»­ Googleï¼Œæ‰¾åˆ°</p>
<ul>
<li><a href="https://github.com/palletops/log-config" target="_blank" rel="external">log-config</a></li>
<li><a href="http://www.filmspringopen.eu/blog-entry-blogentryid-447808.html" target="_blank" rel="external">Custom logging with timbre</a></li>
</ul>
<p>è¿™æ—¶æˆ‘æ‰èƒ½å¤ŸçŸ¥é“æ€ä¹ˆå»å®šåˆ¶ä»–çš„<code>appenders</code>ç­‰å„ç§å‚æ•°ï¼Œä¹Ÿå¯èƒ½æ˜¯æˆ‘ä¸ªäººçš„ç†è§£èƒ½åŠ›æ¯”è¾ƒå·®ï¼Œä¸è¿‡è¿™é‡Œä»‹ç»ä¸€ä¸ªéå¸¸å®ç”¨å¹¶ä¸”é€‚ç”¨äºæ‰€æœ‰è¯­è¨€çš„æ–¹æ³•ï¼Œé‚£å°±æ˜¯çœ‹è¿™ä¸ªé¡¹ç›®çš„testï¼Œtest é‡Œé¢æ ¸å¿ƒçš„åŠŸèƒ½è‚¯å®šä¼šæ¶‰åŠåˆ°ï¼Œç„¶åç…§çŒ«ç”»è™å°±å¯ä»¥äº†ã€‚</p>
<p>å…¶å®ï¼Œåœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹ç±»åº“ä¹‹ä½™ï¼Œå¤šå»äº†è§£å…¶å®ç°ï¼Œä»£ç ä» Github ä¸Š Clone ä¸‹æ¥ï¼Œæ…¢æ…¢çœ‹ï¼ŒClojure é‡Œé¢æä¾›äº†å¾ˆå¤šå®ç”¨çš„å°æ–¹æ³•ï¼Œåƒ<code>partition</code>, <code>juxt</code>, <code>group-by</code>ç­‰ç­‰ä¸ä¸€è€Œè¶³ï¼Œæœ€å¥½å¸¦ç€ issue é‡Œé¢çš„é—®é¢˜å»çœ‹ä»£ç ï¼Œè¯´ä¸å®šä½ å°±ä»ä½¿ç”¨è€…å˜æˆäº†å¼€å‘è€…å‘¢ï¼Œæˆ‘ç¬¬ä¸€ä¸ªå°è¯•ç»™äº† <a href="https://github.com/dakrone/clj-http/pull/341" target="_blank" rel="external">http-clj</a>ã€‚</p>
<h2 id="è°ƒè¯•-debug"><a href="#è°ƒè¯•-debug" class="headerlink" title="è°ƒè¯• debug"></a>è°ƒè¯• debug</h2><p>ä»£ç ä¸€æ¬¡å†™å¯¹çš„å‡ ç‡åŸºæœ¬ä¸º0ï¼ŒæŒæ¡ä¸€å®šçš„æµ‹è¯•æŠ€èƒ½æ˜¯æ¯ä¸ªåŒå­¦çš„åŸºæœ¬åŠŸï¼Œä¸‹é¢ç®€å•ä»‹ç»ä¸‹ Clojureé‡Œé¢å¸¸ç”¨çš„è°ƒè¯•æ–¹æ³•ã€‚</p>
<h3 id="println"><a href="#println" class="headerlink" title="println"></a>println</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(let [headers         (:headers ring-request)</div><div class="line">      header-names    (keys headers)</div><div class="line">      ;; The following underscore is a convention for &quot;unused variable&quot;</div><div class="line">      _               (println &quot;Headers:&quot; header-names)  ;; &lt;-- this</div><div class="line">      header-keywords (map keyword header-names)]</div><div class="line">;; etc</div><div class="line">)</div></pre></td></tr></table></figure>
<p>æœ€ç®€å•å®ç”¨çš„ <code>println</code>ï¼Œä½†é—®é¢˜æ˜¯æˆ‘ä»¬éœ€è¦æŠŠè¦ç›‘æ§çš„å˜é‡æ‰“ä¸¤æ¬¡ï¼Œè¿™åœ¨å˜é‡æ¯”è¾ƒå¤šçš„æ—¶å€™æ¯”è¾ƒéº»çƒ¦ï¼Œå¯ä»¥é‡‡ç”¨ä¸‹é¢çš„ spyscope</p>
<h3 id="spyscope"><a href="#spyscope" class="headerlink" title="spyscope"></a>spyscope</h3><p><a href="https://github.com/dgrnbrg/spyscope" target="_blank" rel="external">Spyscope</a> åº“å¯ä»¥è§£å†³ä¸Š<code>println</code>çš„é—®é¢˜ï¼Œä»–æä¾›ä¸‰ä¸ª<code>reader tags</code>æ¥ç›‘æ§å˜é‡ï¼Œç”¨æ³•æä¸ºç®€å•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">(let [headers         (:headers ring-request)</div><div class="line">      header-names    #spy/p (keys headers)       ;; &lt;-- print out what header-names is</div><div class="line">      header-keywords (map keyword header-names)]</div><div class="line">;; etc</div><div class="line">)</div></pre></td></tr></table></figure></p>
<h3 id="debux"><a href="#debux" class="headerlink" title="debux"></a><a href="https://github.com/philoskim/debux" target="_blank" rel="external">debux</a></h3><p>ä¸€ä¸ªéå¸¸å¥½ç”¨çš„æµ‹è¯•åº“ï¼Œå¯ä»¥æŠŠåµŒå¥—å‡½æ•°è°ƒç”¨çš„æ¯ä¸€æ­¥æ‰“å°å‡ºæ¥ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(dbg (-&gt; &quot;a b c d&quot;</div><div class="line">         .toUpperCase</div><div class="line">         (.replace &quot;A&quot; &quot;X&quot;)</div><div class="line">         (.split &quot; &quot;)</div><div class="line">         first))</div><div class="line">;=&gt; &quot;X&quot;</div></pre></td></tr></table></figure>
<p>REPL ä¸­ä¼šæ‰“å°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">dbg: (-&gt; &quot;a b c d&quot; .toUpperCase (.replace &quot;A&quot; &quot;X&quot;) (.split &quot; &quot;) first)</div><div class="line">  &quot;a b c d&quot; =&gt;</div><div class="line">    &quot;a b c d&quot;</div><div class="line">  .toUpperCase =&gt;</div><div class="line">    &quot;A B C D&quot;</div><div class="line">  (.replace &quot;A&quot; &quot;X&quot;) =&gt;</div><div class="line">    &quot;X B C D&quot;</div><div class="line">  (.split &quot; &quot;) =&gt;</div><div class="line">    [&quot;X&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;]</div><div class="line">  first =&gt;</div><div class="line">    &quot;X&quot;</div><div class="line">=&gt;</div><div class="line">  &quot;X&quot;</div></pre></td></tr></table></figure></p>
<h3 id="tools-trace"><a href="#tools-trace" class="headerlink" title="tools.trace"></a>tools.trace</h3><p>ä¸Šé¢ä»‹ç»çš„æ–¹æ³•éƒ½éœ€è¦ä¿®æ”¹æºä»£ç ï¼Œæœ‰æ²¡æœ‰ä¸ç”¨ä¿®æ”¹çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œ<a href="https://github.com/clojure/tools.trace" target="_blank" rel="external">clojure.tools.trace</a>ï¼ŒGithub ä¸Šçš„ README æ¯”è¾ƒè¯¦ç»†ï¼Œå¤§å®¶å¯ä»¥å¯ä»¥å»äº†è§£ï¼Œæˆ‘ç›®å‰åœ¨è‡ªå·±çš„é¡¹ç›®é‡Œé¢è¿˜æ²¡æœ‰é‡‡ç”¨è¿‡è¿™ä¸ªæ–¹æ³•ã€‚</p>
<h3 id="Intellj-Debug"><a href="#Intellj-Debug" class="headerlink" title="Intellj Debug"></a>Intellj Debug</h3><p>å€ŸåŠ©äº IDE çš„ä¼˜åŠ¿ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“æ–­ç‚¹ï¼Œä¸€æ­¥ä¸€æ­¥è°ƒè¯•ï¼Œä½†æ˜¯ Cursive å¯¹å®çš„æ”¯æŒæ¯”è¾ƒæœ‰é™ï¼Œç›®å‰å‡ºæ¥æŠŠå®å±•å¼€å¤–ï¼Œæ²¡æ‰¾åˆ°å¥½çš„è°ƒè¯•å®çš„å¥½æ–¹æ³•ã€‚<br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2HEWIcb4npuFjSZFmXXXl4FXa_!!581166664.png_620x10000.jpg" alt="Intellj debug"></p>
<h3 id="nrepl"><a href="#nrepl" class="headerlink" title="nrepl"></a>nrepl</h3><p>Clojure çš„ REPL å¯ä»¥è¿æ¥åˆ°è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„è¿›ç¨‹ä¸­ï¼Œç›´æ¥å¯¹è¿›ç¨‹ä¸­çš„å‡½æ•°æˆ–å˜é‡è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ˜¯éå¸¸ä¾¿åˆ©çš„ï¼Œå¯¹äºå¾ˆå¤šè¿è¡Œæ—¶çš„é”™è¯¯å¯ä»¥é‡‡ç”¨è¿™ç§æ–¹å¼è§£å†³ï¼ŒEmacs ä¸ Intellj é‡Œé¢éƒ½æä¾›äº†è¿æ¥è¿œç¨‹ REPL server çš„æ–¹å¼ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2KcGIcbBmpuFjSZFuXXaG_XXa_!!581166664.png" alt="Intellj è¿æ¥è¿œç¨‹ REPL"></p>
<p>Emacs é‡Œé¢æ˜¯ï¼š<code>M-x cider-connect</code><br>lein é‡Œé¢æ˜¯ï¼š<code>lein repl :connect 192.168.50.101:4343</code></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>Clojure åœ¨å›½å†…ç®—æ˜¯éå¸¸éå¸¸å°ä¼—ï¼Œä»‹ç» Clojure å¼€å‘çš„æ–‡ç« ä¹Ÿæ¯”è¾ƒå°‘ï¼Œä»…æœ‰çš„ä¹Ÿåªæ˜¯ä¸€äº›ç®€å•çš„è¯­æ³•ä»‹ç»æˆ–è€…æ¦‚å¿µé˜è¿°ã€‚<br>æˆ‘ä»<a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">è¯»å®Œ SICP</a> åå°±ä¸€ç›´æƒ³æŠŠ Lisp ä½œä¸ºæˆ‘çš„ä¸»åŠ›è¯­è¨€ï¼Œæ­£å¥½è¶ç€è¿™æ¬¡æœºä¼šï¼Œå¸Œæœ›èƒ½å¤Ÿå¼¥è¡¥å›½å†… Clojure æ–‡æ¡£è¾ƒåŒ®ä¹çš„æƒ…å†µï¼Œä¹‹åæˆ‘ä¼šé™†é™†ç»­ç»­æŠŠè‡ªå·±ä½¿ç”¨ Clojure å¼€å‘çš„ç»å†åˆ†äº«å‡ºæ¥ï¼Œä¾›åæ¥çš„ Clojurians å‚è€ƒï¼Œè¿™ä¹Ÿç®—æ˜¯ 17 å¹´çš„ç¬¬ä¸€ä¸ªå°ç›®æ ‡å§ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2OEGwcmVmpuFjSZFFXXcZApXa_!!581166664.png" alt="å…³äº Clojure çš„ RSS æ”¶é›† "></p>
<p>ä¸Šé¢æ˜¯æˆ‘ç›®å‰æ”¶é›†å…³äº Clojure çš„ RSSï¼Œå¤§å®¶å¯ä»¥æ ¹æ®æ ‡é¢˜å»æœç´¢ï¼Œçƒ­çˆ± Clojure ï¼Œä»ä¸åšä¼¸æ‰‹å…šå¼€å§‹ã€‚ğŸ˜Š</p>
<h2 id="æ‰©å±•é˜…è¯»"><a href="#æ‰©å±•é˜…è¯»" class="headerlink" title="æ‰©å±•é˜…è¯»"></a>æ‰©å±•é˜…è¯»</h2><ul>
<li><a href="https://www.cis.upenn.edu/~matuszek/Concise%20Guides/Concise%20Clojure.html#basic_types" target="_blank" rel="external">A Concise Guide to Clojure</a></li>
<li><a href="http://owenrh.me.uk/blog/2015/08/24/" target="_blank" rel="external">The Beauty of Clojure</a></li>
<li><a href="https://www.infoq.com/articles/in-depth-look-clojure-collections" target="_blank" rel="external">An In-Depth Look at Clojure Collections</a></li>
<li><a href="https://www.youtube.com/channel/UCaLlzGqiPE2QRj6sSOawJRg" target="_blank" rel="external">Clojure TV on YouTube</a> é‡Œé¢æœ‰å¾ˆå¤šå¤§ç‰›åˆ†äº« Clojure å®æˆ˜ï¼Œè¿˜èƒ½é”»ç‚¼è‹±æ–‡</li>
<li><a href="http://blog.fnil.net/blog/categories/clojure/" target="_blank" rel="external">LeanCloud å·¥ç¨‹å¸ˆåº„æ™“ä¸¹ä¸ªäººåšå®¢</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Clojure â€”â€” æ–°ä¸–çºªçš„ Lisp æ–¹è¨€ï¼Œç›¸ä¿¡å¤§å¤šæ•°åŒå­¦å¤šå¤šå°‘å°‘éƒ½å¬è¿‡ï¼Œæ¯•ç«Ÿæœ‰ä¸ªæ€æ‰‹çº§åº”ç”¨ &lt;a href=&quot;http://storm.apache.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Storm&lt;/a&gt;ï¼Œä½†æ˜¯çœŸæ­£å»å†™ Cloju
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Clojure" scheme="http://liujiacai.net/tags/Clojure/"/>
    
  </entry>
  
  <entry>
    <title>éŸ©å›½æµå·å²›4æ—¥æ¸¸</title>
    <link href="http://liujiacai.net/blog/2016/12/07/hello-jeju/"/>
    <id>http://liujiacai.net/blog/2016/12/07/hello-jeju/</id>
    <published>2016-12-07T13:51:40.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…¬å¸å¹´åº• outingï¼Œæµå·å²› 4 æ—¥æ¸¸ï¼ˆ12/2-12/5ï¼‰ã€‚æµå·å²›å¯¹å›½äººä¸éœ€è¦ç­¾è¯ï¼Œä»æ­å·åé£æœºå»ä¸åˆ°2ä¸ªå°æ—¶ï¼Œç»å¯¹æ˜¯æ—…æ¸¸èƒœåœ°ã€‚æµå·å²›åœ¨éŸ©å›½ç®—ä¹¡ä¸‹ï¼Œä½†å…¶ä¾é æ—…æ¸¸ä¸šï¼Œç¡¬ç”Ÿç”Ÿçš„æŠŠ GDP å¸¦ä¸Šå»äº†ï¼Œå¬å¯¼æ¸¸è¯´ä¸€æ´—ç¢—å·¥æœˆå·¥èµ„éƒ½èƒ½è¾¾åˆ°ä¸€ä¸‡äºŒï¼ŒåŠ ä¸ªç­ä¸€ä¸‡å…«æ²¡é—®é¢˜ã€‚æ²¡å»è¿‡çš„åŒå­¦æœ‰æœºä¼šä¸€å®šè¦å»ä½“éªŒä¸€æ¬¡ï¼Œè¿™é‡Œä¸ä»…ä»…æœ‰æ¬§å·´ã€åŒ–å¦†å“ï¼Œè‡ªç„¶é£æ™¯æ›´æ˜¯è®©äººæµè¿å¿˜è¿”ï¼ŒPM 2.5 åŸºæœ¬éƒ½åœ¨ 20 ä»¥å†…ï¼Œä½ è¿˜ç­‰ä»€ä¹ˆå‘¢ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« é¦–å…ˆä¾æ¬¡ä»‹ç»æˆ‘è¿™æ¬¡è¡Œç¨‹ä¸­å»è¿‡çš„æ™¯ç‚¹ï¼Œæ™’ä¸€æ™’ç…§ç‰‡ï¼›ç„¶åæ ¹æ®æˆ‘è‡ªèº«ç»å†ï¼Œæ€»ç»“ä¸€ä»½æ”»ç•¥ï¼Œå…±ä»Šåå»çš„åŒå­¦å‚è€ƒã€‚</p>
<h2 id="ç¬¬ä¸€å¤©"><a href="#ç¬¬ä¸€å¤©" class="headerlink" title="ç¬¬ä¸€å¤©"></a>ç¬¬ä¸€å¤©</h2><p>æˆ‘ä»¬æ˜¯9ç‚¹çš„é£æœºï¼Œåˆ°æµå·å²›æ˜¯11ï¼š40ï¼Œæµå·å²›æ—¶åŒºæ˜¯ä¸œä¹åŒºï¼Œæ‰€ä»¥æ¯”åŒ—äº¬æ—¶é—´å¿«ä¸€ä¸ªå°æ—¶ã€‚é£æœºåˆ°æµå·å²›åæ²¡æœ‰ç«‹åˆ»ç€é™†ï¼Œè€Œæ˜¯å›´ç€å²›è½¬äº†ä¸€åœˆï¼Œä¼°è®¡æ˜¯èˆªç©ºç®¡åˆ¶çš„ç¼˜æ•…ï¼Œæˆ‘æ­£å¥½ä¹Ÿè¶è¿™ä¸ªæœºä¼šçª¥è§†å¥¹çš„å…¨è²Œï¼š</p>
<blockquote>
<p>æµå·å²›æ˜¯ç”±ç«å±±å–·å‘è€Œå½¢æˆï¼Œæ˜¯å…¸å‹çš„ç«å±±å²›ã€‚æœ€é«˜çš„å±±æ˜¯æ±‰æ‹¿å±±ï¼Œæµ·æ‹”1950ç±³ï¼Œä¹Ÿæ˜¯éŸ©å›½æœ€é«˜å³°ã€‚</p>
</blockquote>
<p>åœ¨æœºåœºä¸Šçœ‹åˆ°ä¸€ä¸ªå¤§å¤§çš„å‡¹å‘ï¼Œæ²¡é”™é‚£å°±æ˜¯ä¹‹å‰çš„ç«å±±å£ã€‚è¯­æ–‡å­¦çš„ä¸å¥½ï¼Œé™¤äº†ç¾ä¸çŸ¥é“æ€ä¹ˆå½¢å®¹è¿™é‡Œçš„é£æ™¯äº†ã€‚å¤§å®¶è‡ªå·±çœ‹å›¾å§ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2NV3hXJBopuFjSZPcXXc9EpXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2RCskXH4npuFjSZFmXXXl4FXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2UUAjXSFmpuFjSZFrXXayOXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2h9GDXHFkpuFjy1XcXXclapXa_!!581166664.png_620x10000.jpg" alt=""></p>
<p>ä¸‹äº†é£æœºåï¼Œåä¸Šå¤§å·´è½¦ï¼Œå»åƒåˆé¥­ï¼Œæ²¡é”™ï¼Œæ˜¯æ³¡èœã€‚é•¿ç›¸å’Œè‡ªå®¶çš„é…¸ç™½èœå·®ä¸å¤šï¼Œè²Œä¼¼å£æ„Ÿå¥½ä¸€ç‚¹ç‚¹ï¼ˆå¯èƒ½æ˜¯æˆ‘ä»¬é¢„ç®—åå°‘ï¼Œæ‰4000éŸ©å…ƒï¼Œæ‰€ä»¥å¤§å®¶æ™®ééƒ½å–Šæ²¡åƒé¥±ğŸ˜³ï¼‰ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2M69AXR0lpuFjSszdXXcdxFXa_!!581166664.jpg_620x10000.jpg" alt="éŸ©å›½æ³¡èœ"></p>
<h3 id="å°äººå›½ä¸»é¢˜å…¬å›­"><a href="#å°äººå›½ä¸»é¢˜å…¬å›­" class="headerlink" title="å°äººå›½ä¸»é¢˜å…¬å›­"></a>å°äººå›½ä¸»é¢˜å…¬å›­</h3><p>åƒå®Œå°±å¼€å§‹æˆ‘ä»¬ç¬¬ä¸€ä¸ªæ™¯ç‚¹â€”â€”å°äººå›½ä¸»é¢˜å…¬å›­ï¼Œå…¶å®å°±æ˜¯æŠŠå…¨ä¸–ç•Œçš„æœ‰åæ™¯ç‚¹ç¼©å°é›†åˆåˆ°ä¸€èµ·ï¼Œåæ¥å’ŒåŒäº‹èŠï¼Œåº”è¯¥å’Œæ·±åœ³çš„ä¸–ç•Œä¹‹çª—å·®ä¸å¤šã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2JL.jXOlnpuFjSZFgXXbi7FXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2UAZjXNhmpuFjSZFyXXcLdFXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2NrghXJBopuFjSZPcXXc9EpXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2eaoiXNtmpuFjSZFqXXbHFpXa_!!581166664.jpg" alt=""></p>
<h3 id="æ³°è¿ªç†Šåšç‰©é¦†"><a href="#æ³°è¿ªç†Šåšç‰©é¦†" class="headerlink" title="æ³°è¿ªç†Šåšç‰©é¦†"></a>æ³°è¿ªç†Šåšç‰©é¦†</h3><p>ç¬¬äºŒä¸ªæ™¯ç‚¹æ˜¯æ³°è¿ªç†Šåšç‰©é¦†ï¼Œå°å­©å­åº”è¯¥æŒºå–œæ¬¢çš„ï¼Œå¯æƒœæˆ‘å·²ç»æ²¡ç«¥å¿ƒäº†ï¼Œè§‰å¾—ä¸€èˆ¬èˆ¬ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2QAOCXG8lpuFjy0FpXXaGrpXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2KgBxX9VmpuFjSZFFXXcZApXa_!!581166664.jpg_620x10000.jpg" alt="å¥¥å·´é©¬"></p>
<h3 id="ä¹±æ‰“ç§€"><a href="#ä¹±æ‰“ç§€" class="headerlink" title="ä¹±æ‰“ç§€"></a>ä¹±æ‰“ç§€</h3><p>è¿™ä¸ªçœŸæ˜¯ä¸é”™ï¼Œä¸€ä¸ªå¤šå°æ—¶çš„æ—¶é—´ï¼Œé‚£äº”ä¸ªäººå‡­å€Ÿè‡ªå·±çš„è‚¢ä½“åŠ¨ä½œï¼Œè®©å¤§å®¶éƒ½çœ‹çš„å¾ˆå°½å…´ï¼Œè²Œä¼¼è¿™ä¸ªè¡¨æ¼”è¿˜ä¸Šè¿‡<a href="http://www.mgtv.com/b/18/2951177.html" target="_blank" rel="external">å¤©å¤©å‘ä¸Š</a>ï¼Œå¼ºçƒˆæ¨èå¤§å®¶å»çœ‹ï¼Œç°åœºä¸è®©æ‹ç…§ï¼Œæˆ‘å·æ‹äº†å‡ å¼ ï¼Œä¾›å¤§å®¶æ¬£èµã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2GoQkXHxmpuFjSZJiXXXauVXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2eeKCXHRkpuFjSspmXXc.9XXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<h3 id="ç‚¸é¸¡ä¸å•¤é…’"><a href="#ç‚¸é¸¡ä¸å•¤é…’" class="headerlink" title="ç‚¸é¸¡ä¸å•¤é…’"></a>ç‚¸é¸¡ä¸å•¤é…’</h3><p>çœ‹å®Œä¹±æ‰“ç§€ï¼Œå°±ç›´æ¥å›é…’åº—äº†ï¼Œæˆ‘ä»¬å…¥ä½çš„æ˜¯ç¦»æµ·ä¸è¿œçš„å¤ªå¹³æ´‹é…’åº—ï¼Œæ€»ä½“è¿˜æ˜¯ä¸é”™çš„ã€‚ç”±äºå½“å¤©å¤§å®¶æ™®éæ²¡åƒé¥±ï¼Œæ‰€ä»¥å½“å¤©æ™šä¸Šå¤§å®¶å°±å‡ºæ¥è§…é£Ÿï¼Œä¸€å¤§ç¾¤ä¸­å›½äººæ‹¿ç€åœ°å›¾å¯¼èˆªï¼Œæ‰¾äº†åŠå¤©æœ€åæ‰¾äº†ä¸€å®¶ç‚¸é¸¡åº—ï¼Œå¼€åƒï¼</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2Dh.kXOBnpuFjSZFzXXaSrpXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<h2 id="ç¬¬äºŒå¤©"><a href="#ç¬¬äºŒå¤©" class="headerlink" title="ç¬¬äºŒå¤©"></a>ç¬¬äºŒå¤©</h2><h3 id="æ—©å®‰"><a href="#æ—©å®‰" class="headerlink" title="æ—©å®‰"></a>æ—©å®‰</h3><p>é…’åº—ç¦»æµ·è¾¹æ¯”è¾ƒè¿‘ï¼Œå¤§æ¸…æ—©æ‰“å¼€çª—å¸˜å°±å¯ä»¥çœ‹åˆ°æ™¨æ›¦æ˜ åœ¨æµ·é¢ä¸Šï¼Œæƒ¬æ„çš„å¾ˆã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB27yokXHxmpuFjSZJiXXXauVXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB24FskXS0mpuFjSZPiXXbssVXa_!!581166664.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2VUcjXOBnpuFjSZFzXXaSrpXa_!!581166664.png_620x10000.jpg" alt=""></p>
<h3 id="æ¶‰åœ°å¯æ”¯"><a href="#æ¶‰åœ°å¯æ”¯" class="headerlink" title="æ¶‰åœ°å¯æ”¯"></a>æ¶‰åœ°å¯æ”¯</h3><p>é…’åº—åƒå®Œæ—©é¤ï¼Œæˆ‘ä»¬å°±å‡ºå‘å»ä»Šå¤©çš„ç¬¬ä¸€ç«™äº†â€”â€”æ¶‰åœ°å¯æ”¯ã€‚</p>
<blockquote>
<p>â€œæ¶‰åœ°â€æ˜¯è¿™ä¸€åœ°åŒºå¤ä»£æ—¶çš„åç§°ï¼Œâ€œå¯æ”¯â€æ˜¯æµå·å²›æ–¹è¨€ï¼Œæ„æ€æ˜¯å‘å¤–çªå‡ºçš„åœ°å½¢ã€‚æ¶‰åœ°å¯æ”¯æ‰€åœ¨çš„æµ·å²¸æ‚¬å´–ä¸Šæ˜¯ä¸€ç‰‡å®½é˜”çš„è‰åœ°ï¼Œè¿™é‡Œä¸€æ£µæ ‘ä¹Ÿçœ‹ä¸åˆ°ï¼Œæµ·å²¸ä¸Šè€¸ç«‹ç€ä¸€å—å«ä»™çŸ³çš„å²©çŸ³ã€‚</p>
</blockquote>
<p>è¿™é‡Œç¡®å®é£æ™¯æ—–æ—ï¼Œä½†æ˜¯å¯¼æ¸¸ä¸çŸ¥é“æ€ä¹ˆæƒ³çš„ï¼Œå°±ç»™äº†æˆ‘ä»¬åŠä¸ªå°æ—¶ï¼Œç¯å¡”éƒ½æ²¡èµ°çš„å°±è¦ç¦»å¼€äº†ï¼Œå¯æƒœï¼Œä¸‹æ¬¡å†æ¥è¿™é‡Œä¸€å®šå¥½å¥½æ¬£èµã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2c.5DXMxlpuFjy0FoXXa.lXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2dpwjXHJmpuFjSZFwXXaE4VXa_!!581166664.jpg" alt=""></p>
<h3 id="åŸå±±æ—¥å‡ºå³°"><a href="#åŸå±±æ—¥å‡ºå³°" class="headerlink" title="åŸå±±æ—¥å‡ºå³°"></a>åŸå±±æ—¥å‡ºå³°</h3><p>è¡Œç¨‹ä¸­ç¬¬ä¸€åº§å±±ï¼Œè™½ç„¶æµ·æ‹”åªæœ‰182ç±³ï¼Œä½†åœ¨å±±é¡¶ä¾ç„¶å¯ä»¥ä¿¯ç°å¤§åœ°ï¼Œåœ¨è¿™é‡Œå¯ä»¥é‡åˆ°æµ·å¥³æ½œæ°´è¡¨æ¼”ï¼Œå¯æƒœæˆ‘ä»¬æ—¶é—´æœ‰é™ï¼Œæ‰€ä»¥ä¹Ÿæ“¦è‚©è€Œè¿‡ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2AaolXNlmpuFjSZPfXXc9iXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2ZkKBXS0jpuFjy0FlXXc0bpXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2lfoiXItnpuFjSZFvXXbcTpXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2NV8xX0FopuFjSZFHXXbSlXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2N31BXHplpuFjSspiXXcdfFXa_!!581166664.jpg" alt=""></p>
<h4 id="æµ·å¥³æ¥å†"><a href="#æµ·å¥³æ¥å†" class="headerlink" title="æµ·å¥³æ¥å†"></a>æµ·å¥³æ¥å†</h4><blockquote>
<p>æµå·å²›æ˜¯ä¸€ä¸ªè¿œç¦»é™†åœ°çš„å­¤å²›ï¼Œå¾ˆä¹…ä»¥å‰ï¼Œä¸‹æµ·æ•ææ˜¯å½“åœ°ç”Ÿæ´»çš„ä¸»è¦æ¥æºã€‚å†å²ä¸Šï¼Œæµå·å²›çš„æµ·å¥³å¯è¿½æº¯åˆ°6ä¸–çºªã€‚å½“æ—¶å²›ä¸Šçš„ä¹ ä¿—æ˜¯ç”·ä¸»å†…ï¼Œå¥³ä¸»å¤–ï¼Œäºæ˜¯æ½œæ°´å°±æˆäº†å¥³äººä»¬ä»£ä»£ç›¸ä¼ çš„ä¸€é¡¹é‡è¦çš„ç”Ÿå­˜æœ¬é¢†ï¼Œâ€œæµ·å¥³â€è¿™ä¸ªç§°å‘¼ä¹Ÿç”±æ­¤è€Œç”Ÿã€‚</p>
</blockquote>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2qGUjXNhmpuFjSZFyXXcLdFXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<h3 id="å±±å›ä¸ç¦»"><a href="#å±±å›ä¸ç¦»" class="headerlink" title="å±±å›ä¸ç¦»"></a>å±±å›ä¸ç¦»</h3><p>å¥½æµªæ¼«çš„åå­—ï¼Œè™½ç„¶åªæ˜¯ä¸ªç«å±±å£ï¼Œä½†æˆ‘è§‰å¾—å¤§å¤šäººæåˆ°è¿™ä¸ªåå­—åº”è¯¥æ˜¯æƒ…ä¾£ç›¸æ‹¥æ®‰æƒ…çš„ç”»é¢ï¼Œç±»ä¼¼ä¸­å›½çš„æ¢å±±ä¼¯ä¸ç¥è‹±å°çš„æ•…äº‹ã€‚æµå·å²›ä¸Šåˆ†å¸ƒç€360å¤šå¤„ç«å±±ï¼Œå±±å›ä¸ç¦»æ˜¯å…¶ä¸­æœ€ç‰¹åˆ«çš„ä¸€å¤„ã€‚å› ä¸ºå…¶ä½™ç«å±±åœ¨çˆ†å‘åéƒ½è¢«å²©æµ†è¦†ç›–ï¼Œå”¯ç‹¬å±±å›ä¸ç¦»åœ¨å–·å‘æ—¶ï¼Œæ²¡æœ‰è¢«è¦†ç›–ï¼Œå½¢æˆäº†ç°åœ¨çš„æ´å£ï¼Œç§°ä¸ºâ€œåœ°å¹³ç«å±±å£â€ã€‚</p>
<p>è¿™é‡Œè®©äººå°è±¡æœ€æ·±çš„æ€•æ˜¯é‚£ä¸€æœ›æ— é™…çš„é‡‘è‰²èŠ¦è‹‡ï¼Œæƒ…ä¾£ä»¬ä¸€å®šä¸è¦æ”¾è¿‡è¿™ä¸ªåœ°æ–¹ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œæ‹äº†å”¯ä¸€çš„åˆå½±ï¼Œä¸å®¹æ˜“ï¼Œå†¥å†¥ä¹‹ä¸­æ­£å¥½æ˜ è¡¬äº†å±±å›ä¸ç¦»ğŸ˜Šã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2BMWBXMRkpuFjy1zeXXc.6FXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB27jezXRNkpuFjy0FaXXbRCVXa_!!581166664.jpg_620x10000.jpg" alt="é€‰æ™¯æ²¡é€‰å¥½ï¼Œæœ‰äº›é€†å…‰"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2R8JvX9VmpuFjSZFFXXcZApXa_!!581166664.jpg" alt="è‡ªå·±æ‹çš„å®åœ¨ä¸è¡Œï¼Œä»ç½‘ä¸Šæ‰¾ä¸€ä¸ª"></p>
<h3 id="å…ç¨åº—"><a href="#å…ç¨åº—" class="headerlink" title="å…ç¨åº—"></a>å…ç¨åº—</h3><p>æ¥æµå·å²›ä¸ä¹°å‡ ç‰‡é¢è†œçœŸä¸å¥½æ„æ€è¯´æ¥è¿‡ï¼Œæˆ‘ä»¬ä¾æ¬¡å»äº†ä¹å¤©ä¸æ–°ç½—ã€‚æ•´ä¸ªå…ç¨åº—éƒ½æ˜¯ä¹°ä¹°ä¹°çš„ä¸­å›½äººï¼Œå¥½ææ€–çš„ï¼Œç›¸ä¿¡åŒè¡Œçš„å¤§å¤šæ•°å¥³ç”Ÿä»¬éƒ½éå¸¸æœŸå¾…è¿™ä¸ªåœ°æ–¹ï¼Œæˆ‘å®åœ¨æ˜¯ä¸æ„Ÿå†’ï¼Œç»™å³å°†ç»“å©šçš„åŒå­¦ä¹°äº†ä¸¤ä»¶åŒ–å¦†å“åï¼Œå’Œä¸¤ä¸ªå°ä¼™ä¼´å»å‘¨è¾¹æ‰¾äº†ä¸ªåº—å–èŒ¶å»äº†ã€‚</p>
<h3 id="ICEå†°é›•é¦†-3Dè§†è§‰æ‘„å½±åŒº"><a href="#ICEå†°é›•é¦†-3Dè§†è§‰æ‘„å½±åŒº" class="headerlink" title="ICEå†°é›•é¦†+3Dè§†è§‰æ‘„å½±åŒº"></a>ICEå†°é›•é¦†+3Dè§†è§‰æ‘„å½±åŒº</h3><p>å†°é›•é¦†åœ¨ä¸€æ¥¼ï¼Œæ˜¯çœŸçš„å¾ˆå†·ï¼Œæˆ‘å—ä¸äº†å¾ˆå¿«çš„å°±å‡ºæ¥äº†ï¼Œçœ‹åˆ°åŒè¡Œçš„å°ä¼™ä¼´ç©çš„è¿˜æŒºå¼€å¿ƒçš„ã€‚é¡¾åæ€ä¹‰ï¼Œ3Dè§†è§‰æ‘„å½±åŒºå°±æ˜¯è®©å¤§å®¶æ‹ç…§çš„åœ°æ–¹ï¼Œè¿˜æ˜¯æŒºæœ‰æ„æ€çš„ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2k34xX5lnpuFjSZFgXXbi7FXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2Vs2CXM0kpuFjSspdXXX4YXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2RF8yX00opuFjSZFxXXaDNVXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<h3 id="æ±—è’¸å¹•"><a href="#æ±—è’¸å¹•" class="headerlink" title="æ±—è’¸å¹•"></a>æ±—è’¸å¹•</h3><p>ä»Šå¤©æœ€åä¸€ä¸ªé¡¹ç›®â€”â€”æ±—è’¸å¹•ã€‚å…¶å®å’Œæ´—æ¸©æ³‰å·®ä¸å¤šï¼Œæ´—å®Œè’¸ã€‚æœ€é«˜çš„å¥½åƒ70å¤šåº¦ï¼Œæ²¡æ•¢å»ã€‚è¿™é‡Œæœ¬åœ°äººä¸å°‘ï¼Œå¤§å¤šéƒ½æ…µæ‡’çš„èººç€ï¼Œå–ç€é¥®æ–™ï¼Œçœ‹ç€éŸ©å‰§ï¼Œæ‰¯ç€å®¶å¸¸ã€‚ç¾ä¸­ä¸è¶³çš„æ˜¯è¿™é‡Œåœç•™æ—¶é—´å¤ªå¤šï¼Œæ²¡è’¸å¤Ÿå°±åˆèµ°äº†ã€‚è¿™é‡Œå°±æ²¡ç…§ç‰‡äº†ã€‚</p>
<h2 id="ç¬¬ä¸‰å¤©"><a href="#ç¬¬ä¸‰å¤©" class="headerlink" title="ç¬¬ä¸‰å¤©"></a>ç¬¬ä¸‰å¤©</h2><h3 id="æ™¨è·‘"><a href="#æ™¨è·‘" class="headerlink" title="æ™¨è·‘"></a>æ™¨è·‘</h3><p>ç”±äºæ˜¨å¤©æ—©ä¸Šçœ‹åˆ°é‚£ä¹ˆç¾çš„æ™¨æ›¦ï¼Œå°±å†³å®šä»Šå¤©è¦æ—©èµ·æ™¨è·‘ï¼Œå¯æƒœçš„æ˜¯é™¤äº†ç¬¬ä¸€å¤©æ˜¯æ™´å¤©ï¼Œåœ¨æµå·å²›çš„å…¶ä»–å¤©éƒ½æ˜¯é˜´å¤©ï¼Œæ²¡èƒ½çœ‹åˆ°æ—¥å‡ºã€‚ä½†æ¸…æ™¨çš„é£æ™¯ï¼Œæ²¡å› é˜´å¤©è€Œä¸æ¯«å‡åŠï¼Œè€Œæ˜¯å¦ä¸€ç§ç¥éŸµã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2gjIjXSFmpuFjSZFrXXayOXXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2R5kiXUhnpuFjSZFPXXb_4XXa_!!581166664.jpg_620x10000.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2hCJzX5pnpuFjSZFkXXc4ZpXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2AV_GXSBjpuFjSsplXXa5MVXa_!!581166664.jpg" alt=""><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB24XaBXHtlpuFjSspfXXXLUpXa_!!581166664.png_620x10000.jpg" alt=""></p>
<h3 id="æ±‰æ‹¿å±±"><a href="#æ±‰æ‹¿å±±" class="headerlink" title="æ±‰æ‹¿å±±"></a>æ±‰æ‹¿å±±</h3><p>ä»Šå¤©æ˜¯è‡ªç”±è¡Œï¼Œç»ˆäºåˆ°æˆ‘æœ€æœŸå¾…çš„é¡¹ç›®äº†â€”â€”æ¨ªç©¿æ±‰æ‹¿å±±ã€‚å‰ä¸€å¤©æ™šä¸Šå°±æŸ¥å¥½äº†è·¯çº¿ï¼Œæ€•æ‰¾ä¸åˆ°åœ°æ–¹ï¼Œæˆ‘è¿˜ä¸“é—¨æ‰¾é…’åº—ä¸€æ¥¼çš„æœåŠ¡å‘˜å¤§å“¥ç”¨éŸ©è¯­å†™äº†å¾¡é‡Œç‰§ç™»ç™»å±±å£ï¼Œè™½ç„¶ä»–æ±‰è¯­ä¸€èˆ¬èˆ¬ï¼Œä½†å‹‰å¼ºçŸ¥é“æˆ‘çš„æ„æ€ï¼Œéå¸¸æ„Ÿè°¢ä»–ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2rVSCXMJlpuFjSspjXXcT.pXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<p>çˆ¬å±±çš„å°ä¼™ä¼´æœ‰å››ä¸ªï¼Œæˆ‘ä»¬æ‰“è½¦å»çš„å¾¡é‡Œç‰§ç™»ç™»å±±å£ï¼ŒåŸè®¡åˆ’æ²¿ç€è§‚éŸ³å¯ºè·¯çº¿ä¸‹å±±ï¼Œæ²¡æƒ³åˆ°æœ€åè¿·è·¯ä»æœ€ä¸æ¨èçš„é¡¿ä¹ƒå…‹è·¯çº¿ä¸‹å»äº†ï¼Œéƒ½æ˜¯æ³ªã€‚</p>
<p>ä¹‹å‰å°±å¬è¯´çˆ¬æ±‰æ‹¿å±±çš„ä¸­å›½äººæ²¡å‡ ä¸ªï¼Œæˆ‘ä»¬ä¸€è·¯ä¸Šä¹Ÿæ²¡é‡åˆ°ä¸ªåŒèƒï¼ŒåŸºæœ¬éƒ½æ˜¯æµå·å²›æœ¬åœ°äººã€‚ç”±äºæ±‰æ‹¿å±±æ˜¯ç«å±±å–·å‘è€Œå½¢æˆï¼Œé“è·¯ååˆ†ä¸å¥½èµ°ï¼Œä¸€å¤§åŠè·¯éƒ½æ˜¯ç«å±±çŸ³é“ºå‡ºæ¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡å‡†å¤‡ç™»å±±æ£ï¼ŒçœŸæ˜¯è‹¦äº†è†ç›–ã€‚çˆ¬çš„è¿‡ç¨‹ä¸­ä¸æ—¶æœ‰ä¹Œé¸¦â€œå“‡å“‡â€å«ä¸¤å£°ï¼Œå›æ¥æ‰çŸ¥é“ä¹Œé¸¦åœ¨éŸ©å›½æ˜¯å‰ç¥¥çš„é¸Ÿï¼Œæ±‰æ‹¿å±±çš„ä¹Œé¸¦æ›´æ˜¯ä»¥å˜´å¤§è‘—ç§°ï¼Œæ—©çŸ¥é“å°±ç»™å®ƒæ‹å‡ å¼ ç…§ç‰‡äº†ã€‚</p>
<p>æˆ‘ä»¬è¿™æ¡ç™»å±±è·¯çº¿æœ‰ä¸¤å¤„æ³‰æ°´ï¼ŒåŒè¡Œçš„å¥³ç”Ÿä¸€å¼€å§‹çˆ¬å±±å°±æ˜¯åƒä¸æ¶ˆï¼Œå–äº†è¿™ä¸ªæ³‰æ°´åï¼Œç”Ÿé¾™æ´»è™èµ·æ¥ï¼Œæˆ‘ä»¬æˆç§°è¿™çœŸæ˜¯ç¥ä»™æ°´ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2L3AlXS8mpuFjSZFMXXaxpVXa_!!581166664.jpg_620x10000.jpg" alt="ç¥ä»™æ°´"></p>
<p>çˆ¬å±±é€”ä¸­è¿˜æœ‰ä¸€æ™¯ç‚¹ä¹ŸæŒºè®©äººéš¾å¿˜çš„â€”â€”é¸Ÿæ¥å²³ã€‚è¿™é‡Œæ¯”è¾ƒè’å‡‰ï¼Œå››å¤„éƒ½æ˜¯æ¯æè´¥å¶ï¼Œçœ‹äº†æ™¯ç‚¹ç‰Œæ‰çŸ¥é“è¿™é‡Œæ˜¯ç”±äºç™»å±±è€…éšæ„ä¸¢å¼ƒçƒŸå¤´è€Œé€ æˆç«ç¾ï¼Œåƒå¹´æ ‘æœ¨è‘¬èº«ç«æµ·ï¼Œåªå‰©ä¸‹å¦‚ä»Šè§æ¡æ™¯è±¡ã€‚çœŸçš„å¾ˆè®©äººä¼¤å¿ƒã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2TuBBX00opuFjSZFxXXaDNVXa_!!581166664.jpg_620x10000.jpg" alt="é¸Ÿæ¥å²³1"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2EZEmXJXnpuFjSZFoXXXLcpXa_!!581166664.jpg_620x10000.jpg" alt="é¸Ÿæ¥å²³2"></p>
<p>ç”±äºåç¦»äº†ä¹‹å‰çš„ä¸‹å±±è·¯çº¿ï¼Œæˆ‘ä»¬ä¹‹ååšå…¬äº¤å›å»ï¼Œåœ¨è¯­è¨€ä¸é€šçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å››ä¸ªäººåˆæ˜¯è‹±æ–‡ï¼Œåˆæ˜¯ç¿»è¯‘è½¯ä»¶ï¼Œæ‹¿é…’åº—åç‰‡ç»™å¸æœºçœ‹ï¼Œä¸å®¹æ˜“çš„åœ¨é¡¿ä¹ƒå…‹è·¯çº¿æ—åä¸Šäº†3è·¯å…¬äº¤ï¼Œä¹‹åæ¢ä¹˜781ï¼Œåäº†30å¤šç«™ï¼Œç»ˆäºå›åˆ°å…ç¨åº—é™„è¿‘ï¼Œæœ€åä¸€é¡¿é»‘çŒªè‚‰çŠ’åŠ³è‡ªå·±ã€‚ç°åœ¨å›æƒ³ï¼Œè¿˜å†å†åœ¨ç›®ï¼Œè¿™ç§åœ¨å¼‚å›½ä»–ä¹¡çš„ç»å†éå¸¸åˆºæ¿€ï¼Œä¸äº²èº«ç»å†æ˜¯ä¸èƒ½ç†è§£çš„ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2VagmXHxmpuFjSZJiXXXauVXa_!!581166664.jpg_620x10000.jpg" alt="1300"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2prUmXJXnpuFjSZFoXXXLcpXa_!!581166664.jpg_620x10000.jpg" alt="1400"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2MZGCXR0kpuFjSsziXXa.oVXa_!!581166664.jpg_620x10000.jpg" alt="1500"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2A3qBXHFlpuFjy0FgXXbRBVXa_!!581166664.jpg_620x10000.jpg" alt="1700"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2d2OCXHJkpuFjy1zcXXa5FFXa_!!581166664.jpg_620x10000.jpg" alt="ä¼‘æ¯å®¤"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2MiUmXHBmpuFjSZFuXXaG_XXa_!!581166664.jpg_620x10000.jpg" alt="å°±ç”Ÿæ ‡å¿—"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2q5gkXNBmpuFjSZFsXXcXpFXa_!!581166664.jpg_620x10000.jpg" alt="å°é˜¶"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2q..kXS0mpuFjSZPiXXbssVXa_!!581166664.jpg_620x10000.jpg" alt="ç«å±±å²©å°é˜¶"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2rogkXS0mpuFjSZPiXXbssVXa_!!581166664.jpg_620x10000.jpg" alt="äº‘æµ·ç¼­ç»•"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2pTsjXOlnpuFjSZFgXXbi7FXa_!!581166664.jpg_620x10000.jpg" alt="å¼€å§‹ä¸‹å±±äº†"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB28uyAXSXlpuFjy0FeXXcJbFXa_!!581166664.jpg_620x10000.jpg" alt="é¡¿ä¹ƒå…‹å±±è„šä¸‹"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2.u9AXM0kpuFjSspdXXX4YXXa_!!581166664.jpg_620x10000.jpg" alt="ååœ¨å›ç¨‹çš„å…¬äº¤è½¦ä¸Š"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2ZguCXR8lpuFjSspaXXXJKpXa_!!581166664.jpg_620x10000.jpg" alt="çƒ¤é»‘çŒªè‚‰"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2oGCCXHVkpuFjSspcXXbSMVXa_!!581166664.png_620x10000.jpg" alt="æ¨ªç©¿æ±‰æ‹¿å±±"></p>
<h2 id="ç¬¬å››å¤©"><a href="#ç¬¬å››å¤©" class="headerlink" title="ç¬¬å››å¤©"></a>ç¬¬å››å¤©</h2><p>æœ€åä¸€å¤©ï¼Œæˆ‘ä»¬æ˜¯9ï¼š30åœ¨é…’åº—é›†åˆï¼Œç„¶åå»æœºåœºï¼Œæ¯ä¸ªäººéƒ½å¤§åŒ…å°åŒ…ï¼Œç›¸ä¿¡éƒ½æ˜¯â€œæ»¡è½½â€è€Œå½’ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2d5NBX0RopuFjSZFtXXcanpXa_!!581166664.jpg_620x10000.jpg" alt="æ’é˜Ÿå®‰æ£€"></p>
<p>æ„Ÿè°¢å…¬å¸æä¾›è¿™ä¸ª outing çš„æœºä¼šï¼Œæ„Ÿè°¢è¡Œæ”¿çš„åŒäº‹å¿™å‰å¿™åç»™æˆ‘ä»¬åˆ¶å®šè¡Œç¨‹ã€è®¢æœºç¥¨é…’åº—ï¼Œæˆ‘å¥½å‡ æ¬¡çœ‹åˆ° katty å¾ˆæ™šè¿˜åœ¨å…¬å¸ç»™æˆ‘ä»¬å¡«å†™å„ç§å‡ºè¡Œçš„è¡¨æ ¼ï¼Œéå¸¸æ„Ÿè°¢ã€‚</p>
<p>Bye jeju, I will be back.</p>
<h2 id="æ€»ç»“æ”»ç•¥"><a href="#æ€»ç»“æ”»ç•¥" class="headerlink" title="æ€»ç»“æ”»ç•¥"></a>æ€»ç»“æ”»ç•¥</h2><ol>
<li>æå‰æ¢å¥½éŸ©å…ƒï¼Œç”±äºéŸ©å…ƒæ˜¯å°å¸ç§ï¼Œæœ€å¥½å»ä¸­å›½é“¶è¡Œï¼Œå¯ä»¥é€‚å½“å¤šæ¢äº›ï¼ŒèŠ±ä¸äº†åœ¨æµå·å²›æœºåœºæœ‰å…è´¹å…‘æ¢äººæ°‘å¸çš„ç‚¹ã€‚</li>
<li>ä¸è¦ç›¸ä¿¡å¯¼æ¸¸è®©ä½ æé’±çš„ä»»ä½•è¯ã€‚è¿™ä¹Ÿæ²¡åŠæ³•ï¼Œå¯¼æ¸¸ä¸æ»¡è¶³åŸºæœ¬å·¥èµ„ï¼Œä¸€è·¯ä¸Šç»™æˆ‘ä»¬æ¨é”€å„ç§åƒçš„ï¼Œç©çš„ï¼Œè¿˜å¥½æˆ‘ä»¬æ¯”è¾ƒæ˜æ™ºï¼Œä¸€ä¸ªéƒ½æ²¡å»ï¼Œæœ€åå¯¼æ¸¸éƒ½æœ‰äº›ç”Ÿæ°”äº†ï¼Œå“ˆå“ˆã€‚å¤§å®¶ä¸è¦æ‹…å¿ƒè‡ªå·±æ‰¾ä¸åˆ°åœ°æ–¹ï¼Œå›é…’åº—æ…¢æ…¢ Googleï¼ˆæ˜¯çš„ï¼Œå¯ä»¥éšä¾¿ä¸Šè¿™äº›è¢«å¢™ç½‘ç«™äº†ï¼‰ï¼Œå„ç§ç‚¹è¯„è½¯ä»¶éƒ½å¯ä»¥å‚è€ƒã€‚</li>
<li>å¤§ä¼—ç‚¹è¯„ä¸Šçš„å¥½è¯„åº—ä¸ä¸€å®šçœŸçš„å¥½ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯åˆ·ä¸Šå»ï¼Œåæ¥å¬ä¸€äº›åŒäº‹è¯´ï¼Œç›´æ¥å»é€›å¸‚åœºï¼Œçœ‹åˆ°é‚£ä¸ªåº—éŸ©å›½äººå°±å»è¯•è¯•ï¼Œæ•ˆæœä¸€èˆ¬éƒ½ä¸é”™ã€‚</li>
<li>å¸¦å¥½å„ç§åœ°å›¾ã€‚å»æ±‰æ‹¿å±±æ˜æ˜¾å‡†å¤‡ä¸è¶³ï¼Œæ˜æ˜å¯ä»¥æ‰¾å¥½è·¯çº¿ï¼Œæœ€åè¿˜æ˜¯è´¹äº†äº›å‘¨æŠ˜ï¼Œå›åˆ°é…’åº—æ‰å‘ç°æœ‰å…¬äº¤è½¦å›¾ã€‚ä¸€èˆ¬é£æœºåœºã€é…’åº—éƒ½æœ‰å…è´¹çš„åœ°é“ï¼Œå¤§å®¶å¯ä»¥å¤šå»æ‰¾æ‰¾ï¼Œä¸è¦è€æ˜¯æ‹ç…§è€Œé—æ¼äº†è¿™äº›é‡è¦ç‰©è´¨ã€‚è¿˜æœ‰ä¸€ç‚¹æ˜¯æå‰åœ¨ç™¾åº¦åœ°å›¾æˆ–è°·æ­Œåœ°å›¾é‡Œä¸‹è½½å¥½ç¦»çº¿åœ°å›¾ï¼Œæƒ³æˆ‘ä»¬åœ¨æ±‰æ‹¿å±±ä¸Šä¿¡å·ä¸ä¼šï¼Œå®šä½éå¸¸æ…¢ã€‚</li>
<li>ä¸ç”¨æŠŠæ‰€æœ‰æ™¯ç‚¹éƒ½ç€æ€¥é€›å®Œï¼Œç•™ç€ä¸‹æ¬¡å†æ¥ä¹Ÿæ›´å¥½å˜›ï¼Œå»ä¸€ä¸ªç‚¹å°±ç»†ç»†ä½“ä¼šï¼Œæ„Ÿå—è¿™ä¸åŒçš„é£æ™¯ã€‚è¿™æ¬¡æˆ‘å°±æ•…æ„ç•™äº†ç‰›å²›æ²¡å»ã€‚</li>
<li>å†™æ¸¸è®°ã€‚æ¯ä¸ªäººåˆ°ä¸€ä¸ªæ™¯ç‚¹éƒ½æ˜¯æ‹æ‹æ‹ï¼Œç„¶åå‘å‘æœ‹å‹åœˆï¼Œæœ‹å‹åœˆä¸€ç¼ºç‚¹æ˜¯æ‰¿è½½çš„ä¿¡æ¯æœ‰é™ï¼Œè€Œä¸”æ—¶æ•ˆæ€§éå¸¸å¼ºï¼Œä»¥åè®©äººçœ‹åˆ°çš„å‡ ç‡æ¯”è¾ƒä½ã€‚ä¸ºäº†æ›´å¥½çš„çºªå½•ï¼Œå¿…é¡»å†™æ¸¸è®°ã€‚âœŒï¸</li>
</ol>
<h2 id="æ”¶è·"><a href="#æ”¶è·" class="headerlink" title="æ”¶è·"></a>æ”¶è·</h2><p>æ´‹æ´‹æ´’æ´’å†™äº†ä¸å°‘ï¼Œç…§ç‰‡ä¹Ÿæ™’äº†ä¸å°‘ï¼Œå…¶å®è¿™æ¬¡æ”¶è·æœ€å¤šä¸æ˜¯æ¬£èµåˆ°å¤šä¹ˆç¾çš„é£æ™¯ï¼Œè€Œæ˜¯è®¤è¯†äº†æ›´å¤šçš„åŒäº‹ï¼Œä¸€äº›å¹³æ—¶å¾ˆå°‘æœ‰äº¤é›†çš„åŒäº‹ä¹Ÿå¯ä»¥èŠä¸Šä¸¤å¥ï¼Œè¿™åœ¨å¥—è·¯å¦‚æ­¤æ·±çš„ç¤¾ä¼šå®å±ä¸æ˜“ï¼Œæœ€è„‘æ´å¤§å¼€çš„æ˜¯ä¸€åŒäº‹ç»™æˆ‘è®²è¿°å…¶æ‹çˆ±å²ä¸ç¬”å‹å²ï¼ŒçœŸæ˜¯è®©æˆ‘è„‘æ´å¤§å¼€ï¼Œå¸Œæœ›ä»–èƒ½æ ¹æ®è‡ªèº«ç»å†ï¼Œå†™ä¸ªå°è¯´å‡ºæ¥ï¼Œè¯´ä¸å®šå°±æˆç½‘çº¢äº†å‘¢ã€‚æœŸå¾…â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¬å¸å¹´åº• outingï¼Œæµå·å²› 4 æ—¥æ¸¸ï¼ˆ12/2-12/5ï¼‰ã€‚æµå·å²›å¯¹å›½äººä¸éœ€è¦ç­¾è¯ï¼Œä»æ­å·åé£æœºå»ä¸åˆ°2ä¸ªå°æ—¶ï¼Œç»å¯¹æ˜¯æ—…æ¸¸èƒœåœ°ã€‚æµå·å²›åœ¨éŸ©å›½ç®—ä¹¡ä¸‹ï¼Œä½†å…¶ä¾é æ—…æ¸¸ä¸šï¼Œç¡¬ç”Ÿç”Ÿçš„æŠŠ GDP å¸¦ä¸Šå»äº†ï¼Œå¬å¯¼æ¸¸è¯´ä¸€æ´—ç¢—å·¥æœˆå·¥èµ„éƒ½èƒ½è¾¾åˆ°ä¸€ä¸‡äºŒï¼ŒåŠ ä¸ªç­ä¸€ä¸‡å…«æ²¡é—®é¢˜ã€‚æ²¡å»è¿‡çš„åŒå­¦æœ‰æœºä¼š
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
      <category term="åƒé‡Œè·¯" scheme="http://liujiacai.net/tags/%E5%8D%83%E9%87%8C%E8%B7%AF/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘ä¸ºä»€ä¹ˆä¸€å‘¨å†…è¿è·‘ 2 ä¸ªé©¬æ‹‰æ¾</title>
    <link href="http://liujiacai.net/blog/2016/11/07/run-2-marathon-in-a-week/"/>
    <id>http://liujiacai.net/blog/2016/11/07/run-2-marathon-in-a-week/</id>
    <published>2016-11-07T14:47:55.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘å¾®ä¿¡é‡Œçš„æœ‹å‹åº”è¯¥éƒ½çŸ¥é“ï¼Œä¸Šå‘¨ï¼ˆ2016/11/06ï¼‰ä¸å¤§ä¸Šå‘¨ï¼ˆ2016/10/30ï¼‰æˆ‘åˆ†åˆ«è·‘äº†æ­å·ä¸ä¸Šæµ·çš„é©¬æ‹‰æ¾ï¼Œç¬¬ä¸€åœºä¸Šæµ·ç«™å®Œæˆäº†äººç”Ÿé¦–ä¸ªåŠé©¬ï¼Œç¬¬äºŒåœºæ­å·ç«™å®Œæˆäº†äººç”Ÿé¦–ä¸ªå…¨é©¬ï¼ˆ42.195KMï¼‰ï¼Œç°è¶ç€è…¿è¿˜æœ‰ä¸€äº›é…¸ç—›ï¼Œå›é¡¾ä¸‹å½“åˆä¸ºä»€ä¹ˆè¦å‚åŠ é©¬æ‹‰æ¾ï¼Œä»¥åŠåœ¨è·‘å…¨é©¬æœ€ååå…¬é‡Œæ—¶é‚£ç§å…¨èº«é…¸ç—›åˆ°æœ€åçœ‹åˆ°ç»ˆç‚¹çº¿å¹¶ç©¿è¿‡æ—¶çš„å¿ƒæƒ…ï¼Œæœ€ååˆ†äº«äº›æ³¨æ„äº‹é¡¹ç»™åˆæ¬¡è·‘é©¬æ‹‰æ¾çš„åŒå­¦ã€‚</p>
<p>è¿™ä¸¤æ¬¡é©¬æ‹‰æ¾çš„æˆç»©å¹¶ä¸å¥½ï¼ŒåŠé©¬ç”¨äº†ä¸¤ä¸ªåŠå°æ—¶ï¼Œå…¨é©¬ç”¨äº†å…­ä¸ªå°æ—¶ï¼ŒåŸºæœ¬ä¸Šéƒ½å…³é—¨äº†ã€‚è¿åŠ¨å¥å°†ä»¬ä¸è¦å˜²ç¬‘æˆ‘ï¼Œå¤§å®¶å¼€å¿ƒå°±å¥½ã€‚</p>
<h2 id="äº‹å‡ºæœ‰å› "><a href="#äº‹å‡ºæœ‰å› " class="headerlink" title="äº‹å‡ºæœ‰å› "></a>äº‹å‡ºæœ‰å› </h2><p>ä¸€å¥è¯æ¦‚æ‹¬ï¼šå‡è‚¥ã€‚æ¯«ä¸å®¢æ°”çš„è¯´æˆ‘æ˜¯èƒ–äºŒåå¤šå¹´äº†ï¼Œä¹‹å‰å°è¯•è¿‡æ— æ•°æ¬¡å‡è‚¥ï¼Œæ¯ä¸€æ¬¡éƒ½åƒæ——æ¯é¼“ã€‚ä»Šå¹´å¹´åˆï¼Œå—äº†ä¸€æ¬¡æ‰“å‡»ï¼Œæ— è®ºå¦‚ä½•è¦å‡äº†ã€‚è¯´å¹²å°±å¹²ï¼ŒçŸ¥é“è‡ªå·±çš„æƒ°æ€§ï¼Œæ‰€ä»¥ç›´æ¥å»å¥èº«æˆ¿è¯·äº†ç§æ•™ï¼Œæ•ˆæœè¿˜ä¸é”™ï¼Œæˆªæ­¢åˆ°10æœˆä»½å¤§æ¦‚ç”¨äº†6ä¸ªæœˆçš„æ ·å­ï¼Œå‡äº†35æ–¤å·¦å³ã€‚ä¹Ÿæ˜¯åœ¨è¿™æ¬¡å‡è‚¥è¿‡ç¨‹ä¸­é€æ¸å–œæ¬¢ä¸Šäº†è·‘æ­¥ï¼Œä¸€å¼€å§‹åœ¨è·‘æ­¥æœºä¸Šè·‘ï¼Œä¼šè§‰å¾—æœ‰äº›æ— èŠï¼Œå°è¯•æ‰¾äº›éŸ³ä¹æ¥å¬ï¼Œåæ¥è§‰å¾—ä¹Ÿä¸æ˜¯å¾ˆæ–¹ä¾¿å°±å¹²è„†ä¸å¬äº†ï¼Œå›å¿†å›å¿†ç™½å¤©ä¸Šç­æ—¶å€™çš„äº‹æƒ…ï¼Œæ—¶é—´å€’æ˜¯ä¹Ÿè¿‡çš„å……å®å¤šäº†ã€‚</p>
<p>æ­å·è‡ªç„¶ç¯å¢ƒæ¯”è¾ƒå¥½ï¼ˆåŒ—äº¬çš„åŒå­¦å¯ä»¥æ¥äº²èº«ä½“éªŒï¼‰ï¼Œæˆ‘ä½çš„åœ°æ–¹è·ç¦»ä½™æ­å¡˜æ²³æ¯”è¾ƒè¿‘ï¼Œæ‰€ä»¥åœ¨é‚£é‡Œæ™¨è·‘è¿‡ä¸€æ®µæ—¶é—´ï¼Œä»åˆšå¼€å§‹çš„ 3KMï¼Œ5KMï¼Œåˆ°æœ€åçš„ 10KMï¼Œé‚£æ®µæ—¶é—´ä¹Ÿå…»æˆäº†æ—©ç¡æ—©èµ·çš„ä¹ æƒ¯ï¼Œç²¾ç¥çŠ¶æ€ä¹Ÿå¥½å¤šäº†ã€‚å‘¨æœ«ä¸€ä¸ªäººæ²¡äº‹ä¹Ÿå»è·‘ä¸Šä¸¤åœˆï¼Œä»Šå¹´çš„å¤å¤©å°±åœ¨è¿™æ ·å¤§æ±—æ·‹æ¼“çš„è·‘é“ä¸Šåº¦è¿‡äº†å¤§åŠéƒ¨åˆ†ã€‚</p>
<p>è·‘é©¬æ‹‰æ¾çš„æƒ³æ³•ä¹Ÿå°±æ˜¯åœ¨è¿™æ—¶å€™äº§ç”Ÿçš„ï¼Œè®°å¾—æœŸé—´å¬è¿‡ç‹—ç†Šæœ‰è¯è¯´ podcast çš„ä¸€æœŸ<a href="http://m.qingting.fm/vchannels/38116/programs/1723095" target="_blank" rel="external">ã€Š124æœŸï¼šç°åœºÂ·å½“æˆ‘åœ¨è·‘é©¬æ‹‰æ¾æ—¶æˆ‘ä¼šèŠä»€ä¹ˆã€‹</a>ï¼Œæ²¡è·‘è¿‡çš„å¯ä»¥å»å¬å¬ã€‚ä¸è¦å†çŠ¹è±«ã€æ€€ç–‘è‡ªå·±åˆ°åº•è¡Œä¸è¡Œï¼Œå»è¯•è¯•å°±çŸ¥é“äº†ï¼Œä¸è¡Œå°±ä¸‹æ¥ï¼Œè¿™æ ·ä¹Ÿæ²¡å•¥é—æ†¾ã€‚</p>
<h2 id="ä¸Šæµ·åŠé©¬"><a href="#ä¸Šæµ·åŠé©¬" class="headerlink" title="ä¸Šæµ·åŠé©¬"></a>ä¸Šæµ·åŠé©¬</h2><p>ä¸Šé©¬ï¼ˆä¸Šæµ·é©¬æ‹‰æ¾ï¼‰å¼€è·‘æ—¶é—´æ˜¯æ—©ä¸Š7ç‚¹ï¼Œæ‰€ä»¥æˆ‘æå‰ä¸€å¤©ååŠ¨è½¦åˆ°äº†ä¸Šæµ·ï¼Œä½åœ¨ä¹‹å‰ä¸€ä¸ªåŒäº‹é‚£é‡Œï¼Œç¬¬äºŒå¤©æ—©ä¸Šæˆ‘ä»¬6ç‚¹èµ·åºŠï¼Œæ¯äººåƒäº†ä¸¤ä¸ªè‚‰åŒ…å­ï¼Œç„¶åå°±ååœ°é“å‘å—äº¬ä¸œè·¯æ€è¿‡å»äº†ã€‚</p>
<p>æ•´ä¸ªåŠé©¬è¿‡ç¨‹ä¹Ÿæ²¡å•¥ç‰¹åˆ«çš„ï¼Œæˆ‘ä»¬è·Ÿéšå¤§éƒ¨é˜Ÿï¼Œè®°å¾—å¤§æ¦‚åˆ°äº†18KMå·¦å³ï¼Œæˆ‘æ‰è§‰å¾—æœ‰äº›ç´¯ï¼Œä¸è¿‡è¿˜å¥½ï¼Œç»ˆç‚¹å°±åœ¨çœ¼å‰äº†ã€‚ç”±äºè¿™æ¬¡ä¸Šé©¬æ²¡å•¥å‹åŠ›ï¼Œæˆ‘ä¹Ÿå°±åšå®šäº†è¦æŒ‘æˆ˜æ­å·å…¨é©¬çš„å†³å¿ƒã€‚ä¸‹é¢è´´å‡ å¼ å½“æ—¶çš„ç…§ç‰‡ï¼Œä»¥ä½œçºªå¿µï¼š</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2dgjVbW9I.eBjy0FeXXXqwFXa_!!581166664.jpg_620x10000.jpg" alt="ç»ˆç‚¹å°±åœ¨çœ¼å‰"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2.eTQcA1M.eBjSZPiXXawfpXa_!!581166664.jpg_620x10000.jpg" alt="è¶Šè¿‡ç»ˆç‚¹çº¿"><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB29DRIcNaK.eBjSZFAXXczFXXa_!!581166664.jpg_620x10000.jpg" alt="å¥–ç‰Œ"></p>
<h2 id="æ­å·å…¨é©¬"><a href="#æ­å·å…¨é©¬" class="headerlink" title="æ­å·å…¨é©¬"></a>æ­å·å…¨é©¬</h2><p>ä¸Šæ¬¡è·‘æ²¡æœ‰è£…å¤‡ï¼Œæ—©ä¸Šè·‘ï¼ˆæ­é©¬æ˜¯8ç‚¹ï¼‰çš„æ¯”è¾ƒæ—©ä¸€å¼€å§‹è¿˜æ¯”è¾ƒå†·ï¼Œæ‰€ä»¥è¿™æ¬¡æˆ‘æå‰ä¹°å¥½äº†è·‘æ­¥è¿åŠ¨é‹ä¸è¡£æœï¼Œäº‹åæ¥çœ‹æ•ˆæœè¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ã€‚</p>
<p>å¯èƒ½æ˜¯ä¸Šå‘¨è·‘å®Œä¸Šé©¬è¿˜æ²¡æ¢å¤å¥½ï¼Œåœ¨è·‘å‰18KMæ—¶æ˜æ˜¾è§‰å¾—æ¯”ä¸Šé©¬ç´¯ï¼Œè€Œä¸”æ­é©¬å½“å¤©å¤ªé˜³å½“å¤´ï¼Œæ™’çš„äººæœ‰åŠ›ä½¿ä¸å‡ºã€‚åœ¨å¿«åˆ°åŠé©¬ç»ˆç‚¹æ—¶ï¼Œè†ç›–ä¹Ÿæœ‰äº›ç—›ï¼Œè¿™æ—¶å¿ƒé‡Œç¬¬ä¸€æ¬¡çŠ¹è±«è¦ä¸è¦æ”¾å¼ƒï¼Œæƒ³æƒ³ç‰›é€¼éƒ½å¹å‡ºå»äº†ï¼Œå†è·‘ä¸ªåŠé©¬å’Œä¸Šæ¬¡ä¸€æ ·ï¼Œæœ‰å•¥æ„ä¹‰å‘¢ï¼Œäºæ˜¯åœ¨åŠé©¬å…¨é©¬åˆ†ç•Œçº¿è·¯å£ï¼Œé€‰äº†å…¨é©¬ã€‚</p>
<p>è·‘çš„æ—¶å€™å°±å¬å…¶ä»–è·‘å‹è¯´æˆ‘ä»¬ç®—æ˜¯å…¨é©¬é åçš„ä½ç½®äº†ï¼Œæˆ‘åœ¨è·‘è¿‡22KMæ ‡å¿—åæƒ³å†åŠ ä¸ªé€Ÿï¼Œæ²¡æƒ³åˆ°è¿™æ—¶ç¬¬ä¸€æ¬¡è…¿å¼€å§‹æŠ½ç­‹ï¼Œä¸€é˜µä¸€é˜µçš„ï¼Œç—›çš„èµ°éƒ½ä¸æ•¢èµ°äº†ï¼Œçœ‹ç€ä¸€ä¸ªä¸ªè·‘å‹ä»æˆ‘èº«è¾¹ç»è¿‡ï¼ŒçœŸæ˜¯åˆæ…Œåˆæ€¥ï¼Œåšäº†å¤§æ¦‚äº”åˆ†é’Ÿçš„æ‹‰ä¼¸ï¼Œåƒäº†ä¸ªèƒ½é‡æ£’ï¼Œæ¸æ¸å¯ä»¥èµ°äº†ï¼Œæ­£å¥½è¿™æ—¶ä¹Ÿåˆ°äº†æ­å·æœ€ç¾è·‘é“ï¼Œæˆ‘å°±èµ°äº†å¤§æ¦‚äºŒåå¤šåˆ†é’Ÿï¼Œæ¬£èµæ¬£èµé£æ™¯ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2QZtLcmiJ.eBjSspiXXbqAFXa_!!581166664.jpg_620x10000.jpg" alt="æ­é©¬æœ€ç¾è·‘é“"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2GvRAcheI.eBjSsplXXX6GFXa_!!581166664.jpg_620x10000.jpg" alt="æ¥ä¸ªè‡ªæ‹"></p>
<p>è·å¼€è·‘å››ä¸ªå°æ—¶ï¼Œ12ç‚¹å·¦å³ï¼Œæˆ‘æ¥åˆ°äº†30KMæ ‡å¿—å¤„ï¼Œè·ç¦»ç»ˆç‚¹è¿˜æœ‰12å¤šå…¬é‡Œï¼Œç®—ä¸‹æ¥åŸºæœ¬ä¸Šæ˜¯æ¯å°æ—¶6KMçš„æ ·å­ï¼Œæƒ³æƒ³åº”è¯¥æ²¡å•¥å‹åŠ›ï¼Œå°±ç»§ç»­å¼€è·‘äº†ã€‚è¿™æ—¶æ­£æ˜¯å¤ªé˜³æœ€æ¯’çš„æ—¶å€™ï¼ŒåŠ ä¸Šæ¯ä¸ªæœåŠ¡ç‚¹çš„å–·é›¾ï¼ˆé˜²è…¿æŠ½ç­‹ï¼‰éƒ½ç”¨å…‰äº†ï¼Œè„šåº•æ¿æœ‰äº›é…¸ç—›ï¼ŒçœŸçš„å¯ä»¥è¯´æ˜¯â€œä½“æ— å®Œè‚¤â€ï¼Œæ²¡è·‘å¤šä¹…å°±åˆå¼€å§‹èµ°äº†ï¼Œè…¿ä¸€ç”¨åŠ›å°±å¯èƒ½æŠ½ç­‹ï¼Œè¿™æ—¶å¿ƒé‡Œç¬¬äºŒæ¬¡æ‰“äº†é€€å ‚é¼“ï¼Œå®‰æ…°è‡ªå·±ï¼š30å¤šå…¬é‡Œå·®ä¸å¤šäº†ã€‚è€Œä¸”è¿™æ—¶ä¸å®šæ—¶ä¼šæœ‰æ•‘æ´è½¦åœ¨ä½ æ—è¾¹ç»è¿‡ï¼Œååˆ†å…·æœ‰è¯±æƒ‘æ€§ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2A_0DccaJ.eBjy0FbXXcwrFXa_!!581166664.jpg_620x10000.jpg" alt="çœ‹ä¸åˆ°ç»ˆç‚¹æ—¶çŠ¹è±«çš„çœ¼ç¥"></p>
<p>å¤§æ¦‚åˆèµ°äº†äºŒååˆ†é’Ÿï¼Œæ¥åˆ°äº†é’±å¡˜æ±Ÿå¤§æ¡¥ï¼Œæ¡¥ä¸Šé£æ¯”è¾ƒå¤§ï¼Œå¯¹äºæ­¤æ—¶çš„æˆ‘æ¥è¯´ï¼ŒçœŸæ˜¯é›¨åç”˜éœ–ï¼Œä¸€ä¸‹å¹èµ°äº†èº«ä¸Šçš„ç–²å€¦ã€‚ä½†æ˜¯è„šè¿˜æ˜¯ä¸€æ ·é…¸ç—›ï¼Œäºæ˜¯èµ°ç€è¿‡äº†æ¡¥ã€‚å†æ¬¡å¼€å¯æ¬£èµé£æ™¯æ¨¡å¼ã€‚èº«è¾¹çš„è·‘å‹ä¹ŸåŸºæœ¬ä¸Šéƒ½æ˜¯èµ°çš„è¿‡äº†æ¡¥ã€‚<br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB29QXPcmCI.eBjy1XbXXbUBFXa_!!581166664.jpg_620x10000.jpg" alt="æ¡¥ä¸Šæ˜æ˜¾æ¯”è¾ƒå¼€å¿ƒ"></p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB22xNBcg1J.eBjy0FaXXaXeVXa_!!581166664.jpg_620x10000.jpg" alt="è¿™åº”è¯¥æ˜¯é›¾éœ¾"></p>
<p>ä¸‹äº†é’±å¡˜æ±Ÿå¤§æ¡¥åï¼Œè§‰å¾—å¯èƒ½æ²¡æˆäº†ï¼Œçœ‹äº†çœ‹æ—¶é—´ï¼Œå‘ç°æ‰è¿‡äº†åŠä¸ªæ—¶é—´ï¼Œå‘å‰èµ°å‡ æ­¥å°±åˆ°äº†32.5KM çš„æ ‡å¿—ç‰Œã€‚ç®—ç®—æˆ‘ä¹Ÿæ²¡å·®å¤ªå¤šï¼Œåº”è¯¥èƒ½åœ¨å…³é—¨å‰èµ¶åˆ°ç»ˆç‚¹ï¼Œäºæ˜¯åˆå¼€å§‹è·‘èµ·æ¥äº†ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2TKF1cRaM.eBjSZFMXXcypVXa_!!581166664.jpg_620x10000.jpg" alt=""></p>
<p>è·‘çš„æ—¶å€™å’Œ 600 å…³é—¨å…”é‡åˆ°äº†å¥½å‡ æ¬¡ï¼Œè·‘ç´¯äº†èµ°æ—¶ä»–åˆæŠŠæˆ‘è¶…äº†ï¼Œæœ€åä¹Ÿæ˜¯æ²¡èƒ½è·Ÿä¸Šä»–ä»¬ï¼Œè¿™æ—¶å€™é“è·¯åŸºæœ¬ä¸Šéƒ½è§£å°äº†ï¼ŒæœºåŠ¨è½¦ä¹Ÿå¤šäº†èµ·æ¥ï¼Œè·¯ä¸Šçš„è¡Œäººæ—¶ä¸æ—¶ç»™æˆ‘ä»¬æœ€åè¿™ä¸€æ‰¹åŠ æ²¹ã€‚æˆ‘è¿™æ—¶å…¨èº«é…¸ç—›åˆ°äº†æç‚¹äº†ï¼Œçœ‹ç€ä¸¤æ—çš„è·¯äººï¼Œæœ‰è¯´æœ‰ç¬‘ï¼Œå¿ƒé‡Œå´æ˜¯åœ¨æ»´è¡€ï¼ŒçœŸæƒ³æ¨è¾†æ—è¾¹çš„å…¬å…±è‡ªè¡Œè½¦éª‘ä¸Šé‚£ä¹ˆä¸€æ®µï¼Œå¿ƒé‡Œæ˜¯çº ç»“äº†å¥½ä¹…ï¼Œå¹¸å¥½åˆåˆ°äº†ä¸€ä¸ªè¡¥ç»™ç‚¹ï¼Œå–äº†ç‚¹é¥®æ–™ï¼Œåƒäº†å‡ å°å—é¦™è•‰ï¼Œä½“åŠ›ç®—æ˜¯æœ‰æ‰€æ¢å¤ï¼Œè¿™æ—¶å€™è·‘é“å‰©ä¸‹çš„è·‘å‹ä¹Ÿä¸å¤šäº†ï¼Œä¼°è®¡éƒ½ä¸Šäº†é‚£è¯±äººçš„æ•‘æ´è½¦ã€‚</p>
<p>è·‘å‹è™½ç„¶ä¸å¤šäº†ï¼Œä½†æ˜¯å…¶ä¸­ä¸ä¹å‡ ä¸ªç²¾ç¥çŸé“„çš„è€å¹´äººï¼Œçœ‹ç€ä»–ä»¬è¿˜åœ¨æ…¢æ…¢è·‘ï¼Œæˆ‘æœ‰ä»€ä¹ˆç†ç”±æ”¾å¼ƒå‘¢ï¼Œæˆ‘åˆæŠŠæ”¾å¼ƒçš„å¿ƒæ€ç»™å‹ä¸‹å»ï¼Œå’¬ç€ç‰™ï¼Œåˆå¼€å§‹è·‘èµ·æ¥ï¼Œè‡ªå·±ç»™è‡ªå·±å–ŠåŠ æ²¹ã€‚è·¯è¾¹çš„å•¦å•¦é˜Ÿè™½ç„¶æ²¡æœ‰äº†ï¼Œä½†æ˜¯æ¿€åŠ±è¯­è¿˜åœ¨ï¼Œæ¯”å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2CiJQcQ1M.eBjSZPiXXawfpXa_!!581166664.jpg_620x10000.jpg" alt="è¿˜æœ‰6å…¬é‡Œå°±å¯ä»¥å‘æœ‹å‹åœˆäº†"></p>
<p>æƒ³æƒ³æˆ‘è¿™ä¸€è·¯ä¹Ÿæ˜¯æ²¡å°‘å¾—ç‘Ÿï¼Œè¦æ˜¯æœ€åæ²¡åšæŒä¸‹æ¥æ˜¯å¤šä¸¢äººçš„äº‹å‘€ï¼Œè°ƒæ•´å¿ƒæ€ï¼Œå‘æœ€å6å…¬é‡Œè¿›å‘ï¼Œè¿™æ—¶å·²ç»ä¸‹åˆ1ç‚¹å·¦å³ï¼Œè·ç¦»ç»ˆç‚¹è¿˜æœ‰6KMã€‚</p>
<p>æœ€åè¿™ 6KM çœŸæ˜¯è®©äººæœ›çœ¼æ¬²ç©¿ï¼Œèµ°èµ°è·‘è·‘ï¼ŒæœŸé—´å’Œä¸€ä¸ªå¤§çˆ·èŠäº†ä¼šå¤©ï¼Œå¤§çˆ·è¯´å’±è¿™ä¸ªé€Ÿåº¦æ˜¯åˆ°ä¸äº†ç»ˆç‚¹äº†ï¼Œæˆ‘ä¸€å¬ä¸è¡Œå‘€ï¼Œæˆ‘æ€ä¹ˆè¯´ä¹Ÿè¦åœ¨å…³é—¨å‰å†²è¿›å»ï¼Œå’¬å’¬ç‰™ï¼Œä½¿åŠ²åˆè·‘äº†ä¸¤å…¬é‡Œï¼Œç„¶åå½»åº•åºŸäº†ï¼Œèµ°äº†ä¸€æ®µæ—¶é—´åå¥½åƒåˆè¢«é‚£ä¸ªå¤§çˆ·è¶…äº†ğŸ˜‚ï¼Œè¿™ä¸‹æ˜¯æ€ä¹ˆä¹Ÿè·‘ä¸åŠ¨äº†ï¼Œè„šæ¯èµ°ä¸€æ­¥éƒ½é…¸ç—›æ— æ¯”ï¼Œä¹Ÿä¸æ•¢ä¼‘æ¯ï¼Œç”Ÿæ€•æ—¶é—´ä¸å¤Ÿç”¨ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2cHNQcOGO.eBjSZFjXXcU9FXa_!!581166664.jpg_620x10000.jpg" alt="13:40å·¦å³åˆ°è¾¾40KM æ ‡å¿—"></p>
<p>å‰©ä¸‹çš„æ—¶é—´å°±æ˜¯èµ°è·¯äº†ï¼Œåœ¨13:40å·¦å³åˆ°è¾¾ 40KM æ ‡å¿—ï¼Œå¿ƒæƒ³20åˆ†é’Ÿèµ°2KMåº”è¯¥æ²¡é—®é¢˜å§ï¼Œäºæ˜¯å–å…‰äº†èº«ä¸Šå¸¦çš„é¥®æ–™ï¼Œå¿«æ­¥èµ°äº†èµ·æ¥ï¼Œè¿™æ—¶å€™å·²ç»å®Œå…¨æ²¡æœ‰è·‘é“çš„ç—•è¿¹ï¼Œé©¬è·¯ä¹Ÿå‡ºç°äº†å¸¦ç€å¥–ç‰Œçš„è·‘å‹ï¼Œçœ‹ç€ä»–ä»¬è„¸ä¸Šè¡¨æƒ…ï¼Œæˆ‘çŸ¥é“ä»–ä»¬æ˜¯åœ¨äº«å—ç€â€œé•¿å¾â€åçš„æœå®ï¼Œæˆ‘å´æ—¶æ€ä¹ˆä¹Ÿè·‘ä¸åŠ¨äº†ï¼Œå°±è¿™ä¹ˆèµ°ç€èµ°ç€ï¼Œåˆ°äº†42KMï¼Œåˆ°äº†ç»ˆç‚¹ã€‚</p>
<h3 id="ç»ˆç‚¹æ„Ÿæƒ³"><a href="#ç»ˆç‚¹æ„Ÿæƒ³" class="headerlink" title="ç»ˆç‚¹æ„Ÿæƒ³"></a>ç»ˆç‚¹æ„Ÿæƒ³</h3><p>å…¶å®åˆ°ä½ ç»ˆç‚¹ä½ ä¼šå‘ç°ï¼Œå‰é¢çš„ä¸€åˆ‡éƒ½æ˜¯å€¼å¾—çš„ã€‚å†…å¿ƒçš„é‚£ç§å–œæ‚¦ï¼Œæ— æ³•é€šè¿‡æ–‡å­—ä¸åˆ«äººåˆ†äº«ï¼Œåªèƒ½è‡ªå·±å»ç»å†ã€å»ä½“ä¼šã€‚çœ‹ç€é‚£äº›æ‹ç…§ç•™æ‹çš„è·‘å‹ï¼Œæˆ‘çŸ¥é“ä»–ä»¬å’Œæˆ‘ä¸€æ ·ï¼Œåˆä¼šå‘ç€ä¸‹ä¸€ä¸ªæŒ‘æˆ˜å‡ºå‘ã€‚äº‹æƒ…å¾€å¾€å°±æ˜¯è¿™æ ·ï¼Œç»“æœåªæ˜¯ä¸€ç¬é—´ï¼Œé‡è¦çš„åŒæ—¶ä¹Ÿæ˜¯æœ€è‰°éš¾æ¼«é•¿çš„éƒ¨åˆ†æ˜¯å‰é¢çš„è¿‡ç¨‹ã€‚æˆ‘è§‰å¾—æœ‰æ„ä¹‰çš„äººç”Ÿï¼Œåº”è¯¥æ˜¯å……æ»¡è®¸å¤šä¸ªè¿™æ ·æŒ‘æˆ˜ï¼Œèµ·èµ·ä¼ä¼ï¼Œæ— ä¼‘æ— æ­¢ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB22U40cgOI.eBjSszhXXbHvFXa_!!581166664.jpg_620x10000.jpg" alt="42KM æ ‡å¿—å¤„"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2b68KcU5O.eBjSZFxXXaaJFXa_!!581166664.jpg_620x10000.jpg" alt="FINISH LINE"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2EutRcOGO.eBjSZFEXXcy9VXa_!!581166664.jpg_620x10000.jpg" alt="å¥–ç‰Œ"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2j9VQcFOP.eBjSZFHXXXQnpXa_!!581166664.jpg_620x10000.jpg" alt="è·‘è¿‡é£æ™¯ï¼Œè·‘è¿‡ä½ "></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é¦–å…ˆåä¸ªæ§½ï¼Œç›¸æ¯”ä¸Šé©¬ï¼Œæ­é©¬ç¡®å®æœ‰ç‚¹ low äº†ã€‚é¦–å…ˆæ˜¯è·‘é“ä¸å¤Ÿå®½ï¼Œé‚£ä¹ˆå¤šäººï¼Œä¸­é—´è¿˜å µäº†ä¸¤æ¬¡ï¼Œè¿™åœ¨ä¸Šæµ·æ˜¯ç»å¯¹æ²¡æœ‰çš„äº‹ï¼›å…¶å®æ˜¯è·‘é“ä¸¤ä¾§çš„å•¦å•¦é˜Ÿï¼Œä¸Šé©¬ä¸€è·¯ä¸ŠåŸºæœ¬éƒ½æœ‰äººï¼Œæ­é©¬åŸºæœ¬ä¸Šå°±èµ·ç‚¹å’Œç»ˆç‚¹å¤šäº›ï¼Œå…¶ä»–ç‚¹äººæ¯”è¾ƒå°‘ã€‚ä½†ä¸å¯å¦åˆ™ï¼Œæ­å·çš„é£æ™¯æ¯”ä¸Šæµ·å¥½å¤šäº†ã€‚</p>
<p>å¦‚æœè¯´ï¼Œäººç”Ÿæ˜¯ä¸€åœºé©¬æ‹‰æ¾ï¼Œé‚£ä¹ˆäºŒåæ¥å²çš„æˆ‘ä»¬åº”è¯¥ç›¸å½“äº10KMå¤„ï¼Œè¿™æ—¶å€™åº”è¯¥æ˜¯å¹²åŠ²åè¶³ï¼Œé›„å¿ƒæ»¡æ»¡çš„æ—¶å€™ã€‚å¯æ˜¯å›æƒ³è‡ªå·±æ¯•ä¸šæ‰ä¸¤å¹´å·¦å³ï¼Œå½“åˆå®šçš„ç›®æ ‡è¿˜è®°å¾—å˜›ï¼Ÿè‡ªå·±çš„äº”å¹´è®¡åˆ’è¿˜èƒ½æ‰¾åˆ°ç—•è¿¹å˜›ï¼Ÿå•è¯èƒŒäº†å¤šå°‘äº†ï¼Ÿå¤šå°‘çš„å‘¨æœ«æ˜¯åœ¨è™šåº¦ä¸­è€—å°½ï¼Ÿä¹°çš„ä¹¦çœ‹äº†å¤šå°‘ï¼Ÿ</p>
<p>éƒ½è¯´ä¸€ä¸ªäººçš„æ—¶å€™æ˜¯æå‡è‡ªæˆ‘ä»·å€¼çš„é»„é‡‘æ—¶æœŸï¼Œæ—¶é—´å¤šæ˜¯å¤šï¼Œä½†æ˜¯å¦‚æœè®¡åˆ’ä¸å¥½ï¼Œæ”¶è·ä¹Ÿç”šå¾®ã€‚å¥½äº†ï¼Œåªæ˜¯æƒ³é€šè¿‡è¿™æ¬¡è·‘é©¬å‘Šè¯‰è‡ªå·±ï¼Œä¸è¦åç¦»äº†æ–¹å‘ï¼Œå‘ç€å‰æ–¹ï¼Œå¤§æ­¥å‘å‰ï¼Œç»ˆæœ‰è¾¾åˆ°ç»ˆç‚¹çš„é‚£ä¸€åˆ»ã€‚ä¸å¤§å®¶å…±å‹‰ã€‚</p>
<h3 id="è·‘é©¬å»ºè®®"><a href="#è·‘é©¬å»ºè®®" class="headerlink" title="è·‘é©¬å»ºè®®"></a>è·‘é©¬å»ºè®®</h3><p>æœ€åç»™æƒ³è·‘é©¬ä½†è¿˜æ²¡å°è¯•è¿‡çš„åŒå­¦æå‡ ç‚¹å»ºè®®ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š</p>
<ul>
<li>å¦‚æœæ˜¯æ·±ç§‹ï¼Œå‡†å¤‡ä¸ªé•¿è¢–è·‘è¡£ï¼Œæ·˜å®æœç´¢é©¬æ‹‰æ¾è¿åŠ¨æœå¤šçš„æ˜¯ã€‚</li>
<li>è¿åŠ¨é‹ï¼Œæœ€å¥½å¸¦æ°”å«ã€‚ä¸é‹æ­é…çš„è¿˜æœ‰è¿åŠ¨è¢œï¼Œä¸è¦å°çœ‹è¢œå­ï¼Œæˆ‘è·‘æ­é©¬å°±éšä¾¿ç©¿äº†ä¸ªï¼Œç»“æœå’Œé‹ä¸€ç›´æœ‰æ‘©æ“¦ï¼Œè¿™ä¹Ÿæ˜¯é€ æˆäº†æˆ‘è„šé…¸ç—›çš„åŸå› ä¹‹ä¸€ã€‚</li>
<li>è‡ªå¸¦å–·é›¾ã€‚è¯´å®è¯æˆ‘è·‘ä¸Šé©¬ä¸çŸ¥é“å–·é›¾æ˜¯å¹²å˜›çš„ï¼Œåªæ˜¯çœ‹åˆ°æœ‰äººå»å–·ï¼Œæ­é©¬è…¿æŠ½ç­‹æ‰çŸ¥é“é‚£ä¸œè¥¿èƒ½æŠ‘åˆ¶æŠ½ç­‹ï¼Œåƒæˆ‘è·‘åœ¨æœ€åï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªæœåŠ¡ç‚¹éƒ½å–·æ²¡äº†ï¼Œæ‰€ä»¥è‡ªå¸¦è¿˜æ˜¯æœ‰å¿…è¦çš„ã€‚</li>
<li>è‚©åŒ…æˆ–è…°åŒ…ã€‚åƒçš„å–çš„æœåŠ¡ç‚¹éƒ½æœ‰ï¼Œè‡ªå·±å¯ä»¥ä¸ç”¨å¸¦ï¼›ä¸»è¦æ˜¯æ”¾æ‰‹æœºã€é’¥åŒ™ã€å–·é›¾ã€ç°é‡‘ã€‚</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘å¾®ä¿¡é‡Œçš„æœ‹å‹åº”è¯¥éƒ½çŸ¥é“ï¼Œä¸Šå‘¨ï¼ˆ2016/11/06ï¼‰ä¸å¤§ä¸Šå‘¨ï¼ˆ2016/10/30ï¼‰æˆ‘åˆ†åˆ«è·‘äº†æ­å·ä¸ä¸Šæµ·çš„é©¬æ‹‰æ¾ï¼Œç¬¬ä¸€åœºä¸Šæµ·ç«™å®Œæˆäº†äººç”Ÿé¦–ä¸ªåŠé©¬ï¼Œç¬¬äºŒåœºæ­å·ç«™å®Œæˆäº†äººç”Ÿé¦–ä¸ªå…¨é©¬ï¼ˆ42.195KMï¼‰ï¼Œç°è¶ç€è…¿è¿˜æœ‰ä¸€äº›é…¸ç—›ï¼Œå›é¡¾ä¸‹å½“åˆä¸ºä»€ä¹ˆè¦å‚åŠ é©¬æ‹‰æ¾ï¼Œä»¥åŠåœ¨è·‘å…¨é©¬æœ€ååå…¬é‡Œ
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
      <category term="é©¬æ‹‰æ¾" scheme="http://liujiacai.net/tags/%E9%A9%AC%E6%8B%89%E6%9D%BE/"/>
    
  </entry>
  
  <entry>
    <title>Socket ç¼–ç¨‹å®æˆ˜</title>
    <link href="http://liujiacai.net/blog/2016/10/31/socket-programming/"/>
    <id>http://liujiacai.net/blog/2016/10/31/socket-programming/</id>
    <published>2016-10-31T08:24:17.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>Socket åœ¨è‹±æ–‡ä¸­çš„å«ä¹‰ä¸ºâ€œï¼ˆè¿æ¥ä¸¤ä¸ªç‰©å“çš„ï¼‰å‡¹æ§½â€ï¼Œåƒ<code>the eye socket</code>ï¼Œæ„ä¸ºâ€œçœ¼çªâ€ï¼Œæ­¤å¤–è¿˜æœ‰â€œæ’åº§â€çš„æ„æ€ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œsocket é€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªè¿æ¥çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œè¿™é‡Œçš„è¿æ¥å¯ä»¥æ˜¯åŒä¸€æœºå™¨ä¸Šçš„ï¼Œåƒ<a href="https://en.wikipedia.org/wiki/Unix_domain_socket" target="_blank" rel="external">unix domain socket</a>ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸åŒæœºå™¨ä¸Šçš„ï¼Œåƒ<a href="https://en.wikipedia.org/wiki/Network_socket" target="_blank" rel="external">network socket</a>ã€‚</p>
<p>æœ¬æ–‡ç€é‡ä»‹ç»ç°åœ¨ç”¨çš„æœ€å¤šçš„ network socketï¼ŒåŒ…æ‹¬å…¶åœ¨ç½‘ç»œæ¨¡å‹ä¸­çš„ä½ç½®ã€API çš„ç¼–ç¨‹èŒƒå¼ã€å¸¸è§é”™è¯¯ç­‰æ–¹é¢ï¼Œæœ€åç”¨ Python è¯­è¨€ä¸­çš„ socket API å®ç°å‡ ä¸ªå®é™…çš„ä¾‹å­ã€‚Socket ä¸­æ–‡ä¸€èˆ¬ç¿»è¯‘ä¸ºâ€œå¥—æ¥å­—â€ï¼Œä¸å¾—ä¸è¯´è¿™æ˜¯ä¸ªè®©äººæ‘¸ä¸ç€å¤´è„‘çš„ç¿»è¯‘ï¼Œæˆ‘ä¹Ÿæ²¡æƒ³åˆ°å•¥â€œä¿¡è¾¾é›…â€çš„ç¿»è¯‘ï¼Œæ‰€ä»¥æœ¬æ–‡ç›´æ¥ç”¨å…¶è‹±æ–‡è¡¨è¿°ã€‚æœ¬æ–‡ä¸­æ‰€æœ‰ä»£ç å‡å¯åœ¨ <a href="https://github.com/jiacai2050/socket.py" target="_blank" rel="external">socket.py</a> ä»“åº“ä¸­æ‰¾åˆ°ã€‚</p>
<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Socket ä½œä¸ºä¸€ç§é€šç”¨çš„æŠ€æœ¯è§„èŒƒï¼Œé¦–æ¬¡æ˜¯ç”± Berkeley å¤§å­¦åœ¨ 1983 ä¸º 4.2BSD Unix æä¾›çš„ï¼Œåæ¥é€æ¸æ¼”åŒ–ä¸º POSIX æ ‡å‡†ã€‚Socket API æ˜¯ç”±æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ä¸ªç¼–ç¨‹æ¥å£ï¼Œè®©åº”ç”¨ç¨‹åºå¯ä»¥æ§åˆ¶ä½¿ç”¨ socket æŠ€æœ¯ã€‚Unix å“²å­¦ä¸­æœ‰ä¸€æ¡<code>ä¸€åˆ‡çš†ä¸ºæ–‡ä»¶</code>ï¼Œæ‰€ä»¥ <code>socket</code> å’Œ <code>file</code> çš„ API ä½¿ç”¨å¾ˆç±»ä¼¼ï¼šå¯ä»¥è¿›è¡Œ<code>read</code>ã€<code>write</code>ã€<code>open</code>ã€<code>close</code>ç­‰æ“ä½œã€‚</p>
<p>ç°åœ¨çš„ç½‘ç»œç³»ç»Ÿæ˜¯åˆ†å±‚çš„ï¼Œç†è®ºä¸Šæœ‰<a href="https://en.wikipedia.org/wiki/OSI_model" target="_blank" rel="external">OSIæ¨¡å‹</a>ï¼Œå·¥ä¸šç•Œæœ‰<a href="https://en.wikipedia.org/wiki/Internet_protocol_suite" target="_blank" rel="external">TCP/IPåè®®ç°‡</a>ã€‚å…¶å¯¹æ¯”å¦‚ä¸‹ï¼š</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2V0wfbmqJ.eBjy1zbXXbx8FXa_!!581166664.gif" alt=" osi vs tcp/ip"><br></center><br>æ¯å±‚ä¸Šéƒ½æœ‰å…¶ç›¸åº”çš„åè®®ï¼Œsocket API ä¸å±äºTCP/IPåè®®ç°‡ï¼Œåªæ˜¯æ“ä½œç³»ç»Ÿæä¾›çš„ä¸€ä¸ªç”¨äºç½‘ç»œç¼–ç¨‹çš„æ¥å£ï¼Œå·¥ä½œåœ¨åº”ç”¨å±‚ä¸ä¼ è¾“å±‚ä¹‹é—´ï¼š<br><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2fzkbbhmJ.eBjy0FhXXbBdFXa_!!581166664.gif" alt="where socket works in tcp/ip"><br></center>

<p>æˆ‘ä»¬å¹³å¸¸æµè§ˆç½‘ç«™æ‰€ä½¿ç”¨çš„httpåè®®ï¼Œæ”¶å‘é‚®ä»¶ç”¨çš„smtpä¸imapï¼Œéƒ½æ˜¯åŸºäº socket API æ„å»ºçš„ã€‚</p>
<p>ä¸€ä¸ª socketï¼ŒåŒ…å«ä¸¤ä¸ªå¿…è¦ç»„æˆéƒ¨åˆ†ï¼š</p>
<ol>
<li>åœ°å€ï¼Œç”± ip ä¸ ç«¯å£ç»„æˆï¼Œåƒ<code>192.168.0.1:80</code>ã€‚</li>
<li>åè®®ï¼Œsocket æ‰€æ˜¯ç”¨çš„ä¼ è¾“åè®®ï¼Œç›®å‰æœ‰ä¸‰ç§ï¼š<a href="https://en.wikipedia.org/wiki/Transmission_Control_Protocol" target="_blank" rel="external">TCP</a>ã€<a href="https://en.wikipedia.org/wiki/User_Datagram_Protocol" target="_blank" rel="external">UDP</a>ã€<a href="https://en.wikipedia.org/wiki/Raw_socket" target="_blank" rel="external">raw IP</a>ã€‚</li>
</ol>
<p>åœ°å€ä¸åè®®å¯ä»¥ç¡®å®šä¸€ä¸ªsocketï¼›ä¸€å°æœºå™¨ä¸Šï¼Œåªå…è®¸å­˜åœ¨ä¸€ä¸ªåŒæ ·çš„socketã€‚TCP ç«¯å£ 53 çš„ socket ä¸ UDP ç«¯å£ 53 çš„ socket æ˜¯ä¸¤ä¸ªä¸åŒçš„ socketã€‚</p>
<p>æ ¹æ® socket ä¼ è¾“æ•°æ®æ–¹å¼çš„ä¸åŒï¼ˆä½¿ç”¨åè®®ä¸åŒï¼‰ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p>
<ol>
<li><a href="https://en.wikipedia.org/wiki/Stream_socket" target="_blank" rel="external">Stream sockets</a>ï¼Œä¹Ÿç§°ä¸ºâ€œé¢å‘è¿æ¥â€çš„ socketï¼Œä½¿ç”¨ TCP åè®®ã€‚å®é™…é€šä¿¡å‰éœ€è¦è¿›è¡Œè¿æ¥ï¼Œä¼ è¾“çš„æ•°æ®æ²¡æœ‰ç‰¹å®šçš„ç»“æ„ï¼Œæ‰€ä»¥é«˜å±‚åè®®éœ€è¦è‡ªå·±å»ç•Œå®šæ•°æ®çš„åˆ†éš”ç¬¦ï¼Œä½†å…¶ä¼˜åŠ¿æ˜¯æ•°æ®æ˜¯å¯é çš„ã€‚</li>
<li><a href="https://en.wikipedia.org/wiki/Datagram_socket" target="_blank" rel="external">Datagram sockets</a>ï¼Œä¹Ÿç§°ä¸ºâ€œæ— è¿æ¥â€çš„ socketï¼Œä½¿ç”¨ UDP åè®®ã€‚å®é™…é€šä¿¡å‰ä¸éœ€è¦è¿æ¥ï¼Œä¸€ä¸ªä¼˜åŠ¿æ—¶ UDP çš„æ•°æ®åŒ…è‡ªèº«æ˜¯å¯åˆ†å‰²çš„ï¼ˆself-delimitingï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªæ•°æ®åŒ…å°±æ ‡ç¤ºäº†æ•°æ®çš„å¼€å§‹ä¸ç»“æŸï¼Œå…¶åŠ£åŠ¿æ˜¯æ•°æ®ä¸å¯é ã€‚</li>
<li><a href="https://en.wikipedia.org/wiki/Raw_socket" target="_blank" rel="external">Raw sockets</a>ï¼Œé€šå¸¸ç”¨åœ¨è·¯ç”±å™¨æˆ–å…¶ä»–ç½‘ç»œè®¾å¤‡ä¸­ï¼Œè¿™ç§ socket ä¸ç»è¿‡TCP/IPåè®®ç°‡ä¸­çš„ä¼ è¾“å±‚ï¼ˆtransport layerï¼‰ï¼Œç›´æ¥ç”±ç½‘ç»œå±‚ï¼ˆInternet layerï¼‰é€šå‘åº”ç”¨å±‚ï¼ˆApplication layerï¼‰ï¼Œæ‰€ä»¥è¿™æ—¶çš„æ•°æ®åŒ…å°±ä¸ä¼šåŒ…å« tcp æˆ– udp å¤´ä¿¡æ¯ã€‚<br><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2qOeFX3hJc1FjSZFDXXbvnFXa_!!581166664.png_310x310.jpg" alt=" æ•°æ®åŒ…åœ¨å„ä¸ªå±‚é—´çš„å˜æ›´"><br></center><h2 id="Python-socket-API"><a href="#Python-socket-API" class="headerlink" title="Python socket API"></a>Python socket API</h2></li>
</ol>
<p>Python é‡Œé¢ç”¨<code>(ip, port)</code>çš„å…ƒç»„æ¥è¡¨ç¤º socket çš„åœ°å€å±æ€§ï¼Œç”¨<code>AF_*</code>æ¥è¡¨ç¤ºåè®®ç±»å‹ã€‚<br>æ•°æ®é€šä¿¡æœ‰ä¸¤ç»„åŠ¨è¯å¯ä¾›é€‰æ‹©ï¼š<code>send/recv</code> æˆ– <code>read/write</code>ã€‚<code>read/write</code> æ–¹å¼ä¹Ÿæ˜¯ Java é‡‡ç”¨çš„æ–¹å¼ï¼Œè¿™é‡Œä¸ä¼šå¯¹è¿™ç§æ–¹å¼è¿›è¡Œè¿‡å¤šçš„è§£é‡Šï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼š</p>
<blockquote>
<p><code>read/write</code> æ“ä½œçš„å…·æœ‰ buffer çš„â€œæ–‡ä»¶â€ï¼Œæ‰€ä»¥åœ¨è¿›è¡Œè¯»å†™åéœ€è¦è°ƒç”¨<code>flush</code>æ–¹æ³•å»çœŸæ­£å‘é€æˆ–è¯»å–æ•°æ®ï¼Œå¦åˆ™æ•°æ®ä¼šä¸€ç›´åœç•™åœ¨ç¼“å†²åŒºå†…ã€‚</p>
</blockquote>
<h3 id="TCP-socket"><a href="#TCP-socket" class="headerlink" title="TCP socket"></a>TCP socket</h3><p>TCP socket ç”±äºåœ¨é€šä¿¡å‰éœ€è¦å»ºç«‹è¿æ¥ï¼Œæ‰€ä»¥å…¶æ¨¡å¼è¾ƒ UDP socket å¤æ‚äº›ã€‚å…·ä½“å¦‚ä¸‹ï¼š</p>
<center><br><img width="400px" height="700px" src="https://img.alicdn.com/imgextra/i1/581166664/TB2egBSbOKO.eBjSZPhXXXqcpXa_!!581166664.png_620x10000.jpg" alt="TCP socket API "><br></center>

<p>API çš„å…·ä½“å«ä¹‰è¿™é‡Œä¸åœ¨èµ˜è¿°ï¼Œå¯ä»¥æŸ¥çœ‹<a href="https://en.wikipedia.org/wiki/Berkeley_sockets#Socket_API_functions" target="_blank" rel="external">æ‰‹å†Œ</a>ï¼Œè¿™é‡Œç»™å‡º Python è¯­è¨€å®ç°çš„ echo serverã€‚</p>
<ul>
<li><a href="https://github.com/jiacai2050/socket.py/blob/master/simple_tcp_echo/echo_server.py" target="_blank" rel="external">echo_server.py</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import socket</div><div class="line"></div><div class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line"></div><div class="line">def handler(client_sock, addr):</div><div class="line">    try:</div><div class="line">        print(&apos;new client from %s:%s&apos; % addr)</div><div class="line">        msg = client_sock.recv(100)</div><div class="line">        client_sock.send(msg)</div><div class="line">        print(&apos;received data[%s] from %s:%s&apos; % ((msg,) + addr))</div><div class="line">    finally:</div><div class="line">        client_sock.close()</div><div class="line">        print(&apos;client[%s:%s] socket closed&apos; % addr)</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    # è®¾ç½® SO_REUSEADDR å,å¯ä»¥ç«‹å³ä½¿ç”¨ TIME_WAIT çŠ¶æ€çš„ socket</div><div class="line">    sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</div><div class="line">    sock.bind((&apos;&apos;, 5500))</div><div class="line">    sock.listen(5)</div><div class="line"></div><div class="line">    while 1:</div><div class="line">        client_sock, addr = sock.accept()</div><div class="line">        handler(client_sock, addr)</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/jiacai2050/socket.py/blob/master/simple_tcp_echo/echo_client.py" target="_blank" rel="external">echo_client.py</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import socket</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">    data_to_sent = &apos;hello tcp socket&apos;</div><div class="line">    try:</div><div class="line">        sock.connect((&apos;&apos;, 5500))</div><div class="line"></div><div class="line">        sent = sock.send(data_to_sent)</div><div class="line">        print(sock.recv(1024))</div><div class="line">    finally:</div><div class="line">        sock.close()</div><div class="line">print(&apos;socket closed&apos;)</div></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼šserver ç«¯çš„ socket è®¾ç½®äº†<code>SO_REUSEADDR</code>ä¸º1ï¼Œç›®çš„æ˜¯å¯ä»¥ç«‹å³ä½¿ç”¨å¤„äº<code>TIME_WAIT</code>çŠ¶æ€çš„socketï¼Œé‚£ä¹ˆ<code>TIME_WAIT</code>åˆæ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿåé¢åœ¨è®²è§£ <a href="#TCP_çš„çŠ¶æ€æœº">tcp çŠ¶æ€æœº</a>æ—¶å†åšè¯¦ç»†ä»‹ç»ã€‚</p>
<h3 id="UDP-socket"><a href="#UDP-socket" class="headerlink" title="UDP socket"></a>UDP socket</h3><center><br><img width="400px" height="400px" src="https://img.alicdn.com/imgextra/i3/581166664/TB2.pEmbmGI.eBjSspcXXcVjFXa_!!581166664.jpg_620x10000.jpg" alt=" udp_socket_api"><br></center>

<p>UDP ç‰ˆçš„ socket server çš„ä»£ç åœ¨è¿›è¡Œ<code>bind</code>åï¼Œæ— éœ€è°ƒç”¨<code>listen</code>æ–¹æ³•ã€‚</p>
<ul>
<li><a href="https://github.com/jiacai2050/socket.py/blob/master/simple_udp_echo/echo_server.py" target="_blank" rel="external">udp_echo_server.py</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import socket</div><div class="line"></div><div class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div><div class="line"># è®¾ç½® SO_REUSEADDR å,å¯ä»¥ç«‹å³ä½¿ç”¨ TIME_WAIT çŠ¶æ€çš„ socket</div><div class="line">sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)</div><div class="line">sock.bind((&apos;&apos;, 5500))</div><div class="line"># æ²¡æœ‰è°ƒç”¨ listen</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    while 1:</div><div class="line">        data, addr = sock.recvfrom(1024)</div><div class="line"></div><div class="line">        print(&apos;new client from %s:%s&apos; % addr)</div><div class="line">        sock.sendto(data, addr)</div></pre></td></tr></table></figure>
<ul>
<li><a href="https://github.com/jiacai2050/socket.py/blob/master/simple_udp_echo/echo_client.py" target="_blank" rel="external">udp_echo_client.py</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import socket</div><div class="line"></div><div class="line">udp_server_addr = (&apos;&apos;, 5500)</div><div class="line"></div><div class="line">if __name__ == &apos;__main__&apos;:</div><div class="line">    sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)</div><div class="line">    data_to_sent = &apos;hello udp socket&apos;</div><div class="line">    try:</div><div class="line">        sent = sock.sendto(data_to_sent, udp_server_addr)</div><div class="line">        data, server = sock.recvfrom(1024)</div><div class="line">        print(&apos;receive data:[%s] from %s:%s&apos; % ((data,) + server))</div><div class="line">    finally:</div><div class="line">        sock.close()</div></pre></td></tr></table></figure>
<h2 id="å¸¸è§é™·é˜±"><a href="#å¸¸è§é™·é˜±" class="headerlink" title="å¸¸è§é™·é˜±"></a>å¸¸è§é™·é˜±</h2><h3 id="å¿½ç•¥è¿”å›å€¼"><a href="#å¿½ç•¥è¿”å›å€¼" class="headerlink" title="å¿½ç•¥è¿”å›å€¼"></a>å¿½ç•¥è¿”å›å€¼</h3><p>æœ¬æ–‡ä¸­çš„ echo server ç¤ºä¾‹å› ä¸ºç¯‡å¹…é™åˆ¶ï¼Œä¹Ÿå¿½ç•¥äº†è¿”å›å€¼ã€‚ç½‘ç»œé€šä¿¡æ˜¯ä¸ªéå¸¸å¤æ‚çš„é—®é¢˜ï¼Œé€šå¸¸æ— æ³•ä¿éšœé€šä¿¡åŒæ–¹çš„ç½‘ç»œçŠ¶æ€ï¼Œå¾ˆæœ‰å¯èƒ½åœ¨å‘é€/æ¥æ”¶æ•°æ®æ—¶å¤±è´¥æˆ–éƒ¨åˆ†å¤±è´¥ã€‚æ‰€ä»¥æœ‰å¿…è¦å¯¹å‘é€/æ¥æ”¶å‡½æ•°çš„è¿”å›å€¼è¿›è¡Œæ£€æŸ¥ã€‚æœ¬æ–‡ä¸­çš„ tcp echo client å‘é€æ•°æ®æ—¶ï¼Œæ­£ç¡®å†™æ³•åº”è¯¥å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">total_send = 0</div><div class="line">content_length = len(data_to_sent)</div><div class="line">while total_send &lt; content_length:</div><div class="line">    sent = sock.send(data_to_sent[total_send:])</div><div class="line">    if sent == 0:</div><div class="line">        raise RuntimeError(&quot;socket connection broken&quot;)</div><div class="line">    total_send += total_send + sent</div></pre></td></tr></table></figure>
<p>åŒç†ï¼Œæ¥æ”¶æ•°æ®æ—¶ä¹Ÿåº”è¯¥æ£€æŸ¥è¿”å›å€¼ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">chunks = []</div><div class="line">bytes_recd = 0</div><div class="line">while bytes_recd &lt; MSGLEN:   # MSGLEN ä¸ºå®é™…æ•°æ®å¤§å°</div><div class="line">    chunk = self.sock.recv(min(MSGLEN - bytes_recd, 2048))</div><div class="line">    if chunk == b&apos;&apos;:</div><div class="line">        raise RuntimeError(&quot;socket connection broken&quot;)</div><div class="line">    chunks.append(chunk)</div><div class="line">    bytes_recd = bytes_recd + len(chunk)</div><div class="line">return b&apos;&apos;.join(chunks)</div></pre></td></tr></table></figure>
<p><code>send/recv</code>æ“ä½œçš„æ˜¯ç½‘ç»œç¼“å†²åŒºçš„æ•°æ®ï¼Œå®ƒä»¬ä¸å¿…å¤„ç†ä¼ å…¥çš„æ‰€æœ‰æ•°æ®ã€‚</p>
<blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“ç½‘ç»œç¼“å†²åŒºå¡«æ»¡æ—¶ï¼Œ<a href="https://docs.python.org/3/library/socket.html#socket.socket.send" target="_blank" rel="external">sendå‡½æ•°</a>å°±è¿”å›äº†ï¼›å½“ç½‘ç»œç¼“å†²åŒºè¢«æ¸…ç©ºæ—¶ï¼Œ<a href="https://docs.python.org/3/library/socket.html#socket.socket.recv" target="_blank" rel="external">recv å‡½æ•°</a>å°±è¿”å›ã€‚</p>
</blockquote>
<p>å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è®¾ç½®ç¼“å†²åŒºå¤§å°ã€‚</p>
<pre><code>s.setsockopt(socket.SOL_SOCKET, socket.SO_SNDBUF, buffer_size)  # å‘é€
s.setsockopt(socket.SOL_SOCKET, socket.SO_RCVBUF, buffer_size)  # æ¥å—
</code></pre><h3 id="è¯¯è®¤ä¸º-TCP-å…·æœ‰-framing"><a href="#è¯¯è®¤ä¸º-TCP-å…·æœ‰-framing" class="headerlink" title="è¯¯è®¤ä¸º TCP å…·æœ‰ framing"></a>è¯¯è®¤ä¸º TCP å…·æœ‰ framing</h3><p>TCP ä¸æä¾› framingï¼Œè¿™ä½¿å¾—å…¶å¾ˆé€‚åˆäºä¼ è¾“æ•°æ®æµã€‚è¿™æ˜¯å…¶ä¸ UDP çš„é‡è¦åŒºåˆ«ä¹‹ä¸€ã€‚UDP æ˜¯ä¸€ä¸ªé¢å‘æ¶ˆæ¯çš„åè®®ï¼Œèƒ½ä¿æŒä¸€æ¡æ¶ˆæ¯åœ¨å‘é€è€…ä¸æ¥å—è€…ä¹‹é—´çš„å®Œå¤‡æ€§ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2SB4bbB9J.eBjy0FoXXXyvpXa_!!581166664.gif" alt="Framing capabilities of UDP and the lack of framing in TCP"><br></center>

<p>ä»£ç ç¤ºä¾‹å‚è€ƒï¼š<a href="https://github.com/jiacai2050/socket.py/tree/master/framing_assumptions" target="_blank" rel="external">framing_assumptions</a></p>
<h2 id="TCP-çš„çŠ¶æ€æœº"><a href="#TCP-çš„çŠ¶æ€æœº" class="headerlink" title="TCP çš„çŠ¶æ€æœº"></a>TCP çš„çŠ¶æ€æœº</h2><p>åœ¨å‰é¢echo server çš„ç¤ºä¾‹ä¸­ï¼Œæåˆ°äº†TIME_WAITçŠ¶æ€ï¼Œä¸ºäº†æ­£å¼ä»‹ç»å…¶æ¦‚å¿µï¼Œéœ€è¦äº†è§£ä¸‹ TCP ä»ç”Ÿæˆåˆ°ç»“æŸçš„çŠ¶æ€æœºã€‚ï¼ˆ<a href="https://www.ibm.com/support/knowledgecenter/SSLTBW_2.1.0/com.ibm.zos.v2r1.halu101/constatus.htm" target="_blank" rel="external">å›¾ç‰‡æ¥æº</a>ï¼‰</p>
<center><br><img width="500px" height="600px" src="https://img.alicdn.com/imgextra/i2/581166664/TB2Us0HbNeK.eBjSZFlXXaywXXa_!!581166664.gif" alt=" tcp_state transition"><br></center>

<p>è¿™ä¸ªçŠ¶å›¾è½¬ç§»å›¾éå¸¸éå¸¸å…³é”®ï¼Œä¹Ÿæ¯”è¾ƒå¤æ‚ï¼Œæˆ‘è‡ªå·±ä¸ºäº†æ–¹ä¾¿è®°å¿†ï¼Œå¯¹è¿™ä¸ªå›¾è¿›è¡Œäº†æ‹†è§£ï¼Œä»”ç»†åˆ†æè¿™ä¸ªå›¾ï¼Œå¯ä»¥å¾—å‡ºè¿™æ ·ä¸€ä¸ªç»“è®ºï¼š</p>
<blockquote>
<p>è¿æ¥çš„æ‰“å¼€ä¸å…³é—­æœ‰è¢«åŠ¨ï¼ˆpassiveï¼‰ä¸ä¸»åŠ¨ï¼ˆactiveï¼‰ä¸¤ç§æƒ…å†µã€‚ä¸»åŠ¨å…³é—­æ—¶ï¼Œæ¶‰åŠåˆ°çš„çŠ¶æ€è½¬ç§»æœ€å¤šï¼ŒåŒ…æ‹¬FIN_WAIT_1ã€FIN_WAIT_2ã€CLOSINGã€TIME_WAITã€‚ï¼ˆæ˜¯ä¸æ˜¯æœ‰ç§ no zuo no die çš„æ„Ÿè§‰ï¼‰</p>
</blockquote>
<p>æ­¤å¤–ï¼Œç”±äº TCP æ˜¯å¯é çš„ä¼ è¾“åè®®ï¼Œæ‰€ä»¥æ¯æ¬¡å‘é€ä¸€ä¸ªæ•°æ®åŒ…åï¼Œéƒ½éœ€è¦å¾—åˆ°å¯¹æ–¹çš„ç¡®è®¤ï¼ˆACKï¼‰ï¼Œæœ‰äº†ä¸Šé¢è¿™ä¸¤ä¸ªçŸ¥è¯†åï¼Œå†æ¥çœ‹ä¸‹é¢çš„å›¾ï¼šï¼ˆ<a href="http://coolshell.cn/articles/11564.html" target="_blank" rel="external">å›¾ç‰‡æ¥æº</a>ï¼‰</p>
<center><br><img width="400px" height="500px" src="https://img.alicdn.com/imgextra/i4/581166664/TB2nwCFbNaK.eBjSZFwXXXjsFXa_!!581166664.jpg" alt=" tcp å…³é—­æ—¶çš„çŠ¶æ€è½¬ç§»æ—¶åºå›¾"><br></center>

<ol>
<li>åœ¨ä¸»åŠ¨å…³é—­è¿æ¥çš„ socket è°ƒç”¨ <code>close</code>æ–¹æ³•çš„åŒæ—¶ï¼Œä¼šå‘è¢«åŠ¨å…³é—­ç«¯å‘é€ä¸€ä¸ª FIN</li>
<li>å¯¹ç«¯æ”¶åˆ°FINåï¼Œä¼šå‘ä¸»åŠ¨å…³é—­ç«¯å‘é€ACKè¿›è¡Œç¡®è®¤ï¼Œè¿™æ—¶è¢«åŠ¨å…³é—­ç«¯å¤„äº CLOSE_WAIT çŠ¶æ€</li>
<li>å½“è¢«åŠ¨å…³é—­ç«¯è°ƒç”¨<code>close</code>æ–¹æ³•è¿›è¡Œå…³é—­çš„åŒæ—¶å‘ä¸»åŠ¨å…³é—­ç«¯å‘é€ FIN ä¿¡å·ï¼Œæ¥æ”¶åˆ° FIN çš„ä¸»åŠ¨å…³é—­ç«¯è¿™æ—¶å°±å¤„äº TIME_WAIT çŠ¶æ€</li>
<li>è¿™æ—¶ä¸»åŠ¨å…³é—­ç«¯ä¸ä¼šç«‹åˆ»è½¬ä¸º CLOSED çŠ¶æ€ï¼Œè€Œæ˜¯éœ€è¦ç­‰å¾… 2MSLï¼ˆmax segment lifeï¼Œä¸€ä¸ªæ•°æ®åŒ…åœ¨ç½‘ç»œä¼ è¾“ä¸­æœ€å¤§çš„ç”Ÿå‘½å‘¨æœŸï¼‰ï¼Œä»¥ç¡®ä¿è¢«åŠ¨å…³é—­ç«¯èƒ½å¤Ÿæ”¶åˆ°æœ€åå‘å‡ºçš„ ACKã€‚å¦‚æœè¢«åŠ¨å…³é—­ç«¯æ²¡æœ‰æ”¶åˆ°æœ€åçš„ ACKï¼Œé‚£ä¹ˆè¢«åŠ¨å…³é—­ç«¯å°±ä¼šé‡æ–°å‘é€ FINï¼Œæ‰€ä»¥å¤„äºTIME_WAITçš„ä¸»åŠ¨å…³é—­ç«¯ä¼šå†æ¬¡å‘é€ä¸€ä¸ª ACK ä¿¡å·ï¼Œè¿™ä¹ˆä¸€æ¥ï¼ˆFINæ¥ï¼‰ä¸€å›ï¼ˆACKï¼‰ï¼Œæ­£å¥½æ˜¯ä¸¤ä¸ª MSL çš„æ—¶é—´ã€‚å¦‚æœç­‰å¾…çš„æ—¶é—´å°äº 2MSLï¼Œé‚£ä¹ˆæ–°çš„socketå°±å¯ä»¥æ”¶åˆ°ä¹‹å‰è¿æ¥çš„æ•°æ®ã€‚</li>
</ol>
<p>å‰é¢ echo server çš„ç¤ºä¾‹ä¹Ÿè¯´æ˜äº†ï¼Œå¤„äº TIME_WAIT å¹¶ä¸æ˜¯è¯´ä¸€å®šä¸èƒ½ä½¿ç”¨ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® socket çš„ <code>SO_REUSEADDR</code> å±æ€§ä»¥è¾¾åˆ°ä¸ç”¨ç­‰å¾… 2MSL çš„æ—¶é—´å°±å¯ä»¥å¤ç”¨socket çš„ç›®çš„ï¼Œå½“ç„¶ï¼Œè¿™ä»…ä»…é€‚ç”¨äºæµ‹è¯•ç¯å¢ƒï¼Œæ­£å¸¸æƒ…å†µä¸‹ä¸è¦ä¿®æ”¹è¿™ä¸ªå±æ€§ã€‚</p>
<h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><h3 id="HTTP-UA"><a href="#HTTP-UA" class="headerlink" title="HTTP UA"></a>HTTP UA</h3><p>http åè®®æ˜¯å¦‚ä»Šä¸‡ç»´ç½‘çš„åŸºçŸ³ï¼Œå¯ä»¥é€šè¿‡ socket API æ¥ç®€å•æ¨¡æ‹Ÿä¸€ä¸ªæµè§ˆå™¨ï¼ˆUAï¼‰æ˜¯å¦‚ä½•è§£æ HTTP åè®®æ•°æ®çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">import socket</div><div class="line"></div><div class="line">sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</div><div class="line">baidu_ip = socket.gethostbyname(&apos;baidu.com&apos;)</div><div class="line">sock.connect((baidu_ip, 80))</div><div class="line">print(&apos;connected to %s&apos; % baidu_ip)</div><div class="line"></div><div class="line">req_msg = [</div><div class="line">    &apos;GET / HTTP/1.1&apos;,</div><div class="line">    &apos;User-Agent: curl/7.37.1&apos;,</div><div class="line">    &apos;Host: baidu.com&apos;,</div><div class="line">    &apos;Accept: */*&apos;,</div><div class="line">]</div><div class="line">delimiter = &apos;\r\n&apos;</div><div class="line"></div><div class="line">sock.send(delimiter.join(req_msg))</div><div class="line">sock.send(delimiter)</div><div class="line">sock.send(delimiter)</div><div class="line"></div><div class="line">print(&apos;%sreceived%s&apos; % (&apos;-&apos;*20, &apos;-&apos;*20))</div><div class="line">http_response = sock.recv(4096)</div><div class="line">print(http_response)</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸Šé¢çš„ä»£ç å¯ä»¥å¾—åˆ°ä¸‹é¢çš„è¾“å‡º</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">--------------------received--------------------</div><div class="line">HTTP/1.1 200 OK</div><div class="line">Date: Tue, 01 Nov 2016 12:16:53 GMT</div><div class="line">Server: Apache</div><div class="line">Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</div><div class="line">ETag: &quot;51-47cf7e6ee8400&quot;</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: 81</div><div class="line">Cache-Control: max-age=86400</div><div class="line">Expires: Wed, 02 Nov 2016 12:16:53 GMT</div><div class="line">Connection: Keep-Alive</div><div class="line">Content-Type: text/html</div><div class="line"></div><div class="line">&lt;html&gt;</div><div class="line">&lt;meta http-equiv=&quot;refresh&quot; content=&quot;0;url=http://www.baidu.com/&quot;&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p><code>http_response</code>æ˜¯é€šè¿‡ç›´æ¥è°ƒç”¨<code>recv(4096)</code>å¾—åˆ°çš„ï¼Œä¸‡ä¸€çœŸæ­£çš„è¿”å›å¤§äºè¿™ä¸ªå€¼æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬å‰é¢çŸ¥é“äº† TCP åè®®æ˜¯é¢å‘æµçš„ï¼Œå®ƒæœ¬èº«å¹¶ä¸å…³å¿ƒæ¶ˆæ¯çš„å†…å®¹ï¼Œéœ€è¦åº”ç”¨ç¨‹åºè‡ªå·±å»ç•Œå®šæ¶ˆæ¯çš„è¾¹ç•Œï¼Œå¯¹äºåº”ç”¨å±‚çš„ HTTP åè®®æ¥è¯´ï¼Œæœ‰å‡ ç§æƒ…å†µï¼Œæœ€ç®€å•çš„ä¸€ç§æ—¶é€šè¿‡è§£æè¿”å›å€¼å¤´éƒ¨çš„<code>Content-Length</code>å±æ€§ï¼Œè¿™æ ·å°±çŸ¥é“<code>body</code>çš„å¤§å°äº†ï¼Œå¯¹äº HTTP 1.1ç‰ˆæœ¬ï¼Œæ”¯æŒ<code>Transfer-Encoding: chunked</code>ä¼ è¾“ï¼Œå¯¹äºè¿™ç§æ ¼å¼ï¼Œè¿™é‡Œä¸åœ¨å±•å¼€è®²è§£ï¼Œå¤§å®¶åªéœ€è¦çŸ¥é“ï¼Œ TCP åè®®æœ¬èº«æ— æ³•åŒºåˆ†æ¶ˆæ¯ä½“å°±å¯ä»¥äº†ã€‚å¯¹è¿™å—æ„Ÿå…´è¶£çš„å¯ä»¥æŸ¥çœ‹ CPython æ ¸å¿ƒæ¨¡å— <a href="https://github.com/python/cpython/blob/master/Lib/http/client.py" target="_blank" rel="external">http.client</a></p>
<h3 id="Unix-domain-socket"><a href="#Unix-domain-socket" class="headerlink" title="Unix_domain_socket"></a>Unix_domain_socket</h3><p>UDS ç”¨äºåŒä¸€æœºå™¨ä¸Šä¸åŒè¿›ç¨‹é€šä¿¡çš„ä¸€ç§æœºåˆ¶ï¼Œå…¶APIé€‚ç”¨ä¸ network socket å¾ˆç±»ä¼¼ã€‚åªæ˜¯å…¶è¿æ¥åœ°å€ä¸ºæœ¬åœ°æ–‡ä»¶è€Œå·²ã€‚</p>
<p>ä»£ç ç¤ºä¾‹å‚è€ƒï¼š<a href="https://github.com/jiacai2050/socket.py/blob/master/in_action/uds_server.py" target="_blank" rel="external">uds_server.py</a>ã€<a href="https://github.com/jiacai2050/socket.py/blob/master/in_action/uds_client.py" target="_blank" rel="external">uds_client.py</a></p>
<h3 id="ping"><a href="#ping" class="headerlink" title="ping"></a>ping</h3><p>ping å‘½ä»¤ä½œä¸ºæ£€æµ‹ç½‘ç»œè”é€šæ€§æœ€å¸¸ç”¨çš„å·¥å…·ï¼Œå…¶é€‚ç”¨çš„ä¼ è¾“åè®®æ—¢ä¸æ˜¯TCPï¼Œä¹Ÿä¸æ˜¯ UDPï¼Œè€Œæ˜¯ <a href="https://en.wikipedia.org/wiki/Internet_Control_Message_Protocol" target="_blank" rel="external">ICMP</a>ã€‚<br>ICMP æ¶ˆæ¯ï¼ˆmessagesï¼‰é€šå¸¸ç”¨äºè¯Šæ–­ IP åè®®äº§ç”Ÿçš„é”™è¯¯ï¼Œtraceroute å‘½ä»¤ä¹Ÿæ˜¯åŸºäº ICMP åè®®å®ç°ã€‚åˆ©ç”¨ Python raw sockets API å¯ä»¥æ¨¡æ‹Ÿå‘é€ ICMP æ¶ˆæ¯ï¼Œå®ç°ç±»ä¼¼ ping çš„åŠŸèƒ½ã€‚</p>
<p>ä»£ç ç¤ºä¾‹å‚è€ƒï¼š<a href="https://github.com/jiacai2050/socket.py/blob/master/in_action/ping.py" target="_blank" rel="external">ping.py</a></p>
<h3 id="netstat-vs-ss"><a href="#netstat-vs-ss" class="headerlink" title="netstat vs ss"></a>netstat vs ss</h3><p>netstat ä¸ ss æ˜¯ç±» Unix ç³»ç»Ÿä¸ŠæŸ¥çœ‹ Socket ä¿¡æ¯çš„å‘½ä»¤ã€‚<br>netstat æ˜¯æ¯”è¾ƒè€ç‰Œçš„å‘½ä»¤ï¼Œæˆ‘å¸¸ç”¨çš„é€‰æ‹©æœ‰</p>
<ul>
<li><code>-t</code>ï¼Œåªæ˜¾ç¤º tcp è¿æ¥</li>
<li><code>-u</code>ï¼Œåªæ˜¾ç¤º udp è¿æ¥</li>
<li><code>-n</code>ï¼Œä¸ç”¨è§£æhostnameï¼Œç”¨ IP æ˜¾ç¤ºä¸»æœºï¼Œå¯ä»¥åŠ å¿«æ‰§è¡Œé€Ÿåº¦</li>
<li><code>-p</code>ï¼ŒæŸ¥çœ‹è¿æ¥çš„è¿›ç¨‹ä¿¡æ¯</li>
<li><code>-l</code>ï¼Œåªæ˜¾ç¤ºç›‘å¬çš„è¿æ¥</li>
</ul>
<p>ss æ˜¯æ–°å…´çš„å‘½ä»¤ï¼Œå…¶é€‰é¡¹å’Œ netstat å·®ä¸å¤šï¼Œä¸»è¦åŒºåˆ«æ˜¯èƒ½å¤Ÿè¿›è¡Œè¿‡æ»¤ï¼ˆé€šè¿‡<code>state</code>ä¸<code>exclude</code>å…³é”®å­—ï¼‰ã€‚</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span> ss -o state time-wait -n | head</div><div class="line">Recv-Q Send-Q             Local Address:Port               Peer Address:Port</div><div class="line">0      0                 10.200.181.220:2222              10.200.180.28:12865  timer:(timewait,33sec,0)</div><div class="line">0      0                      127.0.0.1:45977                 127.0.0.1:3306   timer:(timewait,46sec,0)</div><div class="line">0      0                      127.0.0.1:45945                 127.0.0.1:3306   timer:(timewait,6.621ms,0)</div><div class="line">0      0                 10.200.181.220:2222              10.200.180.28:12280  timer:(timewait,12sec,0)</div><div class="line">0      0                 10.200.181.220:2222              10.200.180.28:35045  timer:(timewait,43sec,0)</div><div class="line">0      0                 10.200.181.220:2222              10.200.180.28:42675  timer:(timewait,46sec,0)</div><div class="line">0      0                      127.0.0.1:45949                 127.0.0.1:3306   timer:(timewait,11sec,0)</div><div class="line">0      0                      127.0.0.1:45954                 127.0.0.1:3306   timer:(timewait,21sec,0)</div><div class="line">0      0               ::ffff:127.0.0.1:3306           ::ffff:127.0.0.1:45964  timer:(timewait,31sec,0)</div></pre></td></tr></table></figure>
<p>è¿™ä¸¤ä¸ªå‘½ä»¤æ›´å¤šç”¨æ³•å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="http://www.cyberciti.biz/files/ss.html" target="_blank" rel="external">SS Utility: Quick Intro</a></li>
<li><a href="http://www.binarytides.com/linux-netstat-command-examples/" target="_blank" rel="external">10 basic examples of linux netstat command</a></li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬çš„ç”Ÿæ´»å·²ç»ç¦»ä¸å¼€ç½‘ç»œï¼Œå¹³æ—¶çš„å¼€å‘ä¹Ÿå……æ–¥ç€å„ç§å¤æ‚çš„ç½‘ç»œåº”ç”¨ï¼Œä»æœ€åŸºæœ¬çš„æ•°æ®åº“ï¼Œåˆ°å„ç§åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œä¸è®ºå…¶åº”ç”¨å±‚æ€ä¹ˆå¤æ‚ï¼Œå…¶åº•å±‚ä¼ è¾“æ•°æ®çš„çš„åè®®ç°‡æ˜¯ä¸€è‡´çš„ã€‚Socket è¿™ä¸€æ¦‚å¿µæˆ‘ä»¬å¾ˆå°‘ç›´æ¥ä¸å…¶æ‰“äº¤é“ï¼Œä½†æ˜¯å½“æˆ‘ä»¬çš„ç³»ç»Ÿå‡ºç°é—®é¢˜æ—¶ï¼Œå¾€å¾€æ˜¯å¯¹åº•å±‚çš„åè®®è®¤è¯†ä¸è¶³é€ æˆçš„ï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« èƒ½å¯¹å¤§å®¶ç¼–ç¨‹ç½‘ç»œæ–¹é¢çš„ç¨‹åºæœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://docs.python.org/3/howto/sockets.html" target="_blank" rel="external">Socket Programming HOWTO</a></li>
<li><a href="http://www.ibm.com/developerworks/library/l-sockpit/" target="_blank" rel="external">Five pitfalls of Linux sockets programming</a></li>
<li><a href="http://www.ibm.com/developerworks/linux/tutorials/l-sock/" target="_blank" rel="external">Programming Linux sockets, Part 1: Using TCP/IP</a></li>
<li><a href="http://stackoverflow.com/questions/10328675/how-to-know-content-length" target="_blank" rel="external">http://stackoverflow.com/questions/10328675/how-to-know-content-length</a></li>
<li><a href="http://electronicdesign.com/what-s-difference-between/what-s-difference-between-osi-seven-layer-network-model-and-tcpip" target="_blank" rel="external">Whatâ€™s The Difference Between The OSI Seven-Layer Network Model And TCP/IP?</a></li>
<li><a href="http://coolshell.cn/articles/11564.html" target="_blank" rel="external">TCP çš„é‚£äº›äº‹å„¿ï¼ˆä¸Šï¼‰</a></li>
<li><a href="https://vincent.bernat.im/en/blog/2014-tcp-time-wait-state-linux.html" target="_blank" rel="external">Coping with the TCP TIME-WAIT state on busy Linux servers</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Socket åœ¨è‹±æ–‡ä¸­çš„å«ä¹‰ä¸ºâ€œï¼ˆè¿æ¥ä¸¤ä¸ªç‰©å“çš„ï¼‰å‡¹æ§½â€ï¼Œåƒ&lt;code&gt;the eye socket&lt;/code&gt;ï¼Œæ„ä¸ºâ€œçœ¼çªâ€ï¼Œæ­¤å¤–è¿˜æœ‰â€œæ’åº§â€çš„æ„æ€ã€‚åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œsocket é€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªè¿æ¥çš„ä¸¤ä¸ªç«¯ç‚¹ï¼Œè¿™é‡Œçš„è¿æ¥å¯ä»¥æ˜¯åŒä¸€æœºå™¨ä¸Šçš„ï¼Œåƒ&lt;a href=&quot;https:
    
    </summary>
    
      <category term="ç†è§£è®¡ç®—æœº" scheme="http://liujiacai.net/categories/aha-computer/"/>
    
    
      <category term="Python" scheme="http://liujiacai.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Python2 ä¸­çš„ç¼–ç é—®é¢˜</title>
    <link href="http://liujiacai.net/blog/2016/06/30/python2-encoding/"/>
    <id>http://liujiacai.net/blog/2016/06/30/python2-encoding/</id>
    <published>2016-06-30T08:13:17.000Z</published>
    <updated>2017-08-11T01:27:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>å…ˆæ¥çœ‹ä¸€ä¸ªå¼‚å¸¸ä¿¡æ¯ï¼š</p>
<blockquote>
<p>UnicodeEncodeError: â€˜asciiâ€™ codec canâ€™t encode characters in position 51-52: ordinal not in range(128)</p>
</blockquote>
<p>ç›¸ä¿¡æ¯ä¸ª Python ç¨‹åºå‘˜å¯¹ä¸Šé¢è¿™ä¸ªé”™è¯¯éƒ½å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œä¹Ÿè®¸ä½ è¿™ä¸ªé—®é¢˜çš„æ ¹æºä»¥åŠè§£å†³æ–¹æ³•ä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œé‚£ä¹ˆè¿™ç¯‡æ–‡ç« å°†å°è¯•è§£ç­”ä½ å¿ƒä¸­çš„ç–‘æƒ‘ã€‚</p>
<h2 id="ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²"><a href="#ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²" class="headerlink" title="ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²"></a>ä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²</h2><blockquote>
<p>Everything you thought you knew about strings is wrong.</p>
</blockquote>
<p>è®¡ç®—æœºä¸­ï¼Œå¤„ç†å­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªçœ‹ä¼¼ç®€å•ä½†åŠå…¶å¤æ‚çš„é—®é¢˜ã€‚æ¨èæˆ‘ä¹‹å‰å†™çš„ä¸€æ–‡ç« <a href="/blog/2015/11/20/strings/">ã€Šå­—ç¬¦ä¸²ï¼Œé‚£äº›ä½ ä¸çŸ¥é“çš„äº‹ã€‹</a>ã€‚</p>
<h2 id="Python-2-ä¸­çš„å­—ç¬¦ç±»å‹"><a href="#Python-2-ä¸­çš„å­—ç¬¦ç±»å‹" class="headerlink" title="Python 2 ä¸­çš„å­—ç¬¦ç±»å‹"></a>Python 2 ä¸­çš„å­—ç¬¦ç±»å‹</h2><p>Python 2 ä¸­æœ‰ä¸¤ç§å­—ç¬¦ç±»å‹ï¼š<code>str</code>ä¸<code>unicode</code>ï¼Œå…¶<a href="http://stackoverflow.com/a/10288345/2163429" target="_blank" rel="external">åŒºåˆ«</a>æ˜¯ï¼š</p>
<blockquote>
<p>str is text representation in bytes, unicode is text representation in characters.</p>
</blockquote>
<p>å­—ç¬¦å­—é¢é‡æ˜¯<code>str</code>ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´<code>foo = &quot;ä½ å¥½&quot;</code>è¿™ä¸€èµ‹å€¼è¯­å¥è¡¨ç¤ºçš„æ˜¯æŠŠ<code>ä½ å¥½</code>æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚ï¼ˆè¿™é‡Œçš„å­—èŠ‚å°±æ˜¯Pythonè§£é‡Šå™¨è¯»å–æºæ–‡ä»¶æ—¶è¯»å–åˆ°çš„ï¼‰èµ‹å€¼ç»™å˜é‡<code>foo</code>ï¼Œåœ¨ Python 2 ä¸­çš„<code>str</code>ç±»å‹ç›¸å½“äºå…¶ä»–è¯­è¨€çš„<code>byte</code>ç±»å‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; &quot;ä½ å¥½&quot;</div><div class="line">&apos;\xe4\xbd\xa0\xe5\xa5\xbd&apos;</div></pre></td></tr></table></figure></p>
<p><code>unicode</code>å¯¹è±¡ä¿å­˜çš„æ˜¯å­—ç¬¦çš„<a href="https://pythonhosted.org/kitchen/glossary.html#term-code-point" target="_blank" rel="external">code point</a>ã€‚åœ¨ Python 2 å¦‚æœæƒ³è¡¨ç¤º <code>unicode</code> ç±»å‹ï¼Œæœ‰ä¸‹é¢ä¸‰ç§æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; u&quot;ä½ å¥½&quot;</div><div class="line">u&apos;\u4f60\u597d&apos;</div><div class="line">&gt;&gt;&gt; &quot;ä½ å¥½&quot;.decode(&quot;utf8&quot;)</div><div class="line">u&apos;\u4f60\u597d&apos;</div><div class="line">&gt;&gt;&gt; unicode(&quot;ä½ å¥½&quot;, &quot;utf8&quot;)</div><div class="line">u&apos;\u4f60\u597d&apos;</div></pre></td></tr></table></figure></p>
<h2 id="Python-2-ä¸­çš„é»˜è®¤ç¼–ç "><a href="#Python-2-ä¸­çš„é»˜è®¤ç¼–ç " class="headerlink" title="Python 2 ä¸­çš„é»˜è®¤ç¼–ç "></a>Python 2 ä¸­çš„é»˜è®¤ç¼–ç </h2><p><code>sys.getdefaultencoding()</code>å¯ä»¥å¾—åˆ°å½“å‰ Python ç¯å¢ƒçš„é»˜è®¤ç¼–ç ï¼ŒPython 2 ä¸­ä¸º<code>ascii</code>ã€‚<code>str</code>ä¸<code>unicode</code>ä¸¤ç§å­—ç¬¦ç±»å‹ä¸­è½¬åŒ–æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®æŒ‡å®šç¼–ç æ–¹å¼ï¼Œå°±ä¼šç”¨è¿™ä¸ªé»˜è®¤ç¼–ç ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2A3eksXXXXXaqXpXXXXXXXXXX_!!581166664.png" alt=" strä¸unicodeè½¬åŒ–æ–¹å¼"><br></center>

<h2 id="Python-2-ä¸­ç¼–ç é—®é¢˜å‡ºç°æ ¹æº"><a href="#Python-2-ä¸­ç¼–ç é—®é¢˜å‡ºç°æ ¹æº" class="headerlink" title="Python 2 ä¸­ç¼–ç é—®é¢˜å‡ºç°æ ¹æº"></a>Python 2 ä¸­ç¼–ç é—®é¢˜å‡ºç°æ ¹æº</h2><p>äº†è§£äº† Python 2 ä¸­çš„ä¸¤ç§å­—ç¬¦ç±»å‹ä»¥åŠé»˜è®¤ç¼–ç ï¼Œç°åœ¨å°±å¯ä»¥åˆ†æä¸ç¼–ç ç›¸å…³çš„é—®é¢˜å‡ºç°çš„åŸå› äº†ã€‚</p>
<p>åœ¨ Python 2 çš„ä¸–ç•Œä¸­ï¼Œå¾ˆå¤š API å¯¹è¿™ä¸¤ç§å­—ç¬¦ç±»å‹çš„ä½¿ç”¨æ¯”è¾ƒæ··ä¹±ï¼Œæœ‰çš„å¯ä»¥æ··ç”¨è¿™ä¸¤ç§ï¼Œæœ‰çš„åªèƒ½ä½¿ç”¨å…¶ä¸­ä¹‹ä¸€ï¼Œå¦‚æœåœ¨è°ƒç”¨ API æ—¶ä¼ å…¥äº†é”™è¯¯çš„å­—ç¬¦ç±»å‹ï¼ŒPython 2 ä¼šè‡ªåŠ¨å»è½¬ä¸ºæ­£ç¡®çš„å­—ç¬¦ç±»å‹ï¼Œé—®é¢˜å°±å‡ºç°åœ¨è‡ªåŠ¨è½¬åŒ–æ—¶ç”¨çš„ç¼–ç é»˜è®¤æ˜¯<code>ascii</code>ï¼Œæ‰€ä»¥ç»å¸¸ä¼šå‡ºç°<code>UnicodeDecodeError</code>æˆ–<code>UnicodeEncodeError</code>é”™è¯¯äº†ã€‚</p>
<p>éšç€ unicode çš„æ™®åŠï¼ŒPython 2 ä¸­è¶Šæ¥è¶Šå¤šçš„ API ä½¿ç”¨ <code>unicode</code> ç±»å‹çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¸è¿”å›å€¼ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡ API æ—¶ï¼Œä¹Ÿå°½å¯èƒ½è¦ä½¿ç”¨<code>unicode</code>ç±»å‹ã€‚é‚£æ˜¯ä¸æ˜¯è¯´ï¼ŒæŠŠç¨‹åºé‡Œé¢çš„æ‰€æœ‰å­—ç¬¦ä¸²éƒ½ç”¨<code>unicode</code>ç±»å‹è¡¨ç¤ºï¼Œå°±ä¸ä¼šå‡ºé”™äº†å‘¢ï¼Ÿä¹Ÿä¸å°½ç„¶ï¼Œä¸€èˆ¬æœ‰å¦‚ä¸‹å‡†åˆ™ï¼š</p>
<ul>
<li>åœ¨è¿›è¡Œæ–‡æœ¬å¤„ç†ï¼ˆå¦‚æŸ¥æ‰¾ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ä¸ªæ•°ï¼Œåˆ†å‰²å­—ç¬¦ä¸²ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨<code>unicode</code>ç±»å‹</li>
<li>åœ¨è¿›è¡Œ<code>I/O</code>å¤„ç†ï¼ˆå¦‚ï¼Œè¯»å†™ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œæ‰“å°ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç½‘ç»œé€šä¿¡ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨<code>str</code>ç±»å‹</li>
</ul>
<p>æƒ³æƒ³ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå› ä¸º Python 2 ä¸­çš„<code>str</code>ç±»å‹ç›¸å½“äºå…¶ä»–è¯­è¨€çš„<code>byte</code>ç±»å‹ï¼Œåœ¨è¿›è¡Œ<code>I/O</code>æ—¶æ“ä½œçš„æ˜¯ä¸€ä¸ªä¸ªçš„å­—èŠ‚ã€‚</p>
<h2 id="å®æˆ˜æ¼”ç»ƒ"><a href="#å®æˆ˜æ¼”ç»ƒ" class="headerlink" title="å®æˆ˜æ¼”ç»ƒ"></a>å®æˆ˜æ¼”ç»ƒ</h2><p>çŸ¥é“äº†é—®é¢˜å‡ºç°çš„åŸå› ï¼Œä¸‹é¢ä¸¾ä¸€äº›å¸¸è§çš„ä¸ç¼–ç ç›¸å…³çš„é”™è¯¯ä»£ç ï¼Œæ¼”ç¤ºå¦‚ä½•æ­£ç¡®çš„ä½¿ç”¨ã€‚</p>
<h3 id="å­—ç¬¦ä¸²æ‹¼æ¥ã€æ¯”è¾ƒ"><a href="#å­—ç¬¦ä¸²æ‹¼æ¥ã€æ¯”è¾ƒ" class="headerlink" title="å­—ç¬¦ä¸²æ‹¼æ¥ã€æ¯”è¾ƒ"></a>å­—ç¬¦ä¸²æ‹¼æ¥ã€æ¯”è¾ƒ</h3><p>Python ä¸­å­—ç¬¦ä¸²åœ¨è¿›è¡Œæ‹¼æ¥ä¸æ¯”è¾ƒæ—¶ï¼Œå¦‚æœä¸€ä¸ªæ˜¯<code>str</code>ç±»å‹ï¼Œå¦ä¸€ä¸ªæ˜¯<code>unicode</code>ç±»å‹ï¼Œé‚£ä¹ˆä¼šæŠŠ<code>str</code>éšå¼è½¬ä¸º<code>unicode</code>ç±»å‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; &quot;%s, %s&quot; % (u&quot;ä½ å¥½&quot;, &quot;ä¸­å›½&quot;)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">UnicodeDecodeError: &apos;ascii&apos; codec can&apos;t decode byte 0xe4 in position 0: ordinal not in range(128)</div><div class="line">&gt;&gt;&gt; u&quot;ä½ å¥½&quot; &gt; &quot;ä¸­å›½&quot;</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">UnicodeDecodeError: &apos;ascii&apos; codec can&apos;t decode byte 0xe4 in position 0: ordinal not in range(128)</div></pre></td></tr></table></figure>
<p>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±åƒä¸Šé¢è¯´çš„ï¼Œåªè¦ä¸æ¶‰åŠåˆ°<code>I/O</code>æ“ä½œï¼Œä¸€å¾‹ç”¨<code>unicode</code>ç±»å‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; u&quot;%s, %s&quot; % (u&quot;ä½ å¥½&quot;, u&quot;ä¸­å›½&quot;)</div><div class="line">u&apos;\u4f60\u597d, \u4e2d\u56fd&apos;</div><div class="line">&gt;&gt;&gt; u&quot;ä½ å¥½&quot; &gt; u&quot;ä¸­å›½&quot;</div><div class="line">True</div></pre></td></tr></table></figure></p>
<h3 id="è¯»å†™æ–‡ä»¶"><a href="#è¯»å†™æ–‡ä»¶" class="headerlink" title="è¯»å†™æ–‡ä»¶"></a>è¯»å†™æ–‡ä»¶</h3><p>å†…ç½®å‡½æ•° <a href="https://docs.python.org/2/library/functions.html#open" target="_blank" rel="external">open(name[, mode[, buffering]])</a> å¯ä»¥è¿”å›ä¸€ä¸ªæ–‡ä»¶ç±»å‹çš„å¯¹è±¡ï¼Œè¿™é‡Œè¿”å›çš„æ–‡ä»¶å¯¹è±¡æ“ä½œçš„æ˜¯<code>str</code>ç±»å‹çš„å­—ç¬¦ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨å°†è¯»åˆ°çš„å†…å®¹è½¬ä¸º<code>unicode</code>ç±»å‹ï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œ å¯¹äºå¤šå­—èŠ‚ç¼–ç æ¥è¯´ï¼Œä¸€ä¸ª unicode å­—ç¬¦å¯èƒ½è¢«æ•°ç›®ä¸åŒçš„å­—èŠ‚è¡¨ç¤ºï¼Œå¦‚æœæˆ‘ä»¬è¯»å–äº†ä»»æ„å›ºå®šå¤§å°ï¼ˆæ¯”å¦‚1Kï¼Œæˆ–4Kï¼‰çš„æ•°æ®å—ï¼Œè¿™ä¸ªæ•°æ®å¿«çš„æœ€åå‡ ä¸ªå­—èŠ‚å¾ˆå¯èƒ½æ˜¯æŸä¸ª unicode å­—ç¬¦çš„å‰å‡ ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬éœ€è¦å»å¤„ç†è¿™ç§å¼‚å¸¸ï¼Œä¸€ä¸ªæ¯”è¾ƒç¬¨çš„è§£å†³æ–¹å¼æ˜¯æŠŠæ‰€æœ‰æ•°æ®è¯»å–åˆ°å†…å­˜ä¸­ï¼Œç„¶åå†å»è½¬ç ï¼Œæ˜¾ç„¶è¿™ä¸é€‚åˆå¤§æ•°æ®çš„æƒ…å†µã€‚ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code>codecs</code>æ¨¡å—çš„<code>open(filename, mode=&#39;rb&#39;, encoding=None, errors=&#39;strict&#39;, buffering=1)</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„æ–‡ä»¶å¯¹è±¡æ“ä½œçš„æ˜¯<code>unicode</code>ç±»å‹çš„å­—ç¬¦ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"># cat /tmp/debug.log</div><div class="line">ä½ å¥½</div><div class="line"></div><div class="line">&gt;&gt;&gt; with open(&apos;/tmp/debug.log&apos;) as f:</div><div class="line">&gt;&gt;&gt;     s = f.read(1)    # è¯»ä¸€ä¸ªå­—èŠ‚</div><div class="line">&gt;&gt;&gt;     print type(s)    # str</div><div class="line">&gt;&gt;&gt;     print s          # æ— æ„ä¹‰çš„ä¸€ä¸ªç¬¦å·</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; import codecs</div><div class="line">&gt;&gt;&gt;</div><div class="line">&gt;&gt;&gt; with codecs.open(&apos;/tmp/debug.log&apos;, encoding=&apos;utf-8&apos;) as f:</div><div class="line">&gt;&gt;&gt;     s = f.read(1)    # è¯»ä¸€ä¸ªå­—ç¬¦</div><div class="line">&gt;&gt;&gt;     print type(s)    # unicode</div><div class="line">&gt;&gt;&gt;     print s          # ä½ </div></pre></td></tr></table></figure></p>
<p>å¦‚æœæˆ‘ä»¬ç”¨å†…ç½®çš„<code>open</code>è¿›è¡Œå†™æ–‡ä»¶ï¼Œå¿…é¡»å°†<code>unicode</code>å­—ç¬¦è½¬ä¸º<code>str</code>å­—ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; with open(&apos;/tmp/debug.log&apos;, &apos;w&apos;) as f:</div><div class="line">&gt;&gt;&gt;     f.write(u&apos;ä½ å¥½&apos;)</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</div><div class="line">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 0-1: ordinal not in range(128)</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªé”™è¯¯å¾ˆå…¸å‹ï¼Œå°±æ˜¯å› ä¸ºç”¨é»˜è®¤çš„<code>ascii</code>å»ç¼–ç <code>ä½ å¥½</code>å¯¼è‡´çš„ï¼Œæ˜¾ç„¶<code>ä½ å¥½</code>ä¸åœ¨<code>ascii</code>å­—ç¬¦é›†å†…ï¼Œæ­£ç¡®çš„æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; with open(&apos;/tmp/debug.log&apos;, &apos;w&apos;) as f:</div><div class="line">&gt;&gt;&gt;     f.write(u&apos;ä½ å¥½&apos;.encode(&apos;utf-8&apos;))</div><div class="line"></div><div class="line">$ cat /tmp/debug.log</div><div class="line">ä½ å¥½</div></pre></td></tr></table></figure></p>
<h3 id="print"><a href="#print" class="headerlink" title="print"></a>print</h3><p>é¦–å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ <a href="https://docs.python.org/2/reference/simple_stmts.html#print" target="_blank" rel="external">print</a> åœ¨ Python 2 ä¸­æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ˆå’Œifã€returnåŒä¸€çº§åˆ«ï¼‰ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚<br><code>print</code>æœ‰ä¸¤ç§è¯­æ³•å½¢å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">print_stmt ::=  &quot;print&quot; ([expression (&quot;,&quot; expression)* [&quot;,&quot;]]</div><div class="line">                | &quot;&gt;&gt;&quot; expression [(&quot;,&quot; expression)+ [&quot;,&quot;]])</div></pre></td></tr></table></figure></p>
<p>é»˜è®¤æƒ…å†µä¸‹<code>print</code>æ‰“å°åˆ°æ ‡å‡†è¾“å‡º<code>sys.stdout</code>ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>&gt;&gt;</code>åè·Ÿä¸€ä¸ª<code>file-like</code>çš„å¯¹è±¡ï¼ˆå…·æœ‰<code>write</code>æ–¹æ³•ï¼‰è¿›è¡Œé‡å®šå‘ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">with open(&apos;/tmp/debug.log&apos;, &apos;w&apos;) as f:</div><div class="line">    print &gt;&gt; f, &apos;ä½ å¥½&apos;</div></pre></td></tr></table></figure></p>
<p>å› ä¸º<code>print</code>çš„å‚æ•°ä¸º<code>str</code>ç±»å‹çš„å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨æ‰“å°åˆ°æ ‡å‡†è¾“å‡ºï¼ˆä¸€èˆ¬ä¸ºç»ˆç«¯ï¼Œä¾‹å¦‚Macçš„iTerm2ï¼‰æ—¶æœ‰ä¸ªéšå¼è½¬ç çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªè½¬ç è¿‡ç¨‹é»˜è®¤ç”¨çš„ç¼–ç åœ¨ç±»unixç³»ç»Ÿä¸Šæ˜¯é€šè¿‡ç¯å¢ƒå˜é‡<code>LC_ALL</code>æŒ‡å®šçš„ï¼Œåœ¨ Windows ç³»ç»Ÿä¸­ï¼Œç»ˆç«¯é»˜è®¤åªèƒ½æ˜¾ç¤º256ä¸ªå­—ç¬¦ï¼ˆ<a href="http://en.wikipedia.org/wiki/Code_page_437" target="_blank" rel="external">cp437</a> æŒ‡å®šï¼‰ã€‚</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2DlbxsXXXXXcyXpXXXXXXXXXX_!!581166664.png" alt="Python è§£é‡Šå™¨å†…éƒ¨ print æ•°æ®æµç¨‹"><br></center><br>è‡ª Python 2.6 èµ·ï¼ŒPython è§£é‡Šå™¨åœ¨å¯åŠ¨æ—¶å¯ä»¥é€šè¿‡æŒ‡å®š <a href="https://docs.python.org/2.7/using/cmdline.html#envvar-PYTHONIOENCODING" target="_blank" rel="external">PYTHONIOENCODING</a> è¿™ä¸ªç¯å¢ƒå˜é‡æ¥æŒ‡å®šã€‚<br>åœ¨ç¨‹åºé‡Œé¢ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åªè¯»å±æ€§<code>sys.stdout.encoding</code>æŸ¥çœ‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$ cat encode.py</div><div class="line"># coding: utf-8</div><div class="line">import sys</div><div class="line">print sys.stdout.encoding</div><div class="line">print u&quot;ä½ å¥½&quot;</div><div class="line"></div><div class="line">$ python encode.py</div><div class="line">UTF-8</div><div class="line">ä½ å¥½</div><div class="line"></div><div class="line">$ LC_ALL=C python encode.py</div><div class="line">US-ASCII</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;encode.py&quot;, line 21, in &lt;module&gt;</div><div class="line">    print u&quot;ä½ å¥½&quot;</div><div class="line">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 0-1: ordinal not in range(128)</div></pre></td></tr></table></figure></p>
<p>å½“ <code>print</code> é€šè¿‡é‡å®šå‘ï¼Œä¸æ˜¯æ‰“å°åˆ°æ ‡å‡†è¾“å‡º<code>sys.stdout</code>æ—¶ï¼Œç”±äºå®ƒä¸çŸ¥é“ç›®æ ‡æ–‡ä»¶çš„<code>locale</code>ï¼Œæ‰€ä»¥å®ƒåˆä¼šç”¨é»˜è®¤çš„<code>ascii</code>è¿›è¡Œç¼–ç äº†ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">$ python encode.py &gt; abc</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;encode.py&quot;, line 21, in &lt;module&gt;</div><div class="line">    print u&quot;ä½ å¥½&quot;</div><div class="line">UnicodeEncodeError: &apos;ascii&apos; codec can&apos;t encode characters in position 0-1: ordinal not in range(128)</div><div class="line"></div><div class="line">$ cat abc</div><div class="line">None</div><div class="line"></div><div class="line">$ PYTHONIOENCODING=UTF-8 python encode.py &gt; abc</div><div class="line">$ cat abc</div><div class="line">UTF-8</div><div class="line">ä½ å¥½</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ä¸æŒ‡å®š<code>PYTHONIOENCODING</code>æ—¶ï¼Œ<code>sys.stdout.encoding</code>è¾“å‡º<code>None</code>äº†ï¼Œå¹¶ä¸”æ‰§è¡Œ<code>print u&quot;ä½ å¥½&quot;</code>æ—¶æŠ¥é”™äº†ã€‚</p>
<p>ä¸ºäº†è§£å†³æ‰“å°unicodeå­—ç¬¦çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡<a href="http://docs.python.org/library/codecs.html#codecs.StreamWriter" target="_blank" rel="external">codecs.StreamWriter</a>æ¥åŒ…è£…ä¸€æ¬¡<code>sys.stdout</code>å¯¹è±¡ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ cat encode2.py</div><div class="line"># coding: utf-8</div><div class="line">import codecs</div><div class="line">import sys</div><div class="line"></div><div class="line">UTF8Writer = codecs.getwriter(&apos;utf8&apos;)</div><div class="line">sys.stdout = UTF8Writer(sys.stdout)</div><div class="line">print u&apos;ä½ å¥½&apos;</div><div class="line"></div><div class="line">$ python encode2.py &gt; abc</div><div class="line">$ cat abc</div><div class="line">ä½ å¥½</div></pre></td></tr></table></figure></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé€šè¿‡<code>codecs.StreamWriter</code>åŒ…è£…åçš„<code>print</code>ï¼Œåœ¨è¾“å‡º<code>str</code>ç±»å‹çš„å­—ç¬¦æ—¶ï¼Œä¼šå…ˆæŠŠè¿™ä¸ªå­—ç¬¦è½¬ä¸º<code>unicode</code>ç±»å‹ï¼Œç„¶åå†è½¬ä¸º<code>str</code>ç±»å‹ï¼Œè¿™ä¸¤ä¸ªè½¬åŒ–è¿‡ç¨‹ç”¨çš„ä¹Ÿæ˜¯é»˜è®¤çš„<code>ascii</code>ç¼–ç ï¼Œ æ‰€ä»¥å¾ˆæœ‰å¯èƒ½åˆä¼šå‡ºé”™ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">$ cat encode3.py</div><div class="line"># coding: utf-8</div><div class="line">import codecs</div><div class="line">import sys</div><div class="line"></div><div class="line">UTF8Writer = codecs.getwriter(&apos;utf8&apos;)</div><div class="line">sys.stdout = UTF8Writer(sys.stdout)</div><div class="line">print &apos;ä½ å¥½&apos;</div><div class="line"></div><div class="line">$ python encode3.py &gt; abc</div><div class="line">Traceback (most recent call last):</div><div class="line">  File &quot;encode3.py&quot;, line 7, in &lt;module&gt;</div><div class="line">    print &apos;ä½ å¥½&apos;</div><div class="line">  File &quot;/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/codecs.py&quot;, line 351, in write</div><div class="line">    data, consumed = self.encode(object, self.errors)</div><div class="line">UnicodeDecodeError: &apos;ascii&apos; codec can&apos;t decode byte 0xe4 in position 0: ordinal not in range(128)</div></pre></td></tr></table></figure></p>
<p>ä½ å¯èƒ½ä¼šé—®ï¼Œæœ‰æ²¡æœ‰ä¸€åŠ³æ°¸é€¸çš„è§£å†³æ–¹æ³•ï¼Œç¬¬ä¸‰æ–¹æ¨¡å—<a href="https://pypi.python.org/pypi/kitchen" target="_blank" rel="external">kitchen</a>å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ pip install kitchen</div><div class="line">$ cat encode4.py</div><div class="line"># coding: utf-8</div><div class="line">import sys</div><div class="line">from kitchen.text.converters import getwriter</div><div class="line">UTF8Writer = getwriter(&apos;utf8&apos;)</div><div class="line">sys.stdout = UTF8Writer(sys.stdout)</div><div class="line">print u&apos;ä½ å¥½&apos;</div><div class="line">print &apos;ä½ å¥½&apos;</div><div class="line"></div><div class="line">$ python encode4.py &gt; abc</div><div class="line">$ cat abc</div><div class="line">ä½ å¥½</div><div class="line">ä½ å¥½</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ç§ç±»å‹çš„<code>ä½ å¥½</code>å‡è¢«æ­£ç¡®é‡å®šå‘åˆ°æ–‡ä»¶ä¸­ã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>æˆ‘ä¸Šé¢é‡ç‚¹è®²è§£äº†è¾“å…¥è¾“å‡ºæ—¶çš„å¸¸è§ç¼–ç é”™è¯¯ï¼Œå…¶ä»–çš„ç¼–ç é”™è¯¯åŸºæœ¬ä¸Šå°±æ˜¯ API å‚æ•°ç±»å‹ä¸åŒ¹é…çš„å‚æ•°ã€‚è‡ªå·±ä»£ç æ¨èè¿˜æ¯”è¾ƒå¥½è§£å†³ï¼Œç¬¬ä¸‰æ–¹æ¨¡å—é‡Œé¢çš„å°±ä¸å¥½è°ƒè¯•äº†ï¼Œå¦‚æœé‡åˆ°äº†ï¼Œåªèƒ½é€šè¿‡hackçš„æ–¹å¼æ¥ä¿®æ”¹ç¬¬ä¸‰æ–¹æ¨¡å—çš„æºä»£ç äº†ã€‚</p>
<p>ä¸€ä¸ªæ¯”è¾ƒå¥½çš„å»ºè®®æ˜¯ï¼Œ<code>str</code>ç±»å‹çš„å˜é‡åå‰é¢ç”¨<code>b_</code>æ ‡ç¤ºï¼Œæ¯”å¦‚<code>b_search_hits</code>ï¼Œè¡¨ç¤ºè¿”å›çš„æœç´¢ç»“æœçš„ç±»å‹æ˜¯<code>str</code>ã€‚</p>
<h2 id="never-reload-sys"><a href="#never-reload-sys" class="headerlink" title="never reload(sys)"></a>never reload(sys)</h2><p>äº’è”ç½‘ä¸Šæ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªè§£å†³ç¼–ç çš„æ–¹å¼æ˜¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&quot;utf-8&quot;)</div></pre></td></tr></table></figure></p>
<p>è¿™ç§è§£å†³æ–¹å¼å¸¦æ¥çš„å¼Šè¿œè¿œå¤§äºåˆ©ï¼Œä¸‹é¢ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"># coding: utf-8</div><div class="line">import sys</div><div class="line"></div><div class="line">print &quot;ä½ å¥½&quot; == u&quot;ä½ å¥½&quot;</div><div class="line"># False</div><div class="line"></div><div class="line">reload(sys)</div><div class="line">sys.setdefaultencoding(&quot;utf-8&quot;)</div><div class="line"></div><div class="line">print &quot;ä½ å¥½&quot; == u&quot;ä½ å¥½&quot;</div><div class="line"># True</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè®¾ç½®é»˜è®¤ç¼–ç ä¹‹åï¼Œç¨‹åºçš„é€»è¾‘å·²ç»å‘ç”Ÿäº†æ”¹å˜ï¼Œæœ€ä¸»è¦çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ”¹å˜äº†é»˜è®¤ç¼–ç ï¼Œæˆ‘ä»¬æ‰€å¼•ç”¨çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œä¹Ÿéƒ½ä¼šæ”¹å˜ï¼Œå°±æƒ³æˆ‘è¿™é‡Œä¸¾çš„ä¾‹å­ï¼Œç¨‹åºçš„é€»è¾‘å¾ˆæœ‰å¯èƒ½ä¼šæ”¹å˜ã€‚å…³äºè¿™ä¸ªé—®é¢˜çš„è¯¦å°½è§£é‡Šï¼Œå¯ä»¥å‚è€ƒ<a href="http://stackoverflow.com/q/28657010/2163429" target="_blank" rel="external">Dangers of sys.setdefaultencoding(â€˜utf-8â€™)</a>ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæƒ³è±¡å¤§å®¶å¯¹ Python 2 ä¸­ä¸ºä»€ä¹ˆä¼šå‡ºç°é‚£ä¹ˆå¤šçš„ç¼–ç é”™è¯¯æœ‰æ‰€äº†è§£ï¼Œæ ¹æœ¬åŸå› å°±åœ¨äº Python è®¾è®¡æ—©æœŸæ··æ·†äº†<code>byte</code>ç±»å‹ä¸<code>str</code>ç±»å‹ï¼Œå¥½æ­¹åœ¨ Python 3 è§£å†³äº†è¿™ä¸ªè®¾è®¡é”™è¯¯ã€‚<br>åœ¨å¦ä¸€æ–¹é¢ï¼Œè¿™é‡Œçš„ç¼–ç é—®é¢˜å¯¹æˆ‘ä»¬ç†è§£è®¡ç®—æœºçš„è¿è¡ŒåŸç†å¾ˆæœ‰å¸®åŠ©ï¼Œä¹Ÿåæ˜ å‡º<code>copy &amp; paste</code>çš„å±å®³ï¼Œå¸Œæœ›å¤§å®¶çœ‹äº†æˆ‘è¿™ç¯‡æ–‡ç« ä¹‹åï¼Œä¸¥ç¦<code>reload(sys)</code>è¿™ç§åšæ³•ï¼Œæ¨èä½¿ç”¨<code>from __future__ import unicode_literals</code>æ¥å°†æ‰€æœ‰å­—ç¬¦å­—é¢é‡è¡¨ç¤ºä¸º unicodeã€‚</p>
<p>å¦‚æœå¤§å®¶å¯¹ Python 2 ä¸­çš„ç¼–ç é—®é¢˜ï¼Œè¿˜æœ‰ä»»ä½•ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://python-future.org/unicode_literals.html" target="_blank" rel="external">Should I import unicode_literals?</a></li>
<li><a href="https://pythonhosted.org/kitchen/unicode-frustrations.html" target="_blank" rel="external">Overcoming frustration: Correctly using unicode in python2</a></li>
<li><a href="https://wiki.python.org/moin/PrintFails" target="_blank" rel="external">PrintFails</a></li>
<li><a href="https://docs.python.org/2/howto/unicode.html" target="_blank" rel="external">Unicode HOWTO</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…ˆæ¥çœ‹ä¸€ä¸ªå¼‚å¸¸ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;UnicodeEncodeError: â€˜asciiâ€™ codec canâ€™t encode characters in position 51-52: ordinal not in range(128)&lt;/p&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Python" scheme="http://liujiacai.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–ç¨‹è¯­è¨€ä¸­çš„å˜é‡ä½œç”¨åŸŸä¸é—­åŒ…</title>
    <link href="http://liujiacai.net/blog/2016/05/28/scope-closure/"/>
    <id>http://liujiacai.net/blog/2016/05/28/scope-closure/</id>
    <published>2016-05-28T12:44:34.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ å†™è¿‡ javascriptï¼Œåº”è¯¥å¬è¯´è¿‡<a href="https://en.wikipedia.org/wiki/JavaScript_syntax#hoisting" target="_blank" rel="external">å˜é‡æå‡</a>ï¼ˆhoistingï¼‰ï¼Œå¦‚æœä½ è‡ªè¯©â€œLife is short, I use Pythonâ€ï¼Œé‚£ä¹ˆå¤šå¤šå°‘å°‘ä¼šç”¨è¿‡<code>global</code>ã€<code>nonlocal</code>è¿™ä¸¤ä¸ªå…³é”®å­—ã€‚æ— è®ºæ–°æ‰‹è¿˜æ˜¯è€æ‰‹ï¼Œé‡åˆ°è¿™äº›æ—¶éƒ½ä¼šè§‰å¾—å¾ˆåˆ«æ‰­ï¼Œç¨ä¸ç•™ç¥å°±ä¼šå‡ºç°æ„æƒ³ä¸åˆ°çš„ bugï¼Œå¦‚æœä½ ä»”ç»†è§‚å¯Ÿå°±ä¼šå‘ç°ï¼Œå®ƒä»¬å…¶å®æ˜¯ä¸€ä¸ªé—®é¢˜ï¼šå˜é‡ä½œç”¨åŸŸçš„é—®é¢˜ã€‚</p>
<p>å…¶æ¬¡ï¼Œéšç€å‡½æ•°å¼ç¼–ç¨‹çš„æ—¥è¶‹ç«çƒ­ï¼Œ<a href="https://en.wikipedia.org/wiki/Closure_%28computer_programming%29" target="_blank" rel="external">é—­åŒ…</a>é€æ¸æˆä¸ºäº† buzzwordï¼Œä½†æˆ‘ç›¸ä¿¡æ²¡å‡ ä¸ªäººï¼ˆå¸Œæœ›ä½ æ˜¯é‚£å°‘æ•°äººï¼‰èƒ½å¤Ÿå‡†ç¡®æ¦‚æ‹¬å‡ºé—­åŒ…çš„ç²¾é«“ï¼Œè€Œå…¶å®é—­åŒ…è¿™ä¸€æ¦‚å¿µä¹Ÿæ˜¯è§£å†³å˜é‡ä½œç”¨åŸŸé—®é¢˜ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« é¦–å…ˆä»‹ç»ä½œç”¨åŸŸç›¸å…³çš„çŸ¥è¯†ï¼Œä¸»è¦æ˜¯æ¯”è¾ƒ dynamic scope ä¸ static(æˆ–lexical) scope è¯­è¨€çš„ä¼˜åŠ£åŠ¿ï¼›ç„¶ååˆ†æ Python ä¸­ä¸ºä»€ä¹ˆéœ€è¦<code>global</code>å’Œ<code>nonlocal</code>ï¼ŒJavascript ä¸ºä»€ä¹ˆæœ‰<code>å˜é‡æå‡</code>ï¼Œæˆ‘è¿™é‡Œä¸ä»…ä»…æ˜¯ä»‹ç»whatï¼Œæ›´é‡è¦çš„æ˜¯whyï¼Œè¦çŸ¥é“è¿™ä¸¤é—¨è¯­è¨€çš„è®¾è®¡è€…éƒ½æ˜¯æ·±è€•CSé¢†åŸŸå¤šå¹´çš„è€æ‰‹ï¼Œä¸ä¼šè½»æ˜“çŠ¯é”™çš„ï¼Œè‚¯å®šæœ‰â€œä¸ä¸ºäººçŸ¥â€çš„ä¸€é¢ï¼Œä½†é—æ†¾çš„æ˜¯ç½‘ä¸Šå¤§éƒ¨åˆ†æ–‡ç« å°±æ˜¯è§£é‡Šwhatï¼Œå¾ˆå°‘æœ‰æ¶‰åŠåˆ°whyçš„ï¼Œå¸Œæœ›æˆ‘è¿™ç¯‡æ–‡ç« èƒ½å¤Ÿå¡«å……è¿™ä¸€ç©ºç¼ºï¼›æœ€åä»‹ç»é—­åŒ…è¿™ä¸€é‡è¦æ¦‚å¿µã€‚</p>
<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>ç®€å•æ¥è¯´ï¼Œä½œç”¨åŸŸé™å®šäº†ç¨‹åºä¸­å˜é‡çš„æŸ¥æ‰¾èŒƒå›´ã€‚</p>
<p>åœ¨ç¼–ç¨‹è¯­è¨€ä¸­æœ‰å­è¿‡ç¨‹ï¼ˆsubroutineï¼Œä¹Ÿç§°ä¸ºå‡½æ•°ã€è¿‡ç¨‹ï¼‰ä¹‹å‰ï¼Œæ‰€æœ‰çš„å˜é‡éƒ½åœ¨ä¸€ä¸ªç§°ä¸ºâ€œglobalâ€çš„ç¯å¢ƒä¸­ï¼Œç°åœ¨æ¥çœ‹è¿™å½“ç„¶æ˜¯éå¸¸ä¸åˆç†ï¼Œæ‰€ä»¥åœ¨ä¹‹åæœ‰å­è¿‡ç¨‹çš„å¤§éƒ¨åˆ†é™æ€è¯­è¨€ï¼ˆå˜é‡çš„ç±»å‹ä¸å¯å˜ï¼‰é‡Œé¢ï¼Œä¸åŒçš„ blockï¼ˆåƒifã€whileã€forã€å‡½æ•°ç­‰ï¼‰ï¼Œå…·æœ‰ä¸åŒçš„ç¯å¢ƒã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#include &lt;stdio.h&gt;</div><div class="line"></div><div class="line">int main() &#123;</div><div class="line">    if(1 == 1) &#123;</div><div class="line">        int i = 1;</div><div class="line">    &#125; else &#123;</div><div class="line">        int i = 2;</div><div class="line">    &#125;</div><div class="line">    printf(&quot;i = %d\n&quot;, i);  // error: use of undeclared identifier &apos;i&apos;</div><div class="line">    return 0;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä»£ç ç‰‡æ®µæ˜¯ä¸€ç®€å•çš„ C è¯­è¨€ç¨‹åºï¼Œåœ¨æ‰§è¡Œ if ä»£ç å—æ—¶ï¼Œä¼šæ–°åˆ›å»ºä¸€ä¸ªç¯å¢ƒï¼ˆç§°ä¸ºE1ï¼Œå…¶å¤–å›´ç¯å¢ƒä¸ºå…¨å±€ç¯å¢ƒE0ã€‚è§ä¸‹å›¾ï¼‰ï¼Œç„¶ååœ¨ E1 ä¸­å®šä¹‰å˜é‡<code>i</code>ï¼Œåœ¨ if ä»£ç å—ç»“æŸåï¼ŒE1 è¿™ä¸ªç¯å¢ƒå°±ä¼šè¢«åˆ é™¤ï¼Œè¿™æ—¶ main å‡½æ•°åé¢çš„ç¨‹åºå°±æ— æ³•è®¿é—® if ä»£ç å—çš„å˜é‡äº†ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2SPDZpFXXXXaVXXXXXXXXXXXX_!!581166664.png" alt=" if ä»£ç å—ç¤ºæ„å›¾"><br></center>

<p>ä¸Šé¢è¿™ä¸€åšæ³•ç¬¦åˆæˆ‘ä»¬çš„ç›´è§‚å°è±¡ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒåˆç†çš„è®¾è®¡ã€‚ä½†æ˜¯åœ¨ä¸€äº›åŠ¨æ€è¯­è¨€ï¼ˆå˜é‡çš„ç±»å‹å¯ä»¥ä»»æ„æ”¹å˜ï¼‰ä¸­ï¼Œå¹¶æ²¡æœ‰å˜é‡å£°æ˜ä¸ä½¿ç”¨çš„åŒºåˆ«ï¼Œè€Œæ˜¯åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶å»å£°æ˜è¿™ä¸ªå˜é‡ï¼Œåƒä¸‹é¢è¿™ä¸ª Python ç¤ºä¾‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">if 1 == 1:</div><div class="line">    i = 1</div><div class="line">else:</div><div class="line">    i = 2</div><div class="line"></div><div class="line">print i  # è¾“å‡º 1</div></pre></td></tr></table></figure></p>
<p>åœ¨ Python ä¸­ï¼Œæ‰§è¡Œ if ä»£ç å—æ—¶ä¸ä¼šå»åˆ›å»ºæ–°çš„ç¯å¢ƒï¼Œè€Œæ˜¯åœ¨ if ä»£ç å—æ‰€å¤„çš„ç¯å¢ƒä¸­å»æ‰§è¡Œã€‚</p>
<p>æ ¹æ®æˆ‘ç›®å‰æ‰€äº†è§£åˆ°çš„ï¼š</p>
<ul>
<li>é™æ€è¯­è¨€ï¼ˆCã€Javaã€C#ç­‰ï¼‰å…·æœ‰å—çº§åˆ«ï¼ˆblock levelï¼ŒåŒ…å«ifã€whileã€forã€switchã€å‡½æ•°ç­‰ï¼‰çš„å˜é‡ä½œç”¨åŸŸï¼›</li>
<li>åŠ¨æ€è¯­è¨€ï¼ˆJavascriptã€Pythonã€Rubyç­‰ï¼‰åªå…·æœ‰å‡½æ•°çº§åˆ«ï¼ˆfunction levelï¼‰çš„å˜é‡ä½œç”¨åŸŸ</li>
</ul>
<h3 id="dynamic-scope-vs-static-scope"><a href="#dynamic-scope-vs-static-scope" class="headerlink" title="dynamic scope vs. static scope"></a>dynamic scope vs. static scope</h3><p>é¦–å…ˆå£°æ˜ä¸€ç‚¹ï¼Œè¿™é‡Œçš„dynamicä¸staticæ˜¯æŒ‡çš„å˜é‡çš„ä½œç”¨åŸŸï¼Œä¸æ˜¯æŒ‡å˜é‡çš„ç±»å‹ï¼Œä¸åŠ¨æ€è¯­è¨€ä¸é™æ€è¯­è¨€è¦åŒºåˆ†å¼€ã€‚</p>
<p>åœ¨ä¸Šé¢æˆ‘ä»¬äº†è§£åˆ°ï¼Œæ‰€æœ‰çš„é«˜çº§è¯­è¨€éƒ½å…·æœ‰å‡½æ•°ä½œç”¨åŸŸã€‚æˆ‘ä»¬ä¸€èˆ¬æ˜¯è¿™æ ·ä½¿ç”¨å‡½æ•°çš„ï¼Œå…ˆå£°æ˜å†ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å‡½æ•°çš„å£°æ˜ä¸ä½¿ç”¨æ˜¯åˆ†å¼€çš„ï¼Œè¿™å°±æ¶‰åŠåˆ°ä¸€ä¸ªé—®é¢˜ï¼Œå‡½æ•°ä½œç”¨åŸŸçš„å¤–å›´ç¯å¢ƒæ˜¯å£°æ˜æ—¶çš„è¿˜æ˜¯è¿è¡Œæ—¶çš„å‘¢ï¼Ÿä¸åŒçš„å¤–å›´ç¯å¢ƒå¯¹åº”ä¸åŒçš„è¯­è¨€ï¼š</p>
<ul>
<li>dynamic scope çš„è¯­è¨€ï¼Œå‡½æ•°ä½œç”¨åŸŸçš„å¤–å›´ç¯å¢ƒæ˜¯<code>è¿è¡Œæ—¶</code></li>
<li>static scope çš„è¯­è¨€ï¼Œå‡½æ•°ä½œç”¨åŸŸçš„å¤–å›´ç¯å¢ƒæ˜¯<code>å£°æ˜æ—¶</code></li>
</ul>
<p>çœ‹ä¸‹é¢è¿™ä¸ª Python ç¤ºä¾‹ï¼š</p>
<pre><code># foo.py
s = &quot;foo&quot;
def foo():
    print s

# bar.py
from foo import foo
s = &quot;bar&quot;
foo()   # è¾“å‡º foo
</code></pre><p>ä¸Šé¢çš„ç¤ºä¾‹åŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼š<code>foo.py</code>ã€<code>bar.py</code>ï¼Œåœ¨<code>bar.py</code>ä¸­è°ƒç”¨<code>foo.py</code>çš„<code>foo</code>å‡½æ•°ï¼Œå› ä¸º Python å±äº static scope çš„è¯­è¨€ï¼Œæ‰€ä»¥è¿™æ—¶çš„ç¯å¢ƒæ˜¯è¿™æ ·çš„ï¼š</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2yp6lpFXXXXXAXFXXXXXXXXXX_!!581166664.png" alt=" åœ¨ bar ä¸­è°ƒç”¨ foo å‡½æ•°æ—¶çš„ç¯å¢ƒç¤ºæ„å›¾"><br></center><br>åœ¨è°ƒç”¨ foo æ—¶ï¼Œä¼šåˆ›å»ºä¸€æ–°ç¯å¢ƒE1ï¼ŒE1 è™½ç„¶æ˜¯åœ¨ bar çš„å…¨å±€ç¯å¢ƒä¸­åˆ›å»ºçš„ï¼Œä½†æ˜¯å…¶å¤–å›´æŒ‡å‘çš„æ˜¯ foo çš„å…¨å±€ç¯å¢ƒã€‚åœ¨æ‰§è¡Œ foo å‡½æ•°æ—¶ï¼Œå˜é‡çš„æŸ¥æ‰¾é¡ºåºæ˜¯è¿™æ ·çš„ï¼š</p>
<ol>
<li>é¦–å…ˆåœ¨ E1 ä¸­æ‰¾åˆ°ï¼Œæ‰¾ä¸åˆ°å°±ä¼šå»å…¶å¤–å›´ç¯å¢ƒä¸­å»æŸ¥æ‰¾ï¼›æ‰¾åˆ°åˆ™ç›´æ¥è¿”å›</li>
<li>åœ¨E1å¤–å›´ç¯å¢ƒä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ç›´æ¥è¿”å›ï¼Œå¦‚æœæ‰¾ä¸åˆ°åˆ™å†åœ¨å¤–å›´ç¯å¢ƒçš„å¤–å›´ç¯å¢ƒä¸­ç»§ç»­æŸ¥æ‰¾ï¼Œæ­¢åˆ°å¤–å›´ç¯å¢ƒä¸ºç©ºï¼ˆfooã€bar æ¨¡å—çš„å…¨å±€ç¯å¢ƒçš„å¤–å›´æŒ‡å‘å‡ä¸ºç©ºï¼‰</li>
<li>å»è¯­è¨€å†…ç½®çš„å˜é‡ä¸­å»æŸ¥æ‰¾ï¼Œæ‰¾åˆ°åˆ™ç›´æ¥è¿”å›ï¼›æ‰¾ä¸åˆ°å°±ä¼šæŠ¥é”™ã€‚</li>
</ol>
<p>static scope æ˜¯æ¯”è¾ƒç¬¦åˆæ­£å¸¸æ€ç»´çš„ï¼Œä¹Ÿæ˜¯æ¯”è¾ƒæ­£ç¡®çš„å®ç°æ–¹å¼ï¼Œå¦åˆ™æˆ‘ä»¬åœ¨ä½¿ç”¨ç¬¬ä¸‰ä»½ç±»åº“æ—¶ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå‘ç”Ÿå˜é‡å†²çªæˆ–è¦†ç›–çš„æƒ…å†µã€‚é‡‡ç”¨ dynamic scope çš„è¯­è¨€éƒ½æ˜¯æ¯”è¾ƒå¤è€çš„ï¼Œç°åœ¨è¿˜æ¯”è¾ƒå¸¸è§çš„æ˜¯ Shellï¼Œæƒ³æƒ³å¤§å®¶åœ¨å†™ Shell æ—¶æ˜¯å¤šç—›è‹¦å°±çŸ¥é“ dynamic scope æ˜¯å¤šä¹ˆåäººç±»äº†ã€‚</p>
<h2 id="JavaScript-ä¸­çš„å˜é‡ä½œç”¨åŸŸ"><a href="#JavaScript-ä¸­çš„å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="JavaScript ä¸­çš„å˜é‡ä½œç”¨åŸŸ"></a>JavaScript ä¸­çš„å˜é‡ä½œç”¨åŸŸ</h2><p>å°±åƒå‰é¢è¯´çš„ï¼ŒJavascript å…·æœ‰ function level çš„ static scopeï¼Œä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œå…·ä½“ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var list = document.getElementById(&quot;list&quot;);</div><div class="line"></div><div class="line">for (var i = 1; i &lt;= 5; i++) &#123;</div><div class="line">    var item = document.createElement(&quot;li&quot;);</div><div class="line">    item.appendChild(document.createTextNode(&quot;Item &quot; + i));</div><div class="line"></div><div class="line">    item.onclick = function(ev) &#123;</div><div class="line">        alert(&quot;Item &quot; + i + &quot; is clicked.&quot;);</div><div class="line">    &#125;;</div><div class="line">    list.appendChild(item);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä½ ä¹Ÿè®¸ä¼šæƒ³å½“ç„¶çš„è®¤ä¸ºä¾æ¬¡å•å‡»æ—¶æ¯ä¸ªItemä¼šä¾æ¬¡æ˜¾ç¤º1,2,3â€¦ï¼Œä½†å…¶å®è¿™é‡Œæ— è®ºä½ å•å‡»é‚£ä¸ªItemï¼Œéƒ½åªä¼šæ˜¾ç¤º6ï¼Œä½ å¯ä»¥å» <a href="https://jsfiddle.net/jiacai2050/w6agke9d/" target="_blank" rel="external">JSFiddle</a> æµ‹è¯•ä¸‹ã€‚<br>ç©¶å…¶åŸå› ï¼Œå°±æ˜¯å› ä¸ºæ¯ä¸ªitem click æ‰€å¯¹åº”çš„å›è°ƒå‡½æ•°çš„å£°æ˜ä¸æ‰§è¡Œæ˜¯åˆ†å¼€çš„ï¼Œè€Œä¸” Javascript ä¸­åªæœ‰ function level çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥åœ¨å•å‡»Itemæ—¶çš„ç¯å¢ƒæ˜¯è¿™æ ·çš„ï¼š</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2YEkppFXXXXXbXXXXXXXXXXXX_!!581166664.png" alt=" ä½¿ç”¨ var å®šä¹‰ i æ—¶ï¼Œå•å‡» Item æ—¶çš„ç¯å¢ƒæ¨¡å‹ç¤ºæ„å›¾"><br></center><br>åœ¨ for ä»£ç å—æ‰§è¡Œå®Œåï¼Œ<code>i</code> çš„å€¼ä¸º6ï¼Œåˆå› ä¸ºJavascript ä¸­åªæœ‰ function level çš„ä½œç”¨åŸŸï¼Œæ‰€æœ‰è¿™é‡Œçš„ <code>i</code> è¢«å®šä¹‰åœ¨äº† E0 ä¸­ã€‚</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒES6 å¼•å…¥äº†<code>let</code>ï¼Œä½¿ç”¨<code>let</code>å®šä¹‰çš„å˜é‡å…·æœ‰ block level çš„ä½œç”¨åŸŸï¼Œæ‰€ä»¥å¦‚æœæŠŠä¸Šé¢çš„ä»£ç ç‰‡æ®µä¸­çš„<code>var</code>æ¢æˆ<code>let</code>ï¼Œç¯å¢ƒä¼šå˜æˆä¸‹é¢çš„å½¢å¼ï¼š</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB29sDTpFXXXXXpXpXXXXXXXXXX_!!581166664.png" alt=" ä½¿ç”¨ let å®šä¹‰ i æ—¶ï¼Œå•å‡» Item æ—¶çš„ç¯å¢ƒæ¨¡å‹ç¤ºæ„å›¾"><br></center><br>ç›¸ä¿¡å¤§å®¶é€šè¿‡ä¸Šé¢çš„å›¾ç¤ºï¼Œå¯ä»¥è§£å†³å¿ƒä¸­çš„ç–‘æƒ‘äº†ã€‚</p>
<h3 id="hoisting"><a href="#hoisting" class="headerlink" title="hoisting"></a>hoisting</h3><p>å…ˆçœ‹ä¸€ä¸ªæ¯”è¾ƒå…¸å‹çš„ä¾‹å­ï¼š</p>
<pre><code>var foo = 1;
function bar() {
    if (!foo) {
        var foo = 10;
    }
    alert(foo);
}
bar();
</code></pre><p>ä½ ä¹Ÿè®¸çŸ¥é“ï¼Œè¿™é‡Œå¼¹å‡ºçš„å€¼æ˜¯10ï¼Œè€Œä¸æ˜¯1ï¼Œå› ä¸ºjavascriptä¼šæŠŠæ‰€æœ‰çš„å˜é‡æå‰ï¼ˆhositingï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸Šé¢çš„ä»£ç ç­‰ä»·äºï¼š</p>
<pre><code>var foo = 1;
function bar() {
    var foo;
    if (!foo) {
        foo = 10;
    }
    alert(foo);
}
bar();
</code></pre><p>ä¸Šé¢è¿™ä¸ªä¾‹å­å°±ç®€å•æ¼”ç¤ºäº†ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Œä¸‹é¢é‡ç‚¹è®²è¿°ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿé¦–å…ˆçœ‹ä¸‹é¢ä¸€æ®µä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">function is_even(n) &#123;</div><div class="line">  if (n == 0) &#123;</div><div class="line">    return true;</div><div class="line">  &#125; else &#123;</div><div class="line">    return is_odd(n - 1);      </div><div class="line">  &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">is_even(2); // true</div><div class="line"></div><div class="line">function is_odd(n) &#123;</div><div class="line">  if (n == 0) &#123;</div><div class="line">    return false;</div><div class="line">  &#125; else &#123;</div><div class="line">    return is_even(n - 1);      </div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æŒ‰ç…§å¸¸è§„æ€ç»´ï¼Œåœ¨è¿è¡Œ<code>is_even(2);</code> æ—¶ï¼Œä¼šå»è°ƒç”¨è¿˜æ²¡å®šä¹‰çš„<code>is_odd</code>å‡½æ•°ï¼Œæ‰€ä»¥åº”è¯¥ä¼šæŠ¥é”™ï¼Œä½†æ˜¯ç”±äº Javascript é‡Œé¢æœ‰ hositingï¼Œæ‰€æœ‰æ˜¯å¯ä»¥è¿è¡Œï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡å‘¢ï¼Ÿ<br>è¿™è¦è¿½æº¯åˆ° Javascript è¯­è¨€è®¾è®¡è€…çš„åˆè¡·äº†ï¼ŒBrendan Eich åœ¨åˆ›é€ è¿™é—¨ä¸–ç•Œçº§è¯­è¨€æ—¶ï¼Œä¸€å¼€å§‹æ‰“ç®—ç”¨ Scheme çš„æ€æƒ³æ¥å®ç°ï¼Œè€Œä¸”å½“æ—¶ Brendan ä¹Ÿæ˜¯åœ¨çœ‹ SICP è¿™æœ¬ä¹¦ï¼Œ<a href="https://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#%_sec_4.1.6" target="_blank" rel="external">SICP 4.1.6</a> åœ¨ä»‹ç»å†…éƒ¨å®šä¹‰æ—¶ï¼Œç»™å‡ºäº†è§£å†³å˜é‡åŒä¸€æ—¶åˆ»å®šä¹‰çš„ä¸€ç§è§£å†³æ–¹å¼ï¼šå°†æ‰€æœ‰çš„å˜é‡åæå‰ã€‚è¿™æ ·åŒä¸€ç¯å¢ƒä¸­çš„å…¶ä»–åœ°æ–¹å°±èƒ½å¤Ÿä½¿ç”¨æ‰€æœ‰çš„å®šä¹‰äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œåªæ˜¯å°†å˜é‡åæå‰ï¼Œèµ‹å€¼çš„åŠ¨ä½œä¸å˜ï¼Œæ˜¾ç„¶ï¼ŒJavascript é‡‡ç”¨äº†è¿™ä¸€æ€æƒ³ï¼ˆè¿™å…¶å®æ˜¯<a href="https://en.wikipedia.org/wiki/Forward_declaration" target="_blank" rel="external">forward_declaration</a> æŠ€æœ¯çš„ä¸€ç§å®ç°æ‰‹æ®µï¼‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">;; SICP ä¹¦ä¸­çš„ç¤ºä¾‹ä»£ç </div><div class="line">(lambda &lt;vars&gt;</div><div class="line">  (define u &lt;e1&gt;)</div><div class="line">  (define v &lt;e2&gt;)</div><div class="line">  &lt;e3&gt;)</div><div class="line">;; è½¬ä¸ºä¸‹é¢çš„å½¢å¼</div><div class="line">(lambda &lt;vars&gt;</div><div class="line">  (let ((u &apos;*unassigned*)</div><div class="line">        (v &apos;*unassigned*))</div><div class="line">    (set! u &lt;e1&gt;)</div><div class="line">    (set! v &lt;e2&gt;)</div><div class="line">    &lt;e3&gt;))</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªé—®é¢˜æœ‰äººåœ¨ Twitter <a href="https://twitter.com/BrendanEich/status/33403701100154880" target="_blank" rel="external">é—®è¿‡ Brendan è¿™ä¸ªé—®é¢˜</a>ï¼ŒBrendanæ˜¯è¿™ä¹ˆå›ç­”çš„ï¼š</p>
<blockquote>
<p>Function declaration hoisting is for mutual recursion &amp; generally to avoid painful bottom-up ML-like order</p>
</blockquote>
<p>å¯¹ Javascript å†å²æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹çœ‹ Brendan æœ¬äººçš„è‡ªè¿°ï¼š</p>
<ul>
<li><a href="https://brendaneich.com/2011/06/new-javascript-engine-module-owner/" target="_blank" rel="external">https://brendaneich.com/2011/06/new-javascript-engine-module-owner/</a></li>
</ul>
<h2 id="Python-ä¸­çš„å˜é‡ä½œç”¨åŸŸ"><a href="#Python-ä¸­çš„å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="Python ä¸­çš„å˜é‡ä½œç”¨åŸŸ"></a>Python ä¸­çš„å˜é‡ä½œç”¨åŸŸ</h2><p>å‡†ç¡®æ¥è¯´ï¼ŒPython é‡Œé¢æœ‰å››ç§ä½œç”¨åŸŸï¼š<code>function</code>, <code>module</code>, <code>global</code>å’Œ <code>class</code> ä½œç”¨åŸŸã€‚ç”±äº Python ä¸åŒºåˆ†å˜é‡çš„å£°æ˜ï¼Œæ‰€ä»¥åœ¨ç¬¬ä¸€æ¬¡åˆå§‹åŒ–å˜é‡æ—¶ï¼ˆå¿…é¡»ä¸ºèµ‹å€¼æ“ä½œï¼‰å°†å˜é‡åŠ å…¥å½“å‰ç¯å¢ƒä¸­ã€‚å¦‚æœåœ¨æ²¡å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–çš„æƒ…å†µä¸‹ä½¿ç”¨è¯¥å˜é‡å°±ä¼šæŠ¥è¿è¡Œæ—¶å¼‚å¸¸ï¼Œä½†å¦‚æœä»…ä»…æ˜¯è®¿é—®ï¼ˆå¹¶ä¸èµ‹å€¼ï¼‰çš„æƒ…å†µä¸‹ï¼ŒæŸ¥æ‰¾å˜é‡çš„é¡ºåºä¼šæŒ‰ç…§ LEGB è§„åˆ™ (Local, Enclosing, Global, Built-in)ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">s = &quot;hello&quot;</div><div class="line">def foo():</div><div class="line">    s += &quot;world&quot;</div><div class="line">    return s</div><div class="line"></div><div class="line">foo()  # UnboundLocalError: local variable &apos;s&apos; referenced before assignment</div></pre></td></tr></table></figure>
<p>ç”±äºåœ¨å‡½æ•° foo ä¸­åœ¨æ²¡æœ‰å¯¹ s åˆå§‹åŒ–çš„æƒ…å†µä¸‹ä½¿ç”¨äº†è¯¥å€¼ï¼Œæ‰€ä»¥è¿™é‡Œä¼šæŠ¥å¼‚å¸¸ï¼Œè§£å†³çš„åŠæ³•å°±æ˜¯ä½¿ç”¨ global å…³é”®å­—ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">s = &quot;hello&quot;</div><div class="line">def foo():</div><div class="line">    global s</div><div class="line">    s += &quot; world&quot;</div><div class="line">    return s</div><div class="line"></div><div class="line">foo()  # return &quot;hello world&quot;</div></pre></td></tr></table></figure></p>
<p>ä½†ç”±äº global å…³é”®å­—åªèƒ½é™å®šåœ¨<code>global</code>ä½œç”¨åŸŸå†…æŸ¥æ‰¾å˜é‡ï¼Œåœ¨æœ‰åµŒå¥—å®šä¹‰çš„æ—¶å€™å°±æœ‰é—®é¢˜äº†ï¼Œæ¯”å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">def foo():</div><div class="line">    s = &quot;hello&quot;</div><div class="line">    def bar():</div><div class="line">        global s     # NameError: global name &apos;s&apos; is not defined</div><div class="line">        s += &quot; world&quot;</div><div class="line">        return s</div><div class="line">    return bar</div><div class="line"></div><div class="line">foo()()</div></pre></td></tr></table></figure></p>
<p>Python 3 ä¸­å¼•å…¥äº† <code>nonlocal</code> å…³é”®å­—æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">def foo():</div><div class="line">    s = &quot;hello&quot;</div><div class="line">    def bar():</div><div class="line">        nonlocal s</div><div class="line">        s += &quot; world&quot;</div><div class="line">        return s</div><div class="line">    return bar</div><div class="line"></div><div class="line">foo()()   # return &quot;hello world&quot;</div></pre></td></tr></table></figure></p>
<p>åœ¨ Python 2 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ä¸€å¯å˜å®¹å™¨è§£å†³ï¼ˆå…¶å®å°±æ˜¯ç»•è¿‡ç›´æ¥ä¿®æ”¹ <code>s</code> çš„å€¼ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">def foo():</div><div class="line">    s = [&quot;hello&quot;]</div><div class="line">    def bar():</div><div class="line">        s[0] += &quot; world&quot;</div><div class="line">        return s[0]</div><div class="line">    return bar</div><div class="line"></div><div class="line">foo()()   # return &quot;hello world&quot;</div></pre></td></tr></table></figure></p>
<h3 id="ç±»çº§åˆ«ä½œç”¨åŸŸ"><a href="#ç±»çº§åˆ«ä½œç”¨åŸŸ" class="headerlink" title="ç±»çº§åˆ«ä½œç”¨åŸŸ"></a>ç±»çº§åˆ«ä½œç”¨åŸŸ</h3><p>è¿˜æ˜¯å…ˆçœ‹ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">class Foo(object):</div><div class="line">    username = &quot;Foo&quot;</div><div class="line">    def say_hello(self):</div><div class="line">        print &quot;Hello %s&quot; % username</div><div class="line"></div><div class="line">foo = Foo()</div><div class="line">foo.say_hello()  # NameError: global name &apos;username&apos; is not defined</div></pre></td></tr></table></figure></p>
<p><code>username</code>æ˜¯å®šä¹‰åœ¨<code>Foo</code>ç±»çº§åˆ«çš„ï¼Œå†…éƒ¨çš„<code>say_hello</code>æ–¹æ³•åœ¨æŸ¥æ‰¾è‡ªç”±å˜é‡<code>username</code>çš„ä½œç”¨åŸŸä¼šæŒ‰ç…§ä¸Šé¢è¯´çš„LEGB è§„åˆ™ (Local, Enclosing, Global, Built-in)ï¼Œå¹¶ä¸ä¼šå»æŸ¥æ‰¾ç±»çº§åˆ«ä½œç”¨åŸŸçš„å˜é‡ï¼Œæ‰€æœ‰è¿™é‡Œä¼šæŠ¥é”™ã€‚ä¿®æ”¹çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">def say_hello(self):</div><div class="line">    print &quot;Hello %s&quot; % Foo.username</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒPython åœ¨è¯•å›¾çœç•¥æ‰å˜é‡å£°æ˜çš„åŒæ—¶ï¼Œåè€Œé€ æˆäº†æ›´å¤æ‚çš„æƒ…å†µï¼Œç›¸å…³è®¨è®ºåœ¨ Python mail-list é‡Œé¢è®¨è®ºä¹Ÿå¾ˆç«çƒ­ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="http://legacy.python.org/dev/peps/pep-3104/" target="_blank" rel="external">PEP 3104 â€“ Access to Names in Outer Scopes</a></li>
</ul>
<h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>è¿˜æ˜¯å…ˆçœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">function add(x) &#123;</div><div class="line">  return function(y) &#123;</div><div class="line">    return x + y;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line">var add3 = add(3);</div><div class="line">alert(add3(4));  // return 7</div></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>add3</code>å°±æ˜¯ä¸€é—­åŒ…å¯¹è±¡ï¼Œå®ƒåŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼Œä¸€ä¸ª<code>å‡½æ•°</code>ä¸å£°æ˜å‡½æ•°æ—¶çš„<code>ç¯å¢ƒ</code>ã€‚è¿™å°±æ˜¯é—­åŒ…çš„æ ¸å¿ƒï¼Œæ²¡æœ‰ä»»ä½•ç¥å¥‡çš„åœ°æ–¹ï¼Œé—­åŒ…å°±æ˜¯è§£å†³è‡ªç”±å˜é‡ä½œç”¨åŸŸçš„é—®é¢˜ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://www.adequatelygood.com/JavaScript-Scoping-and-Hoisting.html" target="_blank" rel="external">JavaScript Scoping and Hoisting</a></li>
<li><a href="http://dmitrysoshnikov.com/notes/note-4-two-words-about-hoisting/" target="_blank" rel="external">Note 4. Two words about â€œhoistingâ€</a></li>
<li><a href="https://hacks.mozilla.org/2015/07/es6-in-depth-let-and-const/" target="_blank" rel="external">ES6 In Depth: let and const</a></li>
<li><a href="https://docs.python.org/3.5/reference/executionmodel.html#interaction-with-dynamic-features" target="_blank" rel="external">The Python Language Reference 4. Execution model</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¦‚æœä½ å†™è¿‡ javascriptï¼Œåº”è¯¥å¬è¯´è¿‡&lt;a href=&quot;https://en.wikipedia.org/wiki/JavaScript_syntax#hoisting&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å˜é‡æå‡&lt;/a&gt;ï¼ˆhoisting
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="JavaScript" scheme="http://liujiacai.net/tags/javascript/"/>
    
      <category term="Python" scheme="http://liujiacai.net/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>SICP ç¬¬äº”ç« æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2016/05/21/sicp-chapter5-summary/"/>
    <id>http://liujiacai.net/blog/2016/05/21/sicp-chapter5-summary/</id>
    <published>2016-05-21T08:04:15.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»è¿‡ç¬¬å››ç« å…ƒè¯­è¨€æŠ½è±¡çš„æ´—ç¤¼ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ·±è°™ç¼–è¯‘å™¨å†…éƒ¨çš„åŸç†ï¼Œæ ¸å¿ƒå°±æ˜¯<code>eval-apply</code>å¾ªç¯ï¼Œåªæ˜¯è¯´åŸºäºè¿™ä¸ªæ ¸å¿ƒå¯ä»¥æœ‰å„ç§å»¶ä¼¸ï¼Œåƒå»¶è¿Ÿæ±‚å€¼ã€amb ä¸å®šé€‰æ‹©æ±‚å€¼ã€é€»è¾‘æ±‚å€¼ç­‰ç­‰ï¼Œæœ‰äº†è¿™å±‚çš„ç†è§£ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿé€è¿‡å„ç§èŠ±å“¨çš„<a href="https://en.wikipedia.org/wiki/Syntactic_sugar" target="_blank" rel="external">è¯­æ³•ç³–</a>ï¼Œçœ‹å‡ºå…¶æœ¬è´¨æ¥ï¼Œåƒ Node.js ä¸­çš„ Promiseã€ Python ä¸­çš„ coroutineï¼Œéƒ½æ˜¯ <a href="https://en.wikipedia.org/wiki/Continuation" target="_blank" rel="external">continuation</a> çš„ä¸€ç§åº”ç”¨è€Œå·²ã€‚</p>
<p>ä½†æ˜¯ï¼Œæˆ‘ä»¬è¿˜æ— æ³•è§£é‡Šå­è¡¨è¾¾å¼çš„æ±‚å€¼æ€æ ·è¿”å›ä¸€ä¸ªå€¼ï¼Œä»¥ä¾¿é€ç»™ä½¿ç”¨è¿™ä¸ªå€¼çš„è¡¨è¾¾å¼ï¼Œä¹Ÿæ— æ³•è§£é‡Šä¸ºä»€ä¹ˆæœ‰äº›é€’å½’è¿‡ç¨‹èƒ½äº§ç”Ÿè¿­ä»£å‹çš„è®¡ç®—è¿‡ç¨‹ï¼Œè€Œå¦ä¸€äº›é€’å½’è¿‡ç¨‹å´ç”Ÿäº§é€’å½’å‹çš„è®¡ç®—ã€‚å°±å…¶åŸå› ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬æ‰€å®ç°çš„æ±‚å€¼å™¨æ˜¯ Scheme ç¨‹åºï¼Œå®ƒç»§æ‰¿å¹¶åˆ©ç”¨äº†åŸºç¡€ç³»ç»Ÿçš„æ§åˆ¶ç»“æ„ã€‚è¦æƒ³è¿›ä¸€æ­¥ç†è§£ Scheme çš„æ§åˆ¶ç»“æ„ï¼Œå¿…é¡»è½¬åˆ°æ›´ä½çš„å±‚é¢ï¼Œç ”ç©¶æ›´å¤šç»†èŠ‚ï¼Œè€Œè¿™äº›ï¼Œå°±æ˜¯ç¬¬äº”ç« çš„ä¸»è¦å†…å®¹ã€‚</p>
<h2 id="å¯„å­˜å™¨æœºå™¨çš„è®¾è®¡"><a href="#å¯„å­˜å™¨æœºå™¨çš„è®¾è®¡" class="headerlink" title="å¯„å­˜å™¨æœºå™¨çš„è®¾è®¡"></a>å¯„å­˜å™¨æœºå™¨çš„è®¾è®¡</h2><p>ä¸ºäº†æ¢è®¨åº•å±‚çš„æ§åˆ¶ç»“æ„ï¼Œæœ¬ç« åŸºäºä¼ ç»Ÿè®¡ç®—æœºçš„ä¸€æ­¥ä¸€æ­¥æ“ä½œï¼Œæè¿°ä¸€äº›è®¡ç®—è¿‡ç¨‹ï¼Œè¿™ç±»è®¡ç®—æœºç§°ä¸ºå¯„å­˜å™¨æœºå™¨ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½å°±æ˜¯<code>é¡ºåºçš„</code>æ‰§è¡Œä¸€æ¡æ¡æŒ‡ä»¤ï¼Œæ“ä½œä¸€ç»„å­˜å‚¨å•å…ƒã€‚æœ¬ç« ä¸æ¶‰åŠå…·ä½“æœºå™¨ï¼Œè¿˜æ˜¯ç ”ç©¶ä¸€äº› Scheme è¿‡ç¨‹ï¼Œå¹¶è€ƒè™‘ä¸ºæ¯ä¸ªè¿‡ç¨‹è®¾è®¡ä¸€ä¸ªç‰¹æ®Šçš„å¯„å­˜å™¨æœºå™¨ã€‚</p>
<p>ç¬¬ä¸€æ­¥å·¥ä½œåƒæ˜¯è®¾è®¡ä¸€ç§ç¡¬ä»¶ä½“ç³»ç»“æ„ï¼Œå…¶ä¸­å°†ï¼š</p>
<ol>
<li>å¼€å‘ä¸€äº›æœºåˆ¶æ”¯æŒé‡è¦ç¨‹åºç»“æ„ï¼Œå¦‚é€’å½’ï¼Œè¿‡ç¨‹è°ƒç”¨ç­‰</li>
<li>è®¾è®¡ä¸€ç§æè¿°å¯„å­˜å™¨æœºå™¨çš„è¯­è¨€</li>
<li>åšä¸€ä¸ª Scheme ç¨‹åºæ¥è§£é‡Šç”¨è¿™ç§è¯­è¨€æè¿°çš„æœºå™¨</li>
</ol>
<p>å¯„å­˜å™¨æœºå™¨åŒ…å«<code>æ•°æ®é€šè·¯(å¯„å­˜å™¨å’Œæ“ä½œ)</code>å’Œç¡®å®šæ“ä½œé¡ºåºçš„<code>æ§åˆ¶å™¨</code>ã€‚ä¹¦ä¸­ä»¥ gcd ç®—æ³•ä¸ºä¾‹ä»‹ç»ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(define (gcd a b)</div><div class="line">  (if (= b 0)</div><div class="line">    a</div><div class="line">    (gcd b (remainer a b))))</div></pre></td></tr></table></figure>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB280XDppXXXXXWXXXXXXXXXXXX_!!581166664.png" alt="GCD æ•°æ®é€šè·¯"><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2S63.pXXXXXXXXpXXXXXXXXXX_!!581166664.png" alt=" GCD æ§åˆ¶å™¨"><br></center>

<p>ä¸ºäº†æè¿°å¤æ‚çš„è¿‡ç¨‹ï¼Œä¹¦ä¸­é‡‡ç”¨å¦‚ä¸‹çš„è¯­è¨€æ¥æè¿°å¯„å­˜å™¨æœºå™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">(controller</div><div class="line">  test-b</div><div class="line">    (test (op =) (reg a) (const 0))</div><div class="line">    (branch (label gcd-done))</div><div class="line">    (assign t (op rem) (reg a) (reg b))</div><div class="line">    (assign a (reg b))</div><div class="line">    (assign b (reg t))</div><div class="line">    (goto (label test-b))</div><div class="line">  gcd-done)</div></pre></td></tr></table></figure></p>
<h3 id="å­ç¨‹åº"><a href="#å­ç¨‹åº" class="headerlink" title="å­ç¨‹åº"></a>å­ç¨‹åº</h3><p>ç›´æ¥å¸¦å…¥æ›´åŸºæœ¬æ“ä½œçš„ç»“æ„ï¼Œå¯èƒ½ä½¿æ§åˆ¶å™¨å˜å¾—éå¸¸å¤æ‚ï¼Œå¸Œæœ›èƒ½å¤Ÿä½œå‡ºæŸç§å®‰æ’ï¼Œç»´æŒæœºå™¨çš„ç®€å•æ€§ï¼Œè€Œä¸”é¿å…é‡å¤çš„ç»“æ„ï¼Œæ¯”å¦‚å¦‚æœæœºå™¨ä¸¤æ¬¡ç”¨GCDï¼Œæœ€å¥½å…¬ç”¨ä¸€ä¸ª GCD éƒ¨ä»¶ï¼Œè¿™æ˜¯å¯è¡Œçš„ï¼Œå› ä¸ºä»»ä¸€æ—¶åˆ»ï¼Œåªèƒ½è¿›è¡Œä¸€ä¸ª GCD æ“ä½œï¼Œåªæ˜¯è¾“å…¥è¾“å‡ºçš„å¯„å­˜å™¨ä¸ä¸€æ ·è€Œå·²ã€‚æ€è·¯ï¼š</p>
<blockquote>
<p>è°ƒç”¨ GCD ä»£ç å‰æŠŠä¸€ä¸ªå¯„å­˜å™¨(å¦‚ continue)è®¾ç½®ä¸ºä¸åŒçš„å€¼,åœ¨ GCD ä»£ç çš„å‡ºå£æ ¹æ®è¯¥å¯„å­˜å™¨è·³åˆ°æ­£ç¡®ä½ç½®</p>
</blockquote>
<p>å…·ä½“ä»£ç ä¸å›¾ç¤ºå¯å‚è€ƒï¼š<a href="https://github.com/jiacai2050/sicp/blob/master/2016-05/2015-05-12_subroutes.md" target="_blank" rel="external">2015-05-12_subroutes.md</a></p>
<h3 id="é‡‡ç”¨å †æ ˆå®ç°é€’å½’"><a href="#é‡‡ç”¨å †æ ˆå®ç°é€’å½’" class="headerlink" title="é‡‡ç”¨å †æ ˆå®ç°é€’å½’"></a>é‡‡ç”¨å †æ ˆå®ç°é€’å½’</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">(define (factorial n)</div><div class="line">  (if (= n 1)</div><div class="line">    1</div><div class="line">    (* n (factorial (- n 1)))))</div><div class="line">```    </div><div class="line">è¡¨é¢çœ‹è®¡ç®—é˜¶ä¹˜éœ€è¦åµŒå¥—çš„æ— ç©·å¤šéƒ¨æœºå™¨,ä½†ä»»ä½•æ—¶åˆ»åªç”¨ä¸€éƒ¨ã€‚è¦æƒ³ ç”¨åŒä¸€æœºå™¨å®Œæˆæ‰€æœ‰è®¡ç®—,éœ€è¦åšå¥½å®‰æ’,åœ¨é‡åˆ°å­é—®é¢˜æ—¶ä¸­æ–­å½“å‰è®¡ç®—,è§£å†³å­é—®é¢˜åå›åˆ°ä¸­æ–­çš„åŸè®¡ç®—ã€‚æ³¨æ„:</div><div class="line"></div><div class="line">- è¿›å…¥å­é—®é¢˜æ—¶çš„çŠ¶æ€ä¸å¤„ç†åŸé—®é¢˜æ—¶ä¸åŒ(å¦‚ n å˜æˆ n-1)</div><div class="line">- ä¸ºäº†å°†æ¥èƒ½ç»§ç»­ä¸­æ–­çš„è®¡ç®—,å¿…é¡»ä¿å­˜å½“æ—¶çŠ¶æ€(å½“æ—¶ n çš„å€¼)</div><div class="line"></div><div class="line">æ§åˆ¶é—®é¢˜:å­ç¨‹åºç»“æŸååº”è¯¥è¿”å›å“ªé‡Œï¼Ÿ</div><div class="line"></div><div class="line">- continue é‡Œä¿å­˜è¿”å›ä½ç½®,é€’å½’ä½¿ç”¨åŒä¸€æœºå™¨æ—¶ä¹Ÿè¦ç”¨è¿™ä¸ªå¯„å­˜ å™¨,ç»™å®ƒèµ‹äº†æ–°å€¼å°±ä¼šä¸¢æ‰å½“æ—¶ä¿å­˜å…¶ä¸­å‡†å¤‡è¿”å›çš„ä½ç½®</div><div class="line">- ä¸ºäº†èƒ½æ­£ç¡®è¿”å›,è°ƒç”¨å‰ä¹Ÿéœ€è¦æŠŠ continue çš„å€¼å…¥æ ˆ</div><div class="line"></div><div class="line">é˜¶ä¹˜ç®—æ³•çš„å…·ä½“è§£é‡Šä¸å›¾ç¤ºå¯å‚è€ƒï¼š[2016-05-16_recursion_stack.md](https://github.com/jiacai2050/sicp/blob/master/2016-05/2016-05-16_recursion_stack.md)</div><div class="line"></div><div class="line">è¿™é‡Œæ¯”è¾ƒéš¾ç†è§£çš„æ˜¯ fib ç®—æ³•ï¼Œå› ä¸ºè¿™é‡Œæ¶‰åŠåˆ°ä¸¤æ¬¡é€’å½’è°ƒç”¨ï¼š</div></pre></td></tr></table></figure>
<p>(define (fib n)<br>  (if (&lt; n 2)<br>    n<br>    (+ (fib (- n 1))<br>       (fib (- n 2)))))</p>
<p>(controller<br>  (assign continue (label fib-done))<br>fib-loop<br>  (test (op &lt;) (reg n) (const 2))<br>  (branch (label immediate-answer))<br>  ;; set up to compute Fib(n-1)<br>  (save continue)<br>  (assign (continue (label afterfib-n-1))<br>  (save n)                                ; save old value of n<br>  (assign n (op -) (reg n) (const 1)))    ; clobber n to n-1<br>  (goto (label fib-loop))                 ; perform recursive call<br>afterfib-n-1                              ; upon return, val contains Fib(n-1)<br>  (restore n)<br>  (restore continue)<br>  ;; set up to compute Fib(n-2)<br>  (assign n (op -) (reg n) (const 2))<br>  (save continue)<br>  (assign continue (label afterfib-n-2))<br>  (save val)                               ; save Fib(n-1)<br>  (goto (label fib-loop))<br>afterfib-n-2                               ; upon return, val contains Fib(n-2)<br>  (assign n (reg val))                     ; n now contains Fib(n-2)<br>  (restore val)                            ; val now contains Fib(n-1)<br>  (restore continue)<br>  (assign val (op +) (reg val) (reg n))    ; return to caller, answer is in val<br>  (goto (reg continue))<br>immediate-answer<br>  (assign val (reg n))                     ; base case: Fib(n) = n<br>  (goto (reg continue))<br>fib-done)</p>
<p>;; afterfib-n-1 ä¸­å…ˆæŠŠ continue é‡Šæ”¾ï¼Œç„¶ååˆä¿å­˜èµ·æ¥ï¼Œä¸­é—´ä»€ä¹ˆæ“ä½œä¹Ÿæ²¡æœ‰<br>```</p>
<p><a href="https://github.com/jiacai2050/sicp/blob/master/exercises/05/5.6.scm" target="_blank" rel="external">ä¹ é¢˜5.6</a>ã€<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/05/5.11.md" target="_blank" rel="external">ä¹ é¢˜5.11</a> å¯¹è¿™ä¸€ç®—æ³•è¿›è¡Œäº†åˆ†æä¸ä¿®æ”¹ï¼Œå»ºè®®å¤§å®¶çœ‹çœ‹ã€‚</p>
<h2 id="ä¸€ä¸ªå¯„å­˜å™¨æœºå™¨æ¨¡æ‹Ÿå™¨"><a href="#ä¸€ä¸ªå¯„å­˜å™¨æœºå™¨æ¨¡æ‹Ÿå™¨" class="headerlink" title="ä¸€ä¸ªå¯„å­˜å™¨æœºå™¨æ¨¡æ‹Ÿå™¨"></a>ä¸€ä¸ªå¯„å­˜å™¨æœºå™¨æ¨¡æ‹Ÿå™¨</h2><p>è¿™æ˜¯5.2å°èŠ‚çš„å†…å®¹ï¼Œä¸»è¦æ˜¯ç”¨ä¸€ç§å¯„å­˜å™¨æœºå™¨è¯­è¨€ï¼ˆå³ä¸Šé¢æè¿° gcdã€fib çš„è¯­è¨€ï¼‰æè¿°çš„æœºå™¨æ„é€ ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ã€‚è¿™ä¸€æ¨¡æ‹Ÿå™¨æ˜¯ä¸€ä¸ª Scheme ç¨‹åºï¼Œé‡‡ç”¨ç¬¬ä¸‰ç« ä»‹ç»çš„æ¶ˆæ¯ä¼ é€’çš„ç¼–ç¨‹é£æ ¼ï¼Œå°†æ¨¡æ‹Ÿå™¨å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé€šè¿‡ç»™å®ƒå‘é€æ¶ˆæ¯æ¥æ¨¡æ‹Ÿè¿è¡Œã€‚</p>
<p>è¿™ä¸€æ¨¡æ‹Ÿå™¨çš„ä»£ç ä¸»è¦å¯ä»¥åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼š<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/05/lib/assemble.scm" target="_blank" rel="external">assemble.scm</a>ã€<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/05/lib/machine.scm" target="_blank" rel="external">machine.scm</a>ï¼Œæœ‰éœ€è¦çš„å¯ä»¥ç»“åˆä¹¦ä¸­è§£é‡Šçœ‹çœ‹ã€‚</p>
<p>è¿™é‡Œè®©æˆ‘ä¸ºä¹‹æƒŠå¹çš„ä¸€ç‚¹æ˜¯ï¼Œæœ¬ä¹¦ä½œè€…é‡‡ç”¨ä¹‹å‰ä¸€è´¯çš„é£æ ¼ï¼Œç”¨ Scheme å®ç°äº†ä¸€å°å¯„å­˜å™¨æœºå™¨ï¼Œå’Œç¬¬å››ç« ä¸­å„ç§è§£é‡Šå™¨ä¸€æ ·ï¼Œé€šè¿‡å±‚å±‚æ•°æ®æŠ½è±¡ï¼Œè®©ä½ è§‰å¾—è®¡ç®—æœºä¹Ÿæ²¡é‚£ä¹ˆæ·±ä¸å¯æµ‹ï¼Œä¹Ÿæ˜¯å¯ä»¥é€šè¿‡åŸºæœ¬è¿‡ç¨‹æ„é€ å‡ºæ¥çš„ã€‚</p>
<h2 id="å…¶ä»–å†…å®¹"><a href="#å…¶ä»–å†…å®¹" class="headerlink" title="å…¶ä»–å†…å®¹"></a>å…¶ä»–å†…å®¹</h2><p>ä¸ºäº†å®ç° Scheme è§£é‡Šå™¨,è¿˜éœ€è¦è€ƒè™‘è¡¨ç»“æ„çš„è¡¨ç¤ºå’Œå¤„ç†ï¼ˆ5.3èŠ‚å†…å®¹ï¼‰ï¼š</p>
<ul>
<li>éœ€è¦å®ç°åŸºæœ¬çš„è¡¨æ“ä½œ</li>
<li>å®ç°ä½œä¸ºè¿è¡ŒåŸºç¡€çš„å·§å¦™çš„å­˜å‚¨ç®¡ç†æœºåˆ¶ åé¢è®¨è®ºæœ‰å…³çš„åŸºç¡€æŠ€æœ¯(å¯èƒ½ç®€å•ä»‹ç»)</li>
</ul>
<p>æœ‰äº†åŸºæœ¬è¯­è¨€å’Œå­˜å‚¨ç®¡ç†æœºåˆ¶ä¹‹å,å°±å¯ä»¥åšå‡ºä¸€éƒ¨æœºå™¨ï¼ˆ5.4èŠ‚å†…å®¹ï¼‰,å®ƒèƒ½</p>
<ul>
<li>å®ç°ç¬¬å››ç« ä»‹ç»çš„å…ƒå¾ªç¯è§£é‡Šå™¨</li>
<li>è€Œä¸”ä¸ºè§£é‡Šå™¨çš„ç»†èŠ‚æä¾›äº†æ¸…æ™°çš„æ¨¡å‹</li>
</ul>
<p>è¿™ä¸€ç« çš„æœ€åï¼ˆ5.5èŠ‚å†…å®¹ï¼‰è®¨è®ºå’Œå®ç°äº†ä¸€ä¸ªç¼–è¯‘å™¨</p>
<ul>
<li>æŠŠ Scheme è¯­è¨€ç¨‹åºç¿»è¯‘åˆ°è¿™é‡Œçš„å¯„å­˜å™¨æœºå™¨è¯­è¨€</li>
<li>è¿˜æ”¯æŒè§£é‡Šä»£ç å’Œç¼–è¯‘ä»£ç ä¹‹é—´çš„è¿æ¥,æ”¯æŒåŠ¨æ€ç¼–è¯‘ç­‰</li>
</ul>
<p>è¿™é‡Œç”±äºæ—¶é—´ä¸ç²¾åŠ›çš„ç¼˜æ•…ï¼Œæœ€åä¸‰å°èŠ‚æ²¡æœ‰è¿›è¡Œç»†è‡´çš„é˜…è¯»ï¼Œåœ¨å°†æ¥éœ€è¦æ—¶å†å›æ¥é˜…è¯»ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»ˆäºåˆ°äº†è¿™ä¸€å¤©ï¼Œå†æ—¶ä¸€å¹´å¤šï¼Œç»ˆäºè¿˜æ˜¯æŠŠè¿™æœ¬ä¹¦çœ‹å®Œäº†ï¼Œç®—æ˜¯äº†äº†ä¸€ä¸ªå¿ƒç»“ï¼Œå¤§æ¦‚åœ¨å¤§ä¸‰çš„æ—¶å€™å°±çŸ¥é“äº†è¿™æœ¬ä¹¦ï¼Œç®—ç®—åˆ°ç°åœ¨å®Œæ•´çš„çœ‹å®Œï¼Œæœ‰å››å¹´æ—¶é—´äº†ã€‚åœ¨æœ€è¿‘è¿™ä¸€å¹´ä¸­ï¼Œè¿™æœ¬ä¹¦å¸¦ç»™æˆ‘äº†æ— æ•°çš„çµæ„Ÿä¸å¯å‘ï¼Œè¿™ç§æ„Ÿè§‰çœŸçš„æ— æ³•æè¿°ï¼Œåªæœ‰ä½ äº²è‡ªä½“ä¼šã€‚</p>
<p>æ­¤æ—¶æ­¤åˆ»å°è±¡æœ€æ·±çš„æœ‰ä¸¤ç‚¹ï¼š</p>
<ul>
<li>å¯¹ç°å®ä¸–ç•Œä¸­æ—¶é—´ä¸ç©ºé—´çš„æ¨¡æ‹Ÿï¼Œæ²¡æœ‰æœ€ä¼˜è§£ï¼Œä¸ç®¡æ˜¯å»¶æ—¶æ±‚å€¼çš„æµè¿˜æ˜¯å°è£…å±æ€§çš„å¯¹è±¡ï¼Œéƒ½æœ‰å…¶å±€é™æ€§ã€‚ä¹Ÿå¯èƒ½æ˜¯æˆ‘ä»¬äººç±»å¯¹ä¸–ç•Œçš„è®¤è¯†è¿˜ä¸å¤Ÿã€‚æ‘˜æŠ„ä¹¦ä¸­P219ä¸€æ®µè¯ï¼š</li>
</ul>
<blockquote>
<p>ä»æœ¬è´¨ä¸Šçœ‹ï¼Œåœ¨å¹¶å‘æ§åˆ¶ä¸­ï¼Œä»»ä½•æ—¶é—´æ¦‚å¿µéƒ½å¿…ç„¶ä¸é€šä¿¡æœ‰å†…åœ¨çš„å¯†åˆ‡è”ç³»ã€‚æœ‰æ„æ€çš„æ˜¯ï¼Œæ—¶é—´ä¸é€šä¿¡ä¹‹é—´çš„è¿™ç§è”ç³»ä¹Ÿå‡ºç°åœ¨ç›¸å¯¹è®ºé‡Œï¼Œåœ¨é‚£é‡Œçš„å…‰é€Ÿï¼ˆå¯èƒ½ç”¨äºåŒæ­¥äº‹ä»¶çš„æœ€å¿«ä¿¡å·ï¼‰æ˜¯ä¸æ—¶é—´å’Œç©ºé—´æœ‰å…³çš„åŸºæœ¬å¸¸é‡ã€‚åœ¨å¤„ç†æ—¶é—´å’ŒçŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—æ¨¡å‹é¢†åŸŸæ‰€é­é‡çš„å¤æ‚æ€§ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½å°±æ˜¯ç‰©ç†ä¸–ç•Œä¸­æœ€åŸºæœ¬çš„å¤æ‚æ€§çš„ä¸€ç§åæ˜ ã€‚</p>
</blockquote>
<ul>
<li>æ·±åˆ»è®¤è¯†äº†<code>è®¡ç®—</code>äºŒå­—çš„å«ä¹‰ï¼Œæ˜ç™½äº†è®¡ç®—æœºçš„å±€é™æ€§ï¼ˆ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/04/4.15.md" target="_blank" rel="external">åœæœºé—®é¢˜</a>ï¼‰ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰é—®é¢˜éƒ½æœ‰è§£çš„ï¼›</li>
</ul>
<p>å½“ç„¶ï¼Œå¹¶ä¸æ˜¯è¯´çœ‹å®Œè¿™æœ¬ä¹¦å°±æ˜¯â€œæ­¦æ—é«˜æ‰‹â€äº†ï¼Œä»Šåè¿˜æ˜¯è¦åœ¨ä¸æ–­å®è·µä¸­æ€»ç»“ã€ç§¯ç´¯ï¼Œæˆä¸ºä¸€ä½çœŸæ­£çš„ hackerã€‚</p>
<p>å¥½äº†ï¼Œä»Šå¤©å†™åˆ°è¿™é‡Œï¼Œä½œä¸ºä¸‡é‡Œé•¿åŸçš„ä¸€ä¸ªç»ˆç‚¹ã€‚ğŸ˜Š</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»è¿‡ç¬¬å››ç« å…ƒè¯­è¨€æŠ½è±¡çš„æ´—ç¤¼ï¼Œæˆ‘ä»¬å·²ç»èƒ½å¤Ÿæ·±è°™ç¼–è¯‘å™¨å†…éƒ¨çš„åŸç†ï¼Œæ ¸å¿ƒå°±æ˜¯&lt;code&gt;eval-apply&lt;/code&gt;å¾ªç¯ï¼Œåªæ˜¯è¯´åŸºäºè¿™ä¸ªæ ¸å¿ƒå¯ä»¥æœ‰å„ç§å»¶ä¼¸ï¼Œåƒå»¶è¿Ÿæ±‚å€¼ã€amb ä¸å®šé€‰æ‹©æ±‚å€¼ã€é€»è¾‘æ±‚å€¼ç­‰ç­‰ï¼Œæœ‰äº†è¿™å±‚çš„ç†è§£ï¼Œæˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿé€è¿‡å„ç§èŠ±å“¨çš„&lt;a href=&quot;https
    
    </summary>
    
      <category term="ç ”ä¹ ç»å…¸" scheme="http://liujiacai.net/categories/%E7%A0%94%E4%B9%A0%E7%BB%8F%E5%85%B8/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>SICP ç¬¬å››ç« æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2016/04/23/sicp-chapter4-summary/"/>
    <id>http://liujiacai.net/blog/2016/04/23/sicp-chapter4-summary/</id>
    <published>2016-04-23T11:50:56.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬ä¹¦çš„å‰ä¸‰ç« åˆ†åˆ«è®¨è®ºäº†<code>æ•°æ®æŠ½è±¡</code>ã€<code>è¿‡ç¨‹æŠ½è±¡</code>ã€<code>æ¨¡å—åŒ–</code>ä¸‰ç§ç¨‹åºè®¾è®¡çš„æŠ€æœ¯ï¼Œè¿™äº›éƒ½æ˜¯ç¼–ç¨‹çš„é—®é¢˜ï¼Œä¸€ç›´é‡‡ç”¨çš„æ˜¯ Scheme ä½œä¸ºç¼–ç¨‹è¯­è¨€ã€‚å¦‚æœé‡åˆ°çš„é—®é¢˜æ›´å¤æ‚ï¼Œæˆ–è€…éœ€è¦è§£å†³æŸé¢†åŸŸçš„å¤§é‡é—®é¢˜ï¼Œæœ‰å¯èƒ½å‘ç°ç°å®å¯ç”¨çš„è¯­è¨€(Lispï¼Œæˆ–å…¶ä»–)éƒ½ä¸å¤Ÿæ»¡æ„æˆ–ä¸å¤Ÿæ–¹ä¾¿ï¼Œå› æ­¤ç¬¬å››ç« ä¸»è¦å°±æ˜¯è®²è¿°å¦‚ä½•è®¾è®¡å’Œå®ç°ä¸€é—¨æ–°è¯­è¨€ã€‚</p>
<p>ç¬¬å››ç« é¦–å…ˆä»‹ç»äº†ä¸€ä¸ªè§£é‡Šå™¨ï¼ˆæœ¬ä¹¦ä¸­æ–‡ç¿»è¯‘ä¸ºâ€œæ±‚å€¼å™¨â€ï¼‰æœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼ˆevalä¸applyï¼‰ï¼Œç„¶ååŸºäºè¿™ä¸ªæ ¸å¿ƒï¼Œåšäº†ä¸€ç³»åˆ—çš„æ‰©å±•ï¼Œä¸‹é¢è®©æˆ‘ä»¬ä¸€èµ·å›é¡¾æ€»ç»“ä¸‹ã€‚</p>
<h2 id="å…ƒè¯­è¨€æŠ½è±¡"><a href="#å…ƒè¯­è¨€æŠ½è±¡" class="headerlink" title="å…ƒè¯­è¨€æŠ½è±¡"></a>å…ƒè¯­è¨€æŠ½è±¡</h2><p>4.1 å°èŠ‚å‘Šè¯‰æˆ‘ä»¬<code>è¯­è¨€çš„è§£é‡Šå™¨è‡ªèº«ä¹Ÿæ˜¯ä¸€ä¸ªè¿‡ç¨‹</code>è€Œå·²ï¼Œé€ç»™å®ƒçš„è¾“å…¥æ˜¯ç›¸åº”è¯­è¨€çš„è¡¨è¾¾å¼ï¼ˆå³ç¨‹åºï¼‰ï¼Œå®ƒå°±ä¼šå®Œæˆè¯¥è¡¨è¾¾å¼è¦æ±‚åšçš„åŠ¨ä½œã€‚æ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥ç”¨ Scheme å†™å‡ºä¸€ä¸ª Scheme çš„è§£é‡Šå™¨ï¼Œå­¦ä¹ æ±‚å€¼å™¨å®ç°ï¼Œæœ‰åŠ©äºç†è§£è¯­è¨€æœ¬èº«å’Œè¯­è¨€å®ç°ä¸­çš„é—®é¢˜ã€‚è€Œä¸”  Scheme è¯­è¨€æœ‰å¼ºå¤§çš„ç¬¦å·å¤„ç†èƒ½åŠ›ï¼Œç‰¹åˆ«é€‚åˆç”¨äºåšè¿™ç§å·¥ä½œã€‚</p>
<p>åœ¨é˜…è¯»4.1ç« èŠ‚ä¹‹å‰ï¼Œæˆ‘ç”¨ Java å°è¯•å®ç°äº†ä¸€ä¸ª Scheme è§£é‡Šå™¨ JCSchemeï¼Œä¹‹å‰ä¹Ÿå†™è¿‡<a href="/blog/2015/10/03/first-toy-scheme/">æ–‡ç« </a>ä»‹ç»ï¼Œæœ€æ ¸å¿ƒçš„å°±æ˜¯ä¸‹é¢ä¸¤ä¸ªè¿‡ç¨‹ï¼š</p>
<ul>
<li>eval åœ¨ä¸€ä¸ªç¯å¢ƒé‡Œçš„æ±‚å€¼ä¸€ä¸ªè¡¨è¾¾å¼</li>
<li>apply å°†ä¸€ä¸ªè¿‡ç¨‹å¯¹è±¡åº”ç”¨äºä¸€ç»„å®é™…å‚æ•°</li>
</ul>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2KjMVfFXXXXbOXpXXXXXXXXXX_!!581166664.png" alt="SICP-eval-apply"><br></center><br>evalã€apply è¿™ä¸¤ä¸ªè§„åˆ™æè¿°äº†æ±‚å€¼è¿‡ç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œè¿™æ˜¯ä»»ä½•è§£é‡Šå™¨çš„åŸºæœ¬å¾ªç¯ã€‚åœ¨è¿™ä¸€å¾ªç¯ä¸­</p>
<blockquote>
<p>è¡¨è¾¾å¼åœ¨ç¯å¢ƒä¸­çš„æ±‚å€¼è¢«è§„çº¦åˆ°è¿‡ç¨‹å¯¹å®é™…å‚æ•°çš„åº”ç”¨ï¼Œè€Œè¿™ç§åº”ç”¨åˆè¢«è§„çº¦åˆ°æ–°çš„è¡¨è¾¾å¼åœ¨æ–°çš„ç¯å¢ƒä¸­çš„æ±‚å€¼ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œç›´åˆ°ä¸‹é™åˆ°ç¬¦å·ï¼ˆå…¶å€¼å¯ä»¥åœ¨ç¯å¢ƒä¸­æ‰¾åˆ°ï¼‰æˆ–è€…åŸºæœ¬è¿‡ç¨‹ï¼ˆå®ƒä»¬å¯ä»¥ç›´æ¥åº”ç”¨ï¼‰ã€‚</p>
</blockquote>
<p>åé¢çš„ amb è§£é‡Šå™¨ã€æŸ¥è¯¢è¯­è¨€çš„è§£é‡Šå™¨éƒ½æ˜¯åœ¨è¿™ä¸ªåŸºæœ¬å¾ªç¯çš„åŸºç¡€ä¸Šæ”¹é€ æ¥çš„ã€‚</p>
<h3 id="å›¾çµæœº"><a href="#å›¾çµæœº" class="headerlink" title="å›¾çµæœº"></a>å›¾çµæœº</h3><p>4.1.5 å°èŠ‚ä¸­ï¼Œå°†ç¨‹åºçœ‹æˆä¸€ç§æŠ½è±¡çš„æœºå™¨çš„ä¸€ä¸ªæè¿°ï¼ŒæŒ‰ç…§è¿™ç§è§‚ç‚¹ï¼Œæ±‚å€¼å™¨å¯ä»¥çœ‹ä½œä¸€éƒ¨éå¸¸ç‰¹æ®Šçš„æœºå™¨ï¼Œå®ƒè¦æ±‚ä»¥ä¸€éƒ¨æœºå™¨çš„æè¿°ä½œä¸ºè¾“å…¥ï¼Œç»™å®šäº†ä¸€ä¸ªè¾“å…¥åï¼Œæ±‚å€¼å™¨å°±èƒ½å¤Ÿè§„åˆ’è‡ªå·±çš„è¡Œä¸ºï¼Œæ¨¡æ‹Ÿè¢«æè¿°æœºå™¨çš„æ‰§è¡Œè¿‡ç¨‹ã€‚</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2PWTZnFXXXXaRXXXXXXXXXXXX_!!581166664.png" alt=" evaluator_machine"><br></center><br>è¿™é‡Œçš„æ·±åˆ»æ€æƒ³æ˜¯ï¼š</p>
<blockquote>
<p>ä»»ä¸€æ±‚å€¼å™¨éƒ½èƒ½å¤Ÿæ¨¡æ‹Ÿå…¶ä»–çš„æ±‚å€¼å™¨</p>
</blockquote>
<p>è¿™æ ·ï¼Œæœ‰å…³â€œåŸåˆ™ä¸Šè¯´ä»€ä¹ˆå¯ä»¥è®¡ç®—ï¼ˆå¿½ç•¥æ‰æ—¶é—´ä¸ç©ºé—´çš„å®è·µæ€§é—®é¢˜ï¼‰â€çš„æ¦‚å¿µå°±æ˜¯ä¸è¯­è¨€æˆ–è€…è®¡ç®—æœºæ— å…³äº†ï¼Œå®ƒåæ˜ çš„æ˜¯ä¸€ä¸ªæœ‰å…³<code>å¯è®¡ç®—æ€§</code>çš„åŸºæœ¬æ¦‚å¿µã€‚å›¾çµ1936å¹´çš„è®ºæ–‡é˜è¿°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶å£°ç§°ï¼š</p>
<blockquote>
<p>ä»»ä½•â€œæœ‰æ•ˆè¿‡ç¨‹â€éƒ½å¯ä»¥æè¿°ä¸ºè¿™ç§æœºå™¨çš„ä¸€ä¸ªç¨‹åº</p>
</blockquote>
<p>è€Œåå›¾çµå®ç°äº†ä¸€å°é€šç”¨æœºå™¨ï¼Œå³ä¸€å°å›¾çµæœºï¼Œå…¶è¡Œä¸ºå°±åƒæ˜¯æ‰€æœ‰å›¾çµæœºç¨‹åºçš„æ±‚å€¼å™¨ã€‚</p>
<p>è¿™ä¸€æ±‚å€¼å™¨æ˜¯è¿åç›´è§‰çš„ï¼Œå› ä¸ºå®ƒæ˜¯ç”±ä¸€ä¸ªç›¸å¯¹ç®€å•çš„è¿‡ç¨‹å®ç°ï¼Œå´èƒ½å»æ¨¡æ‹Ÿå¯èƒ½æ¯”æ±‚å€¼å™¨æœ¬èº«è¿˜å¤æ‚çš„å„ç§ç¨‹åºï¼Œé€šç”¨æ±‚å€¼å™¨çš„å­˜åœ¨æ˜¯è®¡ç®—çš„ä¸€ç§æ·±åˆ»è€Œç¾å¦™çš„æ€§è´¨ã€‚é€’å½’è®ºæ˜¯æ•°ç†é€»è¾‘çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè¿™ä¸€ç†è®ºç ”ç©¶è®¡ç®—çš„é€»è¾‘æé™ï¼Œ<a href="https://book.douban.com/subject/1291204/" target="_blank" rel="external">ã€ŠGEBã€‹</a>é‡Œä¹Ÿæ¢è®¨äº†ä¸€äº›æ€æƒ³ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŠŠè¿™æœ¬ä¹¦åŠ å…¥ä¹¦å•ã€‚</p>
<p>å…¶ä»–é¢†åŸŸä¸­ä¹Ÿæœ‰è¿™ç§é€šç”¨åŠŸèƒ½çš„ä¸œè¥¿ï¼Œåƒç”µå­ä¹¦ã€éŸ³ä¹æ’­æ”¾å™¨ç­‰éƒ½å±äºâ€œä¸“ç”¨çš„é€šç”¨è®¾å¤‡â€ï¼Œè®¡ç®—æœºï¼ˆä¸€ä¸ªç¼–ç¨‹è¯­è¨€å°±æ˜¯ä¸€ç§æŠ½è±¡çš„è®¡ç®—æœºï¼‰æ¯”å®ƒä»¬æ›´è¿›ä¸€æ­¥ï¼šå®ƒèƒ½æ¨¡æ‹Ÿè‡ªå·±ã€‚</p>
<p>è¿™é‡Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/04/4.15.md" target="_blank" rel="external">ä¹ é¢˜4.15</a>çš„åœæœºé—®é¢˜ï¼Œæœ¬å°èŠ‚æ‰€æœ‰è§£é‡Šå™¨çš„ä»£ç å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/04/lib/main.scm" target="_blank" rel="external">main.scm</a>ã€‚</p>
<h3 id="JIT"><a href="#JIT" class="headerlink" title="JIT"></a>JIT</h3><p>4.1.7å°èŠ‚ä¸­å°†è¯­æ³•åˆ†æä¸æ‰§è¡Œåˆ†å¼€ï¼Œè¿™é‡Œçš„åšæ³•ç±»ä¼¼äºé«˜çº§è¯­è¨€çš„è§£é‡Šå’Œç¼–è¯‘ï¼š</p>
<ul>
<li> ç›´æ¥è§£é‡Š,å°±æ˜¯ä¸€ééåˆ†æç¨‹åºä»£ç ,å®ç°å…¶è¯­ä¹‰ã€‚ä¾‹å¦‚æœ€æ—©çš„ BASIC è¯­è¨€å®ç°</li>
<li>ç¼–è¯‘æŠŠå®ç°ç¨‹åºåŠŸèƒ½çš„å·¥ä½œåˆ†ä¸ºä¸¤æ­¥:<ul>
<li>é€šè¿‡ä¸€æ¬¡åˆ†æç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œçš„ç¨‹åº</li>
<li>åœ¨æ­¤ä¹‹åå¯ä»¥ä»»æ„åœ°å¤šæ¬¡æ‰§è¡Œè¿™ä¸ªç¨‹åº    </li>
</ul>
</li>
</ul>
<p>è¿™é‡Œåšçš„æ˜¯ä» Scheme æºç¨‹åº(å…ƒå¾ªç¯è§£é‡Šå™¨/æ±‚å€¼å™¨å¤„ç†çš„â€œæ•°æ®â€)åˆ° Scheme å¯æ‰§è¡Œç¨‹åºçš„ç¿»è¯‘ï¼Œè¿™æ˜¯ä¸€ç§ <a href="https://en.wikipedia.org/wiki/Just-in-time_compilation" target="_blank" rel="external">Just In-time Translationï¼ŒJIT(å³æ—¶ç¿»è¯‘)</a>ï¼Œç›®å‰æˆç†Ÿçš„Javaè™šæ‹Ÿæœºéƒ½é‡‡ç”¨è¿™ç§æŠ€æœ¯æ¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚åœ¨å®é™…ä¸­åº”ç”¨,è¿˜éœ€è¿›ä¸€æ­¥è€ƒè™‘æ•´ä½“æ•ˆç‡é—®é¢˜ã€‚</p>
<h2 id="æƒ°æ€§æ±‚å€¼"><a href="#æƒ°æ€§æ±‚å€¼" class="headerlink" title="æƒ°æ€§æ±‚å€¼"></a>æƒ°æ€§æ±‚å€¼</h2><p>4.1 å°èŠ‚å®ç°çš„æ±‚å€¼å™¨é‡‡ç”¨çš„åº”ç”¨åºæ±‚å€¼ï¼ˆè¿‡ç¨‹åº”ç”¨ä¹‹å‰å®Œæˆå¯¹æ‰€æœ‰å‚æ•°çš„æ±‚å€¼ï¼‰ï¼Œ4.2 å°èŠ‚ä¿®æ”¹ä¹‹å‰çš„æ±‚å€¼å™¨ï¼Œä½¿ä¹‹èƒ½å¤ŸæŒ‰ç…§æ­£åˆ™åºæ±‚å€¼ï¼Œä¹Ÿç§°ä¸ºæƒ°æ€§æ±‚å€¼ã€‚æƒ°æ€§æ±‚å€¼çš„å¯ä»¥ç”¨æ¥å®ç°ç¬¬ä¸‰ç« ä»‹ç»çš„æµï¼Œè€Œä¸”ä¹Ÿå¯ä»¥é¿å…ä¸‹é¢çš„é—®é¢˜ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(define (try a b)</div><div class="line">  (if (= a 0)</div><div class="line">    1</div><div class="line">    b))</div><div class="line"></div><div class="line">(try 0 (/ 1 0))</div><div class="line"># å¦‚æœé‡‡ç”¨æ­£åˆ™åºï¼Œè¿™é‡Œä¸ä¼šæŠ±é”™ï¼Œå› ä¸º try å‡½æ•°ä¸­æ ¹æœ¬å°±æ²¡ç”¨çš„bçš„å€¼</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œè¦åšçš„ä¿®æ”¹ä¸æ˜¯å¾ˆå¤šï¼Œåªæ˜¯åœ¨è¿‡ç¨‹çš„å‚æ•°ä¸ŠåŒ…ä¸€å±‚ï¼ŒåŠ ä¸€ä¸ª<code>trunk</code>ï¼ŒçœŸæ­£éœ€è¦è®¡ç®—æ—¶åœ¨æ±‚å€¼ï¼Œæ ¸å¿ƒä»£ç å¯ä»¥å‚è€ƒ <a href="https://github.com/jiacai2050/sicp/blob/master/exercises/04/lib/trunk.scm" target="_blank" rel="external">trunk.scm</a>ï¼Œæ­¤å¤–ï¼Œå¤„äºæ€§èƒ½æ–¹ä¾¿çš„è€ƒè™‘ï¼Œä¸€èˆ¬ä¼šå¯¹æ±‚è¿‡çš„å‚æ•°è¿›è¡Œç¼“å­˜ã€‚</p>
<p>æˆ‘è‡ªå·±å®ç°çš„ JCScheme ä¹Ÿæ”¯æŒè¿™ç§æ­£åˆ™åºæ±‚å€¼ï¼Œæ„Ÿå…´è¶£çš„<a href="https://github.com/jiacai2050/JCScheme/tree/normal-order" target="_blank" rel="external">å‚è€ƒ</a>ã€‚</p>
<h2 id="amb-éç¡®å®šæ€§è®¡ç®—"><a href="#amb-éç¡®å®šæ€§è®¡ç®—" class="headerlink" title="amb éç¡®å®šæ€§è®¡ç®—"></a>amb éç¡®å®šæ€§è®¡ç®—</h2><p>amb çš„åå­—æ¥è‡ª ambiguous(æ­§ä¹‰,å¤šä¹‰)ï¼Œ4.3å°èŠ‚åœ¨ Scheme é‡Œæ‰©å……éç¡®å®šæ€§è®¡ç®—åŠŸèƒ½ã€‚éç¡®å®šæ€§è®¡ç®—é‡Œæœ€å…³é”®çš„æ€æƒ³ï¼š</p>
<ul>
<li>å…è®¸ä¸€ä¸ªè¡¨è¾¾å¼æœ‰å¤šä¸ªå¯èƒ½çš„å€¼</li>
<li><p>åœ¨æ±‚å€¼è¿™ç§è¡¨è¾¾å¼æ—¶,æ±‚å€¼å™¨å¯ä»¥è‡ªåŠ¨é€‰å‡ºä¸€ä¸ªå€¼<br>  å¯èƒ½ä»å¯ä»¥é€‰çš„å€¼ä¸­ä»»æ„é€‰å‡ºä¸€ä¸ªã€‚è¿˜éœ€è¦ç»´æŒä¸é€‰æ‹©ç›¸å…³çš„è½¨è¿¹(çŸ¥é“å“ªäº›å…ƒç´ å·²ç»é€‰è¿‡,å“ªäº›æ²¡é€‰è¿‡ã€‚åœ¨åç»­è®¡ç®—ä¸­è¦ä¿è¯ä¸å‡ºç°é‡é€‰çš„æƒ…å†µ)</p>
</li>
<li><p>å¦‚æœå·²åšé€‰æ‹©ä¸èƒ½æ»¡è¶³åé¢çš„è¦æ±‚,æ±‚å€¼å™¨å°±ä¼šå›åˆ°æœ‰å…³çš„è¡¨é‡Œå† æ¬¡é€‰æ‹©,ç›´è‡³æ±‚å€¼æˆåŠŸ;æˆ–è€…æ‰€æœ‰é€‰æ‹©éƒ½å·²ç”¨å®Œæ—¶æ±‚å€¼å¤±è´¥</p>
</li>
</ul>
<p>éç¡®å®šæ€§è®¡ç®—çš„è¿‡ç¨‹å°†é€šè¿‡æ±‚å€¼å™¨è‡ªåŠ¨è¿›è¡Œçš„æœç´¢å®ç°ï¼Œé€‰æ‹©å’Œé‡æ–°é€‰æ‹©çš„æ–¹æ³•å’Œå®é™…è¿‡ç¨‹éƒ½éšè—åœ¨æ±‚å€¼å™¨çš„å®ç°é‡Œ,ç¨‹åºå‘˜ä¸éœ€è¦å…³å¿ƒ,ä¸éœ€è¦åšä»»ä½•ä¸ä¹‹ç›¸å…³çš„äº‹æƒ…ï¼Œè¿™ä¸€ä¿®æ”¹çš„æ„ä¹‰æ·±è¿œ,è¯­è¨€æ‰©å……äº†,è¯­ä¹‰æœ‰é‡è¦æ”¹å˜ã€‚</p>
<h3 id="éç¡®å®šæ€§è®¡ç®—ä¸æµå¤„ç†"><a href="#éç¡®å®šæ€§è®¡ç®—ä¸æµå¤„ç†" class="headerlink" title="éç¡®å®šæ€§è®¡ç®—ä¸æµå¤„ç†"></a>éç¡®å®šæ€§è®¡ç®—ä¸æµå¤„ç†</h3><p>éç¡®å®šæ€§æ±‚å€¼å’Œæµå¤„ç†æœ‰ç›¸ä¼¼çš„åœ°æ–¹ï¼Œç°åœ¨æ¯”è¾ƒä¸€ä¸‹éç¡®å®šæ€§æ±‚å€¼å’Œæµå¤„ç†ä¸­æ—¶é—´çš„è¡¨ç°å½¢å¼ï¼š</p>
<ul>
<li><p>æµå¤„ç†ä¸­,é€šè¿‡æƒ°æ€§æ±‚å€¼,æ¾è§£æ½œåœ¨çš„(æœ‰å¯èƒ½æ˜¯æ— ç©·çš„)æµå’Œæµå…ƒç´  çš„å®é™…äº§ç”Ÿæ—¶é—´ä¹‹é—´çš„ç´§å¯†è”ç³»</p>
<ul>
<li>é€ æˆçš„å‡è±¡æ˜¯æ•´ä¸ªæµä¼¼ä¹éƒ½å­˜åœ¨</li>
<li>å…ƒç´ çš„äº§ç”Ÿå¹¶æ²¡æœ‰ä¸¥æ ¼çš„æ—¶é—´é¡ºåº</li>
</ul>
</li>
<li><p>éç¡®å®šæ€§è®¡ç®—çš„è¡¨è¾¾å¼è¡¨ç¤ºå¯¹ä¸€æ‰¹â€œå¯èƒ½ä¸–ç•Œâ€çš„æ¢ç´¢</p>
<ul>
<li>æ¯ä¸ªä¸–ç•Œç”±ä¸€ä¸²é€‰æ‹©ç¡®å®š</li>
<li>æ±‚å€¼å™¨é€ æˆçš„å‡ç›¸ï¼šæ—¶é—´å¥½åƒèƒ½åˆ†å‰</li>
<li>æ±‚å€¼å™¨ä¿å­˜ç€æ‰€æœ‰å¯èƒ½çš„æ‰§è¡Œå†å²</li>
<li>è®¡ç®—é‡åˆ°æ­»è·¯æ—¶é€€å›å‰é¢é€‰æ‹©ç‚¹è½¬åˆ°å¦ä¸€åˆ†æ”¯,æ¢ä¸€ä¸ªæ¢ç´¢ç©ºé—´</li>
</ul>
</li>
</ul>
<h3 id="continuation-ç»§ç»­"><a href="#continuation-ç»§ç»­" class="headerlink" title="continuation ç»§ç»­"></a>continuation ç»§ç»­</h3><p>â€œç»§ç»­â€æ˜¯ä¸€ç§è¿‡ç¨‹å‚æ•°ï¼Œå®ƒæ€»æ˜¯åœ¨è¿‡ç¨‹çš„æœ€åä¸€æ­¥è°ƒç”¨ã€‚å¸¦æœ‰â€œç»§ç»­â€å‚æ•°çš„è¿‡ç¨‹ä¸å‡†å¤‡è¿”å›ï¼Œè¿‡ç¨‹çš„æœ€åä¸€æ­¥æ˜¯è°ƒç”¨æŸä¸ªâ€œç»§ç»­â€è¿‡ç¨‹ã€‚â€œç»§ç»­â€æ˜¯â€œå°¾è°ƒç”¨â€,è°ƒç”¨è¿‡ç¨‹çš„ä»£ç å·²ç»å…¨éƒ¨æ‰§è¡Œå®Œæ¯•ã€‚</p>
<p>amb åˆ†æå™¨äº§ç”Ÿçš„æ‰§è¡Œè¿‡ç¨‹è¦æ±‚ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li>ä¸€ä¸ªç¯å¢ƒ</li>
<li>ä¸€ä¸ªæˆåŠŸç»§ç»­</li>
<li>ä¸€ä¸ªå¤±è´¥ç»§ç»­</li>
</ul>
<p>æ‰§è¡Œè¿‡ç¨‹çš„ä½“æ±‚å€¼ç»“æŸå‰çš„æœ€åä¸€æ­¥æ€»æ˜¯è°ƒç”¨è¿™ä¸¤ä¸ªè¿‡ç¨‹ä¹‹ä¸€</p>
<ul>
<li>å¦‚æœæ±‚å€¼å·¥ä½œæ­£å¸¸å®Œæˆå¹¶å¾—åˆ°ç»“æœ,å°±è°ƒç”¨ç”±â€œæˆåŠŸç»§ç»­â€å‚æ•° å¾—åˆ°çš„é‚£ä¸ªè¿‡ç¨‹</li>
<li>å¦‚æœæ±‚å€¼è¿›å…¥æ­»èƒ¡åŒ,å°±è°ƒç”¨â€œå¤±è´¥ç»§ç»­â€å‚æ•°è¿‡ç¨‹</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(lambda (env succeed fail)</div><div class="line">  ;; succeed is a (lambda (value fail) ...)</div><div class="line">  ;; fail is a (lambda () ...)</div><div class="line">...)</div></pre></td></tr></table></figure>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯è¦æ¢å¤ç ´åæ€§æ“ä½œ(å¦‚èµ‹å€¼ç­‰),å¿…é¡»è®¾æ³•ä¿å­˜æ¢å¤ä¿¡æ¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">(define (analyze-assignment exp)</div><div class="line">  (let ((var (assignment-variable exp))</div><div class="line">        (vproc (analyze (assignment-value exp))))</div><div class="line">    (lambda (env succeed fail)</div><div class="line">      (vproc env</div><div class="line">             (lambda (val fail2)</div><div class="line">               (let ((old-value (lookup-variable var env)))</div><div class="line">                 (set-variable-value! var val env)</div><div class="line">                 (succeed &apos;ok</div><div class="line">                          (lambda ()</div><div class="line">                            (set-variable-value! var</div><div class="line">                                                 old-value</div><div class="line">                                                 env)</div><div class="line">                            (fail2)))))</div><div class="line">             fail))))</div></pre></td></tr></table></figure></p>
<p>amb æ±‚å€¼å™¨çš„å®Œæ•´ä»£ç å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/04/lib/main-amb.scm" target="_blank" rel="external">main-amb.scm</a>ã€‚</p>
<h2 id="é€»è¾‘ç¨‹åºè®¾è®¡"><a href="#é€»è¾‘ç¨‹åºè®¾è®¡" class="headerlink" title="é€»è¾‘ç¨‹åºè®¾è®¡"></a>é€»è¾‘ç¨‹åºè®¾è®¡</h2><p>æœ¬ä¹¦ä¸€å¼€å§‹å°±å¼ºè°ƒäº†ï¼š</p>
<blockquote>
<p>æ•°å­¦å¤„ç†è¯´æ˜å¼çŸ¥è¯†ï¼›è®¡ç®—æœºç§‘å­¦å¤„ç†å‘½ä»¤å¼çŸ¥è¯†</p>
</blockquote>
<p>ç¨‹åºè¯­è¨€è¦æ±‚ç”¨ç®—æ³•çš„æ–¹å¼æè¿°è§£å†³é—®é¢˜çš„è¿‡ç¨‹ï¼Œå¤§å¤šæ•°ç¨‹åºè¯­è¨€è¦æ±‚ç”¨å®šä¹‰æ•°å­¦å‡½æ•°çš„æ–¹å¼ç»„ç»‡ç¨‹åºï¼š</p>
<ul>
<li>ç¨‹åºè¦æè¿°â€œæ€ä¹ˆåšâ€çš„è¿‡ç¨‹</li>
<li>æ‰€æè¿°çš„è®¡ç®—æœ‰æ˜ç¡®æ–¹å‘,ä»è¾“å…¥åˆ°è¾“å‡º</li>
<li>æè¿°ç»è®¡ç®—çš„è¡¨è¾¾å¼,ç»™å‡ºäº†ä»ä¸€äº›å€¼ç®—å‡ºç»“æœçš„æ–¹æ³•(å’Œè¿‡ç¨‹)  </li>
<li>å®šä¹‰è¿‡ç¨‹æè¿°å¦‚ä½•ä»å‚æ•°è®¡ç®—å‡ºç»“æœ</li>
</ul>
<p>ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œç¬¬ä¸‰ç« ä»‹ç»çš„çº¦æŸä¼ é€’ç³»ç»Ÿä¸­çš„è®¡ç®—å¯¹è±¡æ˜¯çº¦æŸå…³ç³»,æ²¡æœ‰æ˜ç¡®è®¡ç®—æ–¹å‘å’Œé¡ºåºï¼Œå®ƒçš„åŸºç¡€ç³»ç»Ÿè¦åšå¾ˆå¤šå·¥ä½œä»¥æ”¯æŒç›¸åº”çš„è®¡ç®—ã€‚4.3å°èŠ‚çš„éç¡®å®šæ€§ç¨‹åºæ±‚å€¼å™¨é‡Œçš„è¡¨è¾¾å¼å¯æœ‰å¤šä¸ªå€¼,æ±‚å€¼å™¨è®¾æ³•æ ¹æ®è¡¨è¾¾å¼æè¿°çš„å…³ç³»æ‰¾å‡ºæ»¡è¶³è¦æ±‚çš„å€¼ã€‚</p>
<p>é€»è¾‘ç¨‹åºè®¾è®¡å¯çœ‹ä½œä¸Šé¢æƒ³æ³•çš„æ¨å¹¿ï¼Œä¸€ä¸ªâ€œæ˜¯ä»€ä¹ˆâ€çš„æè¿°å¯èƒ½è•´æ¶µè®¸å¤šâ€œæ€æ ·åšâ€çš„è¿‡ç¨‹ã€‚è€ƒè™‘ append:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(define (append x y)</div><div class="line">  (if (null? x)</div><div class="line">    y</div><div class="line">    (cons (car x) (append (cdr x) y))))</div></pre></td></tr></table></figure></p>
<p>å¯è®¤ä¸º,è¿™ä¸ªç¨‹åºè¡¨è¾¾äº†ä¸¤æ¡è§„åˆ™:</p>
<ol>
<li>å¯¹ä»»ä½•ä¸€ä¸ªè¡¨ <code>y</code>ï¼Œç©ºè¡¨ä¸å…¶æ‹¼æ¥å¾—åˆ°çš„è¡¨æ˜¯ <code>y</code> æœ¬èº«</li>
<li>ä»»ä½•è¡¨ <code>u</code>, <code>v</code>, <code>y</code>, <code>z</code>ï¼Œ<code>(cons u v)</code> ä¸ <code>y</code> æ‹¼æ¥å¾—åˆ° <code>(cons u z)</code> çš„æ¡ä»¶æ˜¯ ï¿¼<code>v</code>ä¸<code>y</code>çš„æ‹¼æ¥å¾—åˆ°<code>z</code></li>
</ol>
<p>append çš„è¿‡ç¨‹å®šä¹‰å’Œä¸Šè¿°ä¸¤æ¡è§„åˆ™éƒ½å¯ä»¥å›ç­”ä¸‹é¢é—®é¢˜:</p>
<ul>
<li>æ‰¾å‡º<code>(a b)</code>å’Œ<code>(c d)</code>çš„append</li>
</ul>
<p> è¿™ä¸¤æ¡è§„åˆ™è¿˜å¯ä»¥å›ç­”(ä½† append è¿‡ç¨‹ä¸è¡Œ):</p>
<ul>
<li>æ‰¾å‡ºä¸€ä¸ªè¡¨<code>y</code>ä½¿<code>(a b)</code>ä¸å®ƒçš„æ‹¼æ¥å¾—åˆ°<code>(a b c d)</code></li>
<li>æ‰¾å‡ºæ‰€æœ‰æ‹¼æ¥èµ·æ¥å°†å¾—åˆ°<code>(a b c d)</code>çš„è¡¨<code>x</code>å’Œ<code>y</code></li>
</ul>
<p>åœ¨é€»è¾‘å¼ç¨‹åºè¯­è¨€é‡Œ,å¯ä»¥å†™å‡ºä¸ä¸Šé¢ä¸¤æ¡è§„åˆ™ç›´æ¥å¯¹åº”çš„è¡¨è¾¾å¼,æ±‚å€¼å™¨å¯ä»¥åŸºäºå®ƒå¾—åˆ°ä¸Šé¢å„é—®é¢˜çš„è§£ã€‚ä½†å„ç§é€»è¾‘è¯­è¨€(åŒ…æ‹¬æœ¬å°èŠ‚ä»‹ç»çš„)éƒ½æœ‰ç¼ºé™·,ç®€å•æä¾›â€œåšä»€ä¹ˆâ€ çŸ¥è¯† æœ‰æ—¶ä¼šä½¿æ±‚å€¼å™¨é™·å…¥æ— ç©·å¾ªç¯,æˆ–äº§ç”Ÿäº†ä¸æ˜¯ç”¨æˆ·å¸Œæœ›çš„è¡Œä¸ºï¼Œè¿™ä¸ªé¢†åŸŸæœ€æ–°çš„æ–¹å‘æ˜¯<a href="https://en.wikipedia.org/wiki/Constraint_programming" target="_blank" rel="external">constraint programming</a>ã€‚</p>
<h3 id="æŸ¥è¯¢ç³»ç»Ÿ"><a href="#æŸ¥è¯¢ç³»ç»Ÿ" class="headerlink" title="æŸ¥è¯¢ç³»ç»Ÿ"></a>æŸ¥è¯¢ç³»ç»Ÿ</h3><p>æœ¬ç³»ç»Ÿæ‰€ä½¿ç”¨çš„è¯­è¨€ä¸ºæŸ¥è¯¢è¯­è¨€ï¼Œè¯¥è¯­è¨€çš„ä¸‰è¦ç´ åˆ†åˆ«æ˜¯ï¼š</p>
<ul>
<li><p><code>åŸºæœ¬å…ƒç´ </code>ï¼Œç®€å•æŸ¥è¯¢</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">    (job ?persion (computer programmer))</div><div class="line">    ```    </div><div class="line"></div><div class="line">- `ç»„åˆæ‰‹æ®µ`ï¼Œå¤åˆæŸ¥è¯¢</div></pre></td></tr></table></figure>
<p>  (and</p>
<pre><code>(job ?persion (computer programmer))
(address ?persion ?where))
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">- `æŠ½è±¡æ‰‹æ®µ`ï¼Œè§„åˆ™</div></pre></td></tr></table></figure>
<p>  (rule âŸ¨conclusionâŸ© âŸ¨bodyâŸ©)</p>
<p>  (rule (lives-near ?persion-1 ?persion-2)</p>
<pre><code>(and (address ?persion-1 (?town . ?rest-1))
     (address ?persion-2 (?town . ?rest-2))
     (not (same ?persion-1 ?persion-2))))
</code></pre>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">å¯ä»¥è®¤ä¸ºä¸€æ¡è§„åˆ™è¡¨ç¤ºäº†å¾ˆå¤§(ç”šè‡³æ— ç©·å¤§)çš„ä¸€é›†æ–­è¨€,å…¶å…ƒç´ æ˜¯ ç”± `&lt;conclusion&gt;` æ±‚å‡ºçš„æ‰€æœ‰æ»¡è¶³ `&lt;body&gt;` çš„èµ‹å€¼ã€‚å¯¹ç®€å•æŸ¥è¯¢,å¦‚æœå…¶ä¸­å˜é‡çš„æŸä¸ªèµ‹å€¼æ»¡è¶³æŸæŸ¥è¯¢æ¨¡å¼,é‚£ä¹ˆç”¨è¿™ä¸ªèµ‹å€¼å®ä¾‹åŒ–æ¨¡å¼å¾—åˆ°çš„æ–­è¨€ä¸€å®šåœ¨æ•°æ®åº“é‡Œä½†æ»¡è¶³è§„åˆ™çš„æ–­è¨€ä¸ä¸€å®šå®é™…å­˜åœ¨åœ¨æ•°æ®åº“é‡Œ(æ¨å¯¼å‡ºçš„äº‹å®)ã€‚</div><div class="line"></div><div class="line">### å°†é€»è¾‘çœ‹ä½œç¨‹åº</div><div class="line"></div><div class="line">è§„åˆ™å¯çœ‹ä½œé€»è¾‘è•´æ¶µå¼:è‹¥å¯¹æ‰€æœ‰æ¨¡å¼å˜é‡çš„èµ‹å€¼èƒ½æ»¡è¶³ä¸€æ¡è§„åˆ™çš„ä½“, åˆ™å®ƒå°±æ»¡è¶³å…¶ç»“è®ºã€‚å¯è®¤ä¸ºæŸ¥è¯¢è¯­è¨€å°±æ˜¯åŸºäºè§„åˆ™åšé€»è¾‘æ¨ç†ã€‚è¿˜æ˜¯ç”¨ `append` ä¸ºä¾‹ï¼š</div></pre></td></tr></table></figure>
</li>
</ul>
<p>(rule (append-to-form () ?y ?y))<br>(rule (append-to-form (?u . ?v) ?y (?u . ?z))<br>  (append-to-form ?v ?y ?z))<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">æœ‰äº†ä¸Šé¢çš„è§„åˆ™ï¼Œå¯ä»¥åšè®¸å¤šæŸ¥è¯¢</div></pre></td></tr></table></figure></p>
<p>;;; Query input:<br>(append-to-form (a b) (c d) ?z)<br>;;; Query results:<br>(append-to-form (a b) (c d) (a b c d))</p>
<p>;;; Query input:<br>(append-to-form (a b) ?y (a b c d))<br>;;; Query results:<br>(append-to-form (a b) (c d) (a b c d))</p>
<p>;;; Query input:<br>(append-to-form ?x ?y (a b c d))<br>;;; Query results:<br>(append-to-form () (a b c d) (a b c d))<br>(append-to-form (a) (b c d) (a b c d))<br>(append-to-form (a b) (c d) (a b c d))<br>(append-to-form (a b c) (d) (a b c d))<br>(append-to-form (a b c d) () (a b c d))</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">è¿™äº›ä¾‹å­å±•ç¤ºäº†ä¸åŒæ–¹å‘çš„è®¡ç®—,æ­£æ˜¯å‰é¢æå‡ºå¸Œæœ›è§£å†³çš„é—®é¢˜ã€‚</div><div class="line"></div><div class="line">### æŸ¥è¯¢ç³»ç»ŸåŸç†</div><div class="line"></div><div class="line">æŸ¥è¯¢ç³»ç»Ÿçš„ç»„ç»‡å›´ç»•ç€ä¸¤ä¸ªæ ¸å¿ƒæ“ä½œï¼š</div><div class="line"></div><div class="line">- `æ¨¡å¼åŒ¹é…(pattern match)`ï¼Œæ“ä½œå®ç°ç®€å•æŸ¥è¯¢å’Œå¤åˆæŸ¥è¯¢</div><div class="line">- `åˆä¸€(unification)`ï¼Œæ˜¯æ¨¡å¼åŒ¹é…çš„æ¨å¹¿,ç”¨äºå®ç°è§„åˆ™</div><div class="line"></div><div class="line"></div><div class="line">### é€»è¾‘ç¨‹åºè®¾è®¡å’Œæ•°ç†é€»è¾‘</div><div class="line"></div><div class="line">æŸ¥è¯¢è¯­è¨€çš„ç»„åˆç¬¦å¯¹åº”äºå¸¸ç”¨é€»è¾‘è¿æ¥è¯ï¼ŒæŸ¥è¯¢æ“ä½œçœ‹èµ·æ¥ä¹Ÿå…·æœ‰é€»è¾‘ å¯é æ€§(ä¾‹å¦‚ï¼Œand æŸ¥è¯¢è¦ç»è¿‡ä¸¤ä¸ªå­æˆåˆ†å¤„ç†ç­‰)</div><div class="line">ä½†è¿™ç§å¯¹åº”å…³ç³»å¹¶ä¸ä¸¥æ ¼ï¼Œå› ä¸ºæŸ¥è¯¢è¯­è¨€çš„åŸºç¡€æ˜¯æ±‚å€¼å™¨ï¼Œå…¶ä¸­éšå«ç€æ§åˆ¶ç»“æ„å’Œæ§åˆ¶æµç¨‹ï¼Œæ˜¯é‡‡ç”¨è¿‡ç¨‹çš„æ–¹å¼è§£é‡Šé€»è¾‘è¯­å¥ã€‚</div><div class="line"></div><div class="line">è¿™ç§éšå«çš„æ§åˆ¶ç»“æ„æˆ‘ä»¬æœ‰å¯èƒ½åˆ©ç”¨ï¼Œä¾‹å¦‚,è¦æ‰¾ç¨‹åºå‘˜çš„ä¸Šå¸,ä¸‹é¢ä¸¤ç§å†™æ³•éƒ½è¡Œ:</div></pre></td></tr></table></figure>
<p>(and (job ?x (computer programmer))<br>     (supervisor ?x ?y))</p>
<p>(and (supervisor ?x ?y)<br>     (job ?x (computer programmer)))<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">å¦‚æœå…¬å¸é‡Œçš„æœ‰å…³ä¸Šå¸å…³ç³»çš„äº‹å®æ¯”æœ‰å…³ç¨‹åºå‘˜çš„äº‹å®æ›´å¤š,ç¬¬ä¸€ç§å†™æ³•çš„æŸ¥è¯¢æ•ˆç‡æ›´é«˜ã€‚</div><div class="line"></div><div class="line">é€»è¾‘ç¨‹åºè®¾è®¡çš„ç›®æ ‡æ˜¯å¼€å‘ä¸€ç§æŠ€æœ¯,æŠŠè®¡ç®—é—®é¢˜åˆ†ä¸ºâ€œè¦è®¡ç®—ä»€ä¹ˆâ€å’Œ â€œæ€æ ·è®¡ç®—â€ä¸¤ä¸ªç›¸äº’ç‹¬ç«‹çš„å­é—®é¢˜,æ–¹æ³•æ˜¯:</div><div class="line"></div><div class="line">- æ‰¾å‡ºé€»è¾‘è¯­è¨€çš„ä¸€ä¸ªå­é›†,å…¶</div><div class="line">    - åŠŸèƒ½è¶³å¤Ÿå¼º,è¶³ä»¥æè¿°äººä»¬æƒ³è€ƒè™‘çš„æŸç±»è®¡ç®—</div><div class="line">    - åˆä¸è¿‡åˆ†çš„å¼º,æœ‰å¯èƒ½ä¸ºå®ƒå®šä¹‰ä¸€ç§è¿‡ç¨‹å¼çš„è§£é‡Š</div><div class="line">- å®ç°ä¸€ä¸ªæ±‚å€¼å™¨(è§£é‡Šå™¨),æ‰§è¡Œå¯¹ç”¨è¿™ç§é€»è¾‘å­é›†å†™å‡ºçš„è§„åˆ™å’Œ æ–­è¨€çš„è§£é‡Š(å®ç°å…¶è¯­ä¹‰,å½¢å¼ä¸Šæ˜¯åšæ¨ç†)</div><div class="line"></div><div class="line">ä¸Šé¢æå‡ºçš„ä¸¤æ–¹é¢æ€§è´¨ä¿è¯äº†é€»è¾‘ç¨‹åºè®¾è®¡è¯­è¨€ç¨‹åºçš„æœ‰æ•ˆæ€§ã€‚</div><div class="line"></div><div class="line">æœ¬å°èŠ‚çš„æŸ¥è¯¢è¯­è¨€æ˜¯è¿™ç§æƒ³æ³•çš„ä¸€ä¸ªå…·ä½“å®æ–½:</div><div class="line"></div><div class="line">- æŸ¥è¯¢è¯­è¨€æ˜¯æ•°ç†é€»è¾‘çš„ä¸€ä¸ªå¯ä»¥è¿‡ç¨‹å¼è§£é‡Šçš„å­é›†</div><div class="line">- ä¸€ä¸ªæ–­è¨€æè¿°ä¸€ä¸ªç®€å•äº‹å®</div><div class="line">- ä¸€æ¡è§„åˆ™è¡¨ç¤ºä¸€ä¸ªè•´æ¶µ,èƒ½ä½¿è§„åˆ™ä½“æˆç«‹çš„æƒ…å†µéƒ½ä½¿ç»“è®ºæˆç«‹</div><div class="line">- è§„åˆ™æœ‰è‡ªç„¶çš„è¿‡ç¨‹å¼è§£é‡Š:è¦å¾—åˆ°å…¶ç»“è®º,åªéœ€ç¡®å®šå…¶ä½“æˆç«‹</div><div class="line"></div><div class="line">### not é—®é¢˜</div></pre></td></tr></table></figure></p>
<p>(and (supervisor ?x ?y)<br>     (not (job ?x (computer programmer))))</p>
<p>(and (not (job ?x (computer programmer)))<br>     (supervisor ?x ?y))<br>```<br>è¿™ä¸¤ä¸ªæŸ¥è¯¢ä¼šå¾—åˆ°ä¸åŒç»“æœ(ä¸é€»è¾‘é‡Œçš„æƒ…å†µä¸åŒ)ï¼š</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæŸ¥è¯¢æ‰¾å‡ºæ‰€æœ‰ä¸ <code>(supervisor ?x ?y)</code> åŒ¹é…çš„æ¡ç›®ï¼Œä»å¾—åˆ°çš„æ¡†æ¶ä¸­åˆ å» ?x æ»¡è¶³ <code>(job ?x (computer programmer))</code> çš„æ¡†æ¶</li>
<li>ç¬¬äºŒä¸ªæŸ¥è¯¢ä»åˆå§‹æ¡†æ¶æµ(åªåŒ…å«ä¸€ä¸ªç©ºæ¡†æ¶)å¼€å§‹æ£€æŸ¥èƒ½å¦æ‰©å±• å‡ºä¸ <code>(job ?x (computer programmer))</code> åŒ¹é…çš„æ¡†æ¶ã€‚æ˜¾ç„¶ç©ºæ¡†æ¶å¯æ‰©å±•ï¼Œnot åˆ é™¤æµä¸­çš„ç©ºæ¡†æ¶å¾—åˆ°ç©ºæµï¼ŒæŸ¥è¯¢æœ€åè¿”å›ç©ºæµ</li>
</ul>
<p>é€»è¾‘ç¨‹åºè¯­è¨€é‡Œçš„ not åæ˜ çš„æ˜¯ä¸€ç§â€œå°é—­ä¸–ç•Œå‡è¯´â€ï¼Œè®¤ä¸ºæ‰€æœ‰çŸ¥è¯†éƒ½åŒ…å«åœ¨æ•°æ®åº“é‡Œ,å‡¡æ˜¯æ²¡æœ‰çš„ä¸œè¥¿å…¶ not éƒ½æˆç«‹ã€‚è¿™æ˜¾ç„¶ä¸ç¬¦åˆå½¢å¼åŒ–çš„æ•°ç†é€»è¾‘,ä¹Ÿä¸ç¬¦åˆäººä»¬çš„ç›´è§‚æ¨ç†ã€‚</p>
<p>æŸ¥è¯¢è¯­è¨€çš„å®Œæ•´ä»£ç ï¼Œå¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/tree/master/exercises/04/lib/ql" target="_blank" rel="external">è¿™é‡Œ</a>.</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é¦–å…ˆæ­å–œæˆ‘â€œå®Œæˆâ€ç¬¬å››ç« ï¼Œç®—ç®—å¤§æ¦‚ç”¨äº†4ä¸ªæœˆï¼Œå¤ªå¤šä¸å®šå› ç´ äº†ï¼Œä¸è¿‡è¿˜å¥½è‡ªå·±æ‰¾åˆ°äº†å½“åˆçš„æ„Ÿè§‰ï¼ŒåšæŒäº†ä¸‹æ¥ã€‚</p>
<p>è¿™ä¸€ç« çš„å†…å®¹å¾ˆå¤šï¼Œæ¯•ç«Ÿæ˜¯è®¾è®¡ä¸€é—¨è¯­è¨€ï¼Œè€Œä¸”è¿˜ä»‹ç»äº†ä¸¤ç§å¤§å˜ç§ï¼ŒæŠŠä¹¦ä¸Šçš„ä»£ç è°ƒé€šå°±è¦èŠ±å¥½ä¹…ï¼Œä¸è¿‡ä¹Ÿç¡®å®å¼€äº†çœ¼ç•Œï¼Œé€šè¿‡æœ€åŸºæœ¬çš„evalã€apply å¾ªç¯æ‰©å±•å‡ºäº† amb éç¡®å®šæ€§æ±‚å€¼å™¨ä¸é€»è¾‘è¯­è¨€æ±‚å€¼å™¨ï¼Œå…¶å®è¿™ç« çš„éš¾åº¦å¹¶ä¸å¤§ï¼Œåªæ˜¯æ¶‰åŠçš„å†…å®¹å¹¿è€Œå·²ã€‚</p>
<p>é€šè¿‡çœ‹å®Œè¿™ç« ï¼Œå‘ç°äº†å¾ˆå¤šæœ¬è´¨æ€§çš„ä¸œè¥¿ï¼Œåƒ Node.js é‡Œé¢çš„ callbackã€Python é‡Œé¢çš„ generator ä¸éƒ½æ˜¯ continuation çš„ç³–è¡£å˜›ï¼ŒJIT ä¹Ÿä¸è¿‡å°”å°”ï¼Œè¿™ç« æ›´åå‘çš„æ˜¯å…ƒç¼–ç¨‹é¢†åŸŸï¼Œé€šè¿‡ <a href="https://en.wikipedia.org/wiki/Domain-specific_language" target="_blank" rel="external">DSL</a> æ¥å‡è½»ä¸šåŠ¡ä»£ç çš„é€»è¾‘ï¼Œæƒ³è±¡å¦‚æœè¯­è¨€æœ¬èº«å°±æ”¯æŒåˆ†å¸ƒå¼äº‹åŠ¡ï¼Œç¨‹åºå‘˜è¦å°‘å†™å¤šå°‘ä»£ç å‘¢ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬ä¹¦çš„å‰ä¸‰ç« åˆ†åˆ«è®¨è®ºäº†&lt;code&gt;æ•°æ®æŠ½è±¡&lt;/code&gt;ã€&lt;code&gt;è¿‡ç¨‹æŠ½è±¡&lt;/code&gt;ã€&lt;code&gt;æ¨¡å—åŒ–&lt;/code&gt;ä¸‰ç§ç¨‹åºè®¾è®¡çš„æŠ€æœ¯ï¼Œè¿™äº›éƒ½æ˜¯ç¼–ç¨‹çš„é—®é¢˜ï¼Œä¸€ç›´é‡‡ç”¨çš„æ˜¯ Scheme ä½œä¸ºç¼–ç¨‹è¯­è¨€ã€‚å¦‚æœé‡åˆ°çš„é—®é¢˜æ›´å¤æ‚ï¼Œæˆ–è€…éœ€è¦è§£å†³æŸé¢†åŸŸçš„å¤§é‡é—®é¢˜ï¼Œæœ‰å¯èƒ½å‘ç°ç°å®
    
    </summary>
    
      <category term="ç ”ä¹ ç»å…¸" scheme="http://liujiacai.net/categories/%E7%A0%94%E4%B9%A0%E7%BB%8F%E5%85%B8/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>python, ruby, javascript æµ…æ</title>
    <link href="http://liujiacai.net/blog/2016/03/26/python-ruby-javascript/"/>
    <id>http://liujiacai.net/blog/2016/03/26/python-ruby-javascript/</id>
    <published>2016-03-26T09:03:40.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸€ç›´åœ¨çœ‹çº¢å®çŸ³ï¼ˆrubyï¼‰è¯­è¨€ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œç®—æ˜¯å¯¹å…¶è®¾è®¡æœ‰ä¸€äº›äº†è§£ã€‚ä½œä¸ºä¸€åŠ¨æ€è¯­è¨€ï¼Œruby ç»å¸¸ä¼šæ‹¿æ¥ä¸ python å¯¹æ¯”ï¼Œç¡®å®è¿™ä¸¤é—¨è¯­è¨€åœ¨è¯­æ³•å±‚é¢ã€å®ç°å±‚é¢æœ‰å¾ˆå¤šå…±åŒçš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿåœ¨å¾ˆå¤šè®¾è®¡ç†å¿µä¸Šå­˜åœ¨é‡è¦å·®å¼‚ï¼Œé€šè¿‡å¯¹æ¯”è¿™äº›ç›¸åŒç‚¹ã€å¼‚åŒç‚¹ï¼Œæ›´åŠ æœ‰åŠ©äºç†è§£è¿™ä¸¤é—¨è¯­è¨€ã€‚åŒæ—¶ï¼ŒNode.jsã€React Native çš„å‡ºç°ï¼Œå°† javascript è¿™é—¨â€œå‰ç«¯â€è¯­è¨€æ¨å‘äº†å…¨æ ˆï¼ŒåŒæ ·ä½œä¸ºä¸€é—¨åŠ¨æ€è¯­è¨€ï¼Œjavascript ä¸ rubyã€python åœ¨å¾ˆå¤šæ¦‚å¿µä¸Šä¹Ÿå­˜åœ¨å¾ˆå¤šç›¸åŒç‚¹ã€å¼‚åŒç‚¹ã€‚</p>
<p>æœ¬ç¯‡æ–‡ç« ç€é‡ä»ç¼–ç¨‹è¯­è¨€è®¾è®¡çš„è§’åº¦è¿›è¡Œé˜è¿°ï¼Œå¸Œæœ›å¯¹ç¼–ç¨‹è¯­è¨€çˆ±å¥½è€…ç†è§£è¿™ä¸‰é—¨è¯­è¨€æœ‰æ‰€å¸®åŠ©ï¼Œåšåˆ°èä¼šè´¯é€šã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2kVcxcByN.eBjSZFgXXXmGXXa_!!581166664.png" alt=" js_python_ruby"><br></center>

<h2 id="è®¨è®ºèŒƒå›´"><a href="#è®¨è®ºèŒƒå›´" class="headerlink" title="è®¨è®ºèŒƒå›´"></a>è®¨è®ºèŒƒå›´</h2><p>Pythonã€Rubyã€Javascript(ECMAScript) å‡†ç¡®è¯´æ˜¯ä¸€ç§è¯­è¨€è§„èŒƒï¼Œè§„èŒƒå¯ä»¥æœ‰å¤šç§å®ç°ï¼Œè¿™ä½“ç°åœ¨ä¸åŒçš„è§£é‡Šå™¨ä¸Šã€‚</p>
<ul>
<li>Python çš„è§£é‡Šå™¨ä¸»è¦æœ‰ CPythonã€IronPythonã€Jythonã€PyPy</li>
<li>Ruby çš„è§£é‡Šå™¨ä¸»è¦æœ‰ Ruby MRI(CRuby)ã€JRubyã€MacRubyã€IronRuby</li>
<li>Javascript çš„è§£é‡Šå™¨ä¸»è¦æœ‰ Chakra, SpiderMonkey, V8</li>
</ul>
<p>æœ¬æ–‡ä¸»è¦è®¨è®ºçš„æ˜¯ CPythonã€CRubyï¼Œå®ƒä»¬æ˜¯å…¶è¯­è¨€ä½œè€…äº²è‡ªè®¾è®¡çš„ï¼Œä¹Ÿæ˜¯åº”ç”¨åœºæ™¯æœ€å¹¿çš„ã€‚<br>Javascript åœ¨è¯­è¨€è®¾è®¡ä¹‹åˆæ ¹æœ¬æ²¡è€ƒè™‘åˆ°å…¶åº”ç”¨èŒƒå›´ä¼šå¦‚æ­¤ä¹‹å¹¿ï¼Œæ‰€ä»¥ç›¸æ¯”å…¶ä»–è¯­è¨€ï¼Œå®ƒè¯­è¨€å†…ç½®çš„åŠŸèƒ½è¦å¼±å¾ˆå¤šï¼Œ<a href="http://es6-features.org/" target="_blank" rel="external">ES6</a> çš„å‡ºç°å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ¬æ–‡æ‰€æ¶‰åŠçš„ javascript è¿è¡Œåœ¨åŸºäº V8 å¼•æ“çš„ Node.js ä¸­ï¼Œä¸”å…·å¤‡ ES6 è¯­æ³•ã€‚</p>
<h2 id="è¯­è¨€å®šä¹‰"><a href="#è¯­è¨€å®šä¹‰" class="headerlink" title="è¯­è¨€å®šä¹‰"></a>è¯­è¨€å®šä¹‰</h2><p>é¦–å…ˆçœ‹ä¸€ä¸‹ wikipedia ä¸Šå¯¹è¿™ä¸‰é—¨è¯­è¨€çš„å®šä¹‰ï¼š</p>
<ul>
<li>Python is a widely used <code>high-level</code>, <code>general-purpose</code>, <code>interpreted</code>, <code>dynamic</code> programming language</li>
<li>Ruby is a <code>dynamic</code>, <code>reflective</code>, <code>object-oriented</code>, <code>general-purpose</code> programming language.</li>
<li>JavaScript is a <code>high-level</code>, <code>dynamic</code>, <code>untyped</code>, and <code>interpreted</code> programming language.</li>
</ul>
<p>å…¶å®ä¸Šé¢æ ‡çº¢çš„å…³é”®å­—å¯¹äºè¿™ä¸‰é—¨è¯­è¨€æ¥è¯´éƒ½é€‚ç”¨ï¼Œåªæ˜¯æ¯ä¸ªè¯­è¨€çš„å¼ºè°ƒç‚¹ä¸ä¸€æ ·è€Œå·²ã€‚</p>
<p>é€šå¸¸ä¼šç§°è¿™ä¸‰é—¨è¯­è¨€ä¸º<code>åŠ¨æ€è¯­è¨€</code>ï¼Œæ”¯æŒ<code>å‡½æ•°å¼</code>ã€<code>é¢å‘å¯¹è±¡</code>ä¸¤ç§ç¼–ç¨‹èŒƒå¼ï¼Œè¿™ä¸¤ç‚¹å…¶å®æ˜¯æœ€é‡è¦çš„ã€‚</p>
<h2 id="è®¾è®¡ç†å¿µ"><a href="#è®¾è®¡ç†å¿µ" class="headerlink" title="è®¾è®¡ç†å¿µ"></a>è®¾è®¡ç†å¿µ</h2><p><code>æ—¢è½»é‡åˆå¼ºå¤§</code>æ˜¯å¤§å¤šæ•°åŠ¨æ€è¯­è¨€ç›¸é€šçš„è®¾è®¡ç†å¿µï¼Œå…³äº javascript è®¾è®¡ç†å¿µæ›´å¤šçš„ä»‹ç»å¯ä»¥å‚è€ƒæˆ‘çš„<a href="http://liujiacai.net/blog/2015/02/01/javascript-oop/#è®¾è®¡ç†å¿µ">è¿™ç¯‡æ–‡ç« ä»‹ç»</a>ã€‚è‡³äº Python ä¸ Ruby è®¾è®¡ç†å¿µçš„åŒºåˆ«ï¼Œä¸€å¥è¯å³å¯æ¦‚æ‹¬ï¼š</p>
<ul>
<li>Python: ä¸€ä»¶äº‹æƒ…åªæœ‰ä¸€ç§æ–¹æ³•åš</li>
<li>Ruby: ä¸€ä»¶äº‹æƒ…æœ‰å¤šç§æ–¹æ³•åš</li>
</ul>
<p>æ¯”å¦‚ï¼ŒPython ä¸­ Tuple, Array, String æ²¡æœ‰ç›¸åº”è·å–å¤§å°çš„æ–¹æ³•ï¼Œè€Œæ˜¯æä¾›äº†ç»Ÿä¸€çš„<code>len</code>æ¥è§£å†³è¿™ä¸ªé—®é¢˜<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; len([1,2])</div><div class="line">2</div><div class="line">&gt;&gt;&gt; len(&quot;hello world&quot;)</div><div class="line">11</div><div class="line">&gt;&gt;&gt; len((1,2))</div><div class="line">2</div></pre></td></tr></table></figure></p>
<p>è‡³äº Ruby çš„<code>ä¸€ä»¶äº‹æƒ…æœ‰å¤šç§æ–¹æ³•åš</code>çš„ç†å¿µï¼Œåé¢æˆ‘åœ¨è®²è§£ lambda ä¸å­—ç¬¦ä¸²æ‹¼æ¥æ—¶å†ä»‹ç»ã€‚</p>
<h2 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h2><p>å¦‚æœä½ ä¹‹å‰æ²¡æ¥è§¦è¿‡ rubyã€python çš„è¯­æ³•ï¼Œæ¨èå…ˆå»äº†è§£ä¸‹ï¼š</p>
<ul>
<li>å®˜æ–¹æ–‡æ¡£ <a href="https://www.ruby-lang.org/en/documentation/quickstart/" target="_blank" rel="external">Ruby in Twenty Minutes</a></li>
<li><a href="http://www.techotopia.com/index.php/Ruby_Essentials" target="_blank" rel="external">Ruby Essentials</a>ï¼Œä¸¤ä¸ªå°æ—¶ç»å¯¹çœ‹å®Œäº†</li>
<li><a href="http://python-best-practice.liujiacai.net" target="_blank" rel="external">python æœ€ä½³å®è·µ</a>ï¼Œåº”è¯¥ç”¨ä¸äº†åŠä¸ªå°æ—¶</li>
</ul>
<p>javascript å®åœ¨æ˜¯å¤ªç®€å•äº†ï¼Œå°±ä¸ç”¨ç‰¹åˆ«çœ‹äº†ã€‚</p>
<p>ç»¼åˆæ¥è¯´ï¼Œpythonã€javascript è¿˜æ˜¯æ¯”è¾ƒä¸­è§„ä¸­çŸ©çš„ï¼Œå³ä½¿ ES6 é‡Œé¢åŠ äº†<a href="https://github.com/lukehoban/es6features" target="_blank" rel="external">å¾ˆå¤šèŠ±å“¨çš„è¯­æ³•ç³–è¡£</a>ï¼Œä½†æ˜¯ä¹Ÿæ¯”è¾ƒç›´è§‚ï¼Œä½†æ˜¯ ruby è¿™ä¸ªè¯­è¨€å°±æ¯”è¾ƒå˜æ€äº†ï¼Œå„ç§ç¬¦å·ï¼Œåƒ<code>class Son &lt; Father</code>è¡¨ç¤ºç±»çš„åŸºç¡€ï¼Œ<code>&quot;hello&quot; &lt;&lt; &quot; world&quot;</code>è¡¨ç¤ºå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œ<code>@var</code>è¡¨ç¤ºå¯¹è±¡çš„æˆå‘˜å˜é‡ï¼Œ<code>@@var</code>è¡¨ç¤ºç±»çš„æˆå‘˜å˜é‡ï¼Œ<code>$var</code>è¡¨ç¤ºå…¨å±€å˜é‡ã€‚</p>
<p>è€Œä¸”åœ¨ ruby ä¸­ï¼Œæ–¹æ³•è°ƒç”¨æ—¶çš„æ‹¬å·å¯æœ‰å¯æ— ï¼Œå³ä½¿æœ‰å‚æ•°ä¹Ÿå¯ä»¥çœç•¥ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; def add(a, b)</div><div class="line">&gt;     a + b</div><div class="line">&gt; end</div><div class="line">&gt;</div><div class="line">&gt; add 1, 2</div><div class="line">=&gt; 3</div></pre></td></tr></table></figure></p>
<p>å¦‚æœä½ å¯¹ Scheme ç†Ÿæ‚‰ï¼Œä¸Šé¢çš„ä»£ç è¿˜èƒ½åƒä¸‹é¢è¿™ä¹ˆå†™ï¼Œæ˜¯ä¸æ˜¯å¾ˆäº²åˆ‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&gt; (def add a, b</div><div class="line">&gt;     a + b</div><div class="line">&gt; end)</div><div class="line"></div><div class="line">&gt; (add 1, 2)</div><div class="line">=&gt; 3</div></pre></td></tr></table></figure></p>
<p>è¿™ä¹Ÿå°±æ˜¯å……åˆ†è¯´æ˜ï¼Œæ‹¬å·åœ¨ ruby ä¸­åªæ˜¯èµ·åˆ°äº†â€œåˆ†å‰²â€çš„ä½œç”¨ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆè¯­æ³•å«ä¹‰ã€‚</p>
<h3 id="é¢å‘å¯¹è±¡"><a href="#é¢å‘å¯¹è±¡" class="headerlink" title="é¢å‘å¯¹è±¡"></a>é¢å‘å¯¹è±¡</h3><p>é¢å‘å¯¹è±¡ä¸»è¦çš„æ ¸å¿ƒæ˜¯ç”¨<code>å¯¹è±¡</code>æ¥è¾¾åˆ°æ•°æ®å°è£…çš„ç›®çš„ã€‚</p>
<ul>
<li>javascript åŸºäºåŸå‹é“¾å®ç°é¢å‘å¯¹è±¡ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥å‚è€ƒ<a href="http://liujiacai.net/blog/2015/02/01/javascript-oop/">ã€Šjavascriptä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‹</a></li>
<li>pythonã€ruby åŸºäºç±»æ¥å®ç°é¢å‘å¯¹è±¡ï¼Œå’Œ java ç±»ä¼¼ï¼Œä½†æ˜¯æ›´çº¯ç²¹äº›ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">$ python</div><div class="line">&gt;&gt;&gt; def func(): return 1</div><div class="line">&gt;&gt;&gt; type(func)</div><div class="line">&lt;type &apos;function&apos;&gt;</div><div class="line">&gt;&gt;&gt; func2 = lambda x: x</div><div class="line">&gt;&gt;&gt; type(func2)</div><div class="line">&lt;type &apos;function&apos;&gt;</div><div class="line">&gt;&gt;&gt; type(1)</div><div class="line">&lt;type &apos;int&apos;&gt;</div><div class="line">&gt;&gt;&gt; dir(1)</div><div class="line">[&apos;__abs__&apos;, &apos;__add__&apos;, .....]</div><div class="line">#--------------------------------------------------#</div><div class="line">$ irb</div><div class="line">&gt; def add(a, b)</div><div class="line">&gt;    a + b</div><div class="line">&gt; end</div><div class="line">&gt; method(:add)</div><div class="line">=&gt; #&lt;Method: Object#add&gt;</div><div class="line"># ä¸Šé¢ ruby çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨äº† Symbol æ¥è¡¨ç¤º add æ–¹æ³•ï¼Œè¿™æ˜¯ç”±äº ruby ä¸­ç›´æ¥å†™ add è¡¨ç¤ºå‡½æ•°è°ƒç”¨</div><div class="line">&gt; 1.methods</div><div class="line">=&gt; [:%, :&amp;, :*, :+, :-, :/, .....]</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ pythonã€ruby ä¸­ï¼Œåƒ<code>1</code>è¿™æ ·çš„æ•°å­—å­—é¢é‡ä¹Ÿæ˜¯å¯¹è±¡ã€‚</p>
<h3 id="lambda-è¡¨è¾¾å¼"><a href="#lambda-è¡¨è¾¾å¼" class="headerlink" title="lambda è¡¨è¾¾å¼"></a>lambda è¡¨è¾¾å¼</h3><p>lambda è¡¨è¾¾å¼è¡¨ç¤ºçš„æ˜¯åŒ¿åå‡½æ•°ã€‚ç”±äºåœ¨è¿™ä¸‰é—¨è¯­è¨€ä¸­ï¼Œå‡½æ•°å‡æ˜¯ä¸€ç­‰æˆå‘˜ï¼Œæ‰€ä»¥å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œå‡½æ•°å¼ç¼–ç¨‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">$ node</div><div class="line">&gt; [1,2,3].map((x) =&gt; x + 1)</div><div class="line">[ 2, 3, 4 ]</div><div class="line">#--------------------------------------------------#</div><div class="line">$ python</div><div class="line">&gt;&gt;&gt; map(lambda x: x+1, [1,2,3])</div><div class="line">[2, 3, 4]</div><div class="line">#--------------------------------------------------#</div><div class="line">$ irb</div><div class="line">&gt; [1,2,3].map &amp;(lambda &#123;|x| x+1&#125;)</div><div class="line"> =&gt; [2, 3, 4]</div></pre></td></tr></table></figure></p>
<p>Python çš„ lambda è¡¨è¾¾å¼æ˜¯è¿™ä¸‰è€…ä¸­æœ€å¼±çš„ä¸€ä¸ªï¼Œåªèƒ½åŒ…å«ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œjavascript ä¸ ruby çš„åˆ™æ²¡æœ‰è¿™ç§é™åˆ¶ã€‚</p>
<p>ç»†å¿ƒçš„è¯»è€…ä¼šå‘ç°ä¸Šé¢ ruby ç‰ˆæœ¬çš„ lambda å‰æœ‰ä¸ª<code>&amp;</code>ï¼Œè¿™æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ArgumentError: wrong number of arguments (given 1, expected 0)</div></pre></td></tr></table></figure></p>
<p>è¿™æ˜¯å› ä¸ºåœ¨ ruby ä¸­ï¼Œæ–¹æ³•é™¤äº†æ¥å—å‚æ•°å¤–ï¼Œè¿˜å¯ä»¥æ¥å—ä¸€ä¸ªä»£ç å—(block)ï¼Œä»£ç å—åœ¨ ruby ä¸­æœ‰ä¸¤ç§å†™æ³•ï¼š</p>
<ul>
<li>ä¸€è¡Œçš„è¯ç”¨<code>{}</code></li>
<li>å¤šè¡Œçš„è¯ç”¨<code>do ... end</code>    <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&gt; [1,2,3].each &#123; |num| print &quot;#&#123;num&#125;! &quot; &#125;</div><div class="line">1! 2! 3!</div><div class="line">=&gt;[1,2,3]</div><div class="line">&gt; [1,2,3].each do |num|</div><div class="line">&gt;    print &quot;#&#123;num&#125;!&quot;</div><div class="line">&gt; end</div><div class="line">1! 2! 3!</div><div class="line"> =&gt;[1,2,3]         # Identical to the first case.</div></pre></td></tr></table></figure>
</li>
</ul>
<p><code>&amp;</code> çš„ä½œç”¨æ˜¯å‘Šè¯‰è§£é‡Šå™¨ï¼Œç°åœ¨ä¼ å…¥çš„ä¸æ˜¯æ­£å¸¸çš„å‚æ•°ï¼Œè€Œæ˜¯ä¸€ä¸ªä»£ç å—ã€‚è¿™ä¸ªä¼ å…¥çš„ä»£ç å—åœ¨æ–¹æ³•å†…é€šè¿‡<code>yield</code>è¿›è¡Œè°ƒç”¨ã€‚è¿™é‡Œå¯ä»¥åšä¸ªæ¼”ç¤ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">class Array</div><div class="line">  def my_each</div><div class="line">    i = 0</div><div class="line">    while i &lt; self.size</div><div class="line">        yield(self[i])  </div><div class="line">        i+=1      </div><div class="line">    end</div><div class="line">    self</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">&gt; [1,2,3].my_each &#123; |num| print &quot;#&#123;num&#125;!&quot; &#125;</div><div class="line">1! 2! 3!</div><div class="line">=&gt; [1,2,3]</div></pre></td></tr></table></figure></p>
<p>Ruby ä¸­ lambda è¡¨è¾¾å¼å±äº <a href="http://ruby-doc.org/core-2.2.0/Proc.html" target="_blank" rel="external">Proc ç±»å‹</a>ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt; lambda &#123;|x| x&#125;.class</div><div class="line">=&gt; Proc</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåªæ˜¯å¯¹äºé—­åŒ…çš„æ”¯æŒï¼ŒRuby å°±æä¾›äº†å¤šç§æ–¹æ¡ˆã€‚æ›´å¤šå¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="http://www.eriktrautman.com/posts/ruby-explained-blocks-procs-and-lambdas-aka-closures" target="_blank" rel="external">Ruby Explained: Blocks, Procs, and Lambdas, aka â€œClosuresâ€</a></li>
<li><a href="https://blog.newrelic.com/2015/04/30/weird-ruby-part-4-code-pods/" target="_blank" rel="external">Weird Ruby Part 4: Code Pods (Blocks, Procs, and Lambdas)</a></li>
</ul>
<h3 id="yield"><a href="#yield" class="headerlink" title="yield"></a>yield</h3><p>å°±åƒä¸Šé¢è¯´çš„ï¼Œruby ä¸­ <code>yield</code> å°±æ˜¯è¡¨ç¤ºä»£ç å—çš„è°ƒç”¨ï¼Œæ²¡æœ‰å…¶ä»–å«ä¹‰ã€‚è€Œåœ¨ python ä¸ javascript <code>yield</code> æ˜¯ç”¨æ¥æ„é€ <a href="https://wiki.python.org/moin/Generators" target="_blank" rel="external">ç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰</a>çš„ï¼Œéƒ½æ˜¯ç”¨æ¥æ§åˆ¶ç¨‹åºè¿è¡Œæµç¨‹ï¼Œç›¸å½“äºç”¨æˆ·æ€çš„â€œçº¿ç¨‹â€ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ python</div><div class="line">def iter():</div><div class="line">    for x in xrange(10):</div><div class="line">        yield x</div><div class="line"></div><div class="line">foo = iter()</div><div class="line">print next(foo)</div><div class="line">print next(foo)</div><div class="line">#--------------------------------------------------#</div><div class="line"></div><div class="line">$ node</div><div class="line">function* iter() &#123;</div><div class="line"> for (var i = 0; i &lt; 10; i++)</div><div class="line">    yield i</div><div class="line">&#125;</div><div class="line">var foo = iter()</div><div class="line">console.log(foo.next().value)</div><div class="line">console.log(foo.next().value)</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢ä¸¤ä»½ä»£ç éƒ½ä¾æ¬¡æ‰“å°å‡º<code>0</code>, <code>1</code>ã€‚</p>
<p>å…³äºç”Ÿæˆå™¨çš„æ›´å¤šèµ„æ–™ï¼Œå¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="https://strongloop.com/strongblog/how-to-generators-node-js-yield-use-cases/" target="_blank" rel="external">Generators in Node.js: Common Misconceptions and Three Good Use Cases</a></li>
<li><a href="http://www.dabeaz.com/coroutines/Coroutines.pdf" target="_blank" rel="external">More details on Python generators and coroutines</a>ï¼ˆå¼ºçƒˆæ¨è Python è¯»è€…çœ‹ï¼‰</li>
</ul>
<p>åœ¨ ruby ä¸­ï¼Œä¸ç”Ÿæˆå™¨å¯¹åº”çš„æ¦‚å¿µæ˜¯ <a href="http://ruby-doc.org/core-2.2.0/Fiber.html" target="_blank" rel="external">Fiber</a>ï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">iter = Fiber.new do</div><div class="line">  (0..10).each do |x|</div><div class="line">    Fiber.yield x</div><div class="line">  end</div><div class="line">end</div><div class="line"></div><div class="line">puts iter.resume</div><div class="line">puts iter.resume</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ä»£ç ä¹Ÿä¾æ¬¡æ‰“å°å‡º<code>0</code>, <code>1</code>ã€‚</p>
<p>å…³äºç”Ÿæˆå™¨ä¸ Fiber çš„å…³ç³»ï¼Œå¯ä»¥å‚è€ƒï¼š</p>
<ul>
<li><a href="https://nikolaygrozev.wordpress.com/2015/07/14/overview-of-modern-concurrency-and-parallelism-concepts/comment-page-1" target="_blank" rel="external">Overview of Modern Concurrency and Parallelism Concepts</a> ï¼ˆéœ€ç¿»å¢™ï¼Œå¼ºçƒˆæ¨èè¯»è€…çœ‹ï¼‰</li>
<li><a href="http://merbist.com/2011/02/22/concurrency-in-ruby-explained/" target="_blank" rel="external">http://merbist.com/2011/02/22/concurrency-in-ruby-explained/</a></li>
</ul>
<p>å…¶å®ï¼Œç”Ÿæˆå™¨ã€Fiber ä»¥åŠç›¸å…³æ¦‚å¿µèƒŒåçš„ç†è®ºåŸºç¡€æ˜¯ <a href="https://en.wikipedia.org/wiki/Continuation" target="_blank" rel="external">continuation</a>ï¼Œcontinuation çš„åº”ç”¨åœºæ™¯éå¸¸å¹¿æ³›ï¼Œå„ç§ç¼–ç¨‹è¯­è¨€ä¸­çš„<a href="https://en.wikipedia.org/wiki/Exception_handling" target="_blank" rel="external">å¼‚å¸¸å¤„ç†</a>ä¹Ÿæ˜¯åŸºäºå®ƒæ¥å®ç°çš„ã€‚é‰´äºè¿™ä¸ªè¯é¢˜æ¯”è¾ƒå¤§ï¼Œè¿™é‡Œä¸å†å±•å¼€å™è¿°ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥å‚è€ƒ<a href="http://matt.might.net/articles/programming-with-continuations--exceptions-backtracking-search-threads-generators-coroutines/" target="_blank" rel="external">è¿™ç¯‡æ–‡ç« </a>ï¼Œåé¢æˆ‘ä¹Ÿä¼šå•ç‹¬å†å†™ä¸€ç¯‡æ–‡ç« è¿›è¡Œä»‹ç»ã€‚<br>è¿™é‡Œä»…ä»…ç»™å‡º continuation çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ä»¥é£¨è¯»è€…ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">; Scheme è¯­è¨€ä¸­æ²¡æœ‰ return è¯­å¥ï¼Œåˆ©ç”¨ continuation å¯ä»¥æ¨¡æ‹Ÿ return</div><div class="line">(define (f return)</div><div class="line">  (return 2)</div><div class="line">  3)</div><div class="line"></div><div class="line">(display (f (lambda (x) x))) ; displays 3</div><div class="line">(display (call-with-current-continuation f)) ; displays 2</div></pre></td></tr></table></figure></p>
<p>å…³äºè¿™é‡Œä¾‹å­è¯¦ç»†çš„è§£é‡Šå¯ä»¥å‚è€ƒ<a href="https://en.wikipedia.org/wiki/Call-with-current-continuation#Examples" target="_blank" rel="external">WIKI Call-with-current-continuation</a>ã€‚</p>
<h3 id="å­—ç¬¦ä¸²"><a href="#å­—ç¬¦ä¸²" class="headerlink" title="å­—ç¬¦ä¸²"></a>å­—ç¬¦ä¸²</h3><h4 id="immutable-vs-mutable"><a href="#immutable-vs-mutable" class="headerlink" title="immutable vs mutable"></a>immutable vs mutable</h4><p><a href="/blog/2015/11/20/strings/">å­—ç¬¦ä¸²</a>ä½œä¸ºå¯¹å­—ç¬¦çš„ä¸€ç§æŠ½è±¡ï¼Œå®ç°æ—¶æœ‰ä¸¤ç§é€‰æ‹©ï¼šå¯å˜çš„ä¸ä¸å¯å˜çš„ã€‚è¿™ä¸¤ç§å®ç°çš„ä¼˜ç¼ºç‚¹å¦‚ä¸‹ï¼š</p>
<ul>
<li><p>å¯å˜çš„å­—ç¬¦ä¸²ï¼Œè¿™æ„å‘³ç€å¯¹å­—ç¬¦ä¸²è¿›è¡Œä¿®æ”¹ã€è¿½åŠ ç­‰æ“ä½œæ—¶å¯åœ¨åŸæœ‰å­—ç¬¦ä¸²åŸºç¡€ä¸Šç›´æ¥æ“ä½œï¼Œæ¯”è¾ƒèŠ‚çœç©ºé—´ã€‚ä½†æ˜¯å¯å˜çš„ç‰¹ç‚¹ä¼šå¯¼è‡´å¦‚ä¸‹å‡ ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li><p>ç›¸ç­‰æ€§ï¼ˆequalityï¼‰ã€‚å¦‚æœä¸€ä¸ªå¯¹è±¡æ˜¯å¯å˜çš„ï¼Œæˆ‘ä»¬åº”è¯¥å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯ç›¸ç­‰çš„å‘¢ï¼Ÿè¿™é‡Œè¿˜æœ‰ä¸ªå®¹æ˜“æ··æ·†çš„æ¦‚å¿µï¼šåŒä¸€æ€§ï¼ˆidentityï¼‰ï¼ŒåŒä¸€æ€§æ˜¯æŒ‡ä¸¤ä¸ªå˜é‡æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œç›¸ç­‰æ€§æŒ‡ä¸¤ä¸ªå˜é‡æŒ‡å‘ä¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ï¼Œä½†è¿™ä¸¤ä¸ªå¯¹è±¡çš„å€¼æ˜¯ä¸€æ ·çš„ã€‚<br>  <img src="https://img.alicdn.com/imgextra/i3/581166664/TB29NApmFXXXXbvXpXXXXXXXXXX_!!581166664.png" alt="string_identity_equal"></p>
</li>
<li><p>å¹¶å‘æ€§ï¼ˆconcurrenceï¼‰ã€‚åœ¨å¤šçº¿ç¨‹çš„ç¯å¢ƒä¸­ï¼Œéœ€è¦å¯¹å¯å˜å¯¹è±¡è¿›è¡Œå„ç§å¤æ‚çš„é”æœºåˆ¶æ¥ä¿éšœå…¶æ­£ç¡®æ€§ã€‚</p>
</li>
</ul>
</li>
<li><p>ä¸å¯å˜å­—ç¬¦ä¸²æ²¡æœ‰ä¸Šé¢çš„ä¸¤ä¸ªé—®é¢˜ï¼Œä½†æ˜¯ä¸å¯å˜å­—ç¬¦ä¸²åœ¨è¿›è¡Œä¿®æ”¹æ—¶ç”±äºä¼šæ–°ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥ä¼šæ¯”è¾ƒæ¶ˆè€—ç©ºé—´ï¼Œæ‰€ä»¥è¿™é‡‡ç”¨ä¸å¯å˜å­—ç¬¦ä¸²å®ç°çš„è¯­è¨€ä¸€èˆ¬éƒ½ä¼šæä¾›ä¸€ä¸ªå…·å¤‡ buffer çš„å­—ç¬¦ä¸²æ„é€ å¯¹è±¡æ¥ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œåƒ Java ä¸­çš„ <a href="https://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html" target="_blank" rel="external">StringBuffer</a>ï¼ŒPython ä¸­çš„ <a href="https://docs.python.org/2/library/stringio.html" target="_blank" rel="external">StringIO</a>ã€‚</p>
</li>
</ul>
<p>Ruby ä¸­å­—ç¬¦ä¸²æ˜¯<code>å¯å˜</code>çš„ï¼Œä½†æ˜¯ Ruby ä¸­æä¾›äº†ä¸å¯å˜å­—ç¬¦ä¸²çš„æ›¿ä»£å“ Symbolï¼Œè€Œä¸” Ruby 2.3 ä¹Ÿæä¾›äº†<code>--enable-frozen-string-literal</code> é€‰é¡¹ç”¨ä»¥å£°æ˜å­—ç¬¦ä¸²æ˜¯ä¸å¯å˜çš„ã€‚å…·ä½“å¯å‚è€ƒï¼š</p>
<ul>
<li><a href="https://wyeworks.com/blog/2015/12/1/-strings-in-ruby-2-dot-3" target="_blank" rel="external">https://wyeworks.com/blog/2015/12/1/-strings-in-ruby-2-dot-3</a></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">$ irb</div><div class="line">&gt; &quot;a&quot;.equal? &quot;a&quot;   # equals?--- identity comparison</div><div class="line"> =&gt; false</div><div class="line">&gt; &quot;a&quot;.eql? &quot;a&quot;     # eql?   --- hash equality</div><div class="line"> =&gt; true</div><div class="line">&gt; &quot;a&quot; == &quot;a&quot;       # ==     --- generic &quot;equality&quot;</div><div class="line"> =&gt; true</div><div class="line">&gt; str = &quot;hello&quot;</div><div class="line"> =&gt; &quot;hello&quot;</div><div class="line">&gt; str.__id__</div><div class="line"> =&gt; 70099860517540</div><div class="line">&gt; &quot;hello&quot;.__id__</div><div class="line"> =&gt; 70099856137920</div><div class="line">&gt; str &lt;&lt; &quot; world&quot;</div><div class="line"> =&gt; &quot;hello world&quot;</div><div class="line">&gt; str.__id__</div><div class="line"> =&gt; 70099860517540     # ä¸ä¹‹å‰çš„ id ä¸€æ ·ï¼Œè¯´æ˜ str æ‰€æŒ‡å‘çš„å¯¹è±¡æ²¡å˜</div><div class="line"></div><div class="line">&gt; str = &quot;hello&quot;</div><div class="line"> =&gt; &quot;hello&quot;</div><div class="line">&gt; str.__id__</div><div class="line"> =&gt; 70099860630880</div><div class="line">&gt; str += &quot; world&quot;</div><div class="line"> =&gt; &quot;hello world&quot;</div><div class="line">&gt; str.__id__</div><div class="line"> =&gt; 70099856250160    # ä¸ä¹‹å‰çš„ id ä¸ä¸€æ ·ï¼Œè¯´æ˜ += åœ¨è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥æ—¶ï¼Œä¼šç”Ÿæˆä¸€æ–°å¯¹è±¡</div></pre></td></tr></table></figure>
<p>Pythonã€Javascript ä¸­å­—ç¬¦ä¸²éƒ½æ˜¯<code>ä¸å¯å˜</code>çš„ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">$ python</div><div class="line">&gt;&gt;&gt; str = &quot;hello world&quot;</div><div class="line">&gt;&gt;&gt; str2 = str.replace(&quot;o&quot;, &quot;oo&quot;)</div><div class="line">&gt;&gt;&gt; str</div><div class="line">&apos;hello world&apos;</div><div class="line">&gt;&gt;&gt; str2</div><div class="line">&apos;helloo woorld&apos;</div><div class="line"></div><div class="line">$ node</div><div class="line">&gt; str = &quot;hello world&quot;</div><div class="line">&apos;hello world&apos;</div><div class="line">&gt; str2 = str.replace(&quot;o&quot;, &quot;oo&quot;)</div><div class="line">&apos;helloo world&apos;</div><div class="line">&gt; str</div><div class="line">&apos;hello world&apos;</div><div class="line">&gt; str2</div><div class="line">&apos;helloo world&apos;</div></pre></td></tr></table></figure>
<h4 id="æ‹¼æ¥"><a href="#æ‹¼æ¥" class="headerlink" title="æ‹¼æ¥"></a>æ‹¼æ¥</h4><p>å¤§å¤šæ•°è¯­è¨€éƒ½å¯ä»¥ç›´æ¥é€šè¿‡<code>+</code>è¿›è¡Œå­—ç¬¦ä¸²çš„æ‹¼æ¥ï¼Œä½†æ˜¯è¿™æ ·åšæ—¢ä¸ä¼˜é›…ï¼Œæ•ˆç‡ä¹Ÿä½ï¼Œæ‰€ä»¥ä¸€äº›è¯­è¨€ä¼šæœ‰äº›æ›¿ä»£æ–¹æ¡ˆã€‚<br>Ruby ä¸ Python ä¸­å¯¹è¿™å—çš„æ”¯æŒæ¯”è¾ƒå¼ºå¤§ï¼ŒES6 ä¸­å€Ÿé‰´äº†ä»¥ä¸Šä¸¤é—¨è¯­è¨€çš„è¯­æ³•ï¼Œå¼•å…¥äº† <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="external">template_string</a>ï¼Œè¿™åœ¨æå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†å­—ç¬¦ä¸²çš„æ‹¼æ¥ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">$ node</div><div class="line">&gt; var a = 5;</div><div class="line">&gt; var b = 10;</div><div class="line">&gt; console.log(`Fifteen is $&#123;a + b&#125; and\nnot $&#123;2 * a + b&#125;.`);</div><div class="line">// &quot;Fifteen is 15 and</div><div class="line">// not 20.&quot;</div><div class="line">#--------------------------------------------------#</div><div class="line">$ python</div><div class="line">&gt; long_string = &quot;&quot;&quot;</div><div class="line">&gt; my name is &#123;username&#125;,</div><div class="line">&gt; my age is &#123;age&#125;</div><div class="line">&gt; &quot;&quot;&quot;.format(username=&quot;zhangsan&quot;, age=10)</div><div class="line">#--------------------------------------------------#</div><div class="line">$ irb</div><div class="line">&gt; long_string = &quot;&quot;&quot;</div><div class="line">&gt; my name is %&#123;username&#125;,</div><div class="line">&gt; my age is %&#123;age&#125;</div><div class="line">&gt; &quot;&quot;&quot; % &#123;username: &quot;zhangsan&quot;, age:10&#125;</div></pre></td></tr></table></figure></p>
<p>å°±æ˜¯ä¸Šé¢ä¸å¯å˜å­—ç¬¦ä¸²ç¼ºç‚¹ä¸­è¯´çš„ï¼Œå¯¹å­—ç¬¦ä¸²è¿›è¡Œè¿½åŠ æ—¶æ•ˆç‡æ¯”è¾ƒä½ï¼Œé‚£ä¹ˆåœ¨ Python ä¸ Javascript ä¸­è¿›è¡Œå¤§é‡å­—ç¬¦ä¸²æ‹¼æ¥æ—¶è¯¥é‡‡ç”¨ä»€ä¹ˆæ–¹å¼å‘¢ï¼Ÿä¸‹é¢ç»™å‡ºæˆ‘çš„ä¸¤ç»„æµ‹è¯•ï¼š</p>
<h5 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">import time</div><div class="line">try:</div><div class="line">    from StringIO import StringIO</div><div class="line">except ImportError:</div><div class="line">    from io import StringIO  # StringIO is in package io in python 3</div><div class="line"></div><div class="line">try:</div><div class="line">    xrange</div><div class="line">except NameError:</div><div class="line">    xrange = range  # xrange is gone in python 3</div><div class="line"></div><div class="line"></div><div class="line">def method1(loop_count):</div><div class="line">    start = time.time()</div><div class="line">    out_str = &apos;&apos;</div><div class="line">    for num in xrange(loop_count):</div><div class="line">        out_str += repr(num)</div><div class="line"></div><div class="line">    print(&quot;+= : %f seconds&quot; % (time.time() - start))</div><div class="line">    return out_str</div><div class="line"></div><div class="line"></div><div class="line">def method2(loop_count):</div><div class="line">    start = time.time()</div><div class="line">    str_list = []</div><div class="line">    for num in xrange(loop_count):</div><div class="line">        str_list.append(repr(num))</div><div class="line">    out_str = &apos;&apos;.join(str_list)</div><div class="line">    print(&quot;list + join : %f seconds&quot; % (time.time() - start))</div><div class="line">    return out_str</div><div class="line"></div><div class="line"></div><div class="line">def method3(loop_count):</div><div class="line">    start = time.time()</div><div class="line">    out_str = &apos;&apos;.join([repr(num) for num in xrange(loop_count)])</div><div class="line">    print(&quot;list comprehension + join : %f seconds&quot; % (time.time() - start))</div><div class="line">    return out_str</div><div class="line"></div><div class="line">def method4(loop_count):</div><div class="line">    start = time.time()</div><div class="line">    file_str = StringIO()</div><div class="line">    for num in xrange(loop_count):</div><div class="line">        file_str.write(repr(num))</div><div class="line"></div><div class="line">    out_str = file_str.getvalue()</div><div class="line">    print(&quot;StringIO : %f seconds&quot; % (time.time() - start))</div><div class="line">    return out_str</div><div class="line"></div><div class="line">loop_count = 1000000</div><div class="line">method1(loop_count)</div><div class="line">method2(loop_count)</div><div class="line">method3(loop_count)</div><div class="line">method4(loop_count)</div></pre></td></tr></table></figure>
<p>ä¸‹é¢ç»™å‡ºç»Ÿè®¡ç»“æœ</p>
<table>
<thead>
<tr>
<th>pythonç‰ˆæœ¬</th>
<th>+=</th>
<th>list + join</th>
<th>list comprehension + join</th>
<th>stringIO</th>
</tr>
</thead>
<tbody>
<tr>
<td>2.7.6</td>
<td>0.181868</td>
<td>0.219901</td>
<td>0.194387</td>
<td>1.085162</td>
</tr>
<tr>
<td>3.5.0</td>
<td>0.330583</td>
<td>0.271803</td>
<td>0.229952</td>
<td>0.313573</td>
</tr>
</tbody>
</table>
<p>ä»ä¸Šé¢çš„æ¯”è¾ƒå¯ä»¥çœ‹å‡ºï¼Œ<code>list comprehension + join</code> çš„æ–¹å¼æ—¶æœ€å¿«ï¼Œè€Œä¸”å†™æ³•ä¹Ÿæ¯”è¾ƒä¼˜é›…çš„ã€‚</p>
<h5 id="Javascript"><a href="#Javascript" class="headerlink" title="Javascript"></a>Javascript</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">function method1(loop_count) &#123;</div><div class="line">    var out_str = &quot;&quot;;</div><div class="line">    var start = Date.now()</div><div class="line">    for (i=0;i&lt;loop_count;i++) &#123;</div><div class="line">        out_str += i;</div><div class="line">    &#125;</div><div class="line">    console.log(`+= cost : $&#123;Date.now() - start&#125; ms`);</div><div class="line">    return out_str;</div><div class="line">&#125;</div><div class="line">function method2(loop_count) &#123;</div><div class="line">    var arr = []</div><div class="line">    var start = Date.now()</div><div class="line">    for (i=0;i&lt;loop_count;i++) &#123;</div><div class="line">        arr.push(i);</div><div class="line">    &#125;</div><div class="line">    var out_str = arr.join(&quot;&quot;);</div><div class="line">    console.log(`arr + join cost : $&#123;Date.now() - start&#125; ms`);</div><div class="line">    return out_str;</div><div class="line">&#125;</div><div class="line">function method3(loop_count) &#123;</div><div class="line">    var out_str = &quot;&quot;;</div><div class="line">    var start = Date.now()</div><div class="line">    for (i=0;i&lt;loop_count;i++) &#123;</div><div class="line">        out_str.concat(i);</div><div class="line">    &#125;</div><div class="line">    console.log(`str.concat cost: $&#123;Date.now() - start&#125; ms`);</div><div class="line">    return out_str;</div><div class="line">&#125;</div><div class="line"></div><div class="line">var loop_count = 1000000;</div><div class="line">method1(loop_count)</div><div class="line">method2(loop_count)</div><div class="line">method3(loop_count)</div></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th></th>
<th>+=</th>
<th>arr + join</th>
<th>str.concat</th>
</tr>
</thead>
<tbody>
<tr>
<td>è€—æ—¶ï¼ˆå•ä½ï¼šmsï¼‰</td>
<td>199</td>
<td>230</td>
<td>126</td>
</tr>
</tbody>
</table>
<p>ä¸Šé¢çš„æµ‹è¯•ç»“æœä½¿ç”¨ Node v5.9.1 æµ‹è¯•å‡ºæ¥çš„ï¼Œä»ç»“æœæ¥çœ‹ï¼Œ<code>str.concat</code> æ˜¯é€Ÿåº¦æœ€å¿«çš„ã€‚</p>
<h3 id="æŸ¥çœ‹å€¼ç±»å‹"><a href="#æŸ¥çœ‹å€¼ç±»å‹" class="headerlink" title="æŸ¥çœ‹å€¼ç±»å‹"></a>æŸ¥çœ‹å€¼ç±»å‹</h3><p>åŠ¨æ€è¯­è¨€æœ€ä¸»è¦çš„ç‰¹ç‚¹å°±æ˜¯<code>å˜é‡æ— ç±»å‹</code>ï¼Œåˆ©ç”¨<a href="https://en.wikipedia.org/wiki/Reflection_%28computer_programming%29" target="_blank" rel="external">åå°„æœºåˆ¶</a>å¯ä»¥æŸ¥çœ‹<code>è¿è¡Œæ—¶å˜é‡çš„å€¼çš„ç±»å‹</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ node</div><div class="line">&gt; str = &quot;hello world&quot;</div><div class="line">&gt; typeof str     </div><div class="line">&apos;string&apos;</div><div class="line">#------------------------------#</div><div class="line">$ irb</div><div class="line">&gt; str = &quot;hello world&quot;</div><div class="line">&gt; str.class</div><div class="line">String</div><div class="line">#------------------------------#</div><div class="line">$ python</div><div class="line">&gt; str = &quot;hello world&quot;</div><div class="line">&gt; type(str)</div><div class="line">&lt;type &apos;str&apos;&gt;</div></pre></td></tr></table></figure></p>
<h2 id="åŒ…ç®¡ç†"><a href="#åŒ…ç®¡ç†" class="headerlink" title="åŒ…ç®¡ç†"></a>åŒ…ç®¡ç†</h2><ul>
<li>Pythonï¼Œ<a href="https://pypi.python.org/pypi" target="_blank" rel="external">PyPI</a>ï¼Œå¤šç‰ˆæœ¬å…¼å®¹æ¨èä½¿ç”¨ <a href="https://virtualenv.pypa.io" target="_blank" rel="external">virtualenv</a> ç®¡ç†</li>
<li>Rubyï¼Œ <a href="https://rubygems.org/" target="_blank" rel="external">GEMS</a>ï¼Œå¤šç‰ˆæœ¬å…¼å®¹ï¼Œæ¨èä½¿ç”¨ <a href="https://rvm.io/" target="_blank" rel="external">rvm</a> + <a href="http://bundler.io/" target="_blank" rel="external">bundler</a> ç®¡ç†</li>
<li>Node.jsï¼Œç”±äº Node.js å‡ºç°è¾ƒæ™šï¼Œå®ƒé¿å…äº†Pythonã€Ruby åŒ…å…¨å±€æ±¡æŸ“çš„é—®é¢˜ï¼Œè€Œæ˜¯é€‰æ‹©å°†ç¬¬ä¸‰ä»½æ¨¡å—å®‰è£…åœ¨é¡¹ç›®å†…çš„<code>node_modules</code>æ–‡ä»¶å¤¹å†…</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡ä¸Šé¢ç®€çŸ­çš„ä»‹ç»ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸‰é—¨è¯­è¨€æœ‰äº†å…¨é¢çš„ç†è§£ï¼Œå¤šäº†è§£ä¸€é—¨è¯­è¨€ï¼Œä¹Ÿå°±æ˜¯å¤šä¸ªè§£å†³é—®é¢˜çš„æ€è·¯ã€‚</p>
<p>ä¸ªäººæ„Ÿè§‰ï¼ŒPythonã€Javascript çš„è¯­æ³•æ¯”è¾ƒä¸­è§„ä¸­çŸ©ï¼Œé€‚åˆå¤§éƒ¨åˆ†ç¨‹åºå‘˜å­¦ä¹ ã€‚Ruby æ›´é€‚åˆ geek å»å­¦ï¼Œå› ä¸ºå®ƒçš„å¾ˆå¤šå¥‡ç‰¹è¯­æ³•ä¼šè®©ä½ æ€è€ƒè¯­è¨€çš„è®¾è®¡ç»†èŠ‚ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½¿ç”¨è¿™ä¹ˆç®€å•ã€‚</p>
<p>æœ€è¿‘æˆ‘åœ¨çœ‹<a href="https://book.douban.com/subject/7056800/" target="_blank" rel="external">Rubyå…ƒç¼–ç¨‹</a>ï¼Œé‡Œé¢çš„å¾ˆå¤šå†…å®¹å°±å¾ˆæœ‰æ„æ€ï¼Œä¸€äº›å†…å®¹åœ¨çœ‹ SICP æ—¶å°±å·²ç»é‡åˆ°ï¼Œè¿™ç§ä¼¼æ›¾ç›¸è¯†çš„æ„Ÿè§‰å¾ˆæ£’ï¼Œæˆ‘ç›¸ä¿¡å¯¹ç¼–ç¨‹è¯­è¨€çš„äº†è§£åˆåŠ æ·±äº†ä¸€æ­¥ã€‚è°¢è°¢ <a href="https://en.wikipedia.org/wiki/Yukihiro_Matsumoto" target="_blank" rel="external">Yukihiro Matsumoto</a>å¤§å”ï¼Œå¸¦ç»™æˆ‘ä»¬ ruby è¿™ä¹ˆç¾å¦™çš„è¯­è¨€ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://stackoverflow.com/questions/7299010/why-is-string-concatenation-faster-than-array-join" target="_blank" rel="external">http://stackoverflow.com/questions/7299010/why-is-string-concatenation-faster-than-array-join</a></li>
<li><a href="https://waymoot.org/home/python_string/" target="_blank" rel="external">https://waymoot.org/home/python_string/</a></li>
<li><a href="https://wyeworks.com/blog/2015/12/1/immutable-strings-in-ruby-2-dot-3" target="_blank" rel="external">https://wyeworks.com/blog/2015/12/1/immutable-strings-in-ruby-2-dot-3</a></li>
<li><a href="http://stackoverflow.com/questions/7156955/whats-the-difference-between-equal-eql-and" target="_blank" rel="external">http://stackoverflow.com/questions/7156955/whats-the-difference-between-equal-eql-and</a></li>
<li><a href="http://stackoverflow.com/questions/214714/mutable-vs-immutable-objects" target="_blank" rel="external">http://stackoverflow.com/questions/214714/mutable-vs-immutable-objects</a></li>
<li><a href="https://kentreis.wordpress.com/2007/02/08/identity-and-equality-in-ruby-and-smalltalk/" target="_blank" rel="external">https://kentreis.wordpress.com/2007/02/08/identity-and-equality-in-ruby-and-smalltalk/</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ä¸€ç›´åœ¨çœ‹çº¢å®çŸ³ï¼ˆrubyï¼‰è¯­è¨€ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œç®—æ˜¯å¯¹å…¶è®¾è®¡æœ‰ä¸€äº›äº†è§£ã€‚ä½œä¸ºä¸€åŠ¨æ€è¯­è¨€ï¼Œruby ç»å¸¸ä¼šæ‹¿æ¥ä¸ python å¯¹æ¯”ï¼Œç¡®å®è¿™ä¸¤é—¨è¯­è¨€åœ¨è¯­æ³•å±‚é¢ã€å®ç°å±‚é¢æœ‰å¾ˆå¤šå…±åŒçš„åœ°æ–¹ï¼Œä½†æ˜¯å®ƒä»¬ä¹Ÿåœ¨å¾ˆå¤šè®¾è®¡ç†å¿µä¸Šå­˜åœ¨é‡è¦å·®å¼‚ï¼Œé€šè¿‡å¯¹æ¯”è¿™äº›ç›¸åŒç‚¹ã€å¼‚åŒç‚¹ï¼Œæ›´åŠ æœ‰åŠ©äºç†è§£è¿™ä¸¤é—¨è¯­
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="JavaScript" scheme="http://liujiacai.net/tags/javascript/"/>
    
      <category term="Python" scheme="http://liujiacai.net/tags/python/"/>
    
      <category term="Ruby" scheme="http://liujiacai.net/tags/ruby/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•å®ç°ä¸€ä¸ªæ²¡æœ‰åå­—çš„é€’å½’å‡½æ•°</title>
    <link href="http://liujiacai.net/blog/2016/02/22/recursion-without-name/"/>
    <id>http://liujiacai.net/blog/2016/02/22/recursion-without-name/</id>
    <published>2016-02-22T13:31:11.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="https://en.wikipedia.org/wiki/Recursion_%28computer_science%29" target="_blank" rel="external">é€’å½’</a> ä½œä¸ºè®¡ç®—æœºç§‘å­¦ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œåº”ç”¨èŒƒå›´éå¸¸å¹¿æ³›ã€‚æ¯”è¾ƒé‡è¦çš„æ•°æ®ç»“æ„ï¼Œåƒæ ‘ã€å›¾ï¼Œæœ¬èº«å°±æ˜¯é€’å½’å®šä¹‰çš„ã€‚<br>æ¯”è¾ƒå¸¸è§çš„é€’å½’ç®—æ³•æœ‰<code>é˜¶ä¹˜</code>ã€<code>æ–æ³¢é‚£å¥‘æ•°</code>ç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯åœ¨å®šä¹‰å‡½æ•°çš„åŒæ—¶åˆå¼•ç”¨æœ¬èº«ï¼Œå¯¹äºåˆå­¦è€…æ¥è¯´ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼Œä½†æ˜¯å¦‚æœä½ å¯¹ç¼–ç¨‹è¯­è¨€ï¼Œç‰¹åˆ«æ˜¯å‡½æ•°å¼è¯­è¨€ï¼Œæœ‰æ‰€ç ”ç©¶ï¼Œå¯èƒ½å°±ä¼šæœ‰ä¸‹é¢çš„ç–‘é—®ï¼š</p>
<blockquote>
<p>ä¸€ä¸ªå‡½æ•°åœ¨è¿˜æ²¡æœ‰å®šä¹‰å®Œæ•´æ—¶ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥è°ƒç”¨çš„å‘¢ï¼Ÿ</p>
</blockquote>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯è§£ç­”ä¸Šé¢è¿™ä¸ªé—®é¢˜ã€‚é˜…è¯»ä¸‹é¢çš„å†…å®¹ï¼Œä½ éœ€è¦æœ‰äº›å‡½æ•°å¼ç¼–ç¨‹çš„ç»éªŒï¼Œä¸ºäº†ä¿è¯ä½ èƒ½å¤Ÿæ¯”è¾ƒæ„‰å¿«çš„é˜…è¯»æœ¬æ–‡ï¼Œä½ è‡³å°‘èƒ½çœ‹æ‡‚<code>å‰ç¼€è¡¨è¾¾å¼</code>ã€‚ç›¸ä¿¡è¯»å®Œæœ¬æ–‡åï¼Œä½ å°†ä¼šå¯¹ç¼–ç¨‹è¯­è¨€æœ‰ä¸€å…¨æ–°çš„è®¤è¯†ã€‚<br>æœ¬æ–‡æ‰€æœ‰æ¼”ç¤ºä»£ç æœ‰<code>Scheme</code>ã€<code>JS</code>ä¸¤ä¸ªç‰ˆæœ¬ã€‚</p>
<h2 id="é—®é¢˜æè¿°"><a href="#é—®é¢˜æè¿°" class="headerlink" title="é—®é¢˜æè¿°"></a>é—®é¢˜æè¿°</h2><p>ä¸‹é¢çš„è®²è§£ä»¥<code>é˜¶ä¹˜</code>ä¸ºä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define (FACT n)</div><div class="line">  (if (= n 0)</div><div class="line">    1</div><div class="line">    (* n (FACT (- n 1)))))</div><div class="line"></div><div class="line">; JS</div><div class="line">var FACT = function(n) &#123;</div><div class="line">    if (n == 0) &#123;</div><div class="line">        return 1;</div><div class="line">    &#125; else &#123;</div><div class="line">        return n * FACT(n-1);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„é˜¶ä¹˜ç®—æ³•æ¯”è¾ƒç›´è§‚ï¼Œè¿™é‡Œå°±ä¸å†è¿›è¡Œè§£é‡Šäº†ã€‚é‡ç”³ä¸‹æˆ‘ä»¬è¦æ¢ç©¶çš„é—®é¢˜</p>
<blockquote>
<p><code>FACT</code> è¿™ä¸ªå‡½æ•°ä¸ºä»€ä¹ˆåœ¨æ²¡æœ‰è¢«å®šä¹‰å®Œæ•´æ—¶ï¼Œå°±å¯ä»¥è°ƒç”¨äº†å‘¢ï¼Ÿ</p>
</blockquote>
<h2 id="é—®é¢˜åˆ†æ"><a href="#é—®é¢˜åˆ†æ" class="headerlink" title="é—®é¢˜åˆ†æ"></a>é—®é¢˜åˆ†æ</h2><p>è§£å†³ä¸€ä¸ªæ–°é—®é¢˜ï¼Œå¸¸è§çš„åšæ³•å°±æ˜¯ç±»æ¯”ä¹‹å‰è§£å†³çš„é—®é¢˜ã€‚æˆ‘ä»¬è¦è§£å†³çš„è¿™ä¸ªé—®é¢˜å’Œæ±‚è§£ä¸‹é¢çš„ç­‰å¼å¾ˆç±»ä¼¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">2x = x + 1</div></pre></td></tr></table></figure></p>
<p>åœ¨ç­‰å·ä¸¤è¾¹éƒ½å‡ºç°äº†<code>x</code>ï¼Œè¦æƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæœ€ç®€å•çš„æ–¹å¼å°±æ˜¯å°†ç­‰å·å³è¾¹çš„<code>x</code>ç§»åˆ°å·¦è¾¹å³å¯ã€‚è¿™æ ·å°±çŸ¥é“<code>x</code>æ˜¯ä»€ä¹ˆå€¼äº†ã€‚</p>
<p>ä½†æ˜¯æˆ‘ä»¬çš„é—®é¢˜æ¯”è¿™ä¸ªè¦å¤æ‚äº›äº†ï¼Œå› ä¸ºæˆ‘ä»¬è¿™é‡Œéœ€è¦ç”¨<code>if</code>ã€<code>n</code>ã€<code>*</code>ã€<code>-</code>è¿™å››ä¸ªç¬¦å·æ¥è¡¨ç¤º<code>FACT</code>ï¼Œå¯ä»¥è¿™ä¹ˆç±»æ¯”æ˜¯å› ä¸ºä¸€ä¸ªç¨‹åºæ— éå°±æ˜¯é€šè¿‡ä¸€äº›å…·æœ‰ç‰¹å®šè¯­æ„çš„ç¬¦å·ï¼ˆç¼–ç¨‹è¯­è¨€è§„å®šï¼‰æ„æˆçš„ã€‚</p>
<p>å†è¿›ä¸€æ­¥æ€è€ƒï¼Œ<code>FACT</code> éœ€è¦ç”¨å››ä¸ªç¬¦å·æ¥è¡¨ç¤ºï¼Œè¿™å’Œæˆ‘ä»¬æ±‚è§£å¤šå…ƒæ–¹ç¨‹ç»„çš„è§£ä¸æ˜¯å¾ˆåƒå˜›ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x + y = 3</div><div class="line">x - y = 1</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†æ±‚è§£ä¸Šé¢æ–¹ç¨‹ç»„ï¼Œä¸€èˆ¬å¯ä»¥è½¬ä¸ºä¸‹é¢çš„å½¢å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">x = 3 - y</div><div class="line">y = x - 1</div></pre></td></tr></table></figure></p>
<p>å³<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(x, y) = T (x, y)</div></pre></td></tr></table></figure></p>
<p>å…¶ä¸­çš„<code>T</code>ä¸ºä¸€ä¸ªè½¬æ¢ï¼Œåœ¨çº¿æ€§ä»£æ•°å…¶å®å°±æ˜¯ä¸ªçŸ©é˜µï¼Œæ ¹æ®çŸ©é˜µ<code>T</code>çš„ä¸€äº›æ€§è´¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ¤å®š<code>(x ,y)</code>æ˜¯å¦æœ‰è§£ï¼Œä»¥åŠè§£çš„ä¸ªæ•°ã€‚</p>
<p>å¯¹æ¯”æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠé—®é¢˜è½¬åŒ–ä¸ºä¸‹é¢çš„å½¢å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FACT = F (FACT)</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„<code>F</code>ä¸ºæŸç§è½¬æ¢ï¼Œåœ¨è¿™é‡Œå…¶å®å°±æ˜¯ä¸ªéœ€è¦ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°å¹¶ä¸”è¿”å›ä¸€ä¸ªå‡½æ•°çš„å‡½æ•°ã€‚å¦‚æœå­˜åœ¨è¿™ä¹ˆä¸ª<code>F</code>å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ±‚è§£<code>F</code>çš„<a href="https://zh.wikipedia.org/wiki/%E4%B8%8D%E5%8A%A8%E7%82%B9" target="_blank" rel="external">ä¸åŠ¨ç‚¹</a>æ¥æ±‚å‡º<code>FACT</code>äº†ã€‚</p>
<p>ä½†è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå³ä¾¿æˆ‘ä»¬çŸ¥é“äº†<code>F</code>çš„å­˜åœ¨ï¼Œæˆ‘ä»¬ä¹Ÿæ— æ³•ç¡®å®šå…¶æ˜¯å¦å­˜åœ¨ä¸åŠ¨ç‚¹ï¼Œä»¥åŠå¦‚æœå­˜åœ¨ï¼Œä¸åŠ¨ç‚¹çš„ä¸ªæ•°åˆæ˜¯å¤šå°‘ï¼Ÿ</p>
<p>è®¡ç®—æœºç§‘å­¦å¹¶ä¸åƒæ•°å­¦é¢†åŸŸæœ‰é‚£ä¹ˆå¤šå¯ä»¥å¥—ç”¨çš„å®šç†ã€‚</p>
<h2 id="å¯»æ‰¾è½¬æ¢å‡½æ•°-F"><a href="#å¯»æ‰¾è½¬æ¢å‡½æ•°-F" class="headerlink" title="å¯»æ‰¾è½¬æ¢å‡½æ•° F"></a>å¯»æ‰¾è½¬æ¢å‡½æ•° F</h2><p>è¯æ˜<code>F</code>æ˜¯å¦å­˜åœ¨æ˜¯ä¸ªæ¯”è¾ƒéš¾çš„é—®é¢˜ï¼Œä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ï¼Œè¿™æ¶‰åŠåˆ°<a href="https://en.wikipedia.org/wiki/Denotational_semantics" target="_blank" rel="external">Denotational semantics</a>é¢†åŸŸçš„çŸ¥è¯†ï¼Œæ„Ÿå…´è¶£çš„è¯»è€…å¯ä»¥è‡ªå·±å»ç½‘ä¸ŠæŸ¥æ‰¾ç›¸å…³èµ„æ–™ã€‚</p>
<p>è¿™é‡Œç›´æ¥ç»™å‡º<code>FACT</code>å¯¹åº”çš„å‡½æ•°<code>F</code>çš„å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define F</div><div class="line">  (lambda (g)</div><div class="line">    (lambda (n)</div><div class="line">      (if (= n 0)</div><div class="line">        1</div><div class="line">        (* n (g (- n 1)))))))</div><div class="line"></div><div class="line">; JS</div><div class="line">var F = function(g) &#123;</div><div class="line">    return function(n) &#123;</div><div class="line">        if (n == 0) &#123;</div><div class="line">            return 1;</div><div class="line">        &#125; else &#123;</div><div class="line">            return x * g(n-1);</div><div class="line">        &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œå¯¹æ¯”é€’å½’ç‰ˆæœ¬çš„<code>FACT</code>å˜åŠ¨ä¸å¤§ï¼Œå°±æ˜¯æŠŠå‡½æ•°å†…<code>FACT</code>çš„è°ƒç”¨æ¢æˆäº†å‚æ•°<code>g</code>è€Œå·²ï¼Œå…¶å®æˆ‘ä»¬å¸¸è§çš„é€’å½’ç®—æ³•éƒ½å¯ä»¥è¿™ä¹ˆåšã€‚</p>
<h2 id="å¯»æ‰¾è½¬æ¢å‡½æ•°-F-çš„ä¸åŠ¨ç‚¹"><a href="#å¯»æ‰¾è½¬æ¢å‡½æ•°-F-çš„ä¸åŠ¨ç‚¹" class="headerlink" title="å¯»æ‰¾è½¬æ¢å‡½æ•° F çš„ä¸åŠ¨ç‚¹"></a>å¯»æ‰¾è½¬æ¢å‡½æ•° F çš„ä¸åŠ¨ç‚¹</h2><p>æ‰¾åˆ°äº†è½¬æ¢å‡½æ•°<code>F</code>åï¼Œä¸‹ä¸€æ­¥å°±æ˜¯ç¡®å®šå…¶ä¸åŠ¨ç‚¹äº†ï¼Œè€Œè¿™ä¸ªä¸åŠ¨ç‚¹å°±æ˜¯æˆ‘ä»¬æœ€ç»ˆæƒ³è¦çš„<code>FACT</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FACT = (F (F (F ...... (F FACT) ...... )))</div></pre></td></tr></table></figure></p>
<p>å‡è®¾æˆ‘ä»¬å·²ç»çŸ¥é“äº†<code>FACT</code>éé€’å½’ç‰ˆæœ¬äº†ï¼Œè®°ä¸º<code>g</code>ï¼Œé‚£ä¹ˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">E0 = (F g)      è¿™æ—¶(E0 0) å¯¹åº” (FACT 0)å¾—å€¼ï¼Œè¿™æ—¶ç”¨ä¸åˆ° g</div><div class="line">E1 = (F E0)     è¿™æ—¶(E1 0)ã€(E1 1)åˆ†åˆ«å¯¹åº”(FACT 0)ã€(FACT 1)çš„å€¼</div><div class="line">E2 = (F E1)     è¿™æ—¶(E2 0)ã€(E2 1)ã€(E2 2)åˆ†åˆ«å¯¹åº”(FACT 0)ã€(FACT 1)ã€(FACT 2)çš„å€¼</div><div class="line">.....</div><div class="line">En = (F En-1)   è¿™æ—¶....(En n)åˆ†åˆ«å¯¹åº”.... (FACT n)çš„å€¼</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ±‚å‡º<code>(FACT n)</code>æ—¶å®Œå…¨æ²¡æœ‰ç”¨åˆ°åˆå§‹çš„<code>g</code>ï¼Œæ¢å¥è¯è¯´å°±æ˜¯<code>g</code>çš„å–å€¼ä¸å½±å“æˆ‘ä»¬è®¡ç®—<code>(FACT n)</code>ã€‚<br>é‚£ä¹ˆæˆ‘ä»¬å®Œå…¨å¯ä»¥è¿™ä¹ˆå®šä¹‰<code>FACT</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">FACT = (F (F (F ...... (F 1) ...... )))</div></pre></td></tr></table></figure></p>
<p>å¯æƒœï¼Œæˆ‘ä»¬ä¸èƒ½è¿™ä¹ˆå†™ï¼Œæˆ‘ä»¬å¿…é¡»æƒ³ä¸ªåŠæ³•è¡¨ç¤ºæ— ç©·ã€‚åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­ï¼Œæœ€ç®€å•çš„æ— ç©·å¾ªç¯æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">((lambda (x) (x x))</div><div class="line">  (lambda (x) (x x)))</div><div class="line"></div><div class="line">; JS</div><div class="line">(function (x) &#123;</div><div class="line">    return x(x);</div><div class="line">&#125;)(function(x) &#123;</div><div class="line">    return x(x);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>åŸºäºæ­¤ï¼Œæˆ‘ä»¬å°±å¾—åˆ°å‡½æ•°å¼ç¼–ç¨‹ä¸­ä¸€é‡è¦æ¦‚å¿µ <a href="https://zh.wikipedia.org/wiki/%E4%B8%8D%E5%8A%A8%E7%82%B9%E7%BB%84%E5%90%88%E5%AD%90" target="_blank" rel="external">Y ç®—å­</a>ï¼Œå…³äº Y ç®—å­çš„ä¸¥æ ¼æ¨å¯¼ï¼Œå¯ä»¥åœ¨å‚è€ƒè¿™ç¯‡æ–‡ç«  <a href="http://mvanier.livejournal.com/2897.html" target="_blank" rel="external">The Y combinator (Slight Return)</a>ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define Y</div><div class="line">  (lambda (f)</div><div class="line">    ((lambda (x) (f (x x))</div><div class="line">      (lambda (x) (f (x x)))))))</div><div class="line"></div><div class="line">(define FACT (Y F))</div><div class="line"></div><div class="line">; JS</div><div class="line">var Y = function(f) &#123;</div><div class="line">    return (function(x) &#123;</div><div class="line">        return f(x(x));</div><div class="line">    &#125;)(function(x) &#123;</div><div class="line">        return f(x(x));</div><div class="line">    &#125;);</div><div class="line">&#125;</div><div class="line">var FACT = Y(F);</div></pre></td></tr></table></figure>
<p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°çš„<code>FACT</code>äº†ï¼Œä½†è¿™é‡Œå¾—åˆ°çš„<code>FACT</code>å¹¶ä¸èƒ½åœ¨<code>Scheme</code>æˆ–<code>JS</code>è§£é‡Šå™¨ä¸­è¿è¡Œï¼Œå› ä¸ºå°±åƒä¸Šé¢è¯´çš„ï¼Œè¿™å…¶å®æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œå¦‚æœä½ æŠŠä¸Šé¢ä»£ç æ‹·è´åˆ°è§£é‡Šå™¨ä¸­è¿è¡Œï¼Œä¸€èˆ¬å¯ä»¥å¾—åˆ°ä¸‹é¢çš„é”™ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">RangeError: Maximum call stack size exceeded</div></pre></td></tr></table></figure></p>
<h2 id="æ­£åˆ™åº-vs-åº”ç”¨åº"><a href="#æ­£åˆ™åº-vs-åº”ç”¨åº" class="headerlink" title="æ­£åˆ™åº vs. åº”ç”¨åº"></a>æ­£åˆ™åº vs. åº”ç”¨åº</h2><p>ä¸ºäº†å¾—åˆ°èƒ½å¤Ÿåœ¨<code>Scheme</code>æˆ–<code>JS</code>è§£é‡Šå™¨ä¸­å¯ä»¥è¿è¡Œçš„ä»£ç ï¼Œè¿™é‡Œéœ€è¦è§£é‡Šå¤åˆå‡½æ•°åœ¨è°ƒç”¨æ—¶ä¼ å…¥å‚æ•°çš„ä¸¤ç§æ±‚å€¼ç­–ç•¥ï¼š</p>
<ul>
<li>æ­£åˆ™åºï¼ˆNormal Orderï¼‰ï¼Œå®Œå…¨å±•å¼€è€Œåå½’çº¦æ±‚å€¼ã€‚æƒ°æ€§æ±‚å€¼çš„è¯­è¨€é‡‡ç”¨è¿™ç§é¡ºåºã€‚</li>
<li>åº”ç”¨åºï¼ˆApplicative Orderï¼‰ï¼Œå…ˆå¯¹å‚æ•°æ±‚å€¼è€Œååº”ç”¨ã€‚æˆ‘ä»¬å¸¸ç”¨çš„å¤§éƒ¨åˆ†è¯­è¨€éƒ½é‡‡ç”¨åº”ç”¨åºã€‚</li>
</ul>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define (p)</div><div class="line">  (p))</div><div class="line"></div><div class="line">(define (test x y)</div><div class="line">  (if (= x 0)</div><div class="line">    0</div><div class="line">    y))</div><div class="line">(test 0 (p))</div><div class="line"></div><div class="line">; JS</div><div class="line">var p = function() &#123;</div><div class="line">    return (p);</div><div class="line">&#125;</div><div class="line">var test = function(x, y) &#123;</div><div class="line">    if(x == 0) &#123;</div><div class="line">        return 0;</div><div class="line">    &#125; else &#123;</div><div class="line">        return y;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">test(0, (p));</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­ï¼Œé‡‡ç”¨åº”ç”¨åºçš„è¯­è¨€ä¼šäº§ç”Ÿæ­»å¾ªç¯ï¼›è€Œé‡‡ç”¨æ­£åˆ™åºçš„è¯­è¨€å¯ä»¥æ­£å¸¸è¿”å›<code>0</code>ï¼Œå› ä¸º<code>test</code>çš„ç¬¬äºŒä¸ªå‚æ•°åªæœ‰åœ¨<code>x</code>ä¸ç­‰äº0æ—¶æ‰ä¼šå»æ±‚å€¼ã€‚</p>
<p>æˆ‘ä»¬ä¸Šé¢ç»™å‡ºçš„<code>var FACT = Y(F)</code>åœ¨æ­£åˆ™åºçš„è¯­è¨€ä¸­æ˜¯å¯è¡Œçš„ï¼Œå› ä¸º<code>Y(F)</code>ä¸­çš„è¿”å›å€¼åªæœ‰åœ¨çœŸæ­£éœ€è¦æ—¶æ‰è¿›è¡Œæ±‚å€¼ï¼Œè€Œåœ¨<code>F</code>ä¸­ï¼Œ<code>n</code>ç­‰äº0æ—¶æ˜¯ä¸éœ€è¦å¯¹<code>g(n-1)</code>è¿›è¡Œæ±‚å€¼çš„ï¼Œæ‰€ä»¥è¿™æ—¶<code>Y(F)(5)</code>å°±èƒ½å¤Ÿæ­£å¸¸è¿”å›<code>120</code>äº†ã€‚</p>
<blockquote>
<p>å¦‚æœä½ è§‰å¾—ä¸Šé¢è¿™æ®µè¯å¾ˆç»•ï¼Œä¸€æ—¶ä¸èƒ½ç†è§£ï¼Œè¿™æ ·å¾ˆæ­£å¸¸ï¼Œæˆ‘ä¹Ÿæ˜¯èŠ±äº†å¾ˆä¹…æ‰å¼„æ˜ç™½ï¼Œä½ å¯ä»¥å¤šæ‰¾äº›æƒ°æ€§æ±‚å€¼çš„æ–‡ç« çœ‹çœ‹ã€‚</p>
</blockquote>
<p>ä¸ºäº†èƒ½å¤Ÿå¾—å‡ºåœ¨åº”ç”¨åºè¯­è¨€å¯ç”¨çš„<code>FACT</code>ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ä¸Šé¢çš„<code>Y</code>åšè¿›ä¸€æ­¥å¤„ç†ã€‚æ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œä¸ºäº†ä¸ç«‹å³æ±‚å€¼è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶å¤–éƒ¨åŒ…ä¸€å±‚å‡½æ•°ï¼Œå‡è®¾è¿™é‡Œæœ‰ä¸ªè¡¨è¾¾å¼<code>p</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define lazy_p</div><div class="line">  (lambda () p))</div><div class="line"></div><div class="line">; JS</div><div class="line">var lazy_p = function() &#123; return p; &#125;</div></pre></td></tr></table></figure></p>
<p>è¿™æ—¶å¦‚æœæƒ³å¾—åˆ°<code>p</code>çš„å€¼ï¼Œå°±éœ€è¦<code>(lazy_p)</code>æ‰å¯ä»¥å¾—åˆ°äº†ã€‚åŸºäºè¿™ä¸ªåŸç†ï¼Œä¸‹é¢ç»™å‡ºæœ€ç»ˆç‰ˆæœ¬çš„<code>Y ç®—å­</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">; Scheme</div><div class="line">(define Y</div><div class="line">  (lambda (f)</div><div class="line">    ((lambda (x) (x x))</div><div class="line">     (lambda (x) (f (lambda (y) ((x x) y)))))))</div><div class="line"></div><div class="line">(define FACT (Y F))</div><div class="line">(FACT 5)   ;===&gt; 120</div><div class="line"></div><div class="line">; JS</div><div class="line"> var Y = function(f) &#123;</div><div class="line">     return function(x) &#123;</div><div class="line">         return x(x)</div><div class="line">     &#125;(function (x) &#123;</div><div class="line">         return f(function(y) &#123;</div><div class="line">             return x(x)(y)</div><div class="line">         &#125;)</div><div class="line">     &#125;)</div><div class="line"> &#125;</div><div class="line"> var FACT = Y(F)</div><div class="line"> FACT(5)   ;===&gt; 120</div></pre></td></tr></table></figure></p>
<p>å¥½äº†ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†å¯ä»¥åœ¨<code>Scheme</code>æˆ–<code>JS</code>è§£é‡Šå™¨ä¸­è¿è¡Œ<code>FACT</code>äº†ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œé¢æ²¡æœ‰ä½¿ç”¨å‡½æ•°åä¹Ÿå®ç°äº†é€’å½’æ–¹å¼æ±‚é˜¶ä¹˜ã€‚<br>æœ¬æ–‡ä¸€å¼€å§‹ç»™å‡ºçš„<code>FACT</code>ç‰ˆæœ¬åœ¨è§£é‡Šå™¨å†…éƒ¨ä¹Ÿä¼šè½¬æ¢ä¸ºè¿™ç§å½¢å¼ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†æœ¬æ–‡æ‰€æå‡ºçš„é—®é¢˜ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬æ–‡å¤§éƒ¨åˆ†å†…å®¹ç”± SICP 4.1 å°èŠ‚å»¶ä¼¸è€Œæ¥ï¼Œå†™çš„ç›¸å¯¹æ¯”è¾ƒç²—ç³™ï¼Œå¾ˆå¤šç‚¹éƒ½æ²¡æœ‰å±•å¼€è®²çš„åŸå› æ˜¯æˆ‘è‡ªå·±ä¹Ÿè¿˜æ²¡ç†è§£é€å½»ï¼Œä¸ºäº†ä¸è¯¯å¯¼å¤§å®¶ï¼Œæ‰€ä»¥è¿™é‡Œå°±çœç•¥äº†ï¼ˆåé¢ç†è§£çš„æ›´æ·±åˆ»åå†æ¥å¡«å‘ğŸ˜Šï¼‰ã€‚å¸Œæœ›æ„Ÿå…´è¶£çš„è¯»è€…èƒ½å¤Ÿè‡ªå·±å»æœç´¢ç›¸åº”çŸ¥è¯†ç‚¹ï¼Œç›¸ä¿¡è‚¯å®šä¼šå—ç›ŠåŒªæµ…ã€‚</p>
<p>æœ€åï¼Œå¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹å¤§å®¶ç†è§£ç¼–ç¨‹è¯­è¨€æœ‰ä¸€äº›å¸®åŠ©ã€‚æœ‰ä»€ä¹ˆä¸å¯¹çš„åœ°æ–¹è¯·ç•™è¨€æŒ‡å‡ºã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Recursion_%28computer_science%29&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é€’å½’&lt;/a&gt; ä½œä¸ºè®¡ç®—æœºç§‘å­¦ä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªæ¦‚å¿µï¼Œåº”ç”¨èŒƒå›´éå¸¸å¹¿æ³›ã€‚
    
    </summary>
    
      <category term="ç†è§£è®¡ç®—æœº" scheme="http://liujiacai.net/categories/aha-computer/"/>
    
    
      <category term="Lambda" scheme="http://liujiacai.net/tags/lambda/"/>
    
      <category term="Lisp" scheme="http://liujiacai.net/tags/lisp/"/>
    
  </entry>
  
  <entry>
    <title>2015 å¹´ç»ˆæ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2016/01/08/review-2015/"/>
    <id>http://liujiacai.net/blog/2016/01/08/review-2015/</id>
    <published>2016-01-08T15:27:21.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©ï¼Œå·²ç»æ˜¯ 2016 å¹´çš„ç¬¬å…«å¤©äº†ã€‚æ—¶é—´æ€»æ˜¯è¿™æ ·ï¼Œå½“æˆ‘ä»¬èº«å¤„å…¶ä¸­æ—¶è§‰å¾—å¾ˆæ¼«é•¿ï¼Œä½†æ˜¯è¿‡åçœ‹çœ‹ï¼Œä¹Ÿæ²¡è§‰å¾—ä»€ä¹ˆã€‚<br>2015 å¹´æ˜¯æ¯•ä¸šåæ­£å¼å·¥ä½œçš„ç¬¬ä¸€å¹´ï¼Œåœ°ç‚¹ä»ä¸Šæµ·è½¬åˆ°äº†æ­å·ï¼Œ<a href="/blog/2014/12/29/review-2014/">2014 å¹´ç»ˆæ€»ç»“</a>æ—¶åšçš„é‚£äº›è®¡åˆ’ï¼Œè²Œä¼¼ä¹Ÿæ²¡èƒ½å…¨éƒ¨å®ç°ã€‚<br>è¿™ç¯‡æ–‡ç« ä¸»è¦å›å¿† 2015 å¹´ä¸­é‚£äº›å°è±¡æ·±åˆ»çš„äº‹ä¸äººï¼ŒåŒæ—¶å±•æœ›ç¾å¥½çš„ 2016ã€‚</p>
<h2 id="å·¥ä½œ"><a href="#å·¥ä½œ" class="headerlink" title="å·¥ä½œ"></a>å·¥ä½œ</h2><h3 id="å†è§ï¼Œä¸Šæµ·"><a href="#å†è§ï¼Œä¸Šæµ·" class="headerlink" title="å†è§ï¼Œä¸Šæµ·"></a>å†è§ï¼Œä¸Šæµ·</h3><p>æ¯•ä¸šåæ‰¾åˆ°ç¬¬ä¸€ä»½å·¥ä½œæ˜¯åœ¨ä¸Šæµ·çš„ Ucloudï¼Œå¹²çš„ä¸æ˜¯å¾ˆå¼€å¿ƒï¼Œæ‰€ä»¥åœ¨15å¹´å¹´åˆè¶ç€è·³æ§½é«˜å³°æœŸï¼Œæˆ‘ä¹Ÿç¦»å¼€äº†ï¼Œæ¥åˆ°äº†ç°åœ¨çš„å…¬å¸â€”â€”æœ‰èµã€‚</p>
<p>ç°åœ¨è¿˜è®°å¾—å½“æ—¶æˆ‘æ˜¯æ€ä¹ˆå» Ucloud é¢è¯•çš„ï¼Œå½“æ—¶åŠå…¬åœ°ç‚¹è¿˜æ˜¯åœ¨äº”è§’åœºï¼Œæ˜¯ç§Ÿçš„åˆ›æ–°å·¥å‚çš„åŠå…¬åŒºï¼Œé‡Œé¢èšé›†äº†å¾ˆå¤šåˆ›ä¸šå…¬å¸ï¼Œè®°å¾—æ²¡äº‹çš„æ—¶å€™å°±å»æ¥¼æ¢¯é—´æ‰“æ‰“ä¹’ä¹“çƒï¼Œä¹Ÿæ˜¯æŒºå¼€å¿ƒçš„ã€‚æ¢äº†éš†æ˜Œè·¯æ–°çš„åŠå…¬å®¤åï¼Œå°±æ²¡è¿™ä¸ªæ¡ä»¶äº†ã€‚<br>åœ¨ä¸Šæµ·çš„ç”Ÿæ´»ä¹Ÿè¿˜å¯ä»¥ï¼Œå’Œä¸€ä¸ªå­¦è‹±è¯­çš„ç”·ç”Ÿåˆç§Ÿçš„ï¼Œå¹³æ—¶ä¹Ÿä¼šè‡ªå·±åšäº›é¥­ï¼Œæ‰€ä»¥è¿™æ®µæ—¶é—´ä½“é‡ä¹Ÿæ²¡ä¸‹æ¥è¿‡ã€‚<br>æˆ¿ä¸œäººæ˜¯å¯¹è€å¤«å¦»ï¼Œä¸ƒå…«åå²çš„æ ·å­ï¼Œäººå¾ˆå¥½ï¼Œæˆ‘ä»¬åˆšæ¬è¿›æ¥çš„æ—¶å€™ä»–ä»¬å°±å˜±å’æ¥¼ä¸Šæ¥¼ä¸‹çš„é‚»å±…ç…§é¡¾æˆ‘ä»¬ï¼Œä¹Ÿä¼šå’Œæˆ‘è¯´äº›å¹´è½»äººåº”è¯¥æ€ä¹ˆé—¯é—¯ä¹‹ç±»çš„è¯ï¼Œä¹Ÿæ˜¯æŒºæ„Ÿè°¢çš„ï¼Œå¸Œæœ›ä»–ä»¬èº«ä½“å¥åº·ã€‚</p>
<p>åœ¨ä¸Šæµ·è¿˜æœ‰ä¸€ä»¶å°è±¡æ·±åˆ»çš„æ˜¯ï¼Œåœ¨å…ƒæ—¦æˆ‘å’Œç†Šä¿Šå»å¤–æ»©ç©ï¼Œé‚£å¤©æˆ‘ä»¬å»çš„æ—©ï¼Œåæ¥äººè¶Šæ¥è¶Šå¤šï¼Œæˆ‘ä»¬å°±èµ°äº†ï¼Œç¬¬äºŒå¤©ä¸€çœ‹æ–°é—»ï¼Œè¯´å¤–æ»©å‘ç”Ÿäº†<a href="http://baike.baidu.com/link?url=dIgFFsxQmmTosB4q81HTUi2L3vI9dLBlTo3Yoz3V7QeykjMCPH7G3SsnjFcLulfOsHPTYRVjHEIIu8amz2DL9M4hLyoEAYryU7wNiAoP1d4_KINL2VYKQGnfU8ll7yPCz6N_RkyhPzsjgS6bxVqKoPcAms5rNMK0T-DXco17q7LiTvmbcZqq2qEehMqQph1E4YhT-DL6HdjbAhZ8ZcF4zl0VU0snJTtr2g0xW06-4YKfsFvu-KH1QifcD4qlIKkDezoZJxMrvQkj6HGUR3CG7ZlO9u2-jRLYxcg0R4eY-YS" target="_blank" rel="external">è¸©è¸äº‹ä»¶</a>ï¼Œä¸€èº«å†·æ±—ï¼Œç°åœ¨æƒ³æƒ³ä¹Ÿæ˜¯æŒºåæ€•çš„ã€‚æ­£å¥½æœ€è¿‘çœ‹åˆ°ä¸€ç¯‡<a href="http://www.17bdc.com/read/article/reviews/61444/?social_service=s" target="_blank" rel="external">è‹±æ–‡æ–‡ç« </a>ï¼Œå­¦åˆ°äº†ä¸€ä¸ªè¯ï¼Œstampedeï¼Œè¡¨ç¤ºâ€œ(äººç¾¤çš„)èœ‚æ‹¥ï¼Œææ…Œâ€ï¼Œçœ‹åˆ°ä¸€ä½ç½‘å‹è°ƒä¾ƒé“ï¼š</p>
<blockquote>
<p>å»å¹´çš„æ–°å¹´ç¬¬ä¸€å¤©ï¼Œä¸Šæµ· stampedeï¼›ä»Šå¹´çš„è‚¡å¸‚ç¬¬ä¸€å¤©ï¼Œä¸Šæµ·å†ä¸€æ¬¡ stampedeã€‚</p>
</blockquote>
<h3 id="åŠ å…¥æœ‰èµ"><a href="#åŠ å…¥æœ‰èµ" class="headerlink" title="åŠ å…¥æœ‰èµ"></a>åŠ å…¥æœ‰èµ</h3><p>ç¦»å¼€ Ucloud åï¼Œæ¥åˆ°äº†ç°åœ¨çš„å…¬å¸ï¼Œä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« <a href="/blog/2015/04/03/leave-ucloud-to-youzan/">æˆ‘æ¥æœ‰èµäº†</a> è®°å½•åˆåˆ°æœ‰èµçš„æ„Ÿå—ï¼Œå‡†ç¡®åº”è¯¥æ˜¯3æœˆåº•åŠ å…¥æœ‰èµçš„ï¼Œè¿˜è®°å¾—å½“æ—¶åœ¨ä¸Šæµ·è½¬ç§Ÿæˆ¿å­ï¼Œæ²¡æ‰¾åˆ°åˆé€‚çš„äººï¼Œæˆ‘å°±å’Œæˆ¿ä¸œè¯´äº†ä¸‹è‡ªå·±çš„æƒ…å†µï¼Œç„¶åä¸œè¥¿ä¸€æ‰“åŒ…ï¼Œå°±æ¥æ­å·äº†ã€‚æ¥æ­å·ä¹Ÿæ²¡æˆ¿å­ï¼Œä½åœ¨å…¬å¸é™„è¿‘çš„å¸ƒä¸é…’åº—ä¸€å‘¨å¤šï¼Œåæ¥ç»åŒäº‹ä»‹ç»æ¥åˆ°äº†ç°åœ¨ä½çš„<a href="http://baike.baidu.com/link?url=r_xfu5sjiUU_uR7DvifUkDB14TCthfbyMPn5lrA7-sJdJ3X3TS-ZmHf4G4Ctc42SSt4ll6mSmWKSmvnc11ED_Frggi5BergYX25tyT56tu6lVgdHs1WD9YIbh6-kQCD8" target="_blank" rel="external">æœ›æœˆå…¬å¯“</a>ã€‚</p>
<p>è¿™è¾¹çš„å·¥ä½œæ°›å›´æ¯”ä¸Šæµ·æˆ‘è§‰å¾—è¦å¥½äº›ï¼Œæ¯”è¾ƒè‡ªç”±ï¼Œæ—¶é—´è§„å®šä¹Ÿæ²¡é‚£ä¹ˆä¸¥æ ¼ã€‚åœ¨è¿™è¾¹çš„å·¥ä½œçš„æ”¶è·ä¹Ÿè‡ªç„¶æ›´å¤šï¼Œä¸è¿‡ä¹Ÿè§‰å¾—ä¸æ˜¯ç‰¹åˆ«æ»¡æ„ï¼Œè¿™è¾¹å’Œ Ucloud åšåŸºç¡€äº‘è®¡ç®—ä¸ä¸€æ ·ï¼Œä¸šåŠ¡ä¼šå¤šä¸€äº›ï¼Œæ‰€ä»¥æˆ‘çš„ä¸“ä¸šçŸ¥è¯†æé«˜çš„æ²¡æˆ‘æƒ³çš„å¤šï¼Œæ›´å¤šçš„æ˜¯å»ç†Ÿæ‚‰ä¸šåŠ¡ã€‚æˆ‘ä¸çŸ¥é“è¿™ç§çŠ¶æ€æ˜¯å¥½æ˜¯åï¼Œä» Ucloud å‡ºæ¥ä¹Ÿæ²¡èƒ½æ‘¸æ¸…ä¸‹é¢è¿™äº›é—®é¢˜ï¼š</p>
<blockquote>
<p>åˆ°åº•è¯¥å¦‚ä½•ä¸“æ³¨ä¸€ä¸ªæ–¹å‘ï¼Ÿç°åœ¨è¿™æ ·çš„å·¥ä½œçŠ¶æ€æ˜¯æˆ‘æƒ³è¦çš„å˜›ï¼Ÿæˆ‘åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Ÿ</p>
</blockquote>
<p>æ­å·çš„ç”Ÿæ´»ä¹Ÿè¦æ¯”ä¸Šæµ·å¥½äº›ï¼Œæ²¡æœ‰é‚£ä¹ˆå¤šé«˜æ¥¼å¤§å¦ï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡é‚£ä¹ˆå‹æŠ‘ã€‚å¤å¤©é‚£ä¼šè¿˜ç»å¸¸è·‘è·‘æ­¥ï¼Œå‘¨æœ«æä¸€äº›å°ä¸œè¥¿ï¼Œå†™å†™åšå®¢ï¼ŒæŒºå¼€å¿ƒçš„ã€‚</p>
<p>ä»Šå¤©å°å…°å®ä¹ æ­£å¼ç»“æŸäº†ï¼Œè™½ç„¶å¹³æ—¶æˆ‘å¯¹ä»–ä¹Ÿä¸çŸ¥é“â€œå‹å¥½â€ï¼Œä½†ä»–è¿™ä¹ˆä¸€èµ°ï¼Œæˆ‘å¿ƒé‡Œè¿˜çœŸæ˜¯æœ‰äº›ä¸èˆï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆè¡¨è¾¾ï¼Œç¥å°å…°å‰é€”ä¸€åˆ‡é¡ºåˆ©ï¼Œæ”¹æ—¥æœ‰æœºä¼šå†èšã€‚</p>
<h2 id="è¯»ä¹¦"><a href="#è¯»ä¹¦" class="headerlink" title="è¯»ä¹¦"></a>è¯»ä¹¦</h2><p>14 å¹´å¹´ç»ˆæ€»ç»“æ—¶è¯´è¦çœ‹å®Œä¸‹é¢ä¸‰æœ¬ä¹¦ï¼š</p>
<ul>
<li><a href="http://book.douban.com/subject/1148282/" target="_blank" rel="external">SICP</a></li>
<li><a href="http://book.douban.com/subject/1885170/" target="_blank" rel="external">ç®—æ³•å¯¼è®º</a></li>
<li><a href="http://book.douban.com/subject/1291204/" target="_blank" rel="external">å“¥å¾·å°”ã€è‰¾èˆå°”ã€å·´èµ«</a>ï¼Œè‹±æ–‡ä¹¦åï¼šGÃ¶del, Escher, Bachï¼Œç®€å†™ GEBã€‚</li>
</ul>
<p>åˆ°ä»Šå¤©ï¼Œæ˜¯ä¸€ä¸ªéƒ½æ²¡å®Œæˆã€‚å½“æ—¶è‡ªå·±ç¡®å®æ²¡èƒ½å¾ˆå¥½è¯„ä¼°è¿™ä¸‰æœ¬ä¹¦çš„â€œè´¨é‡â€ï¼Œè¿™ä¸‰æœ¬ä¹¦å¹¶ä¸æ˜¯â€œåå¤©æ•™ä½ å­¦ä¼šCè¯­è¨€â€ä¹‹ç±»çš„ä¹¦ç±ï¼Œå®ƒä»¬æ¯ä¸€æœ¬éƒ½éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´å»æ€è€ƒã€æ£æ‘©ï¼Œåƒã€ŠGEBã€‹è¿™éƒ¨è‘—ä½œæ€•æ˜¯éœ€è¦è¾ƒæ·±çš„æ•°å­¦åŠŸåº•ä¸AIæ–¹é¢çš„çŸ¥è¯†æ‰èƒ½é¢†ç•¥å…¶ç²¾é«“ã€‚SICP ä¸­æ–‡ç‰ˆåœ¨268é¡µçš„<a href="https://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#footnote_Temp_554" target="_blank" rel="external">æ³¨è§£224</a>ä¸­æœ‰æåˆ° GEB çš„éƒ¨åˆ†å†…å®¹ï¼Œè¿™é‡Œåšä¸ªæ‘˜æŠ„ï¼š</p>
<blockquote>
<p>æœ‰äººè§‰å¾—è¿™æ ·çš„æ±‚å€¼å™¨æ˜¯è¿åç›´è§‰çš„ï¼Œå› ä¸ºå®ƒç”±ä¸€ä¸ªç›¸å¯¹ç®€å•çš„è¿‡ç¨‹å®ç°ï¼Œå´èƒ½å»æ¨¡æ‹Ÿå¯èƒ½æ¯”æ±‚å€¼å™¨æœ¬èº«è¿˜è¦è´Ÿè´£çš„å„ç§ç¨‹åºã€‚é€šç”¨æ±‚å€¼å™¨çš„å­˜åœ¨æ˜¯è®¡ç®—çš„ä¸€ç§æ·±åˆ»è€Œç¾å¦™çš„æ€§è´¨ã€‚é€’å½’è®ºæ˜¯æ•°ç†é€»è¾‘çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œè¿™ä¸€ç†è®ºç ”ç©¶è®¡ç®—çš„é€»è¾‘é™åˆ¶ã€‚<a href="https://en.wikipedia.org/wiki/Douglas_Hofstadter" target="_blank" rel="external">Douglas Hofstadter</a> çš„ç¾å¦™è‘—ä½œã€ŠGEBã€‹ï¼ˆ1979ï¼‰é‡Œæ¢ç´¢äº†å…¶ä¸­çš„ä¸€äº›æ€æƒ³ã€‚</p>
</blockquote>
<p>åœ¨å…¬å¸å†…éƒ¨æäº†ä¸ª <a href="https://github.com/sicper" target="_blank" rel="external">SICP è¯»ä¹¦å°ç»„</a>ï¼Œæ¯å‘¨åˆ†äº«ã€è®²è§£ä¹ é¢˜ï¼Œå¼€å§‹è¿›è¡Œçš„æŒºå¥½ï¼Œåæ¥éšç€å¤§å®¶æ¿€æƒ…çš„æ¶ˆé€€ï¼Œè¿›åº¦ä¹Ÿä¸€å†æ¨è¿Ÿï¼Œç°åœ¨å°è±¡æ¯”è¾ƒæ·±çš„æ˜¯åŒ 11 å‰åï¼Œæˆ‘å½“æ—¶ä¸ºäº†å‚åŠ  SF é»‘å®¢é©¬æ‹‰æ¾ï¼Œå°±æš‚åœäº†ä¸¤å‘¨çš„è¯»ä¹¦ä¼šï¼Œé»‘å®¢é©¬æ‹‰æ¾ç»“æŸåèµ¶ä¸ŠåŒ11å…¬å¸åšæ´»åŠ¨ï¼Œç„¶åå°±ä¸€ç›´æ‹–ï¼Œç¬¬ä¸‰ç« çœ‹å®Œç”¨äº†ä¸‰ä¸ªæœˆï¼Œè™½ç„¶ç¬¬ä¸‰ç« çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæ€ä¹ˆä¹Ÿä¸è‡³äºä¸‰ä¸ªæœˆæ—¶é—´æ‰çœ‹å®Œã€‚ç°åœ¨è¿›è¡Œåˆ°ç¬¬å››ç« äº†ï¼Œä¸ç®¡æ€æ ·ï¼Œä¸€å®šè¦æŠŠè¿™æœ¬ä¹¦åšæŒä¸€ä¸‹ï¼Œä»€ä¹ˆä¸œè¥¿å¼€å§‹éƒ½æ˜¯é æ¿€æƒ…ï¼Œä½†æ˜¯èƒ½æŠŠä¸€ä»¶äº‹æƒ…åšå¥½ï¼Œé™¤äº†æ¿€æƒ…å¤–ï¼Œè‚¯å®šéœ€è¦åšæŒï¼Œè€Œä¸”æ˜¯é•¿æ—¶é—´çš„åšæŒã€‚æˆ‘ä¹Ÿç›¸ä¿¡å¤ä»Šä¸­å¤–é‚£äº›è®©æˆ‘ä»¬è®°ä½åå­—çš„äººï¼Œä»–ä»¬çš„æ°å‡ºè´¡çŒ®å’Œä»–ä»¬å‡ åå¹´å¦‚ä¸€æ—¥çš„åšæŒæ˜¯åˆ†ä¸å¼€çš„ã€‚<br>æ¯”è¾ƒæ¬£æ…°çš„æ˜¯ï¼Œè‡ªå·±çš„ <a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">SICP ç¬”è®°</a>æˆªæ­¢åˆ°ç°åœ¨å·²ç»æœ‰ 113 ä¸ª starï¼Œè¿™ä¹Ÿç®—æ˜¯ä¸€ç§é¼“åŠ±å§ï¼ŒåŒæ—¶è‡ªå·±ä¹Ÿå†™äº†ä¸ª <a href="https://github.com/jiacai2050/JCScheme" target="_blank" rel="external">Scheme æ–¹è¨€</a>ï¼Œç®—æ˜¯çœŸæ­£é¢†ç•¥åˆ°äº†ç¼–ç¨‹è¯­è¨€çš„å¥¥ç§˜ï¼ŒSICP è™½ç„¶æ˜¯ä¸ªæ—¶é—´é»‘æ´ï¼Œä½†æ˜¯ç»å¯¹å€¼å¾—æŠ•å…¥ã€‚<br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2gk15jpXXXXXxXpXXXXXXXXXX_!!581166664.png" alt="Github Contributions"></p>
<p>ä»ä¸Šé¢ Github çš„ Contributions åŸºæœ¬ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥åœ¨ï¼Œæˆ‘åœ¨ 5ã€6ã€7æœˆä»½æ˜¯æ¯”è¾ƒæ´»è·ƒï¼Œè¿™é˜¶æ®µåº”è¯¥ä¹Ÿæ˜¯çœ‹ SICP æœ€å¿«çš„æ—¶é—´æ®µï¼Œ16 å¹´äº‰å–è®©è¿™ä¸ªå›¾æ›´å¹³å‡ä¸€äº›ã€‚</p>
<p>é™¤äº† SICP ä¹‹å¤–ï¼Œè¾ƒå®Œæ•´çœ‹å®Œçš„ä¸€æœ¬ä¹¦æ˜¯<a href="http://book.douban.com/subject/3628911/" target="_blank" rel="external">ã€ŠDive Into Python 3ã€‹</a>ï¼Œæˆ‘çš„ä¹¦è¯„åœ¨<a href="http://book.douban.com/review/7717953/" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚è¿™æœ¬ä¹¦å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯åœ¨å 89 è·¯å…¬äº¤è½¦å»å…¬å¸çš„è·¯ä¸Šçœ‹å®Œçš„ï¼Œç®—æ˜¯å……åˆ†åˆ©ç”¨æ—¶é—´å§ï¼Œè¿™é‡Œä¸å¾—ä¸æ¨èä¸€ä¸‹ Kindleï¼ŒçœŸæ˜¯çœ‹ä¹¦ç¥å™¨ã€‚å…¶ä»–è¿˜åœ¨çœ‹çš„ä¹¦æœ‰ï¼š</p>
<ul>
<li><a href="http://book.douban.com/subject/1494026/" target="_blank" rel="external">Code : The Hidden Language of Computer Hardware and Software</a></li>
<li><a href="http://book.douban.com/subject/25854634/" target="_blank" rel="external">å…¬å…±é—®é¢˜ç»æµå­¦</a></li>
</ul>
<p>æ›´å¤šå¯ä»¥æŸ¥é˜…æˆ‘çš„<a href="http://book.douban.com/people/liujiacai/do" target="_blank" rel="external">è±†ç“£æˆ‘è¯»</a>é¡µé¢ã€‚<br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2cImCjpXXXXcpXpXXXXXXXXXX_!!581166664.png" alt="2015 åœ¨çœ‹çš„ä¹¦"></p>
<h2 id="å†™åšå®¢"><a href="#å†™åšå®¢" class="headerlink" title="å†™åšå®¢"></a>å†™åšå®¢</h2><p>æˆ‘å†™åšå®¢éµå¾ªä¸‹é¢ä¸‰ä¸ªåŸåˆ™ï¼š</p>
<ul>
<li><code>åŸåˆ›</code>ã€‚æˆ‘ä»¬ä¸æ˜¯çŸ¥è¯†çš„â€œæ¬è¿å·¥â€ï¼Œæˆ‘ä»¬æ˜¯çŸ¥è¯†çš„åˆ›é€ è€…</li>
<li><code>å¹²è´§</code>ã€‚æ¢ç©¶çŸ¥è¯†çš„æœ¬è´¨ï¼Œå¹¶ä¸ä»…ä»…æ˜¯ howï¼Œé‡è¦çš„æ˜¯ why</li>
<li><code>é€šä¿—æ˜“æ‡‚</code>ã€‚æœ€å¥½è®©ä½ ä¸€ä¸ªä¸å­¦è®¡ç®—æœºçš„äººä¹Ÿèƒ½æ‡‚</li>
</ul>
<p>15 å¹´æ€»å…±å†™å‡ºäº† 16 ç¯‡æ–‡ç« ï¼Œæ•°é‡ä¸ç®—å¤šï¼Œä½†æ˜¯æˆ‘ç»å¯¹å¯ä»¥è¯´æ˜¯æˆ‘èŠ±è´¹å¤§é‡æ—¶é—´å†™å‡ºæ¥çš„ï¼Œé™¤äº†ä¸€ä¸¤ç¯‡æ˜¯çºªå½•ç”Ÿæ´»è½¨è¿¹çš„ï¼Œç»å¤§éƒ¨åˆ†éƒ½æ˜¯å¯¹ä¸€äº›çŸ¥è¯†çš„æ€è€ƒã€‚<br>åƒå¹´åˆå†™çš„å…³äº javascript çš„ä¸¤ç¯‡æ–‡ç« <a href="/blog/2015/02/24/javascript-datatype/">ã€Šjavascriptä¸­çš„æ•°æ®ç±»å‹ã€‹</a>ã€<a href="/blog/2015/02/01/javascript-oop/">ã€Šjavascriptä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ã€‹</a>ï¼ŒåŸºæœ¬æŠŠ javascriptä¸­çš„ good parts å†™å‡ºæ¥äº†ï¼Œå…¶ä¸­æ¯”è¾ƒè®©äººå›°æƒ‘çš„<code>__proto__</code>ã€<code>this</code>ã€é¢å‘å¯¹è±¡çš„å®ç°ç­‰éƒ½æœ‰æ¯”è¾ƒè¯¦å°½çš„è§£é‡Šï¼Œæˆ‘ç›¸ä¿¡å¯ä»¥èƒœè¿‡äº’è”ç½‘ä¸Šå…¶ä»–å…³äº javascript çš„ä»‹ç»ã€‚</p>
<p>ç„¶åæ˜¯å…³äº Java é›†åˆæ¡†æ¶çš„ä¸€äº›æ–‡ç« ï¼Œå…¶ä¸­æˆ‘è§‰å¾—å†™çš„æ¯”è¾ƒå¥½çš„æœ‰<a href="/blog/2015/09/01/java-collection-overview/">ã€ŠJavaé›†åˆæ¡†æ¶ç»¼è¿°ã€‹</a>ã€<a href="/blog/2015/09/03/java-hashmap/">ã€ŠJava HashMap æºç è§£æã€‹</a>ã€<a href="/blog/2015/09/04/java-treemap/">ã€ŠJava TreeMap æºç è§£æã€‹</a>ï¼Œçœ‹äº† SICP åï¼Œå¯¹æ•°æ®ç»“æ„çš„ç†è§£ä¹Ÿæ›´æ·±åˆ»äº†ï¼Œè¯­è¨€æä¾›çš„å„ç§ç±»åº“åŸºæœ¬éƒ½æ˜¯å¯¹æ•°æ®çš„å„ç§å°è£…ï¼Œåªä¸è¿‡ç”±äºåº”ç”¨åœºæ™¯ä¸ä¸€æ ·ï¼Œæ‰€ä»¥åº•å±‚å®ç°çš„æ–¹å¼ä¸ä¸€æ ·ã€‚</p>
<p>ä¹‹åæ˜¯å…³äº SICP å‰ä¸‰ç« çš„æ€»ç»“ï¼š<a href="/blog/2015/07/18/sicp-chapter1-summary/">ã€ŠSICP ç¬¬ä¸€ç« æ€»ç»“ã€‹</a>ã€<a href="/blog/2015/09/20/sicp-chapter2-summary/">ã€ŠSICP ç¬¬äºŒç« æ€»ç»“ã€‹</a>ã€<a href="/blog/2015/12/26/sicp-chapter3-summary/">ã€ŠSICP ç¬¬ä¸‰ç« æ€»ç»“ã€‹</a>ã€‚SICP è¿™æœ¬ä¹¦ç»™æˆ‘å¸¦æ¥å¤ªå¤šå¤ªå¤šå…³äºç¼–ç¨‹ä¸Šçš„è®¤è¯†äº†ï¼Œå¸Œæœ›å¯¹ç¼–ç¨‹è¿˜æœ‰æ¿€æƒ…çš„åŒè¡Œä»¬æœ‰æœºä¼šä¸€å®šè¦çœ‹ä¸€çœ‹ã€‚åœ¨çœ‹ SICP ä¹‹ä½™ï¼Œä½¿ç”¨ Java å®ç°äº†ä¸ª Scheme æ–¹è¨€ï¼Œ<a href="/blog/2015/10/03/first-toy-scheme/">ã€Šæˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº†ã€‹</a>è¿™ç¯‡æ–‡ç« ä»‹ç»äº†å®ç°ä¸€ä¸ªè§£é‡Šå™¨çš„æ–¹æ–¹é¢é¢ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚è€ƒã€‚</p>
<p>å¹´åº•æœ€åä¸€ç¯‡æœ‰ä»½é‡çš„æ–‡ç« æ˜¯<a href="/blog/2015/11/20/strings/">ã€Šå­—ç¬¦ä¸²ï¼Œé‚£äº›ä½ ä¸çŸ¥é“çš„äº‹ã€‹</a>ï¼Œè¿™éƒ¨åˆ†å†…å®¹æ˜¯æˆ‘åœ¨çœ‹ã€ŠDive into Python 3ã€‹æ—¶äº†è§£åˆ°çš„ï¼ŒçœŸæ˜¯å¤§å¼€çœ¼ç•Œï¼Œæˆ‘ç›¸ä¿¡ä½ åº”è¯¥ä¹Ÿâ€œå°çœ‹â€å­—ç¬¦ä¸²äº†ï¼ŒæŠ“ç´§å»çœ‹çœ‹å§ğŸ˜Šã€‚</p>
<p>ä¸€ç›´è§‰å¾—èƒ½å¤Ÿå†™å‡ºä¸€äº›é€šä¿—æ˜“æ‡‚ä½†åˆæœ‰å¹²è´§çš„æ–‡ç« ä¸å®¹æ˜“ï¼Œæˆ‘ä¸€ç›´åœ¨åŠªåŠ›ã€‚2016ï¼Œå¸Œæœ›ä¸ºè¿™ä¸–ç•Œè´¡çŒ®äº›ç¾å¥½çš„ä¸œè¥¿ã€‚</p>
<h2 id="ç”Ÿæ´»"><a href="#ç”Ÿæ´»" class="headerlink" title="ç”Ÿæ´»"></a>ç”Ÿæ´»</h2><p>ä»Šå¹´äº”ä¸€æœŸé—´ï¼Œå®¶é‡Œçš„å§å§ç»“å©šäº†ï¼Œä¸è¿‡ç¦»æˆ‘è€å®¶å¹¶ä¸æ˜¯å¾ˆè¿œã€‚ç°åœ¨æˆ‘çš„å°å¤–ç”¥ä¹Ÿå·²ç»å››äº”ä¸ªæœˆäº†ã€‚å€©å§ä¹Ÿåœ¨15å¹´12æœˆ30å·å«äººäº†ã€‚<br>æƒ³æƒ³åŒé¾„äººï¼Œå¤§éƒ¨åˆ†äººéƒ½å¨¶å¦»ç”Ÿå­ï¼Œåªæœ‰ä¸€å°‘éƒ¨åˆ†äººæ¯”è¾ƒâ€œå¦ç±»â€ï¼Œè¿˜åœ¨åšæŒç€ä¸å¯é¢„çŸ¥çš„æ¢¦æƒ³ã€‚ä¸è¿‡æˆ‘è§‰å¾—è¿™ä¹Ÿæ˜¯æ­£å¸¸çš„ï¼Œå¤§éƒ¨åˆ†äººæ³¨å®šå¹³åº¸ï¼Œåªæœ‰é‚£äº›ä¸æ–­åšæŒçš„äººæ‰æœ‰å¯èƒ½è„±é¢–è€Œå‡ºï¼Œå½“ç„¶æˆ‘ä¹Ÿä¸æŒ‡æœ›æˆä¸ºä»€ä¹ˆå¤§è€æ¿ï¼Œåªæ˜¯å¸Œæœ›å¯¹å¾—èµ·è‡ªå·±çš„å†…å¿ƒï¼Œè®°å¾—å°æ—¶å€™çœ‹è¿‡ä¸­å¤®å«è§†çš„ä¸€ä¸ªå…¬ç›Šå¹¿å‘Šï¼š<a href="http://v.youku.com/v_show/id_XNzQwODEyODQ=.html?from=s1.8-1-1.2" target="_blank" rel="external">å¿ƒæœ‰å¤šå¤§ï¼Œèˆå°å°±æœ‰å¤šå¤§</a>ï¼Œè¿˜æœ‰ä¸€å¥è¯ä¹ŸæŒºè§¦åŠ¨æˆ‘çš„ï¼š</p>
<blockquote>
<p>æ¯”ä½ ä¼˜ç§€çš„äººä¸å¯æ€•ï¼Œå¯æ€•çš„æ˜¯æ¯”ä½ ä¼˜ç§€çš„äººæ¯”ä½ æ›´åŠªåŠ›</p>
</blockquote>
<p>æ˜¯å‘€ï¼Œä»€ä¹ˆä¸œè¥¿éƒ½æ¯”ä¸è¿‡åšæŒï¼Œã€Šè‚–ç”³å…‹çš„æ•‘èµã€‹ä¸­çš„ç”·ä¸»è§’çœŸæ˜¯åšåˆ°äº†åå¹´å¦‚ä¸€æ—¥ã€‚æˆ‘ä»¬æ¯ä¸ªäººéƒ½å¾ˆå®¹æ˜“è¢«ç”Ÿæ´»ç£¨å¹³äº†æ£±è§’ï¼Œå½“åˆåˆšæ¯•ä¸šæ—¶çš„é›„å¿ƒå£®å¿—ä¹Ÿä¸çŸ¥é“ä¸¢åœ¨äº†é‚£é‡Œã€‚æƒ³æƒ³æˆ‘ä»åˆä¸­åˆ°ç°åœ¨çš„æ±‚å­¦ä¹‹è·¯ï¼Œä¹Ÿç®—å¹¸è¿ï¼Œé‡åˆ°äº†å‡ ä¸ªå¯¹æˆ‘äººç”Ÿæœ‰é‡å¤§å¯å‘çš„è€å¸ˆï¼Œè™½ç„¶å¤§å­¦ä¸Šçš„ä¸æ˜¯ä»€ä¹ˆ985ã€211ï¼Œä½†æ˜¯ä¹Ÿçœ‹åˆ°äº†å¾ˆå¤šä¹‹å‰ä¸äº†è§£çš„ä¸œè¥¿ï¼Œæ˜ç™½äº†åªæœ‰å»åŠªåŠ›ï¼Œä»»ä½•æ—¶é—´éƒ½ä¸æ™šã€‚èµ°ä¸Šç¼–ç¨‹è¿™æ¡è·¯ç®—æ˜¯è¿™è¾ˆå­æœ€å¹¸è¿çš„ä¸€ä»¶äº‹ï¼Œé«˜è€ƒåæŠ¥ä¸“ä¸šå¯¹ç¼–ç¨‹æ ¹æœ¬ä¹Ÿæ²¡ä»€ä¹ˆæ¦‚å¿µï¼Œç¨€é‡Œç³Šæ¶‚çš„å°±æŠ¥äº†ï¼Œç°åœ¨å›å¤´çœ‹çœ‹ï¼ŒçœŸæ˜¯ä¸Šå¤©çš„çœ·é¡¾ã€‚</p>
<p>æ„Ÿæƒ…çŠ¶æ€è¿˜æ˜¯å•èº«ï¼Œä¸è¿‡å¹¸å¥½è¿˜æ˜¯æœ‰å‡ ä¸ªå¼‚æ€§å¥½æœ‹å‹ï¼Œå·¥ä½œä¹‹ä½™å’Œå¥¹ä»¬è°ƒä¾ƒä¸€ä¸‹ç”Ÿæ´»ä¹Ÿå˜çš„ç²¾å½©äº†å¾ˆå¤šã€‚ä¸‹åŠå¹´é‡åˆ°äº†è§¦åŠ¨æˆ‘å¿ƒçµçš„å§‘å¨˜ï¼Œä¸è¿‡è²Œä¼¼æ—¶é—´å¹¶ä¸æ˜¯é‚£ä¹ˆåˆé€‚ï¼Œæœ‰å¤ªå¤šçš„ä¸å®šå› ç´ äº†ï¼Œç¼˜åˆ†åˆ°åº•ä¼šä¸ä¼šæ¥æˆ‘ä¹Ÿä¸çŸ¥é“ï¼Œåªèƒ½åšå¥½è‡ªå·±ç›®å‰çš„äº‹æƒ…ã€‚ä¹‹å‰æ²¡æ€ä¹ˆè€ƒè™‘è¿‡å®šå±…ã€ä»Šåçš„å®¶åº­ä¹‹ç±»çš„è¯é¢˜ï¼Œå’Œè¿™ä¸ªå§‘å¨˜èŠäº†åŠå¹´å¤šåï¼Œä¹Ÿæ„è¯†åˆ°è¿™äº›é—®é¢˜äº†ï¼Œå¸Œæœ› 16 å¹´å¥¹å›å›½åèƒ½æœ‰æœ‰æ›´å¤šçš„ç¼˜åˆ†â¤ï¸ã€‚</p>
<h2 id="å±•æœ›-2016"><a href="#å±•æœ›-2016" class="headerlink" title="å±•æœ› 2016"></a>å±•æœ› 2016</h2><p>ä»¥ä¸Šç½—åˆ—äº† 2015 å¹´ä¸€äº›é‡è¦çš„äº‹æƒ…ï¼Œæ–°çš„ä¸€å¹´æ¥ä¸´äº†ï¼Œä¹Ÿè¦æ‹¥æŠ±æ”¹å˜ï¼Œç»™è‡ªå·±å®šä¸€ä¸‹æ–°å¹´ç›®æ ‡ã€‚ä¸Šé¢å¤šæ¬¡æåˆ°äº†åšæŒçš„æ„ä¹‰ï¼Œæˆ‘è§‰å¾— 2015 å¹´æˆ‘åœ¨è¿™æ–¹é¢åšçš„æ¯”ä¹‹å‰çš„è¦å¥½ï¼Œè™½ç„¶ä¸æ˜¯å¾ˆå®Œç¾ï¼Œä½†æ˜¯è¿˜æ—¶æœ‰äº†ä¸€äº›æˆæœï¼Œä»Šå¹´ä¸€å®šè¦è´¯å½»ä¸‹å»ï¼Œæ¯•ç«Ÿå¤ªå¤šäº‹æƒ…éœ€è¦åšäº†ã€‚æŠ“ä½ä¸»çº¿ï¼ŒæŠµåˆ¶è¯±æƒ‘ï¼Œæˆä¸ºä¸€ä¸ªæ›´å¥½çš„è‡ªå·±ã€‚</p>
<h3 id="å‡è‚¥"><a href="#å‡è‚¥" class="headerlink" title="å‡è‚¥"></a>å‡è‚¥</h3><p>å…·ä½“æ¥è¯´æˆ‘è§‰å¾—ç¬¬ä¸€ä»¶äº‹å°±æ˜¯ï¼š<code>å‡è‚¥</code>ã€‚å‡è‚¥è¿™ä¸¤ä¸ªå­—å¯¹ç°ä»£äººæ¥è¯´çœŸæ˜¯å†ç†Ÿæ‚‰ä¸è¿‡äº†ï¼Œæˆ‘ä»å°å°±èƒ–äº›ï¼Œä»¥åä¹Ÿå°±å…»æˆäº†ä¹ æƒ¯ï¼Œä¹Ÿä¸åœ¨ä¹åˆ«äººæ€ä¹ˆè¯´äº†ï¼Œå…¶å®è¿™ç»™æˆ‘ç°åœ¨é€ æˆäº†æŒºå¤§çš„è‹¦æ¼ï¼Œå½“ç„¶æ³¨æ„æ˜¯æ‰¾å¯¹è±¡æ–¹é¢ï¼Œéƒ½è¯´å¥³ä¸ºæ‚¦å·±è€…å®¹ï¼Œç”·ä¹Ÿå¯ä»¥ä¸ºæ‚¦å·±è€…å®¹å‘€ï¼Œæ›´é‡è¦çš„æ˜¯è‚¥èƒ–å¯¹èº«ä½“å¥åº·ä¸å¥½ï¼Œç¨‹åºå‘˜æœ¬æ¥çš„è¿åŠ¨é‡å°±å°‘ï¼Œå¦‚æœå¤©å¤©åŠ ç­èº«ä½“è‚¯å®šåƒä¸æ¶ˆã€‚</p>
<p>æˆ‘ä¹Ÿç›¸ä¿¡æ¯ä¸ªèƒ–å­éƒ½æ˜¯æ½œåŠ›è‚¡ï¼Œå…¶å®å‡è‚¥ä¹Ÿæ²¡æƒ³çš„é‚£ä¹ˆå›°éš¾ï¼Œåªè¦ä¿è¯æ¯å¤©çš„æ‘„å…¥å°äºæ¶ˆè€—çš„èƒ½é‡ï¼Œæ›´å…·ä½“çš„è¯´ï¼Œå°±æ˜¯ç®¡ä½å˜´ï¼Œè¿™æ ·å‡è‚¥ä¹Ÿä¸æ˜¯ä»€ä¹ˆéš¾äº‹ï¼ŒçŸ¥ä¹ä¸Šçœ‹åˆ°ä¸€ä¸ªå‡è‚¥æˆåŠŸçš„äººè¯´çš„ä¸€å¥è¯ï¼Œç”šæ˜¯æ¬£èµï¼Œè¿™é‡Œä¸å¤§å®¶åˆ†äº«ä¸‹ï¼š</p>
<blockquote>
<p>è´ªåƒå…¶å®æ˜¯äººç±»è´ªå¿µçš„ä¸€ç§ï¼Œä¸ºäº†æ»¡è¶³ä¸€æ—¶çš„å¿«æ„Ÿï¼Œè€Œä¸é¡¾åæœä½œå‡ºçš„ä¸€äº›è¡Œä¸ºã€‚</p>
</blockquote>
<p>æˆåŠŸçš„äººä¸€å®šè¦æŠ‘åˆ¶è‡ªå·±çš„è´ªæ¬²ï¼Œè¿™æ ·æ‰èƒ½æˆä¸ºæ›´å¥½çš„è‡ªå·±ï¼Œä¸ºäº†åœ¨å‡å°‘æ‘„å…¥æ—¶ä¸è‡³äºè‚šå­é¥¿ï¼Œç½‘ä¸Šä¸€èˆ¬æ¨èåƒç‡•éº¦ç‰‡ï¼Œè¿™ç§é£Ÿç‰©æ¯”è¾ƒå®¹æ˜“æœ‰é¥±è…¹æ„Ÿï¼Œè¿™æ ·å°±èƒ½å¤Ÿæ„‰å¿«çš„å†™ä»£ç äº†ã€‚åé¢æœ‰ä»€ä¹ˆå¿ƒå¾—ä¼šå†æ¥ä¸å¤§å®¶åˆ†äº«ã€‚</p>
<h3 id="è¯»ä¹¦-1"><a href="#è¯»ä¹¦-1" class="headerlink" title="è¯»ä¹¦"></a>è¯»ä¹¦</h3><p>é™¤äº† 2015 å¹´ä¸€ç›´åœ¨è¯»çš„ SICPï¼Œæˆ‘è§‰å¾—ç®—æ³•å¯¼è®ºå¯ä»¥æä¸Šæ—¥ç¨‹äº†ï¼Œè‡³äº GEBï¼Œæˆ‘è§‰å¾—åº”è¯¥è¿˜ä¸ä¼šæ¶‰åŠåˆ°ï¼Œå¯ä»¥å…ˆæ”¾ä¸€æ”¾ã€‚<br>2016 çš„ä¹¦å•ä¼šåŒ…å«ä¸‹é¢è¿™äº›ï¼š</p>
<ul>
<li><a href="http://book.douban.com/subject/1494026/" target="_blank" rel="external">Code : The Hidden Language of Computer Hardware and Software</a>ï¼Œè¿™æœ¬ä¹¦ä¸»è¦æ˜¯è®²è¿°è®¡ç®—æœºæ˜¯å¦‚ä½•ä¸€æ­¥æ­¥æ„é€ çš„ã€‚ä»æœ€æ—©çš„<a href="https://en.wikipedia.org/wiki/Morse_code" target="_blank" rel="external">æ‘©æ–¯ç”µç </a>ï¼Œåˆ°å„ç§ç”µè·¯å…ƒä»¶çš„å®ç°åŸç†ï¼Œå†åˆ°è®¡ç®—æœºä¸­å¦‚ä½•ä¿å­˜ä¿¡æ¯ï¼Œå¯¹ç†è§£è®¡ç®—æœºå¦‚ä½•å·¥ä½œéå¸¸æœ‰å¸®åŠ©ã€‚</li>
<li><a href="http://book.douban.com/subject/1230413/" target="_blank" rel="external">Computer Systems: A Programmerâ€™s Perspective</a>ã€‚è¿™æœ¬ä¹¦ä¸»è¦æ˜¯è®©æˆ‘èƒ½å¤Ÿæ›´å¥½çš„ç†è§£æ“ä½œç³»ç»Ÿã€‚</li>
<li><a href="http://book.douban.com/subject/25854634/" target="_blank" rel="external">å…¬å…±é—®é¢˜ç»æµå­¦</a>ï¼Œä¸»è¦æ˜¯ä¸€äº›ç»æµå­¦çŸ¥è¯†ï¼Œåœ¨ç°ä»£ç¤¾ä¼šï¼Œæ¯ä¸ªäººéƒ½éœ€è¦æ‡‚ä¸€äº›ç»æµå­¦ï¼Œä¸æ˜¯å˜›</li>
<li><a href="http://book.douban.com/subject/1888733/" target="_blank" rel="external">Java Concurrency in Practice</a>ã€‚ä¸»è¦è®²æˆå¤šçº¿ç¨‹æ–¹é¢çš„çŸ¥è¯†ï¼Œå…¶å®è¿™å—çŸ¥è¯†æˆ‘ä¸€ç›´æŒºæ¬ ç¼ºå¤šï¼Œhadoop æœ¬èº«å°±æ˜¯ä¸ªéå¸¸å¤æ‚çš„å¤šçº¿ç¨‹ç¨‹åºï¼Œå¦‚æœä¸äº†è§£è¿™æ–¹é¢çš„çŸ¥è¯†ï¼ŒæŸ¥é”™éå¸¸ä¸æ–¹ä¾¿ï¼Œå¦ä¸€æ–¹é¢ç°åœ¨å¹¶å‘çš„åœºæ™¯è¶Šæ¥è¶Šå¤šï¼Œå¤šçº¿ç¨‹æ³¨å®šæ˜¯ä¸ªçƒ­é—¨è¯é¢˜ã€‚</li>
<li><a href="http://book.douban.com/subject/1632977/" target="_blank" rel="external">The Little Schemer - 4th Edition</a>ï¼Œè¿™æ˜¯ä¸€æœ¬å°å·§ç²¾ç‚¼çš„ä¹¦ï¼Œä¸»è¦è®²è§£ Scheme æ–¹é¢çš„ä¸œè¥¿ï¼Œå¯¹ç†è§£ä¸€äº›æ¦‚å¿µï¼Œåƒé€’å½’ã€lambda å¾ˆæœ‰å¸®åŠ©ï¼Œæ˜¯ SICP å¾ˆå¥½çš„è¾…åŠ©ä¹¦ç±ã€‚</li>
<li><a href="http://book.douban.com/subject/1726083/" target="_blank" rel="external">The Seasoned Schemer</a>ï¼ŒTLS çš„æ™‹çº§ç¯‡ï¼Œ16å¹´åº”è¯¥ä¹Ÿä¼šå¼€å§‹è¯»è¿™æœ¬ä¹¦</li>
</ul>
<p>ç°åœ¨ç½—åˆ—çš„è¿™äº›ä¹¦ç± 16 å¹´å¾ˆæœ‰å¯èƒ½çœ‹ä¸å®Œï¼Œåé¢ä¹Ÿä¼šè¡¥å……è¿™ä¸ªä¹¦å•ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘æƒ³è¯´çš„æ˜¯ï¼š</p>
<blockquote>
<p>è¡ŒåŠ¨èµ·æ¥ï¼Œä¸è¦åœæ­¢æ¢å¯»æ–°çŸ¥è¯†çš„è„šæ­¥ï¼Œå¤šå»æ€»ç»“ã€å›é¡¾ï¼Œåšåˆ°ä¸¾ä¸€åä¸‰ã€‚</p>
</blockquote>
<p>ä¸æ˜¯è¯´çœ‹çš„ä¹¦è¶Šå¤šäººå°±è¶Šå‰å®³ï¼Œè¿™æ˜¯é”™è¯¯çš„ï¼Œå‡†ç¡®çš„è¯´åº”è¯¥æ˜¯å’Œäººæ€è€ƒçš„å¤šå°‘æˆæ­£æ¯”ã€‚</p>
<h3 id="å…¶ä»–"><a href="#å…¶ä»–" class="headerlink" title="å…¶ä»–"></a>å…¶ä»–</h3><p>16 å¹´åšå®¢ä¼šç…§å¸¸å†™ï¼Œè¿˜æ˜¯éµå¾ªä¸Šé¢çš„ä¸‰ä¸ªåŸåˆ™ã€‚æ— æ„é—´å‘ç°å¯ä»¥ç”¨ Github çš„ issue æ¥æ•´ç†è‡ªå·±çš„ <a href="https://github.com/jiacai2050/ideas" target="_blank" rel="external">ideas</a>ï¼Œè§‰å¾—ä¸é”™ï¼Œä»¥åå¯ä»¥åˆ©ç”¨èµ·æ¥ã€‚</p>
<p>é¡¹ç›®ä¸Šéœ€è¦å¤šå»å®è·µï¼Œåå¤æ¨æ•²è‡ªå·±å†™è¿‡çš„ä»£ç ï¼Œä¸è¦ä»…ä»…åœç•™åœ¨èƒ½ç”¨çº§åˆ«ï¼Œç‹å çš„<a href="http://www.yinwang.org/blog-cn/2015/11/21/programming-philosophy/" target="_blank" rel="external">ã€Šç¼–ç¨‹çš„æ™ºæ…§ã€‹</a>è¿™ç¯‡æ–‡ç« é‡Œé¢ä¹Ÿåå¤æåˆ°äº†è¿™ä¸€è§‚ç‚¹ã€‚<a href="/gooreplacer">gooreplacer</a> ä¹Ÿä¸€ç›´åœ¨ä¸æ–­æ›´æ–°ä¸­ï¼Œå¸Œæœ›æ–°çš„ä¸€å¹´èƒ½å¤Ÿå¼€å‘å‡ºæ›´å¤šæœ‰è¶£å®ç”¨çš„å°é¡¹ç›®ã€‚</p>
<p>æœ‰å‡ºå›½çš„æƒ³æ³•ï¼Œæ‰€ä»¥ç§‰æ‰¿åšæŒçš„åŸåˆ™ï¼Œæ¯å¤©ä½¿ç”¨<a href="http://www.shanbay.com/" target="_blank" rel="external">æ‰‡è´ç½‘</a> APP è¿›è¡Œç­¾åˆ°å­¦ä¹ è‹±æ–‡ï¼Œç”¨äº†ä¸€å‘¨å‘ç°è¿˜ä¸é”™ï¼Œæ–‡ç« å†…å®¹æ¯”è¾ƒæ–°é¢–ï¼Œå°±ç®—äººå®¶åšçš„å†æ€ä¹ˆä¸å¥½ï¼Œä¹Ÿä¸èƒ½æˆä¸ºè‡ªå·±æ”¾å¼ƒçš„å€Ÿå£ã€‚<a href="http://www.shanbay.com/checkin/user/calendar/37223251/201601" target="_blank" rel="external">è¿™æ˜¯</a>æˆ‘åœ¨æ‰‡è´ç½‘çš„ç­¾åˆ°æ—¥å†ï¼Œå¦‚æœä½ ä¹Ÿæƒ³åšæŒå­¦è‹±è¯­ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸ªå¥½å‹ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¹´å¹´å²å²èŠ±ç›¸ä¼¼ï¼Œå²å²å¹´å¹´äººä¸åŒã€‚<br>2015 å¹´å·²ç»è¿‡å»äº†ï¼Œè®©æˆ‘ä»¬æœç€ 2016ï¼Œå¤§æ­¥å‘å‰ã€‚<br>ç”Ÿæ´»ä¼šå› ä½ æˆ‘çš„åŠªåŠ›ã€åšæŒå˜å¾—æ›´å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©ï¼Œå·²ç»æ˜¯ 2016 å¹´çš„ç¬¬å…«å¤©äº†ã€‚æ—¶é—´æ€»æ˜¯è¿™æ ·ï¼Œå½“æˆ‘ä»¬èº«å¤„å…¶ä¸­æ—¶è§‰å¾—å¾ˆæ¼«é•¿ï¼Œä½†æ˜¯è¿‡åçœ‹çœ‹ï¼Œä¹Ÿæ²¡è§‰å¾—ä»€ä¹ˆã€‚&lt;br&gt;2015 å¹´æ˜¯æ¯•ä¸šåæ­£å¼å·¥ä½œçš„ç¬¬ä¸€å¹´ï¼Œåœ°ç‚¹ä»ä¸Šæµ·è½¬åˆ°äº†æ­å·ï¼Œ&lt;a href=&quot;/blog/2014/12/29/review-2014/&quot;&gt;2014 å¹´ç»ˆæ€»ç»“
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>SICP ç¬¬ä¸‰ç« æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2015/12/26/sicp-chapter3-summary/"/>
    <id>http://liujiacai.net/blog/2015/12/26/sicp-chapter3-summary/</id>
    <published>2015-12-26T04:53:33.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å†æ—¶ä¸‰ä¸ªæœˆï¼Œç»ˆäºæŠŠç¬¬ä¸‰ç« çœ‹å®Œäº†ã€‚è¿™ä¸‰æœˆå‘ç”Ÿäº†å¤ªå¤šçš„æ„å¤–ï¼Œæœ¬æ–‡ä¸æ‰“ç®—è¯´äº†ï¼Œåé¢åœ¨å†™ <a href="/blog/2016/01/08/review-2015/#è¯»ä¹¦">2015 å¹´ç»ˆæ€»ç»“</a>æ—¶å†æ¥è°ˆè°ˆè¿™ä¸‰ä¸ªæœˆçš„äº‹æƒ…ã€‚å¦‚ä»Šå›è¿‡å¤´æ¥çœ‹çœ‹ç¬¬ä¸‰ç« çš„å†…å®¹ï¼Œå¥½åƒä¹Ÿä¸æ€ä¹ˆéš¾ï¼Œåªæ˜¯å†…å®¹æ¶‰åŠçš„é¢ç¨å¾®å¹¿ä¸€äº›è€Œå·²ï¼Œä¸‹é¢æ¥å›é¡¾æ€»ç»“ä¸€ä¸‹ç¬¬ä¸‰ç« ã€‚</p>
<h2 id="ä¸»æ—¨"><a href="#ä¸»æ—¨" class="headerlink" title="ä¸»æ—¨"></a>ä¸»æ—¨</h2><p>ç¬¬ä¸‰ç« çš„æ ‡é¢˜ä¸º<code>æ¨¡å—åŒ–ã€å¯¹è±¡å’ŒçŠ¶æ€</code>ï¼Œä¸»è¦è®¨è®ºä¸çŠ¶æ€æœ‰å…³çš„ç¼–ç¨‹é—®é¢˜ã€‚å‰é¢ä¸¤ç« ï¼Œè®¨è®ºçš„é—®é¢˜ä¸»è¦æ˜¯ï¼š</p>
<ol>
<li>å¦‚ä½•ç»„åˆåŸºæœ¬è¿‡ç¨‹å’ŒåŸºæœ¬æ•°æ®</li>
<li>å¦‚ä½•æ„é€ å„ç§å¤åˆå¯¹è±¡(ç»„åˆè¿‡ç¨‹/æ•°æ®)</li>
<li><strong>æŠ½è±¡</strong>åœ¨æ§åˆ¶å’Œå¤„ç†ç¨‹åºå¤æ‚æ€§ä¸­çš„é‡è¦ä½œç”¨</li>
</ol>
<p>ä½†å¯¹äºç¨‹åºè®¾è®¡è€Œè¨€ï¼Œä¸Šé¢è¿™ä¸‰ç§æ‰‹æ®µè¿˜ä¸å¤Ÿç”¨ï¼Œæœ‰æ•ˆè®¾è®¡å¤§å‹ç³»ç»Ÿï¼Œè¿˜éœ€è¦ä¸€äº›ç»„ç»‡ç³»ç»Ÿçš„åŸåˆ™ï¼Œè¿™ä½“ç°åœ¨ä¸‹é¢ä¸¤æ–¹é¢ï¼š</p>
<ol>
<li>åªæœ‰ä¸€é›†é«˜æ•ˆç®—æ³•ï¼Œä¸è¶³ä»¥æ„é€ å‡ºè‰¯å¥½çš„å¤§å‹ç³»ç»Ÿ</li>
<li>ç³»ç»Ÿçš„åŠŸèƒ½åˆ†è§£ï¼Œç»“æ„ç»„ç»‡å’Œç®¡ç†ä¸ç®—æ³•ä¸€æ ·é‡è¦(æˆ–æ›´ç”šä¹‹)</li>
</ol>
<p>ä¸ºäº†ç³»ç»ŸåŒ–åœ°å®Œæˆè®¾è®¡ï¼Œç‰¹åˆ«éœ€è¦ä¸€äº›æ¨¡å—åŒ–ç­–ç•¥ã€‚æ¨¡å—åŒ–å°±æ˜¯æŠŠå¤æ‚ç³»ç»Ÿåˆ†è§£ä¸ºä¸€äº›è¾¹ç•Œæ¸…æ™°ã€æ˜“äºç‹¬ç«‹ç†è§£çš„éƒ¨åˆ†ï¼›æ¯ä¸ªéƒ¨åˆ†çš„å†…éƒ¨æˆåˆ†ä¹‹é—´å…³ç³»è¾ƒå¯†åˆ‡ï¼Œå†…èšåŠ›å¼º;ä¸åŒéƒ¨åˆ†å…·æœ‰è‰¯ å¥½çš„åŠŸèƒ½åˆ†ç¦»ï¼Œç›¸äº’ä¹‹é—´çš„äº¤äº’æ¸…æ™°ã€å®¹æ˜“è®¤è¯†å’Œå¤„ç†ï¼›è‰¯å¥½æ¨¡å—åŒ–åˆ†è§£å‡ºçš„éƒ¨åˆ†å¯ä»¥åˆ†åˆ«è®¾è®¡ï¼Œåˆ†åˆ«å¼€å‘å’Œç»´æŠ¤ã€‚</p>
<p>å‡è®¾æ„é€ ä¸€ä¸ªç³»ç»Ÿçš„ç›®æ ‡æ˜¯å¸Œæœ›æ¨¡æ‹Ÿä¸€ä¸ªçœŸå®ä¸–ç•Œçš„ç³»ç»Ÿï¼Œä¸€ç§æœ‰æ•ˆç­–ç•¥å°±æ˜¯<code>åŸºäºè¢«æ¨¡æ‹Ÿç³»ç»Ÿçš„ç»“æ„</code>å»è®¾è®¡ç¨‹åºçš„ç»“æ„ã€‚è¿™ä¸»è¦åŒ…æ‹¬ä¸‹é¢ä¸‰ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>é’ˆå¯¹å®é™…ç‰©ç†ç³»ç»Ÿä¸­çš„æ¯ä¸ªå¯¹è±¡ï¼Œæ„é€ ä¸€ä¸ªå¯¹åº”çš„ç¨‹åºå¯¹è±¡</li>
<li>é’ˆå¯¹å®é™…ç³»ç»Ÿé‡Œçš„æ¯ç§æ´»åŠ¨ï¼Œåœ¨è®¡ç®—ç³»ç»Ÿé‡Œå®ç°ä¸€ç§å¯¹åº”æ“ä½œ</li>
<li>è®©æ‰€å¼€å‘çš„ç³»ç»Ÿçš„æ´»åŠ¨æ¯”è¾ƒç›´æ¥åœ°åæ˜ è¢«æ¨¡æ‹Ÿç³»ç»Ÿçš„æ´»åŠ¨</li>
</ol>
<p>é‡‡ç”¨è¿™ç§è®¾è®¡ç³»ç»Ÿç­–ç•¥ï¼Œæœ‰ä¸€ä¸ªé‡è¦é—®é¢˜å¿…é¡»è€ƒè™‘ï¼š</p>
<blockquote>
<p>çœŸå®ä¸–ç•Œçš„ç³»ç»Ÿæ˜¯å˜åŒ–çš„ï¼ˆç›¸åº”çš„ï¼Œäººçš„è®¤è¯†ä¹Ÿä¸æ–­æ·±å…¥ï¼‰</p>
</blockquote>
<p>è¿™äº›å˜åŒ–åœ¨äººå·¥ç³»ç»Ÿé‡Œçš„åæ˜ ï¼Œé€šå¸¸æ˜¯éœ€è¦åœ¨ç³»ç»Ÿé‡Œå¢åŠ æ–°å¯¹è±¡æˆ–æ–°æ“ä½œï¼Œæˆ–è€…éœ€è¦ä¿®æ”¹å·²æœ‰å¯¹è±¡å’Œæ“ä½œçš„è¡Œä¸ºã€‚</p>
<p>ä¸ºäº†æœ‰æ•ˆå®Œæˆæ¨¡æ‹Ÿï¼Œæˆ‘ä»¬å¸Œæœ›æ„é€ å‡ºçš„æ¨¡æ‹Ÿç³»ç»Ÿåœ¨é‡åˆ°å˜åŒ–æ—¶ï¼Œåšåˆ°ä¸‹é¢ä¸¤ç‚¹ï¼š</p>
<ol>
<li>åœ¨ä¿®æ”¹æ—¶åªéœ€è¦å±€éƒ¨åšï¼Œä¸éœ€è¦å¤§èŒƒå›´æ”¹å˜ç¨‹åº</li>
<li>åœ¨æ‰©å……æ—¶åªéœ€ç®€å•åŠ å…¥å¯¹è±¡æˆ–æ“ä½œï¼Œå±€éƒ¨ä¿®æ”¹/åŠ å…¥ç›¸å…³æ“ä½œ</li>
</ol>
<h2 id="è®¾è®¡ç­–ç•¥"><a href="#è®¾è®¡ç­–ç•¥" class="headerlink" title="è®¾è®¡ç­–ç•¥"></a>è®¾è®¡ç­–ç•¥</h2><p>æœ¬ç« é’ˆå¯¹ä¸Šè¿°ç›®æ ‡ï¼Œå°†è®¨è®ºä¸¤ç§ç³»ç»Ÿçš„ç»„ç»‡ç­–ç•¥ï¼š</p>
<ol>
<li>æŠŠç³»ç»Ÿçœ‹æˆæ˜¯ç”±ä¸€æ‰¹ç›¸äº’ä½œç”¨çš„å¯¹è±¡ç»„æˆ<blockquote>
<p>çœŸå®ç³»ç»Ÿä¸­çš„å¯¹è±¡éšç€æ—¶é—´çš„è¿›å±•ä¸æ–­å˜åŒ–ï¼Œæ¨¡æ‹Ÿå®ƒä»¬çš„ç³»ç»Ÿå¯¹è±¡ä¹Ÿå¸å¼•ç›¸åº”åœ°å˜åŒ–</p>
</blockquote>
</li>
<li>æŠŠç³»ç»Ÿçœ‹ä½œä¸€ç§ä¿¡å·å¤„ç†ç³»ç»Ÿ<blockquote>
<p>å…³æ³¨æµè¿‡ç³»ç»Ÿçš„ä¿¡æ¯æµ</p>
</blockquote>
</li>
</ol>
<h2 id="åŸºäºå¯¹è±¡çš„è®¾è®¡"><a href="#åŸºäºå¯¹è±¡çš„è®¾è®¡" class="headerlink" title="åŸºäºå¯¹è±¡çš„è®¾è®¡"></a>åŸºäºå¯¹è±¡çš„è®¾è®¡</h2><p>åŸºäºå¯¹è±¡ï¼Œéœ€è¦å…³æ³¨è®¡ç®—å¯¹è±¡å¯ä»¥æ€æ ·å˜åŒ–è€ŒåˆåŒæ—¶ä¿æŒå…¶æ ‡è¯†ã€‚è¿™æ˜¯ä¸€ç§æ–°çš„è®¡ç®—æ¨¡å‹ï¼Œå¸¦æ¥è®¸å¤šæœ¬è´¨æ€§å˜åŒ–ï¼ŒåŒ…æ‹¬æœ‰å…³è®¡ç®—çš„åŸºæœ¬è§‚ç‚¹ï¼ŒåŸºæœ¬æ“ä½œï¼ŒæŠ½è±¡çš„è®¡ç®—æ¨¡å‹åŠå…¶å®ç°ã€‚</p>
<h3 id="èµ‹å€¼"><a href="#èµ‹å€¼" class="headerlink" title="èµ‹å€¼"></a>èµ‹å€¼</h3><p>ä¸ºäº†è¯´æ¸…æ¥šè®©ä¸€ä¸ªè®¡ç®—å¯¹è±¡å…·æœ‰éšæ—¶é—´å˜åŒ–çŠ¶æ€ï¼Œè´¯ç©¿æœ¬ç« çš„ä¾‹å­æ˜¯ï¼šé“¶è¡Œè´¦å·ã€‚ä¸€ä¸ªè´¦å·å¯¹äºæˆ‘ä»¬ç³»ç»Ÿè®¾è®¡ä¸­çš„ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹åŒä¸€ä¸ªå¯¹è±¡è°ƒç”¨åŒä¸€æ–¹æ³•ï¼Œè¿”å›çš„ç»“æœç¼ºä¸ä¸€è‡´ã€‚ä¾‹å¦‚ï¼Œå‡è®¾å¼€å§‹æ—¶è´¦æˆ·æœ‰100å…ƒé’±ï¼Œåœ¨ä¸æ–­è°ƒç”¨â€œå–é’±â€è¿‡ç¨‹æ—¶ï¼Œå¾—åˆ°ç»“æœæ˜¯ä¸ä¸€æ ·çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(withdraw 25)</div><div class="line">75</div><div class="line">(withdraw 25)</div><div class="line">50</div><div class="line">(withdraw 60)</div><div class="line">&quot;Insufficient funds&quot;</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·çš„è®¡ç®—æ¨¡å‹å¦‚æœä½¿ç”¨ç¬¬ä¸€ç« ä»‹ç»çš„<code>æ›¿æ¢è®¡ç®—æ¨¡å‹</code>ï¼Œæ˜¯ä¸å¯èƒ½åšåˆ°çš„ï¼Œä¸ºæ­¤ï¼Œæœ¬ç« å¼•å…¥äº†ä¸€æ–°çš„è®¡ç®—æ¨¡å‹ï¼Œåœ¨è¯¥æ¨¡å‹ä¸­ï¼Œå˜é‡ä¸åœ¨ä»…ä»…æ˜¯æŸä¸ªå€¼çš„åå­—ï¼Œæ›´å‡†ç¡®çš„è¯´ï¼Œæ­¤æ—¶çš„å˜é‡æ ‡è¯†äº†ä¸€ä¸ªå€¼çš„åœ°å€ï¼Œè¿™å¾ˆåƒ Cè¯­è¨€ä¸­çš„æŒ‡é’ˆï¼Œé¢å‘å¯¹è±¡ä¸­çš„å€¼å¼•ç”¨ã€‚</p>
<h3 id="ç¯å¢ƒè®¡ç®—æ¨¡å‹"><a href="#ç¯å¢ƒè®¡ç®—æ¨¡å‹" class="headerlink" title="ç¯å¢ƒè®¡ç®—æ¨¡å‹"></a>ç¯å¢ƒè®¡ç®—æ¨¡å‹</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">(define (make-withdraw balance)</div><div class="line">  (lambda (amount)</div><div class="line">    (if (&gt; amount balance)</div><div class="line">      &quot;Insufficient&quot;</div><div class="line">      (begin</div><div class="line">        (set! balance (- balance amount))</div><div class="line">        balance))))</div><div class="line"></div><div class="line">(define W1 (make-withdraw 100))</div><div class="line">(W1 50)</div></pre></td></tr></table></figure>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2WwebiVXXXXcxXXXXXXXXXXXX_!!581166664.png" alt="(define W1 (make-withdraw 100))çš„ç¯å¢ƒæ¨¡å‹"><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2mo5iiVXXXXa.XXXXXXXXXXXX_!!581166664.png" alt="(W1 50)çš„ç¯å¢ƒæ¨¡å‹"><br></center>

<p>å…³äºç¯å¢ƒè®¡ç®—æ¨¡å‹ï¼Œæ ¸å¿ƒç‚¹å°±ä¸¤ä¸ªï¼š</p>
<ol>
<li>è¿‡ç¨‹å£°æ˜æ—¶ï¼Œå…¶å¤–å›´æŒ‡é’ˆæŒ‡å‘å…¶è¿è¡Œæ—¶çš„ç¯å¢ƒ</li>
<li>è¿‡ç¨‹è°ƒç”¨æ—¶ï¼Œå…¶å¤–å›´æŒ‡é’ˆæŒ‡å‘å£°æ˜æ—¶å¤–å›´æŒ‡é’ˆæŒ‡å‘çš„é‚£ä¸ªç¯å¢ƒ</li>
</ol>
<p>æˆ‘è‡ªå·±å°è¯•ç€ç”¨ Java å®ç°äº†ä¸€ä¸ª <a href="https://github.com/jiacai2050/JCScheme" target="_blank" rel="external">Scheme æ–¹è¨€</a>ï¼Œå…¶ä¸­å¯¹è¿™ä¸ªç¯å¢ƒæ¨¡å‹ä¹Ÿè¿›è¡Œäº†æ¨¡æ‹Ÿï¼Œå¤§å®¶ä¸æ¸…æ¥šçš„å¯ä»¥çœ‹çœ‹æˆ‘<a href="/blog/2015/10/03/first-toy-scheme/#ä½œç”¨åŸŸ">è¿™ç¯‡æ–‡ç« </a>çš„ä»‹ç»ã€‚</p>
<h2 id="ç”¨å˜åŠ¨çš„æ•°æ®åšæ¨¡æ‹Ÿ"><a href="#ç”¨å˜åŠ¨çš„æ•°æ®åšæ¨¡æ‹Ÿ" class="headerlink" title="ç”¨å˜åŠ¨çš„æ•°æ®åšæ¨¡æ‹Ÿ"></a>ç”¨å˜åŠ¨çš„æ•°æ®åšæ¨¡æ‹Ÿ</h2><p>åœ¨å‰ä¸¤ç« ä¸­ï¼Œæ²¡æœ‰èµ‹å€¼çš„æ¦‚å¿µï¼Œé‚£æ—¶å¯¹äºä¸€ç§æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åªéœ€æ˜ç¡®å…¶<code>æ„é€ å‡½æ•°</code>ä¸<code>é€‰æ‹©å‡½æ•°</code>å³å¯ä½¿ç”¨è¯¥æ•°æ®ç»“æ„ï¼Œåœ¨ä¹‹å‰ä¸¤ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†â€œè¡¨â€ã€â€œæ ‘â€è¿™ä¸¤ç§æ•°æ®ç»“æ„ï¼Œå¼•å…¥äº†èµ‹å€¼åï¼Œä¸€ä¸ªæ•°æ®ç»“æ„å¤šäº†ä¸€ç§å‡½æ•°ï¼Œå³<code>ä¿®æ”¹å‡½æ•°</code>ï¼Œåˆ©ç”¨ä¿®æ”¹å‡½æ•°ï¼Œ3.3 å°èŠ‚ä»‹ç»äº†â€œå˜åŠ¨çš„è¡¨â€ã€â€œé˜Ÿåˆ—â€ã€â€œè¡¨æ ¼â€ä¸‰ç§æ–°çš„æ•°æ®ç»“æ„ã€‚</p>
<h3 id="å˜åŠ¨çš„è¡¨"><a href="#å˜åŠ¨çš„è¡¨" class="headerlink" title="å˜åŠ¨çš„è¡¨"></a>å˜åŠ¨çš„è¡¨</h3><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2f4qciVXXXXcIXXXXXXXXXXXX_!!581166664.png" alt="(cons (list 'a 'b) (list 'a 'b)) çš„ç›’æ¨¡å‹"><br></center>

<p>å˜åŠ¨çš„è¡¨è¿™ä¸€æ•°æ®ç»“æ„ï¼Œä¸»è¦æ˜¯å€ŸåŠ©<code>set!</code>ï¼Œå®ç°äº†<code>set-car!</code>ä¸<code>set-cdr!</code>ï¼Œè¿›è€Œå¯ä»¥å®ç°å˜åŠ¨çš„è¡¨ï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.19.md" target="_blank" rel="external">ä¹ é¢˜3.19</a>ï¼Œè®©æˆ‘ä»¬åœ¨<code>O(1)</code>ç©ºé—´å¤æ‚åº¦æ£€æŸ¥ä¸€ä¸ªè¡¨ä¸­æ˜¯å¦åŒ…å«ç¯ï¼Œè¿™ä¹Ÿæ˜¯é¢è¯•é¢˜ä¸­ç»å¸¸å‡ºç°çš„ä¸€é“ï¼Œå¤§å®¶ä¸€å®šè¦æŒæ¡ã€‚åŸºæœ¬æ€è·¯å°±æ˜¯</p>
<blockquote>
<p>è®¾ç½®ä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸€ä¸ªä¸€æ¬¡èµ°ä¸€æ­¥ï¼Œå¦ä¸€ä¸ªä¸€æ¬¡èµ°ä¸¤æ­¥ï¼Œç„¶åå¦‚æœä¸¤ä¸ªæŒ‡é’ˆç›¸ç­‰ï¼Œé‚£ä¹ˆå°±è¯´æ˜æœ‰ç¯å­˜åœ¨ã€‚</p>
</blockquote>
<p>æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœä¸€ä¸ªè¡¨ä¸­æœ‰ç¯çš„å­˜åœ¨ï¼Œå¦‚ä½•æ‰¾å‡ºé‚£ä¸ªç¯çš„äº¤å‰ç‚¹ï¼ˆå³å¦‚ä½•æ‰¾å‡ºä¸‹å›¾ä¸­çš„<code>m</code>ç‚¹ï¼‰ã€‚å¦‚æœä¸æ¸…æ¥šï¼Œå¯ä»¥å‚è€ƒæˆ‘<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.19.md" target="_blank" rel="external">ä¹ é¢˜3.19</a> çš„è§£ç­”ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2kxxRiVXXXXXmXFXXXXXXXXXX_!!581166664.png" alt="ç¯äº¤å‰ç‚¹æ£€æµ‹"><br></center>

<h3 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h3><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB27OhWiVXXXXcjXpXXXXXXXXXX_!!581166664.png" alt="å¸¦é¦–å°¾æŒ‡é’ˆçš„é˜Ÿåˆ—"><br></center>

<p>é˜Ÿåˆ—æ˜¯ä¸€ä¸ªâ€œå…ˆè¿›å…ˆå‡ºâ€çš„æ•°æ®ç»“æ„ï¼Œè¿™é‡Œä¸»è¦æ˜¯å¼•å…¥é¦–å°¾æŒ‡é’ˆçš„æ€æƒ³æ¥åŠ é€Ÿå¯¹é˜Ÿåˆ—æœ«ç«¯çš„è®¿é—®ã€‚é˜Ÿåˆ—çš„å®ç°å¯ä»¥å‚è€ƒæˆ‘ Github åº“çš„<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/lib/queue.scm" target="_blank" rel="external">/exercises/03/lib/queue.scm</a>ã€‚<br>å…¶ä¸­<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.23.md" target="_blank" rel="external">ä¹ é¢˜3.23</a>è®©æˆ‘ä»¬å®ç°ä¸€åŒå‘é“¾è¡¨ï¼Œä¸€ç§å¾ˆå®ç”¨çš„é˜Ÿåˆ—çš„å˜ç§ï¼Œå¤§å®¶ä¸€å®šè¦è‡ªå·±åšä¸€ä¸‹ã€‚</p>
<h3 id="è¡¨æ ¼"><a href="#è¡¨æ ¼" class="headerlink" title="è¡¨æ ¼"></a>è¡¨æ ¼</h3><p>è¿™é‡Œçš„è¡¨æ ¼å’Œæˆ‘ä»¬Javaä¸­çš„Mapã€Pythonä¸­çš„dictç±»å‹æ¯”è¾ƒç±»ä¼¼ã€‚</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i1/581166664/TB2G54UiVXXXXcNXpXXXXXXXXXX_!!581166664.png" alt="äºŒç»´è¡¨"><br></center>

<p>å…¶ä¸­æ¯”è¾ƒæœ‰æ„æ€å¯¹æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.25.md" target="_blank" rel="external">ä¹ é¢˜3.25</a>ï¼Œè®©æˆ‘ä»¬æ¨å¹¿ä¸€ç»´è¡¨æ ¼ã€äºŒç»´è¡¨æ ¼çš„æ¦‚å¿µï¼Œå®ç°ä»»æ„å¤šä¸ªå…³é”®ç çš„è¡¨æ ¼ï¼Œæ¯”è¾ƒæœ‰è¶£ã€‚</p>
<h3 id="æ•°å­—ç”µè·¯çš„æ¨¡æ‹Ÿå™¨"><a href="#æ•°å­—ç”µè·¯çš„æ¨¡æ‹Ÿå™¨" class="headerlink" title="æ•°å­—ç”µè·¯çš„æ¨¡æ‹Ÿå™¨"></a>æ•°å­—ç”µè·¯çš„æ¨¡æ‹Ÿå™¨</h3><p>è¿™æ˜¯æœ¬ç« ä¸€ä¸ªæ¯”è¾ƒå®é™…çš„ä¾‹å­ï¼Œå…¶èƒŒæ™¯æ˜¯</p>
<blockquote>
<p>æ•°å­—ç³»ç»Ÿï¼ˆåƒè®¡ç®—æœºï¼‰éƒ½æ˜¯é€šè¿‡è¿æ¥ä¸€äº›ç®€å•å…ƒä»¶æ„é€ èµ·æ¥çš„ï¼Œè¿™äº›å…ƒä»¶å•ç‹¬çœ‹èµ·æ¥åŠŸèƒ½éƒ½å¾ˆç®€å•ï¼Œå®ƒä»¬è¿æ¥èµ·æ¥å½¢æˆçš„ç½‘ç»œå°±å¯èƒ½äº§ç”Ÿéå¸¸å¤æ‚çš„è¡Œä¸ºã€‚</p>
</blockquote>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2O48ZiVXXXXcnXpXXXXXXXXXX_!!581166664.png" alt="åŠåŠ å™¨ç”µè·¯"><br></center>

<p>ä»ä¸Šé¢è¿™ä¸ªåŠåŠ å™¨å¯ä»¥çœ‹å‡º</p>
<blockquote>
<p>ç”±äºå„ä¸ªé—¨éƒ¨ä»¶å»¶è¿Ÿçš„å­˜åœ¨ï¼Œä½¿å¾—è¾“å‡ºå¯èƒ½åœ¨ä¸åŒçš„æ—¶é—´äº§ç”Ÿï¼Œæœ‰å…³æ•°å­—ç”µè·¯çš„è®¾è®¡çš„è®¸å¤šå›°éš¾éƒ½æºäºæ­¤ã€‚</p>
</blockquote>
<p>è¿™é‡Œçš„æ¨¡æ‹Ÿå™¨ä¸»è¦åŒ…å«ä¸‹é¢ä¸¤éƒ¨åˆ†ï¼š</p>
<ol>
<li>æ„é€ ç”µè·¯çš„åŸºæœ¬æ„ä»¶ï¼Œåƒåé—¨ã€ä¸é—¨ã€æˆ–é—¨</li>
<li>ä¼ é€’æ•°å­—ä¿¡å·çš„è¿çº¿</li>
</ol>
<p>é™¤äº†ä¸Šé¢ä¸¤éƒ¨åˆ†ï¼Œä¸ºäº†æ¨¡æ‹Ÿé—¨éƒ¨ä»¶å»¶æ—¶çš„æ•ˆæœï¼Œæœ¬ç³»ç»Ÿå¼•å…¥å¾…å¤„ç†è¡¨ã€‚è¿™ä¸‰éƒ¨åˆ†éƒ½æ˜¯ç”¨Schemeçš„è¿‡ç¨‹å®ç°ï¼Œç”¨å†…éƒ¨çŠ¶æ€è¡¨ç¤ºè¯¥å¯¹è±¡çš„æ”¹å˜ï¼Œå…·ä½“ä»£ç å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/lib/simulator.scm" target="_blank" rel="external">simulator.scm</a>ã€‚</p>
<p>å…¶ä¸­æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.31.md" target="_blank" rel="external">ä¹ é¢˜3.31</a>ï¼Œå¤§å®¶å¯ä»¥å¥½å¥½æƒ³æƒ³ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(define (accept-action-procedure! proc)</div><div class="line">  (set! action-procedures (cons proc action-procedures))</div><div class="line">  ; è¿™é‡Œå°† proc åŠ å…¥åï¼Œç«‹å³æ‰§è¡Œäº† procï¼Œä¸ºä»€ä¹ˆï¼Ÿ è§ä¹ é¢˜3.31</div><div class="line">  (proc))</div></pre></td></tr></table></figure></p>
<h3 id="çº¦æŸçš„ä¼ æ’­"><a href="#çº¦æŸçš„ä¼ æ’­" class="headerlink" title="çº¦æŸçš„ä¼ æ’­"></a>çº¦æŸçš„ä¼ æ’­</h3><p>æœ¬ç« å¦ä¸€ä¸ªæ¯”è¾ƒå®ç”¨çš„ä¾‹å­ï¼Œä¹‹å‰æˆ‘ä»¬çš„è¿‡ç¨‹éƒ½æ˜¯å•å‘ï¼Œæˆ‘ä»¬åªèƒ½é€šè¿‡ä¸€ä¸ªè¿‡ç¨‹çš„è¾“å…¥è·å¾—å…¶è¾“å‡ºï¼Œä½†æ˜¯è¿™é‡Œç»™æˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•æ„å»ºä¸€ä¸ªçº¦æŸç³»ç»Ÿï¼Œæ˜¯çš„æˆ‘ä»¬å¯ä»¥ä»ä»»æ„æ–¹å‘æ±‚è¿‡ç¨‹çš„æœªçŸ¥æ•°çš„å€¼ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2jEGbiVXXXXXDXpXXXXXXXXXX_!!581166664.png" alt="9C = 5(F-32) å½¢æˆçš„çº¦æŸç½‘ç»œ"><br></center>

<p>åœ¨è®²è§£è¿™ä¸ªå®ä¾‹æ—¶ï¼Œ3.3.5å°èŠ‚å¼•å…¥ä¸€æ–°è¯­è¨€çš„è®¾è®¡ï¼Œè¿™ç§è¯­è¨€å°†ä½¿æˆ‘ä»¬å¯ä»¥åŸºäºå„ç§å…³ç³»è¿›è¡Œå·¥ä½œã€‚</p>
<p>æˆ‘ä»¬åœ¨ç¬¬ä¸€ç« é‡Œé¢å°±çŸ¥é“äº†ï¼Œä»»ä½•ä¸€é—¨è¯­è¨€éƒ½å¿…é¡»æä¾›ä¸‰ç§æœºåˆ¶ï¼š<code>åŸºæœ¬è¡¨è¾¾å½¢å¼</code>ã€<code>ç»„åˆçš„æ–¹æ³•</code>ä¸<code>æŠ½è±¡çš„æ–¹æ³•</code>ã€‚é’ˆå¯¹æœ¬ç³»ç»Ÿçš„è¯­è¨€çš„åŸºæœ¬å…ƒç´ å°±æ˜¯å„ç§<code>åŸºæœ¬çº¦æŸ</code>ï¼Œåƒ<code>adder</code>ã€<code>multiplier</code>ã€<code>constant</code>ã€‚ç”¨ Scheme è¿‡ç¨‹æ¥å®ç°åŸºæœ¬çº¦æŸä¹Ÿå°±è‡ªåŠ¨åœ°ä¸ºè¯¥æ–°è¯­è¨€æä¾›äº†ä¸€ç§å¤åˆå¯¹è±¡çš„æŠ½è±¡æ–¹å¼ã€‚</p>
<p>æ•´ä¸ªçº¦æŸç³»ç»Ÿï¼Œæˆ‘ä¸ªäººè§‰å¾—ä¸»è¦æ˜¯ç†è§£<code>process-forget-value</code>è¿‡ç¨‹ä¸­ä¸ºä»€ä¹ˆè¦è°ƒç”¨<code>process-new-value</code>ï¼Œè¿™æ˜¯ä¸²è”èµ·æ•´ä¸ªçº¦æŸç³»ç»Ÿå¾ˆé‡è¦çš„ä¸€æ­¥ã€‚ä¹¦ä¸Šæ˜¯è¿™ä¹ˆè§£é‡Šçš„ï¼š</p>
<blockquote>
<p>åªæ‰€ä»¥éœ€è¦è¿™ä¸€æ­¥ï¼Œæ˜¯å› ä¸ºè¿˜å¯èƒ½æœ‰äº›è¿æ¥å™¨ä»ç„¶æœ‰è‡ªå·±çš„å€¼ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒæŸä¸ªè¿æ¥å™¨è¿‡å»æ‰€æ‹¥æœ‰çš„å€¼åŸæ¥å°±ä¸æ˜¯ç”±å½“å‰å¯¹è±¡è®¾ç½®çš„ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">; adder ä¸­ process-forget-value çš„å®ç°</div><div class="line">(define (process-forget-value)</div><div class="line">  (forget-value! sum me)</div><div class="line">  (forget-value! a1 me)</div><div class="line">  (forget-value! a2 me)</div><div class="line">  ; TODO ä¸ºä»€ä¹ˆéœ€è¦ç†è§£æ‰§è¡Œ process-new-value</div><div class="line">  (process-new-value))</div></pre></td></tr></table></figure></p>
</blockquote>
<p>æ•´ä¸ªçº¦æŸç³»ç»Ÿçš„ä»£ç å¯ä»¥åœ¨<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/lib/propagation.scm" target="_blank" rel="external">propagation.scm</a>æ‰¾åˆ°ã€‚</p>
<h2 id="å¹¶å‘ï¼Œæ—¶é—´æ˜¯ä¸€ä¸ªæœ¬è´¨é—®é¢˜"><a href="#å¹¶å‘ï¼Œæ—¶é—´æ˜¯ä¸€ä¸ªæœ¬è´¨é—®é¢˜" class="headerlink" title="å¹¶å‘ï¼Œæ—¶é—´æ˜¯ä¸€ä¸ªæœ¬è´¨é—®é¢˜"></a>å¹¶å‘ï¼Œæ—¶é—´æ˜¯ä¸€ä¸ªæœ¬è´¨é—®é¢˜</h2><p>è¿™ä¸€å°èŠ‚ä¸»è¦è®²è§£å¼•å…¥<code>èµ‹å€¼</code>è¿™ä¸€è¡Œä¸ºåï¼Œå¹¶å‘ç¨‹åºå¯èƒ½å‡ºç°çš„é—®é¢˜ï¼Œå…¶å®è¿™é‡Œçš„ä¸œè¥¿æˆ‘ä»¬åœ¨å¹³å¸¸çš„ç¼–ç¨‹ä¸­å¤šå¤šå°‘å°‘æœ‰äº›äº†è§£ï¼Œä¸»è¦æ˜¯å¦‚ä½•ä¿è¯æ“ä½œçš„åŸå­æ€§ã€‚</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2lzajiVXXXXcHXXXXXXXXXXXX_!!581166664.png" alt="Peterä¸PaulåŒæ—¶å–åŒä¸€ä¸ªè´¦æˆ·çš„ä¸€ç§åœºæ™¯"><br></center><br>ä¿è¯æ“ä½œçš„åŸå­æ€§ï¼Œè¿™é‡Œè§£é‡Šäº†ä¸€ç§æ–¹å¼â€”â€”ä¸²è¡ŒåŒ–ç»„ï¼ˆserializerï¼‰ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬ Java é‡Œé¢çš„ synchronized çš„å…³é”®å­—çš„åŠŸèƒ½ã€‚<br>ä¿è¯ä¸€ä¸ªå¯¹è±¡çš„åŸå­æ€§è¿˜æ¯”è¾ƒå¥½è§£å†³ï¼Œä½†æ˜¯ä¿è¯å¤šä¸ªå¯¹è±¡é—´äº¤äº’çš„åŸå­æ€§å°±æ¯”è¾ƒéº»çƒ¦äº†ï¼Œä¹¦ä¸Šç”¨ä»ä¸€ä¸ªè´¦æˆ·å‘å¦ä¸€ä¸ªè´¦æˆ·è½¬è´¦è¿™ä¸ªä¾‹å­è¯´æ˜äº†è¿™ç§æƒ…å†µã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">(define (serialized-exchange account1 account2)</div><div class="line">  (let ((serializer1 (account1 &apos;serializer))</div><div class="line">        (serializer2 (account2 &apos;serializer)))</div><div class="line">    ((serializer1 (serializer2 exchange)))</div><div class="line">      account1</div><div class="line">      account2))</div></pre></td></tr></table></figure></p>
<p>è¯¥ä¾‹å­å®Œæ•´ä»£ç å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/lib/serialized_exchange.scm" target="_blank" rel="external">serialized_exchange.scm</a>ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥ï¼Œå¦‚æœä¿è¯ n å¯¹è±¡é—´äº¤äº’çš„åŸå­æ€§å‘¢ï¼Ÿè¿™åº”è¯¥å°±æ˜¯ç°åœ¨æ¯”è¾ƒçƒ­é—¨çš„ä¸€é¢†åŸŸï¼šåˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œå¦‚ä½•ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ï¼Œåé¢æœ‰ç²¾åŠ›å¯ä»¥çœ‹çœ‹çœ‹ä¸šç•Œä½¿ç”¨æœ€å¹¿æ³›çš„ <a href="http://stackoverflow.com/questions/3662995/explaining-apache-zookeeper" target="_blank" rel="external">zookeeper çš„å®ç°åŸç†</a>ã€‚</p>
<p>ä¹¦ä¸Šè¿›ä¸€æ­¥æ‰©å±•ï¼Œè®²è¿°äº†å¹¶å‘é—®é¢˜ä¸ç‰©ç†å­¦çš„è”ç³»ã€‚æœ‰ç§å‘ç°ä¸€ä¸–ç•Œæœªè§£ä¹‹è°œçš„æ„Ÿè§‰ï¼Œæ‘˜æŠ„å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ä»æœ¬è´¨ä¸Šçœ‹ï¼Œåœ¨å¹¶å‘æ§åˆ¶ä¸­ï¼Œä»»ä½•æ—¶é—´æ¦‚å¿µéƒ½å¿…ç„¶ä¸é€šä¿¡æœ‰å†…åœ¨çš„å¯†åˆ‡è”ç³»ã€‚æœ‰æ„æ€çš„æ˜¯ï¼Œæ—¶é—´ä¸é€šä¿¡ä¹‹é—´çš„è¿™ç§è”ç³»ä¹Ÿå‡ºç°åœ¨ç›¸å¯¹è®ºé‡Œï¼Œåœ¨é‚£é‡Œçš„å…‰é€Ÿï¼ˆå¯èƒ½ç”¨äºåŒæ­¥äº‹ä»¶çš„æœ€å¿«ä¿¡å·ï¼‰æ˜¯ä¸æ—¶é—´å’Œç©ºé—´æœ‰å…³çš„åŸºæœ¬å¸¸é‡ã€‚åœ¨å¤„ç†æ—¶é—´å’ŒçŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬åœ¨è®¡ç®—æ¨¡å‹é¢†åŸŸæ‰€é­é‡çš„å¤æ‚æ€§ï¼Œäº‹å®ä¸Šï¼Œå¯èƒ½å°±æ˜¯ç‰©ç†ä¸–ç•Œä¸­æœ€åŸºæœ¬çš„å¤æ‚æ€§çš„ä¸€ç§åæ˜ ã€‚</p>
</blockquote>
<h2 id="æµ"><a href="#æµ" class="headerlink" title="æµ"></a>æµ</h2><p>æµæ˜¯å¦ä¸€ç§æ¨¡æ‹Ÿç°å®ç‰©ç†ä¸–ç•Œçš„è®¾è®¡ç­–ç•¥ï¼Œå…¶æ ¸å¿ƒæ€æƒ³å°±æ˜¯ç”¨æ•°å­¦æ¦‚å¿µä¸Šçš„å‡½æ•°æ¥è¡¨ç¤ºä¸€ç°å®ç‰©ä½“çš„æ”¹å˜ï¼Œæ¯”å¦‚å¯¹è±¡Xï¼Œå¯ä»¥ç”¨<code>X(t)</code>æ¥è¡¨ç¤ºï¼Œå¦‚æœæˆ‘ä»¬æƒ³é›†ä¸­å…³å¿ƒçš„æ˜¯ä¸€ä¸ªä¸ªæ—¶åˆ»çš„xï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†å®ƒçœ‹ä½œä¸€ä¸ªå˜åŒ–çš„é‡ã€‚å¦‚æœå…³æ³¨çš„æ˜¯è¿™äº›å€¼çš„æ•´ä¸ªæ—¶é—´å²ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦å¼ºè°ƒå…¶ä¸­çš„å˜åŒ–â€”â€”è¿™ä¸€å‡½æ•°æœ¬èº«æ˜¯æ²¡æœ‰æ”¹å˜çš„ã€‚</p>
<p>è¿™é‡Œæµï¼Œè¾ƒä¹‹å‰çš„è¡¨è€Œè¨€ï¼Œä¸»è¦æ˜¯å¼•å…¥<code>force</code>ã€<code>delay</code>ä¸¤ä¸ªè¿‡ç¨‹ï¼Œå°†å…¶å»¶æ—¶æ±‚å€¼ã€‚æœ‰äº†å»¶æ—¶æ±‚å€¼ï¼Œæˆ‘ä»¬å°±å¯ä»¥åšå¾ˆå¤šä¹‹å‰ä¸èƒ½åšçš„äº‹æƒ…ï¼Œæ¯”å¦‚å®ç°ä¸€ä¸ªè¡¨ç¤ºæ‰€æœ‰æ­£æ•´æ•°çš„æ— ç©·æµ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">; ç¬¬ä¸€ç§æ–¹å¼</div><div class="line">(define (integers-starting-from n)</div><div class="line">  (cons-stream n (integers-starting-from (+ n 1))))</div><div class="line">(define integers (integers-starting-from 1))</div><div class="line">; ç¬¬äºŒç§æ–¹å¼ï¼Œéšå¼å®šä¹‰</div><div class="line">(define ones (cons-stream 1 ones))</div><div class="line">(define (add-streams s1 s2)</div><div class="line">  (stream-map + s1 s2))</div><div class="line">(define integers2 (cons-stream 1 (add-streams ones integers2)))</div></pre></td></tr></table></figure></p>
<h3 id="æµè®¡ç®—æ¨¡å¼çš„ä½¿ç”¨"><a href="#æµè®¡ç®—æ¨¡å¼çš„ä½¿ç”¨" class="headerlink" title="æµè®¡ç®—æ¨¡å¼çš„ä½¿ç”¨"></a>æµè®¡ç®—æ¨¡å¼çš„ä½¿ç”¨</h3><p>æµæ–¹æ³•æå¯Œæœ‰å¯å‘æ€§ï¼Œå› ä¸ºå€ŸåŠ©äºå®ƒå»æ„é€ ç³»ç»Ÿæ—¶ï¼Œæ‰€ç”¨çš„æ¨¡å—åˆ’åˆ†æ–¹å¼å¯ä»¥ä¸é‡‡ç”¨èµ‹å€¼ï¼Œå›´ç»•ç€çŠ¶æ€å˜é‡ç»„ç»‡ç³»ç»Ÿçš„æ–¹å¼ä¸åŒã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ•´ä¸ªçš„æ—¶é—´åºåˆ—ä½œä¸ºæœ‰å…³çš„ç›®æ ‡ï¼Œè€Œä¸æ˜¯å»å…³æ³¨çŠ¶æ€å˜é‡åœ¨å„ä¸ªæ—¶åˆ»çš„å€¼ã€‚è¿™å°†ä½¿æˆ‘ä»¬æ›´æ–¹ä¾¿åœ°ç»„åˆä¸æ¯”è¾ƒæ¥è‡ªä¸åŒæ—¶åˆ»çš„çŠ¶æ€çš„ç»„åˆã€‚</p>
<h4 id="å°†è¿­ä»£æ“ä½œè¡¨ç¤ºä¸ºæµæ“ä½œ"><a href="#å°†è¿­ä»£æ“ä½œè¡¨ç¤ºä¸ºæµæ“ä½œ" class="headerlink" title="å°†è¿­ä»£æ“ä½œè¡¨ç¤ºä¸ºæµæ“ä½œ"></a>å°†è¿­ä»£æ“ä½œè¡¨ç¤ºä¸ºæµæ“ä½œ</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">; æ±‚è§£ä¸€ä¸ªæ•°çš„å¹³æ–¹</div><div class="line">(define (sqrt-stream x)</div><div class="line">  (define guesses</div><div class="line">    (cons-stream 1.0</div><div class="line">                 (stream-map (lambda (guess) (sqrt-improve guess x))</div><div class="line">                             guesses)))</div><div class="line">  guesses)</div><div class="line">; ç”± Ï€/4 = 1- 1/3 + 1/5 - 1/7 + ..... è®¡ç®— Ï€ çš„å€¼</div><div class="line">(define (pi-summands n)</div><div class="line">  (cons-stream (/ 1.0 n)</div><div class="line">               (stream-map - (pi-summands (+ n 2)))))</div><div class="line">(define (partial-sums s)</div><div class="line">  (cons-stream (stream-car s)</div><div class="line">               (add-streams (stream-cdr s)</div><div class="line">                            (partial-sums s))))</div><div class="line">(define pi-stream</div><div class="line">  (scale-stream (partial-sums (pi-summands 1)) 4))</div></pre></td></tr></table></figure>
<h4 id="åºå¯¹çš„æ— ç©·æµ"><a href="#åºå¯¹çš„æ— ç©·æµ" class="headerlink" title="åºå¯¹çš„æ— ç©·æµ"></a>åºå¯¹çš„æ— ç©·æµ</h4><p><center><br>  <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2UTipiVXXXXa5XXXXXXXXXXXX_!!581166664.png" alt="åºå¯¹(i,j)ï¼Œå¹¶ä¸”i<=j"><br></center><br>è¿™é‡Œä¸»è¦æ˜¯ç”Ÿäº§åºå¯¹<code>(i,j)</code>ï¼Œå¹¶ä¸”<code>i&lt;=j</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">(define (pairs s t)</div><div class="line">  (cons-stream</div><div class="line">    (list (stream-car s) (stream-car t))</div><div class="line">    (interleave</div><div class="line">      (stream-map (lambda (x) (list (stream-car s) x))</div><div class="line">                  (stream-cdr t))</div><div class="line">      (pairs (stream-cdr s) (stream-cdr t)))))</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/03/3.66.md" target="_blank" rel="external">ä¹ é¢˜3.66</a>ï¼Œè®©æˆ‘ä»¬è®¡ç®—æŸåºå¯¹åœ¨æµä¸­çš„ä½ç½®ï¼Œè¿™é¢˜æ„Ÿè§‰éœ€è¦å°†å¼ºçš„æ•°å­¦åŠŸåº•ã€‚</p>
<h4 id="å°†æµä½œä¸ºä¿¡å·"><a href="#å°†æµä½œä¸ºä¿¡å·" class="headerlink" title="å°†æµä½œä¸ºä¿¡å·"></a>å°†æµä½œä¸ºä¿¡å·</h4><p><center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2KcaeiVXXXXXtXpXXXXXXXXXX_!!581166664.png" alt="å°†ç§¯åˆ†è¿‡ç¨‹çœ‹ä½œä¿¡å·å¤„ç†ç³»ç»Ÿ"><br></center><br>è¿™é‡Œå……åˆ†åˆ©ç”¨æµå½“ä½œæŸç³»ç»Ÿçš„è¾“å…¥ä¿¡å·ï¼Œä½¿å¾—è¿™ä¸ªç³»ç»Ÿä¸æ–­è¿è½¬ä¸‹å»ã€‚</p>
<h3 id="æµçš„å¼Šç«¯"><a href="#æµçš„å¼Šç«¯" class="headerlink" title="æµçš„å¼Šç«¯"></a>æµçš„å¼Šç«¯</h3><p><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2o7KviVXXXXarXXXXXXXXXXXX_!!581166664.png" alt="ä¸€ä¸ªåˆç”¨è´¦æˆ·ï¼Œé€šè¿‡åˆå¹¶ä¸¤ä¸ªäº¤æ˜“è¯·æ±‚æµçš„æ–¹å¼æ¨¡æ‹Ÿ"><br></center><br>è¿™é‡Œè¿˜æ˜¯ç”¨ä¸¤ä¸ªç”¨æˆ·åŒæ—¶è®¿é—®ä¸€ä¸ªè´¦æˆ·ä¸ºä¾‹ã€‚å¤„ç†çš„éº»çƒ¦ä¹‹å¤„åœ¨äºå¦‚ä½•<strong>å½’å¹¶</strong>ä¸¤ä¸ªè¯·æ±‚æµã€‚è¿™é‡Œå¹¶ä¸èƒ½ç®€å•äº¤æ›¿åœ°ä»ä¸¤ä¸ªè¯·æ±‚æµå–ä¸€ä¸ªåœ°æ–¹å¼åˆå¹¶ï¼Œå› ä¸ºä¸¤ä¸ªç”¨æˆ·è®¿é—®è´¦æˆ·çš„é¢‘ç‡å¯èƒ½ä¸ä¸€æ ·ã€‚è¿™æ­£å¥½æ˜¯åœ¨å¹¶å‘ä¸­ä¸å¾—ä¸å»å¤„ç†çš„åŒä¸€ä¸ªçº¦æŸæ¡ä»¶ï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å‘ç°éœ€è¦å¼•è¿›æ˜¾å¼åŒæ­¥ï¼Œä»¥ä¿è¯åœ¨å¹¶å‘å¤„ç†å…·æœ‰çŠ¶æ€çš„å¯¹è±¡çš„è¿‡ç¨‹ä¸­ï¼Œå„ä¸ªäº‹ä»¶æ—¶æŒ‰ç…§â€œæ­£ç¡®â€é¡ºåºå‘ç”Ÿçš„ã€‚è¿™æ ·ï¼Œè™½ç„¶è¿™é‡Œè¯•å›¾æ”¯æŒå‡½æ•°å¼çš„é£æ ¼ï¼Œä½†åœ¨éœ€è¦å½’å¹¶æ¥è‡ªä¸åŒä¸»ä½“çš„è¾“å…¥æ—¶ï¼Œåˆè¦é‡æ–°å¼•å…¥å‡½æ•°å¼é£æ ¼ä¸­è‡´åŠ›äºæ¶ˆé™¤çš„åŒä¸€ä¸ªé—®é¢˜ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æœ¬ç« ä¸€å¼€å§‹å°±æå‡ºäº†å…¶ç›®æ ‡ï¼Œé‚£å°±æ˜¯æ„é€ ä¸€äº›è®¡ç®—æ¨¡å‹ï¼Œä½¿å…¶ç»“æ„èƒ½å¤Ÿç¬¦åˆæˆ‘ä»¬å¯¹äºè¯•å›¾å»æ¨¡æ‹Ÿçš„çœŸå®ä¸–ç•Œçš„çœ‹æ³•ã€‚æˆ‘ä»¬å­¦åˆ°äº†ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li>å°†è¿™ä¸€ä¸–ç•Œæ¨¡æ‹Ÿä¸ºä¸€é›†ç›¸äº’åˆ†ç¦»çš„ã€å—æ—¶é—´çº¦æŸçš„ã€å…·æœ‰çŠ¶æ€çš„ç›¸äº’äº¤æµçš„å¯¹è±¡</li>
<li>å°†å®ƒæ¨¡æ‹Ÿä¸ºå•ä¸€çš„ã€æ— æ—¶é—´ä¹Ÿæ— çŠ¶æ€çš„ç»Ÿä¸€ä½“</li>
</ol>
<p>æ¯ç§æ–¹å¼éƒ½å…·æœ‰å¼ºæœ‰åŠ›çš„ä¼˜åŠ¿ï¼Œä½†å°±å…¶è‡ªèº«è€Œè¨€ï¼Œæœ‰æ²¡æœ‰ä¸€ç§æ–¹å¼èƒ½å¤Ÿå®Œå…¨ä»¤äººæ»¡æ„ã€‚å¦‚ä½•æ•´åˆè¿™ä¸¤ä¸ªç³»ç»Ÿï¼Œæ˜¯ç°åœ¨ä¸€é‡è¦éš¾é¢˜ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†æ—¶ä¸‰ä¸ªæœˆï¼Œç»ˆäºæŠŠç¬¬ä¸‰ç« çœ‹å®Œäº†ã€‚è¿™ä¸‰æœˆå‘ç”Ÿäº†å¤ªå¤šçš„æ„å¤–ï¼Œæœ¬æ–‡ä¸æ‰“ç®—è¯´äº†ï¼Œåé¢åœ¨å†™ &lt;a href=&quot;/blog/2016/01/08/review-2015/#è¯»ä¹¦&quot;&gt;2015 å¹´ç»ˆæ€»ç»“&lt;/a&gt;æ—¶å†æ¥è°ˆè°ˆè¿™ä¸‰ä¸ªæœˆçš„äº‹æƒ…ã€‚å¦‚ä»Šå›è¿‡å¤´æ¥çœ‹çœ‹ç¬¬ä¸‰ç« çš„å†…å®¹ï¼Œå¥½åƒä¹Ÿä¸æ€ä¹ˆéš¾ï¼Œåªæ˜¯å†…å®¹
    
    </summary>
    
      <category term="ç ”ä¹ ç»å…¸" scheme="http://liujiacai.net/categories/%E7%A0%94%E4%B9%A0%E7%BB%8F%E5%85%B8/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>å­—ç¬¦ä¸²ï¼Œé‚£äº›ä½ ä¸çŸ¥é“çš„äº‹</title>
    <link href="http://liujiacai.net/blog/2015/11/20/strings/"/>
    <id>http://liujiacai.net/blog/2015/11/20/strings/</id>
    <published>2015-11-20T15:16:21.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘åœ¨çœ‹<a href="http://www.diveintopython3.net/strings.html" target="_blank" rel="external">ã€ŠDive Into Python 3ã€‹</a>ï¼Œç¬¬å››ç« è®²äº†å­—ç¬¦ä¸²ç›¸å…³çŸ¥è¯†ï¼Œçœ‹åæ‰å‘ç°ï¼Œå­—ç¬¦ä¸²è¿œæ¯”æˆ‘ä»¬æƒ³è±¡çš„è¦å¤æ‚å¤šã€‚å°±åƒè¯¥ä¹¦æ‰€è¯´çš„</p>
<blockquote>
<p>Everything you thought you knew about strings is wrong.</p>
</blockquote>
<p>æ˜¯çš„ï¼Œæˆ‘ä¹‹å‰å¯¹å­—ç¬¦ä¸²çš„ç†è§£éƒ½æ˜¯é”™çš„ã€‚</p>
<p>ä¹Ÿè®¸ä½ ä¼šè¯§å¼‚ï¼Œå­—ç¬¦ä¸²æœ‰ä»€ä¹ˆéš¾çš„ï¼Œå³ä¾¿é‡åˆ°ä¹±ç çš„æƒ…å†µéšä¾¿ Google ä¸‹å°±èƒ½æ‰¾åˆ°è§£å†³æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·ä½ ä¸è§‰å¾—æœ‰ç§è¢«åŠ¨çš„æ„Ÿè§‰å˜›ï¼Œæˆ‘è§‰å¾—å’Œå­¦ä¹ ä»»ä½•ä¸œè¥¿ä¸€æ ·ï¼Œå­¦ä¹ ç¼–ç¨‹é¦–è¦æ˜¯å­¦ä¹ å…¶æ€æƒ³ï¼ŒçŸ¥é“æŸäº‹ç‰©ä¸ºä»€ä¹ˆï¼ˆwhyï¼‰è¦è¿™ä¹ˆåšï¼Œè‡³äºå¦‚ä½•åšï¼ˆhowï¼‰é‚£åªæ˜¯å‰è¾ˆä»¬æå‡ºçš„è§£å†³æ–¹æ¡ˆï¼Œæˆ‘ä»¬å¯ä»¥å‚è€ƒï¼Œéšä¾¿æŒæ¡ä¸‹æ¥ã€‚</p>
<p>æœ¬æ–‡ä¸‹é¢é¦–å…ˆè®²è§£å­—ç¬¦ã€å­—ç¬¦ä¸²ã€ç¼–ç ã€ASCIIã€Unicodeã€UTF-8 ç­‰ä¸€äº›åŸºæœ¬æ¦‚å¿µï¼Œç„¶åä¼šä»‹ç»åœ¨ä½¿ç”¨è®¡ç®—æœºæ—¶æ˜¯å¦‚ä½•å¦‚ç¼–ç æ‰“äº¤é“çš„ï¼Œä¹Ÿå°±æ˜¯å®æˆ˜éƒ¨åˆ†ã€‚<br>å¸Œæœ›å¤§å®¶åœ¨é˜…è¯»å®Œæœ¬æ–‡åï¼Œéƒ½èƒ½å¯¹ string æœ‰ä¸€å…¨æ–°çš„è®¤è¯†ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆéœ€è¦å­—ç¬¦ç¼–ç "><a href="#ä¸ºä»€ä¹ˆéœ€è¦å­—ç¬¦ç¼–ç " class="headerlink" title="ä¸ºä»€ä¹ˆéœ€è¦å­—ç¬¦ç¼–ç "></a>ä¸ºä»€ä¹ˆéœ€è¦å­—ç¬¦ç¼–ç </h2><p>å½“æˆ‘ä»¬è°ˆåˆ°å­—ç¬¦ä¸²ï¼ˆstringæˆ–textï¼‰æ—¶ï¼Œä½ å¯èƒ½ä¼šæƒ³åˆ°â€œè®¡ç®—æœºå±å¹•ä¸Šçš„é‚£äº›å­—ç¬¦ï¼ˆcharactersï¼‰ä¸ç¬¦å·ï¼ˆsymbolsï¼‰â€ï¼Œä½ æ­£åœ¨é˜…è¯»çš„æ–‡ç« ï¼Œæ— éä¹Ÿæ˜¯ç”±ä¸€ä¸²å­—ç¬¦ç»„æˆçš„ã€‚ä½†æ˜¯ä½ ä¹Ÿè®¸ä¼šå‘ç°ï¼Œä½ æ— æ³•ç»™â€œå­—ç¬¦ä¸²â€ä¸€æ˜ç¡®å®šä¹‰ï¼Œä½†æ˜¯æˆ‘ä»¬å°±æ˜¯çŸ¥é“ï¼Œå°±åƒç»™ä½ ä¸€ä¸ªè‹¹æœï¼Œä½ èƒ½è¯´å‡ºå…¶åå­—ï¼Œä½†æ˜¯ä¸èƒ½ç»™å‡ºå‡†ç¡®å®šä¹‰ä¸€æ ·ã€‚è¿™ä¸ªé—®é¢˜å…ˆæ”¾ä¸€æ”¾ï¼Œåé¢æˆ‘å†è§£é‡Šã€‚</p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œè®¡ç®—æœºå¹¶ä¸èƒ½ç›´æ¥å¤„ç†æ“ä½œå­—ç¬¦ä¸ç¬¦å·ï¼Œå®ƒåªè®¤è¯† 0ã€1 è¿™ä¸¤ä¸ªæ•°å­—ï¼Œæ‰€ä»¥å¦‚æœæƒ³è®©è®¡ç®—æœºæ˜¾ç¤ºå„ç§å„æ ·çš„å­—ç¬¦ä¸ç¬¦å·ï¼Œå°±å¿…é¡»å®šä¹‰å®ƒä»¬ä¸æ•°å­—çš„ä¸€ä¸€æ˜ å°„å…³ç³»ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€ç†ŸçŸ¥çš„å­—ç¬¦ç¼–ç ï¼ˆcharacter encodingï¼‰ã€‚ä½ å¯ç®€å•çš„è®¤ä¸ºï¼Œå­—ç¬¦ç¼–ç ä¸ºè®¡ç®—æœºå±å¹•ä¸Šæ˜¾ç¤ºçš„å­—ç¬¦ä¸è¿™äº›å­—ç¬¦ä¿å­˜åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­çš„å½¢å¼æä¾›äº†ä¸€ç§æ˜ å°„å…³ç³»ã€‚å­—ç¬¦ç¼–ç çº·ç¹å¤æ‚ï¼Œæœ‰äº›ä¸“é—¨ä¸ºç‰¹å®šè¯­è¨€ä¼˜åŒ–ï¼Œåƒé’ˆå¯¹ç®€ä½“ä¸­æ–‡çš„ç¼–ç å°±æœ‰ <a href="https://en.wikipedia.org/wiki/Extended_Unix_Code#EUC-CN" target="_blank" rel="external">EUC-CN</a>ï¼Œ<a href="https://en.wikipedia.org/wiki/HZ_%28character_encoding%29" target="_blank" rel="external">HZ</a>ï¼›é’ˆå¯¹æ—¥æ–‡çš„<a href="https://en.wikipedia.org/wiki/Extended_Unix_Code#EUC-JP" target="_blank" rel="external">EUC-JP</a>ï¼Œé’ˆå¯¹è‹±æ–‡çš„ <a href="https://en.wikipedia.org/wiki/ASCII" target="_blank" rel="external">ASCII</a>ï¼›å¦ä¸€äº›ä¸“é—¨ç”¨äºå¤šè¯­è¨€ç¯å¢ƒï¼Œåƒåé¢è¦è®²åˆ°çš„ <a href="https://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="external">UTF-8</a>ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥æŠŠ<strong>å­—ç¬¦ç¼–ç </strong>çœ‹ä½œä¸€ç§è§£å¯†å¯†é’¥ï¼ˆdecryption keyï¼‰ï¼Œå½“æˆ‘ä»¬æ”¶åˆ°ä¸€æ®µå­—èŠ‚æµæ—¶ï¼Œæ— è®ºæ¥è‡ªæ–‡ä»¶è¿˜æ˜¯ç½‘ç»œï¼Œå¦‚æœæˆ‘ä»¬çŸ¥é“å®ƒæ˜¯â€œæ–‡æœ¬ï¼ˆtextï¼‰â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çŸ¥é“é‡‡ç”¨ä½•ç§å­—ç¬¦ç¼–ç æ¥<strong>è§£ç </strong>è¿™äº›å­—èŠ‚æµï¼Œå¦åˆ™ï¼Œæˆ‘ä»¬å¾—åˆ°çš„åªæ˜¯ä¸€å †æ— æ„ä¹‰çš„ç¬¦å·ï¼Œåƒ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ã€‚</p>
<h3 id="å•å­—èŠ‚ç¼–ç "><a href="#å•å­—èŠ‚ç¼–ç " class="headerlink" title="å•å­—èŠ‚ç¼–ç "></a>å•å­—èŠ‚ç¼–ç </h3><p>è®¡ç®—æœºæœ€æ—©èµ·æºäºä»¥è‹±æ–‡ä¸ºæ¯è¯­çš„ç¾å›½ï¼Œè‹±æ–‡ä¸­çš„ç¬¦å·æ¯”è¾ƒå°‘ï¼Œç”¨ä¸ƒä¸ªäºŒè¿›åˆ¶ä½å°±è¶³ä»¥è¡¨ç¤ºï¼Œç°åœ¨æœ€å¸¸è§ä¹Ÿæ˜¯æœ€æµè¡Œçš„è«è¿‡äº ASCII ç¼–ç ï¼Œè¯¥ç¼–ç ä½¿ç”¨ 0 åˆ° 127 ä¹‹é—´çš„æ•°å­—æ¥å­˜å‚¨å­—ç¬¦ï¼ˆ65è¡¨ç¤ºâ€œAâ€ï¼Œ97è¡¨ç¤ºâ€œaâ€ï¼‰ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2uLAFhpXXXXXZXXXXXXXXXXXX_!!581166664.png_620x10000.jpg" alt=" ASCII_Code_Chart-Quick_ref_card"><br></center><br>æˆ‘ä»¬çŸ¥é“ä¸€ä¸ªå­—èŠ‚æ˜¯ 8 ä½ï¼ŒASCII ç¼–ç å…¶å®åªä½¿ç”¨äº†å…¶ä¸­çš„ä½ 7 ä½ï¼Œè¿˜å‰©ä¸‹ 1 ä½ã€‚å¾ˆå¤šäººå°±æƒ³ç€å¯ä»¥åˆ©ç”¨è¿™æœ€é«˜çš„ä¸€ä½æ¥è¡¨ç¤ºæ›´å¤šçš„å¯è§å­—ç¬¦ï¼Œç”±äº IBM æ˜¯é‚£æ—¶æœ€æœ‰åçš„ OEMï¼Œå…¶åˆ¶å®šçš„ç¼–ç è§„åˆ™å½±å“èŒƒå›´ä¹Ÿæœ€å¹¿ã€‚<br><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2acofhpXXXXbQXpXXXXXXXXXX_!!581166664.gif" alt="ascii-dos"><br></center>

<p>éšç€æ—¶é—´çš„æ¨è¿›ï¼Œè®¡ç®—æœºçš„ä½¿ç”¨èŒƒå›´æ‰©å±•åˆ°è¥¿æ–¹æ¬§æ´²å›½å®¶ï¼Œåƒæ³•å›½ğŸ‡«ğŸ‡·ã€è¥¿ç­ç‰™ğŸ‡ªğŸ‡¸ï¼Œå¾·å›½ğŸ‡©ğŸ‡ªç­‰ï¼Œå®ƒä»¬è¿™äº›å›½å®¶çš„å­—æ¯æ¯”è‹±æ–‡è¦å¤šã€‚æ‰€ä»¥ä¸ºäº†è¡¨ç¤ºè¿™äº›å›½å®¶çš„è¯­è¨€ï¼Œä¹Ÿéœ€è¦å€ŸåŠ©æœ€é«˜ä½æ‰©å±• ASCII ç¼–ç ã€‚ä½†ç”±äºæ²¡æœ‰ç»Ÿä¸€çš„æ ‡å‡†ï¼Œæœ‰äº›åœ°æ–¹ç”¨ 130 è¡¨ç¤º <code>Ã©</code>ï¼Œæœ‰äº›åœ°æ–¹è¡¨ç¤ºä¸º Hebrew letter Gimel <code>×’</code>ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œä½¿ç”¨æœ€å¹¿çš„æ˜¯ <a href="https://en.wikipedia.org/wiki/Windows-1252" target="_blank" rel="external">CP-1252 ç¼–ç </a>ï¼Œä¹Ÿç§°ä¸º Windows-1252 ç¼–ç ï¼Œå› ä¸ºåœ¨ <a href="https://en.wikipedia.org/wiki/Windows-1252#History" target="_blank" rel="external">Windows åœ¨ 1.0 æ—¶å°±ä½¿ç”¨äº†è¯¥ç¼–ç </a>ï¼Œéšç€ Windows çš„æ™®åŠï¼Œå¤§å®¶å°±æ²¿ç”¨äº† Windows-1252 çš„è¯´æ³•ã€‚</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i1/581166664/TB25E0xhVXXXXbtXXXXXXXXXXXX_!!581166664.png_310x310.jpg" alt=" Windows-1252"><br></center>

<h4 id="ISO-8859-1"><a href="#ISO-8859-1" class="headerlink" title="ISO-8859-1"></a>ISO-8859-1</h4><p>æ—¢ç„¶è¯´åˆ°äº† Windows-1252ï¼Œé‚£ä¹ˆå°±ä¸èƒ½ä¸æå®ƒä¸ ISO-8859-1 çš„å…³ç³»ï¼Œæˆ‘ç›¸ä¿¡å¤§å®¶å¯¹ ISO-8859-1 è¿™ä¸ªç¼–ç è‚¯å®šå¾ˆç†Ÿæ‚‰ï¼Œæˆ‘è¿˜è®°å¾—ç¬¬ä¸€æ¬¡ç”¨ Dreamweaver å†™ HTML æ—¶ï¼Œå…¶ HTML æ¨¡æ¿ä¸­é»˜è®¤ç¼–ç å°±æ˜¯ ISO-8859-1ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„åœºæ™¯æ˜¯åœ¨ mysql ä¸­ï¼Œmysql çš„é»˜è®¤ç¼–ç ä¸º latin-1ï¼Œè¿™å…¶å®æ˜¯ ISO-8859-1 çš„ä¸€ä¸ªåˆ«åè€Œå·²ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/ISO/IEC_8859-1" target="_blank" rel="external">ISO-8859-1</a> æ˜¯æ—©æœŸ 8 ä½ç¼–ç æ–¹æ¡ˆçš„ä¸€ç§ï¼Œæ˜¯ <a href="https://en.wikipedia.org/wiki/ISO/IEC_8859" target="_blank" rel="external">ISO/IEC 8859</a> ç¼–ç ç³»åˆ—çš„ä¸€ç§ï¼Œ ç¬¬ä¸€ç‰ˆå‘å¸ƒäº 1987 å¹´ã€‚å®ƒä¸»è¦æ˜¯é’ˆå¯¹è¥¿æ¬§å›½å®¶è®¾è®¡ï¼Œç°åœ¨å¤§å¤šæ•°æµè¡Œçš„ 8 ä½ç¼–ç æ–¹æ¡ˆéƒ½ä»¥å®ƒä¸ºåŸºç¡€ï¼Œè¿™å…¶ä¸­å°±åŒ…æ‹¬ Windows-1252ã€‚</p>
<p>Windows-1252 ä¸ ISO-8859-1 çš„ä¸»è¦ä¸åŒåœ¨äº 0x80 åˆ° 0x9F ä¹‹é—´çš„å­—ç¬¦ï¼Œåœ¨ ISO-8859-1 ä¸­ä¸ºæ§åˆ¶å­—ç¬¦ï¼ˆcontrol charactersï¼‰ï¼Œåœ¨ Windows-1252 ä¸­ä¸ºå¯æ‰“å°å­—ç¬¦ï¼ˆprintable charactersï¼‰ã€‚</p>
<p>åœ¨ HTTP åè®®ä¸­ï¼Œä»¥<code>text/</code>å¼€å¤´çš„ MIME ç±»å‹çš„æ–‡ä»¶é»˜è®¤ç¼–ç ä¸º ISO-8859-1ï¼Œä½†æ˜¯ç”±äºæ§åˆ¶å­—ç¬¦åœ¨æ–‡ä»¶ä¸­ç”¨å¤„ä¸å¤§ï¼Œæ‰€ä»¥å¤§å¤šæ•°å®¢æˆ·ç«¯ç¨‹åºç”¨ Windows-1252 æ¥è§£ç ï¼Œè¿™ä¹Ÿå°±æ˜¯å®ƒä»¬ä¹‹é—´ç»å¸¸æ··æ·†çš„ä¸»è¦åŸå› ã€‚</p>
<h3 id="å­—ç¬¦é›†-vs-å­—ç¬¦ç¼–ç "><a href="#å­—ç¬¦é›†-vs-å­—ç¬¦ç¼–ç " class="headerlink" title="å­—ç¬¦é›† vs å­—ç¬¦ç¼–ç "></a>å­—ç¬¦é›† vs å­—ç¬¦ç¼–ç </h3><p>åœ¨ä»‹ç»å®Œ ASCII ä¹‹åï¼Œéœ€è¦å¼ºè°ƒä¸€ä¸ªå¾ˆé‡è¦ä½†è¢«å¤§å¤šæ•°äººéƒ½å¿½ç•¥çš„ä¸€ä¸ªæ¦‚å¿µé—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å¹³æ—¶è¯´çš„ ASCII å…¶å®æœ‰ä¸¤ä¸ªå«ä¹‰ï¼Œä¸€ä¸ªæ˜¯ ASCII å­—ç¬¦é›†ï¼Œå¦ä¸€ä¸ªæ˜¯ ASCII ç¼–ç ã€‚</p>
<blockquote>
<p>ASCII å­—ç¬¦é›†åªæ˜¯å®šä¹‰äº†å­—ç¬¦ä¸å­—ç¬¦ç ï¼ˆcharacter codeï¼Œä¹Ÿç§° code point ä»£ç ç‚¹ï¼‰çš„å¯¹åº”å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´è¿™ä¸€å±‚é¢åªæ˜¯è§„å®šäº†å­—ç¬¦<code>A</code>ç”¨ 65 è¡¨ç¤ºï¼Œè‡³äºè¿™ä¸ª 65 åœ¨å†…å­˜æˆ–ç¡¬ç›˜ä¸­æ€ä¹ˆè¡¨ç¤ºï¼Œå®ƒä¸ç®¡ï¼Œé‚£æ˜¯ ASCII ç¼–ç åšçš„äº‹ã€‚</p>
<p>ASCII ç¼–ç è§„å®šäº†ç”¨ 7 ä¸ªäºŒè¿›åˆ¶ä½æ¥ä¿å­˜ ASCII å­—ç¬¦ç ï¼Œå³å®šä¹‰äº†å­—ç¬¦é›†çš„<code>å­˜å‚¨å½¢å¼</code>ã€‚</p>
</blockquote>
<p>è¯´åˆ°è¿™é‡Œä½ ä¹Ÿè®¸ä¼šé—®ï¼Œé‚£æ—¢ç„¶ç”¨ 7 ä¸ªäºŒè¿›åˆ¶ä½å°±èƒ½å¤Ÿè¡¨ç¤ºæ‰€æœ‰ ASCII å­—ç¬¦ç äº†ï¼Œä¸ºä»€ä¹ˆç°åœ¨ä¸€ä¸ªå­—èŠ‚æ˜¯ 8 ä½ï¼Œè€Œä¸æ˜¯ 7 ä½å‘¢ï¼Œè¿™ä¸æ˜¯æµªè´¹å—ï¼Ÿ</p>
<p>å…¶å®è¿™æ˜¯æ—©æœŸè®¾è®¡è€…æœ‰æ„è€Œä¸ºä¹‹ï¼š</p>
<blockquote>
<p>7 ä½è¡¨ç¤º ASCII å­—ç¬¦ç ï¼Œå‰©ä¸‹ 1 ä½ä¸º <a href="https://en.wikipedia.org/wiki/Parity_bit" target="_blank" rel="external">Parity bit</a>ï¼Œä¹Ÿç§°ä¸ºæ ¡éªŒä½ï¼Œç”¨ä»¥æ£€æŸ¥æ•°æ®çš„æ­£ç¡®æ€§ã€‚</p>
</blockquote>
<p>å…³äºæ•°æ®æ ¡éªŒï¼Œæˆ‘è¿™é‡Œä¸æ‰“ç®—å±•å¼€è®²ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚è€ƒ <a href="https://en.wikipedia.org/wiki/Error_detection_and_correction" target="_blank" rel="external">Error detection and correction</a>ã€‚</p>
<p>ä¸ºäº†è®©å¤§å®¶æ›´æ¸…æ¥šçš„æ˜ç™½è¿™ä¸¤è€…ä»¥åŠç›¸å…³æ¦‚å¿µçš„å…³ç³»ï¼Œæˆ‘ç”»äº†å›¾ï¼Œä¾¿äºå¤§å®¶ç†è§£ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2bda5iXXXXXbHXpXXXXXXXXXX_!!581166664.png" alt="å­—ç¬¦ã€ä»£ç ç‚¹ã€äºŒè¿›åˆ¶å­—èŠ‚å…³ç³»å›¾"><br></center>

<ul>
<li><code>Character å­—ç¬¦</code>ã€‚å³æˆ‘ä»¬çœ‹åˆ°çš„å•ä¸ªç¬¦å·ï¼Œåƒâ€œAâ€ã€â€œå•Šâ€ç­‰</li>
<li><code>Code point ä»£ç ç‚¹</code>ã€‚ä¸€ä¸ªæ— ç¬¦å·æ•°å­—ï¼Œé€šå¸¸ç”¨16è¿›åˆ¶è¡¨ç¤ºã€‚ä»£ç ç‚¹ä¸å­—ç¬¦çš„ä¸€ä¸€å¯¹åº”å…³ç³»ç§°ä¸ºå­—ç¬¦é›†ï¼ˆCharacter Setï¼‰ï¼Œè¿™ç§å¯¹åº”å…³ç³»è‚¯å®šä¸æ­¢ä¸€ç§ï¼Œä¹Ÿå°±å¯¼è‡´äº†ä¸åŒå­—ç¬¦é›†çš„å‡ºç°ï¼Œåƒ ASCIIã€ISO-8859-1ã€GB2312ã€GBKã€Unicode ç­‰ã€‚</li>
<li><code>Bytes äºŒè¿›åˆ¶å­—èŠ‚</code>ã€‚å…¶å«ä¹‰ä¸ºä»£ç ç‚¹åœ¨å†…å­˜æˆ–ç£ç›˜ä¸­çš„è¡¨ç¤ºå½¢å¼ã€‚ä»£ç ç‚¹ä¸äºŒè¿›åˆ¶å­—èŠ‚çš„ä¸€ä¸€å¯¹åº”å…³ç³»ç§°ä¸ºç¼–ç ï¼ˆEncodingï¼‰ï¼Œå½“ç„¶è¿™ç§å¯¹åº”å…³ç³»ä¹Ÿä¸æ˜¯å”¯ä¸€çš„ï¼Œæ‰€ä»¥ç¼–ç ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œåƒ ASCIIã€ISO-8859-1ã€ENC-CNã€GBKã€UTF-8ç­‰ã€‚</li>
</ul>
<blockquote>
<p>ä¸Šé¢è¿™ä¸ªå›¾åŸºæœ¬æŠŠæˆ‘ä»¬å¹³æ—¶ç»å¸¸æ··æ·†çš„æ¦‚å¿µæ¸…æ™°åœ°åŒºåˆ†å¼€äº†ï¼Œå¤§å®¶ä¸€å®šè¦å……åˆ†ç†è§£å¹¶ç‰¢è®°äºå¿ƒã€‚</p>
</blockquote>
<h3 id="å¤šå­—èŠ‚ç¼–ç "><a href="#å¤šå­—èŠ‚ç¼–ç " class="headerlink" title="å¤šå­—èŠ‚ç¼–ç "></a>å¤šå­—èŠ‚ç¼–ç </h3><p>å¤šå­—èŠ‚ç¼–ç ä¸»è¦ç”¨äºæˆ‘ä»¬äºšæ´²å›½å®¶ï¼Œåƒä¸­æ–‡ï¼ˆChineseï¼‰ï¼Œæ—¥æ–‡ï¼ˆJapaneseï¼‰ï¼ŒéŸ©æ–‡ï¼ˆKoreanï¼‰ï¼ˆä¸šç•Œä¸€èˆ¬ç§°ä¸º CJKï¼‰ç­‰è±¡å½¢ï¼ˆè¡¨æ„ï¼‰æ–‡å­—ï¼ˆideograph-based languageï¼‰ï¼Œå­—ç¬¦æ•°é‡æ¯”è¾ƒå¤šï¼Œ1 ä¸ªå­—èŠ‚æ˜¯æ”¾ä¸ä¸‹çš„ï¼Œæ‰€ä»¥éœ€è¦æ›´å¤šçš„å­—èŠ‚æ¥è¿›è¡Œå­—ç¬¦çš„ç¼–ç ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/ISO/IEC_2022" target="_blank" rel="external">ISO/IEC 2022</a> æ ‡å‡†ä¸ºå¤šå­—èŠ‚ç¼–ç åˆ¶å®šäº†ä¸€å¥—æ ‡å‡†ï¼Œä¸»è¦æœ‰ä¸‹é¢ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ol>
<li>ä¸€ä¸ªç¼–ç ç³»ç»Ÿé‡Œé¢å¯ä»¥è¡¨ç¤ºå¤šç§å­—ç¬¦é›†</li>
<li>ä¸€ä¸ªç¼–ç ç³»ç»Ÿæ—¢å¯ä»¥åœ¨ 7 ä½ç¼–ç ç³»ç»Ÿä¸­è¡¨ç¤ºæ‰€æœ‰å­—ç¬¦é›†ï¼Œä¹Ÿå¯ä»¥åœ¨ 8 ä½ç¼–ç ç³»ç»Ÿè¡¨ç¤ºæ‰€æœ‰å­—ç¬¦é›†</li>
</ol>
<p>ä¸ºäº†èƒ½å¤Ÿè¡¨ç¤ºå¤šç§å­—ç¬¦é›† ISO/IEC 2022 å¼•å…¥äº†<a href="https://en.wikipedia.org/wiki/Escape_sequence" target="_blank" rel="external">escape sequences</a>ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸­æ–‡é‡Œé¢è¯´çš„â€œè½¬ä¹‰å­—ç¬¦â€çš„æ„æ€ï¼›ä¸ºäº†èƒ½å¤Ÿå…¼å®¹ä¹‹å‰çš„ 7 ä½ç¼–ç ç³»ç»Ÿï¼Œåƒ ASCIIï¼Œå®ç° ISO/IEC 2022 æ ‡å‡†çš„ç¼–ç ç³»ç»Ÿä¸€èˆ¬éƒ½æ˜¯<strong>å˜é•¿ç¼–ç </strong>ã€‚</p>
<h4 id="GB2312"><a href="#GB2312" class="headerlink" title="GB2312"></a>GB2312</h4><p><a href="https://en.wikipedia.org/wiki/GB_2312" target="_blank" rel="external">GB2312</a> æ˜¯æˆ‘å›½å›½å®¶æ ‡å‡†æ€»å±€åœ¨1980å¹´å‘å¸ƒä¸€å¥—éµå¾ª ISO/IEC 2022 æ ‡å‡†çš„<code>å­—ç¬¦é›†</code>ï¼Œåœ¨ GB2312 ä¸­ï¼Œå­—ç¬¦ç ä¸€èˆ¬ç§°ä¸ºåŒºä½ç ï¼Œç”±äºè¯¥å­—ç¬¦é›†éœ€è¦å…¼å®¹ ASCII å­—ç¬¦é›†ï¼Œæ‰€ä»¥å®ƒåªèƒ½ä¸€ä¸ªå­—èŠ‚ä¸­çš„ 7 ä½ï¼Œå‰©ä¸‹ 1 ä½ç”¨äºåŒºåˆ†ï¼Œæ¯”å¦‚å¯ä»¥é€šè¿‡æœ€é«˜ä½ä¸º 1 è¡¨ç¤º GB2312 å­—ç¬¦é›†ï¼Œä¸º 0 è¡¨ç¤º ASCII å­—ç¬¦é›†ã€‚</p>
<p>GB2312 ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ç ï¼Œæœ€å¤šå¯ä»¥è¡¨ç¤º 94 * 94 ä¸ªå­—ç¬¦ï¼Œä½†æ˜¯ GB2312 å¹¶æ²¡æœ‰å…¨éƒ¨ä½¿ç”¨ï¼Œç•™äº†ä¸€éƒ¨åˆ†æ–¹ä¾¿åé¢æ‰©å±•ç”¨ã€‚</p>
<p>å®ç° GB2312 å­—ç¬¦é›†çš„ç¼–ç ä¸»è¦æ˜¯ <a href="https://en.wikipedia.org/wiki/Extended_Unix_Code#EUC-CN" target="_blank" rel="external">EUC-CN</a>ï¼Œè¯¥ç¼–ç ä¸ ASCII ç¼–ç å…¼å®¹ã€‚</p>
<p>æˆ‘ä»¬å¹³æ—¶è¯´çš„ GB2312 ç¼–ç å…¶å®å°±æ˜¯æŒ‡çš„ EUC-CN ç¼–ç ï¼Œè¿™ä¸€ç‚¹éœ€è¦æ˜ç™½ã€‚</p>
<h4 id="GBK"><a href="#GBK" class="headerlink" title="GBK"></a>GBK</h4><p><a href="https://en.wikipedia.org/wiki/GBK" target="_blank" rel="external">GBK</a> å­—ç¬¦é›†æ˜¯å¯¹ GB2312 å­—ç¬¦é›†çš„æ‰©å±•ï¼ŒGBK å¹¶æ²¡æœ‰ä¸€ä¸ªå®˜æ–¹æ ‡å‡†ï¼Œç°åœ¨ä½¿ç”¨æœ€å¹¿çš„æ ‡å‡†æ˜¯å¾®è½¯åœ¨ Windows 95 ä¸­å®ç°çš„ç‰ˆæœ¬â€”â€”<a href="https://en.wikipedia.org/wiki/Code_page_936" target="_blank" rel="external">CP936</a> ç¼–ç ã€‚</p>
<p>GBK ä¹Ÿä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå­—ç¬¦ç ï¼Œ94 * 94 çš„åŒºä½ç åˆ†å¸ƒå¯ä»¥å‚è€ƒä¸‹é¢è¿™ä¸ªå›¾ï¼Œæˆªè‡ª <a href="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0c/GBK_encoding.svg/1290px-GBK_encoding.svg.png" target="_blank" rel="external">Wikipedia</a></p>
<center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2wxevhVXXXXaUXpXXXXXXXXXX_!!581166664.png_310x310.jpg" alt="GBK_encoding"><br></center>

<p>åŒ GB2312 ä¸€æ ·ï¼Œæˆ‘ä»¬å¹³æ—¶è¯´çš„ GBK ç¼–ç å…¶å®å°±æ˜¯æŒ‡çš„ CP936 ç¼–ç ã€‚</p>
<p>é™¤äº†æˆ‘ä»¬ä¸­å›½çš„ GB* ç³»ç»Ÿå­—ç¬¦é›†ä»¥å¤–ï¼Œæ—¥æœ¬ã€éŸ©å›½å„æœ‰å„çš„å­—ç¬¦é›†æ ‡å‡†ï¼Œè™½ç„¶éƒ½æ˜¯åŸºäº ISO/IEC 2022ï¼Œä½†æ˜¯å…·ä½“çš„è¡¨ç¤ºæ–¹å¼åƒå·®ä¸‡åˆ«ï¼Œæ¯”å¦‚ 1601 åœ¨ GB2312 ä¸­è¡¨ç¤ºâ€œå•Šâ€ï¼Œä½†åœ¨æ—¥éŸ©å°±ä¸çŸ¥é“è¡¨ç¤ºä»€ä¹ˆå«ä¹‰äº†ã€‚</p>
<p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§å›Šæ‹¬ä¸–ç•Œä¸Šæ‰€æœ‰å­—ç¬¦çš„ä¸€å¥—å­—ç¬¦é›†ï¼Œåœ¨è¯¥å­—ç¬¦é›†ä¸­ï¼Œå­—ç¬¦ç ä¸å­—ç¬¦ä¸€ä¸€å¯¹åº”ï¼Œæ¯”å¦‚å­—ç¬¦ç  0x41 è¡¨ç¤ºè‹±æ–‡å­—æ¯<code>A</code>ï¼Œåœ¨ä»»ä½•å›½å®¶éƒ½è¡¨ç¤º<code>A</code>ï¼Œå³ä½¿è¯¥å›½å®¶æ²¡æœ‰è¿™ä¸ªå­—ç¬¦ã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„æ˜¯ç°åœ¨æœ€æµè¡Œçš„ä¸€å¥—å­—ç¬¦é›†â€”â€”Unicodeã€‚</p>
<h2 id="Unicode"><a href="#Unicode" class="headerlink" title="Unicode"></a>Unicode</h2><p>Unicode çš„å…¨ç§°æ˜¯ universal character encodingï¼Œä¸­æ–‡ä¸€èˆ¬ç¿»è¯‘ä¸ºâ€œç»Ÿä¸€ç ã€ä¸‡å›½ç ã€å•ä¸€ç â€ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2GcoghpXXXXc6XpXXXXXXXXXX_!!581166664.png_160x160.jpg" alt="Unicode_logo"><br></center>

<p>åœ¨ Unicode ä¸­å­—ç¬¦ç ç§°ä¸º code pointï¼Œç”¨ 4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºï¼Œè¿™ä¹ˆåšä¸»è¦æ˜¯ä¸ºäº†æ¶µç›–ä¸–ç•Œä¸Šæ‰€æœ‰çš„å­—ç¬¦ã€‚å†™æ³•ä¸€èˆ¬ä¸º<code>U+XXXX</code>ï¼ŒXXXX ä¸ºç”¨ 16 è¿›åˆ¶è¡¨ç¤ºçš„æ•°å­—ã€‚æ¯”å¦‚ï¼Œ<code>U+0041</code>è¡¨ç¤º<code>A</code>ã€‚</p>
<h3 id="Unicode-çš„å­˜å‚¨å½¢å¼"><a href="#Unicode-çš„å­˜å‚¨å½¢å¼" class="headerlink" title="Unicode çš„å­˜å‚¨å½¢å¼"></a>Unicode çš„å­˜å‚¨å½¢å¼</h3><p>Unicode çš„<strong>å­˜å‚¨å½¢å¼</strong>ä¸€èˆ¬ç§°ä¸º<code>UTF-*</code>ç¼–ç ï¼Œå…¶ä¸­ UTF å…¨ç§°ä¸º <code>Unicode Transformation Format</code>ï¼Œå¸¸è§çš„æœ‰ï¼š</p>
<h4 id="UTF-32"><a href="#UTF-32" class="headerlink" title="UTF-32"></a>UTF-32</h4><p><a href="https://en.wikipedia.org/wiki/UTF-32" target="_blank" rel="external">UTF-32</a> ç¼–ç æ˜¯ Unicode æœ€ç›´æ¥çš„å­˜å‚¨æ–¹å¼ï¼Œç”¨ 4 ä¸ªå­—èŠ‚æ¥åˆ†åˆ«è¡¨ç¤º code point ä¸­çš„ 4 ä¸ªå­—èŠ‚ï¼Œä¹Ÿæ˜¯ <code>UTF-*</code>ç¼–ç å®¶æ—ä¸­å”¯ä¸€çš„ä¸€ç§<strong>å®šé•¿ç¼–ç ï¼ˆfixed-length encodingï¼‰</strong>ã€‚UTF-32 çš„å¥½å¤„æ˜¯èƒ½å¤Ÿåœ¨<code>O(1)</code>æ—¶é—´å†…æ‰¾åˆ°ç¬¬ N ä¸ªå­—ç¬¦ï¼Œå› ä¸ºç¬¬ N ä¸ªå­—ç¬¦çš„ç¼–ç çš„èµ·ç‚¹æ˜¯ N*4 ä¸ªå­—èŠ‚ï¼Œå½“ç„¶ï¼ŒåŠ£åŠ¿æ›´æ˜æ˜¾ï¼Œå››ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œåˆ«è¯´ä»¥è‹±æ–‡ä¸ºæ¯è¯­çš„äººä¸å¹²ï¼Œæˆ‘ä»¬ä¸­å›½äººä¹Ÿä¸å¹²äº†ã€‚</p>
<h4 id="UTF-16"><a href="#UTF-16" class="headerlink" title="UTF-16"></a>UTF-16</h4><p><a href="https://en.wikipedia.org/wiki/UTF-16" target="_blank" rel="external">UTF-16</a> æœ€å°‘å¯ä»¥é‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤º code pointï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒUTF-16 æ˜¯ä¸€ç§<strong>å˜é•¿ç¼–ç ï¼ˆvariable-length encodingï¼‰</strong>ï¼Œåªä¸è¿‡å¯¹äº 65535 ä¹‹å†…çš„ code pointï¼Œé‡‡ç”¨ 2 ä¸ªå­—èŠ‚è¡¨ç¤ºè€Œå·²ã€‚å¦‚æœæƒ³è¦è¡¨ç¤º 65535 ä¹‹ä¸Šçš„å­—ç¬¦ï¼Œéœ€è¦ä¸€äº› hack çš„æ‰‹æ®µï¼Œå…·ä½“å¯ä»¥å‚è€ƒ<a href="https://en.wikipedia.org/wiki/UTF-16#U.2B10000_to_U.2B10FFFF" target="_blank" rel="external">wiki UTF-16#U.2B10000_to_U.2B10FFFF</a>ã€‚å¾ˆæ˜æ˜¾ï¼ŒUTF-16 æ¯” UTF-32 èŠ‚çº¦ä¸€åŠçš„å­˜å‚¨ç©ºé—´ï¼Œå¦‚æœç”¨ä¸åˆ° 65535 ä¹‹ä¸Šçš„å­—ç¬¦çš„è¯ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨<code>O(1)</code>æ—¶é—´å†…æ‰¾åˆ°ç¬¬ N ä¸ªå­—ç¬¦ã€‚</p>
<blockquote>
<p>UTF-16 ä¸ UTF-32 è¿˜æœ‰ä¸€ä¸ªä¸æ˜æ˜¾çš„ç¼ºç‚¹ã€‚æˆ‘ä»¬çŸ¥é“ä¸åŒçš„è®¡ç®—æœºå­˜å‚¨å­—èŠ‚çš„é¡ºåºæ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€<code>U+4E2D</code> åœ¨ UTF-16 å¯ä»¥ä¿å­˜ä¸º<code>4E 2D</code>ï¼Œä¹Ÿå¯ä»¥ä¿å­˜æˆ<code>2D 4E</code>ï¼Œè¿™å–å†³äºè®¡ç®—æœºæ˜¯é‡‡ç”¨å¤§ç«¯æ¨¡å¼è¿˜æ˜¯å°ç«¯æ¨¡å¼ï¼ŒUTF-32 çš„æƒ…å†µä¹Ÿç±»ä¼¼ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¼•å…¥äº† <strong>BOM (Byte Order Mark)</strong>ï¼Œå®ƒæ˜¯ä¸€ç‰¹æ®Šçš„ä¸å¯è§å­—ç¬¦ï¼Œä½äºæ–‡ä»¶çš„èµ·å§‹ä½ç½®ï¼Œæ ‡ç¤ºè¯¥æ–‡ä»¶çš„å­—èŠ‚åºã€‚å¯¹äº UTF-16 æ¥è¯´ï¼ŒBOM ä¸º<code>U+FEFF</code>ï¼ˆFF æ¯” FE å¤§ 1ï¼‰ï¼Œå¦‚æœ UTF-16 ç¼–ç çš„æ–‡ä»¶ä»¥<code>FF FE</code>å¼€å§‹ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å…¶å­—èŠ‚åºä¸º<strong>å°ç«¯æ¨¡å¼</strong>ï¼Œå¦‚æœä»¥<code>FE FF</code>å¼€å§‹ï¼Œé‚£ä¹ˆå°±æ˜¯<strong>å¤§ç«¯æ¨¡å¼</strong>ã€‚<br>å…¶ä»– UTF-* ç¼–ç çš„ BOM å¯ä»¥å‚è€ƒ <a href="https://en.wikipedia.org/wiki/Byte_order_mark#Representations_of_byte_order_marks_by_encoding" target="_blank" rel="external">Representations of byte order marks by encoding</a>ã€‚</p>
</blockquote>
<h4 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h4><p>UTF-16 å¯¹äºä»¥è‹±æ–‡ä¸ºæ¯è¯­çš„äººæ¥è¯´ï¼Œè¿˜æ˜¯æœ‰äº›æµªè´¹äº†ï¼Œè¿™æ—¶èªæ˜çš„äººä»¬ï¼ˆå‡†ç¡®è¯´æ˜¯<a href="https://en.wikipedia.org/wiki/Ken_Thompson_%28computer_programmer%29" target="_blank" rel="external">Ken Thompson</a>ä¸<a href="https://en.wikipedia.org/wiki/Rob_Pike" target="_blank" rel="external">Rob Pike</a>ï¼‰åˆ<a href="http://www.cl.cam.ac.uk/~mgk25/ucs/utf-8-history.txt" target="_blank" rel="external">å‘æ˜</a>äº†å¦ä¸€ä¸ªç¼–ç â€”â€”<a href="https://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="external">UTF-8</a>ã€‚åœ¨ UTF-8 ä¸­ï¼ŒASCII å­—ç¬¦é‡‡ç”¨å•å­—èŠ‚ã€‚å…¶å®ï¼ŒUTF-8 å‰ 128 ä¸ªå­—ç¬¦ä¸ ASCII å­—ç¬¦ç¼–ç æ–¹å¼ä¸€è‡´ï¼›æ‰©å±•çš„æ‹‰ä¸å­—ç¬¦åƒ<code>Ã±</code>ã€<code>Ã¶</code>ç­‰é‡‡ç”¨2ä¸ªå­—èŠ‚å­˜å‚¨ï¼›ä¸­æ–‡å­—ç¬¦é‡‡ç”¨ 3 ä¸ªå­—ç¬¦å­˜å‚¨ï¼Œä½¿ç”¨é¢‘ç‡æå°‘å­—ç¬¦é‡‡ç”¨ 4 ä¸ªå­—èŠ‚å­˜å‚¨ã€‚ç”±æ­¤å¯è§ï¼ŒUTF-8 ä¹Ÿæ˜¯ä¸€ç§<strong>å˜é•¿ç¼–ç ï¼ˆvariable-length encodingï¼‰</strong>ã€‚</p>
<p>UTF-8 çš„ç¼–ç è§„åˆ™å¾ˆç®€å•ï¼Œåªæœ‰äºŒæ¡ï¼š</p>
<ol>
<li>å¯¹äºå•å­—èŠ‚çš„ç¬¦å·ï¼Œå­—èŠ‚çš„ç¬¬ä¸€ä½è®¾ä¸º0ï¼Œåé¢7ä½ä¸ºè¿™ä¸ªç¬¦å·çš„ code pointã€‚å› æ­¤å¯¹äºè‹±è¯­å­—æ¯ï¼ŒUTF-8ç¼–ç å’ŒASCIIç æ˜¯ç›¸åŒçš„ã€‚</li>
<li>å¯¹äºnå­—èŠ‚çš„ç¬¦å·ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰nä½éƒ½è®¾ä¸º1ï¼Œç¬¬n+1ä½è®¾ä¸º0ï¼Œåé¢å­—èŠ‚çš„å‰ä¸¤ä½ä¸€å¾‹è®¾ä¸º10ã€‚å‰©ä¸‹çš„æ²¡æœ‰æåŠçš„äºŒè¿›åˆ¶ä½ï¼Œå…¨éƒ¨ä¸ºè¿™ä¸ªç¬¦å·çš„ code pointã€‚</li>
</ol>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB244crhpXXXXbKXpXXXXXXXXXX_!!581166664.png" alt=" UTF-8 ç¼–ç è§„åˆ™"></p>
<p>é€šè¿‡ä¸Šé¢è¿™ä¸¤ä¸ªè§„åˆ™ï¼ŒUTF-8 å°±ä¸å­˜åœ¨å­—èŠ‚é¡ºåºåœ¨å¤§å°ç«¯ä¸åŒçš„æƒ…å†µï¼Œæ‰€ä»¥ç”¨ UTF-8 ç¼–ç çš„æ–‡ä»¶åœ¨ä»»ä½•è®¡ç®—æœºä¸­ä¿å­˜çš„å­—èŠ‚æµéƒ½æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ˜¯å…¶å¾ˆé‡è¦ä¸€ä¼˜åŠ¿ï¼›UTF-8 çš„å¦ä¸€å¤§ä¼˜åŠ¿åœ¨äºå¯¹ ASCII å­—ç¬¦è¶…èŠ‚çœç©ºé—´ï¼Œå­˜å‚¨æ‰©å±•æ‹‰ä¸å­—ç¬¦ä¸ UTF-16 çš„æƒ…å†µä¸€æ ·ï¼Œå­˜å‚¨æ±‰å­—å­—ç¬¦æ¯” UTF-32 æ›´ä¼˜ã€‚</p>
<p>UTF-8 çš„ä¸€åŠ£åŠ¿æ˜¯æŸ¥æ‰¾ç¬¬ N ä¸ªå­—ç¬¦æ—¶éœ€è¦<code>O(N)</code> çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå­—ç¬¦ä¸²è¶Šé•¿ï¼Œå°±éœ€è¦æ›´é•¿çš„æ—¶é—´æ¥æŸ¥æ‰¾å…¶ä¸­çš„æ¯ä¸ªå­—ç¬¦ã€‚å…¶æ¬¡æ˜¯åœ¨å¯¹å­—èŠ‚æµè§£ç ã€å­—ç¬¦ç¼–ç æ—¶ï¼Œéœ€è¦éµå¾ªä¸Šé¢ä¸¤æ¡è§„åˆ™ï¼Œæ¯” UTF-16ã€UTF-32 ç•¥éº»çƒ¦ã€‚</p>
<p>éšç€äº’è”ç½‘çš„å…´èµ·ï¼ŒUTF-8 æ˜¯é€æ¸æˆä¸ºä½¿ç”¨èŒƒå›´æœ€å¹¿çš„ç¼–ç æ–¹æ¡ˆã€‚ä¸‹å›¾ä¸º Google åœ¨ 2010 å¹´åˆåšçš„<a href="http://googleblog.blogspot.com/2010/01/unicode-nearing-50-of-web.html" target="_blank" rel="external">ç»Ÿè®¡</a>ï¼ˆé“¾æ¥éœ€ç¿»å¢™ï¼‰</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2PjtzhVXXXXbnXXXXXXXXXXXX_!!581166664.png_620x10000.jpg" alt=" Growth_of_Unicode_on_the_Web"><br></center><br>ç”±äº Google çš„çˆ¬è™«éå¸ƒå…¨ä¸–ç•Œï¼Œè¿™ä¸ªæ•°æ®å¯ä¿¡åº¦æ¯”è¾ƒé«˜ã€‚</p>
<h3 id="UCS"><a href="#UCS" class="headerlink" title="UCS"></a>UCS</h3><p>æˆ‘ä»¬åœ¨äº’è”ç½‘ä¸ŠæŸ¥æ‰¾ç¼–ç ç›¸å…³èµ„æ–™æ—¶ï¼Œç»å¸¸ä¼šçœ‹åˆ°<code>UCS-2</code>ã€<code>UCS-4</code>ç¼–ç ï¼Œå®ƒä»¬å’Œ<code>UTF-*</code>ç¼–ç å®¶æ—æ˜¯ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿè¦æƒ³ç†æ¸…å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œéœ€è¦å…ˆå¼„æ¸…æ¥šï¼Œä»€ä¹ˆæ˜¯ <strong>UCS</strong>ã€‚</p>
<p><a href="https://en.wikipedia.org/wiki/Universal_Coded_Character_Set" target="_blank" rel="external">UCS</a> å…¨ç§°æ˜¯ <strong>Universal Coded Character Set</strong>ï¼Œæ˜¯ç”± <a href="https://en.wikipedia.org/wiki/ISO/IEC_10646" target="_blank" rel="external">ISO/IEC 10646</a>å®šä¹‰çš„ä¸€å¥—æ ‡å‡†å­—ç¬¦é›†ï¼Œæ˜¯å¾ˆå¤šå­—ç¬¦ç¼–ç çš„åŸºç¡€ï¼ŒUCS ä¸­å¤§æ¦‚åŒ…å« 100,000 ä¸ªæŠ½è±¡å­—ç¬¦ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½æœ‰ä¸€å”¯ä¸€çš„æ•°å­—ç¼–ç ï¼Œç§°ä¸º code pointã€‚</p>
<p>åœ¨19ä¸–çºªå…«åå¹´ä»£æ™šæœŸï¼Œæœ‰ä¸¤ä¸ªç»„ç»‡åŒæ—¶åœ¨ UCS çš„åŸºç¡€ä¸Šå¼€å‘ä¸€ç§ä¸å…·ä½“è¯­è¨€æ— å…³çš„ç»Ÿä¸€çš„ç¼–ç æ–¹æ¡ˆï¼Œè¿™ä¸¤ä¸ªç»„ç»‡åˆ†åˆ«æ˜¯ <a href="https://en.wikipedia.org/wiki/IEEE" target="_blank" rel="external">IEEE</a> ä¸ <a href="https://en.wikipedia.org/wiki/Unicode_Consortium" target="_blank" rel="external">Unicode Consortium</a>ï¼Œä¸ºäº†ä¿æŒè¿™ä¸¤ä¸ªç»„ç»‡é—´ç¼–ç æ–¹æ¡ˆçš„å…¼å®¹æ€§ï¼Œä¸¤ä¸ªç»„ç»‡å°è¯•ç€åˆä½œã€‚æ—©æœŸçš„ä¸¤å­—èŠ‚ç¼–ç æ–¹æ¡ˆå«åšâ€œUnicodeâ€ï¼Œåæ¥æ”¹åä¸ºâ€œUCS-2â€ï¼Œåœ¨ç ”å‘è¿‡ç¨‹å‘ï¼Œå‘ç° 16 ä½æ ¹æœ¬ä¸èƒ½å¤Ÿå›Šæ‹¬æ‰€æœ‰å­—ç¬¦ï¼Œäºæ˜¯ IEEE å¼•å…¥äº†æ–°çš„ç¼–ç æ–¹æ¡ˆâ€”â€”UCS-4 ç¼–ç ï¼Œè¿™ç§ç¼–ç æ¯ä¸ªå­—ç¬¦éœ€è¦ 4 ä¸ªå­—èŠ‚ï¼Œè¿™ä¸€è¡Œä¸ºç«‹åˆ»è¢« Unicode Consortium åˆ¶æ­¢äº†ï¼Œå› ä¸ºè¿™ç§ç¼–ç å¤ªæµªè´¹ç©ºé—´äº†ï¼Œåˆå› ä¸ºä¸€äº›è®¾å¤‡å‚å•†å·²ç»å¯¹ 2 å­—èŠ‚ç¼–ç æŠ€æœ¯æŠ•å…¥å¤§é‡æˆæœ¬ï¼Œæ‰€ä»¥åœ¨ 1996 å¹´ 7 æœˆå‘å¸ƒçš„ Unicode 2.0 ä¸­æå‡ºäº† UTF-16 æ¥æ‰“ç ´ UCS-2 ä¸ UCS-4 ä¹‹é—´çš„åƒµå±€ï¼ŒUTF-16 åœ¨ 2000 å¹´è¢« <a href="https://en.wikipedia.org/wiki/IETF" target="_blank" rel="external">IEFE</a> ç»„ç»‡åˆ¶å®šä¸º<a href="https://tools.ietf.org/html/rfc2781" target="_blank" rel="external">RFC 2781</a>æ ‡å‡†ã€‚æ›´å¤šå¯å‚è€ƒï¼š</p>
<ul>
<li><a href="http://unicode.org/faq/utf_bom.html#utf16-11" target="_blank" rel="external">Q: What is the difference between UCS-2 and UTF-16?</a></li>
</ul>
<p>ç”±æ­¤å¯è§ï¼Œ<code>UCS-*</code> ç¼–ç æ˜¯ä¸€å†å²äº§ç‰©ï¼Œç›®å‰æ¥è¯´ï¼Œç»Ÿä¸€ç¼–ç æ–¹æ¡ˆæœ€ç»ˆçš„èµ¢å®¶æ˜¯ <code>UTF-*</code> ç¼–ç ã€‚</p>
<h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><h3 id="æ“ä½œç³»ç»Ÿ"><a href="#æ“ä½œç³»ç»Ÿ" class="headerlink" title="æ“ä½œç³»ç»Ÿ"></a>æ“ä½œç³»ç»Ÿ</h3><p>æ ¹æ®<a href="http://unicode.org/notes/tn12/#Software_16" target="_blank" rel="external">UTF-16 FOR PROCESSING</a>ï¼Œç°åœ¨æµè¡Œçš„ä¸‰å¤§æ“ä½œç³»ç»Ÿ Windowsã€Macã€Linux å‡é‡‡ç”¨ UTF-16 ç¼–ç æ–¹æ¡ˆï¼Œä¸Šé¢é“¾æ¥ä¹ŸæŒ‡å‡ºï¼Œç°ä»£ç¼–ç¨‹è¯­è¨€åƒ Javaã€ECMAScriptã€.Net å¹³å°ä¸Šæ‰€æœ‰è¯­è¨€ç­‰åœ¨å†…éƒ¨ä¹Ÿéƒ½ä½¿ç”¨ UTF-16 æ¥è¡¨ç¤ºå­—ç¬¦ã€‚<br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2hdILhpXXXXbAXpXXXXXXXXXX_!!581166664.png" alt="Mac Finder ç•Œé¢"><br>ä¸Šå›¾ä¸º Mac ç³»ç»Ÿä¸­æ–‡ä»¶æµè§ˆå™¨ Finder çš„ç•Œé¢ï¼Œå…¶ä¸­æ‰€æœ‰çš„å­—ç¬¦ï¼Œåœ¨å†…å­˜ä¸­éƒ½æ˜¯ä»¥ UTF-16 çš„ç¼–ç æ–¹å¼å­˜å‚¨çš„ã€‚</p>
<p>ä½ ä¹Ÿè®¸ä¼šé—®ï¼Œä¸ºä»€ä¹ˆæ“ä½œç³»ç»Ÿéƒ½è¿™ä¹ˆåçˆ± UTF-16ï¼ŒStack Exchange ä¸Šé¢æœ‰ä¸€ä¸ªç²¾å½©çš„å›ç­”ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å»äº†è§£</p>
<ul>
<li><a href="http://programmers.stackexchange.com/questions/102205/should-utf-16-be-considered-harmful" target="_blank" rel="external">Should UTF-16 be considered harmful?</a></li>
<li><a href="http://utf8everywhere.org/" target="_blank" rel="external">UTF-8 Everywhere</a></li>
</ul>
<h4 id="Locale"><a href="#Locale" class="headerlink" title="Locale"></a>Locale</h4><p>ä¸ºäº†é€‚åº”å¤šè¯­è¨€ç¯å¢ƒï¼ŒLinux/Mac ç³»ç»Ÿé€šè¿‡ <a href="http://man7.org/linux/man-pages/man7/locale.7.html" target="_blank" rel="external">locale</a> æ¥è®¾ç½®ç³»ç»Ÿçš„è¯­è¨€ç¯å¢ƒï¼Œä¸‹é¢æ˜¯æˆ‘åœ¨ Mac ç»ˆç«¯è¾“å…¥<code>locale</code>å¾—åˆ°çš„è¾“å‡º</p>
<pre><code>LANG=&quot;en_US.UTF-8&quot;         &lt;==ä¸»è¯­è¨€çš„ç¯å¢ƒ
LC_COLLATE=&quot;en_US.UTF-8&quot;   &lt;==å­—ä¸²çš„æ¯”è¾ƒæ’åºç­‰
LC_CTYPE=&quot;en_US.UTF-8&quot;     &lt;==è¯­è¨€ç¬¦å·åŠå…¶åˆ†ç±»
LC_MESSAGES=&quot;en_US.UTF-8&quot;  &lt;==ä¿¡æ¯æ˜¾ç¤ºçš„å†…å®¹ï¼Œå¦‚åŠŸèƒ½è¡¨ã€é”™è¯¯ä¿¡æ¯ç­‰
LC_MONETARY=&quot;en_US.UTF-8&quot;  &lt;==å¸å€¼æ ¼å¼çš„æ˜¾ç¤ºç­‰
LC_NUMERIC=&quot;en_US.UTF-8&quot;   &lt;==æ•°å­—ç³»ç»Ÿçš„æ˜¾ç¤ºä¿¡æ¯
LC_TIME=&quot;en_US.UTF-8&quot;      &lt;==æ—¶é—´ç³»ç»Ÿçš„æ˜¾ç¤ºèµ„æ–™
LC_ALL=&quot;en_US.UTF-8&quot;       &lt;==è¯­è¨€ç¯å¢ƒçš„æ•´ä½“è®¾å®š
</code></pre><p>locale æŒ‰ç…§æ‰€æ¶‰åŠåˆ°çš„æ–‡åŒ–ä¼ ç»Ÿçš„å„ä¸ªæ–¹é¢åˆ†æˆ12ä¸ªå¤§ç±»ï¼Œä¸Šé¢çš„è¾“å‡ºåªæ˜¾ç¤ºäº†å…¶ä¸­çš„ 6 ç±»ã€‚ä¸ºäº†è®¾ç½®æ–¹ä¾¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®<code>LC_ALL</code>ã€<code>LANG</code>æ¥æ”¹å˜è¿™ 12 ä¸ªåˆ†ç±»ç†Ÿæ‚‰ã€‚å…¶ä¼˜å…ˆçº§å…³ç³»ä¸º</p>
<blockquote>
<p><code>LC_ALL</code> &gt; <code>LC_*</code> &gt; <code>LANG</code></p>
</blockquote>
<p>è®¾ç½®å¥½ localeï¼Œæ“ä½œç³»ç»Ÿåœ¨è¿›è¡Œæ–‡æœ¬å­—èŠ‚æµè§£ææ—¶ï¼Œå¦‚æœæ²¡æœ‰æ˜ç¡®åˆ¶å®šå…¶ç¼–ç ï¼Œå°±ç”¨ locale è®¾å®šçš„ç¼–ç æ–¹æ¡ˆï¼Œå½“ç„¶ç°åœ¨çš„æ“ä½œç³»ç»Ÿéƒ½æ¯”è¾ƒèªæ˜ï¼Œåœ¨ç”¨é»˜è®¤ç¼–ç æ–¹æ¡ˆè§£ç ä¸æˆåŠŸæ—¶ï¼Œä¼šå°è¯•å…¶ä»–ç¼–ç ï¼Œç°åœ¨æ¯”è¾ƒæˆç†Ÿçš„ç¼–ç æµ‹æ¢æŠ€æœ¯æœ‰<a href="http://www-archive.mozilla.org/projects/intl/UniversalCharsetDetection.html" target="_blank" rel="external">Mozila çš„ UniversalCharsetDetection</a> ä¸ <a href="http://userguide.icu-project.org/conversion/detection" target="_blank" rel="external">ICU çš„ Character Set Detection</a> ã€‚</p>
<h3 id="ç¼–ç¨‹è¯­è¨€"><a href="#ç¼–ç¨‹è¯­è¨€" class="headerlink" title="ç¼–ç¨‹è¯­è¨€"></a>ç¼–ç¨‹è¯­è¨€</h3><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><p>ä¸€èˆ¬æ¥è¯´ï¼Œé«˜çº§ç¼–ç¨‹è¯­è¨€éƒ½æä¾›éƒ½å¯¹å­—ç¬¦çš„æ”¯æŒï¼Œåƒ Java ä¸­çš„ <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html" target="_blank" rel="external">Character</a> ç±»å°±é‡‡ç”¨ UTF-16 ç¼–ç æ–¹æ¡ˆã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ªæ–‡å­—æ¸¸æˆï¼Œä¸€èˆ¬æˆ‘ä»¬è¯´â€œæŸæŸå­—ç¬¦ä¸²æ˜¯XXç¼–ç â€ï¼Œå…¶å®è¿™æ˜¯ä¸åˆç†çš„ï¼Œå› ä¸ºå­—ç¬¦ä¸²å‹æ ¹å°±æ²¡æœ‰ç¼–ç è¿™ä¸€è¯´æ³•ï¼Œåªæœ‰<strong>å­—ç¬¦</strong>æ‰æœ‰ï¼Œå­—ç¬¦ä¸²åªæ˜¯å­—ç¬¦çš„ä¸€ä¸²åºåˆ—è€Œå·²ã€‚<br>ä¸è¿‡æˆ‘ä»¬å¹³æ—¶å¹¶æ²¡æœ‰è¿™ä¹ˆä¸¥è°¨ï¼Œä¸è¿‡ä½ è¦æ˜ç™½ï¼Œå½“æˆ‘ä»¬è¯´â€œæŸæŸå­—ç¬¦ä¸²æ˜¯XXç¼–ç â€æ—¶ï¼ŒçŸ¥é“è¿™å…¶å®æŒ‡çš„æ˜¯è¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ç¼–ç å°±å¯ä»¥äº†ã€‚<br>è¿™ä¹Ÿå°±å›ç­”äº†æœ¬æ–‡ä¸€å¼€å§‹æåˆ°é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯å­—ç¬¦ä¸²ï¼Œè¿™é‡Œç”¨ã€ŠDiving into Python 3ã€‹ä¹¦ä¸Šçš„ä¸€å¥è¯æ¥æ€»ç»“è¿™ä¸ªé—®é¢˜ï¼š</p>
<blockquote>
<p>Bytes are not character, bytes are bytes. Characters are an abstraction. A string is a sequence of those abstraction.</p>
</blockquote>
<p>æˆ‘ä»¬å¯ä»¥åšä¸ªç®€å•çš„å®éªŒæ¥éªŒè¯ Java ä¸­ç¡®å®ä½¿ç”¨ UTF-16 ç¼–ç æ¥å­˜å‚¨å­—ç¬¦ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public class EncodingTest &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        String s  = &quot;ä¸­å›½äººa&quot;;</div><div class="line">        try &#123;</div><div class="line">            //çº¿ç¨‹ç¡çœ ï¼Œä¸è¦è®©çº¿ç¨‹é€€å‡º</div><div class="line">            Thread.sleep(10000000);</div><div class="line">        &#125; catch (InterruptedException e) &#123;</div><div class="line">            e.printStackTrace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>åœ¨ä½¿ç”¨ javac ç¼–è¯‘è¿™ä¸ªç±»æ—¶ï¼Œjavac ä¼šæŒ‰ç…§æ“ä½œç³»ç»Ÿé»˜è®¤çš„ç¼–ç å»è§£æå­—èŠ‚æµï¼Œå¦‚æœä½ ä¿å­˜çš„æºæ–‡ä»¶ç¼–ç ä¸æ“ä½œç³»ç»Ÿé»˜è®¤ä¸ä¸€è‡´ï¼Œæ˜¯å¯èƒ½å‡ºé”™çš„ï¼Œå¯ä»¥åœ¨å¯åŠ¨ javac å‘½ä»¤æ—¶ï¼Œé™„åŠ <code>-encoding &lt;encoding&gt;</code>é€‰é¡¹æ¥æŒ‡æ˜æºä»£ç æ–‡ä»¶æ‰€ä½¿ç”¨çš„ç¼–ç ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># ç¼–è¯‘ç”Ÿæˆ .class æ–‡ä»¶</div><div class="line">javac -encoding utf-8 EncodingTest.java</div><div class="line"># æ‰§è¡Œè¯¥ç±»</div><div class="line">java EncodingTest</div><div class="line"># ä½¿ç”¨ jps æŸ¥çœ‹å…¶ pidï¼Œç„¶åç”¨ jmap æŠŠç¨‹åºè¿è¡Œæ—¶å†…å­˜çš„å†…å®¹ dump ä¸‹æ¥</div><div class="line">jmap -dump:live,format=b,file=encoding_test.bin &lt;pid&gt;</div><div class="line"># åœ¨ Linux/Mac ç³»ç»Ÿä¸Šï¼Œä½¿ç”¨ xxd å‘½ä»¤ä»¥åå…­è¿›åˆ¶æŸ¥çœ‹è¯¥æ–‡ä»¶ï¼Œæˆ‘è¿™é‡Œç”¨ç®¡é“ä¼ ç»™äº† vim</div><div class="line">xxd encoding_test.bin | vim -</div></pre></td></tr></table></figure></p>
<p>åœ¨ vim ä¸­å¯ä»¥çœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºç‰‡æ®µ<br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2RigHhpXXXXb5XpXXXXXXXXXX_!!581166664.png" alt="ä»¥16è¿›åˆ¶æ˜¾ç¤ºçš„memory dump"><br>å…¶ä¸­æˆ‘ç”¨çº¢æ¡†æ ‡æ³¨éƒ¨åˆ†å°±æ˜¯ä¸Šé¢ EncodingTest ç±»ä¸­å­—ç¬¦ä¸²<code>s</code>çš„å†…å®¹ï¼Œ<code>4e2d</code>æ˜¯â€œä¸­â€çš„ code pointï¼Œ<code>56fd</code>æ˜¯â€œå›½â€çš„ code pointï¼Œ <code>4eba</code>æ˜¯â€œäººâ€çš„ code pointï¼Œ<code>0061</code>æ˜¯â€œaâ€çš„ code pointã€‚è€Œåœ¨ UTF-16 ç¼–ç ä¸­ï¼Œ0-66535ä¹‹é—´çš„å­—ç¬¦ç›´æ¥ç”¨ä¸¤ä¸ªå­—èŠ‚å­˜å‚¨ï¼Œè¿™ä¹Ÿå°±è¯æ˜äº† Java ä¸­çš„ <code>Character</code> æ˜¯ä½¿ç”¨ UTF-16 ç¼–ç çš„ã€‚</p>
<p>å…³äº Java æ”¯æŒçš„æ‰€æœ‰ç¼–ç ï¼Œå¯ä»¥åœ¨ Oracle å®˜æ–¹æ–‡æ¡£ <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/intl/encoding.doc.html" target="_blank" rel="external">Supported Encodings</a>ä¸­æ‰¾åˆ°ã€‚</p>
<h4 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h4><h5 id="Python-è§£é‡Šå™¨"><a href="#Python-è§£é‡Šå™¨" class="headerlink" title="Python è§£é‡Šå™¨"></a>Python è§£é‡Šå™¨</h5><p>é¦–å…ˆè¯´ä¸‹ Python è§£é‡Šå™¨å¦‚ä½•è¯»å–ã€è§£æ Python æºç¨‹åºã€‚</p>
<p>åœ¨ Python 2 ä¸­ï¼ŒPython è§£æå™¨é»˜è®¤ç”¨ ASCII ç¼–ç ï¼ˆè€Œéç³»ç»Ÿé»˜è®¤ç¼–ç ï¼‰æ¥è¯»å–æºç¨‹åºï¼Œå½“ç¨‹åºä¸­åŒ…å«é ASCII å­—ç¬¦æ—¶ï¼Œè§£é‡Šå™¨ä¼šæŠ¥é”™ï¼Œä¸‹é¢å®éªŒåœ¨æˆ‘ Mac ä¸Šç”¨ python 2.7.6 è¿›è¡Œï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ cat str.py</div><div class="line">#!/usr/bin/env python</div><div class="line">a = &quot;ä¸­å›½äºº&quot;</div><div class="line"></div><div class="line">$ python str.py</div><div class="line">  File &quot;str.py&quot;, line 2</div><div class="line">SyntaxError: Non-ASCII character &apos;\xe4&apos; in file str.py on line 2, but no encoding declared; see http://www.python.org/peps/pep-0263.html for details</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨æºç¨‹åºèµ·å§‹å¤„ç”¨<code>coding: name</code>æˆ–<code>coding=name</code>æ¥å£°æ˜æºç¨‹åºæ‰€ç”¨çš„ç¼–ç ã€‚</p>
<p>Python 3 ä¸­æ”¹å˜äº†è¿™ä¸€è¡Œä¸ºï¼Œè§£æå™¨é»˜è®¤é‡‡ç”¨ UTF-8 è§£ææºç¨‹åºã€‚</p>
<h5 id="å­—ç¬¦ç±»å‹"><a href="#å­—ç¬¦ç±»å‹" class="headerlink" title="å­—ç¬¦ç±»å‹"></a>å­—ç¬¦ç±»å‹</h5><p>ä¸‹é¢ä»‹ç» Python 2/3 ä¸­å¯¹å­—ç¬¦çš„å¤„ç†ã€‚</p>
<p>Python 2 ä¸­å¯¹å­—ç¬¦çš„å¤„ç†å‘æ¯”è¾ƒå¤šï¼Œæˆ‘è¿™é‡Œå•ç‹¬å†™äº†ç¯‡æ–‡ç« ä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥å‚è€ƒï¼š<a href="/blog/2016/06/30/python2-encoding/">ã€ŠPython2 ä¸­çš„ç¼–ç é—®é¢˜ã€‹</a>ã€‚ </p>
<p>Python 3 ä¸­æ”¹å˜äº†è¿™ä¸€è¡Œä¸ºï¼Œå­—ç¬¦å­—é¢é‡ç›´æ¥è¡¨ç¤ºä¸º Unicode å­—ç¬¦ï¼Œå¼•å…¥ä»¥â€œå­—èŠ‚â€ç±»å‹è¡¨ç¤º Python 2 ä¸­çš„ str ç±»å‹ï¼Œæ ¹æ®<a href="https://www.python.org/dev/peps/pep-0393/#specification" target="_blank" rel="external">PEP-0393</a>ï¼ŒPython 3 å†…éƒ¨é‡‡ç”¨å¤šç§ç¼–ç æ–¹æ¡ˆï¼Œè€Œä¸ä»…ä»…æ˜¯å•å•ä¸€ç§ï¼ˆç»†èŠ‚å¯ä»¥å‚è€ƒ<a href="https://github.com/python/cpython/blob/1fe0fd9feb6a4472a9a1b186502eb9c0b2366326/Doc/c-api/unicode.rst" target="_blank" rel="external">c-api/unicode</a>ï¼‰ï¼Œè¿™ä¹ˆåšæ˜¯æƒè¡¡å­—ç¬¦å­˜å‚¨ç©ºé—´ä¸å­—ç¬¦æ“ä½œé€Ÿåº¦åçš„ç»“æœï¼Œä¸‹é¢ç»™å‡º CPython ä¸­ç›¸å…³çš„å®šä¹‰ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">typedef struct &#123;</div><div class="line">  PyObject_HEAD</div><div class="line">  Py_ssize_t length;</div><div class="line">  Py_hash_t hash;</div><div class="line">  struct &#123;</div><div class="line">      unsigned int interned:2;</div><div class="line">      unsigned int kind:2;</div><div class="line">      unsigned int compact:1;</div><div class="line">      unsigned int ascii:1;</div><div class="line">      unsigned int ready:1;</div><div class="line">  &#125; state;</div><div class="line">  wchar_t *wstr;</div><div class="line">&#125; PyASCIIObject;</div><div class="line"></div><div class="line">typedef struct &#123;</div><div class="line">  PyASCIIObject _base;</div><div class="line">  Py_ssize_t utf8_length;</div><div class="line">  char *utf8;</div><div class="line">  Py_ssize_t wstr_length;</div><div class="line">&#125; PyCompactUnicodeObject;</div><div class="line"></div><div class="line">typedef struct &#123;</div><div class="line">  PyCompactUnicodeObject _base;</div><div class="line">  // å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œç”¨äº† union ç±»å‹ï¼Œå®é™…ä¸­ data çš„ç±»å‹ä¸ºå››ç§ä¸­çš„ä¸€ä¸ª</div><div class="line">  // åŒæ—¶ï¼Œè¿™é‡Œçš„ ucs2 ç›¸å½“äº utf-16ï¼›ucs4 ç›¸å½“äº utf-32</div><div class="line">  union &#123;</div><div class="line">      void *any;</div><div class="line">      Py_UCS1 *latin1;</div><div class="line">      Py_UCS2 *ucs2;</div><div class="line">      Py_UCS4 *ucs4;</div><div class="line">  &#125; data;</div><div class="line">&#125; PyUnicodeObject;</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬ä¹Ÿå¯ä»¥åšä¸ªå®éªŒéªŒè¯ Python ä¸­ Unicode çš„å­˜å‚¨æ–¹æ¡ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">$ python3</div><div class="line">Python 3.5.0 (v3.5.0:374f501f4567, Sep 12 2015, 11:00:19)</div><div class="line">[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin</div><div class="line">Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.</div><div class="line">&gt;&gt;&gt; a  = &quot;ä¸­å›½äºº&quot;</div><div class="line">&gt;&gt;&gt; import ctypes</div><div class="line">&gt;&gt;&gt; import binascii</div><div class="line">&gt;&gt;&gt; binascii.hexlify(ctypes.string_at(id(a), a.__sizeof__()))</div><div class="line">b&apos;010000000000000020c52200010000000300000000000000cfb73264f62ba107a81c22000100000000000000000000000000000000000000000000000</div><div class="line">000000000000000000000002d4efd56ba4e0000&apos;</div><div class="line">&gt;&gt;&gt; binascii.hexlify(a.encode(&apos;utf-16&apos;))</div><div class="line">b&apos;fffe2d4efd56ba4e&apos;</div></pre></td></tr></table></figure></p>
<p><code>fffe</code>æ˜¯ UTF-16 çš„ BOMï¼Œè¡¨æ˜æˆ‘çš„Macæ˜¯å°ç«¯æ¨¡å¼ã€‚éšåçš„<code>2d4e</code>è¡¨ç¤º<code>ä¸­</code>ï¼›<code>fd56</code>è¡¨ç¤º<code>å›½</code>ï¼›<code>ba4e</code>è¡¨ç¤º<code>äºº</code>ï¼Œæœ€åçš„<code>0000</code>è¡¨æ˜ Python ä¸­çš„å­—ç¬¦ä¸²å’Œ C è¯­è¨€ä¸­çš„ä¸€æ ·ï¼Œç”¨<code>\0</code>æ ‡æ˜å­—ç¬¦çš„ç»“å°¾ã€‚<br>å¦‚æœä½ æ¯”è¾ƒç»†å¿ƒï¼Œå¯èƒ½ä¼šå‘ç° CPython ä¸­å­—ç¬¦ç›¸å…³çš„ç»“æ„ä½“ä¸­åŒ…å«äº†<code>length</code>è¿™ä¸€å­—æ®µäº†ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œåˆå¤šæ­¤ä¸€ä¸¾ï¼ŒåŠ ä¸ªå°¾æ ‡å‘¢ï¼Ÿå…¶å®è¿™ä¸»è¦æ˜¯ä¸ºäº†Python ä¸ C çš„äº¤äº’ï¼Œæœ‰äº†<code>\0</code>ï¼ŒPython å°±å¯ä»¥ç›´æ¥è¯»å– C ä¸­çš„å­—ç¬¦ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å°† Python ä¸­çš„å­—ç¬¦ç›´æ¥ä¼ ç»™ C äº†ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="http://lucumr.pocoo.org/2014/1/5/unicode-in-2-and-3/" target="_blank" rel="external">More About Unicode in Python 2 and 3</a></li>
<li><a href="http://v2ex.com/t/247821" target="_blank" rel="external"> Python3 çš„ str åº•å±‚æ˜¯ç”¨ä»€ä¹ˆç¼–ç å‚¨å­˜çš„ï¼Ÿ</a></li>
</ul>
<h4 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h4><p>JavaScript éµå¾ª ECMAScript è§„èŒƒï¼Œåœ¨ <a href="http://es5.github.io/x2.html#x2" target="_blank" rel="external">ECMAScript 5.1</a> ä¸­æœ‰ä¸‹é¢çš„å®šä¹‰ï¼š</p>
<blockquote>
<p>A conforming implementation of this International standard shall interpret characters in conformance with the Unicode Standard, Version 3.0 or later and ISO/IEC 10646-1 with either UCS-2 or UTF-16 as the adopted encoding form, implementation level 3. If the adopted ISO/IEC 10646-1 subset is not otherwise specified, it is presumed to be the BMP subset, collection 300. If the adopted encoding form is not otherwise specified, it is presumed to be the UTF-16 encoding form.</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ JavaScript è§£é‡Šå™¨çš„å®ç°ï¼Œå³å¯ä»¥ç”¨ UCS-2 ä¹Ÿå¯ä»¥ç”¨ UTF-16ï¼Œä½†æ˜¯è€ƒè™‘åˆ° UTF-16 æ˜¯ UCS-2 çš„è¶…é›†ï¼Œæ‰€ä»¥ç°åœ¨æµè§ˆå™¨ä¸­çš„ JavaScript å¼•æ“éƒ½ç”¨ UTF-16 å­˜å‚¨å­—ç¬¦ä¸²ã€‚<br>æˆ‘è¿™é‡Œåšäº†ä¸ªå®éªŒéªŒè¯ Nodejs ä¸­å­—ç¬¦çš„å­˜å‚¨æ–¹æ¡ˆï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"># 1. å®‰è£…è¿™ä¸ªæ¨¡å—</div><div class="line">npm install heapdump</div><div class="line"># 2. å†™ä¸ªç®€å•çš„ç¨‹åº</div><div class="line">var heapdump = require(&apos;heapdump&apos;);</div><div class="line">var a = &quot;ä¸­å›½äºº&quot;;</div><div class="line">heapdump.writeSnapshot(&apos;str_test.heapsnapshot&apos;);</div><div class="line"># 3. æ‰§è¡Œä¸Šé¢çš„ç¨‹åºåï¼Œæ‰¾ä¸ªäºŒè¿›åˆ¶ç¼–è¾‘å™¨ï¼Œæ‰“å¼€ç”Ÿæˆçš„å†…å­˜å¿«ç…§æ–‡ä»¶ã€‚æˆ‘è¿™é‡Œç”¨äº† xxd</div><div class="line">xxd str_test.heapsnapshot | vim -</div></pre></td></tr></table></figure></p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2yyi9jXXXXXauXXXXXXXXXXXX_!!581166664.png" alt="Nodejs å­—ç¬¦å†…å­˜å¿«ç…§"></p>
<p>ä¸Šå›¾ä¸­çš„<code>\u4E2D</code>å³ä¸ºâ€œä¸­â€ï¼Œåœ¨å†…å­˜ä¸­çš„å­—èŠ‚åºä¸º<code>5c75 3445 3244</code>ï¼Œè¿™ä¸€ä¸²æ•°å­—æ˜¯<code>\u4E2D</code>çš„ ASCII ç ã€‚</p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://mathiasbynens.be/notes/javascript-encoding" target="_blank" rel="external">JavaScriptâ€™s internal character encoding: UCS-2 or UTF-16?</a></li>
</ul>
<h3 id="HTML-XML"><a href="#HTML-XML" class="headerlink" title="HTML/XML"></a>HTML/XML</h3><p>åœ¨æˆ‘ä»¬çš„ Web æµè§ˆå™¨æ¥æ”¶åˆ°æ¥è‡ªä¸–ç•Œå„åœ°çš„ HTML/XML æ—¶ï¼Œä¹Ÿéœ€è¦æ­£ç¡®çš„ç¼–ç æ–¹æ¡ˆæ‰èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºç½‘é¡µï¼Œåœ¨ç°ä»£çš„ HTML5 é¡µé¢ï¼Œä¸€èˆ¬é€šè¿‡ä¸‹é¢çš„ä»£ç æŒ‡å®š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta charset=&quot;UTF-8&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>4.0.1 ä¹‹å‰çš„ HTML é¡µé¢ä½¿ç”¨ä¸‹é¢çš„ä»£ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html;charset=UTF-8&quot;&gt;</div></pre></td></tr></table></figure></p>
<p>XML ä½¿ç”¨å±æ€§æ ‡æ³¨å…¶ç¼–ç <br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</div></pre></td></tr></table></figure></p>
<p>ä»”ç»†æƒ³æƒ³ï¼Œè¿™é‡Œæœ‰ä¸ªçŸ›ç›¾çš„åœ°æ–¹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦äº‹å…ˆçŸ¥é“æŸå­—èŠ‚æµçš„ç¼–ç æ‰èƒ½æ­£ç¡®è§£æè¯¥å­—èŠ‚æµï¼Œè€Œè¿™ä¸ªå­—èŠ‚æµçš„ç¼–ç æ˜¯ä¿å­˜åœ¨è¿™æ®µå­—èŠ‚æµä¸­çš„ï¼Œå’Œâ€œé¸¡ç”Ÿè›‹ï¼Œè›‹ç”Ÿé¸¡â€çš„é—®é¢˜æœ‰ç‚¹åƒï¼Œå…¶å®è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¤§éƒ¨åˆ†çš„ç¼–ç éƒ½æ˜¯å…¼å®¹ ASCII ç¼–ç çš„ï¼Œè€Œè¿™äº› HTML/XML å¼€å§‹å¤„åŸºæœ¬éƒ½æ˜¯ ASCII å­—ç¬¦ï¼Œæ‰€ä»¥é‡‡ç”¨æµè§ˆå™¨é»˜è®¤çš„ç¼–ç æ–¹æ¡ˆå³å¯è§£æå‡ºè¯¥å­—èŠ‚æµæ‰€å£°æ˜çš„ç¼–ç ï¼Œåœ¨è§£æå‡ºè¯¥å­—èŠ‚æµæ‰€ç”¨ç¼–ç åï¼Œä½¿ç”¨è¯¥ç¼–ç é‡æ–°è§£æè¯¥å­—èŠ‚æµã€‚</p>
<h3 id="VIM"><a href="#VIM" class="headerlink" title="VIM"></a>VIM</h3><ul>
<li><a href="http://edyfox.codecarver.org/html/vim_fileencodings_detection.html" target="_blank" rel="external">vim_fileencodings_detection</a></li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ç¯‡æ–‡ç« ç¬¬ä¸€æ¬¡å†™ç”¨äº†å‘¨æœ« 2 å¤©æ—¶é—´æ‰å®Œæˆï¼Œåœ¨åé¢é™†é™†ç»­ç»­åˆå¢åˆ äº†ä¸å°‘ï¼Œæˆ‘åªèƒ½è¯´çœŸæ˜¯é•¿è§è¯†äº†ã€‚åœ¨ wiki ä¸Šæœç´¢çš„èµ„æ–™æ—¶ï¼Œéœ€è¦æ¶ˆè€—è¾ƒå¤§ç²¾åŠ›å»æ•´ç†ï¼Œå› ä¸ºå„ä¸ªç¼–ç éƒ½ä¸æ˜¯å­¤ç«‹å­˜åœ¨çš„ï¼Œè¦æƒ³å®Œæ•´äº†è§£æŸç¼–ç ï¼Œéœ€è¦ä»èµ·å‘å±•å†å²å¼€å§‹ï¼Œåœ¨ä¸åŒç¼–ç æ¡ç›®é—´æ¥å›åˆ‡æ¢ï¼Œæ‰èƒ½å¯¹å…¶æœ‰æ·±å…¥ç†è§£ã€‚è¿™æ˜¯æˆ‘æ„æ–™ä¹‹å¤–çš„ã€‚</p>
<p>å­—ç¬¦ä¸²ï¼Œè¿™ä¸ªæ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„ä¸œè¥¿ï¼Œç›¸ä¿¡å¤§å®¶åœ¨çœ‹æœ¬æ–‡åï¼Œå¤§å®¶éƒ½èƒ½å¤Ÿå¯¹å…¶æœ‰ä¸€å…¨æ–°çš„è®¤è¯†ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ol>
<li><a href="http://www.joelonsoftware.com/articles/Unicode.html" target="_blank" rel="external">The Absolute Minimum Every Software Developer Absolutely, Positively Must Know About Unicode and Character Sets (No Excuses!)</a></li>
<li><a href="http://programmers.stackexchange.com/questions/291950/are-data-type-declarators-like-int-and-char-stored-in-ram-when-a-c-program-e" target="_blank" rel="external">Are data type declarators like â€œintâ€ and â€œcharâ€ stored in RAM when a C program executes?</a></li>
<li><a href="http://www.utf8everywhere.org" target="_blank" rel="external">UTF-8 Everywhere</a></li>
<li><a href="http://www.ruanyifeng.com/blog/2007/10/ascii_unicode_and_utf-8.html" target="_blank" rel="external">å­—ç¬¦ç¼–ç ç¬”è®°ï¼šASCIIï¼ŒUnicodeå’ŒUTF-8</a></li>
<li><a href="http://illegalargumentexception.blogspot.hk/2009/05/java-rough-guide-to-character-encoding.html" target="_blank" rel="external">Java: a rough guide to character encoding</a></li>
<li><a href="https://docs.python.org/2/howto/unicode.html" target="_blank" rel="external">Python Unicode HOWTO</a></li>
<li><a href="http://www.tldp.org/HOWTO/Unix-and-Internet-Fundamentals-HOWTO/core-formats.html" target="_blank" rel="external">How does my computer store things in memory?</a></li>
<li><a href="http://www.fmddlmyy.cn/text6.html" target="_blank" rel="external">è°ˆè°ˆUnicodeç¼–ç ï¼Œç®€è¦è§£é‡ŠUCSã€UTFã€BMPã€BOMç­‰åè¯</a></li>
<li><a href="https://docs.python.org/2.7/reference/datamodel.html#the-standard-type-hierarchy" target="_blank" rel="external">The Python Language Reference: Data model</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘åœ¨çœ‹&lt;a href=&quot;http://www.diveintopython3.net/strings.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠDive Into Python 3ã€‹&lt;/a&gt;ï¼Œç¬¬å››ç« è®²äº†å­—ç¬¦ä¸²ç›¸å…³çŸ¥è¯†ï¼Œçœ‹åæ‰å‘ç°ï¼Œå­—ç¬¦ä¸²è¿œ
    
    </summary>
    
      <category term="ç†è§£è®¡ç®—æœº" scheme="http://liujiacai.net/categories/aha-computer/"/>
    
    
      <category term="string" scheme="http://liujiacai.net/tags/string/"/>
    
  </entry>
  
  <entry>
    <title>SF é»‘å®¢é©¬æ‹‰æ¾èµ›åå›é¡¾</title>
    <link href="http://liujiacai.net/blog/2015/10/27/sf-hackathon/"/>
    <id>http://liujiacai.net/blog/2015/10/27/sf-hackathon/</id>
    <published>2015-10-27T13:05:30.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šä¸ªå‘¨æœ«ï¼Œä¹Ÿå°±æ˜¯10æœˆ24ã€25å·ï¼Œå‚åŠ äº†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡<a href="http://segmentfault.com/hackathon-2015" target="_blank" rel="external">é»‘å®¢é©¬æ‹‰æ¾</a>ï¼ˆhackathonï¼‰ï¼Œè™½ç„¶æœ€ç»ˆæ²¡æœ‰è·å¥–ï¼Œä½†æ˜¯è¿™ä¸ªæ¯”èµ›è¿‡ç¨‹ä¸­è¿˜æ˜¯ hack çš„æŒºçˆ½ï¼Œè¶ç°åœ¨è¿˜æœ‰ä½™çƒ­ï¼Œçºªå½•ä¸‹æ¯”èµ›æ—¶çš„ä¸€äº›å¿ƒå¾—ä¸æ”¶è·ã€‚</p>
<h2 id="ä¸ºä»€ä¹ˆå‚åŠ -hackathon"><a href="#ä¸ºä»€ä¹ˆå‚åŠ -hackathon" class="headerlink" title="ä¸ºä»€ä¹ˆå‚åŠ  hackathon"></a>ä¸ºä»€ä¹ˆå‚åŠ  hackathon</h2><p>å½“åœ¨å…¬å¸å¾—çŸ¥æœ‰é»‘å®¢é©¬æ‹‰æ¾ä¹‹åï¼Œæˆ‘å°±ç«‹å³æŠ¥åäº†ï¼Œè§‰å¾—è¿™ä»¶äº‹æœ¬èº«å°±å¾ˆé…·ï¼Œè™½ç„¶èº«è¾¹ä¸€äº›åŒäº‹è¯´æ­¤ç±»æ¯”èµ›æ²¡æ„æ€ï¼Œå¤§éƒ¨åˆ†äººéƒ½æ˜¯å¥”ç€æŠ•èµ„å»çš„ï¼Œä½†æˆ‘è¿˜æ˜¯è§‰å¾—è¦ä½ æ€ä¹ˆçœ‹äº†ï¼Œä½ å¦‚æœå»æ˜¯ä¸ºäº†é‚£å¥–å“ã€é’±ï¼Œæˆ‘è§‰å¾—é‚£å¤±å»äº† hackathon çš„æ„ä¹‰äº†ï¼Œhackathon æˆ‘ç†è§£çš„å°±æ˜¯</p>
<blockquote>
<p>åšä¸€äº›å¾ˆé…·çš„äº‹æƒ…ï¼Œè€Œè¿™äº›äº‹æƒ…åœ¨å¹³æ—¶çš„å·¥ä½œä¸­â€œç”¨ä¸åˆ°â€ï¼Œä½†æ˜¯å®Œæˆè¿™äº›äº‹èƒ½å¤Ÿè®©æˆ‘ä»¬æœ‰å¾ˆå¼ºçš„æ»¡è¶³æ„Ÿã€‚</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯ç©ï¼Œè™½ç„¶å½“çŸ¥é“è‡ªå·±çš„ä½œå“æ²¡æœ‰è·å¥–æ—¶ä¼šæœ‰äº›è®¸å¤±è½ï¼Œä½†é‚£æ˜¯ä¸€æ—¶çš„ï¼Œæœ€èµ·ç é‚£ä¸€å¤©ä¸€å¤œ codingï¼Œè®©æˆ‘ç¡®å®å¾ˆ highã€‚</p>
<h2 id="èµ›å‰å‡†å¤‡"><a href="#èµ›å‰å‡†å¤‡" class="headerlink" title="èµ›å‰å‡†å¤‡"></a>èµ›å‰å‡†å¤‡</h2><p>ç¼–ç¨‹è¯­è¨€æˆ‘æ¯«æ— ç–‘é—®çš„é€‰æ‹©äº† javascriptï¼Œä¸€æ¥ javascript ä¸ Scheme æœ‰<a href="https://en.wikipedia.org/wiki/JavaScript#JavaScript_and_Java" target="_blank" rel="external">å¾ˆæ·±çš„æ¸Šæº</a>ï¼Œå…¶æ¬¡æˆ‘ä¹Ÿä¸€ç›´æƒ³å¥½å¥½ç³»ç»Ÿå­¦ä¹ ä¸‹ nodejsï¼Œæ‰€ä»¥å°±æ˜¯å®ƒäº†ã€‚å‚åŠ æ¯”èµ›å‰çš„ä¸€å‘¨ï¼Œæˆ‘åœæ­¢äº† <a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">SICP</a> çš„é˜…è¯»ï¼Œè½¬è€Œè¿›æ”»<a href="http://book.douban.com/subject/25870705/" target="_blank" rel="external">ã€ŠNode.jså®æˆ˜ã€‹</a>ï¼Œè¿™æœ¬ä¹¦ä¹‹å‰æ–­æ–­ç»­ç»­ç¿»è¿‡å‰ä¸¤ç« ï¼Œè¿™æ¬¡åŸºæœ¬æŠŠè¿™æœ¬ä¹¦çœ‹å®Œäº†ï¼Œä¸»è¦æ˜¯å­¦ä¹ äº†ä¸‹å¦‚ä½•ç³»ç»Ÿçš„å¼€å‘ä¸€ä¸ªå®Œæ•´çš„ node åº”ç”¨ï¼ŒåŒ…æ‹¬å¸¸ç”¨æ¨¡å—ã€é€šç”¨æ¶æ„ç­‰ï¼Œä¹‹å‰å†™çš„ node éƒ½æ˜¯ç©å…·ï¼Œæ²¡æœ‰é”™è¯¯å¤„ç†ï¼Œæ²¡æœ‰å•å…ƒæµ‹è¯•ï¼ˆè¿™æ¬¡æ¯”èµ›è™½ç„¶ä¹Ÿæ²¡ç”¨ä¸Šï¼Œä½†æ˜¯çŸ¥é“äº†å¦‚ä½•ä½¿ç”¨ç›¸åº”å·¥å…·å»æµ‹äº†ï¼‰ã€‚</p>
<p>ä¹¦ä¸Šæœ€åä¸€ç« ä»‹ç»äº† node ä¸­è¾ƒä¸ºåº•å±‚çš„çŸ¥è¯†ï¼Œåƒ<code>net</code>åº“ï¼Œnode çš„å®šä½å°±æ˜¯æä¾›å°è€Œç¾çš„æ ¸å¿ƒç±»åº“ï¼Œå¸¸ç”¨çš„æ¨¡å—éƒ½æ˜¯åŸºäºè¿™äº›æ ¸å¿ƒç±»åº“æ„å»ºã€‚ä¸‹é¢çºªå½•ä¸¤ä¸ªä¹¦ä¸­æ¯”è¾ƒæœ‰è¶£çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">var net = require(&quot;net&quot;);</div><div class="line">var socket = net.connect(&#123;host: &quot;github.com&quot;, port: 22&#125;);</div><div class="line">socket.on(&quot;data&quot;, function(chunk) &#123;</div><div class="line">    console.log(chunk.toString());</div><div class="line">    socket.end();</div><div class="line">&#125;)</div><div class="line">// å¯åŠ¨åï¼Œä¼šè¾“å‡º SSH-2.0-libssh-0.7.0</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢çš„ä»£ç ç‰‡æ®µå®ç°äº†ç±»ä¼¼äº Linux ä¸Š <a href="http://linux.die.net/man/1/nc" target="_blank" rel="external">nc</a> å‘½ä»¤çš„åŠŸèƒ½ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">var net = require(&quot;net&quot;);</div><div class="line">var socket = net.connect(&#123;host: process.argv[2], port: process.argv[3]&#125;);</div><div class="line"></div><div class="line">socket.on(&quot;connect&quot;, function() &#123;</div><div class="line">    process.stdin.pipe(socket);</div><div class="line">    socket.pipe(process.stdout);</div><div class="line">    process.stdin.resume();</div><div class="line">&#125;);</div><div class="line">socket.on(&quot;close&quot;, function() &#123;</div><div class="line">    console.log(&quot;bye...&quot;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>å…¶æ¬¡åœ¨çœ‹ expressjs æ—¶ï¼Œæ— æ„é—´å‘ç°å…¶ä½œè€… <a href="https://github.com/tj" target="_blank" rel="external">tj</a> æ—©åœ¨ 2014å¹´4æœˆä»½ï¼Œå°±å·²ç»<a href="https://medium.com/@tjholowaychuk/farewell-node-js-4ba9e7f3e52b" target="_blank" rel="external">æŠ›å¼ƒ nodejsï¼ŒæŠ•å‘ go çš„æ€€æŠ±</a>ï¼Œå¿ƒä¸­éš¾å…æœ‰äº›å¿§ä¼¤ï¼Œå¤§ç‰›æ€»æ˜¯è¿™æ ·ï¼Œåœ¨æˆ‘ä»¬è¿˜åœ¨å­¦ä¹ æŸä¸œè¥¿æ—¶ï¼Œäººå®¶å·²ç»å‘ç°å…¶ç¼ºç‚¹ï¼Œè½¬å‘æ›´é«˜æ·±çš„åœ°æ–¹â€¦â€¦</p>
<h2 id="æ¯”èµ›å¼€å§‹äº†"><a href="#æ¯”èµ›å¼€å§‹äº†" class="headerlink" title="æ¯”èµ›å¼€å§‹äº†"></a>æ¯”èµ›å¼€å§‹äº†</h2><p>è¿™æ¬¡çš„æ¯”èµ›æ˜¯å‘½é¢˜åˆ¶â€”â€”æŠ€æœ¯æ”¹å˜ç”Ÿæ´»ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æ²¡æœ‰é™åˆ¶ï¼Œç»è¿‡æœ‰èµå°ä¼™ä¼´çš„ä¸€ç•ªè®¨è®ºï¼Œæœ€ç»ˆå®šäº†3ä¸ªé¢˜ç›®ï¼Œç„¶åå°±å¼€å§‹ç»„é˜Ÿåšäº†ï¼Œæˆ‘å’ŒåŠ²é£ä¸€ç»„ï¼Œåšçš„æ˜¯ä¸€ä¸ªè¶…å¸‚æ‰«ç è´­ç‰©çš„å¾®ä¿¡åº”ç”¨ï¼Œæƒ³è¦è§£å†³çš„åŸºæœ¬é—®é¢˜æ˜¯â€”â€”è¶…å¸‚æ’é•¿é˜Ÿä»˜æ¬¾ã€‚å¯¹äºæˆ‘æ¥è¯´ï¼Œä¸»è¦æ˜¯æƒ³åšä¸€äº›æœ‰éš¾åº¦çš„æŠ€æœ¯ï¼ŒæŒ‘æˆ˜è‡ªå·±ï¼Œä¹Ÿæ²¡æƒ³ä¸ºä»€ä¹ˆç°åœ¨è¶…å¸‚ä¸ºä»€ä¹ˆä¸æ¨è¡Œæ‰«ç è´­ç‰©ï¼Œå½“ç„¶è¿™ä¹Ÿæ˜¯åæ¥è¯„å§”é—®æˆ‘ä»¬çš„é—®é¢˜ã€‚<br>è¿™ä¸ªé¢˜ç›®ä¸»è¦çš„æŠ€æœ¯éš¾ç‚¹æœ‰ï¼š</p>
<h3 id="å¾®ä¿¡å…¬ä¼—å·å¼€å‘"><a href="#å¾®ä¿¡å…¬ä¼—å·å¼€å‘" class="headerlink" title="å¾®ä¿¡å…¬ä¼—å·å¼€å‘"></a>å¾®ä¿¡å…¬ä¼—å·å¼€å‘</h3><p>å¦‚ä½•æ‰«ç æ˜¯æˆ‘ä»¬é‡åˆ°çš„ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæ˜¯å€ŸåŠ©å¾®ä¿¡è¿˜æ˜¯è‡ªå·±åšåŸç”Ÿåº”ç”¨ï¼Œç”±äºæˆ‘ä¿©éƒ½ä¸ä¼š Android ä¸ IOS å¼€å‘ï¼Œæ‰€ä»¥å¾®ä¿¡æˆäº†å”¯ä¸€é€‰æ‹©ã€‚<br>å¾®ä¿¡å¼€å‘éœ€è¦æœ‰å…¬ä¼—å·ï¼Œå¦‚æœè°ƒç”¨ <a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html" target="_blank" rel="external">JS-SDK</a>ï¼Œéœ€è¦æœ‰å¤‡è¿‡æ¡ˆçš„åŸŸåï¼Œæˆ‘ä»¬éƒ½æ²¡æœ‰ï¼Œè¿™æ—¶æˆ‘æƒ³åˆ°äº†<a href="http://sundabao.com/" target="_blank" rel="external">å¤§å®</a>å…„ï¼Œä»–å¾ˆæ…·æ…¨çš„ç»™æˆ‘æä¾›äº‘ä¸»æœºã€mysqlã€nginxï¼ŒåŠ ä¸Šå®è´µçš„åŸŸåï¼Œå¾ˆæ˜¯æ„Ÿè°¢ã€‚ï¼ˆåé¢çŸ¥é“äº†å¯ä»¥ç”¨<a href="http://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login" target="_blank" rel="external">æµ‹è¯•å·</a>ï¼‰ã€‚</p>
<p>è¿™é‡Œå¿…é¡»åæ§½ä¸‹å¾®ä¿¡çš„å¼€å‘æ–‡æ¡£ï¼ŒçœŸæ˜¯çƒ‚ï¼šæ’ç‰ˆçƒ‚ã€ä¸ªåˆ«è¯­å¥ä¸é€šé¡ºã€ç»å¸¸æœ‰æ­»é“¾æ¥ï¼Œå¸Œæœ›å¾®ä¿¡å›¢é˜Ÿå¥½å¥½ç»´æŠ¤ä¸‹ã€‚</p>
<p>æ¯”å¦‚è¿™é‡Œçš„<a href="http://mp.weixin.qq.com/wiki/7/aaa137b55fb2e0456bf8dd9148dd613f.html" target="_blank" rel="external">ç­¾åç®—æ³•</a>ï¼Œç”±äºå¾®ä¿¡çš„äººä¸çŸ¥é“<a href="http://www.w3school.com.cn/html/html_links.asp" target="_blank" rel="external">å‘½åé”šï¼ˆnamed anchorsï¼‰</a>ï¼Œæ‰€ä»¥ä½ åœ¨æ‰“å¼€ä¸Šé¢çš„é“¾æ¥åï¼Œéœ€è¦ç”¨<code>Ctrl + F</code> æ¥æœç´¢ â€œç­¾åç®—æ³•â€ æ‰èƒ½æ‰¾åˆ°æˆ‘è¿™é‡Œæ‰€æŒ‡çš„ç­¾åç®—æ³•ï¼Œæœ€æœ€å‘äººçš„æ˜¯ï¼Œç”±äºç­¾åæ˜¯é’ˆå¯¹ç½‘é¡µ URL çš„ï¼Œæ‰€ä»¥ä¸€ä¸ªç½‘é¡µéœ€è¦ç­¾åä¸€ä¸ªï¼Œè€Œè¿™ä¸ª URL å¿…é¡»æ˜¯ä»¥<code>/</code>ç»“å°¾ï¼Œæ¯”å¦‚ï¼Œå¦‚æœç”¨<code>http://1024.sundabao.com</code>è¿™ä¸ª URL æ¥ç­¾åæ˜¯ä¸å¯¹çš„ï¼Œå¿…é¡»æ˜¯<code>http://1024.sundabao.com/</code>ï¼Œè¿™ä¸ªçœŸçš„å¥½å‘ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒGithubçš„<a href="https://developer.github.com/v3" target="_blank" rel="external">å¼€å‘è€…æ–‡æ¡£</a>ï¼Œçœ‹èµ·æ¥å°±å¾ˆè®©äººèˆ’æœï¼Œå¸Œæœ›å¾®ä¿¡å›¢é˜Ÿå¥½å¥½å­¦å­¦ã€‚</p>
<h3 id="è®¢å•ç³»ç»Ÿ"><a href="#è®¢å•ç³»ç»Ÿ" class="headerlink" title="è®¢å•ç³»ç»Ÿ"></a>è®¢å•ç³»ç»Ÿ</h3><p>æ‰«ç é—®é¢˜è§£å†³äº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯ä¸€ä¸ªé›†æˆè´­ç‰©è½¦çš„è®¢å•ç³»ç»Ÿï¼Œä¹‹å‰åœ¨å…¬å¸è™½ç„¶ä¹Ÿæ˜¯åœ¨æ•°æ®éƒ¨ï¼Œä½†æ˜¯æŠ¥è¡¨åšçš„ä¸å¤šï¼ŒçœŸæ˜¯æ²¡æƒ³åˆ°è¿™è®¢å•ç³»ç»Ÿæ˜¯å¤šä¹ˆéº»çƒ¦ï¼Œæˆ‘å½“æ—¶é‡åˆ°é—®é¢˜å°±æ˜¯ï¼Œè´­ç‰©è½¦é€‰å¥½åï¼Œç‚¹å‡»æäº¤ï¼Œè¿™æ—¶ï¼ŒæŒ‰ç†è¯´åº”è¯¥ç”Ÿæˆè®¢å•çš„ï¼Œä½†æ˜¯ç”Ÿæˆè®¢å•çš„åŒæ—¶æ˜¯å¦éœ€è¦æŠŠè´­ç‰©è½¦çš„å•†å“åˆ é™¤å‘¢ï¼Œç¬¬ä¸€æ„Ÿè§‰æ˜¯éœ€è¦ï¼Œä½†æ˜¯åæ¥å‘ç°ä¸æ˜¯è¿™æ ·çš„ï¼Œå¦‚æœé¡¾å®¢å‘ç°è¿˜æœ‰å•†å“æ²¡æœ‰è´­ä¹°ï¼Œè¿™æ—¶ä»–ä¼šè¿”å›ä¸Šä¸€é¡µç»§ç»­è´­ä¹°ï¼Œæ‰€ä»¥æ­£ç¡®çš„åšæ³•æ˜¯åœ¨ç¡®è®¤æ”¯ä»˜è®¢å•åï¼Œå†å»æŠŠè´­ç‰©è½¦çš„å•†å“åˆ æ‰ã€‚ä½†æ˜¯è¿™æ ·ä¹Ÿä¼šæœ‰é—®é¢˜ï¼Œå› ä¸ºé¡¾å®¢ç¡®è®¤æ”¯ä»˜æ–¹å¼åï¼Œæœ‰å¯èƒ½æ”¯ä»˜å¤±è´¥äº†ï¼Œè¿™æ—¶æŒ‰ç†è¯´è´­ç‰©è½¦é‡Œçš„ä¸œè¥¿è¿˜æ˜¯åº”è¯¥æœ‰çš„ï¼Œä½†æ˜¯æˆ‘ä»¬è¿™é‡Œæ¯”è¾ƒç®€å•ï¼Œåªè¦ç”¨æˆ·ç‚¹å‡»æ”¯ä»˜ï¼Œå°±è®¤ä¸ºæˆåŠŸäº†ã€‚å¯è§ï¼Œè¦åšä¸€ä¸ªå®Œæ•´çš„è®¢å•ï¼‹äº¤æ˜“ç³»ç»Ÿï¼Œæ˜¯å¤šä¹ˆä¸å®¹æ˜“çš„äº‹ã€‚</p>
<h3 id="callback-hell"><a href="#callback-hell" class="headerlink" title="callback hell"></a>callback hell</h3><p>ç”±äºè®¢å•ç³»ç»Ÿçš„é€»è¾‘æ¯”è¾ƒå¤šï¼Œæ¶‰åŠå¾ˆå¤šæ•°æ®åº“çš„æ“ä½œï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨ nodejs ä¹Ÿæ²¡ç”¨ä»€ä¹ˆ ORM ç³»ç»Ÿï¼Œåªæ˜¯ç”¨åŸç”Ÿçš„ sql æ¥åšï¼Œè¿™æ—¶å°±é™·å…¥äº† <a href="http://callbackhell.com/" target="_blank" rel="external">callback hell</a>ï¼Œä¹‹å‰å†™ node ç¨‹åºä¸€èˆ¬éƒ½ä¸æ€ä¹ˆå…³æ³¨é”™è¯¯å¤„ç†ï¼Œ æ‰€ä»¥ä¸€ç›´æ²¡æ€ä¹ˆå‘ç°è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ¬¡åœ¨åšè¿™ä¸ªè®¢å•ç³»ç»Ÿï¼ŒçœŸæ˜¯æš´éœ²æ— ç–‘ï¼Œå¤ªéš¾ç»´æŠ¤äº†ã€‚</p>
<p>ä¸‹é¢ä»£ç ç‰‡æ®µçš„åŠŸèƒ½æ˜¯ï¼šæ‰«æä¸€ä¸ªå•†å“ï¼Œå‘è´­ç‰©è½¦åˆ—è¡¨ä¸­å¢åŠ ä¸€ä¸ªå•†å“çš„ <code>callback hell</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">exports.add = function(userId, goodsId, goodsNum, cb) &#123;</div><div class="line">    var that = this;</div><div class="line">    var dbPool = db.getPool();</div><div class="line">    var sql = &quot;insert into 1024_cart values (?,?,?) ON DUPLICATE KEY UPDATE goods_num=goods_num+1&quot;;</div><div class="line">    sql = db.formatSQL(sql, [userId, goodsId, goodsNum]);</div><div class="line">    dbPool.query(sql, function(err, result) &#123;</div><div class="line">        if(err) &#123;</div><div class="line">            logger.error(&quot;exec:&quot; + sql + &quot; error:&quot; + err);</div><div class="line">            cb(&#123;code:-2, msg: &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼&quot;&#125;);</div><div class="line">        &#125; else if(result.affectedRows &gt; 0) &#123;</div><div class="line">            goodsDAO.select(goodsId, function(err, result) &#123;</div><div class="line">                if(err) &#123;</div><div class="line">                    logger.error(&quot;exec:goodsDAO.select. error:&quot; + err);</div><div class="line">                    cb(&#123;code:-2, msg: &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼&quot;&#125;);</div><div class="line">                &#125;</div><div class="line">                else if(result.length == 0) &#123;</div><div class="line">                    that.delete(userId, goodsId);</div><div class="line">                    cb(&#123;code:-1, msg: &quot;æ•°æ®åº“ä¸­æ²¡æœ‰è¯¥å•†å“ï¼&quot;&#125;);</div><div class="line">                &#125; else &#123;</div><div class="line">                    var goods = result[0];</div><div class="line">                    getGoodsNum(userId, goodsId, function(err, result) &#123;</div><div class="line">                        if(err) &#123;</div><div class="line">                            cb(&#123;code:-2, msg: &quot;æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ï¼&quot;&#125;);</div><div class="line">                        &#125; else &#123;</div><div class="line">                            goods[&quot;num&quot;] = result[0][&quot;goods_num&quot;];</div><div class="line">                            cb(&#123;code:0, data: goods&#125;);</div><div class="line">                        &#125;</div><div class="line">                    &#125;)</div><div class="line">                &#125;</div><div class="line">            &#125;); </div><div class="line">        &#125; else &#123;</div><div class="line">            cb(&#123;code:-3, msg: &quot;ä¿®æ”¹å¤±è´¥ï¼&quot;&#125;);</div><div class="line">        &#125;</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="ç¼–ç ä¸ç”Ÿæ´»"><a href="#ç¼–ç ä¸ç”Ÿæ´»" class="headerlink" title="ç¼–ç ä¸ç”Ÿæ´»"></a>ç¼–ç ä¸ç”Ÿæ´»</h2><p>åœ¨æ•´ä¸ªæ¯”èµ›è¿‡ç¨‹ä¸­ï¼ˆå¤§æ¦‚20ä¸ªå°æ—¶ï¼‰ï¼Œæˆ‘ç¡äº†ä¸åˆ°4ä¸ªå°æ—¶ï¼Œå¤§è„‘ä¸€ç›´å¤„äºå…´å¥‹çŠ¶æ€ï¼Œä¸€ç›´åœ¨è§£å†³é—®é¢˜ï¼Œä»åŠ¨æ€è·å–å¾®ä¿¡ç­¾åï¼Œåˆ°è§£å†³è®¢å•ç³»ç»Ÿçš„ bugï¼Œåˆ°æœ€åçš„æµ‹è¯•ï¼Œéƒ½æ˜¯æåº¦å…´å¥‹çš„ï¼Œcoding çš„æ¯”è¾ƒ highã€‚</p>
<blockquote>
<p><strong>æˆ‘è§‰å¾—æˆ‘ä¼šç¼–ç åˆ°è€</strong>ã€‚</p>
</blockquote>
<p>è®°å¾—åœ¨å­¦ç”Ÿæ—¶ä»£å°±ä¸æ–­å¬åˆ°æœ‰äººè¯´ï¼Œç¨‹åºå‘˜æ˜¯é’æ˜¥é¥­ï¼Œåšå‡ å¹´åè¦è½¬å‘ç®¡ç†å²—ï¼ŒçœŸä¸çŸ¥é“è¯´è¿™äº›è¯çš„äººæ˜¯å‡ºäºä»€ä¹ˆå¿ƒç†ï¼Œå½“ç„¶æœ‰éƒ¨åˆ†äººæ˜¯æŠŠç¼–ç å½“æˆä¸ºä¸€ä»½å…»å®¶ç³Šå£çš„å·¥ä½œï¼Œä½†æ˜¯æˆ‘ç›¸ä¿¡æ›´å¤šäººæ˜¯å› ä¸ºçƒ­çˆ±ç¼–ç è€Œç¼–ç çš„ï¼Œä»ç¼–ç ä¸­èƒ½æ±²å–æ— é™å¿«ä¹ã€‚</p>
<p>å¦‚æœä½ èº«è¾¹åœ¨æœ‰äºº balabala çš„è¯´è¯¸å¦‚æ­¤ç±»çš„è¯ï¼Œæˆ‘åŠä½ æœ€å¥½ç¦»è¿™ç§äººè¿œäº›ï¼Œé“ä¸åŒä¸ç›¸ä¸ºè°‹ï¼Œä¸–ç•Œè¿™ä¹ˆå¤§ï¼Œä¸ºä»€ä¹ˆä¸å»åšè‡ªå·±å–œæ¬¢çš„äº‹å‘¢ï¼Ÿ</p>
<h2 id="ç²¾å½©ç¬é—´"><a href="#ç²¾å½©ç¬é—´" class="headerlink" title="ç²¾å½©ç¬é—´"></a>ç²¾å½©ç¬é—´</h2><p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB29QBpgFXXXXcOXXXXXXXXXXXX_!!581166664.jpg" alt="ç¾ä¸½çš„äº’è”ç½‘å°é•‡"></p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2bstCgFXXXXXSXXXXXXXXXXXX_!!581166664.jpg" alt="åˆé¤æ—¶åˆ»"></p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2pBXCgFXXXXanXXXXXXXXXXXX_!!581166664.jpg" alt="æ¯”èµ›å¼€å§‹äº†"></p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2dNhogFXXXXXmXpXXXXXXXXXX_!!581166664.jpg" alt="ä¼‘æ¯ï¼Œä¼‘æ¯ä¸€ä¼šâ™¨ï¸"><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2ZDFngFXXXXXvXpXXXXXXXXXX_!!581166664.jpg" alt="å¤§å®¶éƒ½ç¡äº†ï¼Œä½†æˆ‘ä»¬è¿˜åœ¨ç»§ç»­..."></p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2QsppgFXXXXXQXpXXXXXXXXXX_!!581166664.jpg" alt="å‡Œæ™¨3ç‚¹çš„äº’è”ç½‘å°é•‡"></p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2w8xkgFXXXXX5XpXXXXXXXXXX_!!581166664.jpg" alt="åœ†æ»¡ç»“æŸï¼Œæ„Ÿè°¢ sf ç»„åŠæ–¹"></p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB212BEgFXXXXX0XXXXXXXXXXXX_!!581166664.jpg" alt="æœ‰èµå°ä¼™ä¼´"></p>
<p>æ³¨ï¼šå›¾ç‰‡å‡æ¥è‡ª sf å®˜æ–¹ï¼Œå¦‚æ¶‰åŠä¸ªäººéšç§è¯·å‘ŠçŸ¥ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™æ¬¡å‚åŠ æ¯”èµ›ï¼Œç©çš„å¾ˆå¼€å¿ƒï¼Œæ²¡ä»€ä¹ˆé—æ†¾ã€‚è‡³äºä»£ç å°±ä¸å¼€æºäº†ï¼Œå†™çš„æ¯”è¾ƒçƒ‚ï¼Œåé¢ç­‰åŠŸåŠ›æå‡äº†åœ¨è¯´è¿™äº‹ã€‚æ„Ÿå…´è¶£å¯ä»¥çœ‹çœ‹æˆ‘ä»¬ä½œå“<a href="http://note.youdao.com/share/web/file.html?id=134b727dc48180570c66408da03116d4&amp;type=note" target="_blank" rel="external">æ˜“è´­ EasyGo</a>çš„ç®€ä»‹ã€‚</p>
<p>è¿™é‡Œæˆ‘æƒ³å›ç­”å½“æ—¶è¯„å§”é—®æˆ‘ä»¬ç»„çš„é—®é¢˜â€”â€”<strong>ä¸ºä»€ä¹ˆç°åœ¨çš„è¶…å¸‚ä¸æ¨å¹¿æ‰«ç æ”¯ä»˜</strong>ï¼š</p>
<ol>
<li>äºŒç»´ç è¯†åˆ«åï¼Œä¸€èˆ¬ä¼šåŒ…å«å•†å“çš„ç”Ÿäº§æ—¥æœŸè¿™ä¸ªä¿¡æ¯ï¼Œè€Œå¯¹äºè¶…å¸‚æŸäº›äº§å“ï¼Œåƒæµ·é²œï¼Œæ˜¯ä¸æƒ³è®©é¡¾å®¢çŸ¥é“è¿™ä¸ªçš„â€¦</li>
<li>åŒä¸€å•†å“ä¸åŒè¶…å¸‚ä¹°çš„ä»·æ ¼å¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™æ ·å–çš„è´µçš„è¶…å¸‚æ˜¯ä¸æ„¿æ„ç”¨è¿™å¥—ç³»ç»Ÿçš„â€¦</li>
</ol>
<p>å¯¹äºè¿™äº›ï¼Œæˆ‘åªèƒ½è¯´ï¼Œç»æµåŸºç¡€å†³å®šä¸Šå±‚å»ºç­‘ï¼Œå•†å®¶è¿˜æ˜¯ä»¥ç›ˆåˆ©ä¸ºç›®çš„çš„ã€‚</p>
<p>æ¯”èµ›æ˜¯ç»“æŸäº†ï¼Œä½†ç”Ÿæ´»çš„æŒ‘æˆ˜è¿˜åœ¨ç»§ç»­ï¼Œ<a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">SICP</a> è¦ç»§ç»­æèµ·äº†ï¼Œè¿™æ¬¡åœäº†æœ‰ä¸¤ä¸ªå¤šæ˜ŸæœŸäº†ï¼ŒçœŸè¦å¤šä¸‹åŠŸå¤«äº†ã€‚</p>
<p>å¸Œæœ›å¤§å®¶éƒ½èƒ½å¤Ÿ happy hacking ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šä¸ªå‘¨æœ«ï¼Œä¹Ÿå°±æ˜¯10æœˆ24ã€25å·ï¼Œå‚åŠ äº†äººç”Ÿä¸­ç¬¬ä¸€æ¬¡&lt;a href=&quot;http://segmentfault.com/hackathon-2015&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;é»‘å®¢é©¬æ‹‰æ¾&lt;/a&gt;ï¼ˆhackathonï¼‰ï¼Œè™½ç„¶æœ€ç»ˆæ²¡æœ‰è·å¥–ï¼Œ
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
      <category term="nodejs" scheme="http://liujiacai.net/tags/nodejs/"/>
    
  </entry>
  
  <entry>
    <title>è½¬è½½ã€éç§‘ç­å‡ºèº«çš„äººå­¦ä¹ ç¼–ç¨‹ä¸è´Ÿè´£ä»»æŒ‡å—ã€</title>
    <link href="http://liujiacai.net/blog/2015/10/21/programming-guide/"/>
    <id>http://liujiacai.net/blog/2015/10/21/programming-guide/</id>
    <published>2015-10-21T13:50:18.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥æˆ‘ä»¬è¿™ä¸ªå®éªŒå®¤é‡Œè¯»ç ”çš„å­¦ç”Ÿå¯èƒ½è‡ªä»æ¥åˆ°è¿™é‡Œçš„ç¬¬ä¸€å¤©å°±è§‰å¾—è‡ªå·±çš„å‘½è¿å¾ˆè‹¦é€¼ã€‚ä»–ä»¬è¯»æœ¬ç§‘æ—¶ä¸»ä¿®çš„æ˜¯æœºæ¢°è®¾è®¡ã€åˆ¶é€ ä»¥åŠè‡ªåŠ¨åŒ–ä¹‹ç±»çš„ä¸“ä¸šï¼Œæ¯•ä¸šæ—¶çš„ç®€å†ä¸Šä¹Ÿé¡¶å¤šæ˜¯å†™å†™æ“…é•¿ MS Wordã€PowerPointã€UGNXã€AutoCAD ä¹‹ç±»çš„åº”ç”¨è½¯ä»¶ã€‚ä»–ä»¬æœ‰é™çš„å­¦ä¹ ç”Ÿæ¶¯é‡Œï¼Œæ€ä¹ˆä¹Ÿä¸ä¼šæƒ³åˆ°æ¥åˆ°è¿™é‡Œç«Ÿç„¶è¦é¦–å…ˆé‡æ–°å­¦ä¹  C è¯­è¨€ï¼Œç„¶åè¿˜è¦å­¦ C++ï¼Œæ¥ä¸‹æ¥è¿˜è¦å­¦ä¹  Python æˆ– Lua ä»€ä¹ˆçš„ï¼Œè€Œä¸”ç«Ÿç„¶è¿˜ä¸è®©ç”¨ Windowsï¼Œåªèƒ½ç”¨è¿ä¸ª QQ éƒ½æ²¡æœ‰å¹¶ä¸”ç»å¸¸å‡ºæ•…éšœçš„ Linuxâ€¦â€¦</p>
<p>åœ¨ä»–ä»¬å¿ƒé‡Œï¼Œç¼–ç¨‹ä¼¼ä¹å¹¶ä¸æ˜¯å¤šä¹ˆæœ‰è¶£çš„äº‹ï¼Œæ‰€ä»¥ä»–ä»¬å°±è§‰å¾—ç¼–ç¨‹å¾ˆéš¾ã€‚å¯¹æ­¤æˆ‘æœ‰åŒæ„Ÿï¼Œå¤§å®¶éƒ½ä¼šç©çš„ Windows é‡Œçš„æŒ–é›·ä¸çº¸ç‰Œé‚£æ ·çš„å°æ¸¸æˆï¼Œè¿˜æœ‰å¾ˆå¤šäººä¼šæ‰“çš„éº»å°†ï¼Œè¿˜æœ‰å›´æ£‹ï¼Œè¿™äº›äº‹æˆ‘è§‰å¾—ä¹ŸæŒºéš¾çš„ã€‚</p>
<p>æˆ‘æ›¾ç»å‘Šè¯‰ä»–ä»¬ï¼Œå¦‚æœä¸ä¼šç¼–ç¨‹ï¼Œé‚£ä¹ˆä»–ä»¬å°±å¾ˆéš¾è§£å†³è‡ªå·±çš„ç ”ç©¶æ–¹å‘ä¸Šçš„é‚£äº›é—®é¢˜ï¼Œå› æ­¤ä¹Ÿå°±ä¸å¯èƒ½å†™å‡ºæœ‰ä»·å€¼çš„è®ºæ–‡ï¼Œä¸å¯èƒ½é¡ºåˆ©çš„æ¯•ä¸šæ‹¿åˆ°å­¦ä½ï¼Œä¸å¯èƒ½æ‰¾åˆ°å¾ˆå¥½çš„å·¥ä½œâ€¦â€¦è¿™ç§åŠŸåˆ©æ€§çš„ã€å¨èƒã€ï¼Œå¯¹äºæœ‰äº›äººä¼šæœ‰ç‚¹æ•ˆç”¨ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰èƒ½åŠ›è®©ä»–ä»¬è‡ªå‘çš„å¯¹ç¼–ç¨‹äº§ç”Ÿè¶³å¤Ÿçš„å…´è¶£ï¼Œè¿™å¯¹äºä»»ä½•ä¸€ä¸ªã€å¥½ä¸ºäººå¸ˆã€çš„äººè€Œè¨€éƒ½æ˜¯ä¸€ç§è«åå…¶å¦™çš„ç¾è¾±ã€‚</p>
<p>ç°åœ¨æˆ‘è¯•ç€å»å‘Šè¯‰ä»–ä»¬ï¼Œç¼–ç¨‹ä¸ä»…ä¸éš¾ï¼Œè€Œä¸”ä¼šå¾ˆæœ‰è¶£ï¼Œå…¶ä¸­å……æ»¡ç€å€¼å¾—æ·±æ€çš„ä¸œè¥¿ï¼Œè€Œè¿™äº›æ·±æ€å¯¹äºæˆ‘ä»¬äººç”Ÿä¹Ÿä¼šäº§ç”Ÿè®¸å¤šå¢ç›Šã€‚äºæ˜¯ï¼Œå°±æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚</p>
<h2 id="ç¼–ç¨‹æ˜¯ä»€ä¹ˆ"><a href="#ç¼–ç¨‹æ˜¯ä»€ä¹ˆ" class="headerlink" title="ç¼–ç¨‹æ˜¯ä»€ä¹ˆ"></a>ç¼–ç¨‹æ˜¯ä»€ä¹ˆ</h2><p>æ— è®ºä½ æ˜¯ä¸æ˜¯ç¨‹åºçŒ¿ï¼Œæ¯ä¸€å¤©ä½ éƒ½åœ¨ç¼–ç¨‹ï¼Œæ¯ä¸€å¤©ä½ éƒ½è¢«ç¼–ç¨‹ã€‚ç¼–ç¨‹ï¼Œå°±æ˜¯è®¾è®¡ä¸€äº›æ­¥éª¤ï¼Œç»„ç»‡è¿™äº›æ­¥éª¤ï¼Œè®©è¿™äº›æ­¥éª¤åœ¨å½“å‰ç¯å¢ƒä¸­æ­£ç¡®çš„è¿è¡Œï¼Œæœ€ç»ˆå¾—å‡ºè‡ªå·±æƒ³è¦çš„ç»“æœã€‚</p>
<p>ä½ çš„æ¯ä¸€å¤©éƒ½æ˜¯åœ¨èµ·åºŠã€å–æ°´ã€åƒé¥­ã€å·¥ä½œã€ä¸Šå•æ‰€ã€å¨±ä¹ã€ç¡è§‰ç­‰æ­¥éª¤çš„æœ‰åºç»„ç»‡ä¸‹è¿è½¬çš„ï¼Œä½ æ´»åœ¨è¿™ä¸ªç¨‹åºä¸­ï¼ŒåŒæ—¶ä½ åœ¨è¿™ä¸ªç¨‹åºä¸­ä¸ºæ”¹å–„è‡ªå·±çš„ç”Ÿæ´»è€Œåˆ¶å®šå„ç§è®¡åˆ’å¹¶åŠªåŠ›å»å®ç°ã€‚</p>
<p>æœºæ¢°è®¾è®¡ï¼Œå…¶å®æ¯”ç¼–ç¨‹è¿˜è¦ç¼–ç¨‹ã€‚æ‰€è°“çš„æœºæ¢°é›¶ä»¶ï¼Œå°±æ˜¯æ•°æ®ç»“æ„ã€‚æ‰€è°“çš„ä¼ åŠ¨æœºåˆ¶ï¼Œå°±æ˜¯åº”ç”¨ç¨‹åºæ¥å£ï¼ˆAPIï¼‰ã€‚æ‰€è°“å‘åŠ¨æœºï¼Œå°±æ˜¯ç¨‹åºçš„å†…æ ¸ã€‚ä½ å°†é›¶ä»¶è£…é…å¥½ï¼Œé€šè¿‡ä¼ åŠ¨æœºåˆ¶å°†å®ƒä»¬æ¥é©³åˆ°å‘åŠ¨æœºä¸Šï¼Œäºæ˜¯ä½ å°±åˆ›é€ å‡ºæ¥ä¸€éƒ¨æœºå™¨ï¼Œé€šä¸Šç”µæˆ–è€…æ‰“ç€ç«ï¼Œå°±å¯ä»¥è®©å®ƒè¿è½¬èµ·æ¥ã€‚</p>
<p>ç¼–ç¨‹æ¯”æœºæ¢°è®¾è®¡æ¥çš„æ›´ä¸ºç®€å•ï¼Œä½ ä¸éœ€è¦ç»å¸¸ç»™è‡ªå·±æ‰€ç¼–å†™çš„ç¨‹åºæ·»åŠ æ¶¦æ»‘æ²¹ï¼Œä¹Ÿä¸éœ€è¦å»å¯¹æ¯ä¸ªæ•°æ®ç»“æ„è¿›è¡Œå¤æ‚çš„åŠ›å­¦åˆ†æï¼Œæ›´ä¸éœ€è¦å…³æ³¨è¿™äº›æ•°æ®ç»“æ„æ˜¯å¦ä¸¥ä¸åˆç¼çš„ç›¸äº’é…åˆï¼Œè‡³å°‘ç›®å‰çš„è®¡ç®—æœºè½¯ä»¶å·¥ç¨‹æ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œå®ƒä¸åƒæœºæ¢°å·¥ç¨‹å­¦ç§‘é‚£æ ·ä»¥åšå®çš„ç‰©ç†å®šå¾‹ä¸ºåŸºç¡€ã€‚æœºæ¢°çš„ç»“æ„ä¸è¿è¡Œè§„å¾‹æ€»æ˜¯å¯è®¡ç®—ã€å¯åˆ†æçš„ï¼Œè€Œè½¯ä»¶çš„ç»“æ„ä¸è¿è¡Œè¿‡ç¨‹å´å……æ»¡ç€å¤ªå¤šä¸ä¸¥æ ¼çš„ç¯èŠ‚ã€‚è¿™ç§ä¸ä¸¥æ ¼ï¼Œå´ç»™æˆ‘ä»¬è¥é€ äº†ä¸€ä¸ªå¯ä»¥å‘æŒ¥å¤©èµ‹æˆ–å·¥ç§‘å®è·µç»éªŒçš„ç©ºé—´ã€‚æ˜¾ç„¶ï¼Œå³ä½¿è½¯ä»¶å·¥ç¨‹å­˜åœ¨ç€å„ç§ä¸ä¸¥æ ¼ï¼Œä½†æ˜¯æˆ‘ä»¬å´èƒ½å¤Ÿé€šè¿‡ç¼–ç¨‹æ¨¡æ‹Ÿå‡ºæœºæ¢°å·¥ç¨‹çš„ä¸€åˆ‡ã€‚äº‹å®ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œç°ä»£çš„æœºæ¢°å·¥ç¨‹é¢†åŸŸï¼Œè½¯ä»¶å·²ç»æ— å¤„ä¸åœ¨ã€‚</p>
<p>æœºæ¢°è®¾è®¡æœ‰å¾ˆå¤šç²¾å¦™çš„ã€ç®—æ³•ã€ï¼Œåƒç¼çº«æœºã€æªæ¢°ã€å‘åŠ¨æœºä¹‹ç±»çš„æœºæ„ï¼Œè®¾è®¡å®ƒä»¬å…¶å®è¦æ¯”è®¡ç®—æœºä¸–ç•Œé‡Œçš„ç®—æ³•è®¾è®¡éš¾å¾—å¤šï¼Œè€Œä¸”è¿™äº›æœºæ„å¯¹äººç±»æ–‡æ˜çš„å‘å±•å¾€å¾€èƒ½å¤Ÿäº§ç”Ÿå·¨å¤§çš„æ¨åŠ¨ä½œç”¨ã€‚å¸Œæœ›ä½ ä¸è¦å› æ­¤çˆ±ä¸Šæœºæ¢°è®¾è®¡â€¦â€¦å­¦ä¼šç¼–ç¨‹ï¼Œä½ ä¼šå¯¹æœºæ¢°è®¾è®¡çš„ç†è§£æ›´ä¸ºæ·±åˆ»ã€‚å› ä¸ºç¼–ç¨‹æ˜¯å°†ã€è®¾è®¡ã€æœ¬èº«ä½œä¸ºä¸€ç§æ™ºåŠ›æ´»åŠ¨è€Œå¯¹å¾…çš„ã€‚<strong>ä½ å¯ä»¥å°†æœºæ¢°å·¥ç¨‹é¢†åŸŸçš„é‚£äº›æ™ºåŠ›æ´»åŠ¨åº”ç”¨äºç¼–ç¨‹ï¼Œä¹Ÿå¯ä»¥å°†ç¼–ç¨‹ä¸­çš„æ™ºåŠ›æ´»åŠ¨åº”ç”¨åˆ°ä»»ä½•è®¾è®¡ä¹‹ä¸­ã€‚</strong></p>
<p><img src="http://segmentfault.com/img/bVqpCM" alt=""></p>
<p>æ­£å¦‚ SICP ä¸€ä¹¦çš„åºè¨€æ‰€è¨€ï¼Œæ•™è‚²è€…ã€å°†å†›ã€è¥å…»å­¦å®¶ã€å¿ƒç†å­¦å®¶ä»¥åŠçˆ¶æ¯ä»¬ï¼Œä»–ä»¬åšè§„åˆ’ï¼Œè€Œå£«å…µã€å­¦ç”Ÿä»¥åŠæŸäº›ç¤¾ç¾¤åˆ™è¢«è§„åˆ’ã€‚å…‹æœå¤§å‹çš„é—®é¢˜ï¼Œè¦ç»è¿‡ä¸€ç³»åˆ—çš„è§„åˆ’ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†è§„åˆ’ä¼šè¿ä½œäºç°å®ä¹‹ä¸­ï¼Œå› ä¸ºè¿™äº›è§„åˆ’æ€»æ˜¯ä¸è¿«åˆ‡å¤„ç†çš„é—®é¢˜æ¯æ¯ç›¸å…³ã€‚è‹¥å°†è§„åˆ’è¿™ä»¶äº‹æƒ…æœ¬èº«ä½œä¸ºä¸€é¡¹æ™ºåŠ›æ´»åŠ¨æ¥æ¬£èµæˆ–ç ”ç©¶ï¼Œé‚£ä¹ˆå°±å¿…é¡»è½¬åˆ°è®¡ç®—æœºç¼–ç¨‹ä¸Šé¢æ¥ã€‚ä½ éœ€è¦é˜…è¯»ä¸ç¼–å†™è®¡ç®—æœºç¨‹åºï¼Œè€Œä¸”è¦å¤§é‡çš„åšã€‚ç¨‹åºæ˜¯æ€æ ·çš„ï¼Œå®ƒä»¬çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Œè¿™äº›ä¸å¤ªé‡è¦ï¼Œé‡è¦çš„æ˜¯å®ƒä»¬çš„æ€§èƒ½å¦‚ä½•ï¼Œå®ƒä»¬ä¹‹é—´èƒ½å¦ç²¾å·§çš„ç›¸äº’é…åˆä»è€Œæ„é€ æ›´å¤§è§„æ¨¡çš„ç¨‹åºã€‚</p>
<h2 id="å…¥é—¨ä¹¦"><a href="#å…¥é—¨ä¹¦" class="headerlink" title="å…¥é—¨ä¹¦"></a>å…¥é—¨ä¹¦</h2><p>å­¦ä¹ ç¼–ç¨‹ä¹‹å‰ï¼Œåº”è¯¥å…ˆé—®è‡ªå·±ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿä¸è¦æ‰“æˆ‘â€¦â€¦æˆ‘çŸ¥é“ä½ ä»¬æ˜¯è¢«é€¼ç€å»å­¦ä¹ ç¼–ç¨‹çš„ï¼Œé‚£å°±ä¸å¦¨è¢«é€¼ç€æ€è€ƒã€æˆ‘ä¸ºä»€ä¹ˆè¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿã€ã€‚</p>
<p>å¦‚æœä¸çŸ¥é“ç­”æ¡ˆï¼Œä¹Ÿæ²¡æœ‰å…³ç³»ã€‚åæ­£è¿™ä¸ªé—®é¢˜ä¸å­¦ä¹ ç¼–ç¨‹ä¹Ÿæ²¡æœ‰å¤ªå¤§å…³ç³»ã€‚å…¶å®ï¼Œæˆ‘ä»¬å·²ç»åšäº†éå¸¸å¤šçš„ä¸éœ€è¦å›ç­”ä¸ºä»€ä¹ˆçš„äº‹äº†ã€‚æˆ‘ä»¬è¿ã€æˆ‘ä»¬ä¸ºä½•è€Œå­˜åœ¨ã€è¿™æ ·çš„é—®é¢˜éƒ½ä¸çŸ¥é“ç­”æ¡ˆï¼Œå´ä¾ç„¶ç³Šé‡Œç³Šæ¶‚çš„æ´»åˆ°äº†ç°åœ¨ã€‚</p>
<p>å…ˆæ¨èå‡ æœ¬å…¥é—¨ä¹¦ä»¥åŠé˜…è¯»å®ƒä»¬çš„æ–¹æ³•ï¼Œå› ä¸ºå­¦ä¹ ç¼–ç¨‹æœ€ä¸éœ€è¦çš„æ–¹æ³•å°±æ˜¯å°†ä¸€æœ¬è®²ç¼–ç¨‹çš„ä¹¦ä»å¤´è¯»åˆ°å°¾â€¦â€¦ç¼–ç¨‹ä¸æ˜¯è€ƒè¯•ï¼Œå®ƒæ˜¯åŸºäºç°å®ç”Ÿæ´»çš„åˆ›é€ ã€‚è¿™ç§åˆ›é€ æ˜¯æ¸è¿›çš„ï¼Œä½ åœ¨åˆ›é€ ä¹‹åˆå¯èƒ½ä¹Ÿæ— æ³•é¢„æ–™åˆ°ç»“æœä¼šæ˜¯å¦‚ä½•ï¼Œè¿™æ˜¯ä»»ä½•åˆ›é€ æ€§æ´»åŠ¨çš„åŸºæœ¬å±æ€§ã€‚</p>
<p>æˆ‘æ¨èçš„ç¬¬ä¸€æœ¬ä¹¦æ˜¯ã€Šè®¡ç®—æœºç¨‹åºçš„æ„é€ å’Œè§£é‡Šã€‹ï¼Œè‹±æ–‡åæ˜¯ã€ŠStructure and Interpretation of Computer Programsã€‹ï¼Œç®€ç§° SICPã€‚è‹±è¯­é˜…è¯»èƒ½åŠ›å¥½çš„åŒå­¦ï¼Œå¯ä»¥çœ‹è‹±æ–‡ç‰ˆã€‚ä¸­æ–‡é˜…è¯»èƒ½åŠ›å¥½çš„åŒå­¦ï¼Œå¯ä»¥çœ‹ä¸­æ–‡è¯‘æœ¬ï¼Œè£˜å®—ç‡•è€å¸ˆçš„æ–‡å­—ç´ å…»ä¸ç¿»è¯‘çš„ä¸¥è°¨ç¨‹åº¦æ˜¯å¯èµçš„ã€‚è¿™æœ¬ä¹¦çš„é˜…è¯»ï¼Œå»ºè®®åˆ†ä»¥ä¸‹ä¸‰ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>é˜…è¯»å‰ä¸¤ç« ï¼Œç¬¬ä¸€ç« æ˜¯è®²è®¡ç®—è¿‡ç¨‹çš„æŠ½è±¡æ–¹æ³•ï¼Œç¬¬äºŒç« æ˜¯å°†åŸºæœ¬çš„æ•°æ®çš„æŠ½è±¡æ–¹æ³•ã€‚è¿™ä¸¤ç« çš„å†…å®¹æ¶µç›–äº†è½¯ä»¶ä¸–ç•Œçš„ã€ä¹å¹´åˆ¶ä¹‰åŠ¡æ•™è‚²ã€çš„å…¨éƒ¨å†…å®¹ï¼Œæ‰€ç”¨çš„æ•™å­¦è¯­è¨€ä¹Ÿæ˜¯éå¸¸æˆç†Ÿä¸”è®¾è®¡ç²¾å·§çš„ Scheme è¯­è¨€çš„ä¸€ä¸ªå¾ˆå°çš„å­é›†ã€‚å­¦ä¹ è¿™ä¸¤ç« å†…å®¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ç©¿æ’ç€é˜…è¯»ã€ŠTeach Yourself Scheme in Fixnum Daysã€‹çš„å‰ 10 ç« ï¼Œè¿™ä»½ Scheme æ•™ç¨‹ä¹Ÿæœ‰ä¸€ä»½ä¸­æ–‡è¯‘æœ¬ã€‚SICP çš„ä¹ é¢˜ï¼Œå³ä½¿ä¸å»åšï¼Œä¹Ÿåº”è¯¥æŠŠé¢˜ç›®çœ‹ä¸€ä¸‹ï¼ŒåŠ¨è„‘å­æƒ³ä¸€æƒ³ï¼Œåˆ¤æ–­ä¸€ä¸‹èƒ½ä¸èƒ½åšå¾—å‡ºæ¥ã€‚è¿™äº›ä¹ é¢˜ï¼Œåœ¨ç½‘ç»œä¸Šå¾ˆå®¹æ˜“æ‰¾åˆ°ç­”æ¡ˆã€‚</li>
<li>å¤ä¹  C è¯­è¨€ï¼Œæ•™æç”¨ Kernighan ä¸ C è¯­è¨€ä¹‹çˆ¶ Ritchie åˆå†™çš„é‚£æœ¬ã€ŠC ç¨‹åºè®¾è®¡è¯­è¨€ã€‹å³å¯ã€‚è¿™ä¸ªé˜¶æ®µçš„è®¾ç½®ï¼Œä¸»è¦æ˜¯é¢å‘æˆ‘ä»¬å®éªŒå®¤å†…éƒ¨ã€‚å› ä¸ºæˆ‘ä»¬å®éªŒå®¤é‡Œçš„åŒå­¦åœ¨æœ¬ç§‘é˜¶æ®µé€šå¸¸æ˜¯è¦ä¿® C è¯­è¨€è¿™é—¨è¯¾çš„ï¼Œä½†æ˜¯å½“æ—¶ä»–ä»¬å¯èƒ½å¹¶æœªçœŸæ­£ä»å­¦ä¹ ç¼–ç¨‹çš„è§’åº¦å»å­¦ä¹ ï¼Œç°åœ¨å¯ä»¥é€šè¿‡ç¬¬ä¸€é˜¶æ®µåŸºäº Scheme è¯­è¨€å»ºç«‹çš„ç¼–ç¨‹è§‚å¿µå»é‡æ–°è®¤è¯†ä¸€ä¸‹ C è¯­è¨€ï¼Œåªæœ‰è¿™æ ·æ–¹èƒ½ç†è§£ C è¯­è¨€çš„ä¼˜ç‚¹ä¸ç¼ºç‚¹ï¼Œå¹¶ä¸”å»æ€è€ƒå¦‚ä½•å……åˆ†å‘æŒ¥ C çš„ä¼˜åŠ¿ï¼Œç„¶åç”¨ Scheme æ¥å¼¥è¡¥ C çš„ä¸è¶³ã€‚å€ŸåŠ© GNU Guile 2ï¼Œå¾ˆå®¹æ˜“å®ç° C ä¸ Scheme å¤åˆç¼–ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥ç©¿æ’é˜…è¯» Kernighan å†™çš„ã€Šç¨‹åºè®¾è®¡å®è·µã€‹ã€‚</li>
<li>é˜…è¯» SICP çš„ç¬¬ 3 ç« ï¼Œç„¶åå†æ‰¾ä¸€æœ¬è®² C++ çš„ä¹¦ï¼Œæ¯”å¦‚ C++ ä¸–ç•Œä¸­éå¸¸æœ‰åä½†æˆ‘ä¸ä»¥ä¸ºç„¶çš„ç –ä¹¦ã€ŠC++ Primerã€‹ï¼Œåªå­¦ä¹ åŸºäºç±»çš„æ•°æ®æŠ½è±¡ä»¥åŠé¢å‘å¯¹è±¡ç¼–ç¨‹éƒ¨åˆ†å³å¯ã€‚è¿™ä¸ªé˜¶æ®µï¼ŒSICP çš„ç¬¬ä¸‰ç« é˜è¿°äº†é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸å‡½æ•°å¼ç¼–ç¨‹ä¸¤ç§æ–¹æ³•ã€‚ä» SICP ä¸­è·å¾—çš„é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå¯ä»¥åœ¨ C++ çš„å­¦ä¹ ä¸­å¾—åˆ°è¿›ä¸€æ­¥ä¸€äº›å¼ºåŒ–ï¼Œè‡³äºå‡½æ•°å¼ç¼–ç¨‹æ–¹æ³•ï¼Œå¯ä»¥å‡è£…è‡ªå·±å·²ç»çŸ¥æ‚‰ï¼Œç•™å¾…æ—¥åéœ€è¦æ—¶å†ä½œæ‰“ç®—ã€‚æœ€åï¼Œè®°å¾—å°†ã€ŠTeach Yourself Scheme in Fixnum Daysã€‹å‰©ä¸‹çš„å†…å®¹çœ‹å®Œã€‚</li>
</ol>
<blockquote>
<p>C++ çš„å…¥é—¨ä¹¦ï¼Œæˆ‘æ›´æ¨èã€ŠC++ Without Fearã€‹ï¼Œä¸­æ–‡è¯‘æœ¬å«ã€Šå¥½å­¦çš„ C++ã€‹ï¼Œç°åœ¨åº”è¯¥æ˜¯ç¬¬ 2 ç‰ˆã€‚ä¹‹æ‰€ä»¥ä¸æ¨èå¤§å®¶è®¤ä¸ºæ˜¯ C++ å››ä¹¦äº”ç»ä¹‹ä¸€çš„ã€ŠC++ Primerã€‹ï¼Œæ˜¯å› ä¸ºæˆ‘æ€»è§‰å¾—å®ƒåƒä¸€æœ¬äº‹æ— å·¨ç»†çš„æ¡ˆå¤´æ‰‹å†Œï¼Œæ¯”è¾ƒé€‚åˆé‚£äº›å·²ç»æœ‰äº†ç¼–ç¨‹ç»éªŒç”šè‡³ C++ ç»éªŒçš„ç¨‹åºçŒ¿é˜…è¯»ã€‚æˆ‘å¿ƒç›®ä¸­çœŸæ­£å¥½çš„æ•™æåº”è¯¥åƒå°è¯´é‚£æ ·ï¼Œç”±ä¸€æ¡æˆ–å¤šæ¡é€»è¾‘ä¸»çº¿å»¶å±•è€Œæˆï¼Œè¿™ç§æ•™æå¯¹äºéç§‘ç­å‡ºèº«çš„äººå°¤ä¸ºé‡è¦ã€‚</p>
</blockquote>
<p>å¯¹äºå¤§éƒ¨åˆ†ç¼–ç¨‹ä»»åŠ¡è€Œè¨€ï¼Œä¸Šè¿°ä¹¦æ‰€æ¶‰åŠçš„çŸ¥è¯†å·²ç»è¶³å¤Ÿç”¨äº†ï¼Œè€Œä¸”ä¸Šé¢çš„è¿™å‡ æœ¬ä¹¦ä¹Ÿæ˜¯éå¸¸è€è¯»çš„ä¹¦ï¼Œåªè¦ä½ ä¸æ˜¯é‚£ä¹ˆç€æ€¥çš„å°†å®ƒä»¬è¯»å®Œï¼Œå®ƒä»¬æ€»æ˜¯å¾ˆæœ‰è¶£ã€‚æˆ‘å¾ˆå–œæ¬¢ SICP ä¸ã€Šç¨‹åºè®¾è®¡å®è·µã€‹è¿™ä¸¤æœ¬ä¹¦ï¼Œå› ä¸ºå¤ªå–œæ¬¢äº†ï¼Œæ‰€ä»¥ä¸€ç›´éƒ½ä¸èˆå¾—æŠŠå®ƒä»¬è¯»å®Œã€‚</p>
<h2 id="è®©å®è·µæœ‰äº›éš¾åº¦"><a href="#è®©å®è·µæœ‰äº›éš¾åº¦" class="headerlink" title="è®©å®è·µæœ‰äº›éš¾åº¦"></a>è®©å®è·µæœ‰äº›éš¾åº¦</h2><p>ä¹¦æ˜¯è¦çœ‹çš„ï¼Œä½†æ˜¯çœ‹ä¹¦çš„è¿‡ç¨‹ä¸­æœ€å¥½å¼€åŠ¨ä½ çš„åŒæ‰‹ã€‚æ‰€ä»¥ï¼Œä½ ä¸åº”è¯¥åœä¸‹æ¥é—®è‡ªå·±ï¼šä¸ºä½•è¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿ</p>
<p>æˆ‘å¸Œæœ›æ€»æœ‰ä¸€å¤©ï¼Œä½ èƒ½ç»™è‡ªå·±æ‰¾åˆ°ä¸€ä¸ªç­”æ¡ˆï¼Œé‚£å°±æ˜¯ä½ æƒ³å†™ä¸€ä¸ª XXX ç¨‹åºã€‚è¿™ä¸ªç¨‹åºè‡³å°‘åº”è¯¥å¯¹ä½ æ˜¯æœ‰ç”¨ï¼Œäº¦å³å®ƒçš„ä¸»è¦åŠŸèƒ½ä¸ä¸ä½ çš„ç³»ç»Ÿé‡Œçš„å…¶ä»–ç¨‹åºå­˜åœ¨ç€é‡å¤ã€‚å¦‚æœä½ èƒ½æ˜ç¡®è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆä½ æ‰€åˆ›é€ çš„ç¨‹åºå°±æœ‰äº†æ„ä¹‰ï¼Œä½ çš„å­¦ä¹ å°±æœ‰äº†æ„ä¹‰ã€‚</p>
<p>ä¸ºä½•è¦å­¦ä¹ ç¼–ç¨‹ï¼Ÿå› ä¸ºä½ è¦åˆ›é€ ä¸€äº›ä»æ¥æ²¡æœ‰çš„è½¯ä»¶ï¼Œè€Œä¸”å®ƒèƒ½å¤Ÿå¸®åŠ©ä½ åšä¸€äº›ä½ è®¤ä¸ºæ˜¯å¾ˆé‡è¦çš„äº‹ï¼å‡¡æ˜¯ä½ è®¤ä¸ºé‡è¦çš„äº‹ï¼Œå¯¹äºå¾ˆå¤šäººè€Œè¨€ï¼Œå¾ˆæœ‰å¯èƒ½ä¹Ÿæ˜¯å¾ˆé‡è¦çš„ï¼Œå› æ­¤ä½ æ‰€åˆ›é€ çš„ä¸œè¥¿å°±å¯ä»¥å¸®åŠ©æ›´å¤šçš„äººï¼Œè¿™æ„å‘³ç€ä¼šæœ‰ä¸€äº›ä½ å¯èƒ½ä¸è®¤è¯†çš„äººéœ€è¦ä½ ï¼Œè¿™å°±æ˜¯ä½ çš„ä»·å€¼æ‰€åœ¨ã€‚</p>
<p>ç¼–ç¨‹çš„å®è·µï¼Œåº”è¯¥å°†å®ƒä½œä¸ºæ¢ç´¢æœªçŸ¥ä¸–ç•Œçš„æ™ºåŠ›æ´»åŠ¨ï¼Œåº”è¯¥ä»ä¹¦ä¸­è·³å‡ºæ¥ï¼Œå°†è‡ªå·±ä»é‚£äº›ç¤ºä¾‹ä¸­è·å¾—çš„ç»éªŒç”¨äºè§£å†³ç°å®ä¸­çš„é—®é¢˜ã€‚å¦‚æœä½ è§‰å¾—ï¼Œç°å®ä¸­æ ¹æœ¬ä¸å­˜åœ¨ä»€ä¹ˆé—®é¢˜éœ€è¦ä½ å»è§£å†³ã€‚é‚£ä¹ˆâ€¦â€¦è¯·ä½ å›ç­”ä¸€ä¸‹ã€ä½ ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜å§ã€‚</p>
<p>çœ‹ä¹¦ï¼Œæ˜¯ä»å‰äººæ­£ç¡®çš„ç»éªŒä¸­å­¦ä¹ ã€‚å®è·µï¼Œæ˜¯ä»è‡ªå·±çš„å¤±è´¥ä¸­å­¦ä¹ ã€‚æ—¢ç„¶å†³å®šè¦å®è·µäº†ï¼Œæ‰€ä»¥è¿˜æ˜¯ç»™è‡ªå·±æ‰¾ä¸€äº›æ¯”è¾ƒéš¾èµ°çš„è·¯èµ°èµ°çœ‹å§ï¼Œè®©å¤±è´¥å¤šä¸€äº›ï¼Œè®©å¤±è´¥æ—©ä¸€äº›ã€‚</p>
<p>ä»¥æˆ‘ä¸ªäººæ¯”è¾ƒæ„Ÿå…´è¶£çš„å‡ ä¸ªä¸œè¥¿ä¸ºä¾‹ï¼Œå¯ä»¥å†™ä¸€ä¸ªåŸºäº <a href="http://segmentfault.com/a/1190000003779240" target="_blank" rel="external">TeX</a> çš„ç°ä»£<a href="http://garfileo.is-programmer.com/2012/7/7/cweb-none-definitive-tutorial-for-chinese.34433.html" target="_blank" rel="external">æ–‡å­¦ç¼–ç¨‹</a>è¯­è¨€ï¼Œé€šè¿‡å®ƒä¸ä»…å¯ä»¥å†ç»ƒç¼–ç¨‹èƒ½åŠ›ï¼Œä¹Ÿä¼šå¯¹ç¼–è¯‘åŸç†ä¸­çš„è¯­æ³•åˆ†æç¯èŠ‚æœ‰ä¸€äº›å®é™…çš„è®¤è¯†ã€‚ä¹Ÿå¯ä»¥å°è¯•å»å†™ä¸€ä¸ªä¸‰ç»´å‡ ä½•åº“ï¼Œèƒ½å¤Ÿå®Œæˆå‡¸åŒ…ã€Delaunayå‰–åˆ†ä»¥åŠ Voronoi å›¾ç­‰è®¡ç®—ï¼Œä¸æ±‚å¤§è€Œå…¨ï¼Œåªæ±‚å°è€Œç²¾ï¼Œä»¥åæ¼«é•¿çš„æ—¶é—´é‡Œå¯ä»¥æ…¢æ…¢çš„å»æ”¹è¿›å®ƒã€‚è¿˜å¯ä»¥å»æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„å¼€æºé¡¹ç›®ï¼Œå»é˜…è¯»å®ƒçš„æºä»£ç ï¼Œäº†è§£å®ƒæ‰€ç”¨çš„é¡¹ç›®æ„å»ºç³»ç»Ÿï¼Œåˆ†æé¡¹ç›®ç»“æ„ï¼Œè¯•ç€å»ä¿®æ”¹å®ƒçš„ä»£ç â€¦â€¦æˆ‘ç°åœ¨æœ€æ„Ÿå…´è¶£çš„æ˜¯ LuaTeXã€‚</p>
<h2 id="é—®é¢˜æ˜¯æœ€é‡è¦çš„"><a href="#é—®é¢˜æ˜¯æœ€é‡è¦çš„" class="headerlink" title="é—®é¢˜æ˜¯æœ€é‡è¦çš„"></a>é—®é¢˜æ˜¯æœ€é‡è¦çš„</h2><p>å‡å¦‚ä½ å·²ç»æœ‰äº†éå¸¸å¤šæ¬¡çš„å®è·µä¸Šçš„å¤±è´¥ï¼Œå¹¶ä¸”ä½ å·²ç»å¤§è‡´æŒæ¡äº† Scheme ä¸ C/C++ è¿™æ ·çš„è¯­è¨€ï¼Œé‚£ä¹ˆæ¯å¹´å­¦ä¸€é—¨æ–°çš„è¯­è¨€ï¼Œè¿™å¹¶ééš¾äº‹ã€‚å¯èƒ½ä½ ä¼šå¯¹ç½‘ç»œä¸Šç»å¸¸å‘ç”Ÿçš„è¯­è¨€ä¹‹æˆ˜è§‰å¾—å¥‡æ€ªã€‚</p>
<p>æ˜¯é—®é¢˜å†³å®šäº†è¯­è¨€ï¼Œæ˜¯é—®é¢˜å†³å®šäº†ç¼–ç¨‹èŒƒå¼ï¼Œæ˜¯é—®é¢˜å†³å®šäº†ä¿¡ä»°ã€‚å¦‚æœä½ èƒ½å¾ˆæ˜ç¡®çš„è®¤è¯†åˆ°è¿™äº›ï¼Œé‚£ä¹ˆä½ å°±ä¸ä¼šé™·å…¥æŸç§è¯­è¨€å®—æ•™çš„æ³¥æ·–ä¹‹ä¸­ã€‚å¯¹äºè®¸å¤šäº‹éƒ½æ˜¯å¦‚æ­¤â€¦â€¦ææœºæ¢°çš„äººï¼Œä¹Ÿç»å¸¸ä¿¡ä»° UGNXï¼ŒCATIAï¼ŒPROE è¿™äº›ã€å®—æ•™ã€çš„â€¦â€¦</p>
<p>å¦‚æœéè¦ç»™è‡ªå·±æ‰¾ä¸€ç§ä¿¡ä»°ï¼Œé‚£ä¹ˆ<strong>æˆ‘ä¿¡ä»°æˆ‘çš„å­˜åœ¨å°±æ˜¯ä¸ºäº†è§£å†³é—®é¢˜çš„ã€‚</strong></p>
<p>å¦‚æœåœ¨æˆ‘ç”¨çš„ Linux ç³»ç»Ÿä¸Šåšä¸€äº›è‡ªåŠ¨åŒ–ç¨‹åº¦é«˜ä¸€äº›çš„ç»´æŠ¤ä»»åŠ¡ï¼Œæˆ‘ä¸ä¼šåŒæ†ä½¶å±ˆè±ç‰™çš„ Bash è„šæœ¬ï¼Œè€Œæ˜¯éå¸¸æ¬£èµå®ƒåƒèƒ¶æ°´ä¸€æ ·å¿«é€Ÿçš„å°†å‡ ä¸ªæœ¬æ¥æ˜¯ç‹¬ç«‹è¿è¡Œçš„ç¨‹åºè¿æ¥èµ·æ¥æ›¿æˆ‘å®Œæˆå¤æ‚çš„ä»»åŠ¡ã€‚</p>
<p>å¦‚æœæˆ‘è¦ä¸´æ—¶çš„åšä¸€äº›æ–‡æœ¬å¤„ç†å·¥ä½œï¼Œæˆ‘å¯ä»¥ç”¨ python 3ï¼Œå› ä¸ºå®ƒå¯¹ UTF-8 æ”¯æŒçš„æŒºå¥½ï¼Œè€Œä¸”å­—ç¬¦ä¸²åº“åŠŸèƒ½é½å¤‡ã€‚å¦‚æœåªæ˜¯è¿›è¡Œä¸€äº›æ–‡æœ¬çš„æ›¿æ¢ï¼Œemacs æˆ– sed ä¹‹ç±»ç°æˆçš„å·¥å…·ä¹Ÿå¤Ÿç”¨äº†ã€‚</p>
<p>å¦‚æœæˆ‘è¦å†™ä¸€ä¸ªä¸¥è‚ƒçš„ç¨‹åºï¼Œä¸¥è‚ƒåˆ°äº†å®ƒçš„ç”Ÿå‘½å¯èƒ½è¦å¾ˆä¹…ï¼Œé‚£æˆ‘ä¼šé€‰æ‹©ä¸€é—¨æˆç†Ÿç¨³å®šçš„è¯­è¨€æ¥å®ç°å®ƒï¼Œå³ä½¿ç”¨ Cï¼Œæˆ‘ä¹Ÿä¸ä¼šçƒ¦å¼ƒå®ƒçš„ç¹ççš„ä»£ç ï¼Œæˆ‘ä¼šå°½åŠ›å‡ç»ƒç¨‹åºä¸­è¦å®ç°çš„åŠŸèƒ½ã€‚</p>
<p>äººç”Ÿä¸­æœ¬æ¥å°±é¢ä¸´ç€è®¸å¤šé€‰æ‹©ï¼Œä½†æ˜¯éå¸¸å¤šçš„äººåœ¨é€‰æ‹©ä¹‹å‰å¹¶æœªè®¤çœŸçš„å»è€ƒå¯Ÿè‡ªå·±é¢å¯¹çš„é—®é¢˜ã€‚</p>
<p>ä¸è¿‡ï¼Œå¯¹é—®é¢˜æœ¬èº«çš„è€ƒå¯Ÿï¼Œéœ€è¦ä¸€å¥—åŸºæœ¬çš„å·¥å…·é›†ã€‚æ²¡æœ‰å¬è¯Šå™¨ã€æ‰‹æœ¯åˆ€æˆ– X å…‰ï¼Œå†å‰å®³çš„åŒ»ç”Ÿä¹Ÿæ— æ³•åˆ†æäººä½“çš„å†…éƒ¨å‘ç”Ÿäº†ä»€ä¹ˆã€‚å¯¹äºç¼–ç¨‹è€Œè¨€ï¼Œæˆ‘è®¤ä¸ºä¸Šè¿°æˆ‘æ¨èçš„ä¹¦ä¸­æ‰€æ¶‰åŠçš„çŸ¥è¯†å·²ç»è¶³å¤Ÿç”¨æ¥æ´å¯Ÿè½¯ä»¶ä¸–ç•Œçš„å„ç§é—®é¢˜äº†ï¼Œä»¥æ­¤ä¸ºåŸºç¡€ï¼Œæˆ‘ä»¬åªéœ€å†ä¿æŒå¿ƒæ€çš„å¼€æ”¾ï¼Œéšæ—¶æ±²å–æ‰€éœ€çš„çŸ¥è¯†å°±å¯ä»¥äº†ã€‚ä¾‹å¦‚ï¼Œè™½ç„¶ä¸Šè¿°å‡ æœ¬ä¹¦æ²¡æœ‰ä¸€æœ¬æ˜¯è®² Web å¼€å‘çš„ï¼Œä½†æ˜¯å¦‚æœä½ ç†Ÿæ‚‰ Schemeï¼Œå°±å¯ä»¥å‘ç° JavaScriptã€HTML 5ã€CSS 3 ä¹‹ç±»çš„è¯­è¨€å¹¶æ²¡æœ‰è¶…å‡º Scheme çš„èŒƒç•´ï¼Œä½ å¯ä»¥å¾ˆå¿«çš„å°±æŒæ¡å®ƒä»¬ã€‚</p>
<h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><p>è§£å†³é—®é¢˜éœ€è¦ç®—æ³•ã€‚æ—¢ç„¶ç¼–ç¨‹æ— å¤„ä¸åœ¨ï¼Œé‚£ä¹ˆç®—æ³•ä¹Ÿæ˜¯æ— å¤„ä¸åœ¨çš„ã€‚ä½†æ˜¯ï¼Œå¦‚æœéšä¾¿æ‹¿èµ·ä¸€æœ¬è®²ç®—æ³•çš„ä¹¦ï¼Œéšä¾¿ä¸€æœ¬ï¼Œå¯èƒ½éƒ½ä¼šè®©ä½ è§‰å¾—å¤´æ˜è„‘èƒ€ã€‚ä¹Ÿè®¸ä½ ä¼šæ‹…å¿ƒï¼Œè¿ç®—æ³•çš„ä¹¦éƒ½çœ‹ä¸æ‡‚ï¼Œè¿˜æ€ä¹ˆå†™ç¨‹åºï¼Ÿ</p>
<p>å½“åˆæˆ‘åˆšå­¦ä¹ ç¼–ç¨‹çš„æ—¶å€™ï¼Œå†™è¿‡äºŒåå››ç‚¹ã€æ±‰è¯ºå¡”ã€å…«çš‡åã€ä¿„ç½—æ–¯æ–¹å—ä¹‹ç±»çš„å°ç¨‹åºã€‚åæ¥ï¼Œåœ¨ç°å®çš„é¡¹ç›®é‡Œï¼Œä¹Ÿå†™è¿‡å †æ’åºã€å¿«é€Ÿæ’åºã€çŸ©é˜µçš„ LU ä¸ SVD åˆ†è§£ã€æ— å‘è¿é€šå›¾çš„æœ€å°ç”Ÿæˆæ ‘åŠæœ€çŸ­è·¯å¾„ä¹‹ç±»çš„ç¨‹åºã€‚ä½†æ˜¯ç°åœ¨ï¼Œéšä¾¿æ‹¿ä¸€ä¸ªè®©æˆ‘å»å®ç°ï¼Œæˆ‘è¿˜æ˜¯ä¸å¾—ä¸å»ç¿»ä¹¦çœ‹æ‡‚ç®—æ³•ï¼Œç„¶åå†å»å†™ç¨‹åºâ€¦â€¦</p>
<p>æˆ‘æƒ³è¯´çš„æ˜¯ï¼Œå¦‚æœä½ æ­£åœ¨é˜…è¯»ä¸€æœ¬è®²ç®—æ³•çš„ä¹¦ï¼Œä¹¦é‡Œæœ‰äº›ç®—æ³•æˆ–å®ƒçš„ç¤ºä¾‹æ˜¯ä½ ä¸€æ—¶æ— æ³•çœ‹æ‡‚çš„ï¼Œå¯ä»¥è·³è¿‡å»ã€‚å¾ˆå¤šä¸“é—¨è®²ç®—æ³•çš„ä¹¦é‡Œï¼Œå……æ–¥ç€å¿ƒæ™ºæ¸¸æˆã€‚å¦‚æœä½ æ— æ³•å°†è‡ªå·±ä»£å…¥åˆ°è¿™äº›æ¸¸æˆçš„æƒ…å¢ƒä¸­ï¼Œè¿™ä¸ªæ¸¸æˆçš„ç©æ³•è‡ªç„¶å°±æ˜¯ä¸æ˜äº†çš„ã€‚ç°åœ¨çœ‹èµ·æ¥ï¼Œè¿™æ˜¯å¾ˆè‡ªç„¶çš„äº‹ï¼Œç„¶è€Œå½“åˆæˆ‘å´ä¸€éåˆä¸€éçš„æ€€ç–‘è‡ªå·±çš„æ™ºå•†ï¼Œç‰¹åˆ«æ˜¯çœ‹åˆ°ç½‘ç»œä¸Šå¾ˆå¤šäººåƒå–ç™½å¼€æ°´ä¸€æ ·çš„è°ˆè®ºç€è¿™äº›å¿ƒæ™ºæ¸¸æˆï¼Œæˆ‘ä¸€åº¦æ€€ç–‘ï¼Œæˆ‘ä¸é€‚åˆåšç¼–ç¨‹æ–¹é¢çš„äº‹ã€‚</p>
<p>å¹¸å¥½ï¼Œè¿™ä¸ªä¸–ç•Œè¶³å¤Ÿç¨³å®šï¼Œä»¥è‡³äºæˆ‘ä»¬ä¸éœ€è¦äº†è§£ç›¸å¯¹è®ºä¸é‡å­åŠ›å­¦ä¹Ÿèƒ½å¤Ÿå¾ˆå¥½çš„ç”Ÿæ´»ä¸‹å»ã€‚å¤§éƒ¨åˆ†äººï¼Œè¿ç‰›é¡¿åŠ›å­¦éƒ½ä¸éœ€è¦äº†è§£â€¦â€¦ç®—æ³•ä¹Ÿæ˜¯è¿™æ ·ï¼Œç‰¹åˆ«æ˜¯ç°åœ¨å·²ç»å­˜åœ¨äº†ç›¸å½“å¤šçš„å®ç°ï¼Œä¾‹å¦‚å‡ ä¹ä»»ä½•ä¸€ç§ç¼–ç¨‹è¯­è¨€çš„æ ‡å‡†åº“ä¸­éƒ½æä¾›ä¸€ç»´æ•°æ®çš„å¿«é€Ÿæ’åºç®—æ³•çš„å®ç°ã€‚åŸºæœ¬ä¸Šï¼Œåªè¦æ˜¯å¯¹ç°å®ä¸­çš„é—®é¢˜éå¸¸é‡è¦çš„ç®—æ³•ï¼Œä½ æ€»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°å®ƒä»¬çš„æ—¢æœ‰å®ç°ï¼Œå–è€Œç”¨ä¹‹ã€‚</p>
<p>å½“ä½ èµ°åœ¨è¡—ä¸Šï¼Œé‚£äº›é«˜é«˜çŸ—ç«‹æ¢å®å»ºç­‘ï¼Œå»ºç­‘å·¥äººå»ºé€ å®ƒä»¬çš„è¿‡ç¨‹ä¸­å¯æ›¾ç”¨äº†æé«˜å¿ƒæ™ºçš„æŠ€æœ¯ï¼Ÿç¼–ç¨‹ï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå·¥ç¨‹ç»éªŒçš„é‡è¦æ€§å¤§äºå¿ƒæ™ºã€‚ç”šè‡³åœ¨ç¼–ç¨‹ä¸­ï¼Œè¿‡å¤šçš„è¿ç”¨å¿ƒæ™ºï¼Œåè€Œä¼šé€‚å¾—å…¶åã€‚</p>
<p>æˆ‘ä¸æ˜¯è¯´å­¦ä¹ ç®—æ³•æ²¡æœ‰å¿…è¦ï¼Œæˆ‘åªæ˜¯å¼ºè°ƒä¸è¦è¢«ä¸€æ—¶éš¾ä»¥ç†è§£çš„ç®—æ³•æŒ¡ä½ä½ ã€‚ä½ å¤©ç”Ÿå°±æ‹¥æœ‰ä¸€äº›æ— æ¯”å¼ºå¤§çš„ç®—æ³•ï¼Œå®ƒä»¬æ˜¯ç©·ä¸¾ã€è´ªå©ªä¸åˆ†æ²»ï¼Œè¿˜æœ‰æœ€å¼ºå¤§çš„ã€æ¼”åŒ–ã€ä¸ã€ç¥ç»ç½‘ç»œã€ã€‚é‚£äº›ä¸“é—¨è®²ç®—æ³•çš„ä¹¦ï¼Œåªä¸è¿‡æ˜¯æ˜¯äº†å¾ˆè¹©è„šçš„è¯­è¨€ã€ç¬¦å·ä»¥åŠç¤ºä¾‹å°†ä½ å¤©ç”Ÿçš„ç›´è§‰åˆ»ç”»å‡ºæ¥è€Œå·²ã€‚åªè¦ä½ åœ¨ç°å®ä¸­é‡åˆ°é—®é¢˜ï¼Œä½ æ€»æ˜¯èƒ½å¤Ÿæ‰¾åˆ°æ±‚è§£è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•ï¼Œè€Œä¸æ˜¯åªæœ‰è¯»æ‡‚äº†æŸæœ¬è®²ç®—æ³•çš„ä¹¦ä½ æ‰èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>å¾ˆå¤šç®—æ³•ä¹¦ï¼Œéƒ½æ˜¯æˆ‘çœ‹ä¸æ‡‚çš„ã€‚å®ƒä»¬çš„ç¬¬ä¸€ç« å°±æ˜¯è®©æˆ‘å¤ä¹ æ•°å­¦å½’çº³æ³•ï¼Œç¬¬äºŒç« å°±æ˜¯è®©æˆ‘å­¦ä¹ ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦åˆ†æâ€¦â€¦è€Œæˆ‘å±äºå¯¹æ•°å­¦ç¼ºä¹ç›´è§‰çš„äººï¼Œå¯¹æˆ‘è€Œè¨€ï¼Œè¿™äº›ä¹¦çš„å”¯ä¸€ä»·å€¼å°±æ˜¯æ•…æ„ä¸è®©æˆ‘å»è¯»å®ƒã€‚å³ä½¿æ˜¯æˆ‘å¿ƒç›®ä¸­çš„å¤§ç¥ Knuth çš„ä¼ ä¸–ä¹‹ä½œã€Šè®¡ç®—æœºç¼–ç¨‹è‰ºæœ¯ã€‹ï¼Œå®ƒå”¯ä¸€çš„ç›®çš„ä¼¼ä¹å°±æ˜¯è®©æˆ‘è§‰å¾—æˆ‘ä¸æ˜¯æè‰ºæœ¯çš„ã€‚</p>
<p>å¾ˆä¹…ä¹‹åï¼Œæˆ‘åœ¨å­¦æ ¡å›¾ä¹¦é¦†é—²é€›çš„æ—¶å€™ï¼Œå‘ç°äº†<a href="http://book.douban.com/subject/1232071/" target="_blank" rel="external">ã€Šå¦‚ä½•æ±‚è§£é—®é¢˜ï¼šç°ä»£å¯å‘å¼æ–¹æ³•ã€‹</a>è¿™æœ¬ä¹¦ï¼Œç¿»äº†ç¿»ï¼Œå°±å¼€å§‹å¹æ¯ï¼Œä¸ºä»€ä¹ˆä¸€å¼€å§‹ä¸çŸ¥é“è¿™æœ¬ä¹¦ï¼Ÿ</p>
<h2 id="å¢å¼ºå¯¹è®¡ç®—æœºçš„ç†è§£"><a href="#å¢å¼ºå¯¹è®¡ç®—æœºçš„ç†è§£" class="headerlink" title="å¢å¼ºå¯¹è®¡ç®—æœºçš„ç†è§£"></a>å¢å¼ºå¯¹è®¡ç®—æœºçš„ç†è§£</h2><p>æœ‰æ—¶é—´ä¸ç²¾åŠ›å¯ä»¥é˜…è¯»ä¸€äº›ä¸“ä¸šæ€§å¼ºä¸€äº›çš„è®¡ç®—æœºç†è®ºçš„ä¹¦ç±ï¼Œè­¬å¦‚æ“ä½œç³»ç»ŸåŸç†ã€ç¼–è¯‘åŸç†ã€ç®—æ³•ä¸æ•°æ®ç»“æ„ä¹‹ç±»ã€‚çœ‹ä¸æ‡‚å¤ªä¸“ä¸šçš„ä¹¦ï¼Œæˆ–è€…æ²¡é‚£ä¹ˆå¤šæ—¶é—´å’Œç²¾åŠ›ï¼Œå¯ä»¥çœ‹çœ‹è®¡ç®—æœºç§‘å­¦çš„ä¸€äº›ç§‘æ™®è‘—ä½œã€‚æœ‰æœ¬ã€Šé€šçµèŠ¯ç‰‡ã€‹å€¼å¾—ä¸€çœ‹ï¼Œè–„è–„çš„å°å†Œå­ï¼Œä¸‰äº”å¤©çš„ä¸šä½™æ—¶é—´å°±å¯ä»¥çœ‹å®Œã€‚æœ‰æœ¬ã€Šç¼–ç ï¼šéšåŒ¿åœ¨è®¡ç®—æœºè½¯ç¡¬ä»¶èƒŒåçš„è¯­è¨€ã€‹ï¼Œç®—æ˜¯ã€Šé€šçµèŠ¯ç‰‡ã€‹çš„åŠ å¼ºç‰ˆï¼Œä¹Ÿå€¼å¾—ä¸€çœ‹ã€‚æœ‰ä¸€æœ¬ã€Šæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿã€‹ï¼Œä»¥ç¨‹åºå‘˜çš„è§†è§’æ¥çœ‹è®¡ç®—æœºçš„è½¯ç¡¬ä»¶ç³»ç»Ÿï¼Œä¹Ÿæ˜¯ä¸€æœ¬å¾ˆå¥½çš„ä¹¦ï¼Œä¸è¿‡å°±æ˜¯è¦è¯»å®Œå®ƒï¼Œéœ€è¦ä¸€äº›è€å¿ƒä¸æ—¶é—´ï¼Œæ‰€ä»¥æ²¡å¿…è¦ä¸€æ¬¡æ€§çœ‹å®Œã€‚ä¹Ÿå¯ä»¥ç»§ç»­å°† SICP çš„ç¬¬å››ã€äº”ç« çœ‹å®Œã€‚</p>
<p>è™½ç„¶ä½ çš„ç¼–ç¨‹æŠ€èƒ½ä¸ä¼šå› ä¸ºè¯»äº†è¿™äº›è®²è¿°è®¡ç®—æœºåŸç†çš„ä¹¦è€Œçªé£çŒ›è¿›ï¼Œä½†æ˜¯è¿™äº›ä¹¦å¯ä»¥è®©ä½ ç†è§£ä½ çš„ç¨‹åºæ˜¯åœ¨ä¸€ä¸ªä»€ä¹ˆæ ·çš„ä¸–ç•Œé‡Œè¿è¡Œçš„ã€‚è™½ç„¶ä½ ä¸çŸ¥é“è‡ªå·±ä¸ºä½•è€Œå­˜åœ¨ï¼Œä½†æ˜¯ä½ çŸ¥é“è¿™ä¸ªç¨‹åºä¸ºä½•è€Œå­˜åœ¨ã€‚ä½ ä¸ä»…çŸ¥é“å®ƒä¸ºä½•è€Œå­˜åœ¨ï¼Œè¿˜çŸ¥é“å®ƒæ€æ ·å­˜åœ¨ï¼Œå¹¶ä¸”ä¹ŸçŸ¥é“æ€æ ·è®©å®ƒæ›´å¥½çš„å­˜åœ¨ã€‚è¿™æ ·ï¼Œä¹Ÿå°±æ²¡å¿…è¦åœ¨é‚£äº›æ‰€è°“çš„ã€XXX ç®´è¨€ã€ã€ã€XXX ä¹‹é“ã€ã€ã€XXX ä¹‹ç¦…ã€çš„ä¹¦ç±ä¸Šæµªè´¹ä½ æœ‰é™çš„ç”Ÿå‘½ã€‚</p>
<p>æœ‰æ—¶é—´ï¼Œä¹Ÿå¯ä»¥å¤ä¹ ä¸€ä¸‹ã€Šé»‘å®¢å¸å›½ã€‹ï¼Œå®ƒçš„å¯¼æ¼”è™½ç„¶ä¸æ˜¯ç¨‹åºçŒ¿ï¼Œä½†èƒœä¼¼ç¨‹åºçŒ¿ã€‚çœ‹å®Œé»‘å®¢å¸å›½ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹ Steven Levy å†™çš„ã€Šé»‘å®¢ï¼šè®¡ç®—æœºé©å‘½çš„è‹±é›„ã€‹ã€‚ä»æŠ€æœ¯å±‚é¢è·ƒè¿åˆ°äººæ–‡å±‚é¢ï¼Œä¹Ÿè®¸é‚£æ—¶ä½ ä¼šå¯¹è‡ªå·±çš„äººç”Ÿæœ‰ç€æ›´ä¸ºæ·±åˆ»çš„è®¤è¯†ã€‚è®¡ç®—æœºï¼Œæ˜¯äººç±»ä¸ºè‡ªå·±åˆ›é€ å‡ºæ¥çš„æœ€å¥½çš„ä¸€é¢é•œå­ã€‚æˆ‘ä»¬ç°åœ¨æ²¡æœ‰èƒ½åŠ›äº†è§£è‡ªèº«ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥åˆ¶é€ ä¸å‘å±•è®¡ç®—æœºæ¥é€æ­¥äº†è§£è‡ªå·±ã€‚</p>
<h2 id="æ€è€ƒç”Ÿå‘½"><a href="#æ€è€ƒç”Ÿå‘½" class="headerlink" title="æ€è€ƒç”Ÿå‘½"></a>æ€è€ƒç”Ÿå‘½</h2><p>æ‡‚ç¼–ç¨‹å°±åƒæ‡‚å…¶ä»–ä»»ä½•ä¸€é—¨æŠ€è‰ºä¸€æ ·ï¼Œæ²¡ä»€ä¹ˆäº†ä¸èµ·ï¼Œå› ä¸ºä»»ä½•æŠ€è‰ºéƒ½ä¸ä¼šæ¯”ä½ çš„ç”Ÿå‘½æ›´å¤æ‚ï¼Œå®ƒç”šè‡³ä¸å¦‚è·¯è¾¹å·²ç»è¢«ä½ è§†è€Œä¸è§çš„é‡è‰å¤æ‚ã€‚ç”Ÿå‘½ï¼Œæœ¬èº«å°±æ˜¯ä¸€ä¸ªéå¸¸å¥‡å¦™çš„ä¸œè¥¿ï¼Œå®ƒçš„è¯ç”Ÿå³å¶ç„¶åˆå¿…ç„¶ã€‚æ•´ä¸ªç”Ÿå‘½ä½“ç³»åªè¦ç•¥å¾®æœ‰ä¸€ç‚¹ç‚¹è¯¯å·®ï¼Œæˆ‘å¯èƒ½å°±ä¸ä¼šè¯ç”Ÿäºä¸–ã€‚å½“æˆ‘ç¡®è®¤æˆ‘å·²ç»å­˜åœ¨äºè¿™ä¸ªä¸–ä¸Šäº†ï¼Œä½†æ˜¯æˆ‘åˆä¸çŸ¥é“æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€‚</p>
<p>å¦‚æœæ¯ä¸ªäººéƒ½æ€è€ƒè¿‡ã€æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆå°±æ„å‘³ç€å¯¹äºè¿™ä¸ªé—®é¢˜çš„æ€è€ƒï¼Œæˆ‘ä»¬ä¸æ˜¯è‡ªå‘çš„ï¼Œè€Œæ˜¯è¢«è¿«çš„ã€‚è¿™ä¸ªé—®é¢˜ï¼Œè‡ªæˆ‘ä»¬è¯ç”Ÿä»¥æ¥å°±åƒçƒ™å°ä¸€æ ·å­˜åœ¨äºæ¯ä¸ªäººçš„æ€æƒ³é‡Œã€‚è¿™ä¸ªé—®é¢˜æ˜¯äººç±»çš„ç»ˆæé—®é¢˜ï¼Œæˆ‘ä»¬æ‰€è§£å†³çš„ä¸€åˆ‡é—®é¢˜æœ€ç»ˆéƒ½ä¼šæŒ‡å‘å®ƒã€‚æˆ‘ä»¬ä¸ºè¿™ä¸ªé—®é¢˜è€Œç”Ÿã€‚ä¸ä»…ä»…æ˜¯ä¸ºäº†è‡ªå·±å»å›ç­”è¿™ä¸ªé—®é¢˜è€Œç”Ÿï¼Œè¿˜è¦ä¸ºä»–äººå›ç­”è¿™ä¸ªé—®é¢˜è€Œåˆ›é€ ç”Ÿå­˜æ¡ä»¶ã€‚ä»–äººï¼ŒåŒ…æ‹¬æˆ‘ä»¬çš„å®¶äººï¼Œä¹ŸåŒ…æ‹¬æˆ‘ä»¬çš„æœ‹å‹ä»¥åŠé‚£äº›æˆ‘ä»¬å¹¶ä¸ä¸è®¤è¯†çš„äººã€‚</p>
<p>æˆ‘ä»¬åŠªåŠ›èµšé’±ï¼Œæ˜¯ä¸ºäº†è¿‡æ›´å¥½çš„ç”Ÿæ´»ä¹ˆï¼Ÿä¼¼ä¹å¹¶éå¦‚æ­¤ï¼Œç”Ÿæ´»æ¡ä»¶çš„å¯Œè¶³ï¼Œä¼¼ä¹ä»…ä»…æ˜¯ä¸ºäº†æˆ‘ä»¬å»æ€è€ƒã€æˆ‘ä»¬ä¸ºä½•è€Œå­˜åœ¨ã€è€Œåˆ›é€ ä¸€ä¸ªæ›´å¥½çš„ç¯å¢ƒã€‚å³ä½¿æ˜¯ä¸–ç•Œä¸Šæœ€ç©·çš„äººï¼Œä¹Ÿä¼šè‡ªé—®ï¼Œæˆ‘ä¸ºä½•è€Œå­˜åœ¨ï¼Œä¸Šè‹ä¸ºä½•å¦‚æ­¤å¾…æˆ‘ä¹‹ç±»çš„é—®é¢˜ã€‚åœ¨è¿™ä¸ªé—®é¢˜é¢å‰ï¼Œå¯Œäººä¸ç©·äººæ˜¯ç»å¯¹å¹³ç­‰çš„ã€‚æˆ‘ä»¬çœ‹è§ç¾å¥³ï¼Œå¯èƒ½ä¼šæ€¦ç„¶å¿ƒåŠ¨ï¼Œè¿½è€Œå¨¶ä¹‹ï¼Œæ˜¯ä¸ºäº†ä¸€æ®µç¾å¥½çš„çˆ±æƒ…ä¹ˆï¼Ÿä¹Ÿè®¸ç¾è‰²æ˜¯ä¸€ç§è¯±æƒ‘ï¼Œç”¨äºä¿è¯äººç±»èƒ½å¤Ÿç»§ç»­ç¹è¡ç”Ÿæ¯ï¼Œä»¥ä¾¿ç»§ç»­æ€è€ƒé‚£ä¸ªç»ˆæé—®é¢˜ï¼›å³ä½¿æ˜¯å‡ºäºçˆ±æƒ…ï¼Œä¹Ÿææœ‰å¯èƒ½æ˜¯å› ä¸ºä½ çˆ±çš„äººå¯¹äºä½ å›ç­”ã€æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜å…·æœ‰å¢ç›Šä½œç”¨ã€‚</p>
<p>ä¸€åˆ‡çš„ç”Ÿç‰©ï¼Œçš†ä¸ºå‘½è€Œç”Ÿï¼Œè¿™å°±æ˜¯ç”Ÿå‘½ã€‚ç”Ÿï¼Œæ˜¯ä¸€ç§å¯å˜å¹¶ä¸”å¯è‡ªæˆ‘ç¹è¡çš„çŠ¶æ€ã€‚åªè¦æœ‰ä¸€ç§äº‹ç‰©ï¼Œå®ƒçš„çŠ¶æ€æ˜¯å¯å˜çš„ï¼Œè€Œä¸”è¿™ç§çŠ¶æ€åœ¨ä¿æŒè‡ªèº«å˜åŒ–çš„è¿‡ç¨‹ä¸­èƒ½å¤Ÿäº§ç”Ÿæ–°çš„å¯å˜ä¸”å¯ç¹è¡çš„çŠ¶æ€ï¼Œé‚£ä¹ˆå®ƒå°±æœ‰ã€ç”Ÿã€ã€‚é‚£ä¹ˆå‘½æ˜¯ä»€ä¹ˆï¼Ÿæ±‰å­—çš„ã€å‘½ã€ï¼Œå­—å½¢ä¸Šæœ‰ç‚¹å„¿ã€ä¸€ä¸ªäººä¸€ç”Ÿéƒ½åœ¨å©é—®ã€çš„æ„æ€â€¦â€¦æˆ‘ä»¬åœ¨å©é—®ä»€ä¹ˆï¼Œæˆ–è®¸æ­£æ˜¯ã€æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è‹æ ¼æ‹‰åº•è¯´ä»–çš„å­˜åœ¨æ˜¯ä¸ºäº†ã€è®¤è¯†è‡ªå·±ã€ï¼Œä½†è¿™ä¼¼ä¹ä¸æ˜¯ç­”æ¡ˆï¼Œåªæ˜¯ä¸€ä¸ªè¿‡ç¨‹ã€‚åœ¨<a href="http://segmentfault.com/a/1190000003869521" target="_blank" rel="external">ã€æ³›å‹ä¸é—­åŒ…ã€</a>ï¼Œæˆ‘ä¹‹æ‰€ä»¥æ„Ÿæ…¨ã€æ¯ä¸€ä¸ªäººï¼Œéƒ½åƒæ˜¯ä¸€ä¸ªé—­åŒ…ã€ï¼Œæ˜¯è§‰å¾—å¦‚æœæˆ‘ä»¬æ˜¯ç¨‹åºé‡Œçš„ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬è‡ªèº«ä¼¼ä¹æ°¸è¿œä¹Ÿæ— æ³•çŸ¥é“è‡ªå·±çš„è¿è¡Œç»“æœæ˜¯ä»€ä¹ˆã€‚è¿™ç§æƒ³æ³•æœ‰ç‚¹å®¿å‘½è®ºçš„æ„å‘³ï¼Œä½†æ˜¯æ¯ä¸ªäººçš„è¯ç”Ÿåˆå……æ»¡ç€å¶ç„¶ï¼Œæˆ‘ä»¬çš„ç”Ÿå­˜æ´»åŠ¨ä¼¼ä¹å¹¶ä¸å—åˆ›é€ è€…çš„å½±å“ï¼Œæˆ–è€…åˆ›é€ è€…æ— æ„äºå»å¹²æ‰°æˆ‘ä»¬çš„æ´»åŠ¨ï¼Œå› æ­¤åœ¨ç”Ÿæ´»ä¸­æˆ‘ä»¬ç»å¸¸è§‰å¾—è‡ªå·±æœ‰è‡ªç”±æ„å¿—ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å³æ˜¯è¢«åˆ›é€ çš„ï¼Œåˆæœ‰ä¸€å®šçš„è‡ªç”±æ„å¿—ï¼Œé‚£ä¹ˆè‹æ ¼æ‹‰åº•æˆ–è®¸å°±æ˜¯å¯¹çš„ï¼Œåˆ›é€ è€…è¯•å›¾åˆ›é€ æˆ‘ä»¬çš„ç›®çš„å°±æ˜¯è®©æˆ‘ä»¬å»ã€è®¤è¯†è‡ªå·±ã€ã€‚æˆ‘ä»¬è™½ç„¶å¹¶ä¸çŸ¥é“æˆ‘ä»¬çš„ç”Ÿå‘½ç»ˆæ­¢ä¹‹æ—¶ä¼šäº§ç”Ÿä»€ä¹ˆæ ·çš„ã€è®¡ç®—ç»“æœã€ï¼Œä½†æ˜¯å…´è®¸åˆ›é€ è€…å¯ä»¥ç†è§£è¿™äº›ç»“æœã€‚åŒæ—¶ï¼Œæˆ‘ä»¬æœ‰ç§¯æç”Ÿæ´»çš„è‡ªç”±ï¼Œä¹Ÿæœ‰æ¶ˆæé¢“åºŸçš„è‡ªç”±ï¼Œæˆ‘ä»¬å¯ä»¥å°†è®¤è¯†è‡ªå·±ä½œä¸ºç»ˆæé—®é¢˜å»æ¢ç´¢çš„è‡ªç”±ï¼Œä¹Ÿæœ‰å®Œå…¨ä¸é…åˆè¿™ä½åˆ›é€ è€…è€Œè‡ªæ€çš„è‡ªç”±ã€‚è¿˜æœ‰ä¸€ç§å¯èƒ½ï¼Œåˆ›é€ è€…å·²ç»ä¸å­˜åœ¨ï¼Œæ•´ä¸ªå®‡å®™ç³»ç»Ÿä¹Ÿè®¸åªæ˜¯ä¸€ä¸ªè¢«é—å¼ƒçš„åºŸå¢Ÿï¼Œæˆ–è€…ä»–åªæ˜¯åœ¨æœºå™¨ä¹‹å‰æ‰“äº†ä¸ªç›¹â€¦â€¦</p>
<p>å¾ˆå®¹æ˜“å‘ç°ï¼Œå°†é—®é¢˜ä¸Šæº¯åˆ°åŸç‚¹ï¼Œå†ä»åŸç‚¹æ¼”åŒ–åˆ°ç°åœ¨ï¼Œä¸éš¾å¾—å‡ºè‹æ ¼æ‹‰åº•å¼çš„ç»“è®ºã€‚æ—¢ç„¶æˆ‘ä»¬è¿˜æ´»ç€ï¼Œæ—¢ç„¶æˆ‘ä»¬åœ¨é—®è‡ªå·±å­˜åœ¨çš„æ„ä¹‰ï¼Œé‚£ä¹ˆç­”æ¡ˆå°±è‡ªç„¶æŒ‡å‘äº†ã€è®¤è¯†è‡ªå·±ã€ã€‚ç”Ÿå‘½å¯¹æˆ‘è€Œè¨€åªæ˜¯ä¸ªè¿‡ç¨‹ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘å”¯ä¸€èƒ½è§‚æµ‹çš„å¹¶éä¸–ç•Œçš„å˜åŒ–ï¼Œè€Œæ˜¯æˆ‘è‡ªèº«çš„å˜åŒ–ã€‚è‡³äºæˆ‘è‡ªèº«çš„çŠ¶æ€çš„å˜åŒ–æ˜¯å·²ç»å‘ç”Ÿè¿‡äº†ï¼Œç°åœ¨åªæ˜¯å›æ”¾ï¼Œè¿˜æ˜¯æ­£åœ¨å‘ç”Ÿï¼Œè¿™æ˜¾å¾—éå¸¸çš„ä¸é‡è¦ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•è·³å‡ºè¿™ç§çŠ¶æ€çš„å˜åŒ–ã€‚è¿™å¯èƒ½ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ OOP æ¯” FP æ›´å®¹æ˜“ç†è§£çš„æ ¹æœ¬åŸå› ã€‚</p>
<p>è¿™ä¸ªä¸–ç•Œæœ‰è®¸è®¸å¤šå¤šçš„å·¥ä½œï¼Œä¼¼ä¹æ²¡æœ‰ä»»ä½•ä¸€ç§å·¥ä½œèƒ½åƒç¼–ç¨‹è¿™æ ·æ¿€å‘æˆ‘å¯¹ç”Ÿå‘½å¼€å§‹æ€è€ƒã€‚</p>
<h2 id="ä»å…¶ä»–é¢†åŸŸå¯»æ‰¾ç­”æ¡ˆ"><a href="#ä»å…¶ä»–é¢†åŸŸå¯»æ‰¾ç­”æ¡ˆ" class="headerlink" title="ä»å…¶ä»–é¢†åŸŸå¯»æ‰¾ç­”æ¡ˆ"></a>ä»å…¶ä»–é¢†åŸŸå¯»æ‰¾ç­”æ¡ˆ</h2><p>ä¸ºäº†å¯»æ‰¾ç»ˆæé—®é¢˜çš„ç­”æ¡ˆï¼Œæœ‰å¿…è¦é˜…è¯»ä¸€äº›å“²å­¦ã€ç‰©ç†ã€ç”Ÿç‰©ä¹‹ç±»çš„ä¹¦ç±ã€‚äººç±»æ•°åƒå¹´çš„æ–‡æ˜ï¼Œã€æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜ä¹Ÿå·²ç»è¢«æ€è€ƒäº†æ•°åƒå¹´ã€‚æ—¢ç„¶æˆ‘ä»¬æ­¤åˆ»æ‰€å¤„çš„ç³»ç»Ÿè¿˜åœ¨è¿è¡Œç€ï¼Œé‚£å°±è¯´æ˜ç­”æ¡ˆå¹¶æœªçœŸæ­£å‡ºç°ã€‚ä½†æ˜¯ï¼Œåœ¨å†³å®šè‡ªå·±å»æ€è€ƒè¿™ä¸ªé—®é¢˜ä¹‹å‰ï¼Œçœ‹çœ‹è¿‡å»çš„æ—¶ä»£é‡Œçš„æœ‰æ™ºæ…§çš„äººæ˜¯å¦‚ä½•æ€è€ƒçš„ï¼Œè¿™æ˜¯ä¸€ä¸ªå¿…é¡»çš„è¿‡ç¨‹ã€‚äººç±»å¯¹è¿™ä¸ªé—®é¢˜çš„æ‰€æœ‰æ€è€ƒè¿‡ç¨‹æ˜¯ä¼´éšç€è‡ªèº«çš„ç¹è¡ç”Ÿæ¯ä¸æ–­çš„ä¼ é€’ä¸‹å»çš„ã€‚</p>
<p>ä¹Ÿè®¸ä½ è¯¥çœ‹ç‚¹å“²å­¦ç±»çš„ä¹¦ã€‚å¦‚æœä»æœªæƒ³è¿‡å»çœ‹å“²å­¦çš„ä¹¦ï¼Œæˆ‘æ¨èä¸€æœ¬ 14 å²çš„å°‘ç”·å°‘å¥³å°±åº”è¯¥é˜…è¯»çš„ã€Šè‹è²çš„ä¸–ç•Œã€‹ï¼Œä½ ä¸è¦æ‰“æˆ‘ã€‚ç½—ç´ çš„é‚£æœ¬ã€Šè¥¿æ–¹å“²å­¦å²ã€‹è™½ç„¶å‡ºè‡ªä»–ä¸ªäººçš„è§†è§’ï¼Œä½†æ˜¯æ˜¾ç„¶æˆ‘ä»¬å¯¹å“²å­¦çš„ç†è§£ä¹Ÿå¾ˆéš¾è¾¾åˆ°ä»–é‚£æ ·çš„é«˜åº¦ï¼Œé‰´äºæˆ‘ä»¬ä¹Ÿä¸æ˜¯æ‰“ç®—å»åœ¨å“²å­¦ä¸Šæœ‰æ‰€æˆå°±ï¼Œã€Šè¥¿æ–¹å“²å­¦å²ã€‹è¶³å¤Ÿæˆ‘ä»¬çœ‹çš„äº†ã€‚æˆ‘ä¸è®¤ä¸ºè¿™ä¸ªä¸–ç•Œä¸ŠçœŸæ­£å­˜åœ¨ã€æ­£ç¡®ã€çš„å“²å­¦ã€‚</p>
<p>å¤ä¹ ç‰©ç†ã€‚ã€Šè´¹æ©æ›¼ç‰©ç†å­¦è®²ä¹‰ã€‹ç¬¬ä¸€å·å°±å¾ˆå¥½ï¼Œäººç±»æ‰€èƒ½æ„ŸçŸ¥åˆ°çš„è¿™ä¸ªä¸–ç•Œï¼Œè´¹æ©æ›¼åƒè®²æ•…äº‹ä¸€æ ·çš„å·®ä¸å¤šä¸€ç½‘æ‰“å°½äº†ã€‚å¦‚æœè¿è´¹æ›¼çš„ä¹¦éƒ½çœ‹ä¸æ‡‚ï¼Œä¸å¦¨çœ‹çœ‹ã€Šæ—¶é—´çš„å½¢çŠ¶ã€‹+ã€Šé‡å­ç‰©ç†å²è¯ã€‹ï¼Œå®ƒä»¬æ˜¯è¿‘å¹´æ¥åœ¨ç›¸å¯¹è®ºåŠå…¶ä¹‹åçš„ç‰©ç†å­¦æ–¹é¢ä¸­å›½äººå†™çš„éå¸¸ä¼˜ç§€çš„ç§‘æ™®ä¹¦ã€‚è¿˜æœ‰ä¸€æœ¬æ˜¯æˆ‘å¤§å­¦æ—¶ç»å¸¸çœ‹çš„ã€Šä»ä¸€åˆ°æ— ç©·å¤§ã€‹ï¼Œè™½ç„¶å¹´ä»£å·²é¢‡ä¸ºä¹…è¿œï¼Œä½†ä¾ç„¶ä¸å¤±ä¸ºæå¥½çš„ç‰©ç†ç§‘æ™®è‘—ä½œã€‚</p>
<p>ç”Ÿç‰©å­¦ï¼Œè¿™é—¨è¯¾åœ¨ä¸­å­¦æ—¶æ˜¯æˆ‘æœ€è®¨åŒçš„è¯¾ç¨‹ä¹‹ä¸€ã€‚å› ä¸ºæˆ‘å®åœ¨æ˜¯çœ‹ä¸æ‡‚ä¹¦é‡Œçš„æ’å›¾ï¼Œä¹¡æ‘ä¸­å­¦è¿ä¸ªæ˜¾å¾®é•œä¸çœŸå®çš„æ ‡æœ¬éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥é•¿æœŸä»¥æ¥ï¼Œæˆ‘ä¸€ç›´éƒ½æ˜¯ä¸ªç”Ÿç‰©ç›²ã€‚å¾ˆå¤šå¸¸è§çš„èŠ±è‰æ ‘æœ¨é¸Ÿå…½è™«é±¼ï¼Œæˆ‘è¿å®ƒä»¬çš„åå­—éƒ½å«ä¸ä¸Šæ¥ï¼Œæ›´ä¸è¦è¯´å®ƒä»¬å…·ä½“å±äºå“ªä¸ªé—¨çº²ç›®ç§‘å±ç§äº†ã€‚ä½†æ˜¯æœ‰ä¸€æœ¬ç”Ÿç‰©å­¦çš„ä¹¦æˆ‘è¿˜æ˜¯èƒ½çœ‹æ‡‚çš„â€”â€”ã€Šæ¼«ç”»ç©è½¬é—ä¼ å­¦ã€‹ï¼Œè¿™æ˜¯æœ¬éå¸¸å¥½çš„é—ä¼ å­¦ç§‘æ™®ä¹¦ã€‚å½“æ—¶æˆ‘æ˜¯å› ä¸ºå­¦ä¹ é—ä¼ ç®—æ³•è€Œä¹°æ¥çš„ï¼Œç»“æœä»å®ƒä»ç¬¬ä¸€é¡µå¼€å§‹å°±æŠŠæˆ‘çš„çœ¼ç›æŠ“ä½äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¾ˆè¯šæ³çš„è¯´ï¼Œè¿™äº›ä¹¦éƒ½è¯»å®Œï¼Œæˆ‘è¿˜æ˜¯ä¸çŸ¥é“ã€æˆ‘ä¸ºä½•è€Œå­˜åœ¨ã€è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆï¼Œä½†æ˜¯æˆ‘å¯¹ç¼–ç¨‹æœ‰äº†æ›´å¤šçš„æ€è€ƒã€‚ç‰¹åˆ«æ˜¯æœ€è¿‘ï¼Œé‡å­åŠ›å­¦å°†åŸºæœ¬ç²’å­çš„è¿åŠ¨å½’ç»“ä¸ºæ¦‚ç‡é—®é¢˜çš„æ€æƒ³ï¼Œè¿™å¯¹äºæˆ‘ä¸€ç›´è‡´åŠ›å»è§£å†³çš„ä¸€ä¸ªé—®é¢˜æœ‰å¾ˆå¤§çš„å¯å‘ã€‚</p>
<h2 id="è¿™äº›ä¹¦ä½ éƒ½çœ‹è¿‡ä¹ˆï¼Ÿ"><a href="#è¿™äº›ä¹¦ä½ éƒ½çœ‹è¿‡ä¹ˆï¼Ÿ" class="headerlink" title="è¿™äº›ä¹¦ä½ éƒ½çœ‹è¿‡ä¹ˆï¼Ÿ"></a>è¿™äº›ä¹¦ä½ éƒ½çœ‹è¿‡ä¹ˆï¼Ÿ</h2><p>éƒ½çœ‹è¿‡ï¼Œä½†æ˜¯æœ‰ä¸€äº›æ²¡æœ‰çœ‹å®Œã€‚æœ‰äº›ä¹¦æ˜¯çœ‹å®Œäº†ï¼Œä½†æ˜¯æ—¶é—´ä¹…äº†ï¼Œæœ‰äº›é—å¿˜ï¼Œä¸€ç›´æƒ³æ‰¾ç‚¹æ—¶é—´å†é‡è¯»ä¸€éã€‚</p>
<p>æœ‰äº›ä¹¦æ˜¯å› ä¸ºå®åœ¨å¤ªå¥½ï¼Œä¸å¿å¿ƒä¸€ä¸‹éƒ½çœ‹å®Œã€‚è¿™æ ·è¯´ï¼Œæœ‰äº›çŸ«æƒ…ï¼Œä½†äº‹å®å°±æ˜¯å¦‚æ­¤ã€‚åƒã€Šè´¹æ©æ›¼ç‰©ç†å­¦è®²ä¹‰ã€‹ï¼Œè™½ç„¶æœ‰ç€ç‰©ç†å­¦ç•Œå°é£ä¾ ä¹‹ç§°çš„è´¹æ©æ›¼å·²ç»å°†æ·±é‚ƒçš„ç‰©ç†å­¦å˜æˆäº†æˆ‘èƒ½å¤Ÿè¯»æ‡‚çš„äººç±»è¯­è¨€ï¼Œä½†æ˜¯ä¸€æ–¹é¢æˆ‘ä¸æ˜¯ä¸“ä¸šç ”ç©¶ç‰©ç†å­¦çš„äººï¼Œæˆ‘æ²¡æœ‰å¿…è¦èµ¶è¿›åº¦ä¼¼çš„å°†ä»–çš„ä¹¦å½»åº•è¯»å®Œï¼Œå¦ä¸€æ–¹é¢æ˜¯ä¸€æ—¦è¯»å®Œäº†ï¼Œæˆ‘å°±ä¼šæƒ‹æƒœï¼Œå®ƒä¸ä¼šå†æœ‰ç¬¬äºŒå­£â€¦â€¦æˆ‘æ‰“ç®—å°†è´¹æ©æ›¼çš„è¿™ä¸‰å·ç‰©ç†å­¦è®²ä¹‰ç•™ç»™æˆ‘ä»Šåçš„æ—¶é—´é‡Œæ…¢æ…¢çš„å»çœ‹ï¼Œæˆ‘ä¹Ÿå¯ä»¥æŠŠè¿™äº›çŸ¥è¯†è®²ç»™æˆ‘çš„å„¿å­å¬ã€‚</p>
<p>æœ‰äº›ä¹¦å¯¹æˆ‘è€Œè¨€æ˜¯å› ä¸ºå¤ªéš¾ï¼Œå³ä½¿æˆ‘è§‰å¾—å·²ç»çœ‹å®Œäº†ï¼Œä½†è¿‡ä¸€æ®µæ—¶é—´å‘ç°ï¼Œè·Ÿæ²¡çœ‹è¿‡æ˜¯ä¸€æ ·çš„ã€‚è¿™äº›ä¹¦ï¼Œæˆ‘ä¹Ÿåªèƒ½å½’ç±»ä¸ºæ²¡æœ‰çœ‹å®Œçš„ä¹¦ã€‚</p>
<p>å‡¡æ˜¯æˆ‘çœ‹çš„ä¹¦ï¼Œéƒ½æ˜¯æˆ‘è®¤ä¸ºåœ¨ä¹¦ä¸­æ‰€æ¶‰åŠçš„æ–¹å‘ä¸Šï¼Œä½œè€…æ¯”æˆ‘èµ°çš„æ›´ä¸ºæ·±è¿œã€‚ä½†æ˜¯æˆ‘ä¹Ÿä¸ä¼šè‡ªå‘ï¼Œå› ä¸ºä»–ä»¬ç°åœ¨å·²ç»æ²¡æ³•èµ°äº†â€¦â€¦</p>
<h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>æœ¬æ–‡å†™äºä¸€ä¸ªæ·±ç§‹åˆå¯‚å¯çš„ä¸‹åˆï¼Œç›®çš„åªæ˜¯ä¸ºæˆ‘çš„å°ä¼™ä¼´ä»¬å­¦ä¹ ç¼–ç¨‹æŒ‡å‡ºä¸€æ¡é“è·¯ã€‚ä» SICP å¼€å§‹ï¼Œå¯èƒ½æœ‰è®¸å¤šäººè§‰å¾—ä¸é è°±ï¼Œä½†æ˜¯è€ƒè™‘åˆ°è¿™äº›å°ä¼™ä¼´ä¸€ä¸ªä¸€ä¸ªéƒ½æ˜¯ç ”ç©¶ç”Ÿï¼Œè€ƒç ”æœŸé—´ç»è¿‡äº†é«˜æ•°ã€çº¿ä»£ã€æ¦‚ç‡ä»¥åŠè‹±è¯­çš„ã€æ´—ç¤¼ã€ï¼Œç ”ä¸€ä¹Ÿä¼šä¿®æ•°å€¼åˆ†æä¸çŸ©é˜µåˆ†æè¿™ä¸¤é—¨æ•°å­¦è¯¾ã€‚å³ä½¿ä»–ä»¬ä»¥å‰ä»æœªæ¥è§¦è¿‡ç¼–ç¨‹ï¼Œä½†æ˜¯ä»–ä»¬çš„æƒ…å†µï¼ŒSICP è¿˜æ˜¯æŒºé€‚åˆä»–ä»¬çš„ã€‚å¦‚æœä»–ä»¬è¿ SICP çš„å‰ä¸‰ç« éƒ½æä¸å®šï¼Œè¿™åªèƒ½è¯´æ˜ä»–ä»¬è¿ MIT å¤§ä¸€çš„å­¦ç”Ÿéƒ½ä¸å¦‚äº†â€¦â€¦è¿™æˆ–è®¸ä¸æ˜¯ä»–ä»¬çš„æ‚²å“€ï¼Œè€Œæ˜¯è¿™ä¸ªå›½å®¶çš„æ‚²å“€ã€‚</p>
<p>å¯¹äºæˆ‘ä¸çŸ¥é“åº•ç»†åˆæ‰“ç®—å­¦ç¼–ç¨‹çš„åŒå­¦ï¼Œè¿™ç¯‡æ–‡ç« å¯èƒ½ä¸ä¼šå¤ªé è°±ï¼Œæ‰€ä»¥æˆ‘åªèƒ½åœ¨é¢˜ç›®ä¸­å†™ä¸Šã€ä¸è´Ÿè´£ä»»ã€ã€‚ä¸è¿‡ï¼Œæ–‡ç« ä¸­å‡ºç°çš„è¿™äº›ä¹¦ï¼Œæˆ‘è§‰å¾—è¿˜éƒ½æ˜¯æŒºä¸é”™çš„ï¼Œæœ‰æ—¶é—´çœ‹ä¸€ä¸‹ï¼Œåº”è¯¥ä¸æ˜¯æµªè´¹æ—¶é—´ã€‚</p>
<h2 id="å‡ºå¤„"><a href="#å‡ºå¤„" class="headerlink" title="å‡ºå¤„"></a>å‡ºå¤„</h2><ul>
<li><a href="http://segmentfault.com/a/1190000003873192" target="_blank" rel="external">http://segmentfault.com/a/1190000003873192</a> by <a href="http://segmentfault.com/u/garfileo" target="_blank" rel="external">garfileo</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ¥æˆ‘ä»¬è¿™ä¸ªå®éªŒå®¤é‡Œè¯»ç ”çš„å­¦ç”Ÿå¯èƒ½è‡ªä»æ¥åˆ°è¿™é‡Œçš„ç¬¬ä¸€å¤©å°±è§‰å¾—è‡ªå·±çš„å‘½è¿å¾ˆè‹¦é€¼ã€‚ä»–ä»¬è¯»æœ¬ç§‘æ—¶ä¸»ä¿®çš„æ˜¯æœºæ¢°è®¾è®¡ã€åˆ¶é€ ä»¥åŠè‡ªåŠ¨åŒ–ä¹‹ç±»çš„ä¸“ä¸šï¼Œæ¯•ä¸šæ—¶çš„ç®€å†ä¸Šä¹Ÿé¡¶å¤šæ˜¯å†™å†™æ“…é•¿ MS Wordã€PowerPointã€UGNXã€AutoCAD ä¹‹ç±»çš„åº”ç”¨è½¯ä»¶ã€‚ä»–ä»¬æœ‰é™çš„å­¦ä¹ ç”Ÿæ¶¯é‡Œï¼Œæ€ä¹ˆä¹Ÿä¸
    
    </summary>
    
      <category term="è½¬è½½" scheme="http://liujiacai.net/categories/%E8%BD%AC%E8%BD%BD/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„ç¬¬ä¸€ä¸ªç©å…·è¯­è¨€ JCScheme é—®ä¸–äº†</title>
    <link href="http://liujiacai.net/blog/2015/10/03/first-toy-scheme/"/>
    <id>http://liujiacai.net/blog/2015/10/03/first-toy-scheme/</id>
    <published>2015-10-03T09:13:49.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å¾—åœ¨ä¸Šå¤§å­¦é‚£ä¼šï¼Œå°±æƒ³ç€èƒ½å¤Ÿå®ç°ä¸ªè‡ªå·±çš„ç¼–ç¨‹è¯­è¨€ã€‚ç”±äºä¹‹å‰æŠ€èƒ½ä¸è¶³ï¼Œä¸€ç›´æ²¡æ•¢å»å°è¯•ã€‚ç°èµ¶ä¸Šå›½åº†ä¸ƒå¤©å‡æœŸï¼ŒSICP çœ‹çš„ä¹Ÿæ­£èµ·åŠ²ï¼Œç»ˆäºé¼“èµ·å‹‡æ°”ï¼ŒæŠŠè¿™ä¸ªå‘ç»™å¡«ä¸Šäº†ã€‚ç”šæ˜¯å¼€å¿ƒã€‚<br>å®ç° JCScheme è¿™ä¸ªè¯­è¨€å‰åå¤§æ¦‚ç”¨äº†ä¸€å¤©æ—¶é—´ï¼ŒåŠŸèƒ½è™½ç„¶ç®€å•ï¼Œä½†æ˜¯â€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œç¼–ç¨‹è¯­è¨€ä¸­æœ€åŸºæœ¬çš„ç±»å‹ã€ä½œç”¨åŸŸã€å‡½æ•°éƒ½æ¶µç›–äº†ï¼Œä»¥ååœ¨æ‰©å±•æ—¶ä¹Ÿå¾ˆæ–¹ä¾¿ã€‚<br>å¦‚æœä½ å’Œä¹‹å‰çš„æˆ‘ä¸€æ ·ï¼Œæƒ³å®ç°ä¸€é—¨è¯­è¨€ä½†åˆè‹¦äºæ— ä»ä¸‹æ‰‹ï¼Œé‚£ä¹ˆä½ åº”è¯¥èŠ±åŠä¸ªå°æ—¶çœ‹çœ‹æœ¬æ–‡ï¼Œç›¸ä¿¡ä½ è‚¯å®šä¼šæœ‰æ‰€æ”¶è·ã€‚<br>æœ¬æ–‡æ²¡æœ‰å¤æ‚éš¾æ‡‚çš„ç¼–è¯‘åŸç†çŸ¥è¯†ï¼Œæ²¡æœ‰å­¦è¿‡ç¼–è¯‘åŸç†çš„äººä¸è¦å®³æ€•ã€‚</p>
<p>JCScheme å®Œæ•´ä»£ç æ‰˜ç®¡åˆ°æˆ‘çš„ <a href="https://github.com/jiacai2050/JCScheme" target="_blank" rel="external">Github</a>ï¼Œå¹¶ä¸”ä»¥åä¼šæŒç»­æ›´æ–°ï¼Œå¦‚æœä½ å…ˆä»æ— åˆ°æœ‰å®ç°ä¸ªè¯­è¨€å¯ä»¥å…³æ³¨è¿™ä¸ªé¡¹ç›®ã€‚ç”±äº JCScheme ä¸€ç›´åœ¨æ›´æ–°ä¸­ï¼Œä¸‹é¢æŸäº›è®¾è®¡æˆ–é“¾æ¥å¯ä»¥ä¼šå¤±æ•ˆï¼Œæ‰€ä»¥è¿˜æ˜¯å»ºè®®ä½ å…³æ³¨  Github ä¸Šçš„é¡¹ç›®ã€‚</p>
<h2 id="é¢„å¤‡çŸ¥è¯†"><a href="#é¢„å¤‡çŸ¥è¯†" class="headerlink" title="é¢„å¤‡çŸ¥è¯†"></a>é¢„å¤‡çŸ¥è¯†</h2><h3 id="å‰ç¼€è¡¨è¾¾å¼"><a href="#å‰ç¼€è¡¨è¾¾å¼" class="headerlink" title="å‰ç¼€è¡¨è¾¾å¼"></a>å‰ç¼€è¡¨è¾¾å¼</h3><p>ç”±äº JCScheme æå…¶ç®€å•ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦ä»€ä¹ˆèƒŒæ™¯çŸ¥è¯†å³å¯çœ‹æ‡‚æœ¬æ–‡ï¼Œä¸è¿‡ä½ æœ€å¥½äº†è§£ç‚¹ Scheme è¯­è¨€ï¼Œå¦‚æœä¸äº†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œä½ åªéœ€è¦çŸ¥é“ JCScheme ä¸­çš„è¯­å¥ä½¿ç”¨<a href="https://zh.wikipedia.org/zh/%E6%B3%A2%E5%85%B0%E8%A1%A8%E7%A4%BA%E6%B3%95" target="_blank" rel="external">å‰ç¼€è¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºæ³¢å…°è¡¨ç¤ºæ³•ï¼‰</a>ï¼Œå¦‚æœä½ ä¹‹å‰æ²¡äº†è§£è¿‡ï¼Œéœ€è¦é€‚åº”ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># è¿™æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ä¸­ç¼€è¡¨è¾¾å¼</div><div class="line">(5 âˆ’ 6) * 7</div><div class="line"># è¿™å°±æ˜¯å‰ç¼€è¡¨è¾¾å¼</div><div class="line">* (âˆ’ 5 6) 7</div></pre></td></tr></table></figure></p>
<p>å‰ç¼€è¡¨è¾¾å¼æœ€æ˜æ˜¾çš„ä¸€ä¸ªå¥½å¤„æ˜¯å…¶æ“ä½œç¬¦çš„å‚æ•°å¯ä»¥æœ‰ä¸å®šä¸ªï¼Œåƒ<code>(+ 1 2 3 4)</code>ã€‚</p>
<h3 id="ç¼–ç¨‹è¯­è¨€åˆ†ç±»"><a href="#ç¼–ç¨‹è¯­è¨€åˆ†ç±»" class="headerlink" title="ç¼–ç¨‹è¯­è¨€åˆ†ç±»"></a>ç¼–ç¨‹è¯­è¨€åˆ†ç±»</h3><p>ç°åœ¨ç¼–ç¨‹è¯­è¨€å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ol>
<li>ç¼–è¯‘å‹ï¼Œè¯¥ç±»å‹è¯­è¨€æºä»£ç ç»ç”±ç¼–è¯‘å™¨ï¼ˆcompilerï¼‰è½¬åŒ–ä¸ºæœºå™¨è¯­è¨€ï¼Œå†ç”±æœºå™¨è¿è¡Œæœºå™¨ç ã€‚åƒC/C++ å³å±äºè¿™ä¸ªèŒƒç•´ã€‚æ›´è¯¦ç»†çš„å¯ä»¥å‚è€ƒ<a href="http://segmentfault.com/a/1190000003814221" target="_blank" rel="external">æ·±å…¥ç†è§£è®¡ç®—æœºä¹‹hello worldèƒŒåçš„æ•…äº‹</a></li>
<li>è§£é‡Šå‹ï¼Œè¯¥ç±»å‹è¯­è¨€ä¸è½¬åŒ–ä¸ºæœ€ç»ˆçš„æœºå™¨è¯­è¨€ï¼Œè€Œæ˜¯ç”±è§£é‡Šå™¨ï¼ˆinterpreterï¼‰é€è¡Œè§£é‡Šæ‰§è¡Œï¼Œåƒ Pythonã€JavaScript å±äºè¿™ä¸ªèŒƒç•´ï¼Œ JCScheme ä¹Ÿæ˜¯è¿™ç§ç±»å‹ã€‚</li>
</ol>
<p>ç”±äºæˆ‘è¿™é‡Œé‡‡ç”¨ Java æ¥å®ç° JCScheme çš„è§£é‡Šå™¨ï¼Œæ‰€ä»¥ JCScheme æºä»£ç çš„æ‰§è¡Œé€»è¾‘æ˜¯è¿™æ ·çš„ï¼š</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2548UfVXXXXXiXXXXXXXXXXXX_!!581166664.png" alt="JCScheme æºç¨‹åºæ‰§è¡Œé€»è¾‘"><br></center>

<p>å¯ä»¥çœ‹åˆ°ï¼ŒJCScheme è§£é‡Šå™¨çš„ä¸»è¦å·¥ä½œå°±æ˜¯å°†æŒ‰ç…§è‡ªå®šä¹‰è¯­æ³•è§„åˆ™ä¹¦å†™çš„æºç¨‹åºï¼Œè½¬åŒ–ä¸º Java ä»£ç ï¼Œä¹‹åçš„äº‹æƒ…å°±ç”± JVM æ¥å¤„ç†äº†ã€‚</p>
<h3 id="JCScheme-è§£é‡Šå™¨"><a href="#JCScheme-è§£é‡Šå™¨" class="headerlink" title="JCScheme è§£é‡Šå™¨"></a>JCScheme è§£é‡Šå™¨</h3><p>JCSchemeè§£é‡Šå™¨ä¸»è¦åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œè§£æï¼ˆParseï¼‰å’Œæ±‚å€¼ï¼ˆEvaluationï¼‰ï¼š</p>
<ul>
<li>è§£æï¼šè§£ææºç¨‹åºï¼Œå¹¶ç”Ÿæˆè§£é‡Šå™¨å¯ä»¥ç†è§£çš„ä¸­é—´ï¼ˆIntermediateï¼‰ç»“æ„ã€‚è¿™éƒ¨åˆ†åŒ…å«è¯æ³•åˆ†æï¼Œè¯­æ³•åˆ†æï¼Œè¯­ä¹‰åˆ†æï¼Œç”Ÿæˆè¯­æ³•æ ‘ã€‚</li>
<li>æ±‚å€¼ï¼šæ‰§è¡Œè§£æé˜¶æ®µå¾—åˆ°çš„ä¸­ä»‹ç»“æ„ç„¶åå¾—åˆ°è¿è¡Œç»“æœã€‚è¿™éƒ¨åˆ†åŒ…å«ä½œç”¨åŸŸï¼Œç±»å‹ç³»ç»Ÿè®¾è®¡å’Œè¯­æ³•æ ‘éå†ã€‚</li>
</ul>
<p>æ˜ç¡®äº†è§£é‡Šçš„å·¥ä½œåï¼Œæˆ‘ä»¬ç¬¬ä¸€æ­¥æ˜¯åˆ¶å®šè¯­è¨€çš„è¯­æ³•ï¼Œç„¶åè¿›è¡Œè§£æã€æ±‚å€¼å³å¯ã€‚</p>
<h2 id="JCScheme-è¯­æ³•"><a href="#JCScheme-è¯­æ³•" class="headerlink" title="JCScheme è¯­æ³•"></a>JCScheme è¯­æ³•</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">rlwrap java -jar target/JCScheme-*.jar</div><div class="line">&gt;&gt; (* 2 3 4 5)</div><div class="line">120</div><div class="line">&gt;&gt; (def a 4)</div><div class="line">null</div><div class="line">&gt;&gt; (def b 5)</div><div class="line">null</div><div class="line">&gt;&gt; (if (&gt; a b) a b)</div><div class="line">5</div><div class="line">&gt;&gt; (def max (lambda (a b) (if (&gt; a b) a b)))</div><div class="line">null</div><div class="line">&gt;&gt; (def c (max a b))</div><div class="line">null</div><div class="line">&gt;&gt; c</div><div class="line">5</div></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼ŒJCScheme æœ‰ä»¥ä¸‹åŸºæœ¬ç‰¹æ€§ï¼š</p>
<ol>
<li>æ”¯æŒæ•´æ•°ï¼ˆJava intå®ç°ï¼‰ä¸å¸ƒå°”ï¼ˆJava boolå®ç°ï¼‰ã€å‡½æ•°ä¸‰ç§ç±»å‹</li>
<li>æä¾›<code>def</code>è¿›è¡Œå˜é‡å®šä¹‰ã€<code>if</code>è¿›è¡Œé€»è¾‘åˆ¤æ–­ã€<code>lambda</code>è¿›è¡Œå‡½æ•°å£°æ˜</li>
<li>æ”¯æŒæ•´æ•°çš„<code>+</code>ã€<code>-</code>ã€<code>*</code>ã€<code>/</code>å››ç§åŸºæœ¬ç®—æœ¯æ“ä½œï¼Œ<code>&gt;</code>ã€<code>&lt;</code>ã€<code>=</code>ä¸‰ç§æ¯”è¾ƒæ“ä½œã€‚å‚æ•°å¯ä»¥ä¸ºå¤šä¸ª</li>
<li>æ›´å¤šçš„ç‰¹æ€§å¯ä»¥å‚è€ƒ<a href="https://github.com/jiacai2050/JCScheme#ChangeLog" target="_blank" rel="external">ChangeLog</a></li>
</ol>
<h2 id="è§£æè¿‡ç¨‹"><a href="#è§£æè¿‡ç¨‹" class="headerlink" title="è§£æè¿‡ç¨‹"></a>è§£æè¿‡ç¨‹</h2><p><code>è§£æè¿‡ç¨‹</code>çš„ä¸€èˆ¬é¡ºåºä¸º</p>
<blockquote>
<p>è¯æ³•åˆ†æ â€”-&gt; è¯­æ³•åˆ†æ â€”-&gt; è¯­ä¹‰åˆ†æ</p>
</blockquote>
<p>è§£æè¿‡ç¨‹æœ€ä¸»è¦çš„æ˜¯å¾—åˆ°è¯­æ³•æ ‘ï¼Œä¹‹åï¼Œå°±å¯ä»¥ç”±åé¢çš„<code>æ±‚å€¼è¿‡ç¨‹</code>è¿›è¡Œæ±‚å€¼äº†ã€‚</p>
<h3 id="è¯æ³•åˆ†æ"><a href="#è¯æ³•åˆ†æ" class="headerlink" title="è¯æ³•åˆ†æ"></a>è¯æ³•åˆ†æ</h3><p>è¯æ³•åˆ†æï¼ˆlexical analysisï¼‰å°±æ˜¯å°†æºç¨‹åºä¸­çš„å­—ç¬¦åˆ†å‰²ä¸ºä¸€ä¸ªä¸ªå•è¯ï¼ˆtokenï¼Œæ„æˆæºä»£ç æœ€å°çš„å•ä½ï¼‰ã€‚<br>ç”±äº JCScheme ä¸­ä½¿ç”¨å‰ç¼€è¡¨ç¤ºï¼Œæ‰€ä»¥è¯æ³•è§£æå¾ˆç®€å•ï¼Œä¸¤è¡Œä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">src = src.replaceAll(&quot;\\(&quot;, &quot;( &quot;).replaceAll(&quot;\\)&quot;, &quot; )&quot;);</div><div class="line">String[] tokens = src.split(&quot;\\s+&quot;);</div></pre></td></tr></table></figure></p>
<h3 id="è¯­æ³•åˆ†æ"><a href="#è¯­æ³•åˆ†æ" class="headerlink" title="è¯­æ³•åˆ†æ"></a>è¯­æ³•åˆ†æ</h3><p>è¯­æ³•åˆ†æï¼ˆSyntactic analysisï¼Œä¹Ÿå«Parsingï¼‰ä¹Ÿå°±æ˜¯æŠŠè¯æ³•åˆ†æå¾—åˆ°çš„tokenåºåˆ—è½¬åŒ–ä¸º<a href="https://en.wikipedia.org/wiki/Abstract_syntax_tree" target="_blank" rel="external">è¯­æ³•æ ‘ï¼ˆASTï¼‰</a>ï¼Œè¯­æ³•æ ‘æ˜¯ç¨‹åºçš„ä¸­é—´è¡¨ç¤ºå½¢å¼ï¼Œä¸å…·ä½“è¯­è¨€æ— å…³ã€‚JCScheme é‡‡ç”¨ Lisp ä¸­ç»å…¸çš„<a href="https://en.wikipedia.org/wiki/S-expression" target="_blank" rel="external">Sè¡¨è¾¾å¼ï¼ˆS-expressionï¼‰</a>æ¥è¡¨ç¤ºè¯­æ³•æ ‘ã€‚</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2MKQ2fFXXXXX1XpXXXXXXXXXX_!!581166664.png" alt="(* 2 (+ 3 4)) çš„è¯­æ³•æ ‘"><br></center>

<p>AST æœ¬è´¨æ˜¯ä¸€ç§æ ‘ï¼Œå¤§å®¶å¯ä»¥å…ˆæƒ³æƒ³æ•°æ®ç»“æ„ä¸­ä¸€èˆ¬éƒ½æ˜¯æ€ä¹ˆè®¾è®¡æ ‘çš„å­˜å‚¨ç»“æ„ã€‚ï¼ˆå…¶å®åªè¦è®¾è®¡çš„æ•°æ®ç»“æ„èƒ½å¤Ÿä¿è¯è·å–åˆ°å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸å­èŠ‚ç‚¹å°±å¯ä»¥äº†ï¼‰ã€‚ä¸‹é¢çœ‹çœ‹æˆ‘çš„å®ç°ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">public class SExpression &#123;</div><div class="line">    private String value;</div><div class="line">    private SExpression parent;</div><div class="line">    private List&lt;SExpression&gt; children;</div><div class="line"></div><div class="line">    public SExpression(String value, SExpression parent) &#123;</div><div class="line">        this.value = value;</div><div class="line">        this.parent = parent;</div><div class="line">        this.children = new ArrayList&lt;&gt;();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public boolean addChild(SExpression child) &#123;</div><div class="line">        return this.children.add(child);</div><div class="line">    &#125;</div><div class="line">    // 3ä¸ª getter å‡½æ•°çœç•¥</div><div class="line">    // è¿›è¡Œæ±‚å€¼çš„ eval å‡½æ•°çœç•¥ï¼Œè¿™æ˜¯é‡ç‚¹ï¼Œåé¢ä¼šå•ç‹¬ä»‹ç»</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        if (0 == children.size()) &#123;</div><div class="line">            return value;</div><div class="line">        &#125; else &#123;</div><div class="line">            StringBuffer displayBuffer = new StringBuffer(value + &quot; &quot;);</div><div class="line">            for (SExpression child : children) &#123;</div><div class="line">                displayBuffer.append(child.toString() + &quot; &quot;);</div><div class="line">            &#125;</div><div class="line">            return displayBuffer.toString();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è§£ætokenåºåˆ—ç”Ÿäº§ASTçš„å‡½æ•°æ˜¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public static final String START_TOKEN = &quot;(&quot;;</div><div class="line">public static final String END_TOKEN = &quot;)&quot;;</div><div class="line"></div><div class="line">public static SExpression parse(String[] tokens) &#123;</div><div class="line">    SExpression root = new SExpression(&quot;&quot;, null);</div><div class="line">    SExpression parent = root;</div><div class="line">    for (String token : tokens) &#123;</div><div class="line">        SExpression newNode = new SExpression(token, parent);</div><div class="line">        parent.addChild(newNode);</div><div class="line">        switch (token) &#123;</div><div class="line">        case Constants.START_TOKEN:</div><div class="line">            parent = newNode;</div><div class="line">            break;</div><div class="line">        case Constants.END_TOKEN:</div><div class="line">            parent = parent.getParent();</div><div class="line">            break;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    return root;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæ¯ä¸ª AST æ ¹èŠ‚ç‚¹æ˜¯tokenä¸ºç©ºï¼Œçˆ¶èŠ‚ç‚¹ä¸º null çš„ä¸€èŠ‚ç‚¹ã€‚<br>è¿™é‡Œè§£æçš„æ–¹æ³•æ˜¯ï¼š</p>
<ol>
<li>æ¯ä¸€ä¸ªtokenä¸ºASTä¸Šçš„ä¸€èŠ‚ç‚¹ï¼Œçˆ¶èŠ‚ç‚¹ä¸º parentï¼ˆåˆå§‹ä¸ºrootï¼‰</li>
<li>é‡åˆ°<code>(</code> tokenæ—¶ï¼Œå¼€å§‹åˆ›å»ºè¯¥èŠ‚ç‚¹çš„å­æ ‘ï¼ˆé€šè¿‡è®©è¿™ä¸ªèŠ‚ç‚¹æˆä¸º parent å®ç°ï¼‰</li>
<li>é‡åˆ°<code>)</code> tokenæ—¶ï¼Œè¿›è¡Œå›æº¯ï¼ˆé€šè¿‡æŠŠ parent èµ‹å€¼ä¸º parent.getParent() å®ç°ï¼‰</li>
</ol>
<p>ä¸‹é¢çœ‹ä¸‹<code>(+ 1 2 (* 3 4))</code>ç”Ÿæˆæ€æ ·çš„ <code>SExpression</code>ï¼š</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2l9NefVXXXXbeXXXXXXXXXXXX_!!581166664.png" alt="(+ 1 2 (* 3 4)) AST ç¤ºæ„å›¾"><br></center><br>ä¸Šå›¾æœ€ä¸»è¦çš„ä¸€ç‚¹å°±æ˜¯</p>
<blockquote>
<p>ä¸å·¦æ‹¬å·ç›¸åŒ¹é…çš„å³æ‹¬å·ä½äºå·¦æ‹¬å·çš„æœ€åä¸€ä¸ªå­©å­èŠ‚ç‚¹ä¸Šï¼ˆä»å·¦åˆ°å³ï¼‰ã€‚</p>
</blockquote>
<h3 id="è¯­ä¹‰åˆ†æ"><a href="#è¯­ä¹‰åˆ†æ" class="headerlink" title="è¯­ä¹‰åˆ†æ"></a>è¯­ä¹‰åˆ†æ</h3><p>è¯­ä¹‰åˆ†æï¼ˆSemantic analysisï¼Œä¹Ÿå«context sensitive analysisï¼‰æ ¹æ®ä¸Šä¸€æ­¥ç”Ÿæˆçš„ASTï¼Œæ”¶é›†æºä»£ç çš„ä¿¡æ¯ï¼Œè¿™åŒ…æ‹¬ç±»å‹æ ¡éªŒã€å˜é‡åœ¨ä½¿ç”¨å‰æ˜¯å¦å£°æ˜ç­‰ä¸€ç³»åˆ—æ“ä½œã€‚</p>
<p>å› ä¸º JCScheme ä¸­ç±»å‹æ¯”è¾ƒç®€å•ï¼Œè€Œä¸”å»åšè¯­ä¹‰åˆ†æï¼Œéœ€è¦åšå¾ˆå¤šå¼‚å¸¸å¤„ç†ï¼Œæœ‰äº›ç¹çï¼Œæˆ‘è¿™é‡Œä¸ºäº†ç®€å•éƒ½å¿½ç•¥äº†ã€‚æ‰€ä»¥å¦‚æœä½ è¾“å…¥çš„è¯­æ³•æœ‰è¯¯ï¼ˆæ¯”å¦‚æ‹¬å·ä¸åŒ¹é…ï¼‰ï¼Œé‚£ä¹ˆè§£é‡Šå™¨å°±ä¼šæŠ¥é”™ï¼Œåœ¨åé¢çš„è¿­ä»£ä¸­ä¼šé€æ­¥æ”¹å–„è¿™å—ã€‚</p>
<h2 id="æ±‚å€¼è¿‡ç¨‹"><a href="#æ±‚å€¼è¿‡ç¨‹" class="headerlink" title="æ±‚å€¼è¿‡ç¨‹"></a>æ±‚å€¼è¿‡ç¨‹</h2><p>ç»è¿‡<code>è§£æè¿‡ç¨‹</code>ï¼Œæˆ‘ä»¬å·²ç»å¾—åˆ°äº†ä¸å…·ä½“è¯­è¨€æ— å…³çš„ ASTï¼Œé‚£ä¹ˆå¦‚ä½•è¿›è¡Œæ±‚å€¼å‘¢ï¼ŒSICP ä¹¦ä¸­ç»™å‡ºç­”æ¡ˆï¼š<code>eval-apply cycle</code>ï¼Œå¦‚ä¸‹å›¾</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2KjMVfFXXXXbOXpXXXXXXXXXX_!!581166664.png" alt="SICP-eval-apply"><br></center><br>evalã€apply è¿™ä¸¤ä¸ªè§„åˆ™æè¿°äº†æ±‚å€¼è¿‡ç¨‹çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯å®ƒçš„åŸºæœ¬å¾ªç¯ã€‚åœ¨è¿™ä¸€å¾ªç¯ä¸­</p>
<blockquote>
<p>è¡¨è¾¾å¼åœ¨ç¯å¢ƒä¸­çš„æ±‚å€¼è¢«è§„çº¦åˆ°è¿‡ç¨‹å¯¹å®é™…å‚æ•°çš„åº”ç”¨ï¼Œè€Œè¿™ç§åº”ç”¨åˆè¢«è§„çº¦åˆ°æ–°çš„è¡¨è¾¾å¼åœ¨æ–°çš„ç¯å¢ƒä¸­çš„æ±‚å€¼ï¼Œå¦‚æ­¤ä¸‹å»ï¼Œç›´åˆ°ä¸‹é™åˆ°ç¬¦å·ï¼ˆå…¶å€¼å¯ä»¥åœ¨ç¯å¢ƒä¸­æ‰¾åˆ°ï¼‰æˆ–è€…åŸºæœ¬è¿‡ç¨‹ï¼ˆå®ƒä»¬å¯ä»¥ç›´æ¥åº”ç”¨ï¼‰ã€‚</p>
</blockquote>
<p>åœ¨<a href="http://stackoverflow.com/a/6269132/2163429" target="_blank" rel="external">StackOverflow</a>ä¸Šæ‰¾åˆ°ä¸€æ¯”è¾ƒå¥½ç†è§£çš„è§£é‡Šï¼š</p>
<ul>
<li>the one that eval is doing, is dealing with the syntactic translation of code to its meaning â€“ but itâ€™s doing almost nothing except dispatching over the expression type</li>
<li>apply is to call function with values.</li>
<li>A major enlightenment moment here is to realize that there is a major difference between this eval and apply â€“ the former inherently deals with syntax, but the latter deals with values.</li>
</ul>
<p>å¦‚æœä½ ä¹Ÿåœ¨è¯» SICPï¼Œå¯ä»¥å‚è€ƒä¸‹é¢çš„<code>eval</code>ã€ä¸<code>apply</code>çš„å…·ä½“å®ç°ï¼Œå¯¹ Scheme ä¸äº†è§£çš„å¯ä»¥ç›´æ¥ç•¥è¿‡ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">(define (eval exp env)</div><div class="line">  (cond ((self-evaluating? exp) exp)</div><div class="line">        ((variable? exp) (lookup-variable-value exp env))</div><div class="line">        ((quoted? exp) (text-of-quotation exp))</div><div class="line">        ((assignment? exp) (eval-assignment exp env))</div><div class="line">        ((definition? exp) (eval-definition exp env))</div><div class="line">        ((if? exp) (eval-if exp env))</div><div class="line">        ((lambda? exp)</div><div class="line">         (make-procedure (lambda-parameters exp)</div><div class="line">                         (lambda-body exp)</div><div class="line">                         env))</div><div class="line">        ((begin? exp)</div><div class="line">         (eval-sequence (begin-actions exp) env))</div><div class="line">        ((cond? exp) (eval (cond-&gt;if exp) env))</div><div class="line">        ((application? exp)</div><div class="line">         (apply (eval (operator exp) env)</div><div class="line">                (list-of-values (operands exp) env)))</div><div class="line">        (else</div><div class="line">         (error &quot;Unknown expression type -- EVAL&quot; exp))))</div><div class="line"></div><div class="line">(define (apply procedure arguments)</div><div class="line">  (cond ((primitive-procedure? procedure)</div><div class="line">         (apply-primitive-procedure procedure arguments))</div><div class="line">        ((compound-procedure? procedure)</div><div class="line">         (eval-sequence</div><div class="line">           (procedure-body procedure)</div><div class="line">           (extend-environment</div><div class="line">             (procedure-parameters procedure)</div><div class="line">             arguments</div><div class="line">             (procedure-environment procedure))))</div><div class="line">        (else</div><div class="line">         (error</div><div class="line">          &quot;Unknown procedure type -- APPLY&quot; procedure))))</div></pre></td></tr></table></figure></p>
<p>ç®€å•æ¥è¯´ï¼Œ<code>eval</code>çš„ä¸»è¦ä½œç”¨å°±æ˜¯ç†è§£ AST çš„å«ä¹‰ï¼Œæ ¹æ®å…¶å«ä¹‰è¿›è¡Œç›¸åº”å¤„ç†ï¼Œæ¯”å¦‚èµ‹å€¼è¯­å¥æœ‰å…¶ç‹¬ç‰¹çš„å¤„ç†æ–¹å¼ï¼Œif è¯­å¥æœ‰å…¶ç‹¬ç‰¹çš„å¤„ç†æ–¹å¼ç­‰ç­‰ã€‚<br>ä¸ºäº†èƒ½å¤Ÿè®©<code>apply</code>è¿›è¡Œå‡½æ•°è°ƒç”¨æ±‚å€¼ï¼Œéœ€è¦æŠŠ AST è§£é‡Šä¸º JCScheme ä¸­å†…ç½®çš„ç±»å‹ï¼Œè€Œè¿™å°±æ˜¯ JCScheme ä¸­<code>eval</code>çš„ä¸»è¦ä½œç”¨ã€‚</p>
<h3 id="ç±»å‹å®šä¹‰"><a href="#ç±»å‹å®šä¹‰" class="headerlink" title="ç±»å‹å®šä¹‰"></a>ç±»å‹å®šä¹‰</h3><p>å®šä¹‰ä¸€ä¸ªåŸºç±»<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public abstract class SObject &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç„¶åæ˜¯æ•´æ•°ç±»å‹ä¸å¸ƒå°”ç±»å‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">public class SNumber extends SObject&#123;</div><div class="line"></div><div class="line">    private int value;</div><div class="line"></div><div class="line">    public int getValue() &#123;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line">    public SNumber(int value) &#123;</div><div class="line">        this.value = value;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return String.valueOf(value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line">public class SBool extends SObject&#123;</div><div class="line">    private boolean value;</div><div class="line"></div><div class="line">    public boolean getValue() &#123;</div><div class="line">        return value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SBool(boolean value) &#123;</div><div class="line">        this.value = value;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        return String.valueOf(value);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸¤ä¸ªç±»æ¯”è¾ƒç®€å•ï¼Œå¹¶ä¸”æ³¨æ„åˆ°æ²¡æœ‰ä¸ºå…¶æˆå‘˜å˜é‡æä¾›<code>setter</code>å‡½æ•°ï¼Œè¿™è¯´æ˜è¿™äº›ç±»å‹æ˜¯ä¸å¯å˜çš„ã€‚<br>æœ€åä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æ˜¯å‡½æ•°ç±»å‹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">public class SFunction extends SObject&#123;</div><div class="line"></div><div class="line">    List&lt;String&gt; param;</div><div class="line">    SExpression body;</div><div class="line"></div><div class="line">    public SFunction(List&lt;String&gt; param, SExpression body) &#123;</div><div class="line">        this.param = param;</div><div class="line">        this.body = body;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SObject apply(SObject... args) &#123;</div><div class="line">        for(int i = 0; i&lt; args.length; i ++) &#123;</div><div class="line">            SScope.env.put(param.get(i), args[i]);</div><div class="line">        &#125;</div><div class="line">        SObject ret = body.eval();</div><div class="line">        for(int i = 0; i&lt; args.length; i ++) &#123;</div><div class="line">            SScope.env.remove(param.get(i));</div><div class="line">        &#125;</div><div class="line">        return ret;</div><div class="line">    &#125;</div><div class="line">    @Override</div><div class="line">    public String toString() &#123;</div><div class="line">        StringBuffer buffer = new StringBuffer(&quot;Function : args [&quot;);</div><div class="line">        for(String p : param) &#123;</div><div class="line">            buffer.append(p + &quot;, &quot;);</div><div class="line">        &#125;</div><div class="line">        buffer.append(&quot;]\n&quot;);</div><div class="line">        buffer.append(&quot;Body :\n&quot;);</div><div class="line">        buffer.append(body.toString());</div><div class="line">        return buffer.toString();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œ<code>SFunction</code>å†…éƒ¨æœ‰ä¸¤ä¸ªæˆå‘˜å˜é‡ï¼Œç”¨æ¥è¡¨ç¤ºå…¶<code>å‚æ•°åˆ—è¡¨</code>ä¸<code>å‡½æ•°ä½“</code>ã€‚å…¶ä¸­çš„<code>apply</code>è¡¨ç¤ºå‡½æ•°è°ƒç”¨ï¼Œå¯ä»¥çœ‹åˆ°æ— éå°±æ˜¯æŠŠå½¢å¼å‚æ•°ä¸å®é™…å‚æ•°è¿›è¡Œæ†ç»‘ï¼ˆç°åœ¨æ”¾åˆ°å…¨å±€ç¯å¢ƒä¸­ï¼ŒæŒ‰ç†è¯´è¿™æ—¶åº”è¯¥ç”Ÿæˆä¸€æ–°ç¯å¢ƒï¼Œåé¢è®²æ±‚å€¼è¿‡ç¨‹æ—¶ä¼šä»‹ç»æ”¹è¿›ç‰ˆçš„SFunctionï¼‰ï¼Œä¹‹åè°ƒç”¨<code>SExpression</code>çš„<code>eval</code>æ–¹æ³•ï¼Œå¾—åˆ°ç”¨å†…ç½®ç±»å‹è¡¨ç¤ºçš„ç»“æœã€‚</p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„é‡ç‚¹åˆå›åˆ°<code>eval</code>æ–¹æ³•ä¸Šå»äº†ã€‚ JCScheme çš„ä¸»è¦å¤æ‚ç‚¹ä¹Ÿå°±ç®—åœ¨<code>SExpression</code>çš„<code>eval</code>æ–¹æ³•ä¸Šï¼Œå› ä¸ºå®ƒæ¶‰åŠåˆ°æŠŠ<code>SExpression</code>è½¬ä¸ºå†…ç½®ç±»å‹ï¼Œæ‰€ä»¥æŒ‰ç†è¯´ä¹Ÿåº”è¯¥æ˜¯å¤æ‚çš„ã€‚</p>
<p><code>eval</code>çš„å·¥ä½œåŸç†æœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯çœ‹æºç <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/JCExpression.java#L41" target="_blank" rel="external">JCScheme/SExpression.java</a>ï¼Œè¿™ä¸ªæ–¹æ³•åé¢ä¼šä¸æ–­å®Œå–„ã€‚</p>
<h3 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h3><p>ä½œç”¨åŸŸä¹Ÿå¯ä»¥ç†è§£ä¸ºç¯å¢ƒï¼Œé‡Œé¢æ˜¯ä¸€ç³»åˆ—çš„ bindingï¼Œç”¨ä»¥ä¿å­˜å˜é‡åä¸å…¶å¯¹åº”å€¼ã€‚<br>åœ¨ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­ï¼Œä½œç”¨åŸŸä¸€èˆ¬åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ul>
<li>é™æ€ä½œç”¨åŸŸï¼ˆstatic/lexical scopeï¼‰ï¼Œç¯å¢ƒåœ¨å£°æ˜æ—¶æŒ‡å®šã€‚JCSchemeã€Cã€Javaã€Python ç­‰ç°åœ¨å¤§éƒ¨åˆ†è¯­è¨€éƒ½å±äºæ­¤ç±»ã€‚</li>
<li>åŠ¨æ€ä½œç”¨åŸŸï¼ˆdynamic scopeï¼‰ï¼Œç¯å¢ƒåœ¨è¿è¡Œæ—¶æŒ‡å®šã€‚æœ€å¸¸è§çš„å°±æ˜¯å„ç§ Shellï¼ŒåƒBashã€Kshç­‰ï¼Œå…¶æ¬¡è¿˜æœ‰ emacs-lispã€‚æ›´å¤šå¯å‚è€ƒ <a href="http://stackoverflow.com/questions/1473111/besides-logo-and-emacs-lisp-what-are-other-pure-dynamically-scoped-languages" target="_blank" rel="external">what are other pure dynamically scoped languages?</a></li>
</ul>
<p>ä¸ºäº†è§£å†³åœ¨ JCScheme ä¸­å‡½æ•°è°ƒç”¨æ—¶ï¼Œæ–°åˆ›å»ºç¯å¢ƒçš„çˆ¶ç¯å¢ƒåº”è¯¥æŒ‡å‘è¿è¡Œæ—¶çš„ç¯å¢ƒè¿˜æ˜¯å£°æ˜æ—¶çš„è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘å» Stackoverflow ä¸Šæäº†ä¸ª<a href="http://stackoverflow.com/questions/33056236/scheme-environment-model-closure-issue" target="_blank" rel="external">é—®é¢˜</a>ï¼Œå¯¹ä½œç”¨åŸŸä¸æ¸…æ¥šçš„å¯ä»¥å»çœ‹çœ‹ã€‚</p>
<p> JCScheme ä¸­ï¼Œä¸€å¼€å§‹åªæœ‰ä¸€ä¸ªå…¨å±€ä½œç”¨åŸŸï¼Œåé¢æˆ‘é€æ¸æŠŠè¿™å¿«ç»™å®Œå–„äº†ï¼Œä¸»è¦æ˜¯ <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/SScope.java" target="_blank" rel="external">SScope</a> ç±» ä¸ <a href="https://github.com/jiacai2050/JCScheme/blob/master/src/main/java/net/liujiacai/jcscheme/type/SFunction.java" target="_blank" rel="external">SFunction</a> ç±»ã€‚<br> <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div></pre></td><td class="code"><pre><div class="line"> public class SScope &#123;</div><div class="line">    // æ¯ä¸ªç¯å¢ƒéƒ½æŒ‡å‘ä¸€ä¸ªçˆ¶ç¯å¢ƒï¼Œå…¨å±€ç¯å¢ƒçˆ¶ç¯å¢ƒä¸º null</div><div class="line">    private SScope parent;</div><div class="line">    private Map&lt;String, SObject&gt; env;</div><div class="line"></div><div class="line">    public SScope getParent() &#123;</div><div class="line">        return parent;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Map&lt;String, SObject&gt; getEnv() &#123;</div><div class="line">        return env;</div><div class="line">    &#125;</div><div class="line">    // åœ¨æŸ¥æ‰¾å˜é‡æ—¶ï¼Œå¦‚ä½•å½“å‰ scope ä¸­æ²¡æœ‰ï¼Œä¼šæ²¿ç€ç¯å¢ƒé“¾ï¼Œä¸€ç›´æ‰¾åˆ°å…¨å±€ç¯å¢ƒä¸­</div><div class="line">    public SObject findVariable(String var) &#123;</div><div class="line">        if (env.containsKey(var)) &#123;</div><div class="line">            return env.get(var);</div><div class="line">        &#125; else &#123;</div><div class="line">            SScope p = this.getParent();</div><div class="line">            while (p != null) &#123;</div><div class="line">                Map&lt;String, SObject&gt; subEnv = p.getEnv();</div><div class="line">                if (subEnv.containsKey(var)) &#123;</div><div class="line">                    return subEnv.get(var);</div><div class="line">                &#125;</div><div class="line">                p = p.getParent();</div><div class="line">            &#125;</div><div class="line">            return null;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    // å½“å‰çš„ç¯å¢ƒ</div><div class="line">    public static SScope current = null;</div><div class="line">    public static Map&lt;String, String&gt; builtinFuncs = new HashMap&lt;String, String&gt;();</div><div class="line">    public static Map&lt;String, String&gt; builtinKeywords = new HashMap&lt;String, String&gt;();</div><div class="line">    // çœç•¥ä¸€ä¸ªå†…ç½®å‡½æ•°ã€å…³é”®å­—çš„åˆå§‹åŒ–</div><div class="line">    // ...</div><div class="line">&#125;</div><div class="line">public class SFunction extends SObject &#123;</div><div class="line"></div><div class="line">    private List&lt;String&gt; param;</div><div class="line">    private List&lt;SExpression&gt; body;</div><div class="line">    private SScope scope;</div><div class="line"></div><div class="line">    public List&lt;String&gt; getParam() &#123;</div><div class="line">        return param;</div><div class="line">    &#125;</div><div class="line">    // åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œä¼ å…¥å½“å‰çš„ç¯å¢ƒ</div><div class="line">    public SFunction(List&lt;String&gt; param, List&lt;SExpression&gt; body, SScope scope) &#123;</div><div class="line">        this.param = param;</div><div class="line">        this.body = body;</div><div class="line">        this.scope = scope;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public SObject apply(SObject... args) &#123;</div><div class="line">        // ä¿å­˜å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ç¯å¢ƒï¼Œç›¸å½“äºå…¥æ ˆ</div><div class="line">        SScope originScope = SScope.current;</div><div class="line">        // åˆ›å»ºä¸€ä¸ªæŒ‡å‘å‡½æ•°å£°æ˜ä¼ å…¥çš„ç¯å¢ƒçš„æ–°ç¯å¢ƒï¼Œä¿å­˜å½¢å‚ä¸å®å‚çš„ç»‘å®šå…³ç³»ã€‚</div><div class="line">        // è¿™é‡Œæ„é€ æ–°ç¯å¢ƒæ—¶ç”¨åˆ°äº†å£°æ˜å‡½æ•°æ—¶ä¼ å…¥çš„ç¯å¢ƒï¼Œè¿™ç‚¹è¯´æ˜äº† JCScheme æ˜¯é™æ€ä½œç”¨åŸŸçš„</div><div class="line">        SScope funcScope = new SScope(this.scope);</div><div class="line">        // è®¾ç½®å½“å‰ç¯å¢ƒä¸º æ–°åˆ›å»ºçš„ç¯å¢ƒï¼Œè¿™æ—¶æ‰€æœ‰çš„æ±‚å€¼ï¼Œéƒ½æ˜¯åœ¨å…¶ä¸­è¿›è¡Œ</div><div class="line">        SScope.current = funcScope;</div><div class="line">        SObject ret = null;</div><div class="line">        for (int i = 0; i &lt; args.length; i++) &#123;</div><div class="line">            SScope.current.getEnv().put(param.get(i), args[i]);</div><div class="line">        &#125;</div><div class="line">        if (args.length &lt; param.size()) &#123;</div><div class="line">            // å®ç°å‡½æ•°éƒ¨åˆ†è°ƒç”¨ï¼Œ currying</div><div class="line">            List&lt;String&gt; subParam = param.subList(args.length, param.size());</div><div class="line">            ret = new SFunction(subParam, body, funcScope);</div><div class="line">        &#125; else &#123;</div><div class="line">            int bodySize = body.size();</div><div class="line">            for (int i = 0; i &lt; bodySize - 1; i++) &#123;</div><div class="line">                body.get(i).eval();</div><div class="line">            &#125;</div><div class="line">            // only return last exp</div><div class="line">            ret = body.get(bodySize - 1).eval();</div><div class="line">        &#125;</div><div class="line">        // GC will clean unused scope</div><div class="line">        // æ¢å¤å‡½æ•°è°ƒç”¨ä¹‹å‰çš„ç¯å¢ƒï¼Œç›¸å½“äºå‡ºæ ˆ</div><div class="line">        SScope.current = originScope;</div><div class="line">        return ret;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h2 id="ä¸è¶³"><a href="#ä¸è¶³" class="headerlink" title="ä¸è¶³"></a>ä¸è¶³</h2><p>ç»è¿‡ä¸Šé¢è¿™äº›å·¥ä½œï¼ŒJCScheme å·²ç»å¤§åŠŸå‘Šæˆäº†ï¼ˆå¸Œæœ›æ²¡æœ‰bugğŸ˜Šï¼‰ã€‚ä½†æ˜¯ä¸‹é¢è¿™äº›ç‚¹éƒ½æ²¡æœ‰æ¶‰åŠ</p>
<ol>
<li>å‡½æ•°çš„é€’å½’è°ƒç”¨</li>
<li><del>åŒ¿åå‡½æ•°çš„ç›´æ¥è°ƒç”¨ï¼Œå¦‚<code>((lambda (a b) (+ a b)) 1 2)</code>ï¼Œç°åœ¨è¿™æ ·çš„æ–¹å¼æ˜¯ä¸æ”¯æŒçš„ï¼Œ éœ€è¦å…ˆå®šä¹‰ä¸ªå˜é‡ï¼Œç„¶ååœ¨è°ƒç”¨</del>ï¼Œå·²ç»æ”¯æŒã€‚</li>
<li><del>å‡½æ•°çš„éƒ¨åˆ†è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯<code>currying</code></del>ï¼Œå·²ç»æ”¯æŒ<br>â€¦â€¦</li>
</ol>
<p>åé¢ä¼šé€æ­¥æ·»å‘ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹ JCScheme çš„ <a href="https://github.com/jiacai2050/JCScheme#ChangeLog" target="_blank" rel="external">ChangeLog</a> è·å–æœ€æ–°è¿›å±•ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>â€œçº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œâ€ï¼Œæœ€å¼€å§‹æ—¶ï¼Œè§‰å¾—åƒ Scheme è¯­æ³•è¿™ä¹ˆç®€å•çš„è¯­è¨€å®ç°èµ·æ¥åº”è¯¥ä¸éš¾ï¼Œåšäº†åæ‰å‘ç°çœ¼é«˜æ‰‹ä½ã€‚æ¯”å¦‚ï¼Œæˆ‘ç¬¬ä¸€æ¬¡è®¾è®¡<code>SExpression</code>æ—¶æ²¡æœ‰<code>parent</code>è¿™ä¸ªå±æ€§å¯¼è‡´äº†æ— æ³•æ­£ç¡®å®ç°<code>parse</code>å‡½æ•°ã€‚ä»¥åŠåé¢åœ¨è®¾è®¡ä½œç”¨åŸŸæ—¶ï¼Œåˆ†ä¸æ¸…æ¥šåˆ°åº•æ˜¯å£°æ˜æ—¶åˆ›å»ºç¯å¢ƒè¿˜æ˜¯è¿è¡Œæ—¶åˆ›å»ºï¼Œç¯å¢ƒçš„çˆ¶ç¯å¢ƒåº”è¯¥æ€ä¹ˆæŒ‡å‘ï¼Œåº”è¯¥æŒ‡å‘å£°æ˜æ—¶çš„ç¯å¢ƒè¿˜æ˜¯è¿è¡Œæ—¶çš„ç¯å¢ƒã€‚<br>ä¸è¿‡æ„Ÿè§¦æœ€æ·±åº”è¯¥æ˜¯è¿™ç‚¹ï¼šåŠ¨æ‰‹ã€‚åœ¨ä¹‹å‰å­¦ä¹ ç¼–ç¨‹è¯­è¨€ï¼Œè¢«å„ç§è¯­æ³•ç±»åº“è™çš„æ­»å»æ´»æ¥ï¼Œè™½ç„¶æƒ³å°è¯•å»å®ç°ä¸ªè‡ªå·±çš„è¯­è¨€ï¼Œä½†æ˜¯ä¸€ç›´è§‰å¾—è‡ªå·±èƒ½åŠ›ä¸å¤Ÿï¼Œæ²¡æ•¢å»å°è¯•ï¼Œéšç€ä¸æ–­å®Œå–„ JCScheme çš„åŠŸèƒ½ï¼Œå¯¹ç¼–ç¨‹è¯­è¨€æœ‰äº†æ›´æ·±åˆ»çš„è®¤è¯†ï¼ŒçœŸæ˜¯æœ‰ç§â€œä¸å…¥è™ç©´,ç„‰å¾—è™å­â€çš„æ„Ÿè§‰ã€‚</p>
<p>å½“ç„¶ï¼ŒJCScheme è¯­è¨€åªæ˜¯åˆšå¼€å§‹ï¼Œè¿˜æ¯”è¾ƒç®€é™‹ï¼Œé«˜æ‰‹è¯·ä¸è¦è§ç¬‘ï¼Œåé¢éšç€å­¦ä¹ çš„æ·±å…¥æˆ‘ä¼šé€æ­¥å®Œå–„ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li>ç‹å çš„<a href="http://www.yinwang.org/blog-cn/2015/09/19/parser/" target="_blank" rel="external">è°ˆè°ˆParser</a></li>
<li><a href="http://zh.lucida.me/blog/how-to-implement-an-interpreter-in-csharp/" target="_blank" rel="external">90åˆ†é’Ÿå®ç°ä¸€é—¨ç¼–ç¨‹è¯­è¨€â€”â€”æç®€è§£é‡Šå™¨æ•™ç¨‹</a></li>
<li>Wiki <a href="https://en.wikipedia.org/wiki/Scope_%28computer_science%29" target="_blank" rel="external">Scope (computer science)</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å¾—åœ¨ä¸Šå¤§å­¦é‚£ä¼šï¼Œå°±æƒ³ç€èƒ½å¤Ÿå®ç°ä¸ªè‡ªå·±çš„ç¼–ç¨‹è¯­è¨€ã€‚ç”±äºä¹‹å‰æŠ€èƒ½ä¸è¶³ï¼Œä¸€ç›´æ²¡æ•¢å»å°è¯•ã€‚ç°èµ¶ä¸Šå›½åº†ä¸ƒå¤©å‡æœŸï¼ŒSICP çœ‹çš„ä¹Ÿæ­£èµ·åŠ²ï¼Œç»ˆäºé¼“èµ·å‹‡æ°”ï¼ŒæŠŠè¿™ä¸ªå‘ç»™å¡«ä¸Šäº†ã€‚ç”šæ˜¯å¼€å¿ƒã€‚&lt;br&gt;å®ç° JCScheme è¿™ä¸ªè¯­è¨€å‰åå¤§æ¦‚ç”¨äº†ä¸€å¤©æ—¶é—´ï¼ŒåŠŸèƒ½è™½ç„¶ç®€å•ï¼Œä½†æ˜¯â€œéº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨â€ï¼Œ
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Scheme" scheme="http://liujiacai.net/tags/scheme/"/>
    
  </entry>
  
  <entry>
    <title>Java WeakHashMap æºç è§£æ</title>
    <link href="http://liujiacai.net/blog/2015/09/27/java-weakhashmap/"/>
    <id>http://liujiacai.net/blog/2015/09/27/java-weakhashmap/</id>
    <published>2015-09-27T06:10:24.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‰é¢æŠŠåŸºäºç‰¹å®šæ•°æ®ç»“æ„çš„Mapä»‹ç»å®Œäº†ï¼Œå®ƒä»¬åˆ†åˆ«åˆ©ç”¨äº†ç›¸åº”æ•°æ®ç»“æ„çš„ç‰¹ç‚¹æ¥å®ç°ç‰¹æ®Šçš„ç›®çš„ï¼ŒåƒHashMapåˆ©ç”¨å“ˆå¸Œè¡¨çš„å¿«é€Ÿæ’å…¥ã€æŸ¥æ‰¾å®ç°<code>O(1)</code>çš„å¢åˆ æ”¹æŸ¥ï¼ŒTreeMapåˆ™åˆ©ç”¨äº†çº¢é»‘æ ‘æ¥ä¿è¯keyçš„æœ‰åºæ€§çš„åŒæ—¶ï¼Œä½¿å¾—å¢åˆ æ”¹æŸ¥çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(log(n))</code>ã€‚</p>
<p>ä»Šå¤©è¦ä»‹ç»çš„<a href="http://docs.oracle.com/javase/7/docs/api/java/util/WeakHashMap.html" target="_blank" rel="external">WeakHashMap</a>å¹¶æ²¡æœ‰åŸºäºæŸç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå®ƒçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ä¼˜åŒ–JVMï¼Œä½¿JVMä¸­çš„åƒåœ¾å›æ”¶å™¨ï¼ˆgarbage collectorï¼Œåé¢ç®€å†™ä¸º GCï¼‰æ›´æ™ºèƒ½çš„å›æ”¶â€œæ— ç”¨â€çš„å¯¹è±¡ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç åˆ†æåŸºäº<a href="http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html" target="_blank" rel="external">Oracle JDK 1.7.0_71</a>ï¼Œè¯·çŸ¥æ‚‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version &quot;1.7.0_71&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_71-b14)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="å¼•ç”¨ç±»å‹"><a href="#å¼•ç”¨ç±»å‹" class="headerlink" title="å¼•ç”¨ç±»å‹"></a>å¼•ç”¨ç±»å‹</h2><p><code>WeakHashMap</code>ä¸å…¶ä»– Map æœ€ä¸»è¦çš„ä¸åŒä¹‹å¤„åœ¨äºå…¶ key æ˜¯å¼±å¼•ç”¨ç±»å‹ï¼Œå…¶ä»– Map çš„ key å‡ä¸ºå¼ºå¼•ç”¨ç±»å‹ï¼Œè¯´åˆ°è¿™é‡Œï¼Œå¿…é¡»å¼ºè°ƒä¸‹ï¼šJava ä¸­ï¼Œå¼•ç”¨æœ‰å››ç§ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼šå¼ºï¼ˆstrongï¼‰å¼•ç”¨ã€è½¯ï¼ˆsoftï¼‰å¼•ç”¨ã€å¼±ï¼ˆweakï¼‰å¼•ç”¨ã€è™šï¼ˆphantomï¼Œæœ¬æ„ä¸ºå¹½çµğŸ‘»ï¼‰å¼•ç”¨ã€‚æˆ‘ç›¸ä¿¡å¯¹äº Java åˆå­¦è€…æ¥è¯´ï¼Œä¸ä¸€å®šå¬è¿‡è¿™å‡ ç§å¼•ç”¨ç±»ä¼¼ï¼Œä¸‹é¢å…ˆä»‹ç»ä¸‹è¿™å‡ ç§ç±»å‹ã€‚</p>
<h3 id="å¼ºå¼•ç”¨"><a href="#å¼ºå¼•ç”¨" class="headerlink" title="å¼ºå¼•ç”¨"></a>å¼ºå¼•ç”¨</h3><p>è¿™æ˜¯æœ€å¸¸ç”¨çš„å¼•ç”¨ç±»å‹ï¼Œåœ¨æ‰§è¡Œä¸‹é¢çš„è¯­å¥æ—¶ï¼Œå˜é‡ <code>o</code> å³ä¸ºä¸€ä¸ªå¼ºå¼•ç”¨ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Object o = new Object();</div></pre></td></tr></table></figure></p>
<blockquote>
<p>å¼ºå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡æ— è®ºåœ¨ä½•æ—¶ï¼Œéƒ½ä¸ä¼šè¢«GC æ¸…ç†æ‰ã€‚</p>
</blockquote>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œå¯¹äºå¸¸é©»ç±»åº”ç”¨ï¼ˆæ¯”å¦‚serverï¼‰ï¼Œéšç€æ—¶é—´çš„å¢åŠ ï¼Œæ‰€å ç”¨çš„å†…å­˜å¾€å¾€ä¼šæŒç»­ä¸Šå‡ï¼Œå¦‚æœç¨‹åºä¸­å…¨éƒ¨ä½¿ç”¨å¼ºå¼•ç”¨ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼ï¼Œæœ€ç»ˆå¯¼è‡´<code>Out Of Memory (OOM)</code>ï¼Œæ‰€ä»¥ Java ä¸­æä¾›äº†é™¤å¼ºå¼•ç”¨ä¹‹å¤–çš„å…¶ä»–ä¸‰ç§å¼•ç”¨ï¼Œå®ƒä»¬å…¨éƒ¨ä½äº<code>java.lang.ref</code>åŒ…ä¸­ï¼Œä¸‹é¢ä¸€ä¸€ä»‹ç»ã€‚</p>
<h3 id="java-lang-ref-Reference"><a href="#java-lang-ref-Reference" class="headerlink" title="java.lang.ref.Reference"></a>java.lang.ref.Reference</h3><p><code>java.lang.ref.Reference</code> ä¸º è½¯ï¼ˆsoftï¼‰å¼•ç”¨ã€å¼±ï¼ˆweakï¼‰å¼•ç”¨ã€è™šï¼ˆphantomï¼‰å¼•ç”¨çš„çˆ¶ç±»ã€‚</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2FuyqfFXXXXcjXpXXXXXXXXXX_!!581166664.png" alt="Referenceç±»ç»§æ‰¿å…³ç³»"><br></center>

<p>ä¸‹é¢åˆ†æä¸‹<code>Reference</code>çš„æºç ï¼ˆå…¶ä»–ä¸‰ç§å¼•ç”¨éƒ½æ˜¯å…¶å­ç±»ï¼ŒåŒºåˆ†ä¸æ˜¯å¾ˆå¤§ï¼‰ã€‚</p>
<p>####æ„é€ å‡½æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//referent ä¸ºå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡</div><div class="line">Reference(T referent) &#123;</div><div class="line">    this(referent, null);</div><div class="line">&#125;</div><div class="line">//ReferenceQueueå¯¹è±¡ï¼Œå¯ä»¥ç®€å•ç†è§£ä¸ºä¸€ä¸ªé˜Ÿåˆ—</div><div class="line">//GC åœ¨æ£€æµ‹åˆ°appropriate reachability changesä¹‹åï¼Œ</div><div class="line">//ä¼šæŠŠå¼•ç”¨å¯¹è±¡æœ¬èº«æ·»åŠ åˆ°è¿™ä¸ªqueueä¸­ï¼Œä¾¿äºæ¸…ç†å¼•ç”¨å¯¹è±¡æœ¬èº«</div><div class="line">Reference(T referent, ReferenceQueue&lt;? super T&gt; queue) &#123;</div><div class="line">    this.referent = referent;</div><div class="line">    this.queue = (queue == null) ? ReferenceQueue.NULL : queue;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¦‚æœæˆ‘ä»¬åœ¨åˆ›å»ºä¸€ä¸ªå¼•ç”¨å¯¹è±¡æ—¶ï¼ŒæŒ‡å®šäº†<code>ReferenceQueue</code>ï¼Œé‚£ä¹ˆå½“å¼•ç”¨å¯¹è±¡æŒ‡å‘çš„å¯¹è±¡è¾¾åˆ°åˆé€‚çš„çŠ¶æ€ï¼ˆæ ¹æ®å¼•ç”¨ç±»å‹ä¸åŒè€Œä¸åŒï¼‰æ—¶ï¼ŒGC ä¼šæŠŠå¼•ç”¨å¯¹è±¡æœ¬èº«æ·»åŠ åˆ°è¿™ä¸ªé˜Ÿåˆ—ä¸­ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¤„ç†å®ƒï¼Œå› ä¸º</p>
<blockquote>
<p>å¼•ç”¨å¯¹è±¡æŒ‡å‘çš„å¯¹è±¡ GC ä¼šè‡ªåŠ¨æ¸…ç†ï¼Œä½†æ˜¯å¼•ç”¨å¯¹è±¡æœ¬èº«ä¹Ÿæ˜¯å¯¹è±¡ï¼ˆæ˜¯å¯¹è±¡å°±å ç”¨ä¸€å®šèµ„æºï¼‰ï¼Œæ‰€ä»¥éœ€è¦æˆ‘ä»¬è‡ªå·±æ¸…ç†ã€‚</p>
</blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">SoftReference&lt;String&gt; ss = new SoftReference&lt;String&gt;(&quot;abc&quot; , queue);</div></pre></td></tr></table></figure></p>
<p><code>ss</code> ä¸ºè½¯å¼•ç”¨ï¼ŒæŒ‡å‘<code>abc</code>è¿™ä¸ªå¯¹è±¡ï¼Œ<code>abc</code> ä¼šåœ¨ä¸€å®šæ—¶æœºè¢« GC è‡ªåŠ¨æ¸…ç†ï¼Œä½†æ˜¯<code>ss</code>å¯¹è±¡æœ¬èº«çš„æ¸…ç†å·¥ä½œä¾èµ–äº<code>queue</code>ï¼Œå½“<code>ss</code>å‡ºç°åœ¨<code>queue</code>ä¸­æ—¶ï¼Œè¯´æ˜å…¶æŒ‡å‘çš„å¯¹è±¡å·²ç»æ— æ•ˆï¼Œå¯ä»¥æ”¾å¿ƒæ¸…ç†<code>ss</code>äº†ã€‚</p>
<p>ä»ä¸Šé¢çš„åˆ†æå¤§å®¶åº”è¯¥å¯¹<code>Reference</code>ç±»æœ‰äº†åŸºæœ¬çš„è®¤è¯†ï¼Œä½†æ˜¯ä¸Šé¢ä¹Ÿæåˆ°äº†ï¼Œä¸åŒçš„å¼•ç”¨ï¼Œæ·»åŠ åˆ°<code>ReferenceQueue</code>çš„æ—¶æœºæ˜¯ä¸ä¸€æ ·ã€‚ä¸‹é¢ä»‹ç»å…·ä½“å¼•ç”¨æ—¶å†è¿›è¡Œè¯´æ˜ã€‚<br>è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœåˆ›å»ºå¼•ç”¨å¯¹è±¡æ˜¯æ²¡æœ‰æŒ‡å®š<code>ReferenceQueue</code>ï¼Œå¼•ç”¨å¯¹è±¡ä¼šæ€ä¹ˆæ ·å‘¢ï¼Ÿè¿™é‡Œéœ€è¦äº†è§£<code>Reference</code>ç±»å†…éƒ¨çš„å››ç§çŠ¶æ€ã€‚</p>
<h4 id="å››ç§çŠ¶æ€"><a href="#å››ç§çŠ¶æ€" class="headerlink" title="å››ç§çŠ¶æ€"></a>å››ç§çŠ¶æ€</h4><p>æ¯ä¸€æ—¶åˆ»ï¼Œ<code>Reference</code>å¯¹è±¡éƒ½å¤„äºä¸‹é¢å››ç§çŠ¶æ€ä¸­ã€‚è¿™å››ç§çŠ¶æ€ç”¨<code>Reference</code>çš„æˆå‘˜å˜é‡<code>queue</code>ä¸<code>next</code>ï¼ˆç±»ä¼¼äºå•é“¾è¡¨ä¸­çš„nextï¼‰æ¥æ ‡ç¤ºã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ReferenceQueue&lt;? super T&gt; queue;</div><div class="line">Reference next;</div></pre></td></tr></table></figure></p>
<ul>
<li><p>Activeã€‚æ–°åˆ›å»ºçš„å¼•ç”¨å¯¹è±¡éƒ½æ˜¯è¿™ä¸ªçŠ¶æ€ï¼Œåœ¨ GC æ£€æµ‹åˆ°å¼•ç”¨å¯¹è±¡å·²ç»åˆ°è¾¾åˆé€‚çš„reachabilityæ—¶ï¼ŒGC ä¼šæ ¹æ®å¼•ç”¨å¯¹è±¡æ˜¯å¦åœ¨åˆ›å»ºæ—¶åˆ¶å®š<code>ReferenceQueue</code>å‚æ•°è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼Œå¦‚æœæŒ‡å®šäº†ï¼Œé‚£ä¹ˆè½¬ç§»åˆ°<code>Pending</code>ï¼Œå¦‚æœæ²¡æŒ‡å®šï¼Œè½¬ç§»åˆ°<code>Inactive</code>ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//å¦‚æœæ„é€ å‚æ•°ä¸­æ²¡æŒ‡å®šqueueï¼Œé‚£ä¹ˆqueueä¸ºReferenceQueue.NULLï¼Œå¦åˆ™ä¸ºæ„é€ å‚æ•°ä¸­ä¼ é€’è¿‡æ¥çš„queue</div><div class="line">queue = ReferenceQueue || ReferenceQueue.NULL</div><div class="line">next = null</div></pre></td></tr></table></figure>
</li>
<li><p>Pendingã€‚pending-Referenceåˆ—è¡¨ä¸­çš„å¼•ç”¨éƒ½æ˜¯è¿™ä¸ªçŠ¶æ€ï¼Œå®ƒä»¬ç­‰ç€è¢«å†…éƒ¨çº¿ç¨‹<code>ReferenceHandler</code>å¤„ç†ï¼ˆä¼šè°ƒç”¨<code>ReferenceQueue.enqueue</code>æ–¹æ³•ï¼‰ã€‚æ²¡æœ‰æ³¨å†Œçš„å®ä¾‹ä¸ä¼šè¿›å…¥è¿™ä¸ªçŠ¶æ€ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//æ„é€ å‚æ•°å‚æ•°ä¸­ä¼ é€’è¿‡æ¥çš„queue</div><div class="line">queue = ReferenceQueue</div><div class="line">next = è¯¥queueä¸­çš„ä¸‹ä¸€ä¸ªå¼•ç”¨ï¼Œå¦‚æœæ˜¯è¯¥é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªï¼Œé‚£ä¹ˆä¸ºthis</div></pre></td></tr></table></figure>
</li>
<li><p>Enqueuedã€‚è°ƒç”¨<code>ReferenceQueue.enqueued</code>æ–¹æ³•åçš„å¼•ç”¨å¤„äºè¿™ä¸ªçŠ¶æ€ä¸­ã€‚æ²¡æœ‰æ³¨å†Œçš„å®ä¾‹ä¸ä¼šè¿›å…¥è¿™ä¸ªçŠ¶æ€ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">queue = ReferenceQueue.ENQUEUED</div><div class="line">next = è¯¥queueä¸­çš„ä¸‹ä¸€ä¸ªå¼•ç”¨ï¼Œå¦‚æœæ˜¯è¯¥é˜Ÿåˆ—ä¸­çš„æœ€åä¸€ä¸ªï¼Œé‚£ä¹ˆä¸ºthis</div></pre></td></tr></table></figure>
</li>
<li><p>Inactiveã€‚æœ€ç»ˆçŠ¶æ€ï¼Œå¤„äºè¿™ä¸ªçŠ¶æ€çš„å¼•ç”¨å¯¹è±¡ï¼ŒçŠ¶æ€ä¸ä¼šåœ¨æ”¹å˜ã€‚åœ¨è¿™ä¸ªçŠ¶æ€ä¸­</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">queue = ReferenceQueue.NULL</div><div class="line">next = this</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æœ‰äº†è¿™äº›çº¦æŸï¼ŒGC åªéœ€è¦æ£€æµ‹<code>next</code>å­—æ®µå°±å¯ä»¥çŸ¥é“æ˜¯å¦éœ€è¦å¯¹è¯¥å¼•ç”¨å¯¹è±¡é‡‡å–ç‰¹æ®Šå¤„ç†</p>
<ul>
<li>å¦‚æœ<code>next</code>ä¸º<code>null</code>ï¼Œé‚£ä¹ˆè¯´æ˜è¯¥å¼•ç”¨ä¸º<code>Active</code>çŠ¶æ€</li>
<li>å¦‚æœ<code>next</code>ä¸ä¸º<code>null</code>ï¼Œé‚£ä¹ˆ GC åº”è¯¥æŒ‰å…¶æ­£å¸¸é€»è¾‘å¤„ç†è¯¥å¼•ç”¨ã€‚</li>
</ul>
<p>æˆ‘è‡ªå·±æ ¹æ®<code>Reference.ReferenceHandler.run</code>ä¸<code>ReferenceQueue.enqueue</code>è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œç”»å‡ºäº†è¿™å››ç§çŠ¶æ€çš„è½¬ç§»å›¾ï¼Œä¾›å¤§å®¶å‚è€ƒï¼š</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2CCSNfFXXXXceXXXXXXXXXXXX_!!581166664.png" alt="ReferenceçŠ¶æ€è½¬ç§»å›¾"><br></center>

<p>è¦ç†è§£è¿™ä¸ªçŠ¶æ€ GC åˆ°åº•åšäº†ä»€ä¹ˆäº‹ï¼Œéœ€è¦çœ‹ JVM çš„ä»£ç ï¼Œæˆ‘è¿™é‡Œæ—¶é—´ã€èƒ½åŠ›éƒ½ä¸å¤Ÿï¼Œå°±ä¸çŒ®ä¸‘äº†ï¼Œåé¢æœ‰æœºä¼šå†æ¥å¡«å‘ã€‚<br>å¯¹äºä¸€èˆ¬ç¨‹åºå‘˜æ¥è¯´ï¼Œè¿™å››ç§çŠ¶æ€å®Œå…¨å¯ä»¥ä¸ç”¨ç®¡ã€‚æœ€åç®€å•ä¸¤å¥è¯æ€»ç»“ä¸Šé¢çš„å››ç§çŠ¶æ€ï¼š</p>
<ol>
<li>å¦‚æœæ„é€ å‡½æ•°ä¸­æŒ‡å®šäº†<code>ReferenceQueue</code>ï¼Œé‚£ä¹ˆäº‹åç¨‹åºå‘˜å¯ä»¥é€šè¿‡è¯¥é˜Ÿåˆ—æ¸…ç†å¼•ç”¨</li>
<li>å¦‚æœæ„é€ å‡½æ•°ä¸­æ²¡æœ‰æŒ‡å®šäº†<code>ReferenceQueue</code>ï¼Œé‚£ä¹ˆ GC ä¼šè‡ªåŠ¨æ¸…ç†å¼•ç”¨</li>
</ol>
<h4 id="get"><a href="#get" class="headerlink" title="get"></a>get</h4><p>è°ƒç”¨<code>Reference.get</code>æ–¹æ³•å¯ä»¥å¾—åˆ°è¯¥å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼Œä½†æ˜¯ç”±äºæŒ‡å‘çš„å¯¹è±¡éšæ—¶å¯èƒ½è¢« GC æ¸…ç†ï¼Œæ‰€ä»¥å³ä½¿åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­ï¼Œä¸åŒæ—¶åˆ»çš„è°ƒç”¨å¯èƒ½è¿”å›ä¸ä¸€æ ·çš„å€¼ã€‚</p>
<h3 id="è½¯å¼•ç”¨ï¼ˆsoft-referenceï¼‰"><a href="#è½¯å¼•ç”¨ï¼ˆsoft-referenceï¼‰" class="headerlink" title="è½¯å¼•ç”¨ï¼ˆsoft referenceï¼‰"></a>è½¯å¼•ç”¨ï¼ˆsoft referenceï¼‰</h3><p>è½¯å¼•ç”¨â€œä¿å­˜â€å¯¹è±¡çš„èƒ½åŠ›ç¨é€Šäºå¼ºå¼•ç”¨ï¼Œä½†æ˜¯é«˜äºå¼±å¼•ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥å®ç°memory-sensitive cachesã€‚</p>
<blockquote>
<p>è½¯å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ä¼šåœ¨ç¨‹åºå³å°†è§¦å‘<code>OOM</code>æ—¶è¢«GC æ¸…ç†æ‰ï¼Œä¹‹åï¼Œå¼•ç”¨å¯¹è±¡ä¼šè¢«æ”¾åˆ°<code>ReferenceQueue</code>ä¸­ã€‚</p>
</blockquote>
<h3 id="å¼±å¼•ç”¨ï¼ˆweak-referenceï¼‰"><a href="#å¼±å¼•ç”¨ï¼ˆweak-referenceï¼‰" class="headerlink" title="å¼±å¼•ç”¨ï¼ˆweak referenceï¼‰"></a>å¼±å¼•ç”¨ï¼ˆweak referenceï¼‰</h3><p>è½¯å¼•ç”¨â€œä¿å­˜â€å¯¹è±¡çš„èƒ½åŠ›ç¨é€Šäºå¼±å¼•ç”¨ï¼Œä½†æ˜¯é«˜äºè™šå¼•ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥å®ç°canonicalizing mappingï¼Œä¹Ÿå°±æ˜¯æœ¬æ–‡è¦è®²çš„<code>WeakHashMap</code>ğŸ˜Šã€‚</p>
<blockquote>
<p>å½“å¼±å¼•ç”¨æŒ‡å‘çš„å¯¹è±¡åªèƒ½é€šè¿‡å¼±å¼•ç”¨ï¼ˆæ²¡æœ‰å¼ºå¼•ç”¨æˆ–å¼±å¼•ç”¨ï¼‰è®¿é—®æ—¶ï¼ŒGCä¼šæ¸…ç†æ‰è¯¥å¯¹è±¡ï¼Œä¹‹åï¼Œå¼•ç”¨å¯¹è±¡ä¼šè¢«æ”¾åˆ°<code>ReferenceQueue</code>ä¸­ã€‚</p>
</blockquote>
<h3 id="è™šå¼•ç”¨ï¼ˆphantom-referenceï¼‰"><a href="#è™šå¼•ç”¨ï¼ˆphantom-referenceï¼‰" class="headerlink" title="è™šå¼•ç”¨ï¼ˆphantom referenceï¼‰"></a>è™šå¼•ç”¨ï¼ˆphantom referenceï¼‰</h3><p>è™šå¼•ç”¨æ˜¯â€œä¿å­˜â€å¯¹è±¡èƒ½åŠ›æœ€å¼±çš„å¼•ç”¨ï¼Œä¸€èˆ¬ç”¨æ¥å®ç°scheduling pre-mortem cleanup actions in a more flexible way than is possible with the Java finalization mechanism</p>
<blockquote>
<p>è°ƒç”¨è™šå¼•ç”¨çš„<code>get</code>æ–¹æ³•ï¼Œæ€»ä¼šè¿”å›<code>null</code>ï¼Œä¸è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ä¸åŒçš„æ˜¯ï¼Œè™šå¼•ç”¨è¢«<code>enqueued</code>æ—¶ï¼ŒGC å¹¶ä¸ä¼šè‡ªåŠ¨æ¸…ç†è™šå¼•ç”¨æŒ‡å‘çš„å¯¹è±¡ï¼Œåªæœ‰å½“æŒ‡å‘è¯¥å¯¹è±¡çš„æ‰€æœ‰è™šå¼•ç”¨å…¨éƒ¨è¢«æ¸…ç†ï¼ˆenqueuedåï¼‰åæˆ–å…¶æœ¬èº«ä¸å¯è¾¾æ—¶ï¼Œè¯¥å¯¹è±¡æ‰ä¼šè¢«æ¸…ç†ã€‚</p>
</blockquote>
<h2 id="WeakHashMap-Entry"><a href="#WeakHashMap-Entry" class="headerlink" title="WeakHashMap.Entry"></a>WeakHashMap.Entry</h2><p>ä¸Šé¢ä»‹ç»äº†å¾ˆå¤šå¼•ç”¨çš„çŸ¥è¯†ç‚¹ï¼Œå…¶å®<code>WeakHashMap</code>æœ¬èº«æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œåªè¦æ˜¯æŠŠå¼•ç”¨çš„ä½œç”¨ä¸ä½¿ç”¨åœºæ™¯ææ¸…æ¥šäº†ï¼Œå†æ¥åˆ†æåŸºäºè¿™äº›å¼•ç”¨çš„å¯¹è±¡å°±ä¼šå¾ˆç®€å•äº†ã€‚<br><code>WeakHashMap</code>ä¸<code>HashMap</code>çš„ç­¾åä¸æ„é€ å‡½æ•°ä¸€æ ·ï¼Œè¿™é‡Œå°±ä¸ä»‹ç»äº†ï¼Œè¿™é‡Œé‡ç‚¹ä»‹ç»ä¸‹<code>Entry</code>è¿™ä¸ªå†…éƒ¨å¯¹è±¡ï¼Œå› ä¸ºå…¶ä¿å­˜å…·ä½“key-valueå¯¹ï¼Œæ‰€ä»¥æŠŠå®ƒå¼„æ¸…æ¥šäº†ï¼Œå…¶ä»–çš„å°±é—®é¢˜ä¸å¤§äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">  * The entries in this hash table extend WeakReference, using its main ref</div><div class="line">  * field as the key.</div><div class="line">  */</div><div class="line"> private static class Entry&lt;K,V&gt; extends WeakReference&lt;Object&gt; implements Map.Entry&lt;K,V&gt; &#123;</div><div class="line">     V value;</div><div class="line">     int hash;</div><div class="line">     Entry&lt;K,V&gt; next;</div><div class="line"></div><div class="line">     /**</div><div class="line">      * Creates new entry.</div><div class="line">      */</div><div class="line">     Entry(Object key, V value,</div><div class="line">           ReferenceQueue&lt;Object&gt; queue,</div><div class="line">           int hash, Entry&lt;K,V&gt; next) &#123;</div><div class="line">         //è¿™é‡ŒæŠŠkeyä¼ ç»™äº†çˆ¶ç±»WeakReferenceï¼Œè¯´æ˜keyä¸ºå¼±å¼•ç”¨ï¼ˆæ²¡æœ‰æ˜¾å¼çš„ this.key = keyï¼‰</div><div class="line">         //æ‰€æœ‰å¦‚æœkeyåªæœ‰é€šè¿‡å¼±å¼•ç”¨è®¿é—®æ—¶ï¼Œkeyä¼šè¢« GC æ¸…ç†æ‰</div><div class="line">         //åŒæ—¶è¯¥keyæ‰€ä»£è¡¨çš„Entryä¼šè¿›å…¥queueä¸­ï¼Œç­‰å¾…è¢«å¤„ç†</div><div class="line">         //è¿˜å¯ä»¥çœ‹åˆ°valueä¸ºå¼ºå¼•ç”¨ï¼ˆæœ‰æ˜¾å¼çš„ this.value = value ï¼‰ï¼Œä½†è¿™å¹¶ä¸å½±å“</div><div class="line">         //åé¢å¯ä»¥çœ‹åˆ°WeakHashMap.expungeStaleEntriesæ–¹æ³•æ˜¯å¦‚ä½•æ¸…ç†valueçš„</div><div class="line">         super(key, queue);</div><div class="line">         this.value = value;</div><div class="line">         this.hash  = hash;</div><div class="line">         this.next  = next;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     @SuppressWarnings(&quot;unchecked&quot;)</div><div class="line">     //åœ¨è·å–keyæ—¶éœ€è¦unmaskNullï¼Œå› ä¸ºå¯¹äºnullçš„keyï¼Œæ˜¯ç”¨WeakHashMapçš„å†…éƒ¨æˆå‘˜å±æ€§æ¥è¡¨ç¤ºçš„</div><div class="line">     public K getKey() &#123;</div><div class="line">         return (K) WeakHashMap.unmaskNull(get());</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     public V getValue() &#123;</div><div class="line">         return value;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     public V setValue(V newValue) &#123;</div><div class="line">         V oldValue = value;</div><div class="line">         value = newValue;</div><div class="line">         return oldValue;</div><div class="line">     &#125;</div><div class="line">     public boolean equals(Object o) &#123;</div><div class="line">         if (!(o instanceof Map.Entry))</div><div class="line">             return false;</div><div class="line">         Map.Entry&lt;?,?&gt; e = (Map.Entry&lt;?,?&gt;)o;</div><div class="line">         K k1 = getKey();</div><div class="line">         Object k2 = e.getKey();</div><div class="line">         if (k1 == k2 || (k1 != null &amp;&amp; k1.equals(k2))) &#123;</div><div class="line">             V v1 = getValue();</div><div class="line">             Object v2 = e.getValue();</div><div class="line">             if (v1 == v2 || (v1 != null &amp;&amp; v1.equals(v2)))</div><div class="line">                 return true;</div><div class="line">         &#125;</div><div class="line">         return false;</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     public int hashCode() &#123;</div><div class="line">         K k = getKey();</div><div class="line">         V v = getValue();</div><div class="line">         return ((k==null ? 0 : k.hashCode()) ^</div><div class="line">                 (v==null ? 0 : v.hashCode()));</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     public String toString() &#123;</div><div class="line">         return getKey() + &quot;=&quot; + getValue();</div><div class="line">     &#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<h2 id="WeakHashMap-expungeStaleEntries"><a href="#WeakHashMap-expungeStaleEntries" class="headerlink" title="WeakHashMap.expungeStaleEntries"></a>WeakHashMap.expungeStaleEntries</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Reference queue for cleared WeakEntries</div><div class="line"> */</div><div class="line">// æ‰€æœ‰Entryåœ¨æ„é€ æ—¶éƒ½ä¼ å…¥è¯¥queue</div><div class="line">private final ReferenceQueue&lt;Object&gt; queue = new ReferenceQueue&lt;&gt;();</div><div class="line"></div><div class="line">/**</div><div class="line"> * Expunges stale entries from the table.</div><div class="line"> */</div><div class="line">private void expungeStaleEntries() &#123;</div><div class="line">    for (Object x; (x = queue.poll()) != null; ) &#123;</div><div class="line">        synchronized (queue) &#123;</div><div class="line">            // e ä¸ºè¦æ¸…ç†çš„å¯¹è±¡</div><div class="line">            @SuppressWarnings(&quot;unchecked&quot;)</div><div class="line">                Entry&lt;K,V&gt; e = (Entry&lt;K,V&gt;) x;</div><div class="line">            int i = indexFor(e.hash, table.length);</div><div class="line"></div><div class="line">            Entry&lt;K,V&gt; prev = table[i];</div><div class="line">            Entry&lt;K,V&gt; p = prev;</div><div class="line">            // while å¾ªç¯éå†å†²çªé“¾</div><div class="line">            while (p != null) &#123;</div><div class="line">                Entry&lt;K,V&gt; next = p.next;</div><div class="line">                if (p == e) &#123;</div><div class="line">                    if (prev == e)</div><div class="line">                        table[i] = next;</div><div class="line">                    else</div><div class="line">                        prev.next = next;</div><div class="line">                    // Must not null out e.next;</div><div class="line">                    // stale entries may be in use by a HashIterator</div><div class="line">                    // å¯ä»¥çœ‹åˆ°è¿™é‡ŒæŠŠvalueèµ‹å€¼ä¸ºnullï¼Œæ¥å¸®åŠ© GC å›æ”¶å¼ºå¼•ç”¨çš„value</div><div class="line">                    e.value = null; // Help GC</div><div class="line">                    size--;</div><div class="line">                    break;</div><div class="line">                &#125;</div><div class="line">                prev = p;</div><div class="line">                p = next;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>çŸ¥é“äº†<code>expungeStaleEntries</code>æ–¹æ³•çš„ä½œç”¨ï¼Œä¸‹é¢çœ‹çœ‹å®ƒæ˜¯ä½•æ—¶è¢«è°ƒç”¨çš„</p>
<center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2nMe3fFXXXXaFXXXXXXXXXXXX_!!581166664.png" alt="expungeStaleEntriesè°ƒç”¨é“¾"><br></center>

<p>å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å¯¹<code>WeakHashMap</code>è¿›è¡Œå¢åˆ æ”¹æŸ¥æ—¶ï¼Œéƒ½è°ƒç”¨äº†<code>expungeStaleEntries</code>æ–¹æ³•ã€‚</p>
<h2 id="å®æˆ˜"><a href="#å®æˆ˜" class="headerlink" title="å®æˆ˜"></a>å®æˆ˜</h2><p>ä¸Šé¢è¯´äº†ï¼Œä¸‹é¢æ¥ä¸ªå…·ä½“çš„ä¾‹å­å¸®åŠ©å¤§å®¶æ¶ˆåŒ–<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">import java.util.WeakHashMap;</div><div class="line"></div><div class="line">class KeyHolder &#123;</div><div class="line">    @Override</div><div class="line">    protected void finalize() throws Throwable &#123;</div><div class="line">        System.out.println(&quot;I am over from key&quot;);</div><div class="line">        super.finalize();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">class ValueHolder &#123;</div><div class="line">    @Override</div><div class="line">    protected void finalize() throws Throwable &#123;</div><div class="line">        System.out.println(&quot;I am over from value&quot;);</div><div class="line">        super.finalize();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class RefTest &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        WeakHashMap&lt;KeyHolder, ValueHolder&gt; weakMap = new WeakHashMap&lt;KeyHolder, ValueHolder&gt;();</div><div class="line"></div><div class="line">        KeyHolder kh = new KeyHolder();    </div><div class="line">        ValueHolder vh = new ValueHolder();</div><div class="line"></div><div class="line">        weakMap.put(kh, vh);</div><div class="line"></div><div class="line">        while (true) &#123;</div><div class="line">            for (KeyHolder key : weakMap.keySet()) &#123;</div><div class="line">                System.out.println(key + &quot; : &quot; + weakMap.get(key));</div><div class="line">            &#125;</div><div class="line">            try &#123;</div><div class="line">                Thread.sleep(2000);</div><div class="line">            &#125; catch (InterruptedException e) &#123;</div><div class="line">                e.printStackTrace();</div><div class="line">            &#125;</div><div class="line">            System.out.println(&quot;here...&quot;);</div><div class="line">            //è¿™é‡ŒæŠŠkhè®¾ä¸ºnullï¼Œè¿™æ ·ä¸€æ¥å°±åªæœ‰å¼±å¼•ç”¨æŒ‡å‘khæŒ‡å‘çš„å¯¹è±¡</div><div class="line">            kh = null;</div><div class="line">            System.gc();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¾“å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">KeyHolder@a15670a : ValueHolder@20e1ed5b</div><div class="line">here...</div><div class="line">I am over from key   //è¾“å‡ºè¿™å¥è¯è¯´æ˜ï¼Œè¯¥keyå¯¹åº”çš„Entryå·²ç»è¢« GC æ¸…ç†</div><div class="line">here...</div><div class="line">here...</div><div class="line">here...</div><div class="line">...</div><div class="line">...</div><div class="line">...</div></pre></td></tr></table></figure></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¯´å®è¯ï¼Œä¹‹å‰æˆ‘æ˜¯æ²¡æ€ä¹ˆäº†è§£è¿‡å¼•ç”¨ï¼Œæ›´æ˜¯æ²¡æœ‰ç”¨è¿‡<code>WeakHashMap</code>è¿™ä¸ªç±»ï¼Œè¿™æ¬¡ç®—æ˜¯æŠŠè¿™ä¸ªå‘ç»™å¡«ä¸Šäº†ã€‚å¼•ç”¨çš„ä½¿ç”¨åœºæ™¯åº”è¯¥æ˜¯åœ¨å¸¸é©»ç±»æˆ–æ¶ˆè€—å†…å­˜è¾ƒå¤§åº”ç”¨ä¸­æ‰ç”¨å¾—ä¸Šï¼Œæˆ‘è‡ªå·±ç¡®å®æ²¡æ€ä¹ˆç»å†è¿‡è¿™ç§ç±»å‹çš„é¡¹ç›®ï¼Œåªèƒ½ç°åœ¨æ‰“å¥½åŸºç¡€ï¼Œä»¥åæœ‰æœºä¼šåœ¨å°è¯•ã€‚</p>
<p>å…¶å®å…³äºå¼•ç”¨ï¼Œæœ¬æ–‡é‡ç‚¹ä»‹ç»äº†å¼±å¼•ç”¨çš„ä½¿ç”¨åœºæ™¯ï¼Œå…¶ä»–çš„æ²¡æ€ä¹ˆä»‹ç»ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥é˜…è¯»å‚è€ƒä¸­ç»™å‡ºçš„é“¾æ¥ã€‚ğŸ˜Š</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://weblogs.java.net/blog/2006/05/04/understanding-weak-references" target="_blank" rel="external">https://weblogs.java.net/blog/2006/05/04/understanding-weak-references</a></li>
<li><a href="http://www.onjava.com/pub/a/onjava/2001/07/09/optimization.html?page=1" target="_blank" rel="external">http://www.onjava.com/pub/a/onjava/2001/07/09/optimization.html?page=1</a></li>
<li><a href="http://stackoverflow.com/questions/5585694/whats-the-state-of-a-weak-reference-that-has-been-manually-enqueued" target="_blank" rel="external">whats-the-state-of-a-weak-reference-that-has-been-manually-enqueued</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‰é¢æŠŠåŸºäºç‰¹å®šæ•°æ®ç»“æ„çš„Mapä»‹ç»å®Œäº†ï¼Œå®ƒä»¬åˆ†åˆ«åˆ©ç”¨äº†ç›¸åº”æ•°æ®ç»“æ„çš„ç‰¹ç‚¹æ¥å®ç°ç‰¹æ®Šçš„ç›®çš„ï¼ŒåƒHashMapåˆ©ç”¨å“ˆå¸Œè¡¨çš„å¿«é€Ÿæ’å…¥ã€æŸ¥æ‰¾å®ç°&lt;code&gt;O(1)&lt;/code&gt;çš„å¢åˆ æ”¹æŸ¥ï¼ŒTreeMapåˆ™åˆ©ç”¨äº†çº¢é»‘æ ‘æ¥ä¿è¯keyçš„æœ‰åºæ€§çš„åŒæ—¶ï¼Œä½¿å¾—å¢åˆ æ”¹æŸ¥çš„æ—¶é—´å¤æ‚åº¦ä¸º&lt;code
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SICP ç¬¬äºŒç« æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2015/09/20/sicp-chapter2-summary/"/>
    <id>http://liujiacai.net/blog/2015/09/20/sicp-chapter2-summary/</id>
    <published>2015-09-20T09:48:17.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>åˆ°ä»Šå¤©ä¸ºæ­¢ç»ˆäºæŠŠç¬¬äºŒç« çœ‹å®Œäº†ï¼Œç›¸æ¯”äºç¬¬ä¸€ç« ï¼Œæ„Ÿè§‰éš¾ç‚¹å°‘äº†äº›ï¼Œè¿™ç« ä¸»è¦æ˜¯é€šè¿‡å¤§é‡ä¾‹å­ï¼ˆä¸»è¦æœ‰å›¾å½¢è¯­è¨€ã€åŒºé—´è¿ç®—ã€ç¬¦å·æ±‚å¯¼ã€é›†åˆçš„è¡¨ç¤ºã€é€šç”¨å‹ç®—æœ¯è¿ç®—ï¼‰æ¥ç†Ÿæ‚‰æ„é€ æ•°æ®æŠ½è±¡çš„ç›¸å…³æŠ€èƒ½ã€‚ä¸‹é¢æ¥å›é¡¾æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç« ã€‚</p>
<h2 id="æ•°æ®æŠ½è±¡çš„æ„ä¹‰"><a href="#æ•°æ®æŠ½è±¡çš„æ„ä¹‰" class="headerlink" title="æ•°æ®æŠ½è±¡çš„æ„ä¹‰"></a>æ•°æ®æŠ½è±¡çš„æ„ä¹‰</h2><p>åœ¨ç¬¬ä¸€ç« ä¸­ï¼Œåªæ˜¯è¿›è¡Œäº†ä¸€äº›æ•°å€¼æ¼”ç®—ï¼Œè¿™æ˜¯æ¯”è¾ƒç®€å•çš„æ•°æ®ï¼Œå¹¶æ²¡æœ‰ä½“ç°å‡ºæ•°æ®æŠ½è±¡çš„æ„ä¹‰ï¼Œæœ¬ç« ä¸€å¼€å§‹å°±é€šè¿‡æœ‰ç†æ•°çš„è¿ç®—è¿™ä¸ªä¾‹å­å¼•å‡ºäº†æ•°æ®æŠ½è±¡çš„æ„ä¹‰ã€‚<br>æ•°æ®æŠ½è±¡çš„åŸºæœ¬æ€æƒ³ï¼Œå°±æ˜¯è®¾æ³•æ„é€ å‡ºä¸€äº›ä½¿ç”¨å¤åˆæ•°æ®å¯¹è±¡çš„ç¨‹åºï¼Œä½¿å®ƒä»¬å¯ä»¥åƒæ“ä½œæ•°å€¼ç­‰ç®€å•æ•°æ®ç±»å‹ä¸€æ ·æ“ä½œâ€œæŠ½è±¡æ•°æ®â€ã€‚é€šè¿‡æ„é€ å¤åˆæ•°æ®ï¼ˆä¸æ„é€ å¤åˆè¿‡ç¨‹ç±»ä¼¼ï¼‰å¯ä»¥è¾¾åˆ°ä¸‹é¢çš„æ•ˆæœï¼š</p>
<ol>
<li>é™ä½ç¨‹åºé—´çš„è€¦åˆåº¦</li>
<li>æé«˜è®¾è®¡çš„æ¨¡å—æ€§</li>
<li>å¢å¼ºè¯­è¨€è¡¨è¾¾èƒ½åŠ›ï¼Œä¸ºå¤„ç†è®¡ç®—é—®é¢˜æä¾›æ›´å¤šæ‰‹æ®µå’Œæ–¹æ³•ã€‚</li>
</ol>
<p>ç¬¬äºŒç« ä¸»è¦å›´ç»•ä¸‹é¢ä¸¤ä¸ªéƒ¨åˆ†å±•å¼€ï¼š</p>
<ol>
<li>å¦‚ä½•æ„é€ å¤åˆæ•°æ®å¯¹è±¡ï¼ˆé€šè¿‡æ•°æ®ç»„åˆï¼‰</li>
<li>å¦‚ä½•å¤„ç†å¤åˆæ•°æ®å¯¹è±¡</li>
</ol>
<p>å…¶ä»–ä¸€äº›ç»†èŠ‚ç‚¹è¿˜åŒ…æ‹¬ï¼š</p>
<ol>
<li>å¤åˆæ•°æ®å¦‚ä½•æ”¯æŒä»¥â€œåŒ¹é…å’Œç»„åˆâ€æ–¹å¼å·¥ä½œçš„ç¼–ç¨‹æ¥å£</li>
<li>é€šè¿‡å®šä¹‰æ•°æ®æŠ½è±¡,è¿›ä¸€æ­¥æ¨¡ç³Šâ€œè¿‡ç¨‹â€å’Œâ€œæ•°æ®â€çš„å·®å¼‚</li>
<li>ç¬¦å·è¡¨è¾¾å¼çš„å¤„ç†,è¿™ç§è¡¨è¾¾å¼çš„åŸºæœ¬éƒ¨åˆ†æ˜¯ç¬¦å·è€Œä¸æ˜¯æ•° é€šç”¨å‹(æ³›å‹)æ“ä½œ,ä½¿åŒæ ·æ“ä½œå¯èƒ½ç”¨äºä¸åŒçš„æ•°æ®</li>
<li>æ•°æ®åˆ¶å¯¼ï¼ˆå¯¼å‘/é©±åŠ¨ï¼‰çš„ç¨‹åºè®¾è®¡,æ–¹ä¾¿æ–°æ•°æ®ç±»çš„åŠ å…¥</li>
</ol>
<h3 id="è¿‡ç¨‹æŠ½è±¡ä¸æ•°æ®æŠ½è±¡"><a href="#è¿‡ç¨‹æŠ½è±¡ä¸æ•°æ®æŠ½è±¡" class="headerlink" title="è¿‡ç¨‹æŠ½è±¡ä¸æ•°æ®æŠ½è±¡"></a>è¿‡ç¨‹æŠ½è±¡ä¸æ•°æ®æŠ½è±¡</h3><p>ä¸€ä¸ªè¿‡ç¨‹æè¿°äº†ä¸€ç±»è®¡ç®—çš„æ¨¡å¼,åˆå¯ä»¥ä½œä¸ºå…ƒç´ ç”¨äºå®ç°å…¶ä»–(æ›´å¤ æ‚çš„)è¿‡ç¨‹ã€‚å› æ­¤è¿‡ç¨‹æ˜¯ä¸€ç§æŠ½è±¡â€”â€”è¿‡ç¨‹æŠ½è±¡ã€‚è¿‡ç¨‹æŠ½è±¡çš„ä¼˜åŠ¿åœ¨äºï¼š</p>
<ol>
<li>å±è”½è®¡ç®—çš„å®ç°ç»†èŠ‚,å¯ä»¥ç”¨ä»»ä½•åŠŸèƒ½/ä½¿ç”¨å½¢å¼åˆé€‚çš„è¿‡ç¨‹å–ä»£</li>
<li>è§„å®šäº†ä½¿ç”¨æ–¹å¼,ä½¿ç”¨æ–¹åªä¾èµ–äºæŠ½è±¡çš„ä½¿ç”¨æ–¹å¼çº¦å®š</li>
</ol>
<p>æ•°æ®æŠ½è±¡çš„æƒ…å†µç±»ä¼¼ã€‚<br>ä¸€ä¸ªæ•°æ®æŠ½è±¡å®ç°ä¸€ç±»æ•°æ®æ‰€éœ€çš„æ‰€æœ‰åŠŸèƒ½,åˆåƒåŸºæœ¬æ•°æ®å…ƒç´ ä¸€æ ·å¯ä»¥ä½œä¸ºå…¶ä»–æ•°æ®æŠ½è±¡çš„å…ƒç´ ã€‚ä¸»è¦ä¼˜åŠ¿ï¼š</p>
<ol>
<li>å±è”½ä¸€ç§å¤åˆæ•°æ®çš„å®ç°ç»†èŠ‚</li>
<li>æä¾›ä¸€å¥—æŠ½è±¡æ“ä½œ,ä½¿ç”¨ç»„åˆæ•°æ®çš„å°±åƒæ˜¯ä½¿ç”¨åŸºæœ¬æ•°æ®</li>
<li>æ•°æ®æŠ½è±¡çš„æ¥å£(ç•Œé¢)åŒ…æ‹¬ä¸¤ç±»æ“ä½œ:æ„é€ å‡½æ•°å’Œé€‰æ‹©å‡½æ•°ã€‚æ„é€ å‡½æ•°åŸºäºä¸€äº›å‚æ•°æ„é€ è¿™ç±»æ•°æ®,é€‰æ‹©å‡½æ•°æå–å…¶å†…å®¹</li>
</ol>
<p>åé¢å°†è¯´æ˜ï¼ˆåœ¨ç¬¬ä¸‰ç« ğŸ˜Šï¼‰,å¦‚æœéœ€è¦æ”¯æŒåŸºäºçŠ¶æ€çš„ç¨‹åºè®¾è®¡ï¼Œé‚£ä¹ˆå°±éœ€è¦å¢åŠ å¦å¤– ä¸€ç±»å˜åŠ¨æ“ä½œï¼ˆmutationï¼Œä¿®æ”¹æ“ä½œï¼‰ã€‚</p>
<h2 id="æ•°æ®æŠ½è±¡çš„è¯­è¨€æ”¯æŒ"><a href="#æ•°æ®æŠ½è±¡çš„è¯­è¨€æ”¯æŒ" class="headerlink" title="æ•°æ®æŠ½è±¡çš„è¯­è¨€æ”¯æŒ"></a>æ•°æ®æŠ½è±¡çš„è¯­è¨€æ”¯æŒ</h2><p>ä¸€èˆ¬æ¥è¯´ï¼Œå®ç°æ•°æ®æŠ½è±¡ï¼Œç¼–ç¨‹è¯­è¨€éœ€è¦æä¾›ä¸‹é¢ä¸‰ç§æœº:</p>
<ol>
<li>ç²˜åˆæœºåˆ¶ï¼Œæ”¯æŒæŠŠä¸€ç»„æ•°æ®å¯¹è±¡ç»„åˆæˆä¸€ä¸ªæ•´ä½“ï¼ˆé€šè¿‡é—­åŒ…å®ç°ï¼‰</li>
<li>æ“ä½œå®šä¹‰æœºåˆ¶ï¼Œå®šä¹‰é’ˆå¯¹ç»„åˆæ•°æ®çš„æ“ä½œï¼ˆé€šè¿‡schemeå†…ç½®çš„defineå®ç°ï¼‰</li>
<li>æŠ½è±¡æœºåˆ¶ï¼Œå±è”½å®ç°ç»†èŠ‚ï¼Œä½¿ç»„åˆæ•°æ®èƒ½åƒç®€å•æ•°æ®ä¸€æ ·ä½¿ç”¨ï¼ˆé€šè¿‡æ•°æ®å¯¼å‘çš„ç¨‹åºè®¾è®¡é£æ ¼å®ç°ï¼‰</li>
</ol>
<p>å¤„ç†å¤åˆæ•°æ®çš„ä¸€ä¸ªå…³é”®æ¦‚å¿µæ˜¯<code>é—­åŒ…</code>ï¼Œè¿™é‡Œçš„é—­åŒ…æ¦‚å¿µæ¥è‡ª<a href="https://en.wikipedia.org/wiki/Abstract_algebra" target="_blank" rel="external">æŠ½è±¡ä»£æ•°</a>ï¼ŒæŒ‡çš„æ˜¯</p>
<blockquote>
<p>é€šè¿‡æ•°æ®å¯¹è±¡ç»„åˆèµ·æ¥å¾—åˆ°çš„ç»“æœï¼Œè¿˜å¯ä»¥é€šè¿‡åŒæ ·çš„æ“ä½œå†è¿›è¡Œå†æ¬¡ç»„åˆã€‚</p>
</blockquote>
<p>è¿™ä¸ªæ¦‚å¿µå’Œæˆ‘ä»¬åœ¨JavaScriptç­‰ç°ä»£ç¼–ç¨‹è¯­è¨€ä¸­çš„æ¦‚å¿µï¼ˆä¸€ç§ä¸ºè¡¨ç¤ºå¸¦æœ‰è‡ªç”±å˜é‡çš„è¿‡ç¨‹è€Œç”¨çš„å®ç°æŠ€æœ¯ï¼‰ä¸ä¸€æ ·ï¼Œè¦æ³¨æ„åŒºåˆ†ã€‚</p>
<h3 id="åºå¯¹pair"><a href="#åºå¯¹pair" class="headerlink" title="åºå¯¹pair"></a>åºå¯¹pair</h3><p>Schemeçš„åŸºæœ¬å¤åˆç»“æ„ç§°ä¸ºâ€œåºå¯¹â€ï¼Œåºå¯¹æœ¬èº«ä¹Ÿæ˜¯æ•°æ®å¯¹è±¡,å¯ä»¥ç”¨äºæ„é€ æ›´å¤æ‚çš„æ•°æ®å¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯è¡¨ï¼Œlistï¼‰ã€‚ä¾‹å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">(define x (cons 3 4))</div><div class="line">(define y (cons 5 6))</div><div class="line">(define z (cons x y))</div><div class="line">; æ³¨æ„ç†è§£åºå¯¹pair ä¸è¡¨list çš„åŒºåˆ«</div><div class="line">(define x (cons 1 2))</div><div class="line">(define y (list 1 2))</div><div class="line">(cdr x)  ; 2</div><div class="line">(cdr y)  ; (2)</div></pre></td></tr></table></figure></p>
<p>å¸¸è§„è¿‡ç¨‹æ€§è¯­è¨€éƒ½æ²¡æœ‰å†…éƒ¨çš„è¡¨æ•°æ®ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨ç®—æ³•ä¸æ•°æ®ç»“æ„è¯¾ä¸Šï¼Œä¸€èˆ¬éƒ½ç”¨Cè¯­è¨€å®ç°è¿‡å„ç§è¡¨ï¼ˆå•å‘åŒå‘é“¾è¡¨ï¼Œç¯å½¢é“¾è¡¨ç­‰ï¼‰ç»“æ„ï¼ŒC++çš„æ ‡å‡†STLåº“çš„listï¼ŒJavaé›†åˆæ¡†æ¶ä¸­çš„Listã€‚</p>
<p>è¡¨åŠå…¶ç›¸å…³æ¦‚å¿µæ˜¯ä» Lisp å¼€å§‹å¼€å‘ï¼Œç°å·²ç»æˆä¸ºå¾ˆå¤šæŠ€æœ¯çš„åŸºç¡€ï¼š</p>
<ol>
<li>åŠ¨æ€å­˜å‚¨ç®¡ç†å·²ç»æˆä¸ºæ—¥å¸¸ç¼–ç¨‹å·¥ä½œçš„åŸºæœ¬æ”¯æŒ</li>
<li>é“¾è¡¨çš„å®šä¹‰å’Œä½¿ç”¨æ˜¯å¸¸ç”¨æŠ€æœ¯ï¼ˆæƒ³æƒ³Java ä¸­ä½ ç”¨äº†å¤šå°‘æ¬¡ArrayListå§ï¼‰</li>
<li>æœ‰å…³è¡¨çš„ä½¿ç”¨å’Œæ“ä½œ,ä»¥åŠå„ç§æ“ä½œçš„è®¾è®¡å’Œå®ç°,éƒ½å¯ä»¥ä»Lispçš„è¡¨ç»“æ„å­¦ä¹ è®¸å¤šä¸œè¥¿</li>
<li>åŸºäºmapã€reduceçš„hadoop</li>
<li>é«˜é˜¶è¡¨æ“ä½œå¯¹åˆ†è§£ç¨‹åºå¤æ‚æ€§å¾ˆæœ‰æ„ä¹‰</li>
</ol>
<h3 id="åºå¯¹çš„æ“ä½œ"><a href="#åºå¯¹çš„æ“ä½œ" class="headerlink" title="åºå¯¹çš„æ“ä½œ"></a>åºå¯¹çš„æ“ä½œ</h3><p>ç”±äºåºå¯¹æ˜¯æ„é€ å¤æ‚æ•°æ®å¯¹è±¡çš„åŸºç¡€ï¼Œæ‰€æœ‰æŒæ¡åºå¯¹çš„æ“ä½œä¹Ÿå°±æ˜¾å¾—å°¤ä¸ºé‡è¦ï¼Œåœ¨å­¦ä¹ è¿™äº›æ“ä½œæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ„Ÿå—åˆ°å‡½æ•°å¼ç¼–ç¨‹çš„å¥‡å¦™ã€‚<br>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥çœ‹ä»£ç <a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/lib/list.scm" target="_blank" rel="external">list.scm</a>çœ‹ä»£ç å§ã€‚</p>
<h2 id="æ•°æ®å¯¼å‘-vs-æ¶ˆæ¯ä¼ é€’"><a href="#æ•°æ®å¯¼å‘-vs-æ¶ˆæ¯ä¼ é€’" class="headerlink" title="æ•°æ®å¯¼å‘ vs. æ¶ˆæ¯ä¼ é€’"></a>æ•°æ®å¯¼å‘ vs. æ¶ˆæ¯ä¼ é€’</h2><p>è¿™ä¸¤ç§æ–¹å¼æ˜¯æœ¬ç« ç€é‡æ¥å—çš„ä¸¤ç§æ•°æ®æŠ½è±¡æ–¹å¼ï¼Œåˆ†åˆ«å¯¹è±¡å‡½æ•°å¼ç¼–ç¨‹ï¼ˆæ•°æ®å¯¼å‘ï¼‰ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ˆæ¶ˆæ¯ä¼ é€’ï¼‰ï¼Œå…·ä½“è¾¨æå¯å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.76.md" target="_blank" rel="external">ä¹ é¢˜2.76</a>ã€‚</p>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ç”±äºæœ¬ç« å¤§éƒ¨åˆ†å†…å®¹éƒ½æ˜¯ç”¨å…·ä½“ä¾‹å­æ¥è®²è§£ï¼Œä¸‹é¢æˆ‘å°±å†ä¸€ä¸€å›é¡¾éã€‚å¤§éƒ¨åˆ†å†…å®¹éƒ½åœ¨æˆ‘Githubçš„è¯»ä¹¦ç¬”è®°ä¸­ï¼Œè¿™é‡Œç›¸å½“äºä¸ªç´¢å¼•ï¼Œå…·ä½“ä¾‹å­å¯å‚è€ƒç»™å‡ºçš„ç›¸åº”é“¾æ¥ğŸ˜Šã€‚</p>
<h3 id="æœ‰ç†æ•°è¿ç®—"><a href="#æœ‰ç†æ•°è¿ç®—" class="headerlink" title="æœ‰ç†æ•°è¿ç®—"></a>æœ‰ç†æ•°è¿ç®—</h3><p>é€šè¿‡è¿™é‡Œä¾‹å­ï¼Œå¼•å…¥æ•°æ®æŠ½è±¡çš„æ„ä¹‰ã€‚å…·ä½“ä»£ç è§<a href="https://github.com/jiacai2050/sicp/tree/master/exercises/02/lib/rational.scm" target="_blank" rel="external">rational.scm</a>ã€‚</p>
<p>ä»‹ç»å®Œè¿™ä¸ªä¾‹å­åï¼Œä¹¦ä¸Šæå‡ºäº†ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼Œâ€œä»€ä¹ˆæ˜¯æ•°æ®â€ï¼Œåœ¨æœ‰ç†æ•°è¿ç®—è¿™ä¸ªä¾‹å­ï¼Œä¸­æˆ‘ä»¬èƒ½çœ‹åˆ°çš„å°±æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°<code>make-rat</code>ï¼Œä¸¤ä¸ªé€‰æ‹©å‡½æ•°<code>numer</code>ä¸<code>demon</code>ã€‚é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œå¹¶ä¸æ˜¯ä»»æ„ä¸‰ä¸ªè¿‡ç¨‹éƒ½èƒ½æ„æˆæœ‰ç†æ•°çš„å®ç°ï¼Œéœ€è¦æ»¡è¶³<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(make-rat (numer x) (denom x)) = x</div></pre></td></tr></table></figure></p>
<p>ä»»æ„æ»¡è¶³è¿™ä¸€æ¡ä»¶çš„ä¸‰ä¸ªå‡½æ•°ï¼Œéƒ½èƒ½ä½œä¸ºæœ‰ç†æ•°è¡¨ç¤ºçš„åŸºç¡€ã€‚<br>ä¸€èˆ¬æ¥è¯´ï¼Œä¸€ç§æ•°æ®å¯¹è±¡çš„æ„é€ å‡½æ•°å’Œé€‰æ‹©å‡½æ•°éƒ½è¦æ»¡è¶³ä¸€å®šæ¡ä»¶ã€‚schemeä¸­åº•å±‚çš„æ•°æ®ç»“æ„åºå¯¹ä¹Ÿæ»¡è¶³è¿™ä¸€ç‰¹ç‚¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(car (cons a b)) = a</div><div class="line">(cdr (cons a b)) = b</div><div class="line">(cons (car x)(cdr x)) = x  ;æœ‰å‰æ,x å¿…é¡»æ˜¯åºå¯¹</div></pre></td></tr></table></figure></p>
<h4 id="Churchæ•°"><a href="#Churchæ•°" class="headerlink" title="Churchæ•°"></a>Churchæ•°</h4><p><a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.06.scm" target="_blank" rel="external">ä¹ é¢˜2.06</a>å¼•å‡ºChurchæ•°ï¼Œå®Œå…¨ç”¨è¿‡ç¨‹å®ç°æ•´æ•°ç®—æœ¯ç³»ç»Ÿï¼Œå…³äºè¿™ä¸€ç‚¹ï¼Œæ¨èå¤§å®¶çœ‹æˆ‘ä¹‹å‰å†™çš„<a href="/blog/2014/10/12/lambda-calculus-introduction/">ç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculus</a>ï¼Œç»å¯¹èƒ½å¤Ÿé¢ è¦†ä½ çš„æ€ç»´ã€‚</p>
<h3 id="åŒºé—´è¿ç®—"><a href="#åŒºé—´è¿ç®—" class="headerlink" title="åŒºé—´è¿ç®—"></a>åŒºé—´è¿ç®—</h3><p>è§ç›¸åº”çš„ä¹ é¢˜è§£ç­”ï¼Œæ¨èçœ‹<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.14_2.16.md" target="_blank" rel="external">ä¹ é¢˜2.14_2.16</a></p>
<h3 id="å…«çš‡åé—®é¢˜"><a href="#å…«çš‡åé—®é¢˜" class="headerlink" title="å…«çš‡åé—®é¢˜"></a>å…«çš‡åé—®é¢˜</h3><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB23LNQfFXXXXckXXXXXXXXXXXX_!!581166664.png" alt="å…«çš‡åç¤ºæ„å›¾"><br></center>

<p>ç»å…¸çš„é—®é¢˜ï¼Œå‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.42_2.43.md" target="_blank" rel="external">ä¹ é¢˜2.42</a>ã€‚</p>
<h3 id="å›¾å½¢è¯­è¨€"><a href="#å›¾å½¢è¯­è¨€" class="headerlink" title="å›¾å½¢è¯­è¨€"></a>å›¾å½¢è¯­è¨€</h3><p><center><br>    <img src="https://img.alicdn.com/imgextra/i3/581166664/TB2lhtEfFXXXXaRXpXXXXXXXXXX_!!581166664.png" alt="å›¾å½¢è¯­è¨€"><br></center><br>è¿™ä¸ªç¤ºä¾‹æ¯”è¾ƒå¥½ç©ï¼Œè®¾è®¡äº†ä¸€ä¸ªå›¾å½¢è¯­è¨€ï¼ŒåŸºæœ¬çš„å…ƒç´ painterç”¨ä¸€è¿‡ç¨‹è¡¨ç¤ºï¼Œè¿›ä¸€æ­¥æ¨¡ç³Šè¿‡ç¨‹ä¸æ•°æ®çš„åŒºåˆ«ã€‚å‚è€ƒç›¸å…³ä¹ é¢˜ï¼Œæ¨è<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.44_2.45.md" target="_blank" rel="external">2.44</a>ã€<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.49.md" target="_blank" rel="external">2.49</a>ã€‚<br>ä½ å¯ä»¥çœ‹åˆ°ï¼ŒæŠŠpainterç”¨è¿‡ç¨‹å®ç°åï¼Œç›¸å…³æ“ä½œï¼ˆflip-vertã€besidesç­‰ï¼‰å˜å¾—ä½•å…¶ç®€å•ã€‚</p>
<h3 id="Huffmanç¼–ç æ ‘ğŸŒ²"><a href="#Huffmanç¼–ç æ ‘ğŸŒ²" class="headerlink" title="Huffmanç¼–ç æ ‘ğŸŒ²"></a>Huffmanç¼–ç æ ‘ğŸŒ²</h3><p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2Uy8RfFXXXXcEXXXXXXXXXXXX_!!581166664.png" alt="ä¸€ä¸ªHuffmançš„ä¾‹å­"><br></center><br>åˆä¸€ç»å…¸ç®—æ³•ï¼Œä¸€å®šè¦çœ‹ï¼Œæ¨è<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.69.scm" target="_blank" rel="external">ç»ƒä¹ 2.69</a>ï¼Œå­¦ä¹ å¦‚æœæ„é€ ä¸€ä¸ªHuffmanç¼–ç æ ‘ã€‚</p>
<h3 id="å¤æ•°çš„è¡¨ç¤º"><a href="#å¤æ•°çš„è¡¨ç¤º" class="headerlink" title="å¤æ•°çš„è¡¨ç¤º"></a>å¤æ•°çš„è¡¨ç¤º</h3><p><center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB213J7fFXXXXXOXXXXXXXXXXXX_!!581166664.png" alt="å¤æ•°çš„è¡¨ç¤º"><br></center><br>è¿™ç§ä¸»è¦æ˜¯ç”¨ç›´è§’åæ ‡ä¸æåæ ‡ä¸¤ç§å½¢å¼è¡¨ç¤ºå¤æ•°ï¼Œç”¨å¸¦æ ‡å¿—çš„æ•°æ®ï¼Œå®ç°äº†æ•°æ®å¯¼å‘çš„è®¾è®¡é£æ ¼ã€‚</p>
<p>ä¸¤ç§åæ ‡çš„å®ç°ï¼Œå‚è€ƒä»£ç <a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/lib/generic_arithmetic.scm" target="_blank" rel="external">lib/generic_arithmetic.scm</a></p>
<h3 id="é€šç”¨å‹ç®—æœ¯åŒ…çš„å®ç°"><a href="#é€šç”¨å‹ç®—æœ¯åŒ…çš„å®ç°" class="headerlink" title="é€šç”¨å‹ç®—æœ¯åŒ…çš„å®ç°"></a>é€šç”¨å‹ç®—æœ¯åŒ…çš„å®ç°</h3><p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2GYJSfFXXXXcFXXXXXXXXXXXX_!!581166664.png" alt="é€šç”¨å‹ç®—æœ¯åŒ…"><br></center><br>è¿™ä¸€ç¤ºä¾‹åŸºæœ¬åœ¨å‰é¢æœ‰ç†æ•°ä¸å¤æ•°çš„åŸºç¡€ä¸Šï¼Œå®šä¹‰äº†ç»Ÿä¸€çš„æ¥å£ï¼ˆaddã€subç­‰ï¼‰æ¥æ“ä½œ<code>scheme-number</code>ã€<code>rational</code>ä¸<code>complex</code>ä¸‰ç§ç±»å‹çš„æ•°æ®ã€‚</p>
<p>å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/lib/complex_number.scm" target="_blank" rel="external">lib/complex_number.scm</a></p>
<h3 id="ç¬¦å·ä»£æ•°â€”â€”å¤šé¡¹å¼ç®—æœ¯"><a href="#ç¬¦å·ä»£æ•°â€”â€”å¤šé¡¹å¼ç®—æœ¯" class="headerlink" title="ç¬¦å·ä»£æ•°â€”â€”å¤šé¡¹å¼ç®—æœ¯"></a>ç¬¦å·ä»£æ•°â€”â€”å¤šé¡¹å¼ç®—æœ¯</h3><p><center><br>    <img src="https://img.alicdn.com/imgextra/i3/581166664/TB2_HRVfFXXXXbzXXXXXXXXXXXX_!!581166664.png" alt="å¤šè¾¹å½¢çš„ç»§æ‰¿æ€§ï¼ˆå¼ºåˆ¶çš„éš¾ç‚¹ï¼‰"><br></center><br>æœ¬ç« æœ€åä¸€ä¸ªä¾‹å­ï¼Œéš¾åº¦æ¯”ä¹‹å‰é€šç”¨å‹ç®—æœ¯åŒ…è¦å¤§ï¼Œå› ä¸ºä¸åŒç±»å‹çš„æ•°æ®é—´æ“ä½œéœ€è¦â€œå¼ºåˆ¶ï¼ˆcoercionï¼‰â€ï¼Œè€Œå¼ºåˆ¶å°±éœ€è¦ä¸€å®šçš„è§„åˆ™ï¼Œå®é™…ç¼–ç¨‹ä¸­è¿™ç§è§„åˆ™å¯èƒ½å¾ˆå¤æ‚ï¼Œæ‰€æœ‰è¿™é‡Œéœ€è¦æ³¨æ„çš„ç»†èŠ‚ç‚¹æ¯”è¾ƒå¤šã€‚</p>
<p>ä»â€œå¼ºåˆ¶â€å¼•å‡ºçš„é—®é¢˜å¯ä»¥çœ‹å‡ºå¼ºç±»å‹è¯­è¨€çš„åŠ£åŠ¿ï¼Œç°åœ¨åƒpythonã€javascriptç­‰å¼±ç±»å‹çš„è¯­è¨€è¿™ä¹ˆç«ï¼Œå¾ˆå¤§ç¨‹åºä¸Šå°±æ˜¯ç”±äºå¼±ç±»å‹è¯­è¨€çš„ç¼–è¯‘å™¨æŠŠâ€œå¼ºåˆ¶â€çš„å·¥ä½œç»™åšäº†ï¼Œç¨‹åºå‘˜æ ¹æœ¬ä¸ç”¨å»å…³å¿ƒã€‚å½“ç„¶ï¼Œå¦‚æœæ‰€æœ‰â€œå¼ºåˆ¶â€å·¥ä½œéƒ½è®©ç¼–è¯‘å™¨å»åšï¼Œä¹Ÿæ˜¯ä¸åˆé€‚çš„ï¼Œå…·ä½“å¦‚ä½•é€‰æ‹©ï¼Œå°±éœ€è¦ç»¼åˆå¤šç§å› ç´ äº†ã€‚<br>æˆ‘æœ¬èº«ç»éªŒè¿˜ä¸æ˜¯å¾ˆä¸°å¯Œï¼Œå°±ä¸ä¹±è¯´äº†ï¼Œå¦‚æœä½ æœ‰è¿™æ–¹é¢çš„äº²èº«ä½“ä¼šï¼Œå¯ä»¥ç•™è¨€ï¼Œæˆ‘ä¼šåŠæ—¶æ›´æ–°ğŸ˜Šã€‚</p>
<p>ä»£ç å®ç°å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/lib/poly.scm" target="_blank" rel="external">lib/poly.scm</a>ä¸<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/02/2.92.md" target="_blank" rel="external">ä¹ é¢˜2.92</a>ã€‚</p>
<h3 id="æ‰©å……ç»ƒä¹ ï¼šæœ‰ç†å‡½æ•°"><a href="#æ‰©å……ç»ƒä¹ ï¼šæœ‰ç†å‡½æ•°" class="headerlink" title="æ‰©å……ç»ƒä¹ ï¼šæœ‰ç†å‡½æ•°"></a>æ‰©å……ç»ƒä¹ ï¼šæœ‰ç†å‡½æ•°</h3><p>ç»è¿‡å‰é¢å¤šé¡¹å¼ç®—æœ¯çš„ä¹ é¢˜ï¼Œæˆ‘åŸºæœ¬å·²ç»è´¥ä¸‹é˜µæ¥äº†ï¼Œå®åœ¨æ˜¯å¸æ”¶æ¶ˆåŒ–ä¸äº†äº†ï¼Œæ”¹æ—¥å†æˆ˜ğŸ˜‚ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸€æ¬¡çœ‹ç¬¬äºŒç« ï¼Œé™†é™†ç»­ç»­ç”¨äº†2ä¸ªæœˆï¼ŒåŸºæœ¬ä¸Šè€—è´¹å¹³æ—¶ä¸‹ç­ï¼‹å‘¨æœ«åŒä¼‘çš„æ—¶é—´ï¼Œæ”¶è·è¿˜æ˜¯æŒºå¤§çš„ã€‚<br>ä¸è¿‡ç”±äºæœ¬ç« ä¹ é¢˜é‡æœ‰äº›å¤§ï¼Œè€Œä¸”ä¸€å¼€å§‹åƒä¸€äº›åŸºç¡€çš„è¿‡ç¨‹<code>put</code>ã€<code>get</code>éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥è‡ªå·±åªæ˜¯éšä¾¿å†™å†™ï¼Œæ²¡æ³•è¿è¡Œï¼Œæ‰€ä»¥å‰é¢çœ‹çš„ä¸å¥½ï¼Œè¿™ç« ä¹ é¢˜ä¹‹ç®€çš„è”ç³»å¾ˆç´§å¯†ï¼Œå‰é¢æ²¡åšå¥½ï¼Œåé¢åªèƒ½å‘µå‘µäº†ã€‚</p>
<p>æœ‰ä¸€æ®µæ—¶é—´è®©è¿™äº›é¢˜å¼„çš„å¾ˆçƒ¦ï¼Œä¸€ç‚¹ä¸æƒ³åšï¼Œè¿˜å¥½æˆ‘è¿™æ—¶å€™åˆ†æ•£äº†ä¸‹æ³¨æ„åŠ›ï¼Œçœ‹äº†äº›å…¶ä»–çš„ä¸œè¥¿ï¼Œåƒjavaé›†åˆæ¡†æ¶çš„ä¸€äº›ä»£ç ã€the little schemerç¬¬ä¹ç« çš„Yç®—å­æ¨å¯¼ï¼ˆè™½ç„¶è¿˜æ²¡çœ‹æ‡‚ï¼‰ï¼Œç”±äºå¸¦ç€æ”¾æ¾å¿ƒæƒ…çœ‹çš„ï¼Œé‡åˆ°ä¸æ‡‚çš„åœ°æ–¹æˆ‘å°±è·³è¿‡å»ï¼Œæ²¡æœ‰æ·±ç©¶ï¼ŒåŸºæœ¬ä¸Šè¾¾åˆ°äº†æ”¾æ¾çš„ç›®çš„ã€‚ä¹‹ååœ¨ç½‘ä¸ŠæŠŠé‚£äº›åŸºç¡€çš„è¿‡ç¨‹éƒ½å®ç°å‡ºæ¥ï¼Œå†å»åšé‚£äº›ä¹ é¢˜å°±é¡ºå¤šäº†ã€‚</p>
<p>è¿™ä¸€ç« çš„å†…å®¹ï¼Œæˆ‘ä¹‹å‰å¤šå¤šå°‘å°‘äº†è§£è¿‡ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†å†…å®¹çœ‹èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒé¡ºç•…çš„ï¼Œå°±æ˜¯ä¹ é¢˜å¤šäº†ç‚¹ï¼Œç”±äºå½“åˆç»™è‡ªå·±å®šçš„ç›®æ ‡ï¼Œæ‰€ä»¥è¿˜æ˜¯æ…¢æ…¢çš„æŠŠæ‰€æœ‰ä¹ é¢˜ï¼ˆæœ‰ç†å‡½æ•°çš„é™¤å¤–ï¼‰åšäº†ä¸€éã€‚è¿˜æ˜¯ä¸€ç‚¹å°±æ˜¯åšåé¢çš„é¢˜æ—¶ï¼Œå¿˜äº†å‰é¢çš„çŸ¥è¯†ç‚¹ï¼Œéœ€è¦å¹³æ—¶æ²¡äº‹å¤šå»ç¿»ç¿»ï¼Œæ¯•ç«Ÿç°åœ¨è¿˜è¾¾ä¸åˆ°çƒ‚ç†Ÿäºå¿ƒçš„åœ°æ­¥ã€‚</p>
<p>ä¸‹å‘¨ä¸€å°ç»„å†…å†è¿‡ä¸€éï¼Œå‘ç€ç¬¬ä¸‰ç« è¿›å†›äº†ã€‚â›½ï¸</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åˆ°ä»Šå¤©ä¸ºæ­¢ç»ˆäºæŠŠç¬¬äºŒç« çœ‹å®Œäº†ï¼Œç›¸æ¯”äºç¬¬ä¸€ç« ï¼Œæ„Ÿè§‰éš¾ç‚¹å°‘äº†äº›ï¼Œè¿™ç« ä¸»è¦æ˜¯é€šè¿‡å¤§é‡ä¾‹å­ï¼ˆä¸»è¦æœ‰å›¾å½¢è¯­è¨€ã€åŒºé—´è¿ç®—ã€ç¬¦å·æ±‚å¯¼ã€é›†åˆçš„è¡¨ç¤ºã€é€šç”¨å‹ç®—æœ¯è¿ç®—ï¼‰æ¥ç†Ÿæ‚‰æ„é€ æ•°æ®æŠ½è±¡çš„ç›¸å…³æŠ€èƒ½ã€‚ä¸‹é¢æ¥å›é¡¾æ€»ç»“ä¸€ä¸‹ç¬¬äºŒç« ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ•°æ®æŠ½è±¡çš„æ„ä¹‰&quot;&gt;&lt;a href=&quot;#æ•°æ®æŠ½
    
    </summary>
    
      <category term="ç ”ä¹ ç»å…¸" scheme="http://liujiacai.net/categories/%E7%A0%94%E4%B9%A0%E7%BB%8F%E5%85%B8/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>Java LinkedHashMapæºç è§£æ</title>
    <link href="http://liujiacai.net/blog/2015/09/12/java-linkedhashmap/"/>
    <id>http://liujiacai.net/blog/2015/09/12/java-linkedhashmap/</id>
    <published>2015-09-12T10:31:12.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šå‘¨æŠŠ<a href="/blog/2015/09/03/java-hashmap/">HashMap</a>ã€<a href="/blog/2015/09/04/java-treemap/">TreeMap</a>è¿™ä¸¤ä¸ªMapä½“ç³»ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ç±»ä»‹ç»å®Œäº†ï¼Œå¤§å®¶åº”è¯¥ä¹Ÿèƒ½ä½“ä¼šåˆ°ï¼Œå¦‚æœè¯¥ç±»æ‰€å¯¹åº”çš„æ•°æ®ç»“æ„ä¸ç®—æ³•æŒæ¡å¥½äº†ï¼Œå†çœ‹è¿™äº›ç±»çš„æºç çœŸæ˜¯å¤ªç®€å•ä¸è¿‡äº†ã€‚</p>
<p>å…¶æ¬¡ï¼Œæˆ‘å¸Œæœ›å¤§å®¶èƒ½å¤Ÿè§¦ç±»æ—é€šï¼Œæ¯”å¦‚æˆ‘ä»¬å·²ç»æŒæ¡äº†HashMapçš„åŸç†ï¼Œæˆ‘ä»¬å¯ä»¥æ¨çŸ¥<a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html" target="_blank" rel="external">HashSet</a>çš„å†…éƒ¨å®ç°</p>
<blockquote>
<p>HashSet å†…éƒ¨ç”¨ä¸€ä¸ªHashMapå¯¹è±¡å­˜å‚¨æ•°æ®ï¼Œæ›´å…·ä½“äº›ï¼Œåªç”¨åˆ°äº†keyï¼Œvalueå…¨éƒ¨ä¸ºä¸€dummyå¯¹è±¡ã€‚</p>
</blockquote>
<p>HashSetè¿™ä¸ªç±»å¤ªç®€å•äº†ï¼Œæˆ‘ä¸æ‰“ç®—å•ç‹¬å†™æ–‡ç« ä»‹ç»ã€‚ä»Šå¤©ä»‹ç»ä¸ªæ¯”è¾ƒå®ç”¨çš„ç±»â€”â€”<a href="http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html" target="_blank" rel="external">LinkedHashMap</a>ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç åˆ†æåŸºäº<a href="http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html" target="_blank" rel="external">Oracle JDK 1.7.0_71</a>ï¼Œè¯·çŸ¥æ‚‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version &quot;1.7.0_71&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_71-b14)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="ç­¾å"><a href="#ç­¾å" class="headerlink" title="ç­¾å"></a>ç­¾å</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public class LinkedHashMap&lt;K,V&gt;</div><div class="line">       extends HashMap&lt;K,V&gt;</div><div class="line">       implements Map&lt;K,V&gt;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒLinkedHashMapæ˜¯HashMapçš„ä¸€å­ç±»ï¼Œå®ƒæ ¹æ®è‡ªèº«çš„ç‰¹æ€§ä¿®æ”¹äº†HashMapçš„å†…éƒ¨æŸäº›æ–¹æ³•çš„å®ç°ï¼Œè¦æƒ³çŸ¥é“LinkedHashMapå…·ä½“ä¿®æ”¹äº†å“ªäº›æ–¹æ³•ï¼Œå°±éœ€è¦äº†è§£LinkedHashMapçš„è®¾è®¡åŸç†äº†ã€‚</p>
<h2 id="è®¾è®¡åŸç†"><a href="#è®¾è®¡åŸç†" class="headerlink" title="è®¾è®¡åŸç†"></a>è®¾è®¡åŸç†</h2><h3 id="åŒå‘é“¾è¡¨"><a href="#åŒå‘é“¾è¡¨" class="headerlink" title="åŒå‘é“¾è¡¨"></a>åŒå‘é“¾è¡¨</h3><p>LinkedHashMapæ˜¯keyé”®æœ‰åºçš„HashMapçš„ä¸€ç§å®ç°ã€‚å®ƒé™¤äº†ä½¿ç”¨å“ˆå¸Œè¡¨è¿™ä¸ªæ•°æ®ç»“æ„ï¼Œä½¿ç”¨åŒå‘é“¾è¡¨æ¥ä¿è¯keyçš„é¡ºåº</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2WFoafXXXXXaUXXXXXXXXXXXX_!!581166664.gif" alt="åŒå‘é“¾è¡¨"><br></center><br>åŒå‘é“¾è¡¨ç®—æ˜¯ä¸ªå¾ˆå¸¸è§çš„æ•°æ®ç»“æ„ï¼Œä¸Šå›¾ä¸­çš„å¤´èŠ‚ç‚¹çš„prevã€å°¾èŠ‚ç‚¹çš„nextæŒ‡å‘nullï¼ŒåŒå‘é“¾è¡¨è¿˜æœ‰ä¸€ç§å˜ç§ï¼Œè§ä¸‹å›¾</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB27MP7fXXXXXb6XXXXXXXXXXXX_!!581166664.png" alt="ç¯å‹åŒå‘é“¾è¡¨"><br></center><br>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ç§é“¾è¡¨æŠŠé¦–å°¾èŠ‚ç‚¹ç›¸è¿ï¼Œå½¢æˆä¸€ä¸ªç¯ã€‚</p>
<p>LinkedHashMapä¸­é‡‡ç”¨çš„è¿™ç§<code>ç¯å‹åŒå‘é“¾è¡¨</code>ï¼Œç¯å‹åŒå‘é“¾è¡¨çš„ç”¨é€”æ¯”è¾ƒå¤šï¼Œæ„Ÿå…´è¶£å¯ä»¥çœ‹è¿™é‡Œï¼š</p>
<ul>
<li><a href="http://stackoverflow.com/questions/3589772/why-exactly-do-we-need-a-circular-linked-list-singly-or-doubly-data-structur" target="_blank" rel="external">http://stackoverflow.com/questions/3589772/why-exactly-do-we-need-a-circular-linked-list-singly-or-doubly-data-structur</a></li>
</ul>
<p>åŒå‘é“¾è¡¨è¿™ç§æ•°æ®ç»“æ„ï¼Œæœ€å…³é”®çš„æ˜¯ä¿è¯åœ¨å¢åŠ èŠ‚ç‚¹ã€åˆ é™¤èŠ‚ç‚¹æ—¶ä¸è¦æ–­é“¾ï¼Œåé¢åœ¨åˆ†æLinkedHashMapå…·ä½“ä»£ç æ—¶ä¼šå…·ä½“ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚</p>
<h3 id="LinkedHashMap-ç‰¹ç‚¹"><a href="#LinkedHashMap-ç‰¹ç‚¹" class="headerlink" title="LinkedHashMap ç‰¹ç‚¹"></a>LinkedHashMap ç‰¹ç‚¹</h3><p>ä¸€èˆ¬æ¥è¯´ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨çš„Mapä¸­çš„keyæ— åºï¼Œé€‰æ‹©HashMapï¼›å¦‚æœè¦æ±‚keyæœ‰åºï¼Œåˆ™é€‰æ‹©TreeMapã€‚<br>ä½†æ˜¯é€‰æ‹©TreeMapå°±ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Œå› ä¸ºTreeMapçš„getæ“ä½œçš„æ—¶é—´å¤æ‚åº¦æ˜¯<code>O(log(n))</code>çš„ï¼Œç›¸æ¯”äºHashMapçš„<code>O(1)</code>è¿˜æ˜¯å·®ä¸å°‘çš„ï¼ŒLinkedHashMapçš„å‡ºç°å°±æ˜¯ä¸ºäº†å¹³è¡¡è¿™äº›å› ç´ ï¼Œä½¿å¾—</p>
<blockquote>
<p>èƒ½å¤Ÿä»¥<code>O(1)</code>æ—¶é—´å¤æ‚åº¦å¢åŠ æŸ¥æ‰¾å…ƒç´ ï¼Œåˆèƒ½å¤Ÿä¿è¯keyçš„æœ‰åºæ€§</p>
</blockquote>
<p>æ­¤å¤–ï¼ŒLinkedHashMapæä¾›äº†ä¸¤ç§keyçš„é¡ºåºï¼š</p>
<ul>
<li>è®¿é—®é¡ºåºï¼ˆaccess orderï¼‰ã€‚éå¸¸å®ç”¨ï¼Œå¯ä»¥ä½¿ç”¨è¿™ç§é¡ºåºå®ç°LRUï¼ˆLeast Recently Usedï¼‰ç¼“å­˜</li>
<li>æ’å…¥é¡ºåºï¼ˆinsertion ordeï¼‰ã€‚åŒä¸€keyçš„å¤šæ¬¡æ’å…¥ï¼Œå¹¶ä¸ä¼šå½±å“å…¶é¡ºåº</li>
</ul>
<h2 id="æºç åˆ†æ"><a href="#æºç åˆ†æ" class="headerlink" title="æºç åˆ†æ"></a>æºç åˆ†æ</h2><p>é¦–å…ˆæ‰“å¼€eclipseçš„outlineé¢ç‰ˆçœ‹çœ‹LinkedHashMapé‡Œé¢æœ‰é‚£äº›æˆå‘˜</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i1/581166664/TB25aL6fXXXXXcGXXXXXXXXXXXX_!!581166664.png" alt="LinkedHashMapç»“æ„"><br></center><br>å¯ä»¥çœ‹åˆ°ï¼Œç”±äºLinkedHashMapç»§æ‰¿è‡ªHashMapï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†çš„æ–¹æ³•éƒ½æ˜¯æ ¹æ®<code>keyçš„æœ‰åºæ€§</code>è€Œé‡å†™äº†HashMapä¸­çš„éƒ¨åˆ†æ–¹æ³•ã€‚</p>
<h3 id="æ„é€ å‡½æ•°"><a href="#æ„é€ å‡½æ•°" class="headerlink" title="æ„é€ å‡½æ•°"></a>æ„é€ å‡½æ•°</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">//accessOrderä¸ºtrueè¡¨ç¤ºè¯¥LinkedHashMapçš„keyä¸ºè®¿é—®é¡ºåº</div><div class="line">//accessOrderä¸ºfalseè¡¨ç¤ºè¯¥LinkedHashMapçš„keyä¸ºæ’å…¥é¡ºåº</div><div class="line">private final boolean accessOrder;</div><div class="line"></div><div class="line">public LinkedHashMap(int initialCapacity, float loadFactor) &#123;</div><div class="line">    super(initialCapacity, loadFactor);</div><div class="line">    //é»˜è®¤ä¸ºfalseï¼Œä¹Ÿå°±æ˜¯æ’å…¥é¡ºåº</div><div class="line">    accessOrder = false;</div><div class="line">&#125;</div><div class="line">public LinkedHashMap(int initialCapacity) &#123;</div><div class="line">    super(initialCapacity);</div><div class="line">    accessOrder = false;</div><div class="line">&#125;</div><div class="line">public LinkedHashMap() &#123;</div><div class="line">    super();</div><div class="line">    accessOrder = false;</div><div class="line">&#125;</div><div class="line">public LinkedHashMap(Map&lt;? extends K, ? extends V&gt; m) &#123;</div><div class="line">    super(m);</div><div class="line">    accessOrder = false;</div><div class="line">&#125;</div><div class="line">public LinkedHashMap(int initialCapacity,</div><div class="line">                     float loadFactor,</div><div class="line">                     boolean accessOrder) &#123;</div><div class="line">    super(initialCapacity, loadFactor);</div><div class="line">    this.accessOrder = accessOrder;</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Called by superclass constructors and pseudoconstructors (clone,</div><div class="line"> * readObject) before any entries are inserted into the map.  Initializes</div><div class="line"> * the chain.</div><div class="line"> */</div><div class="line">@Override</div><div class="line">void init() &#123;</div><div class="line">    header = new Entry&lt;&gt;(-1, null, null, null);</div><div class="line">    //é€šè¿‡è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼ŒLinkedHashMapé‡‡ç”¨çš„æ˜¯ç¯å‹çš„åŒå‘é“¾è¡¨</div><div class="line">    header.before = header.after = header;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="LinkedHashMap-Entry"><a href="#LinkedHashMap-Entry" class="headerlink" title="LinkedHashMap.Entry"></a>LinkedHashMap.Entry</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line">private static class Entry&lt;K,V&gt; extends HashMap.Entry&lt;K,V&gt; &#123;</div><div class="line">    // These fields comprise the doubly linked list used for iteration.</div><div class="line">    //æ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘å‰ç»§èŠ‚ç‚¹ä¸åç»§èŠ‚ç‚¹</div><div class="line">    Entry&lt;K,V&gt; before, after;</div><div class="line"></div><div class="line">    Entry(int hash, K key, V value, HashMap.Entry&lt;K,V&gt; next) &#123;</div><div class="line">        super(hash, key, value, next);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Removes this entry from the linked list.</div><div class="line">     */</div><div class="line">    //åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œéœ€è¦æŠŠ</div><div class="line">    //1. å‰ç»§èŠ‚ç‚¹çš„åç»§æŒ‡é’ˆ æŒ‡å‘ è¦åˆ é™¤èŠ‚ç‚¹çš„åç»§èŠ‚ç‚¹</div><div class="line">    //2. åç»§èŠ‚ç‚¹çš„å‰ç»§æŒ‡é’ˆ æŒ‡å‘ è¦åˆ é™¤èŠ‚ç‚¹çš„å‰ç»§èŠ‚ç‚¹</div><div class="line">    private void remove() &#123;</div><div class="line">        before.after = after;</div><div class="line">        after.before = before;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Inserts this entry before the specified existing entry in the list.</div><div class="line">     */</div><div class="line">    //åœ¨æŸèŠ‚ç‚¹å‰æ’å…¥èŠ‚ç‚¹</div><div class="line">    private void addBefore(Entry&lt;K,V&gt; existingEntry) &#123;</div><div class="line">        after  = existingEntry;</div><div class="line">        before = existingEntry.before;</div><div class="line">        before.after = this;</div><div class="line">        after.before = this;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * This method is invoked by the superclass whenever the value</div><div class="line">     * of a pre-existing entry is read by Map.get or modified by Map.set.</div><div class="line">     * If the enclosing Map is access-ordered, it moves the entry</div><div class="line">     * to the end of the list; otherwise, it does nothing.</div><div class="line">     */</div><div class="line">    void recordAccess(HashMap&lt;K,V&gt; m) &#123;</div><div class="line">        LinkedHashMap&lt;K,V&gt; lm = (LinkedHashMap&lt;K,V&gt;)m;</div><div class="line">        // å¦‚æœéœ€è¦keyçš„è®¿é—®é¡ºåºï¼Œéœ€è¦æŠŠ</div><div class="line">        // å½“å‰è®¿é—®çš„èŠ‚ç‚¹åˆ é™¤ï¼Œå¹¶æŠŠå®ƒæ’å…¥åˆ°åŒå‘é“¾è¡¨çš„èµ·å§‹ä½ç½®</div><div class="line">        if (lm.accessOrder) &#123;</div><div class="line">            lm.modCount++;</div><div class="line">            remove();</div><div class="line">            addBefore(lm.header);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    void recordRemoval(HashMap&lt;K,V&gt; m) &#123;</div><div class="line">        remove();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸ºäº†æ›´å½¢è±¡è¡¨ç¤ºåŒå‘é“¾è¡¨æ˜¯å¦‚ä½•åˆ é™¤ã€å¢åŠ èŠ‚ç‚¹ï¼Œä¸‹é¢ç”¨ä»£ç åŠ å›¾ç¤ºçš„æ–¹å¼</p>
<h4 id="åˆ é™¤èŠ‚ç‚¹"><a href="#åˆ é™¤èŠ‚ç‚¹" class="headerlink" title="åˆ é™¤èŠ‚ç‚¹"></a>åˆ é™¤èŠ‚ç‚¹</h4><p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2cA__fXXXXXbQXXXXXXXXXXXX_!!581166664.jpg" alt="åˆ é™¤èŠ‚ç‚¹"><br></center><br>ä¸Šå›¾ä¸­ï¼Œåˆ é™¤çš„æ˜¯bèŠ‚ç‚¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">private void remove() &#123;</div><div class="line">    before.after = after;  //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 1</div><div class="line">    after.before = before; //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 3</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="å¢åŠ èŠ‚ç‚¹"><a href="#å¢åŠ èŠ‚ç‚¹" class="headerlink" title="å¢åŠ èŠ‚ç‚¹"></a>å¢åŠ èŠ‚ç‚¹</h4><p><center><br>    <img src="https://img.alicdn.com/imgextra/i2/581166664/TB2lqv0fXXXXXaeXpXXXXXXXXXX_!!581166664.jpg" alt="å¢åŠ èŠ‚ç‚¹"><br></center><br>ä¸Šå›¾ä¸­çš„cèŠ‚ç‚¹ç›¸å½“äºä¸‹é¢ä»£ç ä¸­çš„existingEntryï¼Œè¦æ’å…¥çš„æ˜¯xèŠ‚ç‚¹<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">private void addBefore(Entry&lt;K,V&gt; existingEntry) &#123;</div><div class="line">    after  = existingEntry;         //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 1</div><div class="line">    before = existingEntry.before;  //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 3</div><div class="line">    before.after = this;            //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 4</div><div class="line">    after.before = this;            //ç›¸å½“äºä¸Šå›¾ä¸­çš„æ“ä½œ 2</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>çŸ¥é“äº†å¢åŠ èŠ‚ç‚¹çš„åŸç†ï¼Œä¸‹é¢çœ‹çœ‹LinkedHashMapçš„ä»£ç æ˜¯æ€ä¹ˆå®ç°putæ–¹æ³•çš„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * This override alters behavior of superclass put method. It causes newly</div><div class="line"> * allocated entry to get inserted at the end of the linked list and</div><div class="line"> * removes the eldest entry if appropriate.</div><div class="line"> */</div><div class="line">void addEntry(int hash, K key, V value, int bucketIndex) &#123;</div><div class="line">    super.addEntry(hash, key, value, bucketIndex);</div><div class="line"></div><div class="line">    // Remove eldest entry if instructed</div><div class="line">    Entry&lt;K,V&gt; eldest = header.after;</div><div class="line">    //å¦‚æœæœ‰å¿…è¦ç§»é™¤æœ€è€çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆå°±ç§»é™¤ã€‚LinkedHashMapé»˜è®¤removeEldestEntryæ€»æ˜¯è¿”å›false</div><div class="line">    //ä¹Ÿå°±æ˜¯è¿™é‡Œifé‡Œé¢çš„è¯­å¥æ°¸è¿œä¸ä¼šæ‰§è¡Œ</div><div class="line">    //è¿™é‡ŒremoveEldestEntryä¸»è¦æ˜¯ç»™LinkedHashMapçš„å­ç±»ç•™ä¸‹çš„ä¸€ä¸ªé’©å­</div><div class="line">    //å­ç±»å®Œå…¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é‡å†™removeEldestEntryï¼Œåé¢æˆ‘ä¼šä¸¾ä¸ªç°å®ä¸­çš„ä¾‹å­ğŸŒ°</div><div class="line">    if (removeEldestEntry(eldest)) &#123;</div><div class="line">        removeEntryForKey(eldest.key);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * This override differs from addEntry in that it doesn&apos;t resize the</div><div class="line"> * table or remove the eldest entry.</div><div class="line"> */</div><div class="line">void createEntry(int hash, K key, V value, int bucketIndex) &#123;</div><div class="line">    HashMap.Entry&lt;K,V&gt; old = table[bucketIndex];</div><div class="line">    Entry&lt;K,V&gt; e = new Entry&lt;&gt;(hash, key, value, old);</div><div class="line">    table[bucketIndex] = e;</div><div class="line">    //è¿™é‡ŒæŠŠæ–°å¢çš„EntryåŠ åˆ°äº†åŒå‘é“¾è¡¨çš„headerçš„å‰é¢ï¼Œæˆä¸ºæ–°çš„header</div><div class="line">    e.addBefore(header);</div><div class="line">    size++;</div><div class="line">&#125;   </div><div class="line">/**</div><div class="line"> * Returns &lt;tt&gt;true&lt;/tt&gt; if this map should remove its eldest entry.</div><div class="line"> * This method is invoked by &lt;tt&gt;put&lt;/tt&gt; and &lt;tt&gt;putAll&lt;/tt&gt; after</div><div class="line"> * inserting a new entry into the map.  It provides the implementor</div><div class="line"> * with the opportunity to remove the eldest entry each time a new one</div><div class="line"> * is added.  This is useful if the map represents a cache: it allows</div><div class="line"> * the map to reduce memory consumption by deleting stale entries.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;Sample use: this override will allow the map to grow up to 100</div><div class="line"> * entries and then delete the eldest entry each time a new entry is</div><div class="line"> * added, maintaining a steady state of 100 entries.</div><div class="line"> * &lt;pre&gt;</div><div class="line"> *     private static final int MAX_ENTRIES = 100;</div><div class="line"> *</div><div class="line"> *     protected boolean removeEldestEntry(Map.Entry eldest) &#123;</div><div class="line"> *        return size() &gt; MAX_ENTRIES;</div><div class="line"> *     &#125;</div><div class="line"> * &lt;/pre&gt;</div><div class="line"> *</div><div class="line"> * &lt;p&gt;This method typically does not modify the map in any way,</div><div class="line"> * instead allowing the map to modify itself as directed by its</div><div class="line"> * return value.  It &lt;i&gt;is&lt;/i&gt; permitted for this method to modify</div><div class="line"> * the map directly, but if it does so, it &lt;i&gt;must&lt;/i&gt; return</div><div class="line"> * &lt;tt&gt;false&lt;/tt&gt; (indicating that the map should not attempt any</div><div class="line"> * further modification).  The effects of returning &lt;tt&gt;true&lt;/tt&gt;</div><div class="line"> * after modifying the map from within this method are unspecified.</div><div class="line"> *</div><div class="line"> * &lt;p&gt;This implementation merely returns &lt;tt&gt;false&lt;/tt&gt; (so that this</div><div class="line"> * map acts like a normal map - the eldest element is never removed).</div><div class="line"> *</div><div class="line"> * @param    eldest The least recently inserted entry in the map, or if</div><div class="line"> *           this is an access-ordered map, the least recently accessed</div><div class="line"> *           entry.  This is the entry that will be removed it this</div><div class="line"> *           method returns &lt;tt&gt;true&lt;/tt&gt;.  If the map was empty prior</div><div class="line"> *           to the &lt;tt&gt;put&lt;/tt&gt; or &lt;tt&gt;putAll&lt;/tt&gt; invocation resulting</div><div class="line"> *           in this invocation, this will be the entry that was just</div><div class="line"> *           inserted; in other words, if the map contains a single</div><div class="line"> *           entry, the eldest entry is also the newest.</div><div class="line"> * @return   &lt;tt&gt;true&lt;/tt&gt; if the eldest entry should be removed</div><div class="line"> *           from the map; &lt;tt&gt;false&lt;/tt&gt; if it should be retained.</div><div class="line"> */</div><div class="line">protected boolean removeEldestEntry(Map.Entry&lt;K,V&gt; eldest) &#123;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢æ˜¯LinkedHashMapä¸­é‡å†™äº†HashMapçš„ä¸¤ä¸ªæ–¹æ³•ï¼Œå½“è°ƒç”¨putæ—¶æ·»åŠ Entryï¼ˆæ–°å¢Entryä¹‹å‰ä¸å­˜åœ¨ï¼‰æ•´ä¸ªæ–¹æ³•è°ƒç”¨é“¾æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p><code>LinkedHashMap.put</code> -&gt; <code>LinkedHashMap.addEntry</code> -&gt;<br><code>HashMap.addEntry</code> -&gt; <code>LinkedHashMap.createEntry</code></p>
</blockquote>
<p>æœ‰äº†è¿™ä¸ªè°ƒç”¨é“¾ï¼Œå†ç»“åˆä¸Šé¢createEntryæ–¹æ³•ä¸­çš„æ³¨é‡Šï¼Œå°±å¯ä»¥æ˜ç™½å¦‚ä½•åœ¨æ·»åŠ Entryä¿è¯åŒå‘é“¾è¡¨ä¸æ–­é“¾çš„äº†ã€‚</p>
<h4 id="å®æˆ˜ï¼šLRUç¼“å­˜"><a href="#å®æˆ˜ï¼šLRUç¼“å­˜" class="headerlink" title="å®æˆ˜ï¼šLRUç¼“å­˜"></a>å®æˆ˜ï¼šLRUç¼“å­˜</h4><p>ä¸Šé¢å·²ç»ä»‹ç»äº†ï¼Œåˆ©ç”¨è®¿é—®é¡ºåºè¿™ç§æ–¹å¼å¯ä»¥å®ç°LRUç¼“å­˜ï¼Œæ­£å¥½æœ€è¿‘åœ¨ç”¨flumeå‘hadoopä¼ æ•°æ®ï¼Œå‘ç°é‡Œé¢hdfs sinké‡Œé¢å°±ç”¨åˆ°äº†è¿™ç§æ€æƒ³ã€‚</p>
<p>å¦‚æœä½ ä¸äº†è§£flumeã€hdfsã€sinkç­‰è¿™äº›æ¦‚å¿µï¼Œä¹Ÿä¸è¦ç´§ï¼Œä¹Ÿä¸ä¼šå½±å“é˜…è¯»ä¸‹é¢çš„ä»£ç ï¼Œç›¸ä¿¡æˆ‘ğŸ˜Šã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> * Extended Java LinkedHashMap for open file handle LRU queue.</div><div class="line"> * We want to clear the oldest file handle if there are too many open ones.</div><div class="line"> */</div><div class="line">private static class WriterLinkedHashMap</div><div class="line">    extends LinkedHashMap&lt;String, BucketWriter&gt; &#123;</div><div class="line"></div><div class="line">  private final int maxOpenFiles;</div><div class="line"></div><div class="line">  public WriterLinkedHashMap(int maxOpenFiles) &#123;</div><div class="line">    //è¿™é‡Œçš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºtrueï¼Œè¡¨ç¤ºkeyé»˜è®¤çš„é¡ºåºä¸ºè®¿é—®é¡ºåºï¼Œè€Œä¸æ˜¯æ’å…¥é¡ºåº</div><div class="line">    super(16, 0.75f, true); // stock initial capacity/load, access ordering</div><div class="line">    this.maxOpenFiles = maxOpenFiles;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  @Override</div><div class="line">  protected boolean removeEldestEntry(Entry&lt;String, BucketWriter&gt; eldest) &#123;</div><div class="line">    if (size() &gt; maxOpenFiles) &#123;</div><div class="line">      // If we have more that max open files, then close the last one and</div><div class="line">      // return true</div><div class="line">      try &#123;</div><div class="line">        eldest.getValue().close();</div><div class="line">      &#125; catch (IOException e) &#123;</div><div class="line">        LOG.warn(eldest.getKey().toString(), e);</div><div class="line">      &#125; catch (InterruptedException e) &#123;</div><div class="line">        LOG.warn(eldest.getKey().toString(), e);</div><div class="line">        Thread.currentThread().interrupt();</div><div class="line">      &#125;</div><div class="line">      return true;</div><div class="line">    &#125; else &#123;</div><div class="line">      return false;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„<code>WriterLinkedHashMap</code>ä¸»è¦æ˜¯é‡å†™äº†removeEldestEntryæ–¹æ³•ï¼Œæˆ‘ä»¬ä¸Šé¢ä»‹ç»äº†ï¼Œåœ¨LinkedHashMapä¸­ï¼Œè¿™ä¸ªæ–¹æ³•æ€»æ˜¯è¿”å›falseï¼Œåœ¨è¿™é‡Œè®¾å®šäº†ä¸€ä¸ªé˜ˆå€¼maxOpenFilesï¼Œå¦‚æœæ‰“å¼€çš„æ–‡ä»¶æ•°è¶…è¿‡äº†è¿™ä¸ªé˜ˆå€¼ï¼Œå°±è¿”å›trueï¼Œå³æŠŠä¹‹å‰æœ€ä¸ç»å¸¸è®¿é—®çš„èŠ‚ç‚¹ç»™åˆ é™¤æ‰ï¼Œè¾¾åˆ°é‡Šæ”¾èµ„æºçš„æ•ˆæœã€‚</p>
<h3 id="æ›´é«˜æ•ˆçš„LinkedHashIterator"><a href="#æ›´é«˜æ•ˆçš„LinkedHashIterator" class="headerlink" title="æ›´é«˜æ•ˆçš„LinkedHashIterator"></a>æ›´é«˜æ•ˆçš„LinkedHashIterator</h3><p>ç”±äºå…ƒç´ ä¹‹é—´ç”¨åŒå‘é“¾è¡¨è¿æ¥èµ·æ¥äº†ï¼Œæ‰€ä»¥åœ¨éå†å…ƒç´ æ—¶åªéœ€éå†åŒå‘é“¾è¡¨å³å¯ï¼Œè¿™æ¯”HashMapä¸­çš„éå†æ–¹å¼è¦é«˜æ•ˆã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">private abstract class LinkedHashIterator&lt;T&gt; implements Iterator&lt;T&gt; &#123;</div><div class="line">    Entry&lt;K,V&gt; nextEntry    = header.after;</div><div class="line">    Entry&lt;K,V&gt; lastReturned = null;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * The modCount value that the iterator believes that the backing</div><div class="line">     * List should have.  If this expectation is violated, the iterator</div><div class="line">     * has detected concurrent modification.</div><div class="line">     */</div><div class="line">    int expectedModCount = modCount;</div><div class="line">    //ç”±äºé‡‡ç”¨ç¯å‹åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥å¯ä»¥ç”¨header.after == header æ¥åˆ¤æ–­åŒå‘é“¾è¡¨æ˜¯å¦ä¸ºç©º</div><div class="line">    public boolean hasNext() &#123;</div><div class="line">        return nextEntry != header;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void remove() &#123;</div><div class="line">        if (lastReturned == null)</div><div class="line">            throw new IllegalStateException();</div><div class="line">        if (modCount != expectedModCount)</div><div class="line">            throw new ConcurrentModificationException();</div><div class="line"></div><div class="line">        LinkedHashMap.this.remove(lastReturned.key);</div><div class="line">        lastReturned = null;</div><div class="line">        expectedModCount = modCount;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Entry&lt;K,V&gt; nextEntry() &#123;</div><div class="line">        if (modCount != expectedModCount)</div><div class="line">            throw new ConcurrentModificationException();</div><div class="line">        if (nextEntry == header)</div><div class="line">            throw new NoSuchElementException();</div><div class="line">        Entry&lt;K,V&gt; e = lastReturned = nextEntry;</div><div class="line">        //åœ¨è®¿é—®ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œç›´æ¥ä½¿ç”¨å½“å‰èŠ‚ç‚¹çš„åç»§æŒ‡é’ˆå³å¯</div><div class="line">        nextEntry = e.after;</div><div class="line">        return e;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>é™¤äº†LinkedHashIteratoråˆ©ç”¨äº†åŒå‘é“¾è¡¨éå†çš„ä¼˜åŠ¿å¤–ï¼Œä¸‹é¢çš„ä¸¤ä¸ªæ–¹æ³•ä¹Ÿåˆ©ç”¨è¿™ä¸ªä¼˜åŠ¿åŠ é€Ÿæ‰§è¡Œã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Transfers all entries to new table array.  This method is called</div><div class="line"> * by superclass resize.  It is overridden for performance, as it is</div><div class="line"> * faster to iterate using our linked list.</div><div class="line"> */</div><div class="line">@Override</div><div class="line">void transfer(HashMap.Entry[] newTable, boolean rehash) &#123;</div><div class="line">    int newCapacity = newTable.length;</div><div class="line">    for (Entry&lt;K,V&gt; e = header.after; e != header; e = e.after) &#123;</div><div class="line">        if (rehash)</div><div class="line">            e.hash = (e.key == null) ? 0 : hash(e.key);</div><div class="line">        int index = indexFor(e.hash, newCapacity);</div><div class="line">        e.next = newTable[index];</div><div class="line">        newTable[index] = e;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">/**</div><div class="line"> * Returns &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</div><div class="line"> * specified value.</div><div class="line"> *</div><div class="line"> * @param value value whose presence in this map is to be tested</div><div class="line"> * @return &lt;tt&gt;true&lt;/tt&gt; if this map maps one or more keys to the</div><div class="line"> *         specified value</div><div class="line"> */</div><div class="line">public boolean containsValue(Object value) &#123;</div><div class="line">    // Overridden to take advantage of faster iterator</div><div class="line">    if (value==null) &#123;</div><div class="line">        for (Entry e = header.after; e != header; e = e.after)</div><div class="line">            if (e.value==null)</div><div class="line">                return true;</div><div class="line">    &#125; else &#123;</div><div class="line">        for (Entry e = header.after; e != header; e = e.after)</div><div class="line">            if (value.equals(e.value))</div><div class="line">                return true;</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡è¿™æ¬¡åˆ†æLinkedHashMapï¼Œæˆ‘å‘ç°JDKé‡Œé¢çš„ç±»è®¾è®¡ç¡®å®å·§å¦™ï¼Œçˆ¶ç±»ä¸­å¾ˆå¤šä¸ºç©ºçš„æ–¹æ³•ï¼Œçœ‹ä¼¼æ— ç”¨ï¼Œå…¶å®æ˜¯ä¸ºå­ç±»ç•™çš„ä¸€ä¸ªé’©å­ï¼Œå­ç±»å¯ä»¥æ ¹æ®éœ€è¦é‡å†™è¿™ä¸ªæ–¹æ³•ï¼ŒåƒLinkedHashMapå°±é‡å†™äº†<code>init</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨HashMapä¸­çš„å®ç°ä¸ºç©ºã€‚</p>
<p>å…¶æ¬¡æˆ‘è¿˜æƒ³å¼ºè°ƒä¸‹ä¸€äº›åŸºç¡€æ•°æ®ç»“æ„ä¸ç®—æ³•çš„é‡è¦æ€§ï¼Œè¯­è¨€ç°åœ¨å¾ˆå¤šï¼Œç«çš„ä¹Ÿå¤šï¼Œæˆ‘ä»¬ä¸å¯èƒ½ä¸€ä¸€å»å­¦ä¹ ï¼Œè¯­æ³•è¯´ç™½äº†å°±æ˜¯ä¸€ç³»åˆ—è§„åˆ™ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯è¯­æ³•ç³–è¡£ï¼‰ï¼Œä¸åŒçš„è¯­è¨€åˆ›å»ºè€…æ‰€å®šçš„è§„åˆ™å¯èƒ½åƒå·®ä¸‡åˆ«ï¼Œä½†æ˜¯ä»–ä»¬æ‰€åŸºäºçš„æ•°æ®ç»“æ„ä¸ç®—æ³•è‚¯å®šæ˜¯ç»Ÿä¸€çš„ã€‚å»ä¼ªå­˜çœŸï¼Œç®—æ³•ä¸æ•°æ®ç»“æ„æ‰æ˜¯æˆ‘ä»¬çœŸæ­£éœ€è¦å­¦ä¹ çš„ã€‚</p>
<p>æœ€è¿‘åœ¨çœ‹<a href="https://en.wikipedia.org/wiki/Fixed-point_combinator#Fixed_point_combinators_in_lambda_calculus" target="_blank" rel="external">Y_combinator</a>ï¼Œå‡½æ•°å¼ç¼–ç¨‹ä¸­æœ€è¿·äººçš„åœ°æ–¹ï¼Œå¸Œæœ›è‡ªå·±å®Œå…¨ç†è§£åå†ä¸å¤§å®¶åˆ†äº«ã€‚Stay Tunedï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸Šå‘¨æŠŠ&lt;a href=&quot;/blog/2015/09/03/java-hashmap/&quot;&gt;HashMap&lt;/a&gt;ã€&lt;a href=&quot;/blog/2015/09/04/java-treemap/&quot;&gt;TreeMap&lt;/a&gt;è¿™ä¸¤ä¸ªMapä½“ç³»ä¸­æ¯”è¾ƒæœ‰ä»£è¡¨æ€§çš„ç±»ä»‹ç»å®Œäº†ï¼Œå¤§å®¶åº”è¯¥ä¹Ÿèƒ½ä½“
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Java TreeMap æºç è§£æ</title>
    <link href="http://liujiacai.net/blog/2015/09/04/java-treemap/"/>
    <id>http://liujiacai.net/blog/2015/09/04/java-treemap/</id>
    <published>2015-09-04T11:54:55.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»§<a href="/blog/2015/09/03/java-hashmap/">ä¸Šç¯‡æ–‡ç« </a>ä»‹ç»å®Œäº†HashMapï¼Œè¿™ç¯‡æ–‡ç« å¼€å§‹ä»‹ç»Mapç³»åˆ—å¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»<a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/util/TreeMap.html" target="_blank" rel="external">TreeMap</a>ã€‚<br>å¤§å®¶ä¹Ÿè®¸èƒ½æ„Ÿè§‰åˆ°ï¼Œç½‘ç»œä¸Šä»‹ç»HashMapçš„æ–‡ç« æ¯”è¾ƒå¤šï¼Œä½†æ˜¯ä»‹ç»TreeMapåè€Œä¸é‚£ä¹ˆå¤šï¼Œè¿™é‡Œé¢æ˜¯æœ‰åŸå› ï¼šä¸€æ–¹é¢HashMapçš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒå¤šï¼›äºŒæ˜¯ç›¸å¯¹äºHashMapæ¥è¯´ï¼ŒTreeMapæ‰€ç”¨åˆ°çš„æ•°æ®ç»“æ„æ›´ä¸ºå¤æ‚ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç åˆ†æåŸºäº<a href="http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html" target="_blank" rel="external">Oracle JDK 1.7.0_71</a>ï¼Œè¯·çŸ¥æ‚‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version &quot;1.7.0_71&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_71-b14)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="ç­¾åï¼ˆsignatureï¼‰"><a href="#ç­¾åï¼ˆsignatureï¼‰" class="headerlink" title="ç­¾åï¼ˆsignatureï¼‰"></a>ç­¾åï¼ˆsignatureï¼‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public class TreeMap&lt;K,V&gt;</div><div class="line">       extends AbstractMap&lt;K,V&gt;</div><div class="line">       implements NavigableMap&lt;K,V&gt;, Cloneable, java.io.Serializable</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°ï¼Œç›¸æ¯”HashMapæ¥è¯´ï¼ŒTreeMapå¤šç»§æ‰¿äº†ä¸€ä¸ªæ¥å£<a href="http://docs.oracle.com/javase/7/docs/api/java/util/NavigableMap.html" target="_blank" rel="external">NavigableMap</a>ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ¥å£ï¼Œå†³å®šäº†TreeMapä¸HashMapçš„ä¸åŒï¼š</p>
<blockquote>
<p>HashMapçš„keyæ˜¯æ— åºçš„ï¼ŒTreeMapçš„keyæ˜¯æœ‰åºçš„</p>
</blockquote>
<h3 id="æ¥å£NavigableMap"><a href="#æ¥å£NavigableMap" class="headerlink" title="æ¥å£NavigableMap"></a>æ¥å£NavigableMap</h3><p>é¦–å…ˆçœ‹ä¸‹NavigableMapçš„ç­¾å<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public interface NavigableMap&lt;K,V&gt; extends SortedMap&lt;K,V&gt;</div></pre></td></tr></table></figure></p>
<p>å‘ç°NavigableMapç»§æ‰¿äº†SortedMapï¼Œå†çœ‹SortedMapçš„ç­¾å</p>
<p>####<code>SortedMap</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public interface SortedMap&lt;K,V&gt; extends Map&lt;K,V&gt;</div></pre></td></tr></table></figure></p>
<p><code>SortedMap</code>å°±åƒå…¶åå­—é‚£æ ·ï¼Œè¯´æ˜è¿™ä¸ªMapæ˜¯æœ‰åºçš„ã€‚è¿™ä¸ªé¡ºåºä¸€èˆ¬æ˜¯æŒ‡ç”±<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html" target="_blank" rel="external">Comparableæ¥å£</a>æä¾›çš„keysçš„è‡ªç„¶åºï¼ˆnatural orderingï¼‰ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºSortedMapå®ä¾‹æ—¶ï¼ŒæŒ‡å®šä¸€ä¸ª<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html" target="_blank" rel="external">Comparator</a>æ¥å†³å®šã€‚<br>å½“æˆ‘ä»¬åœ¨ç”¨é›†åˆè§†è§’ï¼ˆcollection viewsï¼Œä¸HashMapä¸€æ ·ï¼Œä¹Ÿæ˜¯ç”±entrySetã€keySetä¸valuesæ–¹æ³•æä¾›ï¼‰æ¥è¿­ä»£ï¼ˆiterateï¼‰ä¸€ä¸ªSortedMapå®ä¾‹æ—¶ä¼šä½“ç°å‡ºkeyçš„é¡ºåºã€‚</p>
<p>è¿™é‡Œå¼•ç”³ä¸‹å…³äºComparableä¸Comparatorçš„åŒºåˆ«ï¼ˆå‚è€ƒ<a href="http://stackoverflow.com/a/4108616/2163429" target="_blank" rel="external">è¿™é‡Œ</a>ï¼‰ï¼š</p>
<ul>
<li>Comparableä¸€èˆ¬è¡¨ç¤ºç±»çš„è‡ªç„¶åºï¼Œæ¯”å¦‚å®šä¹‰ä¸€ä¸ªStudentç±»ï¼Œå­¦å·ä¸ºé»˜è®¤æ’åº</li>
<li>Comparatorä¸€èˆ¬è¡¨ç¤ºç±»åœ¨æŸç§åœºåˆä¸‹çš„ç‰¹æ®Šåˆ†ç±»ï¼Œéœ€è¦å®šåˆ¶åŒ–æ’åºã€‚æ¯”å¦‚ç°åœ¨æƒ³æŒ‰ç…§Studentç±»çš„ageæ¥æ’åº</li>
</ul>
<p>æ’å…¥SortedMapä¸­çš„keyçš„ç±»ç±»éƒ½å¿…é¡»ç»§æ‰¿Comparableç±»ï¼ˆæˆ–æŒ‡å®šä¸€ä¸ªcomparatorï¼‰ï¼Œè¿™æ ·æ‰èƒ½ç¡®å®šå¦‚ä½•æ¯”è¾ƒï¼ˆé€šè¿‡<code>k1.compareTo(k2)</code>æˆ–<code>comparator.compare(k1, k2)</code>ï¼‰ä¸¤ä¸ªkeyï¼Œå¦åˆ™ï¼Œåœ¨æ’å…¥æ—¶ï¼Œä¼šæŠ¥<code>ClassCastException</code>çš„å¼‚å¸¸ã€‚</p>
<p>æ­¤ä¸ºï¼ŒSortedMapä¸­keyçš„é¡ºåºæ€§åº”è¯¥ä¸<code>equals</code>æ–¹æ³•ä¿æŒä¸€è‡´ã€‚ä¹Ÿå°±æ˜¯è¯´<code>k1.compareTo(k2)</code>æˆ–<code>comparator.compare(k1, k2)</code>ä¸ºtrueæ—¶ï¼Œ<code>k1.equals(k2)</code>ä¹Ÿåº”è¯¥ä¸ºtrueã€‚</p>
<p>ä»‹ç»å®Œäº†SortedMapï¼Œå†æ¥å›åˆ°æˆ‘ä»¬çš„NavigableMapä¸Šé¢æ¥ã€‚<br>NavigableMapæ˜¯JDK1.6æ–°å¢çš„ï¼Œåœ¨SortedMapçš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†ä¸€äº›â€œå¯¼èˆªæ–¹æ³•â€ï¼ˆnavigation methodsï¼‰æ¥è¿”å›ä¸æœç´¢ç›®æ ‡æœ€è¿‘çš„å…ƒç´ ã€‚ä¾‹å¦‚ä¸‹é¢è¿™äº›æ–¹æ³•ï¼š</p>
<ul>
<li>lowerEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå°çš„å…ƒç´ </li>
<li>floorEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå°æˆ–ç›¸ç­‰çš„å…ƒç´ </li>
<li>ceilingEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå¤§æˆ–ç›¸ç­‰çš„å…ƒç´ </li>
<li>higherEntryï¼Œè¿”å›æ‰€æœ‰æ¯”ç»™å®šMap.Entryå¤§çš„å…ƒç´ </li>
</ul>
<h2 id="è®¾è®¡ç†å¿µï¼ˆdesign-conceptï¼‰"><a href="#è®¾è®¡ç†å¿µï¼ˆdesign-conceptï¼‰" class="headerlink" title="è®¾è®¡ç†å¿µï¼ˆdesign conceptï¼‰"></a>è®¾è®¡ç†å¿µï¼ˆdesign conceptï¼‰</h2><h3 id="çº¢é»‘æ ‘ï¼ˆRedâ€“black-treeï¼‰"><a href="#çº¢é»‘æ ‘ï¼ˆRedâ€“black-treeï¼‰" class="headerlink" title="çº¢é»‘æ ‘ï¼ˆRedâ€“black treeï¼‰"></a><a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree" target="_blank" rel="external">çº¢é»‘æ ‘ï¼ˆRedâ€“black treeï¼‰</a></h3><p>TreeMapæ˜¯ç”¨çº¢é»‘æ ‘ä½œä¸ºåŸºç¡€å®ç°çš„ï¼Œçº¢é»‘æ ‘æ˜¯ä¸€ç§<a href="https://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="external">äºŒå‰æœç´¢æ ‘</a>ï¼Œè®©æˆ‘ä»¬åœ¨ä¸€èµ·å›å¿†ä¸‹äºŒå‰æœç´¢æ ‘çš„ä¸€äº›æ€§è´¨</p>
<h4 id="äºŒå‰æœç´¢æ ‘"><a href="#äºŒå‰æœç´¢æ ‘" class="headerlink" title="äºŒå‰æœç´¢æ ‘"></a>äºŒå‰æœç´¢æ ‘</h4><p>å…ˆçœ‹çœ‹äºŒå‰æœç´¢æ ‘ï¼ˆbinary search treeï¼ŒBSTï¼‰é•¿ä»€ä¹ˆæ ·å‘¢ï¼Ÿ</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2R1QoeVXXXXaBXpXXXXXXXXXX_!!581166664.png" alt="äºŒå‰æœç´¢æ ‘"><br></center><br>ç›¸ä¿¡å¤§å®¶å¯¹è¿™ä¸ªå›¾éƒ½ä¸é™Œç”Ÿï¼Œå…³é”®ç‚¹æ˜¯ï¼š</p>
<blockquote>
<p>å·¦å­æ ‘çš„å€¼å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘çš„å€¼å¤§äºæ ¹èŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>äºŒå‰æœç´¢æ ‘çš„ä¼˜åŠ¿åœ¨äºæ¯è¿›è¡Œä¸€æ¬¡åˆ¤æ–­å°±æ˜¯èƒ½å°†é—®é¢˜çš„è§„æ¨¡å‡å°‘ä¸€åŠï¼Œæ‰€ä»¥å¦‚æœäºŒå‰æœç´¢æ ‘æ˜¯å¹³è¡¡çš„è¯ï¼ŒæŸ¥æ‰¾å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º<code>log(n)</code>ï¼Œä¹Ÿå°±æ˜¯æ ‘çš„é«˜åº¦ã€‚</p>
<p>æˆ‘è¿™é‡Œæƒ³åˆ°ä¸€ä¸ªæ¯”è¾ƒä¸¥è‚ƒçš„é—®é¢˜ï¼Œå¦‚æœè¯´äºŒå‰æœç´¢æ ‘å°†é—®é¢˜è§„æ¨¡å‡å°‘äº†ä¸€åŠï¼Œé‚£ä¹ˆä¸‰å‰æœç´¢æ ‘ä¸å°±å°†é—®é¢˜è§„æ¨¡å‡å°‘äº†ä¸‰åˆ†ä¹‹äºŒï¼Œè¿™ä¸æ˜¯æ›´å¥½å˜›ï¼Œä»¥æ­¤ç±»æ¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æœ‰å››å‰æœç´¢æ ‘ï¼Œäº”å‰æœç´¢æ ‘â€¦â€¦å¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µï¼š</p>
<blockquote>
<p>nä¸ªå…ƒç´ ï¼ŒKå‰æ ‘æœç´¢æ ‘çš„Kä¸ºå¤šå°‘æ—¶æ•ˆç‡æ˜¯æœ€å¥½çš„ï¼ŸKï¼2æ—¶å—ï¼Ÿ</p>
</blockquote>
<h4 id="K-å‰æœç´¢æ ‘"><a href="#K-å‰æœç´¢æ ‘" class="headerlink" title="K å‰æœç´¢æ ‘"></a>K å‰æœç´¢æ ‘</h4><p>å¦‚æœå¤§å®¶æŒ‰ç…§æˆ‘ä¸Šé¢åˆ†æï¼Œå¾ˆå¯èƒ½ä¹Ÿé™·å…¥ä¸€ä¸ªè¯¯åŒºï¼Œå°±æ˜¯</p>
<blockquote>
<p>ä¸‰å‰æœç´¢æ ‘åœ¨å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸‰åˆ†ä¹‹äºŒæ—¶ï¼Œæ‰€éœ€æ¯”è¾ƒæ“ä½œçš„æ¬¡æ•°æ˜¯ä¸¤æ¬¡ï¼ˆäºŒå‰æœç´¢æ ‘å†å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸€åŠæ—¶ï¼Œåªéœ€è¦ä¸€æ¬¡æ¯”è¾ƒæ“ä½œï¼‰</p>
</blockquote>
<p>æˆ‘ä»¬ä¸èƒ½æŠŠè¿™ä¸¤æ¬¡ç»™å¿½ç•¥äº†ï¼Œå¯¹äºæ›´ä¸€èˆ¬çš„æƒ…å†µï¼š</p>
<blockquote>
<p>nä¸ªå…ƒç´ ï¼ŒKå‰æ ‘æœç´¢æ ‘éœ€è¦çš„å¹³å‡æ¯”è¾ƒæ¬¡æ•°ä¸º<code>k*log(n/k)</code>ã€‚</p>
</blockquote>
<p>å¯¹äºæç«¯æƒ…å†µkï¼næ—¶ï¼ŒKå‰æ ‘å°±è½¬åŒ–ä¸ºäº†çº¿æ€§è¡¨äº†ï¼Œå¤æ‚åº¦ä¹Ÿå°±æ˜¯<code>O(n)</code>äº†ï¼Œå¦‚æœç”¨æ•°å­¦è§’åº¦æ¥è§£è¿™ä¸ªé—®é¢˜ï¼Œç›¸å½“äºï¼š</p>
<blockquote>
<p>nä¸ºå›ºå®šå€¼æ—¶ï¼Œkå–ä½•å€¼æ—¶ï¼Œ<code>k*log(n/k)</code>çš„å–å€¼æœ€å°ï¼Ÿ</p>
</blockquote>
<p><code>k*log(n/k)</code>æ ¹æ®å¯¹æ•°çš„è¿ç®—è§„åˆ™å¯ä»¥è½¬åŒ–ä¸º<code>ln(n)*k/ln(k)</code>ï¼Œ<code>ln(n)</code>ä¸ºå¸¸æ•°ï¼Œæ‰€ä»¥ç›¸å½“äºå–<code>k/ln(k)</code>çš„æå°å€¼ã€‚è¿™ä¸ªé—®é¢˜å¯¹äºå¤§ä¸€åˆšå­¦é«˜æ•°çš„äººæ¥è¯´å†ç®€å•ä¸è¿‡äº†ï¼Œæˆ‘ä»¬è¿™é‡Œç›´æ¥çœ‹ç»“æœğŸ˜Š</p>
<blockquote>
<p>å½“kï¼eæ—¶ï¼Œ<code>k/ln(k)</code>å–æœ€å°å€¼ã€‚</p>
</blockquote>
<p>è‡ªç„¶æ•°eçš„å–å€¼å¤§çº¦ä¸º2.718å·¦å³ï¼Œå¯ä»¥çœ‹åˆ°äºŒå‰æ ‘åŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·æœ€ä¼˜è§£äº†ã€‚åœ¨Nodejsçš„REPLä¸­è¿›è¡Œä¸‹é¢çš„æ“ä½œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">function foo(k) &#123;return k/Math.log(k);&#125;</div><div class="line">&gt; foo(2)</div><div class="line">2.8853900817779268</div><div class="line">&gt; foo(3)</div><div class="line">2.730717679880512</div><div class="line">&gt; foo(4)</div><div class="line">2.8853900817779268</div><div class="line">&gt; foo(5)</div><div class="line">3.1066746727980594</div></pre></td></tr></table></figure></p>
<p>è²Œä¼¼kï¼3æ—¶æ¯”kï¼2æ—¶å¾—åˆ°çš„ç»“æœè¿˜è¦å°ï¼Œé‚£ä¹Ÿå°±æ˜¯è¯´ä¸‰å‰æœç´¢æ ‘åº”è¯¥æ¯”äºŒå‰æœç´¢æ ‘æ›´å¥½äº›å‘€ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆäºŒå‰æ ‘æ›´æµè¡Œå‘¢ï¼Ÿåæ¥åœ¨ä¸‡èƒ½çš„stackoverflowä¸Šæ‰¾åˆ°äº†<a href="http://stackoverflow.com/questions/3498382/why-use-binary-search-if-theres-ternary-search/3525695#3525695" target="_blank" rel="external">ç­”æ¡ˆ</a>ï¼Œä¸»æ—¨å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>ç°åœ¨çš„CPUå¯ä»¥é’ˆå¯¹äºŒé‡é€»è¾‘ï¼ˆbinary logicï¼‰çš„ä»£ç åšä¼˜åŒ–ï¼Œä¸‰é‡é€»è¾‘ä¼šè¢«åˆ†è§£ä¸ºå¤šä¸ªäºŒé‡é€»è¾‘ã€‚</p>
</blockquote>
<p>è¿™æ ·ä¹Ÿå°±å¤§æ¦‚èƒ½ç†è§£ä¸ºä»€ä¹ˆäºŒå‰æ ‘è¿™ä¹ˆæµè¡Œäº†ï¼Œå°±æ˜¯å› ä¸ºè¿›è¡Œä¸€æ¬¡æ¯”è¾ƒæ“ä½œï¼Œæˆ‘ä»¬æœ€å¤šå¯ä»¥å°†é—®é¢˜è§„æ¨¡å‡å°‘ä¸€åŠã€‚</p>
<p>å¥½äº†è¿™é‡Œæ‰¯çš„æœ‰ç‚¹è¿œäº†ğŸ˜Šï¼Œæˆ‘ä»¬å†å›åˆ°çº¢é»‘æ ‘ä¸Šæ¥ã€‚</p>
<h4 id="çº¢é»‘æ ‘æ€§è´¨"><a href="#çº¢é»‘æ ‘æ€§è´¨" class="headerlink" title="çº¢é»‘æ ‘æ€§è´¨"></a>çº¢é»‘æ ‘æ€§è´¨</h4><p>å…ˆçœ‹çœ‹çº¢é»‘æ ‘çš„æ ·å­ï¼š</p>
<p><center><br>    <img src="https://img.alicdn.com/imgextra/i4/581166664/TB2HIUMeVXXXXXzXXXXXXXXXXXX_!!581166664.png" alt="çº¢é»‘æ ‘ç¤ºä¾‹"><br></center><br>ä¸Šå›¾æ˜¯ä»wikiæˆªæ¥çš„ï¼Œéœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ï¼š</p>
<blockquote>
<p>å¶å­èŠ‚ç‚¹ä¸ºä¸Šå›¾ä¸­çš„NILèŠ‚ç‚¹ï¼Œå›½å†…ä¸€äº›æ•™æä¸­æ²¡æœ‰è¿™ä¸ªNILèŠ‚ç‚¹ï¼Œæˆ‘ä»¬åœ¨ç”»å›¾æ—¶æœ‰æ—¶ä¹Ÿä¼šçœç•¥è¿™äº›NILèŠ‚ç‚¹ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼Œå½“æˆ‘ä»¬è¯´å¶å­èŠ‚ç‚¹æ—¶ï¼ŒæŒ‡çš„å°±æ˜¯è¿™äº›NILèŠ‚ç‚¹ã€‚</p>
</blockquote>
<p>çº¢é»‘æ ‘é€šè¿‡ä¸‹é¢5æ¡è§„åˆ™ï¼Œä¿è¯äº†æ ‘æ˜¯å¹³è¡¡çš„ï¼š</p>
<ol>
<li>æ ‘çš„èŠ‚ç‚¹åªæœ‰çº¢ä¸é»‘ä¸¤ç§é¢œè‰²</li>
<li>æ ¹èŠ‚ç‚¹ä¸ºé»‘è‰²çš„</li>
<li>å¶å­èŠ‚ç‚¹ä¸ºé»‘è‰²çš„</li>
<li>çº¢è‰²èŠ‚ç‚¹çš„å­—èŠ‚ç‚¹å¿…å®šæ˜¯é»‘è‰²çš„</li>
<li>ä»ä»»æ„ä¸€èŠ‚ç‚¹å‡ºå‘ï¼Œåˆ°å…¶åç»§çš„å¶å­èŠ‚ç‚¹çš„è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹çš„æ•°ç›®ç›¸åŒ</li>
</ol>
<p>æ»¡è¶³äº†ä¸Šé¢5ä¸ªæ¡ä»¶åï¼Œå°±èƒ½å¤Ÿä¿è¯ï¼š<code>æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸ä¼šå¤§äºæ ¹èŠ‚ç‚¹åˆ°å¶å­æœ€çŸ­è·¯å¾„çš„2å€</code>ã€‚<br>å…¶å®è¿™ä¸ªå¾ˆå¥½ç†è§£ï¼Œä¸»è¦æ˜¯ç”¨äº†æ€§è´¨4ä¸5ï¼Œè¿™é‡Œç®€å•è¯´ä¸‹ï¼š</p>
<blockquote>
<p>å‡è®¾æ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹æœ€çŸ­çš„è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹æ•°ç›®ä¸ºBï¼Œé‚£ä¹ˆæ ¹æ®æ€§è´¨5ï¼Œæ ¹èŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹çš„æœ€é•¿è·¯å¾„ä¸­ï¼Œé»‘è‰²èŠ‚ç‚¹æ•°ç›®ä¹Ÿæ˜¯Bï¼Œæœ€é•¿çš„æƒ…å†µå°±æ˜¯æ¯ä¸¤ä¸ªé»‘è‰²èŠ‚ç‚¹ä¸­é—´æœ‰ä¸ªçº¢è‰²èŠ‚ç‚¹ï¼ˆä¹Ÿå°±æ˜¯çº¢é»‘ç›¸é—´çš„æƒ…å†µï¼‰ï¼Œæ‰€ä»¥çº¢è‰²èŠ‚ç‚¹æœ€å¤šä¸ºBï¼1ä¸ªã€‚è¿™æ ·å°±èƒ½è¯æ˜ä¸Šé¢çš„ç»“è®ºäº†ã€‚</p>
</blockquote>
<h4 id="çº¢é»‘æ ‘æ“ä½œ"><a href="#çº¢é»‘æ ‘æ“ä½œ" class="headerlink" title="çº¢é»‘æ ‘æ“ä½œ"></a>çº¢é»‘æ ‘æ“ä½œ</h4><p><center><br>    <img src="https://img.alicdn.com/imgextra/i1/581166664/TB2AkEOeVXXXXXvXXXXXXXXXXXX_!!581166664.png" alt="çº¢é»‘æ ‘æ—‹è½¬ç¤ºä¾‹ï¼ˆæ²¡æœ‰ç”»å‡ºNILèŠ‚ç‚¹ï¼‰"><br></center><br>å…³äºçº¢é»‘æ ‘çš„æ’å…¥ã€åˆ é™¤ã€å·¦æ—‹ã€å³æ—‹è¿™äº›æ“ä½œï¼Œæˆ‘è§‰å¾—æœ€å¥½å¯ä»¥åšåˆ°å¯è§†åŒ–ï¼Œæ–‡å­—è¡¨è¾¾æ¯”è¾ƒç¹çï¼Œæˆ‘è¿™é‡Œå°±ä¸åœ¨çŒ®ä¸‘äº†ï¼Œç½‘ä¸Šèƒ½æ‰¾åˆ°çš„ä¹Ÿæ¯”è¾ƒå¤šï¼Œåƒ<a href="http://blog.csdn.net/v_JULY_v/article/details/6105630" target="_blank" rel="external">v_July_vçš„ã€Šæ•™ä½ é€å½»äº†è§£çº¢é»‘æ ‘ã€‹</a>ã€‚æˆ‘è¿™é‡Œæ¨èä¸ª<a href="http://www.csanimated.com/animation.php?t=Red-black_tree" target="_blank" rel="external">swfæ•™å­¦è§†é¢‘</a>ï¼ˆè§†é¢‘ä¸ºè‹±æ–‡ï¼Œå¤§å®¶ä¸è¦å®³æ€•ï¼Œé‡ç‚¹æ˜¯çœ‹å›¾ğŸ˜Šï¼‰ï¼Œ7åˆ†é’Ÿå·¦å³ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒã€‚</p>
<p>è¿™é‡Œè¿˜æœ‰ä¸ªäº¤äº’å¼<a href="https://www.cs.usfca.edu/~galles/visualization/RedBlack.html" target="_blank" rel="external">çº¢é»‘æ ‘çš„å¯è§†åŒ–</a>ç½‘é¡µï¼Œå¤§å®¶å¯ä»¥ä¸Šå»è‡ªå·±æ“ä½œæ“ä½œï¼Œæ’å…¥å‡ ä¸ªèŠ‚ç‚¹ï¼Œåˆ é™¤å‡ ä¸ªèŠ‚ç‚¹ç©ç©ï¼Œçœ‹çœ‹å·¦æ—‹å³æ—‹æ˜¯æ€ä¹ˆç©çš„ã€‚</p>
<h2 id="æºç å‰–æ"><a href="#æºç å‰–æ" class="headerlink" title="æºç å‰–æ"></a>æºç å‰–æ</h2><p>ç”±äºçº¢é»‘æ ‘çš„æ“ä½œæˆ‘è¿™é‡Œä¸è¯´äº†ï¼Œæ‰€ä»¥è¿™é‡ŒåŸºæœ¬ä¸Šä¹Ÿå°±æ²¡ä»€ä¹ˆæºç å¯ä»¥è®²äº†ï¼Œå› ä¸ºè¿™é‡Œé¢é‡è¦çš„ç®—æ³•éƒ½æ˜¯<code>From CLR</code>ï¼Œè¿™é‡Œçš„CLRæ˜¯æŒ‡Cormen, Leiserson, Rivestï¼Œä»–ä»¬æ˜¯ç®—æ³•å¯¼è®ºçš„ä½œè€…ï¼Œä¹Ÿå°±æ˜¯è¯´TreeMapé‡Œé¢ç®—æ³•éƒ½æ˜¯å‚ç…§ç®—æ³•å¯¼è®ºçš„ä¼ªä»£ç ã€‚</p>
<p>å› ä¸ºçº¢é»‘æ ‘æ˜¯å¹³è¡¡çš„äºŒå‰æœç´¢æ ‘ï¼Œæ‰€ä»¥å…¶putï¼ˆåŒ…å«updateæ“ä½œï¼‰ã€getã€removeçš„æ—¶é—´å¤æ‚åº¦éƒ½ä¸º<code>log(n)</code>ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒTreeMapä¸HashMapçš„çš„å®ç°ç®—æ˜¯éƒ½ä»‹ç»å®Œäº†ï¼Œå¯ä»¥çœ‹åˆ°å®ƒä»¬å®ç°çš„ä¸åŒï¼Œå†³å®šäº†å®ƒä»¬åº”ç”¨åœºæ™¯çš„ä¸åŒï¼š</p>
<ul>
<li>TreeMapçš„keyæ˜¯æœ‰åºçš„ï¼Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(log(n))</code>ï¼Œä¸ºäº†ä¿è¯çº¢é»‘æ ‘å¹³è¡¡ï¼Œåœ¨å¿…è¦æ—¶ä¼šè¿›è¡Œæ—‹è½¬</li>
<li>HashMapçš„keyæ˜¯æ— åºçš„ï¼Œå¢åˆ æ”¹æŸ¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º<code>O(1)</code>ï¼Œä¸ºäº†åšåˆ°åŠ¨æ€æ‰©å®¹ï¼Œåœ¨å¿…è¦æ—¶ä¼šè¿›è¡Œresizeã€‚</li>
</ul>
<p>å¦å¤–ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰è§£é‡Šå…·ä½“ä»£ç ï¼Œéš¾å…æœ‰äº›æ ‡é¢˜å…šäº†ï¼Œè¯·å¤§å®¶è§è°…ï¼Œåé¢ç†è§£çš„æ›´æ·±åˆ»äº†å†æ¥å¡«å‘ã€‚ğŸ˜‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://stackoverflow.com/questions/21329662/explanation-of-red-black-tree-based-implementation-of-treemap-in-java" target="_blank" rel="external">http://stackoverflow.com/questions/21329662/explanation-of-red-black-tree-based-implementation-of-treemap-in-java</a></li>
<li><a href="http://javahungry.blogspot.com/2014/04/fail-fast-iterator-vs-fail-safe-iterator-difference-with-example-in-java.html" target="_blank" rel="external">http://javahungry.blogspot.com/2014/04/fail-fast-iterator-vs-fail-safe-iterator-difference-with-example-in-java.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Binary_search_tree" target="_blank" rel="external">https://en.wikipedia.org/wiki/Binary_search_tree</a></li>
<li><a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree" target="_blank" rel="external">https://en.wikipedia.org/wiki/Red%E2%80%93black_tree</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»§&lt;a href=&quot;/blog/2015/09/03/java-hashmap/&quot;&gt;ä¸Šç¯‡æ–‡ç« &lt;/a&gt;ä»‹ç»å®Œäº†HashMapï¼Œè¿™ç¯‡æ–‡ç« å¼€å§‹ä»‹ç»Mapç³»åˆ—å¦ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„ç±»&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/api/ind
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Java HashMap æºç è§£æ</title>
    <link href="http://liujiacai.net/blog/2015/09/03/java-hashmap/"/>
    <id>http://liujiacai.net/blog/2015/09/03/java-hashmap/</id>
    <published>2015-09-03T03:51:12.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»§ä¸Šä¸€ç¯‡æ–‡ç« <a href="/blog/2015/09/01/java-collection-overview">Javaé›†åˆæ¡†æ¶ç»¼è¿°</a>åï¼Œä»Šå¤©æ­£å¼å¼€å§‹åˆ†æå…·ä½“é›†åˆç±»çš„ä»£ç ï¼Œé¦–å…ˆä»¥æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„<a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/util/HashMap.html" target="_blank" rel="external">HashMap</a>å¼€å§‹ã€‚</p>
<blockquote>
<p>æœ¬æ–‡æºç åˆ†æåŸºäº<a href="http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html" target="_blank" rel="external">Oracle JDK 1.7.0_71</a>ï¼Œè¯·çŸ¥æ‚‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ java -version</div><div class="line">java version &quot;1.7.0_71&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.7.0_71-b14)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="ç­¾åï¼ˆsignatureï¼‰"><a href="#ç­¾åï¼ˆsignatureï¼‰" class="headerlink" title="ç­¾åï¼ˆsignatureï¼‰"></a>ç­¾åï¼ˆsignatureï¼‰</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">public class HashMap&lt;K,V&gt;</div><div class="line">       extends AbstractMap&lt;K,V&gt;</div><div class="line">       implements Map&lt;K,V&gt;, Cloneable, Serializable</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°<code>HashMap</code>ç»§æ‰¿äº†</p>
<ul>
<li>æ ‡è®°æ¥å£<a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/Cloneable.html" target="_blank" rel="external">Cloneable</a>ï¼Œç”¨äºè¡¨æ˜<code>HashMap</code>å¯¹è±¡ä¼šé‡å†™<code>java.lang.Object#clone()</code>æ–¹æ³•ï¼ŒHashMapå®ç°çš„æ˜¯æµ…æ‹·è´ï¼ˆshallow copyï¼‰ã€‚</li>
<li>æ ‡è®°æ¥å£<a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/io/Serializable.html" target="_blank" rel="external">Serializable</a>ï¼Œç”¨äºè¡¨æ˜<code>HashMap</code>å¯¹è±¡å¯ä»¥è¢«åºåˆ—åŒ–</li>
</ul>
<p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œ<code>HashMap</code>åŒæ—¶ç»§æ‰¿äº†æŠ½è±¡ç±»<code>AbstractMap</code>ä¸æ¥å£<code>Map</code>ï¼Œå› ä¸ºæŠ½è±¡ç±»<code>AbstractMap</code>çš„ç­¾åä¸º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">public abstract class AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;</div></pre></td></tr></table></figure></p>
<p><a href="http://stackoverflow.com/questions/14062286/java-why-does-weakhashmap-implement-map-whereas-it-is-already-implemented-by-ab" target="_blank" rel="external">Stack Overfloooow</a>ä¸Šè§£é‡Šåˆ°ï¼š</p>
<blockquote>
<p>åœ¨è¯­æ³•å±‚é¢ç»§æ‰¿æ¥å£<code>Map</code>æ˜¯å¤šä½™çš„ï¼Œè¿™ä¹ˆåšä»…ä»…æ˜¯ä¸ºäº†è®©é˜…è¯»ä»£ç çš„äººæ˜ç¡®çŸ¥é“<code>HashMap</code>æ˜¯å±äº<code>Map</code>ä½“ç³»çš„ï¼Œèµ·åˆ°äº†æ–‡æ¡£çš„ä½œç”¨</p>
</blockquote>
<p><code>AbstractMap</code>ç›¸å½“äºä¸ªè¾…åŠ©ç±»ï¼Œ<code>Map</code>çš„ä¸€äº›æ“ä½œè¿™é‡Œé¢å·²ç»æä¾›äº†é»˜è®¤å®ç°ï¼Œåé¢å…·ä½“çš„å­ç±»å¦‚æœæ²¡æœ‰ç‰¹æ®Šè¡Œä¸ºï¼Œå¯ç›´æ¥ä½¿ç”¨<code>AbstractMap</code>æä¾›çš„å®ç°ã€‚</p>
<h3 id="Cloneableæ¥å£"><a href="#Cloneableæ¥å£" class="headerlink" title="Cloneableæ¥å£"></a><a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/lang/Cloneable.html" target="_blank" rel="external">Cloneable</a>æ¥å£</h3><pre><code>It&apos;s evil, don&apos;t use it.
</code></pre><p><code>Cloneable</code>è¿™ä¸ªæ¥å£è®¾è®¡çš„éå¸¸ä¸å¥½ï¼Œæœ€è‡´å‘½çš„ä¸€ç‚¹æ˜¯å®ƒé‡Œé¢ç«Ÿç„¶æ²¡æœ‰<code>clone</code>æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬è‡ªå·±å†™çš„ç±»å®Œå…¨å¯ä»¥å®ç°è¿™ä¸ªæ¥å£çš„åŒæ—¶ä¸é‡å†™<code>clone</code>æ–¹æ³•ã€‚</p>
<p>å…³äº<code>Cloneable</code>çš„ä¸è¶³ï¼Œå¤§å®¶å¯ä»¥å»çœ‹çœ‹ã€ŠEffective Javaã€‹ä¸€ä¹¦çš„ä½œè€…<a href="http://www.artima.com/intv/bloch13.html" target="_blank" rel="external">ç»™å‡ºçš„ç†ç”±</a>ï¼Œåœ¨æ‰€ç»™é“¾æ¥çš„æ–‡ç« é‡Œï¼ŒJosh Blochä¹Ÿä¼šè®²å¦‚ä½•å®ç°æ·±æ‹·è´æ¯”è¾ƒå¥½ï¼Œæˆ‘è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°äº†ã€‚</p>
<h3 id="Mapæ¥å£"><a href="#Mapæ¥å£" class="headerlink" title="Mapæ¥å£"></a><a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/util/Map.html" target="_blank" rel="external">Map</a>æ¥å£</h3><p>åœ¨eclipseä¸­çš„outlineé¢æ¿å¯ä»¥çœ‹åˆ°<code>Map</code>æ¥å£é‡Œé¢åŒ…å«ä»¥ä¸‹æˆå‘˜æ–¹æ³•ä¸å†…éƒ¨ç±»ï¼š</p>
<center><br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2Pt6LeVXXXXboXpXXXXXXXXXX_!!581166664.png" width="400" height="400" alt="Map_field_method"><br></center>

<p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„æˆå‘˜æ–¹æ³•ä¸å¤–ä¹æ˜¯â€œå¢åˆ æ”¹æŸ¥â€ï¼Œè¿™ä¹Ÿåæ˜ äº†æˆ‘ä»¬ç¼–å†™ç¨‹åºæ—¶ï¼Œä¸€å®šæ˜¯ä»¥â€œæ•°æ®â€ä¸ºå¯¼å‘çš„ã€‚</p>
<p>åœ¨<a href="/blog/2015/09/01/java-collection-overview/#Map">ä¸Šç¯‡æ–‡ç« </a>è®²äº†<code>Map</code>è™½ç„¶å¹¶ä¸æ˜¯<code>Collection</code>ï¼Œä½†æ˜¯å®ƒæä¾›äº†ä¸‰ç§â€œé›†åˆè§†è§’â€ï¼ˆcollection viewsï¼‰ï¼Œä¸ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼š</p>
<ul>
<li><code>Set&lt;K&gt; keySet()</code>ï¼Œæä¾›keyçš„é›†åˆè§†è§’</li>
<li><code>Collection&lt;V&gt; values()</code>ï¼Œæä¾›valueçš„é›†åˆè§†è§’</li>
<li><code>Set&lt;Map.Entry&lt;K, V&gt;&gt; entrySet()</code>ï¼Œæä¾›key-valueåºå¯¹çš„é›†åˆè§†è§’ï¼Œè¿™é‡Œç”¨å†…éƒ¨ç±»<code>Map.Entry</code>è¡¨ç¤ºåºå¯¹</li>
</ul>
<h3 id="AbstractMapæŠ½è±¡ç±»"><a href="#AbstractMapæŠ½è±¡ç±»" class="headerlink" title="AbstractMapæŠ½è±¡ç±»"></a><a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/util/AbstractMap.html" target="_blank" rel="external">AbstractMap</a>æŠ½è±¡ç±»</h3><p><code>AbstractMap</code>å¯¹<code>Map</code>ä¸­çš„æ–¹æ³•æä¾›äº†ä¸€ä¸ªåŸºæœ¬å®ç°ï¼Œå‡å°‘äº†å®ç°<code>Map</code>æ¥å£çš„å·¥ä½œé‡ã€‚<br>ä¸¾ä¾‹æ¥è¯´ï¼š</p>
<blockquote>
<p>å¦‚æœè¦å®ç°ä¸ªä¸å¯å˜ï¼ˆunmodifiableï¼‰çš„mapï¼Œé‚£ä¹ˆåªéœ€ç»§æ‰¿<code>AbstractMap</code>ï¼Œç„¶åå®ç°å…¶<code>entrySet</code>æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›çš„setä¸æ”¯æŒaddä¸removeï¼ŒåŒæ—¶è¿™ä¸ªsetçš„è¿­ä»£å™¨ï¼ˆiteratorï¼‰ä¸æ”¯æŒremoveæ“ä½œå³å¯ã€‚</p>
<p>ç›¸åï¼Œå¦‚æœè¦å®ç°ä¸ªå¯å˜ï¼ˆmodifiableï¼‰çš„mapï¼Œé¦–å…ˆç»§æ‰¿<code>AbstractMap</code>ï¼Œç„¶åé‡å†™ï¼ˆoverrideï¼‰<code>AbstractMap</code>çš„putæ–¹æ³•ï¼ŒåŒæ—¶å®ç°<code>entrySet</code>æ‰€è¿”å›setçš„è¿­ä»£å™¨çš„removeæ–¹æ³•å³å¯ã€‚</p>
</blockquote>
<h2 id="è®¾è®¡ç†å¿µï¼ˆdesign-conceptï¼‰"><a href="#è®¾è®¡ç†å¿µï¼ˆdesign-conceptï¼‰" class="headerlink" title="è®¾è®¡ç†å¿µï¼ˆdesign conceptï¼‰"></a>è®¾è®¡ç†å¿µï¼ˆdesign conceptï¼‰</h2><h3 id="å“ˆå¸Œè¡¨ï¼ˆhash-tableï¼‰"><a href="#å“ˆå¸Œè¡¨ï¼ˆhash-tableï¼‰" class="headerlink" title="å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰"></a>å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰</h3><p><code>HashMap</code>æ˜¯ä¸€ç§åŸºäº<a href="https://en.wikipedia.org/wiki/Hash_table" target="_blank" rel="external">å“ˆå¸Œè¡¨ï¼ˆhash tableï¼‰</a>å®ç°çš„mapï¼Œå“ˆå¸Œè¡¨ï¼ˆä¹Ÿå«å…³è”æ•°ç»„ï¼‰ä¸€ç§é€šç”¨çš„æ•°æ®ç»“æ„ï¼Œå¤§å¤šæ•°çš„ç°ä»£è¯­è¨€éƒ½åŸç”Ÿæ”¯æŒï¼Œå…¶æ¦‚å¿µä¹Ÿæ¯”è¾ƒç®€å•ï¼š<code>keyç»è¿‡hashå‡½æ•°ä½œç”¨åå¾—åˆ°ä¸€ä¸ªæ§½ï¼ˆbucketsæˆ–slotsï¼‰çš„ç´¢å¼•ï¼ˆindexï¼‰ï¼Œæ§½ä¸­ä¿å­˜ç€æˆ‘ä»¬æƒ³è¦è·å–çš„å€¼</code>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º</p>
<center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2ZGZbeVXXXXXtXXXXXXXXXXXX_!!581166664.png" alt="hash table demo" width="300" height="300"><br></center>

<p>å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œä¸€äº›ä¸åŒçš„keyç»è¿‡åŒä¸€hashå‡½æ•°åå¯èƒ½äº§ç”Ÿç›¸åŒçš„ç´¢å¼•ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†å†²çªï¼Œè¿™æ˜¯åœ¨æ‰€éš¾å…çš„ã€‚<br>æ‰€ä»¥åˆ©ç”¨å“ˆå¸Œè¡¨è¿™ç§æ•°æ®ç»“æ„å®ç°å…·ä½“ç±»æ—¶ï¼Œéœ€è¦ï¼š</p>
<ul>
<li>è®¾è®¡ä¸ªå¥½çš„hashå‡½æ•°ï¼Œä½¿å†²çªå°½å¯èƒ½çš„å‡å°‘</li>
<li>å…¶æ¬¡æ˜¯éœ€è¦è§£å†³å‘ç”Ÿå†²çªåå¦‚ä½•å¤„ç†ã€‚</li>
</ul>
<p>åé¢ä¼šé‡ç‚¹ä»‹ç»<code>HashMap</code>æ˜¯å¦‚ä½•è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜çš„ã€‚</p>
<h3 id="HashMapçš„ä¸€äº›ç‰¹ç‚¹"><a href="#HashMapçš„ä¸€äº›ç‰¹ç‚¹" class="headerlink" title="HashMapçš„ä¸€äº›ç‰¹ç‚¹"></a>HashMapçš„ä¸€äº›ç‰¹ç‚¹</h3><ul>
<li>çº¿ç¨‹éå®‰å…¨ï¼Œå¹¶ä¸”å…è®¸keyä¸valueéƒ½ä¸ºnullå€¼ï¼Œ<code>HashTable</code>ä¸ä¹‹ç›¸åï¼Œä¸ºçº¿ç¨‹å®‰å…¨ï¼Œkeyä¸valueéƒ½ä¸å…è®¸nullå€¼ã€‚</li>
<li>ä¸ä¿è¯å…¶å†…éƒ¨å…ƒç´ çš„é¡ºåºï¼Œè€Œä¸”éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒåŒä¸€å…ƒç´ çš„ä½ç½®ä¹Ÿå¯èƒ½æ”¹å˜ï¼ˆresizeçš„æƒ…å†µï¼‰</li>
<li>putã€getæ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚</li>
<li>éå†å…¶é›†åˆè§†è§’çš„æ—¶é—´å¤æ‚åº¦ä¸å…¶å®¹é‡ï¼ˆcapacityï¼Œæ§½çš„ä¸ªæ•°ï¼‰å’Œç°æœ‰å…ƒç´ çš„å¤§å°ï¼ˆentryçš„ä¸ªæ•°ï¼‰æˆæ­£æ¯”ï¼Œæ‰€ä»¥å¦‚æœéå†çš„æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œä¸è¦æŠŠcapactiyè®¾ç½®çš„è¿‡é«˜æˆ–æŠŠå¹³è¡¡å› å­ï¼ˆload factorï¼Œå½“entryæ•°å¤§äºcapacity*loadFactoræ—¶ï¼Œä¼šè¿›è¡Œresizeï¼Œresideä¼šå¯¼è‡´keyè¿›è¡Œrehashï¼‰è®¾ç½®çš„è¿‡ä½ã€‚</li>
<li>ç”±äºHashMapæ˜¯çº¿ç¨‹éå®‰å…¨çš„ï¼Œè¿™ä¹Ÿå°±æ˜¯æ„å‘³ç€å¦‚æœå¤šä¸ªçº¿ç¨‹åŒæ—¶å¯¹ä¸€hashmapçš„é›†åˆè¯•å›¾åšè¿­ä»£æ—¶æœ‰ç»“æ„çš„ä¸Šæ”¹å˜ï¼ˆæ·»åŠ ã€åˆ é™¤entryï¼Œåªæ”¹å˜entryçš„valueçš„å€¼ä¸ç®—ç»“æ„æ”¹å˜ï¼‰ï¼Œé‚£ä¹ˆä¼šæŠ¥<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ConcurrentModificationException.html" target="_blank" rel="external">ConcurrentModificationException</a>ï¼Œä¸“ä¸šæœ¯è¯­å«<code>fail-fast</code>ï¼Œå°½æ—©æŠ¥é”™å¯¹äºå¤šçº¿ç¨‹ç¨‹åºæ¥è¯´æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</li>
<li><code>Map m = Collections.synchronizedMap(new HashMap(...));</code> é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„mapã€‚</li>
</ul>
<h2 id="æºç å‰–æ"><a href="#æºç å‰–æ" class="headerlink" title="æºç å‰–æ"></a>æºç å‰–æ</h2><p>é¦–å…ˆä»æ„é€ å‡½æ•°å¼€å§‹è®²ï¼Œ<code>HashMap</code>éµå¾ª<a href="/blog/2015/09/01/java-collection-overview/#ä¸¤å¤§åŸºç±»Collectionä¸Map">é›†åˆæ¡†æ¶çš„çº¦æŸ</a>ï¼Œæä¾›äº†ä¸€ä¸ªå‚æ•°ä¸ºç©ºçš„æ„é€ å‡½æ•°ä¸æœ‰ä¸€ä¸ªå‚æ•°ä¸”å‚æ•°ç±»å‹ä¸ºMapçš„æ„é€ å‡½æ•°ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æä¾›äº†ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨äºè®¾ç½®<code>HashMap</code>çš„å®¹é‡ï¼ˆcapacityï¼‰ä¸å¹³è¡¡å› å­ï¼ˆloadFactorï¼‰ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">public HashMap(int initialCapacity, float loadFactor) &#123;</div><div class="line">    if (initialCapacity &lt; 0)</div><div class="line">        throw new IllegalArgumentException(&quot;Illegal initial capacity: &quot; +</div><div class="line">                                           initialCapacity);</div><div class="line">    if (initialCapacity &gt; MAXIMUM_CAPACITY)</div><div class="line">        initialCapacity = MAXIMUM_CAPACITY;</div><div class="line">    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor))</div><div class="line">        throw new IllegalArgumentException(&quot;Illegal load factor: &quot; +</div><div class="line">                                           loadFactor);</div><div class="line"></div><div class="line">    this.loadFactor = loadFactor;</div><div class="line">    threshold = initialCapacity;</div><div class="line">    init();</div><div class="line">&#125;</div><div class="line">public HashMap(int initialCapacity) &#123;</div><div class="line">    this(initialCapacity, DEFAULT_LOAD_FACTOR);</div><div class="line">&#125;</div><div class="line">public HashMap() &#123;</div><div class="line">    this(DEFAULT_INITIAL_CAPACITY, DEFAULT_LOAD_FACTOR);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä»ä»£ç ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå®¹é‡ä¸å¹³è¡¡å› å­éƒ½æœ‰ä¸ªé»˜è®¤å€¼ï¼Œå¹¶ä¸”å®¹é‡æœ‰ä¸ªæœ€å¤§å€¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * The default initial capacity - MUST be a power of two.</div><div class="line"> */</div><div class="line">static final int DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4; // aka 16</div><div class="line"></div><div class="line">/**</div><div class="line"> * The maximum capacity, used if a higher value is implicitly specified</div><div class="line"> * by either of the constructors with arguments.</div><div class="line"> * MUST be a power of two &lt;= 1&lt;&lt;30.</div><div class="line"> */</div><div class="line">static final int MAXIMUM_CAPACITY = 1 &lt;&lt; 30;</div><div class="line"></div><div class="line">/**</div><div class="line"> * The load factor used when none specified in constructor.</div><div class="line"> */</div><div class="line">static final float DEFAULT_LOAD_FACTOR = 0.75f;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤çš„å¹³è¡¡å› å­ä¸º0.75ï¼Œè¿™æ˜¯æƒè¡¡äº†æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦ä¹‹åçš„æœ€å¥½å–å€¼ï¼ˆJDKè¯´æ˜¯æœ€å¥½çš„ğŸ˜‚ï¼‰ï¼Œè¿‡é«˜çš„å› å­ä¼šé™ä½å­˜å‚¨ç©ºé—´ä½†æ˜¯æŸ¥æ‰¾ï¼ˆlookupï¼ŒåŒ…æ‹¬HashMapä¸­çš„putä¸getæ–¹æ³•ï¼‰çš„æ—¶é—´å°±ä¼šå¢åŠ ã€‚</p>
<p>è¿™é‡Œæ¯”è¾ƒå¥‡æ€ªçš„æ˜¯é—®é¢˜ï¼šå®¹é‡å¿…é¡»ä¸º2çš„æŒ‡æ•°å€ï¼ˆé»˜è®¤ä¸º16ï¼‰ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿè§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦äº†è§£HashMapä¸­å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†ã€‚</p>
<h3 id="å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†"><a href="#å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†" class="headerlink" title="å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†"></a>å“ˆå¸Œå‡½æ•°çš„è®¾è®¡åŸç†</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line">  * Retrieve object hash code and applies a supplemental hash function to the</div><div class="line">  * result hash, which defends against poor quality hash functions.  This is</div><div class="line">  * critical because HashMap uses power-of-two length hash tables, that</div><div class="line">  * otherwise encounter collisions for hashCodes that do not differ</div><div class="line">  * in lower bits. Note: Null keys always map to hash 0, thus index 0.</div><div class="line">  */</div><div class="line"> final int hash(Object k) &#123;</div><div class="line">     int h = hashSeed;</div><div class="line">     if (0 != h &amp;&amp; k instanceof String) &#123;</div><div class="line">         return sun.misc.Hashing.stringHash32((String) k);</div><div class="line">     &#125;</div><div class="line"></div><div class="line">     h ^= k.hashCode();</div><div class="line"></div><div class="line">     // This function ensures that hashCodes that differ only by</div><div class="line">     // constant multiples at each bit position have a bounded</div><div class="line">     // number of collisions (approximately 8 at default load factor).</div><div class="line">     h ^= (h &gt;&gt;&gt; 20) ^ (h &gt;&gt;&gt; 12);</div><div class="line">     return h ^ (h &gt;&gt;&gt; 7) ^ (h &gt;&gt;&gt; 4);</div><div class="line"> &#125;</div><div class="line"></div><div class="line"> /**</div><div class="line">  * Returns index for hash code h.</div><div class="line">  */</div><div class="line"> static int indexFor(int h, int length) &#123;</div><div class="line">     // assert Integer.bitCount(length) == 1 : &quot;length must be a non-zero power of 2&quot;;</div><div class="line">     return h &amp; (length-1);</div><div class="line"> &#125;</div></pre></td></tr></table></figure>
<p>çœ‹åˆ°è¿™ä¹ˆå¤šä½æ“ä½œï¼Œæ˜¯ä¸æ˜¯è§‰å¾—æ™•å¤´è½¬å‘äº†å‘¢ï¼Œè¿˜æ˜¯ææ¸…æ¥šåŸç†å°±è¡Œäº†ï¼Œæ¯•ç«Ÿä½æ“ä½œé€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œä¸èƒ½å› ä¸ºä¸å¥½ç†è§£å°±ä¸ç”¨äº†ğŸ˜Šã€‚<br>ç½‘ä¸Šè¯´è¿™ä¸ªé—®é¢˜çš„ä¹Ÿæ¯”è¾ƒå¤šï¼Œæˆ‘è¿™é‡Œæ ¹æ®è‡ªå·±çš„ç†è§£ï¼Œå°½é‡åšåˆ°é€šä¿—æ˜“æ‡‚ã€‚</p>
<p>åœ¨å“ˆå¸Œè¡¨å®¹é‡ï¼ˆä¹Ÿå°±æ˜¯bucketsæˆ–slotså¤§å°ï¼‰ä¸ºlengthçš„æƒ…å†µä¸‹ï¼Œä¸ºäº†ä½¿æ¯ä¸ªkeyéƒ½èƒ½åœ¨å†²çªæœ€å°çš„æƒ…å†µä¸‹æ˜ å°„åˆ°<code>[0,length)</code>ï¼ˆæ³¨æ„æ˜¯å·¦é—­å³å¼€åŒºé—´ï¼‰çš„ç´¢å¼•ï¼ˆindexï¼‰å†…ï¼Œä¸€èˆ¬æœ‰ä¸¤ç§åšæ³•ï¼š</p>
<ol>
<li>è®©lengthä¸ºç´ æ•°ï¼Œç„¶åç”¨<code>hashCode(key) mod length</code>çš„æ–¹æ³•å¾—åˆ°ç´¢å¼•</li>
<li>è®©lengthä¸º2çš„æŒ‡æ•°å€ï¼Œç„¶åç”¨<code>hashCode(key) &amp; (length-1)</code>çš„æ–¹æ³•å¾—åˆ°ç´¢å¼•</li>
</ol>
<p><a href="http://docs.oracle.com/javase/7/docs/api/index.html?java/util/Hashtable.html" target="_blank" rel="external">HashTable</a>ç”¨çš„æ˜¯æ–¹æ³•1ï¼Œ<code>HashMap</code>ç”¨çš„æ˜¯æ–¹æ³•2ã€‚</p>
<p>å› ä¸ºæœ¬ç¯‡ä¸»é¢˜è®²çš„æ˜¯HashMapï¼Œæ‰€ä»¥å…³äºæ–¹æ³•1ä¸ºä»€ä¹ˆè¦ç”¨ç´ æ•°ï¼Œæˆ‘è¿™é‡Œä¸æƒ³è¿‡å¤šä»‹ç»ï¼Œå¤§å®¶å¯ä»¥çœ‹<a href="http://math.stackexchange.com/questions/183909/why-choose-a-prime-number-as-the-number-of-slots-for-hashing-function-that-uses" target="_blank" rel="external">è¿™é‡Œ</a>ã€‚</p>
<p>é‡ç‚¹è¯´è¯´æ–¹æ³•2çš„æƒ…å†µï¼Œæ–¹æ³•2å…¶å®ä¹Ÿæ¯”è¾ƒå¥½ç†è§£ï¼š</p>
<blockquote>
<p>å› ä¸ºlengthä¸º2çš„æŒ‡æ•°å€ï¼Œæ‰€ä»¥<code>length-1</code>æ‰€å¯¹åº”çš„äºŒè¿›åˆ¶ä½éƒ½ä¸º1ï¼Œç„¶ååœ¨ä¸<code>hashCode(key)</code>åšä¸è¿ç®—ï¼Œå³å¯å¾—åˆ°<code>[0,length)</code>å†…çš„ç´¢å¼•</p>
</blockquote>
<p>ä½†æ˜¯è¿™é‡Œæœ‰ä¸ªé—®é¢˜ï¼Œå¦‚æœ<code>hashCode(key)</code>çš„å¤§äº<code>length</code>çš„å€¼ï¼Œè€Œä¸”<code>hashCode(key)</code>çš„äºŒè¿›åˆ¶ä½çš„ä½ä½å˜åŒ–ä¸å¤§ï¼Œé‚£ä¹ˆå†²çªå°±ä¼šå¾ˆå¤šï¼Œä¸¾ä¸ªä¾‹å­ï¼š</p>
<blockquote>
<p>Javaä¸­å¯¹è±¡çš„å“ˆå¸Œå€¼éƒ½32ä½æ•´æ•°ï¼Œè€ŒHashMapé»˜è®¤å¤§å°ä¸º16ï¼Œé‚£ä¹ˆæœ‰ä¸¤ä¸ªå¯¹è±¡é‚£ä¹ˆçš„å“ˆå¸Œå€¼åˆ†åˆ«ä¸ºï¼š<code>0xABAB0000</code>ä¸<code>0xBABA0000</code>ï¼Œå®ƒä»¬çš„åå‡ ä½éƒ½æ˜¯ä¸€æ ·ï¼Œé‚£ä¹ˆä¸16å¼‚æˆ–åå¾—åˆ°ç»“æœåº”è¯¥ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä¹Ÿå°±æ˜¯äº§ç”Ÿäº†å†²çªã€‚</p>
</blockquote>
<p>é€ æˆå†²çªçš„åŸå› å…³é”®åœ¨äº16é™åˆ¶äº†åªèƒ½ç”¨ä½ä½æ¥è®¡ç®—ï¼Œé«˜ä½ç›´æ¥èˆå¼ƒäº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é¢å¤–çš„å“ˆå¸Œå‡½æ•°è€Œä¸åªæ˜¯ç®€å•çš„å¯¹è±¡çš„<code>hashCode</code>æ–¹æ³•äº†ã€‚<br>å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯HashMapä¸­<code>hash</code>å‡½æ•°å¹²çš„äº‹äº†</p>
<blockquote>
<p>é¦–å…ˆæœ‰ä¸ªéšæœºçš„hashSeedï¼Œæ¥é™ä½å†²çªå‘ç”Ÿçš„å‡ ç‡</p>
<p>ç„¶åå¦‚æœæ˜¯å­—ç¬¦ä¸²ï¼Œç”¨äº†<code>sun.misc.Hashing.stringHash32((String) k);</code>æ¥è·å–ç´¢å¼•å€¼</p>
<p>æœ€åï¼Œé€šè¿‡ä¸€ç³»åˆ—æ— ç¬¦å·å³ç§»æ“ä½œï¼Œæ¥æŠŠé«˜ä½ä¸ä½ä½è¿›è¡Œå¼‚æˆ–æ“ä½œï¼Œæ¥é™ä½å†²çªå‘ç”Ÿçš„å‡ ç‡</p>
</blockquote>
<p>å³ç§»çš„åç§»é‡20ï¼Œ12ï¼Œ7ï¼Œ4æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿå› ä¸ºJavaä¸­å¯¹è±¡çš„å“ˆå¸Œå€¼éƒ½æ˜¯32ä½çš„ï¼Œæ‰€ä»¥è¿™å‡ ä¸ªæ•°åº”è¯¥å°±æ˜¯æŠŠé«˜ä½ä¸ä½ä½åšå¼‚æˆ–è¿ç®—ï¼Œè‡³äºè¿™å‡ ä¸ªæ•°æ˜¯å¦‚ä½•é€‰å–çš„ï¼Œå°±ä¸æ¸…æ¥šäº†ï¼Œç½‘ä¸Šæœäº†åŠå¤©ä¹Ÿæ²¡ç»Ÿä¸€ä¸”è®©äººä¿¡æœçš„è¯´æ³•ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒä¸‹é¢å‡ ä¸ªé“¾æ¥ï¼š</p>
<ul>
<li><a href="http://stackoverflow.com/questions/7922019/openjdks-rehashing-mechanism/7922219#7922219" target="_blank" rel="external">http://stackoverflow.com/questions/7922019/openjdks-rehashing-mechanism/7922219#7922219</a></li>
<li><a href="http://stackoverflow.com/questions/9335169/understanding-strange-java-hash-function/9336103#9336103" target="_blank" rel="external">http://stackoverflow.com/questions/9335169/understanding-strange-java-hash-function/9336103#9336103</a></li>
<li><a href="http://stackoverflow.com/questions/14453163/can-anybody-explain-how-java-design-hashmaps-hash-function/14479945#14479945" target="_blank" rel="external">http://stackoverflow.com/questions/14453163/can-anybody-explain-how-java-design-hashmaps-hash-function/14479945#14479945</a></li>
</ul>
<h3 id="HashMap-Entry"><a href="#HashMap-Entry" class="headerlink" title="HashMap.Entry"></a>HashMap.Entry</h3><p>HashMapä¸­å­˜æ”¾çš„æ˜¯HashMap.Entryå¯¹è±¡ï¼Œå®ƒç»§æ‰¿è‡ªMap.Entryï¼Œå…¶æ¯”è¾ƒé‡è¦çš„æ˜¯æ„é€ å‡½æ•°<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">static class Entry&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; &#123;</div><div class="line">    final K key;</div><div class="line">    V value;</div><div class="line">    Entry&lt;K,V&gt; next;</div><div class="line">    int hash;</div><div class="line"></div><div class="line">    Entry(int h, K k, V v, Entry&lt;K,V&gt; n) &#123;</div><div class="line">        value = v;</div><div class="line">        next = n;</div><div class="line">        key = k;</div><div class="line">        hash = h;</div><div class="line">    &#125;</div><div class="line">    // setter, getter, equals, toString æ–¹æ³•çœç•¥</div><div class="line">    public final int hashCode() &#123;</div><div class="line">        //ç”¨keyçš„hashå€¼ä¸ä¸Švalueçš„hashå€¼ä½œä¸ºEntryçš„hashå€¼</div><div class="line">        return Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());</div><div class="line">    &#125;</div><div class="line">    /**</div><div class="line">     * This method is invoked whenever the value in an entry is</div><div class="line">     * overwritten by an invocation of put(k,v) for a key k that&apos;s already</div><div class="line">     * in the HashMap.</div><div class="line">     */</div><div class="line">    void recordAccess(HashMap&lt;K,V&gt; m) &#123;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * This method is invoked whenever the entry is</div><div class="line">     * removed from the table.</div><div class="line">     */</div><div class="line">    void recordRemoval(HashMap&lt;K,V&gt; m) &#123;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å¯ä»¥çœ‹åˆ°ï¼ŒEntryå®ç°äº†å•å‘é“¾è¡¨çš„åŠŸèƒ½ï¼Œç”¨<code>next</code>æˆå‘˜å˜é‡æ¥çº§è¿èµ·æ¥ã€‚</p>
<p>ä»‹ç»å®ŒEntryå¯¹è±¡ï¼Œä¸‹é¢è¦è¯´ä¸€ä¸ªæ¯”è¾ƒé‡è¦çš„æˆå‘˜å˜é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * The table, resized as necessary. Length MUST Always be a power of two.</div><div class="line"> */</div><div class="line">//HashMapå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªä¸ºæ•°ç»„ç±»å‹çš„Entryå˜é‡tableï¼Œç”¨æ¥ä¿å­˜æ·»åŠ è¿›æ¥çš„Entryå¯¹è±¡</div><div class="line">transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</div></pre></td></tr></table></figure></p>
<p>ä½ ä¹Ÿè®¸ä¼šç–‘é—®ï¼ŒEntryä¸æ˜¯å•å‘é“¾è¡¨å˜›ï¼Œæ€ä¹ˆè¿™é‡Œåˆéœ€è¦ä¸ªæ•°ç»„ç±»å‹çš„tableå‘¢ï¼Ÿ<br>æˆ‘ç¿»äº†ä¸‹ä¹‹å‰çš„ç®—æ³•ä¹¦ï¼Œå…¶å®è¿™æ˜¯è§£å†³å†²çªçš„ä¸€ä¸ªæ–¹å¼ï¼š<a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining" target="_blank" rel="external">é“¾åœ°å€æ³•ï¼ˆå¼€æ•£åˆ—æ³•ï¼‰</a>ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š</p>
<p><center><br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2rlT0eVXXXXazXpXXXXXXXXXX_!!581166664.gif" alt="é“¾åœ°å€æ³•å¤„ç†å†²çªå¾—åˆ°çš„æ•£åˆ—è¡¨"><br></center><br>å°±æ˜¯ç›¸åŒç´¢å¼•å€¼çš„Entryï¼Œä¼šä»¥å•å‘é“¾è¡¨çš„å½¢å¼å­˜åœ¨</p>
<h4 id="é“¾åœ°å€æ³•çš„å¯è§†åŒ–"><a href="#é“¾åœ°å€æ³•çš„å¯è§†åŒ–" class="headerlink" title="é“¾åœ°å€æ³•çš„å¯è§†åŒ–"></a>é“¾åœ°å€æ³•çš„å¯è§†åŒ–</h4><p>ç½‘ä¸Šæ‰¾åˆ°ä¸ªå¾ˆå¥½çš„ç½‘ç«™ï¼Œç”¨æ¥å¯è§†åŒ–å„ç§å¸¸è§çš„ç®—æ³•ï¼Œå¾ˆæ£’ã€‚ç¬é—´è§‰å¾—å›½å¤–å¤§å­¦æ¯”å›½å†…çš„å¼ºä¸çŸ¥å¤šå°‘å€ã€‚<br>ä¸‹é¢çš„é“¾æ¥å¯ä»¥æ¨¡ä»¿å“ˆå¸Œè¡¨é‡‡ç”¨é“¾åœ°å€æ³•è§£å†³å†²çªï¼Œå¤§å®¶å¯ä»¥è‡ªå·±å»ç©ç©ğŸ˜Š</p>
<ul>
<li><a href="https://www.cs.usfca.edu/~galles/visualization/OpenHash.html" target="_blank" rel="external">https://www.cs.usfca.edu/~galles/visualization/OpenHash.html</a></li>
</ul>
<h3 id="getæ“ä½œ"><a href="#getæ“ä½œ" class="headerlink" title="getæ“ä½œ"></a>getæ“ä½œ</h3><p>getæ“ä½œç›¸æ¯”putæ“ä½œç®€å•ï¼Œæ‰€ä»¥å…ˆä»‹ç»getæ“ä½œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line">public V get(Object key) &#123;</div><div class="line">    //å•ç‹¬å¤„ç†keyä¸ºnullçš„æƒ…å†µ</div><div class="line">    if (key == null)</div><div class="line">        return getForNullKey();</div><div class="line">    Entry&lt;K,V&gt; entry = getEntry(key);</div><div class="line"></div><div class="line">    return null == entry ? null : entry.getValue();</div><div class="line">&#125;</div><div class="line">private V getForNullKey() &#123;</div><div class="line">    if (size == 0) &#123;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    //keyä¸ºnullçš„Entryç”¨äºæ”¾åœ¨table[0]ä¸­ï¼Œä½†æ˜¯åœ¨table[0]å†²çªé“¾ä¸­çš„Entryçš„keyä¸ä¸€å®šä¸ºnull</div><div class="line">    //æ‰€ä»¥éœ€è¦éå†å†²çªé“¾ï¼ŒæŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨</div><div class="line">    for (Entry&lt;K,V&gt; e = table[0]; e != null; e = e.next) &#123;</div><div class="line">        if (e.key == null)</div><div class="line">            return e.value;</div><div class="line">    &#125;</div><div class="line">    return null;</div><div class="line">&#125;</div><div class="line">final Entry&lt;K,V&gt; getEntry(Object key) &#123;</div><div class="line">    if (size == 0) &#123;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    int hash = (key == null) ? 0 : hash(key);</div><div class="line">    //é¦–å…ˆå®šä½åˆ°ç´¢å¼•åœ¨tableä¸­çš„ä½ç½®</div><div class="line">    //ç„¶åéå†å†²çªé“¾ï¼ŒæŸ¥æ‰¾keyæ˜¯å¦å­˜åœ¨</div><div class="line">    for (Entry&lt;K,V&gt; e = table[indexFor(hash, table.length)];</div><div class="line">         e != null;</div><div class="line">         e = e.next) &#123;</div><div class="line">        Object k;</div><div class="line">        if (e.hash == hash &amp;&amp;</div><div class="line">            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))</div><div class="line">            return e;</div><div class="line">    &#125;</div><div class="line">    return null;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="putæ“ä½œï¼ˆå«updateæ“ä½œï¼‰"><a href="#putæ“ä½œï¼ˆå«updateæ“ä½œï¼‰" class="headerlink" title="putæ“ä½œï¼ˆå«updateæ“ä½œï¼‰"></a>putæ“ä½œï¼ˆå«updateæ“ä½œï¼‰</h3><p>å› ä¸ºputæ“ä½œæœ‰å¯èƒ½éœ€è¦å¯¹HashMapè¿›è¡Œresizeï¼Œæ‰€ä»¥å®ç°ç•¥å¤æ‚äº›</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div></pre></td><td class="code"><pre><div class="line">private void inflateTable(int toSize) &#123;</div><div class="line">    //è¾…åŠ©å‡½æ•°ï¼Œç”¨äºå¡«å……HashMapåˆ°æŒ‡å®šçš„capacity</div><div class="line">    // Find a power of 2 &gt;= toSize</div><div class="line">    int capacity = roundUpToPowerOf2(toSize);</div><div class="line">    //thresholdä¸ºresizeçš„é˜ˆå€¼ï¼Œè¶…è¿‡åHashMapä¼šè¿›è¡Œresizeï¼Œå†…å®¹çš„entryä¼šè¿›è¡Œrehash</div><div class="line">    threshold = (int) Math.min(capacity * loadFactor, MAXIMUM_CAPACITY + 1);</div><div class="line">    table = new Entry[capacity];</div><div class="line">    initHashSeedAsNeeded(capacity);</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * Associates the specified value with the specified key in this map.</div><div class="line"> * If the map previously contained a mapping for the key, the old</div><div class="line"> * value is replaced.</div><div class="line"> */</div><div class="line">public V put(K key, V value) &#123;</div><div class="line">    if (table == EMPTY_TABLE) &#123;</div><div class="line">        inflateTable(threshold);</div><div class="line">    &#125;</div><div class="line">    if (key == null)</div><div class="line">        return putForNullKey(value);</div><div class="line">    int hash = hash(key);</div><div class="line">    int i = indexFor(hash, table.length);</div><div class="line">    //è¿™é‡Œçš„å¾ªç¯æ˜¯å…³é”®</div><div class="line">    //å½“æ–°å¢çš„keyæ‰€å¯¹åº”çš„ç´¢å¼•iï¼Œå¯¹åº”table[i]ä¸­å·²ç»æœ‰å€¼æ—¶ï¼Œè¿›å…¥å¾ªç¯ä½“</div><div class="line">    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123;</div><div class="line">        Object k;</div><div class="line">        //åˆ¤æ–­æ˜¯å¦å­˜åœ¨æœ¬æ¬¡æ’å…¥çš„keyï¼Œå¦‚æœå­˜åœ¨ç”¨æœ¬æ¬¡çš„valueæ›¿æ¢ä¹‹å‰oldValueï¼Œç›¸å½“äºupdateæ“ä½œ</div><div class="line">        //å¹¶è¿”å›ä¹‹å‰çš„oldValue</div><div class="line">        if (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;</div><div class="line">            V oldValue = e.value;</div><div class="line">            e.value = value;</div><div class="line">            e.recordAccess(this);</div><div class="line">            return oldValue;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    //å¦‚æœæœ¬æ¬¡æ–°å¢keyä¹‹å‰ä¸å­˜åœ¨äºHashMapä¸­ï¼ŒmodCountåŠ 1ï¼Œè¯´æ˜ç»“æ„æ”¹å˜äº†</div><div class="line">    modCount++;</div><div class="line">    addEntry(hash, key, value, i);</div><div class="line">    return null;</div><div class="line">&#125;</div><div class="line">void addEntry(int hash, K key, V value, int bucketIndex) &#123;</div><div class="line">    //å¦‚æœå¢åŠ ä¸€ä¸ªå…ƒç´ ä¼šåï¼ŒHashMapçš„å¤§å°è¶…è¿‡é˜ˆå€¼ï¼Œéœ€è¦resize</div><div class="line">    if ((size &gt;= threshold) &amp;&amp; (null != table[bucketIndex])) &#123;</div><div class="line">        //å¢åŠ çš„å¹…åº¦æ˜¯ä¹‹å‰çš„1å€</div><div class="line">        resize(2 * table.length);</div><div class="line">        hash = (null != key) ? hash(key) : 0;</div><div class="line">        bucketIndex = indexFor(hash, table.length);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createEntry(hash, key, value, bucketIndex);</div><div class="line">&#125;</div><div class="line">void createEntry(int hash, K key, V value, int bucketIndex) &#123;</div><div class="line">    //é¦–å…ˆå¾—åˆ°è¯¥ç´¢å¼•å¤„çš„å†²çªé“¾Entriesï¼Œç¬¬ä¸€æ¬¡æ’å…¥bucketIndexä½ç½®æ—¶å†²çªé“¾ä¸ºnullï¼Œä¹Ÿå°±æ˜¯eä¸ºnull</div><div class="line">    Entry&lt;K,V&gt; e = table[bucketIndex];</div><div class="line">    //ç„¶åæŠŠæ–°çš„Entryæ·»åŠ åˆ°å†²çªé“¾çš„å¼€å¤´ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåæ’å…¥çš„åè€Œåœ¨å‰é¢ï¼ˆç¬¬ä¸€æ¬¡è¿˜çœŸæ²¡çœ‹æ˜ç™½ï¼‰</div><div class="line">    //table[bucketIndex]ä¸ºæ–°åŠ å…¥çš„Entryï¼Œæ˜¯bucketIndexä½ç½®çš„å†²çªé“¾çš„ç¬¬ä¸€ä¸ªå…ƒç´ </div><div class="line">    table[bucketIndex] = new Entry&lt;&gt;(hash, key, value, e);</div><div class="line">    size++;</div><div class="line">&#125;</div><div class="line">//ä¸‹é¢çœ‹çœ‹HashMapæ˜¯å¦‚ä½•è¿›è¡Œresizeï¼Œåºå±±çœŸé¢ç›®å°±è¦æ­æ™“äº†ğŸ˜Š</div><div class="line">void resize(int newCapacity) &#123;</div><div class="line">    Entry[] oldTable = table;</div><div class="line">    int oldCapacity = oldTable.length;</div><div class="line">    //å¦‚æœå·²ç»è¾¾åˆ°æœ€å¤§å®¹é‡ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›</div><div class="line">    if (oldCapacity == MAXIMUM_CAPACITY) &#123;</div><div class="line">        threshold = Integer.MAX_VALUE;</div><div class="line">        return;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    Entry[] newTable = new Entry[newCapacity];</div><div class="line">    //initHashSeedAsNeeded(newCapacity)çš„è¿”å›å€¼å†³å®šäº†æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®—Entryçš„hashå€¼</div><div class="line">    transfer(newTable, initHashSeedAsNeeded(newCapacity));</div><div class="line">    table = newTable;</div><div class="line">    threshold = (int)Math.min(newCapacity * loadFactor, MAXIMUM_CAPACITY + 1);</div><div class="line">&#125;</div><div class="line"></div><div class="line">/**</div><div class="line"> * Transfers all entries from current table to newTable.</div><div class="line"> */</div><div class="line">void transfer(Entry[] newTable, boolean rehash) &#123;</div><div class="line">    int newCapacity = newTable.length;</div><div class="line">    //éå†å½“å‰çš„tableï¼Œå°†é‡Œé¢çš„å…ƒç´ æ·»åŠ åˆ°æ–°çš„newTableä¸­</div><div class="line">    for (Entry&lt;K,V&gt; e : table) &#123;</div><div class="line">        while(null != e) &#123;</div><div class="line">            Entry&lt;K,V&gt; next = e.next;</div><div class="line">            if (rehash) &#123;</div><div class="line">                e.hash = null == e.key ? 0 : hash(e.key);</div><div class="line">            &#125;</div><div class="line">            int i = indexFor(e.hash, newCapacity);</div><div class="line">            e.next = newTable[i];</div><div class="line">            //æœ€åè¿™ä¸¤å¥ç”¨äº†ä¸putæ”¾è¿‡ç›¸åŒçš„æŠ€å·§</div><div class="line">            //å°†åæ’å…¥çš„åè€Œåœ¨å‰é¢</div><div class="line">            newTable[i] = e;</div><div class="line">            e = next;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line"> * Initialize the hashing mask value. We defer initialization until we</div><div class="line"> * really need it.</div><div class="line"> */</div><div class="line">final boolean initHashSeedAsNeeded(int capacity) &#123;</div><div class="line">    boolean currentAltHashing = hashSeed != 0;</div><div class="line">    boolean useAltHashing = sun.misc.VM.isBooted() &amp;&amp;</div><div class="line">            (capacity &gt;= Holder.ALTERNATIVE_HASHING_THRESHOLD);</div><div class="line">    //è¿™é‡Œè¯´æ˜äº†ï¼Œåœ¨hashSeedä¸ä¸º0æˆ–æ»¡è¶³useAltHashæ—¶ï¼Œä¼šé‡ç®—Entryçš„hashå€¼</div><div class="line">    //è‡³äºuseAltHashingçš„ä½œç”¨å¯ä»¥å‚è€ƒä¸‹é¢çš„é“¾æ¥</div><div class="line">    // http://stackoverflow.com/questions/29918624/what-is-the-use-of-holder-class-in-hashmap</div><div class="line">    boolean switching = currentAltHashing ^ useAltHashing;</div><div class="line">    if (switching) &#123;</div><div class="line">        hashSeed = useAltHashing</div><div class="line">            ? sun.misc.Hashing.randomHashSeed(this)</div><div class="line">            : 0;</div><div class="line">    &#125;</div><div class="line">    return switching;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="removeæ“ä½œ"><a href="#removeæ“ä½œ" class="headerlink" title="removeæ“ä½œ"></a>removeæ“ä½œ</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">public V remove(Object key) &#123;</div><div class="line">    Entry&lt;K,V&gt; e = removeEntryForKey(key);</div><div class="line">    //å¯ä»¥çœ‹åˆ°åˆ é™¤çš„keyå¦‚æœå­˜åœ¨ï¼Œå°±è¿”å›å…¶æ‰€å¯¹åº”çš„value</div><div class="line">    return (e == null ? null : e.value);</div><div class="line">&#125;</div><div class="line">final Entry&lt;K,V&gt; removeEntryForKey(Object key) &#123;</div><div class="line">    if (size == 0) &#123;</div><div class="line">        return null;</div><div class="line">    &#125;</div><div class="line">    int hash = (key == null) ? 0 : hash(key);</div><div class="line">    int i = indexFor(hash, table.length);</div><div class="line">    //è¿™é‡Œç”¨äº†ä¸¤ä¸ªEntryå¯¹è±¡ï¼Œç›¸å½“äºä¸¤ä¸ªæŒ‡é’ˆï¼Œä¸ºçš„æ˜¯é˜²æ²»å†²çªé“¾å‘ç”Ÿæ–­è£‚çš„æƒ…å†µ</div><div class="line">    //è¿™é‡Œçš„æ€è·¯å°±æ˜¯ä¸€èˆ¬çš„å•å‘é“¾è¡¨çš„åˆ é™¤æ€è·¯</div><div class="line">    Entry&lt;K,V&gt; prev = table[i];</div><div class="line">    Entry&lt;K,V&gt; e = prev;</div><div class="line"></div><div class="line">    //å½“table[i]ä¸­å­˜åœ¨å†²çªé“¾æ—¶ï¼Œå¼€å§‹éå†é‡Œé¢çš„å…ƒç´ </div><div class="line">    while (e != null) &#123;</div><div class="line">        Entry&lt;K,V&gt; next = e.next;</div><div class="line">        Object k;</div><div class="line">        if (e.hash == hash &amp;&amp;</div><div class="line">            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123;</div><div class="line">            modCount++;</div><div class="line">            size--;</div><div class="line">            if (prev == e) //å½“å†²çªé“¾åªæœ‰ä¸€ä¸ªEntryæ—¶</div><div class="line">                table[i] = next;</div><div class="line">            else</div><div class="line">                prev.next = next;</div><div class="line">            e.recordRemoval(this);</div><div class="line">            return e;</div><div class="line">        &#125;</div><div class="line">        prev = e;</div><div class="line">        e = next;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    return e;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼ŒHashMapçš„å¢åˆ æ”¹æŸ¥éƒ½ä»‹ç»å®Œäº†ã€‚<br>ä¸€èˆ¬è€Œè¨€ï¼Œè®¤ä¸ºHashMapçš„è¿™å››ç§æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œå› ä¸ºå®ƒhashå‡½æ•°æ€§è´¨è¾ƒå¥½ï¼Œä¿è¯äº†å†²çªå‘ç”Ÿçš„å‡ ç‡è¾ƒå°ã€‚</p>
</blockquote>
<h3 id="fast-failçš„HashIterator"><a href="#fast-failçš„HashIterator" class="headerlink" title="fast-failçš„HashIterator"></a>fast-failçš„HashIterator</h3><p>é›†åˆç±»ç”¨<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html" target="_blank" rel="external">Iterator</a>ç±»æ¥éå†å…¶åŒ…å«çš„å…ƒç´ ï¼Œ<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Enumeration.html" target="_blank" rel="external">æ¥å£Enumeration</a>å·²ç»ä¸æ¨èä½¿ç”¨ã€‚ç›¸æ¯”Enumerationï¼ŒIteratoræœ‰ä¸‹é¢ä¸¤ä¸ªä¼˜åŠ¿ï¼š</p>
<ol>
<li>Iteratorå…è®¸è°ƒç”¨è€…åœ¨éå†é›†åˆç±»æ—¶åˆ é™¤é›†åˆç±»ä¸­åŒ…å«çš„å…ƒç´ ï¼ˆç›¸æ¯”Enumerationå¢åŠ äº†removeæ–¹æ³•ï¼‰</li>
<li>æ¯”Enumerationçš„å‘½åæ›´ç®€çŸ­</li>
</ol>
<p>HashMapä¸­æä¾›çš„ä¸‰ç§é›†åˆè§†è§’ï¼Œåº•å±‚éƒ½æ˜¯ç”¨HashIteratorå®ç°çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">private abstract class HashIterator&lt;E&gt; implements Iterator&lt;E&gt; &#123;</div><div class="line">    Entry&lt;K,V&gt; next;        // next entry to return</div><div class="line">    //åœ¨åˆå§‹åŒ–Iteratorå®ä¾‹æ—¶ï¼Œçºªå½•ä¸‹å½“å‰çš„ä¿®æ”¹æ¬¡æ•°</div><div class="line">    int expectedModCount;   // For fast-fail</div><div class="line">    int index;              // current slot</div><div class="line">    Entry&lt;K,V&gt; current;     // current entry</div><div class="line"></div><div class="line">    HashIterator() &#123;</div><div class="line">        expectedModCount = modCount;</div><div class="line">        if (size &gt; 0) &#123; // advance to first entry</div><div class="line">            Entry[] t = table;</div><div class="line">            //éå†HashMapçš„tableï¼Œä¾æ¬¡æŸ¥æ‰¾å…ƒç´ </div><div class="line">            while (index &lt; t.length &amp;&amp; (next = t[index++]) == null)</div><div class="line">                ;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public final boolean hasNext() &#123;</div><div class="line">        return next != null;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    final Entry&lt;K,V&gt; nextEntry() &#123;</div><div class="line">        //åœ¨è®¿é—®ä¸‹ä¸€ä¸ªEntryæ—¶ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æœ‰å¯¹é›†åˆçš„ä¿®æ”¹</div><div class="line">        //è¯´æ˜HashMapæ˜¯çº¿ç¨‹éå®‰å…¨çš„</div><div class="line">        if (modCount != expectedModCount)</div><div class="line">            throw new ConcurrentModificationException();</div><div class="line">        Entry&lt;K,V&gt; e = next;</div><div class="line">        if (e == null)</div><div class="line">            throw new NoSuchElementException();</div><div class="line"></div><div class="line">        if ((next = e.next) == null) &#123;</div><div class="line">            Entry[] t = table;</div><div class="line">            while (index &lt; t.length &amp;&amp; (next = t[index++]) == null)</div><div class="line">                ;</div><div class="line">        &#125;</div><div class="line">        current = e;</div><div class="line">        return e;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public void remove() &#123;</div><div class="line">        if (current == null)</div><div class="line">            throw new IllegalStateException();</div><div class="line">        if (modCount != expectedModCount)</div><div class="line">            throw new ConcurrentModificationException();</div><div class="line">        Object k = current.key;</div><div class="line">        current = null;</div><div class="line">        HashMap.this.removeEntryForKey(k);</div><div class="line">        expectedModCount = modCount;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private final class ValueIterator extends HashIterator&lt;V&gt; &#123;</div><div class="line">    public V next() &#123;</div><div class="line">        return nextEntry().value;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private final class KeyIterator extends HashIterator&lt;K&gt; &#123;</div><div class="line">    public K next() &#123;</div><div class="line">        return nextEntry().getKey();</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private final class EntryIterator extends HashIterator&lt;Map.Entry&lt;K,V&gt;&gt; &#123;</div><div class="line">    public Map.Entry&lt;K,V&gt; next() &#123;</div><div class="line">        return nextEntry();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="åºåˆ—åŒ–"><a href="#åºåˆ—åŒ–" class="headerlink" title="åºåˆ—åŒ–"></a>åºåˆ—åŒ–</h3><p>ä»‹ç»åˆ°è¿™é‡Œï¼ŒåŸºæœ¬ä¸Šç®—æ˜¯æŠŠHashMapä¸­ä¸€äº›æ ¸å¿ƒçš„ç‚¹è®²å®Œäº†ï¼Œä½†è¿˜æœ‰ä¸ªæ¯”è¾ƒä¸¥é‡çš„é—®é¢˜ï¼šä¿å­˜Entryçš„tableæ•°ç»„ä¸ºtransientçš„ï¼Œä¹Ÿå°±æ˜¯è¯´åœ¨è¿›è¡Œåºåˆ—åŒ–æ—¶ï¼Œå¹¶ä¸ä¼šåŒ…å«è¯¥æˆå‘˜ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">transient Entry&lt;K,V&gt;[] table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†è§£ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸‹é¢äº‹å®ï¼š</p>
<ul>
<li>Object.hashCodeæ–¹æ³•å¯¹äºä¸€ä¸ªç±»çš„ä¸¤ä¸ªå®ä¾‹è¿”å›çš„æ˜¯ä¸åŒçš„å“ˆå¸Œå€¼</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥è¯•æƒ³ä¸‹é¢çš„åœºæ™¯ï¼š</p>
<blockquote>
<p>æˆ‘ä»¬åœ¨æœºå™¨Aä¸Šç®—å‡ºå¯¹è±¡Açš„å“ˆå¸Œå€¼ä¸ç´¢å¼•ï¼Œç„¶åæŠŠå®ƒæ’å…¥åˆ°HashMapä¸­ï¼Œç„¶åæŠŠè¯¥HashMapåºåˆ—åŒ–åï¼Œåœ¨æœºå™¨Bä¸Šé‡æ–°ç®—å¯¹è±¡çš„å“ˆå¸Œå€¼ä¸ç´¢å¼•ï¼Œè¿™ä¸æœºå™¨Aä¸Šç®—å‡ºçš„æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æœºå™¨Bä¸Šgetå¯¹è±¡Aæ—¶ï¼Œä¼šå¾—åˆ°é”™è¯¯çš„ç»“æœã€‚</p>
<p>æ‰€ä»¥è¯´ï¼Œå½“åºåˆ—åŒ–ä¸€ä¸ªHashMapå¯¹è±¡æ—¶ï¼Œä¿å­˜Entryçš„tableæ˜¯ä¸éœ€è¦åºåˆ—åŒ–è¿›æ¥çš„ï¼Œå› ä¸ºå®ƒåœ¨å¦ä¸€å°æœºå™¨ä¸Šæ˜¯é”™è¯¯çš„ã€‚</p>
</blockquote>
<p>å› ä¸ºè¿™ä¸ªåŸå› ï¼ŒHashMapé‡å†™äº†<code>writeObject</code>ä¸<code>readObject</code> æ–¹æ³•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div></pre></td><td class="code"><pre><div class="line">private void writeObject(java.io.ObjectOutputStream s)</div><div class="line">    throws IOException</div><div class="line">&#123;</div><div class="line">    // Write out the threshold, loadfactor, and any hidden stuff</div><div class="line">    s.defaultWriteObject();</div><div class="line"></div><div class="line">    // Write out number of buckets</div><div class="line">    if (table==EMPTY_TABLE) &#123;</div><div class="line">        s.writeInt(roundUpToPowerOf2(threshold));</div><div class="line">    &#125; else &#123;</div><div class="line">       s.writeInt(table.length);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // Write out size (number of Mappings)</div><div class="line">    s.writeInt(size);</div><div class="line"></div><div class="line">    // Write out keys and values (alternating)</div><div class="line">    if (size &gt; 0) &#123;</div><div class="line">        for(Map.Entry&lt;K,V&gt; e : entrySet0()) &#123;</div><div class="line">            s.writeObject(e.getKey());</div><div class="line">            s.writeObject(e.getValue());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">private static final long serialVersionUID = 362498820763181265L;</div><div class="line"></div><div class="line">private void readObject(java.io.ObjectInputStream s)</div><div class="line">     throws IOException, ClassNotFoundException</div><div class="line">&#123;</div><div class="line">    // Read in the threshold (ignored), loadfactor, and any hidden stuff</div><div class="line">    s.defaultReadObject();</div><div class="line">    if (loadFactor &lt;= 0 || Float.isNaN(loadFactor)) &#123;</div><div class="line">        throw new InvalidObjectException(&quot;Illegal load factor: &quot; +</div><div class="line">                                           loadFactor);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    // set other fields that need values</div><div class="line">    table = (Entry&lt;K,V&gt;[]) EMPTY_TABLE;</div><div class="line"></div><div class="line">    // Read in number of buckets</div><div class="line">    s.readInt(); // ignored.</div><div class="line"></div><div class="line">    // Read number of mappings</div><div class="line">    int mappings = s.readInt();</div><div class="line">    if (mappings &lt; 0)</div><div class="line">        throw new InvalidObjectException(&quot;Illegal mappings count: &quot; +</div><div class="line">                                           mappings);</div><div class="line"></div><div class="line">    // capacity chosen by number of mappings and desired load (if &gt;= 0.25)</div><div class="line">    int capacity = (int) Math.min(</div><div class="line">                mappings * Math.min(1 / loadFactor, 4.0f),</div><div class="line">                // we have limits...</div><div class="line">                HashMap.MAXIMUM_CAPACITY);</div><div class="line"></div><div class="line">    // allocate the bucket array;</div><div class="line">    if (mappings &gt; 0) &#123;</div><div class="line">        inflateTable(capacity);</div><div class="line">    &#125; else &#123;</div><div class="line">        threshold = capacity;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    init();  // Give subclass a chance to do its thing.</div><div class="line"></div><div class="line">    // Read the keys and values, and put the mappings in the HashMap</div><div class="line">    for (int i = 0; i &lt; mappings; i++) &#123;</div><div class="line">        K key = (K) s.readObject();</div><div class="line">        V value = (V) s.readObject();</div><div class="line">        putForCreate(key, value);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">private void putForCreate(K key, V value) &#123;</div><div class="line">    int hash = null == key ? 0 : hash(key);</div><div class="line">    int i = indexFor(hash, table.length);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Look for preexisting entry for key.  This will never happen for</div><div class="line">     * clone or deserialize.  It will only happen for construction if the</div><div class="line">     * input Map is a sorted map whose ordering is inconsistent w/ equals.</div><div class="line">     */</div><div class="line">    for (Entry&lt;K,V&gt; e = table[i]; e != null; e = e.next) &#123;</div><div class="line">        Object k;</div><div class="line">        if (e.hash == hash &amp;&amp;</div><div class="line">            ((k = e.key) == key || (key != null &amp;&amp; key.equals(k)))) &#123;</div><div class="line">            e.value = value;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    createEntry(hash, key, value, i);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ç®€å•æ¥è¯´ï¼Œåœ¨åºåˆ—åŒ–æ—¶ï¼Œé’ˆå¯¹Entryçš„keyä¸valueåˆ†åˆ«å•ç‹¬åºåˆ—åŒ–ï¼Œå½“ååºåˆ—åŒ–æ—¶ï¼Œå†å•ç‹¬å¤„ç†å³å¯ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>åœ¨æ€»ç»“å®ŒHashMapåï¼Œå‘ç°è¿™é‡Œé¢ä¸€äº›æ ¸å¿ƒçš„ä¸œè¥¿ï¼Œåƒå“ˆå¸Œè¡¨çš„å†²çªè§£å†³ï¼Œéƒ½æ˜¯ç®—æ³•è¯¾ä¸Šå­¦åˆ°ï¼Œä¸è¿‡ç”±äºâ€œå¹´ä»£ä¹…è¿œâ€ï¼Œå·²ç»å¿˜å¾—å·®ä¸å¤šäº†ï¼Œæˆ‘è§‰å¾—å¿˜</p>
<ul>
<li>ä¸€æ–¹é¢æ˜¯ç”±äºæ—¶é—´ä¹…ä¸ç”¨</li>
<li>å¦ä¸€æ–¹é¢æ˜¯ç”±äºæœ¬èº«æ²¡ç†è§£å¥½</li>
</ul>
<p>å¹³æ—¶å¤šå»æ€è€ƒï¼Œè¿™æ ·åœ¨é‡åˆ°ä¸€äº›æ€§èƒ½é—®é¢˜æ—¶ä¹Ÿå¥½æ’æŸ¥ã€‚</p>
<p>è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯æˆ‘ä»¬åœ¨åˆ†ææŸäº›å…·ä½“ç±»æˆ–æ–¹æ³•æ—¶ï¼Œä¸è¦èŠ±å¤ªå¤šæ—¶é—´ä¸€äº›ç»†ææœ«èŠ‚çš„è¾¹ç•Œæ¡ä»¶ä¸Šï¼Œè¿™æ ·å¾ˆå¾—ä¸å¿å¤±ï¼Œå€’ä¸æ˜¯è¯´è¿™ä¹ˆè¾¹ç•Œæ¡ä»¶ä¸é‡è¦ï¼Œç¨‹åºçš„bugå¾€å¾€å°±æ˜¯è¾¹ç•Œæ¡ä»¶æ²¡è€ƒè™‘å‘¨å…¨å¯¼è‡´çš„ã€‚<br>åªæ˜¯è¯´æˆ‘ä»¬å¯ä»¥åœ¨ç†è§£äº†è¿™ä¸ªç±»æˆ–æ–¹æ³•çš„æ€»ä½“æ€è·¯åï¼Œå†æ¥åˆ†æè¿™äº›è¾¹ç•Œæ¡ä»¶ã€‚<br>å¦‚æœä¸€å¼€å§‹å°±åˆ†æï¼Œé‚£çœŸæ˜¯ä¸ˆäºŒå’Œå°šâ€”â€”æ‘¸ä¸ç€å¤´è„‘äº†ï¼Œéšç€å¯¹å®ƒå·¥ä½œåŸç†çš„åŠ æ·±ï¼Œæ‰æœ‰å¯èƒ½ç†è§£è¿™äº›è¾¹ç•Œæ¡ä»¶çš„åœºæ™¯ã€‚</p>
<p>ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ï¼Œä¸‹æ¬¡æ‰“ç®—åˆ†æ<a href="/blog/2015/09/04/java-treemap/">TreeMap</a>ã€‚<del>Stay Tunedï¼ğŸº</del>ã€‚æˆ‘å·²ç»å†™å®Œäº†ï¼Œä¸¤ç¯‡æ–‡ç« å¯¹æ¯”çœ‹ï¼Œæ•ˆæœæ›´å¥½ã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://supercoderz.in/understanding-transient-variables-in-java-and-how-they-are-practically-used-in-hashmap/" target="_blank" rel="external">http://supercoderz.in/understanding-transient-variables-in-java-and-how-they-are-practically-used-in-hashmap/</a></li>
<li><a href="http://stackoverflow.com/questions/9144472/why-is-the-hash-table-of-hashmap-marked-as-transient-although-the-class-is-seria" target="_blank" rel="external">http://stackoverflow.com/questions/9144472/why-is-the-hash-table-of-hashmap-marked-as-transient-although-the-class-is-seria</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»§ä¸Šä¸€ç¯‡æ–‡ç« &lt;a href=&quot;/blog/2015/09/01/java-collection-overview&quot;&gt;Javaé›†åˆæ¡†æ¶ç»¼è¿°&lt;/a&gt;åï¼Œä»Šå¤©æ­£å¼å¼€å§‹åˆ†æå…·ä½“é›†åˆç±»çš„ä»£ç ï¼Œé¦–å…ˆä»¥æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿçš„&lt;a href=&quot;http://docs.oracle.com/java
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Javaé›†åˆæ¡†æ¶ç»¼è¿°</title>
    <link href="http://liujiacai.net/blog/2015/09/01/java-collection-overview/"/>
    <id>http://liujiacai.net/blog/2015/09/01/java-collection-overview/</id>
    <published>2015-09-01T13:18:05.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘è¢«é™†é™†ç»­ç»­é—®äº†å‡ éHashMapçš„å®ç°ï¼Œå›ç­”çš„ä¸å¥½ï¼Œæ‰“ç®—å¤ä¹ å¤ä¹ JDKä¸­çš„<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html" target="_blank" rel="external">é›†åˆæ¡†æ¶</a>ï¼Œå¹¶å°è¯•åˆ†æå…¶æºç ï¼Œè¿™ä¹ˆåšä¸€æ–¹é¢æ˜¯è¿™äº›ç±»éå¸¸å®ç”¨ï¼ŒæŒæ¡å…¶å®ç°èƒ½æ›´å¥½çš„ä¼˜åŒ–æˆ‘ä»¬çš„ç¨‹åºï¼›å¦ä¸€æ–¹é¢æ˜¯å­¦ä¹ å€Ÿé‰´JDKæ˜¯å¦‚ä½•å®ç°äº†è¿™ä¹ˆä¸€å¥—ä¼˜é›…é«˜æ•ˆçš„ç±»åº“ï¼Œæå‡ç¼–ç¨‹èƒ½åŠ›ã€‚</p>
<p>åœ¨ä»‹ç»å…·ä½“é€‚åˆç±»ä¹‹å‰ï¼Œæœ¬ç¯‡æ–‡ç« å¯¹Javaä¸­çš„é›†åˆæ¡†æ¶åšä¸€ä¸ªå¤§è‡´æè¿°ï¼Œä»ä¸€ä¸ªé«˜çš„è§’åº¦ä¿¯è§†è¿™ä¸ªæ¡†æ¶ï¼Œäº†è§£äº†è¿™ä¸ªæ¡†æ¶çš„ä¸€äº›ç†å¿µä¸çº¦å®šï¼Œä¼šå¤§å¤§å¸®åŠ©åé¢åˆ†ææŸä¸ªå…·ä½“ç±»ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚</p>
<h2 id="é›†åˆæ¡†æ¶ï¼ˆcollections-frameworkï¼‰"><a href="#é›†åˆæ¡†æ¶ï¼ˆcollections-frameworkï¼‰" class="headerlink" title="é›†åˆæ¡†æ¶ï¼ˆcollections frameworkï¼‰"></a>é›†åˆæ¡†æ¶ï¼ˆcollections frameworkï¼‰</h2><p>é¦–å…ˆè¦æ˜ç¡®ï¼Œé›†åˆä»£è¡¨äº†ä¸€ç»„å¯¹è±¡ï¼ˆå’Œæ•°ç»„ä¸€æ ·ï¼Œä½†æ•°ç»„é•¿åº¦ä¸èƒ½å˜ï¼Œè€Œé›†åˆèƒ½ï¼‰ã€‚Javaä¸­çš„é›†åˆæ¡†æ¶å®šä¹‰äº†ä¸€å¥—è§„èŒƒï¼Œç”¨æ¥è¡¨ç¤ºã€æ“ä½œé›†åˆï¼Œä½¿å…·ä½“æ“ä½œä¸å®ç°ç»†èŠ‚è§£è€¦ã€‚</p>
<p>å…¶å®è¯´ç™½äº†ï¼Œå¯ä»¥æŠŠä¸€ä¸ªé›†åˆçœ‹æˆä¸€ä¸ªå¾®å‹æ•°æ®åº“ï¼Œæ“ä½œä¸å¤–ä¹â€œå¢åˆ æ”¹æŸ¥â€å››ç§æ“ä½œï¼Œæˆ‘ä»¬åœ¨å­¦ä¹ ä½¿ç”¨ä¸€ä¸ªå…·ä½“çš„é›†åˆç±»æ—¶ï¼Œéœ€è¦æŠŠè¿™å››ä¸ªæ“ä½œçš„<code>æ—¶ç©ºå¤æ‚åº¦</code>å¼„æ¸…æ¥šäº†ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥è¯´æŒæ¡è¿™ä¸ªç±»äº†ã€‚</p>
<h2 id="è®¾è®¡ç†å¿µ"><a href="#è®¾è®¡ç†å¿µ" class="headerlink" title="è®¾è®¡ç†å¿µ"></a>è®¾è®¡ç†å¿µ</h2><p>ä¸»è¦ç†å¿µç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šæä¾›ä¸€å¥—â€œå°è€Œç¾â€çš„APIã€‚APIéœ€è¦å¯¹ç¨‹åºå‘˜å‹å¥½ï¼Œå¢åŠ æ–°åŠŸèƒ½æ—¶èƒ½è®©ç¨‹åºå‘˜ä»¬å¿«é€Ÿä¸Šæ‰‹ã€‚<br>ä¸ºäº†ä¿è¯æ ¸å¿ƒæ¥å£è¶³å¤Ÿå°ï¼Œæœ€é¡¶å±‚çš„æ¥å£ï¼ˆä¹Ÿå°±æ˜¯Collectionä¸Mapæ¥å£ï¼‰å¹¶ä¸ä¼šåŒºåˆ†è¯¥é›†åˆæ˜¯å¦å¯å˜ï¼ˆmutabilityï¼‰,æ˜¯å¦å¯æ›´æ”¹ï¼ˆmodifiabilityï¼‰,æ˜¯å¦å¯æ”¹å˜å¤§å°ï¼ˆresizabilityï¼‰è¿™äº›ç»†å¾®çš„å·®åˆ«ã€‚ç›¸åï¼Œä¸€äº›æ“ä½œæ˜¯å¯é€‰çš„ï¼Œåœ¨å®ç°æ—¶æŠ›å‡º<code>UnsupportedOperationException</code>å³å¯è¡¨ç¤ºé›†åˆä¸æ”¯æŒè¯¥æ“ä½œã€‚é›†åˆçš„å®ç°è€…å¿…é¡»åœ¨æ–‡æ¡£ä¸­å£°æ˜é‚£äº›æ“ä½œæ˜¯ä¸æ”¯æŒçš„ã€‚</p>
<p>ä¸ºäº†ä¿è¯æœ€é¡¶å±‚çš„æ ¸å¿ƒæ¥å£è¶³å¤Ÿå°ï¼Œå®ƒä»¬åªèƒ½åŒ…å«ä¸‹é¢æƒ…å†µä¸‹çš„æ–¹æ³•ï¼š</p>
<ol>
<li>åŸºæœ¬æ“ä½œï¼Œåƒä¹‹å‰è¯´çš„â€œå¢åˆ æ”¹æŸ¥â€</li>
<li>There is a compelling performance reason why an important implementation would want to override it.</li>
</ol>
<p>æ­¤å¤–ï¼Œæ‰€æœ‰çš„é›†åˆç±»éƒ½å¿…é¡»èƒ½æä¾›å‹å¥½çš„äº¤äº’æ“ä½œï¼Œè¿™åŒ…æ‹¬æ²¡æœ‰ç»§æ‰¿<code>Collection</code>ç±»çš„æ•°ç»„å¯¹è±¡ã€‚å› æ­¤ï¼Œæ¡†æ¶æä¾›ä¸€å¥—æ–¹æ³•ï¼Œè®©é›†åˆç±»ä¸æ•°ç»„å¯ä»¥ç›¸äº’è½¬åŒ–ï¼Œå¹¶ä¸”å¯ä»¥æŠŠ<code>Map</code>çœ‹ä½œæˆé›†åˆã€‚</p>
<h2 id="ä¸¤å¤§åŸºç±»Collectionä¸Map"><a href="#ä¸¤å¤§åŸºç±»Collectionä¸Map" class="headerlink" title="ä¸¤å¤§åŸºç±»Collectionä¸Map"></a>ä¸¤å¤§åŸºç±»Collectionä¸Map</h2><p>åœ¨é›†åˆæ¡†æ¶çš„ç±»ç»§æ‰¿ä½“ç³»ä¸­ï¼Œæœ€é¡¶å±‚æœ‰ä¸¤ä¸ªæ¥å£ï¼š</p>
<ul>
<li><code>Collection</code>è¡¨ç¤ºä¸€ç»„çº¯æ•°æ®</li>
<li><code>Map</code>è¡¨ç¤ºä¸€ç»„key-valueå¯¹</li>
</ul>
<p>ä¸€èˆ¬ç»§æ‰¿è‡ª<code>Collection</code>æˆ–<code>Map</code>çš„é›†åˆç±»ï¼Œä¼šæä¾›ä¸¤ä¸ªâ€œæ ‡å‡†â€çš„æ„é€ å‡½æ•°ï¼š</p>
<ul>
<li>æ²¡æœ‰å‚æ•°çš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªç©ºçš„é›†åˆç±»</li>
<li>æœ‰ä¸€ä¸ªç±»å‹ä¸åŸºç±»ï¼ˆ<code>Collection</code>æˆ–<code>Map</code>ï¼‰ç›¸åŒçš„æ„é€ å‡½æ•°ï¼Œåˆ›å»ºä¸€ä¸ªä¸ç»™å®šå‚æ•°å…·æœ‰ç›¸åŒå…ƒç´ çš„æ–°é›†åˆç±»</li>
</ul>
<p>å› ä¸ºæ¥å£ä¸­ä¸èƒ½åŒ…å«æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥ä¸Šé¢è¿™ä¸¤ä¸ªæ„é€ å‡½æ•°çš„çº¦å®šå¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä½†æ˜¯åœ¨ç›®å‰çš„é›†åˆæ¡†æ¶ä¸­ï¼Œæ‰€æœ‰ç»§æ‰¿è‡ª<code>Collection</code>æˆ–<code>Map</code>çš„å­ç±»éƒ½éµå¾ªè¿™ä¸€çº¦å®šã€‚</p>
<h3 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h3><p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB21HYoeVXXXXaLXXXXXXXXXXXX_!!581166664.jpeg" alt="java-collection-hierarchy"></p>
<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html" target="_blank" rel="external">Collection</a>ç±»ä¸»è¦æœ‰ä¸‰ä¸ªæ¥å£ï¼š</p>
<ul>
<li><code>Set</code>è¡¨ç¤ºä¸å…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆï¼ˆA collection that contains no duplicate elementsï¼‰</li>
<li><code>List</code>è¡¨ç¤ºå…è®¸æœ‰é‡å¤å…ƒç´ çš„é›†åˆï¼ˆAn ordered collection (also known as a sequence)ï¼‰</li>
<li><code>Queue</code> JDK1.5æ–°å¢ï¼Œä¸ä¸Šé¢ä¸¤ä¸ªé›†åˆç±»ä¸»è¦æ˜¯çš„åŒºåˆ†åœ¨äº<code>Queue</code>ä¸»è¦ç”¨äºå­˜å‚¨æ•°æ®ï¼Œè€Œä¸æ˜¯å¤„ç†æ•°æ®ã€‚ï¼ˆA collection designed for holding elements prior to processing.ï¼‰</li>
</ul>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2JzW7eVXXXXbRXpXXXXXXXXXX_!!581166664.jpg" alt="MapClassHierarchy"></p>
<p><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html" target="_blank" rel="external">Map</a>å¹¶ä¸æ˜¯ä¸€ä¸ªçœŸæ­£æ„ä¹‰ä¸Šçš„é›†åˆï¼ˆare not true collectionsï¼‰ï¼Œä½†æ˜¯è¿™ä¸ªæ¥å£æä¾›äº†ä¸‰ç§â€œé›†åˆè§†è§’â€ï¼ˆcollection views ï¼‰ï¼Œä½¿å¾—å¯ä»¥åƒæ“ä½œé›†åˆä¸€æ ·æ“ä½œå®ƒä»¬ï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>æŠŠmapçš„å†…å®¹çœ‹ä½œkeyçš„é›†åˆï¼ˆmapâ€™s contents to be viewed as a set of keysï¼‰</li>
<li>æŠŠmapçš„å†…å®¹çœ‹ä½œvalueçš„é›†åˆï¼ˆmapâ€™s contents to be viewed as a collection of valuesï¼‰</li>
<li>æŠŠmapçš„å†…å®¹çœ‹ä½œkey-valueæ˜ å°„çš„é›†åˆï¼ˆmapâ€™s contents to be viewed as a set of key-value mappingsï¼‰</li>
</ul>
<h2 id="é›†åˆçš„å®ç°ï¼ˆCollection-Implementationsï¼‰"><a href="#é›†åˆçš„å®ç°ï¼ˆCollection-Implementationsï¼‰" class="headerlink" title="é›†åˆçš„å®ç°ï¼ˆCollection Implementationsï¼‰"></a>é›†åˆçš„å®ç°ï¼ˆCollection Implementationsï¼‰</h2><p>å®ç°é›†åˆæ¥å£çš„ç±»ä¸€èˆ¬éµå¾ª<code>&lt;å®ç°æ–¹å¼&gt;+&lt;æ¥å£&gt;</code>çš„å‘½åæ–¹å¼ï¼Œé€šç”¨çš„é›†åˆå®ç°ç±»å¦‚ä¸‹è¡¨ï¼š</p>
<table>
<thead>
<tr>
<th style="text-align:center">Interface</th>
<th style="text-align:center">Hash Table</th>
<th style="text-align:center">Resizable Array</th>
<th style="text-align:center">Balanced Tree</th>
<th style="text-align:center">Linked List</th>
<th style="text-align:center">Hash Table + Linked List</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">Set</td>
<td style="text-align:center">HashSet</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">TreeSet</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">LinkedHashSet</td>
</tr>
<tr>
<td style="text-align:center">List</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">ArrayList</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">LinkedList</td>
<td style="text-align:center">&nbsp;</td>
</tr>
<tr>
<td style="text-align:center">Deque</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">ArrayDeque</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">LinkedList</td>
<td style="text-align:center">&nbsp;</td>
</tr>
<tr>
<td style="text-align:center">Map</td>
<td style="text-align:center"><a href="/blog/2015/09/03/java-hashmap/">HashMap</a></td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center"><a href="/blog/2015/09/04/java-treemap/">TreeMap</a></td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center"><a href="/blog/2015/09/12/java-linkedhashmap/">LinkedHashMap</a></td>
</tr>
</tbody>
</table>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»Šå¤©å…ˆå¼€ä¸ªå¤´ï¼Œåé¢ä¼šé™†é™†ç»­ç»­æ¥ä¸€ç³»åˆ—å¹²è´§ï¼ŒStay Tunedã€‚</p>
<p>éœ€è¦è¯´æ˜ä¸€ç‚¹ï¼Œä»Šåæ‰€æœ‰æºç åˆ†æéƒ½å°†åŸºäº<a href="http://www.oracle.com/technetwork/java/javase/7u71-relnotes-2296187.html" target="_blank" rel="external">Oracle JDK 1.7.0_71</a>ï¼Œè¯·çŸ¥æ‚‰ã€‚</p>
<pre><code>$ java -version
java version &quot;1.7.0_71&quot;
Java(TM) SE Runtime Environment (build 1.7.0_71-b14)
Java HotSpot(TM) 64-Bit Server VM (build 24.71-b01, mixed mode)
</code></pre><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html" target="_blank" rel="external">http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Java_collections_framework" target="_blank" rel="external">https://en.wikipedia.org/wiki/Java_collections_framework</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘è¢«é™†é™†ç»­ç»­é—®äº†å‡ éHashMapçš„å®ç°ï¼Œå›ç­”çš„ä¸å¥½ï¼Œæ‰“ç®—å¤ä¹ å¤ä¹ JDKä¸­çš„&lt;a href=&quot;http://docs.oracle.com/javase/7/docs/technotes/guides/collections/overview.html&quot; target=&quot;
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>SICP ç¬¬ä¸€ç« æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2015/07/18/sicp-chapter1-summary/"/>
    <id>http://liujiacai.net/blog/2015/07/18/sicp-chapter1-summary/</id>
    <published>2015-07-18T04:51:44.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘ä¸¤ä¸ªæœˆé™¤äº†å·¥ä½œä¹‹å¤–ï¼Œä¸šä½™æ—¶é—´ä¸€ç›´åœ¨ç ”ä¹ sicpè¿™æœ¬ç»å…¸ä¹¦ã€‚å…³äºè¿™æœ¬ä¹¦çš„è®¨è®ºæœ‰<a href="https://www.google.com/?gws_rd=ssl#newwindow=1&amp;safe=active&amp;q=must+read+book+sicp" target="_blank" rel="external">å¾ˆå¤š</a>ï¼Œåƒè€èµµå†™è¿‡SICPçš„<a href="http://blog.zhaojie.me/2009/07/recommended-reading-2-sicp.html" target="_blank" rel="external">ä¹¦æ‰˜</a>ï¼Œæˆ‘è§‰å¾—ä¸å…¶è®¨è®ºè¿™æœ¬ä¹¦æœ‰æ²¡æœ‰è¯»çš„ä»·å€¼ï¼Œä¸å¦‚èŠ±ä¸Šäº›ï¼Œéšæ‰‹ç¿»ç¿»ï¼Œå¦‚æœæ„Ÿå…´è¶£ï¼Œå°±è¯»ä¸‹å»ï¼›å¦åˆ™ç›´æ¥å¿½ç•¥å³å¯ã€‚è®¡ç®—æœºç†è®ºå‘å±•åˆ°äº†ç°åœ¨ï¼Œæœ‰<a href="http://stackoverflow.com/questions/1711/what-is-the-single-most-influential-book-every-programmer-should-read" target="_blank" rel="external">å¤ªå¤šå¤ªå¤šç»å…¸</a>éœ€è¦æˆ‘ä»¬å»è¯»äº†ï¼Œææ€•æˆ‘ä»¬è¿™ä¸€è¾ˆå­éƒ½æ— æ³•è¯»å®Œï¼Œä¸ºä»€ä¹ˆä¸æ‰¾ä½ æ„Ÿå…´è¶£çš„æ¥è¯»å‘¢ï¼Ÿ</p>
<p>æˆ‘è¿™æ¬¡å»ºäº†ä¸ª<a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">Githubåº“</a>æ¥è®°å½•è¯¾åæ¯ä¸€é“ä¹ é¢˜ä¸å¹³æ—¶çš„æ‰€æ„Ÿæ‰€æ‚Ÿï¼Œå¸Œæœ›å¯¹åé¢é˜…è¯»sicpçš„åŒèƒä»¬æœ‰æ‰€å¸®åŠ©ã€‚</p>
<p>åºŸè¯ä¸å¤šè¯´äº†ï¼Œè¶ç€ä¸Šå‘¨åˆšçœ‹å®Œç¬¬ä¸€ç« ï¼Œç°åœ¨è¿›è¡Œä¸€ä¸‹æ€»ç»“ã€‚</p>
<h2 id="æœ¬ç« ä¸»æ—¨â€“æ„é€ è¿‡ç¨‹æŠ½è±¡"><a href="#æœ¬ç« ä¸»æ—¨â€“æ„é€ è¿‡ç¨‹æŠ½è±¡" class="headerlink" title="æœ¬ç« ä¸»æ—¨â€“æ„é€ è¿‡ç¨‹æŠ½è±¡"></a>æœ¬ç« ä¸»æ—¨â€“æ„é€ è¿‡ç¨‹æŠ½è±¡</h2><p>æˆ‘ä»¬åœ¨è¿›è¡Œç¨‹åºè®¾è®¡æ—¶ï¼Œæ¥è§¦åˆ°çš„æ— éå°±æ˜¯ä¸¤ç±»ä¸œè¥¿ï¼š<code>æ•°æ®</code>ä¸<code>æ“ä½œæ•°æ®çš„è¿‡ç¨‹</code>ã€‚æœ¬ç« åªå¤„ç†ç®€å•çš„æ•°å€¼æ•°æ®ï¼Œå°†æ³¨æ„åŠ›é›†ä¸­åœ¨è¿‡ç¨‹çš„æ„é€ ã€‚æœ¬ä¹¦é‡‡ç”¨lispæ–¹è¨€schemeè¿›è¡Œæ•™å­¦ï¼Œä¹‹æ‰€ä»¥é€‰æ‹©lispï¼Œæ˜¯å› ä¸ºï¼š</p>
<blockquote>
<p>è®¡ç®—è¿‡ç¨‹çš„lispæè¿°ï¼ˆç§°ä¸ºè¿‡ç¨‹ï¼‰æœ¬èº«åˆå¯ä»¥ä½œä¸ºlispçš„æ•°æ®æ¥è¡¨ç¤ºå’Œæ“ä½œã€‚</p>
</blockquote>
<p>ç°åœ¨è®¸å¤šå¨åŠ›å¼ºå¤§çš„ç¨‹åºè®¾è®¡æŠ€æœ¯ï¼Œéƒ½ä¾èµ–äºå¡«å¹³åœ¨â€œè¢«åŠ¨çš„â€æ•°æ®å’Œâ€œä¸»åŠ¨çš„â€è¿‡ç¨‹ä¹‹é—´çš„ä¼ ç»Ÿåˆ’åˆ†ã€‚é‰´äºlispå¯ä»¥å°†è¿‡ç¨‹ä½œä¸ºæ•°æ®è¿›è¡Œå¤„ç†çš„çµæ´»æ€§ï¼Œä½¿å®ƒæˆä¸ºæ¢ç´¢è¿™äº›æŠ€æœ¯æœ€æ–¹ä¾¿çš„ç°å­˜è¯­è¨€ä¹‹ä¸€ã€‚</p>
<h2 id="ç¨‹åºè®¾è®¡çš„åŸºæœ¬è¦ç´ "><a href="#ç¨‹åºè®¾è®¡çš„åŸºæœ¬è¦ç´ " class="headerlink" title="ç¨‹åºè®¾è®¡çš„åŸºæœ¬è¦ç´ "></a>ç¨‹åºè®¾è®¡çš„åŸºæœ¬è¦ç´ </h2><p>ä¸€ä¸ªå¼ºæœ‰åŠ›çš„ç¼–ç¨‹è¯­è¨€ï¼Œåº”è¯¥æä¾›ä¸‹é¢ä¸‰ç§æœºåˆ¶ï¼Œç¼–ç¨‹è€…åˆ©ç”¨å®ƒä»¬æ¥ç»„ç»‡è‡ªå·±æœ‰å…³è®¡ç®—è¿‡ç¨‹çš„æ€æƒ³ï¼š</p>
<ol>
<li>åŸºæœ¬è¡¨è¾¾å¼å½¢å¼</li>
<li>ç»„åˆæœºåˆ¶</li>
<li>æŠ½è±¡æœºåˆ¶</li>
</ol>
<p>schemeä½¿ç”¨å‰ç¼€è¡¨ç¤ºæ³•ï¼Œè¿™å’Œæˆ‘ä»¬å¹³å¸¸çš„ç¼–ç¨‹è¯­è¨€ä¸ä¸€æ ·ï¼Œéœ€è¦é€‚åº”ã€‚</p>
<p>æœ¬å°èŠ‚ä¾æ­¤è®²è§£äº†ä¸‹é¢çŸ¥è¯†ï¼š</p>
<ul>
<li>åŸºæœ¬çš„è¡¨è¾¾å¼ï¼Œç¯å¢ƒå’Œå˜é‡</li>
<li>ç»„åˆå¼çš„æ±‚å€¼</li>
<li>è¿‡ç¨‹çš„å®šä¹‰</li>
<li>å¤åˆè¿‡ç¨‹æ±‚å€¼çš„æ›¿æ¢æ¨¡å‹ï¼ˆåº”ç”¨åºä¸æ­£åˆ™åºï¼‰</li>
<li>æ¡ä»¶è¡¨è¾¾å¼å’Œè°“è¯</li>
<li>è¿‡ç¨‹æŠ½è±¡</li>
</ul>
<p>æ¦‚å¿µæœ¬èº«æ¯”è¾ƒç®€å•ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®ä¸‹é¢å‡ ä¸ªç‚¹ï¼š</p>
<ol>
<li>è¡¨è¾¾å¼æ±‚å€¼è¿‡ç¨‹å°±æ˜¯è¡¨è¾¾å¼è¯­ä¹‰çš„å®ç°</li>
<li>ä»£æ¢æ¨¡å‹ç»™å‡ºäº†è¿‡ç¨‹å®šä¹‰å’Œè¿‡ç¨‹åº”ç”¨çš„ä¸€ç§è¯­ä¹‰<blockquote>
<p>å¾ˆå¤š Scheme è¿‡ç¨‹çš„è¡Œä¸ºå¯ä»¥ç”¨è¿™ä¸ªæ¨¡å‹æè¿°<br>åé¢ä¼šçœ‹åˆ°,æ›´å¤æ‚çš„è¿‡ç¨‹éœ€è¦ç”¨æ‰©å……çš„è¯­ä¹‰æ¨¡å‹ï¼ˆåƒä¸€äº›è¯­æ³•ç³–è¡£ï¼‰</p>
</blockquote>
</li>
<li>ä»£æ¢æ¨¡å‹åªæ˜¯ä¸ºäº†å¸®åŠ©ç›´è§‚ç†è§£è¿‡ç¨‹åº”ç”¨çš„è¡Œä¸º<blockquote>
<p>å®ƒå¹¶æ²¡æœ‰åæ˜ è§£é‡Šå™¨çš„å®é™…å·¥ä½œè¿‡ç¨‹<br>å®é™…è§£é‡Šå™¨çš„æƒ…å†µåé¢è®¨è®ºï¼ŒåŸºäºç¯å¢ƒå®ç°  </p>
</blockquote>
</li>
<li>æœ¬è¯¾ç¨‹è¦ç ”ç©¶è§£é‡Šå™¨å·¥ä½œè¿‡ç¨‹çš„ä¸€ç»„æ¨¡å‹<blockquote>
<p>ä»£æ¢æ¨¡å‹æœ€ç®€å•,å®¹æ˜“ç†è§£,ä½†ä¸è¶³ä»¥è§£é‡Šæ‰€æœ‰çš„å®é™…ç¨‹åº<br>å…¶å±€é™æ€§æ˜¯ä¸èƒ½è§£é‡Šå¸¦æœ‰å¯å˜æ•°æ®çš„ç¨‹åº<br>åé¢å°†ä»‹ç»æ›´ç²¾ç»†çš„æ¨¡å‹</p>
</blockquote>
</li>
</ol>
<p>æ— è®ºæ˜¯ C è¿˜æ˜¯ Scheme,éƒ½æ²¡è§„å®šè¿ç®—å¯¹è±¡çš„æ±‚å€¼é¡ºåºã€‚è¿™æ„å‘³ç€ å‡å®šå®ƒä»¬é‡‡ç”¨æŸç§ç‰¹æ®Šé¡ºåºéƒ½æ˜¯ä¸æ­£ç¡®ä¸”ä¸å¯é çš„ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸è¦å†™åªæœ‰æŒ‰ç‰¹å®šæ±‚å€¼é¡ºåºæ‰èƒ½å¾—åˆ°æ‰€éœ€ç»“æœçš„è¡¨è¾¾å¼!<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">//C è¯­è¨€é‡Œä¾èµ–äºæ±‚å€¼é¡ºåºçš„è¡¨è¾¾å¼ï¼Œè¿™é‡Œçš„è¾“å‡ºä¾èµ–äºç¼–è¯‘å™¨çš„å®ç°ï¼Œä¸è¯­è¨€æœ¬èº«æ— å…³</div><div class="line">m = n++ + ++n;</div><div class="line">printf(&quot;%d, %d&quot;, n, n++);</div></pre></td></tr></table></figure></p>
<p>æœ¬å°èŠ‚ä»¥ç‰›é¡¿æ³•æ±‚å¹³æ–¹æ ¹å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ç®€å•çš„è¿‡ç¨‹æ„é€ å¤æ‚çš„è¿‡ç¨‹ã€‚å…³äºç‰›é¡¿æ³•çš„ä»£ç åŠä¼˜åŒ–æ–¹æ¡ˆæˆ‘<a href="https://github.com/jiacai2050/sicp/blob/master/05/2015-05-19.md" target="_blank" rel="external">gitç¬”è®°</a>ä¸­æ‰¾åˆ°ã€‚</p>
<h2 id="è¿‡ç¨‹ä¸å®ƒä»¬æ‰€äº§ç”Ÿçš„é—®é¢˜"><a href="#è¿‡ç¨‹ä¸å®ƒä»¬æ‰€äº§ç”Ÿçš„é—®é¢˜" class="headerlink" title="è¿‡ç¨‹ä¸å®ƒä»¬æ‰€äº§ç”Ÿçš„é—®é¢˜"></a>è¿‡ç¨‹ä¸å®ƒä»¬æ‰€äº§ç”Ÿçš„é—®é¢˜</h2><p>æœ¬å°èŠ‚ä¸»è¦è®²è§£äº†ä¸‹é¢å‡ ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li>è¿‡ç¨‹çš„å†…éƒ¨å®šä¹‰ä¸å—ç»“æ„ï¼ˆä¸Šé¢çš„ç‰›é¡¿æ³•æˆ‘å·²ç»ä½¿ç”¨ï¼‰</li>
<li>åˆ†æè¿‡ç¨‹ï¼ˆé™æ€ã€åŠ¨æ€ï¼‰äº§ç”Ÿçš„è®¡ç®—è¿‡ç¨‹ï¼ˆåŠ¨æ€ï¼Œè¡Œä¸ºï¼‰</li>
<li>è®¡ç®—è¿‡ç¨‹çš„ç±»å‹<blockquote>
<p>çº¿æ€§é€’å½’<br>çº¿æ€§è¿­ä»£<br>æ ‘å½¢é€’å½’</p>
</blockquote>
</li>
<li>è®¡ç®—çš„ä»£ä»·</li>
</ul>
<p>æœ¬å°èŠ‚ä¸»è¦æ˜¯ç†Ÿæ‚‰è¿‡ç¨‹ï¼ŒçŸ¥é“å¸¸è§è¿‡ç¨‹çš„åˆ†ç±»ï¼Œä»¥åŠèƒ½å¤Ÿæ˜ç¡®å„ç§è¿‡ç¨‹æ‰€å ç”¨çš„èµ„æºã€‚</p>
<p>è¿™é‡Œæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/01/1.19.md" target="_blank" rel="external">ä¹ é¢˜1.19</a>ï¼Œé€šè¿‡çŸ©é˜µç›¸ä¹˜çš„æ–¹å¼æ¥ç®—æ–æ³¢é‚£å¥‘æ•°ï¼Œå¤§å®¶å¯ä»¥å»äº†è§£ä¸‹ã€‚</p>
<p>###æ‰¾é›¶é’±</p>
<p>å…³äºè¿™ä¸ªé¢˜ç›®æˆ‘åœ¨gitåº“ä¸Šçš„ç¬”è®°å·²ç»æœ‰äº†æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<ul>
<li><a href="https://github.com/jiacai2050/sicp/blob/master/05/2015-05-21-count-change-recurisve.md" target="_blank" rel="external">é¢˜ç›®æè¿°ä¸é€’å½’çš„è§£æ³•</a></li>
<li><a href="https://github.com/jiacai2050/sicp/blob/master/05/2015-05-24-count-change-iterative.md" target="_blank" rel="external">è¿­ä»£è§£æ³•çš„è®¨è®º</a></li>
<li>æ—¶ç©ºå¤æ‚åº¦åˆ†æå¯å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/01/1.14.md" target="_blank" rel="external">ä¹ é¢˜1.14</a></li>
</ul>
<h3 id="æ±‚ç´ æ•°"><a href="#æ±‚ç´ æ•°" class="headerlink" title="æ±‚ç´ æ•°"></a>æ±‚ç´ æ•°</h3><p>è¿™é‡Œæ±‚ç´ æ•°æœ‰ä¸¤ç§è§£æ³•ï¼Œåˆ†åˆ«æ˜¯ï¼š</p>
<ol>
<li>å¯»æ‰¾å› å­ï¼Œä»£ç å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/01/1.22.scm" target="_blank" rel="external">ä¹ é¢˜1.22</a></li>
<li>è´¹é©¬æ£€æŸ¥ï¼Œä»£ç å‚è€ƒ<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/01/1.24.scm" target="_blank" rel="external">ä¹ é¢˜1.24</a></li>
</ol>
<p>è¿™é‡Œæ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯<a href="https://github.com/jiacai2050/sicp/blob/master/exercises/01/1.28.scm" target="_blank" rel="external">ä¹ é¢˜1.28</a>ï¼Œè¿™é“é¢˜ä»‹ç»äº†ä¸€ç§è´¹é©¬æ£€æµ‹çš„ä¸ä¼šè¢«æ¬ºéª—çš„å˜å½¢ï¼Œç§°ä¸ºMiller-Rabinæ£€æŸ¥ã€‚<br>åˆ°ç°åœ¨æˆ‘è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆMRæ£€æŸ¥ä¸ä¼šè¢«æ¬ºéª—ï¼Œæ„Ÿè§‰åº”è¯¥æ˜¯å’Œè´¹é©¬å®šé‡ç­‰ä»·çš„ï¼Œæ— éå°±æ˜¯ç­‰å¼ä¸¤è¾¹åŒæ—¶é™¤ä»¥äº†aè€Œå·²ã€‚åé¢æƒ³æ˜ç™½åï¼Œæˆ‘ä¼šå†å³æ—¶æ›´æ–°ã€‚</p>
<p>é™¤äº†ä¸Šé¢ä¸¤ä¸ªå¤–ï¼Œæœ¬ç« è¿˜ç”¨äº†ä¸‹é¢ä¸¤ä¸ªä¾‹å­ï¼š</p>
<ul>
<li><a href="https://github.com/jiacai2050/sicp/blob/master/05/2015-05-28.md" target="_blank" rel="external">æ±‚å¹‚</a></li>
<li>æœ€å¤§å…¬çº¦æ•°<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(definee (gcd a b)</div><div class="line">  (if (= b 0)</div><div class="line">    a</div><div class="line">    (gcd b (remainder a b))))</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="ç”¨é«˜é˜¶å‡½æ•°è¿‡æŠ½è±¡"><a href="#ç”¨é«˜é˜¶å‡½æ•°è¿‡æŠ½è±¡" class="headerlink" title="ç”¨é«˜é˜¶å‡½æ•°è¿‡æŠ½è±¡"></a>ç”¨é«˜é˜¶å‡½æ•°è¿‡æŠ½è±¡</h2><p>è¿™ä¸€å°èŠ‚å¯ç®—æ˜¯ç¬¬ä¸€ç« çš„é‡ç‚¹ï¼Œåœ¨è¿™å°èŠ‚é‡Œï¼Œè¿‡ç¨‹æ—¢å¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™è¿‡ç¨‹ï¼Œåˆå¯ä»¥ä½œä¸ºè¿‡ç¨‹çš„è¿”å›å€¼ï¼Œé€šè¿‡ä¸æ–­æŠ½è±¡ï¼Œå¾—åˆ°ä¸€ç³»åˆ—é«˜é˜¶è¿‡ç¨‹ï¼Œå‰é¢çš„ç‰›é¡¿æ³•ï¼Œ<a href="https://github.com/jiacai2050/sicp/blob/master/07/2015-07-06.md" target="_blank" rel="external">ä¸å®šç‚¹</a>éƒ½å¯ä»¥è½»æ¾ç”¨é«˜é˜¶è¿‡ç¨‹æ¥å®ç°ã€‚</p>
<p>è¿™é‡Œä¸»è¦æ˜¯åšç›¸åº”çš„ä¹ é¢˜æ¥å·©å›ºè‡ªå·±çš„ç†è§£ï¼Œå¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦é«˜é˜¶å‡½æ•°ï¼Œæˆ‘ç›¸ä¿¡ä½ ä¸€å®šä¼šå¤§å–Šï¼šâ€œè¿˜èƒ½è¿™ä¹ˆç©å‘€â€!</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡2ä¸ªæœˆçš„æ—¶é—´é™†é™†ç»­ç»­æŠŠè¿™ç¬¬ä¸€ç« çœ‹å®Œï¼Œç°åœ¨è¿‡äº†2å‘¨å†æ¥å†™è¿™ç¯‡æ€»ç»“ï¼Œæ•ˆæœè¿˜æ˜¯è›®å¥½çš„ï¼Œå¾ˆå¤šä¸œè¥¿ä¸€ä¸‹å°±èƒ½å¤Ÿå›æƒ³èµ·æ¥ï¼Œä¸è¿‡ä¹Ÿå‘ç°ä¹‹å‰çš„æ¼æ´ï¼Œä¸€äº›ç‚¹å½“æ—¶æ²¡æ·±ç©¶ï¼Œæ”¾ä¸‹äº†ä¹Ÿå°±æ²¡æœ‰ç„¶åäº†ã€‚è¿™æ¬¡æ€»ç»“å‘ç°äº†äº›ï¼Œè¿™ä¸ªå‘¨æœ«ä¸€å®šè¡¥å……ä¸Šã€‚</p>
<p>å¦‚æœä½ ä¹Ÿåœ¨è¯»sicpï¼Œå¸Œæœ›ä½ èƒ½åšæŒä¸‹å»ï¼Œè®©æˆ‘ä»¬ä¸€èµ·äº«å—ç¼–ç¨‹çš„å¥¥å¦™ã€‚</p>
<p>PSï¼šåœ¨å†™è¿™ç¯‡æ€»ç»“æ—¶ï¼Œåœ¨ç®€ä¹¦ä¸Šæˆ‘æ‰¾åˆ°è¿™ä¹ˆä¸€ç¯‡æ–‡ç« <a href="http://www.jianshu.com/p/fe89c4b6bd28" target="_blank" rel="external">ä»è·é¥è¿œï¼ŒçŸ¥æ˜“è¡Œéš¾</a>ï¼Œä¸çŸ¥è¯¥ä½œè€…çš„åŠŸåŠ›æœ‰å¤šæ·±åšæ‰èƒ½æœ‰è¿™ä¹ˆæ·±çš„è§è§£ã€‚<br>ä¸–ç•Œè¿™ä¹ˆå¤§ï¼Œ è®©æˆ‘ä»¬æŠ“ç´§ä»SICPå¼€å§‹è¡ŒåŠ¨èµ·æ¥å§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘ä¸¤ä¸ªæœˆé™¤äº†å·¥ä½œä¹‹å¤–ï¼Œä¸šä½™æ—¶é—´ä¸€ç›´åœ¨ç ”ä¹ sicpè¿™æœ¬ç»å…¸ä¹¦ã€‚å…³äºè¿™æœ¬ä¹¦çš„è®¨è®ºæœ‰&lt;a href=&quot;https://www.google.com/?gws_rd=ssl#newwindow=1&amp;amp;safe=active&amp;amp;q=must+read+book+sicp
    
    </summary>
    
      <category term="ç ”ä¹ ç»å…¸" scheme="http://liujiacai.net/categories/%E7%A0%94%E4%B9%A0%E7%BB%8F%E5%85%B8/"/>
    
    
      <category term="sicp" scheme="http://liujiacai.net/tags/sicp/"/>
    
  </entry>
  
  <entry>
    <title>å›é¡¾æ¥æœ‰èµçš„è¿™ä¸‰ä¸ªæœˆ</title>
    <link href="http://liujiacai.net/blog/2015/07/11/review-3-month-life-in-youzan/"/>
    <id>http://liujiacai.net/blog/2015/07/11/review-3-month-life-in-youzan/</id>
    <published>2015-07-11T06:36:17.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œä¸Šä¸€ç¯‡è¿˜æ˜¯å†™åœ¨ä¸‰ä¸ªæœˆå‰ï¼Œå½“æ—¶åº”è¯¥æ˜¯åœ¨æœ‰èµå®¢æ»¡æ¯•ä¸šåï¼Œç°åœ¨è½¬æ­£ä¹Ÿå°†è¿‘åŠä¸ªå¤šæœˆäº†ã€‚æœ¬æ¥æƒ³çš„æ˜¯æ¯ä¸ªæœˆè‡³å°‘ä¸€ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« çš„ï¼Œæ²¡æƒ³åˆ°åšæŒè¿˜æ²¡ä¸€å¹´å°±â€œé£Ÿè¨€â€äº†ã€‚</p>
<h2 id="æ—¶é—´éƒ½å»å“ªäº†"><a href="#æ—¶é—´éƒ½å»å“ªäº†" class="headerlink" title="æ—¶é—´éƒ½å»å“ªäº†"></a>æ—¶é—´éƒ½å»å“ªäº†</h2><p><div></div></p>
<p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="http://music.163.com/outchain/player?type=2&id=28126661&auto=0&height=66"></iframe><br><br>æ²¡åšæŒå†™åšå®¢æœ€ç›´æ¥ä¹Ÿæœ€æ ¹æœ¬çš„åŸå› å°±æ˜¯ï¼šæ‡’ã€‚</p>
<p>æœ€è¿‘å‡ å¤©æ­å·æœ‰<a href="http://nb.ifeng.com/zjxw/detail_2015_07/10/4093975_0.shtml" target="_blank" rel="external">å°é£ç™»é™†</a>ï¼Œå‘¨å…­ä¸ç”¨å»å…¬å¸äº†ï¼Œå…¬å¸é¢†å¯¼å±‚ä¹Ÿå†³å®šä»Šåå®è¡ŒåŒä¼‘ï¼Œæˆ‘ä»Šå¤©ä¹Ÿè¶æ­¤æœºä¼šå¥½å¥½åæ€ä¸€ä¸‹æœ€è¿‘ä¸‰ä¸ªæœˆåšçš„äº‹æƒ…ï¼Œçœ‹çœ‹æ—¶é—´éƒ½å»å“ªäº†ã€‚</p>
<h2 id="å›é¡¾åæ€"><a href="#å›é¡¾åæ€" class="headerlink" title="å›é¡¾åæ€"></a>å›é¡¾åæ€</h2><h3 id="å¿™å·¥ä½œ"><a href="#å¿™å·¥ä½œ" class="headerlink" title="å¿™å·¥ä½œ"></a>å¿™å·¥ä½œ</h3><p>æ–°åˆ°ä¸€å®¶å…¬å¸ï¼Œä»ç†Ÿæ‚‰ä¸šåŠ¡åˆ°æœ€ç»ˆèƒ½å¤Ÿå¹²æ´»ï¼Œæˆæœ¬è¿˜æ˜¯ä¸å°çš„ï¼Œå°¤å…¶æ˜¯ä¸€å®¶åˆ›ä¸šå‹å…¬å¸ï¼Œä¸€èˆ¬éƒ½æ˜¯èº«å…¼æ•°èŒï¼Œè€Œä¸”æˆ‘è‡ªèº«å®šä½ä¸€å¼€å§‹ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ™°ï¼Œæœ‰ç§å¿™è¿™å¿™é‚£çš„æ„Ÿè§‰ï¼Œæœ€åçš„æˆæœä¸æ˜¯å¾ˆå¤§ã€‚ç”¨å¾—åˆ°çŸ¥è¯†åŸºæœ¬ä¸Šè¿˜æ˜¯åœ¨ucloudå­¦çš„ï¼Œç¿»ç¿»ä¹‹å‰çš„æ—¥æŠ¥ï¼ˆå…¬å¸è¦æ±‚æ–°äººå†™æ—¥æŠ¥çš„æ•ˆæœè¿˜æ˜¯å¤§å¤§æœ‰ç›Šçš„ï¼Œæœ€èµ·ç æˆ‘ç°åœ¨å›é¡¾çš„æ—¶å€™æœ‰æ®å¯å¾ªï¼‰ï¼Œè§‰å¾—ä¸‹é¢è¿™äº›ä¸œè¥¿ç®—æ˜¯æ–°å­¦åˆ°çš„ï¼š</p>
<ol>
<li>é€šè¿‡è°ƒç ”hadoop streamingä»»åŠ¡æ…¢ï¼Œå­¦ä¹ straceå‘½ä»¤æŸ¥çœ‹è¿›ç¨‹åˆ°åº•åœ¨åšä»€ä¹ˆã€‚</li>
<li>ä¸ºäº†å¼€å‘hiveæœåŠ¡ï¼Œå­¦ä¹ hiveæƒé™éªŒè¯ï¼Œå¯ä»¥å…·ä½“åˆ°æŸä¸ªè¡¨ã€‚</li>
<li>ä¸ºä¼˜åŒ–hiveä»»åŠ¡ï¼Œå­¦ä¹ ç ”ç©¶hiveQLå¦‚ä½•è½¬ä¸ºmapreduceï¼Œå°è¯•explain ä¸€äº›è¯­å¥ã€‚</li>
<li>ä¸ºäº†æ­å»ºæ—¥å¿—æ”¶é›†ç³»ç»Ÿï¼Œå­¦ä¹ flumeä½¿ç”¨æ–¹å¼ï¼Œä¸è¿‡åˆ°ç›®å‰ä¸ºæ­¢ä¹Ÿè¿˜æ˜¯æ²¡ç”¨çš„ã€‚</li>
<li>æ—¥å¸¸Hadoopç»´æŠ¤ï¼Œè¿™ä¸ªåŒ…å«çš„ä¸œè¥¿æ¯”è¾ƒæ‚ä¹±ï¼Œå› ä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„ç¯å¢ƒï¼Œå‡ºäº†ä¸€ä¸ªé—®é¢˜ï¼Œå¯èƒ½çš„åŸå› å®åœ¨æ˜¯å¤ªå¤šäº†ï¼Œä»æœåŠ¡æœ¬èº«çš„é—®é¢˜åˆ°æœºå™¨çš„é—®é¢˜ã€‚å…¶æ¬¡å°±æ˜¯ç¼–å†™å„ç§shellè„šæœ¬ï¼Œè¯´å®è¯åˆ°ç°åœ¨æˆ‘è§‰å¾—å†™shellä¹Ÿä¸æ˜¯ååˆ†å¾—å¿ƒåº”æ‰‹ï¼Œå¯¹äºä¸€äº›å‘½ä»¤å¦‚sedã€awkã€psã€iftopã€findã€dateç­‰è¿˜åªæ˜¯ç®€å•çš„å…¥é—¨çº§åˆ«ï¼Œå†™ä¸€ä¸ªè„šæœ¬æœ‰æ—¶éœ€è¦è¾ƒå¤šçš„æ—¶é—´ã€‚</li>
<li>ç†Ÿæ‚‰python</li>
</ol>
<p>æœ€è¿‘æ—¥æŠ¥ä¸æ€ä¹ˆå†™äº†ï¼Œå¼€å§‹å†™åŠå‘¨æŠ¥ã€‚ç°åœ¨æƒ³æƒ³ä¸€å¤©èƒ½å¹²çš„äº‹å¥½æœ‰é™ï¼Œæˆ‘æœ€è¿‘æ—©ä¸Šé†’æ¥çš„æ—¶å€™ï¼Œä¼šæƒ³ä¸€ä¸‹ï¼šæˆ‘åˆ°åº•æƒ³è¦ä»€ä¹ˆï¼Ÿæˆ‘çš„äººç”Ÿç›®æ ‡æ˜¯ä»€ä¹ˆï¼Ÿä»Šå¤©æˆ‘è¯¥å¦‚ä½•å»åšæ‰èƒ½ç¦»ç›®æ ‡è¶Šæ¥è¶Šè¿‘ï¼Ÿå¼ çˆ±ç²å¥½åƒæœ‰å¥è¯ï¼šâ€œå‡ºåè¦è¶æ—©â€ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯æˆ‘å¤ªæ€¥åŠŸè¿‘åˆ©äº†ï¼Œä»¥è‡³äºä¹±äº†æ‰‹è„šã€‚æˆ‘ä¸€ç›´èƒ½æƒ³ç€ä¸ºHadoopç¤¾åŒºè´¡çŒ®patchï¼Œä½†æ˜¯æˆ‘è§‰å¾—ç°åœ¨æˆ‘å¯¹ä»–çš„äº†è§£ï¼Œå’Œä¹‹å‰ä¹Ÿå·®ä¸å¤šï¼Œä¸‰ä¸ªæœˆçš„æ—¶é—´ï¼Œåœ¨è¿™æ–¹é¢è²Œä¼¼åªæ˜¯åŸåœ°æ‰“è½¬ã€‚è®°å¾—ä¹‹å‰çœ‹è¿‡è€—å­å”å†™çš„æ–‡ç« ï¼Œè¯´ä»–åœ¨èŒä¸šç”Ÿæ¶¯æ—©æœŸé€šè¿‡ä¸æ–­é¢è¯•æ¥æé«˜è‡ªå·±ï¼Œæˆ‘ä¹Ÿæ•ˆä»¿äº†ä¸‹ï¼Œç°åœ¨è¿˜è®°å¾—å½“æ—¶äººå®¶é—®æˆ‘ï¼Œæˆ‘å›ç­”çš„ä¸å¥½çš„é—®é¢˜ï¼š</p>
<ol>
<li>ä½ åœ¨æ—¥å¸¸è¿ç»´Hadoopæ—¶ï¼Œå‡ºç°è¿‡å“ªäº›é—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³çš„ï¼Ÿç°åœ¨ç³»ç»Ÿçš„ç“¶é¢ˆæ˜¯ä»€ä¹ˆï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿ</li>
<li>åœ¨è¿è¡ŒHadoopä»»åŠ¡æ—¶ï¼Œå¦‚ä½•å‡ºè¡ŒæŸäº›é—®é¢˜ç‰¹åˆ«æ…¢ï¼Ÿä½ ä¼šå¦‚ä½•æ’æŸ¥é—®é¢˜ï¼Ÿ</li>
<li>æœ‰æ²¡æœ‰é‡åˆ°è¿‡è¿™æ ·çš„åœºæ™¯ï¼šå½“æ­£åœ¨ä¸Šä¼ ä¸€ä¸ªæ–‡ä»¶åˆ°hdfsä¸Šæ—¶ï¼Œå¦ä¸€ä¸ªç¨‹åºå¼€å§‹è¯»è¿™ä¸ªæ–‡ä»¶ï¼Œè¿™æ—¶ä¼šæœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ</li>
<li>hdfsæ–‡ä»¶æ˜¯æ€ä¹ˆå­˜å‚¨çš„ï¼Ÿæœ‰æ²¡æœ‰ç”¨è¿‡Arvoï¼Ÿ</li>
</ol>
<p>å¯¹äºå‰ä¸¤ä¸ªé—®é¢˜ï¼Œåº”è¯¥å±äºè€ƒå¯Ÿè§£å†³é—®é¢˜çš„æ€è·¯çš„ï¼Œçœ‹çœ‹ä½ åœ¨é‡åˆ°é—®é¢˜æ—¶ï¼Œèƒ½ä¸èƒ½ä¿æŒå¤§è„‘æ¸…æ™°ï¼Œæœ‰ä¸ªæ¸…æ™°çš„æ–¹æ¡ˆæ¥æ’æŸ¥è§£å†³é—®é¢˜ã€‚å½“æ—¶æˆ‘å›ç­”é“ï¼ŒCPUæ˜¯ç³»ç»Ÿç“¶é¢ˆï¼ŒIOä¸æ˜¯ï¼Œä½†æ˜¯å½“äººå®¶åœ¨é¡ºç€é—®ä¸‹å»æ—¶ï¼Œæˆ‘å°±ä¸èƒ½å¤Ÿå¾ˆå¥½çš„å›ç­”äº†ã€‚å…¶å®è¿™ä¸ªé—®é¢˜å°±è¯´æ˜äº†æˆ‘åˆ†æé—®é¢˜çš„èƒ½åŠ›ä¸å¤Ÿï¼Œé‡åˆ°é—®é¢˜åæ²¡æœ‰æ‰“ç ´æ²™é”…é—®åˆ°åº•çš„ç²¾ç¥ï¼Œç»å¸¸æ€§å°±ä¸äº†äº†ä¹‹äº†ã€‚æƒ³æƒ³å‰ä¸¤å¤©å‡ºç°çš„resourcemanagerå‡æ­»çš„æƒ…å†µï¼Œæˆ‘å¥½åƒä¹Ÿæ˜¯æ²¡ä»€ä¹ˆå®šè®ºã€‚<br>ç¬¬ä¸‰ä¸ªé—®é¢˜åº”è¯¥ç®—æ˜¯çœ‹çœ‹Hadoopä½¿ç”¨ç»éªŒä¸°å¯Œä¸å¦ï¼Œæ˜¯å¦å¤„ç†è¿‡ä¸€äº›ä¸å¤ªæ­£å¸¸çš„æƒ…å†µã€‚<br>æœ€åä¸€ä¸ªé—®é¢˜åº”è¯¥ç®—æ˜¯å¯¹Hadoopç”Ÿæ€ç³»ç»Ÿçš„è€ƒå¯Ÿï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯ç³»ç»Ÿæ¶æ„çš„è€ƒè™‘ã€‚è¯´å®è¯è¿™ä¸ªæˆ‘æ˜¯çœŸä¸æ¸…æ¥šï¼Œä¹‹å‰Hadoopé›†ç¾¤åªæ˜¯æ­ç€ç©ç©ï¼Œä»æ¥æ²¡æƒ³è¿‡å¦‚ä½•ä¸€ä¸ªé›†ç¾¤ä¿è¯ä¸€å¹´7*24ä¸é—´æ–­æ­£å¸¸è¿è¡Œï¼Œå¦‚ä½•å‘æŒ¥ç³»ç»Ÿçš„æœ€ä½³æ€§èƒ½ï¼Œç»è¿‡è¿™ä¸ªé—®é¢˜è¿˜æ˜¯æœ‰å¸®åŠ©ï¼Œæœ€èµ·ç ç°åœ¨å¼€å§‹è€ƒè™‘å¦‚ä½•å¤„ç†å°æ–‡ä»¶é—®é¢˜ï¼Ÿä»¥ä»€ä¹ˆæ ¼å¼å­˜å‚¨æ–‡ä»¶ï¼Œæ–‡æœ¬ã€äºŒè¿›åˆ¶è¿˜æ˜¯å‹ç¼©æ ¼å¼ï¼Ÿé›†ç¾¤åœ¨ä»€ä¹ˆæƒ…å†µä¸‹å¯èƒ½å´©æºƒï¼Ÿ</p>
<h3 id="SICP"><a href="#SICP" class="headerlink" title="SICP"></a><a href="https://github.com/jiacai2050/sicp" target="_blank" rel="external">SICP</a></h3><p>å½“æ—¶æˆ‘èƒ½æ¥æœ‰èµï¼Œä¹Ÿæ˜¯å› ä¸ºè¿™æœ¬ä¹¦ã€‚èŠ±äº†ä¸¤ä¸ªæœˆæ—¶é—´ç®—æ˜¯æŠŠç¬¬ä¸€ç« ç»™ç»“æŸäº†ã€‚æƒ³æƒ³å·¥ä½œä¹‹ä½™èƒ½å¤ŸæŠŠè¿™æœ¬ä¹¦åšæŒä¸‹æ¥ï¼Œç¡®å®æ²¡æƒ³çš„é‚£ä¹ˆç®€å•ï¼Œè¿™æ¬¡æˆ‘ä»¬ç»„å†…å››ä¸ªäººï¼Œæˆç«‹äº†ä¸ªå°ç»„ï¼Œå‘¨æœ«èƒ½å¤Ÿè®¨è®ºä¸Šå‡ æ¬¡ï¼Œä¹ é¢˜ä¸€é“é“è¿‡ï¼Œé‡åˆ°ä¸€äº›å¯ä»¥æ‰©å±•çš„çŸ¥è¯†ç‚¹ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å°½é‡å‘æ•£æ€ç»´ï¼Œæ¯”å¦‚è®²æ‰¾é›¶é’±é—®é¢˜ï¼Œæˆ‘ä»¬æ‰¯åˆ°äº†åŠ¨æ€è§„åˆ’ã€å°¾é€’å½’ä¼˜åŒ–ã€è¿‡ç¨‹æ‰§è¡Œè½¨è¿¹çš„å¯è§†åŒ–ç­‰ç­‰ï¼Œä¸ºäº†æ‰¾å‡ºæ‰¾é›¶é’±çš„è¿­ä»£ç®—æ³•ï¼Œæˆ‘ä»¬è®¨è®ºäº†å¥½å‡ æ¬¡ï¼Œæ­£å¥½è¿™ä¸ªå‘¨äº”æŠŠç¬¬ä¸€ç« æ‰€æœ‰å†…å®¹ï¼‹ä¹ é¢˜éƒ½è¿‡å®Œä¸€éäº†ï¼Œæˆ‘ä¼šæŠ½æ—¶é—´æŠŠç¬¬ä¸€ç« çš„å†…å®¹åœ¨æ€»ç»“æ¬¡ï¼Œåˆ°æ—¶å€™å†å¥½å¥½è¯´è¯´æ‰¾é›¶é’±é—®é¢˜ï¼Œè¿™é‡Œå°±ä¸ç»†è¯´äº†ã€‚</p>
<p>æˆ‘ä»¬è¿™ä¸ªå­¦ä¹ å°ç»„çœ‹å®Œç¬¬ä¸€ç« ä¹Ÿæ˜¯ç£•ç£•ç»Šç»Šï¼Œä¸­é—´è¿˜åœäº†ä¸¤å‘¨ï¼Œåˆšå¼€å§‹å‡ å°èŠ‚è¿˜å¯ä»¥ï¼Œåæ¥é€æ¸èšä¸é½äº†ï¼Œè¦ä¸å°±æ˜¯è°æœ‰äº‹æˆ–è€…å·¥ä½œå¿™ï¼Œæ€»ä¹‹å°±æ˜¯æ²¡èƒ½å¤Ÿè¿›è¡Œä¸‹å»ï¼Œæƒ³æƒ³æˆ‘ä»Šå¹´å¹´åˆçš„ç›®æ ‡ï¼Œçœ‹å®Œä¸‰æœ¬ä¹¦ï¼Œè¿™æ ·ç®—ä¸‹æ¥ï¼Œèƒ½å¤Ÿå®Œå®Œæ•´æ•´çš„æŠŠSICPçœ‹å®Œï¼Œä¹Ÿæ˜¯ä¸å®¹æ˜“äº†ã€‚</p>
<p>åé¢å†æ¥å†å‰ï¼ŒæŠŠè¿›åº¦é¡¶ä¸Šå»ã€‚</p>
<h3 id="äº²æƒ…ã€å‹æƒ…ã€çˆ±æƒ…"><a href="#äº²æƒ…ã€å‹æƒ…ã€çˆ±æƒ…" class="headerlink" title="äº²æƒ…ã€å‹æƒ…ã€çˆ±æƒ…"></a>äº²æƒ…ã€å‹æƒ…ã€çˆ±æƒ…</h3><p>è¿™ä¸‰ä¸ªæœˆå®¶é‡Œå‘ç”Ÿçš„äº‹ä¹Ÿæ˜¯è›®å¤šçš„ï¼Œäº”ä¸€çš„æ—¶å€™æˆ‘å§å§ç»“å©šäº†ã€‚æ€ä¹ˆè¯´å‘¢ï¼Œè§‰å¾—è‡ªä»ä¸Šä¸­å­¦åï¼Œå’Œå§å§çš„äº¤æµå°±ä¸å¤šäº†ï¼Œæˆ‘ä»¬ä¹‹é—´ä»æ¥æ²¡é—®è¿‡å„è‡ªçš„ç†æƒ³ã€‚å§å§å¤§å­¦æ¯•ä¸šåï¼Œè€ƒè¿‡äº†è€å¸ˆã€å…¬åŠ¡å‘˜ã€äº‹ä¸šç¼–ï¼Œç»“æœä¹Ÿä¸æ€ä¹ˆé¡ºåˆ©ï¼Œä¸€ç›´åœ¨å®¶é‡Œå’Œæˆ‘çˆ¸çˆ¸ä¸€èµ·å¹²ï¼Œå¼€äº†ä¸ªæ·˜å®åº—ï¼Œæœ€è¿‘å¹´é€¼å©šé—®é¢˜ä¹Ÿæ˜¯æ„ˆæ¼”æ„ˆçƒˆï¼Œæˆ‘è®°å¾—å¦ˆå¦ˆç»™æˆ‘è¯´è¿‡å§å§å› ä¸ºè¿™ä¸ªè¿˜å“­è¿‡ï¼Œä½œä¸ºä¸€ä¸ªæ²¡ä»€ä¹ˆç»éªŒçš„æˆ‘ï¼Œå®Œå…¨ä¸èƒ½ç†è§£å§å§çš„å¿ƒæƒ…ã€‚è¿™æ¬¡ç»“å©šäº†ï¼Œç®—æ˜¯å¯¹å¤§å®¶æœ€å¥½çš„äº¤ä»£ï¼Œç«¯åˆé‚£å¤©æˆ‘å§ç”Ÿäº†ä¸ªå°ç”·å­©ï¼Œåœ¨æˆ‘çœ‹æ¥å¥½å¿«ï¼Œåˆšç»“å©šæ²¡å‡ ä¸ªæœˆå°±æœ‰å°å­©äº†ï¼Œä¸è¿‡è¿™ä¹Ÿå¥½ï¼Œæ„Ÿè§‰ä¸€ä¸‹å­æŠŠå¥½å‡ å¹´è¦å¹²çš„äº‹ä¸€ä¸‹è§£å†³äº†ã€‚å¸Œæœ›æˆ‘å§å§ç­‰å®¶åº­ç¨³å®šåå†å¥½å¥½è€ƒï¼Œä»¥æˆ‘å§çš„å®åŠ›ï¼Œè€ƒä¸ªé«˜ä¸­è€å¸ˆï¼Œç»å¯¹æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>è‡³äºæˆ‘è‡ªå·±ï¼Œæˆ‘ä¹Ÿåªèƒ½è¯´æ˜¯éšç¼˜äº†ï¼Œæ„Ÿæƒ…è¿™ä¸œè¥¿ï¼Œå¤ªæ·±å¥¥ã€‚æƒ³æƒ³ç°åœ¨çš„å¤„å¢ƒï¼Œä¹Ÿç¡®å®ä¸é€‚åˆæ‰¾ï¼Œæœ‰ä¸ªè€åŒå­¦è¿˜èƒ½è°ˆè°ˆï¼Œè¦æ˜¯è¯´ä»å¤´å¼€å§‹çš„ï¼Œæˆ‘è§‰å¾—å°±åˆ«æµªè´¹å¤§å®¶çš„æ—¶é—´äº†ã€‚è¿™ä¸œè¥¿ä¹ŸæŒºè€½è¯¯æ—¶é—´çš„ï¼Œåœ¨çœ‹ç½‘ä¸Šä¸€äº›æš–æ–‡çš„æ—¶å€™ï¼Œä¹ŸæŒºåƒæœ‰ä¸ªäººèƒ½ä¸€èµ·è°ˆäººç”Ÿã€è°ˆç†æƒ³ï¼Œä¸€èµ·å¥‹æ–—çš„ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é©å‘½å°šæœªèƒœåˆ©ï¼ŒåŒå¿—ä»éœ€åŠªåŠ›ã€‚</p>
<p>æˆ‘è§‰å¾—ç°åœ¨çš„é—®é¢˜ä¸€æ–¹é¢æ˜¯æŠŠé›¶ç¢æ—¶é—´åˆ©ç”¨å¥½ï¼Œä¸è¦å°çœ‹è¿™äº›æ—¶é—´ï¼Œæƒ³æƒ³æœ‰æ—¶å€™çœ‹ä¸ª10åˆ†é’Ÿè§†é¢‘ï¼Œåˆ·ä¼šå¾®åšï¼Œå†å› ä¸ºæŸæŸå¥½ç©çš„ä¸œè¥¿ï¼Œä¸œç‚¹ç‚¹è¥¿çœ‹çœ‹çš„ï¼Œæ—¶é—´å°±è¿™ä¹ˆæºœèµ°äº†ã€‚</p>
<p>å¦ä¸€æ–¹é¢å°±æ˜¯æ§åˆ¶å¥½è‡ªå·±æ¬²æœ›ï¼Œä»€ä¹ˆäº‹æƒ…éƒ½ä¸æ˜¯ä¸€æ­¥å°±èƒ½å¤ŸæˆåŠŸçš„ï¼Œæ…¢æ…¢æ¥ï¼Œç¨³æ‰ç¨³æ‰“ï¼Œå¤¯å®åŸºç¡€ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œä¸Šä¸€ç¯‡è¿˜æ˜¯å†™åœ¨ä¸‰ä¸ªæœˆå‰ï¼Œå½“æ—¶åº”è¯¥æ˜¯åœ¨æœ‰èµå®¢æ»¡æ¯•ä¸šåï¼Œç°åœ¨è½¬æ­£ä¹Ÿå°†è¿‘åŠä¸ªå¤šæœˆäº†ã€‚æœ¬æ¥æƒ³çš„æ˜¯æ¯ä¸ªæœˆè‡³å°‘ä¸€ç¯‡åŸåˆ›æŠ€æœ¯æ–‡ç« çš„ï¼Œæ²¡æƒ³åˆ°åšæŒè¿˜æ²¡ä¸€å¹´å°±â€œé£Ÿè¨€â€äº†ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æ—¶é—´éƒ½å»å“ªäº†&quot;&gt;&lt;a href=&quot;#æ—¶é—´éƒ½å»å“ªäº†&quot; class=&quot;headerli
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>æˆ‘æ¥æœ‰èµäº†</title>
    <link href="http://liujiacai.net/blog/2015/04/03/leave-ucloud-to-youzan/"/>
    <id>http://liujiacai.net/blog/2015/04/03/leave-ucloud-to-youzan/</id>
    <published>2015-04-03T15:10:49.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ™šä¸Šç»ˆäºæœ‰æ—¶é—´æ¥å†™å†™åšå®¢äº†ï¼Œæƒ³æƒ³å†³å®šä»ucloudç¦»èŒåˆ°ç°åœ¨ï¼Œå·®ä¸å¤šä¸€ä¸ªå¤šæœˆäº†ã€‚å…³äºç¦»èŒçš„åŸå› ï¼Œä¸€å¥è¯ä¸¤å¥è¯ä¹Ÿè¯´ä¸æ¸…æ¥šï¼Œç¦»èŒè¿™äº‹ä¹Ÿçº ç»“äº†å¥½ä¹…ï¼Œæ­£å¥½é¡ºç€å¹´åè·³æ§½é«˜å³°æœŸï¼Œä»ä¸Šæµ·è·³åˆ°äº†ç¾ä¸½å¤§æ­å·ã€‚</p>
<p>è·³æ§½æ˜¯ä»¶æŠ˜è…¾çš„äº‹ã€‚ä»æŠ•ç®€å†ï¼Œå†åˆ°æ¬å®¶ï¼Œéƒ½æ˜¯è€—æ—¶è€—åŠ›çš„äº‹ã€‚æ‰¾åˆé€‚çš„å·¥ä½œï¼ŒçœŸæ˜¯å¥½æ¯”æ‰¾ä¸ªå¥³æœ‹å‹ï¼Œä¸¤æ–¹éƒ½çœ‹é¡ºçœ¼æ‰è¡Œã€‚ä¸è¿‡ï¼Œæˆ‘è§‰å¾—ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¹¸è¿çš„ï¼Œæ‰¾åˆ°äº†<a href="http://youzan.com/" target="_blank" rel="external">æœ‰èµ</a>â€”â€”ä¸€å®¶åš<code>å¾®ç”µå•†</code>çš„åˆ›ä¸šå…¬å¸ã€‚</p>
<p>##å®¢æ»¡è½®å²—<br>æœ‰èµçš„æ–°äººéœ€è¦åœ¨å®¢æ»¡ï¼ˆå®¢æˆ·æ»¡æ„éƒ¨ï¼Œä¹Ÿå°±æ˜¯å®¢æœï¼‰è½®å²—ï¼Œç›®çš„å¾ˆæ˜ç¡®â€”â€”ç†Ÿæ‚‰ä¸šåŠ¡ã€‚è½®å²—æ—¶é—´ä¸ºä¸¤å‘¨ï¼Œåœ¨è¿™æœŸé—´ï¼Œå­¦åˆ°çš„ç”µå•†çŸ¥è¯†çœŸæ˜¯å¤ªå¤šå¤ªå¤šï¼Œä»€ä¹ˆB2Cäº†ï¼ŒO2Oäº†ï¼Œæˆ‘ä¹Ÿèƒ½å¼ å£å³æ¥äº†ã€‚å½“ç„¶ï¼Œç†Ÿæ‚‰è¿™äº›åè¯åªæ˜¯ç¬¬ä¸€æ­¥ï¼Œæˆ‘è§‰å¾—æ›´é‡è¦çš„æ˜¯å¯¹ç°åœ¨ç”µå•†ç”Ÿæ€çš„åˆ†æï¼Œå¤§å®¶ä¼°è®¡ä¹Ÿéƒ½å¾ˆæ¸…æ¥šï¼Œç°åœ¨æƒ³åœ¨æ·˜å®å¼€åº—æœ‰å¤šéš¾ï¼Œåˆ·å•è¿™æ—©æ˜¯è¿‡æ—¶çš„è¡Œä¸ºäº†ï¼Œæ•ˆæœå¥½çš„è¿˜æ˜¯é€šè¿‡è´­ä¹°å¹¿å‘Šä½ï¼Œäº‰å–åœ¨å•†å“æœç´¢é¡µé¢çš„ç¬¬ä¸€é¡µå°±èƒ½å‡ºç°ã€‚</p>
<p>å®¢æ»¡ç»“æŸæœ‰ä¸ªpptåˆ†äº«ï¼Œæˆ‘æ˜¯ç”¨ <a href="https://github.com/impress/impress.js/" target="_blank" rel="external">impress.js</a> åšçš„ï¼Œ<a href="http://youzan.liujiacai.net/" target="_blank" rel="external">åœ¨çº¿åœ°å€</a>ï¼Œå¤§å®¶æ„Ÿå…´è¶£å¯ä»¥å‚è€ƒã€‚<br>ä¸‹é¢æˆ‘å°†ç®€å•è¯´è¯´æœ€è¿‘ä¸¤å‘¨å†…æ”¶è·åˆ°çš„ä¸œè¥¿ã€‚</p>
<p>###å¾®å•†<br>å…¶å®å¤§å®¶ä¸éš¾å‘ç°ï¼Œæ·˜å®ã€äº¬ä¸œä¹‹ç±»çš„ç”µå•†å¹³å°çš„çŸ­æ¿ï¼Œå°±æ˜¯å®ƒèƒ½å¤Ÿå±•ç°çš„åº—å®¶ã€å•†å“æ˜¯æœ‰é™çš„ï¼Œä¸ç®¡ä½ å†æ€ä¹ˆè®¾è®¡ï¼Œä¸€ä¸ªé¡µé¢èƒ½å¤Ÿæ‰¿è½½çš„ä¿¡æ¯é‡æ˜¯ä¸€å®šçš„ï¼Œè®°å¾—ä¹‹å‰åœ¨åŒ—äº¬å¬è¿‡<a href="http://102.alibaba.com/competition/etao.htm" target="_blank" rel="external">é˜¿é‡Œæœç´¢å¼•æ“ä¸“åœº</a>çš„åˆ†äº«ï¼Œå½“æ—¶å°±è¯´åˆ°äº†ï¼Œæ·˜å®ç°åœ¨æœç´¢çš„ç—›ç‚¹ï¼Œä¸æ˜¯ä»€ä¹ˆä¸ªæ€§åŒ–æœç´¢ï¼Œè€Œæ˜¯å¦‚ä½•åœ¨æœ‰é™çš„é¡µé¢é‡Œå°½å¯èƒ½å¤šçš„å±•ç¤ºåº—é“ºã€å•†å“ã€‚<br>é‚£ä¹ˆå¦‚ä½•å±•ç¤ºæ›´å¤šçš„åº—é“ºã€å•†å“å‘¢ï¼Ÿå¦‚æœåªé™äºæ·˜å®è¿™ä¸€ä¸ªç‚¹ï¼Œå¯ä»¥è¯´ç›®å‰æ˜¯æ— è§£çš„ï¼ˆå¦‚æœï¼Œä½ èƒ½æƒ³åˆ°ï¼Œé©¬ä¸Šè”ç³»é©¬äº‘å§ï¼‰ï¼Œç©¶å…¶åŸå› ï¼Œå°±æ˜¯å› ä¸ºæ·˜å®æ˜¯ä¸ªä¸­å¿ƒï¼Œæ‰€æœ‰çš„åº—é“ºã€å•†å“éƒ½éœ€è¦ç»ç”±æ·˜å®è¿™ä¸ªå¹³å°æ¥å‘ˆç°ï¼Œæ‰€ä»¥ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹å¼ï¼ŒæŠŠè¿™ä¸ªä¸­å¿ƒç‚¹æ‹¿æ‰ï¼Œè¿™æ ·ä¸å°±è§£å†³è¿™ä¸ªé—®é¢˜äº†å˜›ã€‚<br>ä½†æ˜¯å¦‚æœæ²¡æœ‰æ·˜å®è¿™ä¸ªç»Ÿä¸€å…¥å£äº†ï¼Œé¡¾å®¢æ€ä¹ˆä¹°ä¸œè¥¿å‘¢ï¼Ÿåœ¨æå‡ºè¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„é—®é¢˜ä»â€œ<strong>å¦‚ä½•åœ¨æœ‰é™çš„é¡µé¢å¸ƒå±€ä¸­å°½å¯èƒ½å¤šçš„å±•ç°åº—é“ºã€å•†å“ï¼Ÿ</strong>â€è½¬åŒ–åˆ°â€œ<strong>å¦‚ä½•åœ¨æ²¡æœ‰å¹³å°çš„å‰æä¸‹ï¼Œæä¾›ä¸€ç§æ–¹å¼ï¼Œè®©é¡¾å®¢èƒ½å¤Ÿå¿«é€Ÿæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„å•†å“ï¼Ÿ</strong>â€ï¼Œç™½é¸¦åœ¨â€œé€›â€åˆ›ä¸šå¤±è´¥åï¼Œä¹Ÿé‡åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼Œå¾®ä¿¡çš„å´›èµ·è®©ç™½é¸¦çœ‹åˆ°äº†è§£å†³è¿™ä¸ªé—®é¢˜åŠæ³•â€”â€”å¾®å•†ã€‚</p>
<p>###å»ä¸­å¿ƒåŒ–</p>
<p>å¾®å•†ç°åœ¨æ²¡æœ‰ä¸€ä¸ªç»Ÿä¸€å®šä¹‰ï¼Œæ˜¯ä¼´éšç€å¾®ä¿¡è€Œå´›èµ·çš„ä¸€ç§<code>ç¤¾äº¤åŒ–ç§»åŠ¨ç¤¾äº¤ç”µå•†</code>ï¼Œä¸è¿‡å¾®ä¿¡åªæ˜¯å¾®å•†çš„ä¸€ç§è½½ä½“ï¼Œå…¶ä»–çš„ç¤¾äº¤å¹³å°ï¼Œåƒå¾®åšã€äººäººéƒ½å¯ä»¥ã€‚å¾®å•†ä¸ä¼ ç»Ÿç”µå•†çš„åŒºåˆ«æ˜¯ï¼š</p>
<pre><code>ä¼ ç»Ÿç”µå•†ä»¥å•†å“ä¸ºä¸­å¿ƒï¼Œå¾®å•†åˆ™æ˜¯ä»¥äººä¸ºä¸­å¿ƒã€‚
</code></pre><p>ä¼ ç»Ÿç”µå•†å°±ä»¥æ·˜å®ä¸ºä¾‹ï¼Œåœ¨æ·˜å®è´­ç‰©çš„å¤§è‡´æµç¨‹ä¸ºï¼š</p>
<blockquote>
<p>è¾“å…¥å•†å“å…³é”®å­—â€“&gt;å¤šè§’åº¦æ¯”è¾ƒï¼ˆä»·æ ¼ã€é”€é‡ã€è¯„è®ºï¼‰â€“&gt;ä¸‹å•</p>
</blockquote>
<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯èƒ½æ˜¯é€šè¿‡åˆ«äººåˆ†äº«çš„é“¾æ¥å»è´­ä¹°çš„ï¼Œä½†æˆ‘è§‰å¾—è¿™ç§è´­ä¹°æ–¹å¼ç›¸æ¯”äºä¸Šé¢çš„å¯ä»¥å¿½ç•¥ä¸è®¡ã€‚è¿™é‡Œå¯ä»¥é¡ºä¾¿æ’ä¸€å¥ï¼Œä¸ºä»€ä¹ˆæ·˜å®æŠŠåƒè˜‘è‡è¡—ã€ç¾ä¸½è¯´ä¹‹ç±»çš„å¯¼è´­ç½‘ç«™ç»™å°æ€äº†ï¼ŸåŸå› å…¶å®å¾ˆç®€å•ï¼š</p>
<blockquote>
<p>å¦‚æœæ·˜å®å¤§éƒ¨åˆ†é¡¾å®¢æ˜¯é€šè¿‡ç¬¬ä¸‰åˆ†å¯¼è´­ç½‘ç«™è¿‡æ¥äº†ï¼Œå¯¹æ·˜å®æœ‰ä¸¤ä¸ªå¨èƒï¼šä¸€æ˜¯æ·˜å®çš„å¹¿å‘Šä½å¯¹å•†å®¶æ¥è¯´ä¸æ˜¯å¾ˆæœ‰ç«äº‰åŠ›äº†ï¼›äºŒæ˜¯å¦‚æœé‚£å¤©è¿™äº›å¯¼è´­ç½‘ç«™ä¸æŠŠé“¾æ¥æŒ‡å‘æ·˜å®äº†ï¼Œé‚£æ·˜å®ä¸å°±è¢«æ¶ç©ºäº†å˜›ã€‚</p>
</blockquote>
<p>æ‰€ä»¥æ·˜å®åœ¨å¾ˆæ—©çš„æ—¶å€™å°±ææ–­äº†æ¥è‡ªç¬¬ä¸‰æ–¹å¯¼è´­ç½‘ç«™çš„é“¾æ¥ã€‚</p>
<p>å›åˆ°æ­£é¢˜ï¼Œå› ä¸º<code>æ·˜å®éœ€è¦æä¾›å¹¿å‘Šä½ï¼Œæ‰€ä»¥å°±å¿…é¡»ä»¥å•†å“ä¸ºä¸­å¿ƒ</code>ã€‚ä»¥å•†å“ä¸ºä¸­å¿ƒï¼Œå°±æ„å‘³ç€éœ€è¦ä¸ªç»Ÿä¸€çš„å…¥å£ï¼Œè®©é¡¾å®¢å¯ä»¥è¿›è¡Œå•†å“æœç´¢ï¼Œè€Œè¿™åˆä¼šå¯¼è‡´å‡ºç°â€œ<strong>å¦‚ä½•åœ¨æœ‰é™çš„é¡µé¢å¸ƒå±€ä¸­å°½å¯èƒ½å¤šçš„å±•ç°åº—é“ºã€å•†å“ï¼Ÿ</strong>â€è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>ä»¥äººä¸ºä¸­å¿ƒå°±ä¸ä¸€æ ·äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“äººéƒ½æœ‰ç¾¤ä½“æ€§ï¼Œéƒ½æ˜¯éœ€è¦æœ‹å‹çš„ã€‚æˆ‘ä»¬é€šè¿‡æœ‹å‹ä»‹ç»ï¼Œè´­ä¹°å•†å“å¾€å¾€ä¹Ÿæ˜¯æ¯”è¾ƒæ”¾å¿ƒçš„ï¼Œå°¤å…¶æ˜¯æœ‹å‹æ˜¯æŸæ–¹é¢çš„é«˜æ‰‹æ—¶ã€‚æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœä½ èº«è¾¹æœ‰ä¸ªæ‡‚ç”µè„‘çš„æœ‹å‹ï¼Œä½ ä¹°ç”µè„‘æ—¶ï¼Œä¸€å®šä¼šå‚è€ƒä»–çš„æ„è§ã€‚</p>
<p>æœ‹å‹ä¹‹é—´æœ‰ä¸‹é¢ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li>ä¿¡ä»»åº¦é«˜ã€é»æ€§å¼º</li>
<li>æœ‰å…±åŒçš„å–œå¥½</li>
</ol>
<p>å¦‚æœæŠŠç¤¾äº¤ç»“åˆåˆ°è´­ç‰©ä¸Šï¼Œå°±æ˜¯ç°åœ¨çš„â€œå¾®å•†â€äº†ã€‚æƒ³æƒ³ä¸ºä»€ä¹ˆæ·˜å®ä¼šå…¥è‚¡æ–°æµªå¾®åšï¼Œç›®çš„ä¸æ­£æ˜¯å¦‚æ­¤å˜›ã€‚</p>
<p>ä¸è¿‡ç›¸å¯¹äºå¾®ä¿¡ï¼Œå¾®åšçš„é»æ€§ä¸å¤Ÿï¼Œå› ä¸ºå¤§éƒ¨åˆ†äººåœ¨å¾®åšä¸Šåªæœ‰å¾ˆå°‘çš„å…³æ³¨ï¼Œåªæœ‰å¤§Væ‰æœ‰å¯èƒ½æœ‰ä¸€å¤§æ‰¹è„‘æ®‹ç²‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè…¾è®¯çš„å¾®ä¿¡ï¼Œå®Œèƒœï¼Œè¿™ä¹Ÿä»ä¾§é¢åº”è¯äº†è…¾è®¯åœ¨ç¤¾äº¤æ–¹é¢çš„å¼ºåŠ¿ã€‚éšç€å…¬ä¼—å·çš„æ¨å‡ºï¼Œä½¿æ¯ä¸ªäººéƒ½å¯èƒ½æˆä¸ºä¸­å¿ƒã€‚æ¯”å¦‚ï¼Œä½ å¾ˆæ‡‚ç”µè„‘ï¼Œå¹¶ä¸”å¼€äº†ä¸ªè®¢é˜…å·ï¼Œå¤©å¤©æ¨é€ç”µè„‘æ–¹é¢çš„ç»´ä¿®çŸ¥è¯†ï¼Œç›¸ä¿¡è‚¯å®šèƒ½åœ¨ä½ çš„ç¤¾äº¤åœˆå†…æˆä¸ºä¸ªä¸­å¿ƒã€‚</p>
<p>æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„ç‰¹é•¿ï¼Œä¹Ÿå°±æ„å‘³ç€æ¯ä¸ªäººéƒ½æœ‰å¯èƒ½æˆä¸ºè‡ªå·±ç¤¾äº¤åœˆä¸­æŸä¸€æ–¹é¢çš„ä¸­å¿ƒã€‚å¦‚æœæŠŠè¿™ä¸€ç‰¹ç‚¹æ”¾åˆ°ç”µå•†ä¸Šï¼Œä¸æ­£å¥½è§£å†³äº†å»ä¸­å¿ƒåŒ–é—®é¢˜å˜›ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½é¡ºä¾¿è§£å†³å‡è´§é—®é¢˜ã€‚è¯´æ˜ä¸€ä¸‹ï¼Œè§£å†³å‡è´§é—®é¢˜ä¸æ˜¯è¯´æ²¡æœ‰å‡è´§äº†ï¼Œè€Œæ˜¯è¯´ï¼Œé¡¾å®¢èƒ½å¤ŸåŒºåˆ†å‡ºçœŸè´§å‡è´§äº†ï¼Œå› ä¸ºåœ¨ä¸­å›½å¤§ç¯å¢ƒå†…ï¼Œå‡è´§è¿˜æ˜¯å¾ˆæœ‰å¿…è¦çš„ã€‚</p>
<p>å¾®å•†å°±æ˜¯å€ŸåŠ©äºå¾®ä¿¡è¿™ä¸ªå¹³å°ï¼Œè§£å†³äº†ä¸­å¿ƒåŒ–é—®é¢˜ï¼Œä½†æ˜¯åŒæ—¶ä¹Ÿå¼•å…¥äº†æ–°çš„é—®é¢˜ï¼š</p>
<ol>
<li>åˆ·å±ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¾ˆåæ„Ÿè¿™ä¸ªã€‚å¦‚æœä½ çš„æœ‹å‹åœˆå†…å¤©å¤©éƒ½æ˜¯å•†å“æ¨å¹¿é“¾æ¥ï¼Œé‚£ä½ çš„æœ‹å‹å¾ˆæœ‰å¯èƒ½å°±æŠŠä½ å±è”½äº†ã€‚å…¶å®è¿™ä¸ªé—®é¢˜å±äºè¥é”€ï¼Œå°±æ˜¯è¯´å¦‚ä½•ç»è¥ä½ çš„æœ‹å‹ï¼ˆæ½œåœ¨é¡¾å®¢ï¼Œå¾®ä¿¡ç²‰ä¸ï¼‰ã€‚</li>
<li>å›¤è´§ï¼Œè¿™æ˜¯å¼€åº—é¦–è¦çš„ã€‚å¦‚æœä½ ä¹°æ‰‹æœºï¼Œæ‰‹ä¸Šæ²¡æœ‰ä¸ªå‡ åéƒ¨ï¼Œä½ æ€ä¹ˆå¼€åº—ï¼Œä½†æ˜¯å›¤è´§éœ€è¦å¤§é‡èµ„é‡‘ï¼Œå¤§éƒ¨åˆ†äººæ˜¯æ— æ³•æ‰¿æ‹…çš„ã€‚</li>
</ol>
<p>è¿™æ—¶å€™å°±éœ€è¦æœ‰èµäº†ã€‚</p>
<h3 id="æœ‰èµ"><a href="#æœ‰èµ" class="headerlink" title="æœ‰èµ"></a>æœ‰èµ</h3><p>æœ‰èµå‰åå£è¢‹é€šï¼Œç›®æ ‡æ˜¯ä¸ºå¾®ç”µå•†æä¾›å®Œæ•´çš„è§£å†³æ–¹æ¡ˆã€‚ä¸‹é¢é‡ç‚¹è¯´è¯´æœ‰èµæ˜¯å¦‚ä½•è§£å†³ä¸Šé¢ä¸¤ä¸ªé—®é¢˜çš„ï¼š</p>
<ol>
<li>æœ‰èµä¸å¾®ä¿¡æ‰“é€šï¼Œæä¾›åŸºäºå¾®ä¿¡ç²‰ä¸çš„ç®¡ç†åå°ã€‚ç²‰ä¸ç»éªŒä¸å†æ˜¯å¹¿å‘ŠæŠ•æ”¾ï¼Œéœ€è¦æœåŠ¡ã€éœ€è¦äº’åŠ¨ï¼Œé¡¾å®¢é¢å¯¹çš„ä¸å†æ˜¯ä¸€ä¸ªå“ç‰Œå•†æ ‡ï¼Œè€Œæ˜¯æŸä¸ªé”€å”®å‘˜ã€‚</li>
<li>é€šè¿‡å¼•å…¥<a href="http://fx.youzan.com/" target="_blank" rel="external">åˆ†é”€å¹³å°</a>ï¼Œè§£å†³è´§æºé—®é¢˜</li>
</ol>
<p>æ­¤å¤–ï¼Œæœ‰èµè¿˜å…è´¹çš„æä¾›CRMç³»ç»Ÿã€æœåŠ¡å•†å¹³å°ï¼Œè§£å†³å¼€åº—éš¾é—®é¢˜ã€‚ä¸‹å›¾ç»™å‡ºä¸€ä¸ªæˆ‘ç†è§£çš„æœ‰èµäº§å“æ¶æ„ï¼Œä¸ä¸€å®šå‡†ç¡®ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<center><br>    <img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2u20XcpXXXXcPXXXXXXXXXXXX_!!581166664.png" alt="æœ‰èµäº§å“æ¶æ„"><br></center>

<p>æˆ‘æ˜¯ä»â€œå•†å®¶ï¼å•†å“ï¼é¡¾å®¢â€çš„è§’åº¦æ¥æŠŠå„ä¸ªäº§å“ä¸²è”èµ·æ¥çš„ã€‚ä»ä¸Šå›¾å³ä¾§å¯ä»¥çœ‹å‡ºï¼Œå•†å“çš„æµä¼ ä¸»è¦é çš„æ˜¯é¡¾å®¢å£ç¢‘ç›¸ä¼ ã€‚</p>
<p>å…¶å®ä»…ä»…é€šè¿‡ä¸Šå›¾çš„æè¿°ï¼Œå¹¶ä¸èƒ½çœ‹å‡ºæœ‰èµçš„ä¼˜åŠ¿æ¥ï¼Œåˆ«äººå®Œå…¨å¯ä»¥å¤åˆ¶å‡ºæ¥ã€‚åœ¨å®¢æ»¡æœŸé—´ï¼Œä¸€äº›åˆ›å§‹äººä¹Ÿç»™æˆ‘ä»¬åˆ†æäº†æœ‰èµçš„ç”Ÿæ€ï¼Œæˆ‘è§‰å¾—è¿™å—ç†è§£çš„ä¸å¥½ï¼Œè¿™é‡Œå°±ä¸å†™äº†ï¼Œä»Šåæœ‰äº†æ›´æ·±å…¥çš„ç†è§£å†è¡¥ä¸Šã€‚<br>iDoNewsä¸Šæœ‰ç¯‡æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒï¼š<a href="http://www.donews.com/idonews/article/5449.shtm" target="_blank" rel="external">ä»¥â€œæœ‰èµâ€ä¸ºä¾‹ï¼Œè°ˆè°ˆå…è´¹æ¨¡å¼èƒŒåçš„å¾®å•†ç»æµ</a></p>
<p>##æ–°çš„èµ·ç‚¹</p>
<p>ä»ä»Šå¹´å¼€å§‹å†³å®šæ¢å·¥ä½œï¼Œåˆ°ç°åœ¨å®¢æ»¡ä¸¤å‘¨ç»“æŸï¼Œä¹Ÿç®—æ˜¯å®Œæˆäº†ä¸€æ¬¡è½¬å˜ã€‚è¿™æœŸé—´è¯´å®è¯ï¼Œæ²¡æ€ä¹ˆçœ‹ä¹¦ã€å†™ç¨‹åºã€‚æ—©å…ˆè®¡åˆ’ç€æ‰‹gooreplacerçš„Safariç‰ˆçš„ï¼Œä¹Ÿä¸€ç›´è¢«æç½®äº†ï¼›ä¸€äº›jvmã€sedçš„åšæ–‡ç´ æä¹Ÿæ²¡è€æ•´ç†ï¼Œç°åœ¨ä¸šåŠ¡ä¹Ÿç†Ÿæ‚‰å®Œäº†ï¼Œä¸‹é¢è¯¥ç»§ç»­åšæŠ€æœ¯äº†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æ™šä¸Šç»ˆäºæœ‰æ—¶é—´æ¥å†™å†™åšå®¢äº†ï¼Œæƒ³æƒ³å†³å®šä»ucloudç¦»èŒåˆ°ç°åœ¨ï¼Œå·®ä¸å¤šä¸€ä¸ªå¤šæœˆäº†ã€‚å…³äºç¦»èŒçš„åŸå› ï¼Œä¸€å¥è¯ä¸¤å¥è¯ä¹Ÿè¯´ä¸æ¸…æ¥šï¼Œç¦»èŒè¿™äº‹ä¹Ÿçº ç»“äº†å¥½ä¹…ï¼Œæ­£å¥½é¡ºç€å¹´åè·³æ§½é«˜å³°æœŸï¼Œä»ä¸Šæµ·è·³åˆ°äº†ç¾ä¸½å¤§æ­å·ã€‚&lt;/p&gt;
&lt;p&gt;è·³æ§½æ˜¯ä»¶æŠ˜è…¾çš„äº‹ã€‚ä»æŠ•ç®€å†ï¼Œå†åˆ°æ¬å®¶ï¼Œéƒ½æ˜¯è€—æ—¶è€—åŠ›çš„äº‹ã€‚æ‰¾åˆé€‚çš„
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>javascriptä¸­çš„æ•°æ®ç±»å‹</title>
    <link href="http://liujiacai.net/blog/2015/02/24/javascript-datatype/"/>
    <id>http://liujiacai.net/blog/2015/02/24/javascript-datatype/</id>
    <published>2015-02-24T13:09:45.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å­¦ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ— éä¸¤æ–¹é¢ï¼šä¸€æ˜¯è¯­æ³•ï¼ŒäºŒæ˜¯æ•°æ®ç±»å‹ã€‚ç±»Cè¯­è¨€çš„è¯­æ³•ä¸å¤–ä¹ifã€whileã€forã€å‡½æ•°ã€ç®—æœ¯è¿ç®—ç­‰ï¼Œé¢å‘å¯¹è±¡çš„è¯­è¨€å†åŠ ä¸Šobjectã€‚<br>è¯­æ³•åªæ˜¯è¯­è¨€è®¾è®¡è€…é¢„å…ˆåšçš„ä¸€å¥—è§„åˆ™ï¼Œä¸åŒè¯­è¨€è¯­æ³•ä¸å°½ç›¸åŒï¼Œä½†éƒ½æœ‰ä¸€äº›å…±é€šç‚¹ï¼Œå¯¹äºç†Ÿæ‚‰ä¸€ä¸¤é—¨ç¼–ç¨‹è¯­è¨€çš„äººï¼Œå­¦å…¶ä»–çš„ç¼–ç¨‹è¯­è¨€æ—¶ï¼Œè¯­æ³•å¾€å¾€ä¸æ˜¯é—®é¢˜ï¼ˆå½“ç„¶ï¼Œå¦‚æœä½ ä¸€ç›´å­¦çš„æ˜¯ç±»Cè¯­è¨€ï¼Œé‚£ä¹ˆé¦–æ¬¡æ¥è§¦lispæ—¶è‚¯å®šä¹Ÿè¦èŠ±äº›æ—¶é—´ï¼‰ï¼Œå­¦ä¹ çš„é‡ç‚¹å¾€å¾€æ˜¯æ•°æ®ç±»å‹åŠå…¶ç›¸å…³æ“ä½œä¸Šï¼Œä¸æ˜¯æœ‰å¥è€è¯ï¼šâ€œæ•°æ®ç»“æ„ï¼‹ç®—æ³•ï¼ç¨‹åºâ€ï¼å…¶æ¬¡ï¼Œæœ‰äº›è¯­è¨€çš„è¯­æ³•æœ¬èº«å°±å­˜åœ¨è®¾è®¡é—®é¢˜ï¼ˆjavascriptæ›´ç”šï¼‰ï¼Œæˆ‘ä»¬æ²¡å¿…è¦æ·±ç©¶è¿™äº›ç‚¹ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ è‡ªè¯©geekï¼Œå¯ä»¥æŠŠç©æŠŠç©ã€‚</p>
<p>æœ¬æ–‡å°†å¯¹javascriptä¸­çš„æ•°æ®ç±»å‹åšä¸€ä¸ªè¯¦å°½çš„ä»‹ç»ã€‚</p>
<h2 id="å¼±ç±»å‹-vs-å¼ºç±»å‹"><a href="#å¼±ç±»å‹-vs-å¼ºç±»å‹" class="headerlink" title="å¼±ç±»å‹ vs å¼ºç±»å‹"></a>å¼±ç±»å‹ vs å¼ºç±»å‹</h2><p>é‰´äºjavascriptçš„<a href="/blog/2015/02/01/javascript-oop/#è®¾è®¡ç†å¿µ">è®¾è®¡ç†å¿µ</a>ï¼Œjavascriptè¢«è®¾è®¡æˆä¸€ç§å¼±ç±»å‹çš„è¯­è¨€ã€‚<br>è¯´åˆ°è¿™é‡Œï¼Œéš¾å…è¦è¯´ä¸€ä¸‹ï¼Œå¼±ç±»å‹ä¸å¼ºç±»å‹çš„åŒºåˆ«ã€‚<br>ä¸€äº›äººä¼šè¯¯ä»¥ä¸ºè¿™ä¸¤è€…çš„å·®åˆ«å°±æ˜¯â€œå¼ºç±»å‹çš„è¯­è¨€åœ¨å£°æ˜ä¸€ä¸ªå˜é‡æ—¶éœ€è¦æŒ‡æ˜å®ƒçš„ç±»å‹ï¼Œè€Œå¼±ç±»å‹çš„åˆ™ä¸ç”¨â€ã€‚å…¶å®è¿™ç§è§‚ç‚¹æ˜¯é”™è¯¯çš„ã€‚æ¯”å¦‚ä¸‹é¢è¿™ä¸ªJavaä»£ç ç‰‡æ®µï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">String s = &quot;hello&quot;;</div><div class="line">int l = s.getBytes().length;</div></pre></td></tr></table></figure></p>
<p>ç¼–è¯‘å™¨æ˜¯æ€ä¹ˆçŸ¥é“<code>.length</code>æ˜¯åˆæ³•çš„è¡¨è¾¾å¼å‘¢ï¼Ÿè¿™æ˜¯å› ä¸ºç¼–è¯‘å™¨çŸ¥é“<code>s</code>çš„æ•°æ®ç±»å‹ä¸º<code>String</code>ï¼Œå½“è°ƒç”¨<code>String</code>çš„<code>getBytes</code>æ–¹æ³•æ—¶ï¼Œè¿”å›å€¼çš„æ•°æ®ç±»å‹ä¸º<code>byte[]</code>ï¼Œæ‰€ä»¥<code>.length</code>æ˜¯åˆæ³•çš„è¡¨è¾¾å¼ã€‚<br>è¿™ä¸¤è€…çœŸæ­£çš„åŒºåˆ«æ˜¯ï¼š  </p>
<blockquote>
<p>åœ¨å¼ºç±»å‹çš„è¯­è¨€ï¼Œæ¯ä¸ªè¡¨è¾¾å¼çš„ç±»å‹éƒ½èƒ½å¤Ÿåœ¨ç¼–è¯‘æ—¶ç¡®å®šï¼Œå¹¶ä¸”åªå…è®¸é€‚ç”¨äºè¯¥ç±»å‹çš„æ“ä½œï¼›<br>å¼±ç±»å‹çš„è¯­è¨€å…è®¸å¯¹ä»»æ„ç±»å‹æ–½åŠ ä»»ä½•æ“ä½œï¼Œåªæ˜¯è¿™ä¸ªæ“ä½œæœ‰å¯èƒ½åœ¨è¿è¡Œæ—¶æŠ¥é”™ã€‚</p>
</blockquote>
<h2 id="æ•°æ®ç±»å‹"><a href="#æ•°æ®ç±»å‹" class="headerlink" title="æ•°æ®ç±»å‹"></a>æ•°æ®ç±»å‹</h2><p>æ ¹æ®<a href="http://www.ecma-international.org/ecma-262/5.1/#sec-8" target="_blank" rel="external">ECMAScript 5.1</a>çš„è§„èŒƒï¼Œjavascriptä¸­å…±æœ‰å…­ç§æ•°æ®ç±»å‹ï¼Œåˆ†åˆ«ä¸ºï¼š<code>Undefined</code>, <code>Null</code>, <code>Boolean</code>, <code>Number</code>, <code>String</code>ã€<code>Object</code>ã€‚å‰äº”ç§å±äºåŸºæœ¬ç±»å‹ï¼Œæœ€åä¸€ç§å±äºå¯¹è±¡ç±»å‹ã€‚</p>
<h3 id="åŸºæœ¬æ•°æ®ç±»å‹"><a href="#åŸºæœ¬æ•°æ®ç±»å‹" class="headerlink" title="åŸºæœ¬æ•°æ®ç±»å‹"></a>åŸºæœ¬æ•°æ®ç±»å‹</h3><ul>
<li><code>Undefined</code>ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸º<code>undefined</code>ï¼Œæ„å‘³ç€â€œç©ºå€¼(no value)â€ï¼Œé€‚ç”¨äºæ‰€æœ‰æ•°æ®ç±»å‹ã€‚</li>
<li><code>Null</code>ç±»å‹åªæœ‰ä¸€ä¸ªå€¼ï¼Œä¸º<code>null</code>ï¼Œæ„å‘³ç€â€œç©ºå¯¹è±¡(no object)â€ï¼Œåªé€‚ç”¨äºå¯¹è±¡ç±»å‹ã€‚</li>
<li><code>Boolean</code>ç±»å‹æœ‰ä¸¤ä¸ªå€¼ï¼Œä¸º<code>true</code>ä¸<code>false</code></li>
<li><code>Number</code>ç±»å‹çš„å€¼æ˜¯éµå¾ªIEEE 754æ ‡å‡†çš„64ä½æµ®ç‚¹æ•°çš„é›†åˆï¼Œç±»ä¼¼äºJavaçš„doubleã€‚æ²¡æœ‰æ•´å‹æ•°æ®ç»“æ„ã€‚æ­¤å¤–è¿˜åŒ…å«ä¸‰ä¸ªç‰¹æ®Šçš„å€¼ï¼š<code>NaN</code>ã€<code>Infinity</code>ã€<code>-Infinity</code></li>
<li><code>String</code>ç±»å‹çš„å€¼æ˜¯æœ‰ç©·ä¸ªUnicodeå­—ç¬¦çš„é›†åˆã€‚å¿…é¡»ç”¨<code>&#39;</code>æˆ–<code>&quot;</code>æ‹¬èµ·æ¥ã€‚</li>
</ul>
<h4 id="åŸºæœ¬ç±»å‹çš„stringä¸å¯¹è±¡ç±»å‹çš„stringåŒºåˆ«"><a href="#åŸºæœ¬ç±»å‹çš„stringä¸å¯¹è±¡ç±»å‹çš„stringåŒºåˆ«" class="headerlink" title="åŸºæœ¬ç±»å‹çš„stringä¸å¯¹è±¡ç±»å‹çš„stringåŒºåˆ«"></a>åŸºæœ¬ç±»å‹çš„stringä¸å¯¹è±¡ç±»å‹çš„stringåŒºåˆ«</h4><p>åœ¨javascriptæ˜¯åŒºåˆ†åŸºæœ¬ç±»å‹çš„stringä¸å¯¹è±¡ç±»å‹çš„stringï¼ˆNumberã€Booleanä¸ä¹‹ç±»ä¼¼ï¼‰ã€‚</p>
<ul>
<li>ä½¿ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œä¸ºåŸºæœ¬ç±»å‹çš„string</li>
<li>ä½¿ç”¨<code>String()</code>åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œä¸ºåŸºæœ¬ç±»å‹çš„string</li>
<li>ä½¿ç”¨<code>new String()</code>çš„æ–¹å¼åˆ›å»ºçš„å­—ç¬¦ä¸²ï¼Œä¸ºå¯¹è±¡ç±»å‹çš„string<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">str1 = &quot;javascript&quot;</div><div class="line">str2 = String(&quot;javascript&quot;)</div><div class="line">str3 = new String(&quot;javascript&quot;)</div><div class="line"></div><div class="line">&gt; typeof str1</div><div class="line">&quot;string&quot;</div><div class="line">&gt; typeof str2</div><div class="line">&quot;string&quot;</div><div class="line">&gt; typeof str3</div><div class="line">&quot;object&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>javascriptä¼šåœ¨åˆé€‚çš„æ—¶å€™è‡ªåŠ¨æŠŠåŸºæœ¬ç±»å‹çš„stringè½¬ä¸ºå¯¹è±¡ç±»å‹çš„stringï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥å¯¹åŸºæœ¬ç±»å‹stringä½¿ç”¨<code>String.prototype</code>ä¸­çš„æ–¹æ³•ã€‚è¿™ä¸¤è€…ä¹Ÿå¯ä»¥è¿›è¡Œæ˜¾å¼è½¬åŒ–ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// åŸºæœ¬ç±»å‹-----&gt;å¯¹è±¡ç±»å‹</div><div class="line">str1 = &quot;javascript&quot;</div><div class="line">str1 = new String(str1)</div><div class="line">&gt; typeof str1</div><div class="line">&quot;object&quot;</div><div class="line">// å¯¹è±¡ç±»å‹-----&gt;åŸºæœ¬ç±»å‹</div><div class="line">str1 = new String(&quot;javascript&quot;)</div><div class="line">str1 = str1.valueOf()</div><div class="line">&gt; typeof str1</div><div class="line">&quot;string&quot;</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸¤è€…ç”¨åœ¨<code>eval</code>å‡½æ•°ä¸­æ—¶ï¼Œç»“æœæœ‰æ‰€åŒºåˆ«ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var s1 = &apos;2 + 2&apos;;</div><div class="line">var s2 = new String(&apos;2 + 2&apos;);</div><div class="line">&gt; eval(s1)</div><div class="line">4</div><div class="line">&gt; eval(s2)</div><div class="line">[String: &apos;2 + 2&apos;]   //è¿™é‡Œè¿˜æ˜¯è¿”å›çš„stringå¯¹è±¡</div></pre></td></tr></table></figure></p>
<h4 id="nullä¸undefined"><a href="#nullä¸undefined" class="headerlink" title="nullä¸undefined"></a>nullä¸undefined</h4><p><code>null</code>ä¸<code>undefined</code>éƒ½è¡¨ç¤ºâ€œæ²¡æœ‰å€¼(non-value)â€çš„æ¦‚å¿µï¼Œå¦‚æœä¸¥æ ¼åŒºåˆ†ï¼š</p>
<ul>
<li><code>null</code>è¡¨ç¤ºç©º</li>
<li><code>undefined</code>è¡¨ç¤ºä¸å­˜åœ¨ã€‚æ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡ã€å‡½æ•°ä¸­ç¼ºå¤±çš„å‚æ•°ã€å‡½æ•°æ²¡æœ‰æ˜¾å¼returnå€¼æ—¶éƒ½ä¸ºæ­¤å€¼</li>
</ul>
<p>åœ¨å…¶ä»–è¯­è¨€ä¸­ï¼Œä¸€èˆ¬åªç”¨ä¸€ä¸ªnullæ¥è¡¨ç¤ºç©ºå€¼ï¼Œjavascriptä¸­ä¸ºä»€ä¹ˆå¤šäº†ä¸ªundefinedå‘¢ï¼Ÿè¿™æ˜¯å†å²åŸå› é€ æˆçš„ï¼š</p>
<blockquote>
<p>javascripté‡‡ç”¨äº†Javaçš„è¯­æ³•ï¼ŒæŠŠç±»å‹åˆ†ä¸ºäº†åŸºæœ¬ç±»å‹ä¸å¯¹è±¡ç±»å‹ï¼ŒJavaä¸­ç”¨nullæ¥è¡¨ç¤ºç©ºå¯¹è±¡ï¼Œjavascriptæƒ³å½“ç„¶çš„ç»§æ‰¿äº†è¿‡æ¥ï¼›åœ¨Cè¯­è¨€ä¸­ï¼Œnullåœ¨è½¬ä¸ºæ•°å­—æ—¶ä¸º0ï¼Œjavascriptä¹Ÿé‡‡å–åŒæ ·çš„æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; Number(null)</div><div class="line">0</div><div class="line">&gt; 5 + null</div><div class="line">5</div></pre></td></tr></table></figure></p>
<p>åœ¨javascript1.0æ—¶ï¼Œè¿˜æ²¡æœ‰å¼‚å¸¸å¤„ç†(exception handling)ï¼Œå¯¹äºä¸€äº›å¼‚å¸¸æƒ…å†µï¼ˆæ²¡æœ‰åˆå§‹åŒ–çš„å˜é‡ã€è°ƒç”¨å‡½æ•°æ—¶ç¼ºå¤±çš„å‚æ•°ç­‰ï¼‰ï¼Œéœ€è¦æ ‡æ˜ä¸ºä¸€ç§ç‰¹æ®Šçš„å€¼ï¼Œ<code>null</code>æœ¬æ¥æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œä½†æ˜¯Brendan EichåŒæ—¶æƒ³é¿å…ä¸‹é¢ä¸¤ä»¶äº‹ï¼š</p>
<ul>
<li>è¿™ä¸ªç‰¹æ®Šå€¼ä¸åº”è¯¥æœ‰å¼•ç”¨çš„ç‰¹æ€§ï¼Œå› ä¸ºé‚£æ˜¯å¯¹è±¡ç‰¹æœ‰çš„</li>
<li>è¿™ä¸ªç‰¹æ®Šå€¼ä¸åº”è¯¥èƒ½è½¬ä¸º0ï¼Œå› ä¸ºè¿™æ ·ä¸å®¹æ˜“å‘ç°ç¨‹åºä¸­çš„é”™è¯¯</li>
</ul>
<p>åŸºäºè¿™ä¸¤ä¸ªåŸå› ï¼ŒBrendan Eiché€‰æ‹©äº†<code>undefined</code>ï¼Œå®ƒå¯ä»¥è¢«å¼ºè½¬ä¸º<code>NaN</code>ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt; Number(undefined)</div><div class="line">NaN</div><div class="line">&gt; 5 + undefined</div><div class="line">NaN</div></pre></td></tr></table></figure></p>
</blockquote>
<p>ä¸¤è€…åœ¨äºJSONå¯¹è±¡æ‰“äº¤é“æ—¶ï¼Œç»“æœä¹Ÿè¿¥ç„¶ä¸åŒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&gt; JSON.parse(null)</div><div class="line">null</div><div class="line">&gt; JSON.parse(undefined)</div><div class="line">//Firfox SyntaxError: JSON.parse: unexpected character at line 1 column 1 of the JSON data</div><div class="line">//Chrome SyntaxError: Unexpected token u</div><div class="line"></div><div class="line">&gt; JSON.stringify(null)</div><div class="line">&quot;null&quot;</div><div class="line">&gt; JSON.stringify(undefined)</div><div class="line">undefined</div></pre></td></tr></table></figure></p>
<h3 id="å¯¹è±¡ç±»å‹"><a href="#å¯¹è±¡ç±»å‹" class="headerlink" title="å¯¹è±¡ç±»å‹"></a>å¯¹è±¡ç±»å‹</h3><p>javascriptä½œä¸ºä¸€é—¨<a href="http://en.wikipedia.org/wiki/Scripting_language" target="_blank" rel="external">è„šæœ¬è¯­è¨€</a>ï¼Œæœ¬èº«åŠŸèƒ½ååˆ†ç²¾ç®€ï¼Œå¾ˆå¤šåŠŸèƒ½ï¼ˆæ–‡ä»¶è¯»å†™ã€ç½‘ç»œç­‰ï¼‰éƒ½æ˜¯ç”±å®¿ä¸»ç¯å¢ƒæä¾›ã€‚å®¿ä¸»ç¯å¢ƒä¸javascriptè¯­è¨€çš„æ¡¥æ¢æ˜¯å¯¹è±¡ï¼Œå®¿ä¸»ç¯å¢ƒé€šè¿‡æä¾›ä¸€ç³»åˆ—ç¬¦åˆjavascriptè¯­æ³•çš„å¯¹è±¡ï¼Œæä¾›å„ç§å„æ ·çš„åŠŸèƒ½ã€‚</p>
<p>åœ¨<a href="/blog/2015/02/01/javascript-oop">javascripté¢å‘å¯¹è±¡ç¼–ç¨‹</a>è¿™ç¯‡æ–‡ç« ï¼ˆå¦‚æœä½ ä¸çŸ¥é“prototypeæ˜¯ä»€ä¹ˆï¼Œå¼ºçƒˆå»ºè®®çœ‹çœ‹è¿™ç¯‡æ–‡ç« ï¼‰é‡Œï¼Œæˆ‘å¤šæ¬¡å¼ºè°ƒäº†<code>å¯¹è±¡åœ¨javascriptä¸­å°±æ˜¯ä¸€ç³»åˆ—çš„é”®å€¼å¯¹</code>ï¼Œå°±åƒJavaä¸­çš„HashMapä¸€æ ·ï¼Œä¸è¿‡ï¼Œjavascriptä¸­å¯¹è±¡çš„å±æ€§å¯ä»¥æœ‰ä¸€äº›æè¿°ç¬¦(property descriptor)ï¼Œè¿™åœ¨HashMapä¸­æ˜¯æ²¡æœ‰çš„ã€‚</p>
<h4 id="å±æ€§æè¿°ç¬¦"><a href="#å±æ€§æè¿°ç¬¦" class="headerlink" title="å±æ€§æè¿°ç¬¦"></a>å±æ€§æè¿°ç¬¦</h4><p>å±æ€§æè¿°ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼š</p>
<ul>
<li>æ•°æ®æè¿°ç¬¦(data descriptor)ï¼ŒåŒ…å«ä¸€ç³»åˆ—booleanå€¼ï¼Œç”¨ä»¥è¯´æ˜è¯¥å±æ€§æ˜¯å¦å…è®¸ä¿®æ”¹ã€åˆ é™¤ã€‚</li>
<li>è®¿é—®æè¿°ç¬¦(accessor descriptor)ï¼ŒåŒ…å«getä¸setå‡½æ•°ã€‚</li>
</ul>
<p>è¿™ä¸¤ç§æè¿°ç¬¦éƒ½æ˜¯å¯¹è±¡ï¼Œå®ƒä»¬éƒ½æ‹¥æœ‰ä¸‹é¢ä¸¤ä¸ªbooleanå±æ€§ï¼š</p>
<ul>
<li>configurable ç”¨ä»¥æŒ‡å®šè¯¥æè¿°ç¬¦æ˜¯å¦å…è®¸ä¿®æ”¹ã€åˆ é™¤ã€‚é»˜è®¤ä¸ºfalseã€‚</li>
<li>enumerable ç”¨ä»¥æŒ‡å®šåœ¨éå†å¯¹è±¡ï¼ˆä½¿ç”¨<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...in" target="_blank" rel="external">forâ€¦inå¾ªç¯</a>æˆ–<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/keys" target="_blank" rel="external">Object.keysæ–¹æ³•</a>ï¼‰çš„å±æ€§æ—¶ï¼Œæ˜¯å¦è®¿é—®è¯¥å±æ€§ã€‚é»˜è®¤ä¸ºfalseã€‚</li>
</ul>
<p>é™¤äº†ä¸Šé¢è¿™ä¸¤ä¸ªå…±æœ‰å±æ€§å¤–ï¼Œæ•°æ®æè¿°ç¬¦è¿˜æœ‰ä¸‹é¢ä¸¤ä¸ªå±æ€§ï¼š</p>
<ul>
<li>value ç”¨ä»¥æŒ‡å®šè¯¥å±æ€§çš„å€¼ï¼Œé»˜è®¤ä¸ºundefined</li>
<li>writable ç”¨ä»¥æŒ‡å®šè¯¥å±æ€§çš„å€¼æ˜¯å¦å…è®¸æ”¹å˜è¯¥å±æ€§çš„å€¼ï¼Œé»˜è®¤ä¸ºfalse</li>
</ul>
<p>è®¿é—®æè¿°ç¬¦è¿˜æœ‰ä¸‹é¢ä¸¤ä¸ªå±æ€§ï¼š</p>
<ul>
<li>get ç”¨ä»¥æŒ‡å®šè®¿é—®è¯¥å±æ€§æ—¶çš„è®¿é—®å™¨(getterï¼Œæœ¬è´¨æ˜¯ä¸ªå‡½æ•°)ï¼Œè¯¥è®¿é—®å™¨çš„è¿”å›å€¼ä¸ºè¯¥å±æ€§çš„å€¼ã€‚é»˜è®¤ä¸ºundefined</li>
<li>set ç”¨ä»¥æŒ‡å®šè®¿é—®è¯¥å±æ€§æ—¶çš„èµ‹å€¼å™¨(setterï¼Œæœ¬è´¨æ˜¯ä¸ªå‡½æ•°)ï¼Œè¯¥èµ‹å€¼å™¨çš„æ¥å—ä¸€ä¸ªå‚æ•°ã€‚é»˜è®¤ä¸ºundefined</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">Object.defineProperty</a>æ¥è®¾ç½®å¯¹è±¡çš„å±æ€§æè¿°ç¬¦ã€‚ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// using __proto__</div><div class="line">Object.defineProperty(obj, &apos;key&apos;, &#123;</div><div class="line">  __proto__: null, // no inherited properties</div><div class="line">  value: &apos;static&apos;  // not enumerable</div><div class="line">                   // not configurable</div><div class="line">                   // not writable</div><div class="line">                   // as defaults</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡ä¸Šé¢è¿™ä¸ªä¾‹å­å¯ä»¥çœ‹å‡ºï¼Œæè¿°ç¬¦å…·æœ‰ç»§æ‰¿çš„ç‰¹ç‚¹ï¼Œæˆ‘ä»¬è¿™é‡Œæ˜¾å¼çš„æŠŠæè¿°ç¬¦å¯¹è±¡çš„<code>__proto__</code>è®¾ä¸º<code>null</code>ï¼Œå°±é¿å…äº†ä»<code>Object.prototype</code>ä¸­ç»§æ‰¿ç›¸åº”å±æ€§ã€‚å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥æ˜¾å¼åœ°è®¾ç½®æè¿°ç¬¦çš„æ‰€æœ‰å±æ€§ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// being explicit</div><div class="line">Object.defineProperty(obj, &apos;key&apos;, &#123;</div><div class="line">  enumerable: false,</div><div class="line">  configurable: false,</div><div class="line">  writable: false,</div><div class="line">  value: &apos;static&apos;</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·çš„æ•ˆæœå’Œç¬¬ä¸€æ®µä»£ç çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ä¸‹é¢å†ä¸¾ä¸€ä¸ªè®¿é—®æè¿°ç¬¦çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// Example of an object property added with defineProperty with an accessor property descriptor</div><div class="line">var bValue = 38;</div><div class="line">Object.defineProperty(obj, &apos;key&apos;, &#123;</div><div class="line">  get: function() &#123; return bValue; &#125;,</div><div class="line">  set: function(newValue) &#123; bValue = newValue; &#125;,</div><div class="line">  enumerable: true,</div><div class="line">  configurable: true</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸èƒ½æ··æ·†äº†è®¿é—®æè¿°å™¨ä¸æ•°æ®æè¿°å™¨ã€‚ä¸‹é¢è¿™æ ·å†™æ˜¯é”™è¯¯çš„ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// You cannot try to mix both:</div><div class="line">Object.defineProperty(obj, &apos;conflict&apos;, &#123;</div><div class="line">  value: 0x9f91102,</div><div class="line">  get: function() &#123; return 0xdeadbeef; &#125;</div><div class="line">&#125;);</div><div class="line">// throws a TypeError: property descriptors must not specify a value</div><div class="line">// or be writable when a getter or setter has been specified</div></pre></td></tr></table></figure></p>
<p>##typeof</p>
<p>å¦‚æœæƒ³åœ¨è¿è¡Œæ—¶è·çŸ¥æŸå˜é‡çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨typeofæ“ä½œç¬¦ã€‚typeofçš„è¿”å›å€¼å¦‚ä¸‹è¡¨ï¼š</p>
<center><br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2WufjbVXXXXX1XpXXXXXXXXXX_!!581166664.png" alt="typeof-values"><br></center>

<p>å…¶ä¸­æœ‰ä¸€å¤„éœ€è¦æ³¨æ„ï¼Œé‚£å°±æ˜¯<code>typeof null == &quot;object&quot;</code>ï¼ŒæŒ‰ç…§<a href="http://www.ecma-international.org/ecma-262/5.1/#sec-4.3.2" target="_blank" rel="external">ECMAScript 5.1</a>æ ‡å‡†ï¼Œ<code>Null</code>ç±»å‹åº”è¯¥æ˜¯ä¸ªåŸºæœ¬ç±»å‹ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œè¿”å›<code>object</code>å‘¢ï¼ŸåŸå› æ˜¯è¿™æ ·çš„ï¼š</p>
<blockquote>
<p>åœ¨javascript 1.0ä¸­ï¼Œjavascriptä¸­çš„å€¼æ˜¯ç”¨ä¸€ä¸ªç±»å‹æ ‡å¿—ï¼ˆtype tagï¼‰å’Œä¸€ä¸ªå®é™…å€¼è¿™æ ·çš„ç»“æ„è¡¨ç¤ºçš„ï¼Œå¯¹è±¡çš„ç±»å‹æ ‡å¿—ä¸º0ï¼Œnullåœ¨Cè¯­è¨€ä¸­è¡¨ç¤ºNULLæŒ‡é’ˆï¼ˆ0x00ï¼‰ï¼Œæ‰€ä»¥nullçš„ç±»å‹æ ‡å¿—å°±ä¸º0äº†ã€‚</p>
</blockquote>
<p>##å‚è€ƒ</p>
<ul>
<li><a href="http://speakingjs.com/es5/ch08.html#undefined_null" target="_blank" rel="external">ã€ŠSpeaking JavaScriptã€‹ Chapter 8. Values</a></li>
<li><a href="http://javascript.crockford.com/survey.html" target="_blank" rel="external">A Survey of the JavaScript Programming Language</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="external">Object.defineProperty</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="external">Standard built-in objects String</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/typeof" target="_blank" rel="external">typeof</a></li>
<li><a href="http://www.2ality.com/2013/10/typeof-null.html" target="_blank" rel="external">The history of â€œtypeof nullâ€</a> ï¼ˆéœ€ç¿»å¢™ï¼‰</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å­¦ä¸€é—¨ç¼–ç¨‹è¯­è¨€ï¼Œæ— éä¸¤æ–¹é¢ï¼šä¸€æ˜¯è¯­æ³•ï¼ŒäºŒæ˜¯æ•°æ®ç±»å‹ã€‚ç±»Cè¯­è¨€çš„è¯­æ³•ä¸å¤–ä¹ifã€whileã€forã€å‡½æ•°ã€ç®—æœ¯è¿ç®—ç­‰ï¼Œé¢å‘å¯¹è±¡çš„è¯­è¨€å†åŠ ä¸Šobjectã€‚&lt;br&gt;è¯­æ³•åªæ˜¯è¯­è¨€è®¾è®¡è€…é¢„å…ˆåšçš„ä¸€å¥—è§„åˆ™ï¼Œä¸åŒè¯­è¨€è¯­æ³•ä¸å°½ç›¸åŒï¼Œä½†éƒ½æœ‰ä¸€äº›å…±é€šç‚¹ï¼Œå¯¹äºç†Ÿæ‚‰ä¸€ä¸¤é—¨ç¼–ç¨‹è¯­è¨€çš„äººï¼Œå­¦å…¶ä»–çš„ç¼–ç¨‹
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="JavaScript" scheme="http://liujiacai.net/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>javascriptä¸­çš„é¢å‘å¯¹è±¡ç¼–ç¨‹</title>
    <link href="http://liujiacai.net/blog/2015/02/01/javascript-oop/"/>
    <id>http://liujiacai.net/blog/2015/02/01/javascript-oop/</id>
    <published>2015-02-01T04:53:18.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å·¥ä½œä¸€ç›´åœ¨ç”¨nodejsåšå¼€å‘ï¼Œæœ‰äº†nodejsï¼Œå‰ç«¯ã€åç«¯ã€è„šæœ¬å…¨éƒ½å¯ä»¥ç”¨javascriptæå®šï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚ä½†æ˜¯javascriptçš„å¾ˆå¤šè¯­æ³•ï¼Œæ¯”å¦‚å¯¹è±¡ï¼Œå°±å’Œæˆ‘ä»¬å¸¸ç”¨çš„é¢å‘å¯¹è±¡(object oriented programming)çš„ç¼–ç¨‹è¯­è¨€ä¸åŒï¼›çœ‹æŸä¸ªjavascriptå¼€æºé¡¹ç›®ï¼Œä¹Ÿç»å¸¸ä¼šçœ‹åˆ°ä½¿ç”¨thiså…³é”®å­—ï¼Œè€Œè¿™ä¸ªthiså…³é”®å­—åœ¨javascriptä¸­å› ä¸Šä¸‹æ–‡ä¸åŒè€Œæ„ä¹‰ä¸åŒï¼›è¿˜æœ‰è®©äººå¥‡æ€ªçš„åŸå‹é“¾ã€‚è¿™äº›é›¶é›¶ç¢ç¢çš„ä¸œè¥¿åŠ èµ·æ¥å°±å¾ˆå®¹æ˜“è®©äººä¸çŸ¥æ‰€æªï¼Œæ‰€ä»¥ï¼Œæœ‰å¿…è¦å¯¹javascriptè¿™é—¨è¯­è¨€è¿›è¡Œä¸€ä¸‹æ·±å…¥äº†è§£ã€‚</p>
<p>æˆ‘è¿™ç¯‡æ–‡ç« ä¸»è¦æƒ³è¯´è¯´å¦‚ä½•åœ¨javascriptä¸­è¿›è¡Œé¢å‘å¯¹è±¡çš„ç¼–ç¨‹ï¼ŒåŒæ—¶ä¼šè®²ä¸€äº›javascriptè¿™é—¨è¯­è¨€åœ¨è®¾è®¡ä¹‹åˆçš„ç†å¿µã€‚ä¸‹é¢è®©æˆ‘ä»¬å¼€å§‹å§ã€‚<br>é¦–å…ˆå¼ºè°ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„javascriptéƒ½æ˜¯éµå¾ªäº†<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Language_Resources" target="_blank" rel="external">ECMAScript 5.1</a>æ ‡å‡†çš„ï¼Œæ­£åœ¨åˆ¶å®šä¸­çš„ç‰ˆæœ¬ä¸º6.0ï¼Œè¿™ä¸ªç‰ˆæœ¬å˜åŒ–å¾ˆå¤§ï¼Œå¢åŠ äº†å¾ˆå¤šæ–°çš„è¯­æ³•ä¸å‡½æ•°ï¼Œå¤§å®¶å¯ä»¥å»<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript" target="_blank" rel="external">Mozilla Developer Network</a>ä¸ŠæŸ¥çœ‹ã€‚</p>
<h2 id="è®¾è®¡ç†å¿µ"><a href="#è®¾è®¡ç†å¿µ" class="headerlink" title="è®¾è®¡ç†å¿µ"></a>è®¾è®¡ç†å¿µ</h2><p>javascript1.0 æœ€åˆæ˜¯ç”±ç½‘æ™¯å…¬å¸çš„<a href="http://en.wikipedia.org/wiki/Brendan_Eich" target="_blank" rel="external">Brendan Eich</a>åœ¨1995å¹´5æœˆèŠ±äº†<a href="http://www.computer.org/csdl/mags/co/2012/02/mco2012020007.pdf" target="_blank" rel="external">åå¤©æå‡ºæ¥çš„</a>ï¼ŒEichçš„ç›®æ ‡æ˜¯è®¾è®¡å‡ºä¸€ç§å³è½»é‡åˆå¼ºå¤§çš„è¯­è¨€ï¼Œæ‰€ä»¥Eichå……åˆ†å€Ÿé‰´äº†å…¶ä»–ç¼–ç¨‹è¯­è¨€çš„ç‰¹æ€§ï¼Œæ¯”å¦‚Javaçš„è¯­æ³•(syntax)ã€Schemeçš„å‡½æ•°(function)ã€Selfçš„åŸå‹ç»§æ‰¿(prototypal inheritance)ã€Perlçš„æ­£åˆ™è¡¨è¾¾å¼ç­‰ã€‚<br>å…¶ä¸­å€¼å¾—ä¸€æçš„æ˜¯ï¼Œä¸ºä»€ä¹ˆç»§æ‰¿å€Ÿé‰´äº†Selfè¯­è¨€çš„åŸå‹æœºåˆ¶è€Œä¸æ˜¯Javaçš„ç±»æœºåˆ¶ï¼Ÿé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ï¼š</p>
<ul>
<li>Selfçš„åŸå‹æœºåˆ¶æ˜¯é è¿è¡Œæ—¶çš„è¯­ä¹‰</li>
<li>Javaçš„ç±»æœºåˆ¶æ˜¯é ç¼–è¯‘æ—¶çš„ç±»è¯­æ³•</li>
</ul>
<p>Javascript1.0çš„åŠŸèƒ½ç›¸å¯¹ç®€å•ï¼Œä¸ºäº†åœ¨ä»Šåä¸æ–­ä¸°å¯Œjavascriptæœ¬èº«åŠŸèƒ½çš„åŒæ—¶ä¿æŒæ—§ä»£ç çš„å…¼å®¹æ€§ï¼Œjavascripté€šè¿‡æ”¹å˜è¿è¡Œæ—¶çš„æ”¯æŒæ¥å¢åŠ æ–°åŠŸèƒ½ï¼Œè€Œä¸æ˜¯é€šè¿‡ä¿®æ”¹javascriptçš„è¯­æ³•ï¼Œè¿™å°±ä¿è¯äº†æ—§ä»£ç çš„å…¼å®¹æ€§ã€‚è¿™ä¹Ÿå°±æ˜¯javascripté€‰æ‹©åŸºäºè¿è¡Œæ—¶çš„åŸå‹æœºåˆ¶çš„åŸå› ã€‚<br>wikipediaè¿™æ ·æè¿°åˆ°ï¼šJavaScript is classified as a <a href="http://en.wikipedia.org/wiki/Prototype-based_programming" target="_blank" rel="external">prototype-based</a> scripting language with <a href="http://en.wikipedia.org/wiki/Dynamic_language" target="_blank" rel="external">dynamic typing</a> and <a href="http://en.wikipedia.org/wiki/First-class_functions" target="_blank" rel="external">first-class functions</a>ã€‚è¿™äº›ç‰¹æ€§ä½¿å¾—javascriptæ˜¯ä¸€ç§<a href="http://en.wikipedia.org/wiki/Multi-paradigm" target="_blank" rel="external">å¤šèŒƒå¼</a>çš„<a href="http://en.wikipedia.org/wiki/Interpreter_%28computing%29" target="_blank" rel="external">è§£é‡Šæ€§</a>ç¼–ç¨‹è¯­è¨€ï¼Œæ”¯æŒ<a href="http://en.wikipedia.org/wiki/Object-oriented_programming" target="_blank" rel="external">é¢å‘å¯¹è±¡</a>,<a href="http://en.wikipedia.org/wiki/Imperative_programming" target="_blank" rel="external">å‘½ä»¤å¼(imperative)</a>, <a href="http://en.wikipedia.org/wiki/Functional_programming" target="_blank" rel="external">å‡½æ•°å¼(functional)</a>ç¼–ç¨‹é£æ ¼ã€‚</p>
<p>##å¯¹è±¡<br>åœ¨javascriptä¸­ï¼Œé™¤äº†<code>Undefined</code>, <code>Null</code>, <code>Boolean</code>, <code>Number</code>, <code>String</code>è¿™å‡ ä¸ªç®€å•ç±»å‹å¤–ï¼Œå…¶ä»–çš„éƒ½æ˜¯å¯¹è±¡ã€‚<br>æ•°å­—ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼è¿™äº›ç®€å•ç±»å‹éƒ½æ˜¯ä¸å¯å˜é‡ï¼Œå¯¹è±¡æ˜¯å¯å˜çš„é”®å€¼å¯¹çš„é›†åˆ(mutable keyed conllections)ï¼Œå¯¹è±¡åŒ…æ‹¬æ•°ç»„<code>Array</code>ã€æ­£åˆ™è¡¨è¾¾å¼<code>RegExp</code>ã€å‡½æ•°<code>Function</code>ï¼Œå½“ç„¶å¯¹è±¡<code>Object</code>ä¹Ÿæ˜¯å¯¹è±¡ã€‚<br>å¯¹è±¡åœ¨javascriptä¸­è¯´ç™½äº†å°±æ˜¯<code>ä¸€ç³»åˆ—çš„é”®å€¼å¯¹</code>ã€‚é”®å¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ï¼ŒåŒ…æ‹¬ç©ºä¸²ï¼›å€¼å¯ä»¥æ˜¯ä»»ä½•å€¼ã€‚åœ¨javascriptä¸­æ˜¯æ²¡æœ‰ç±»çš„æ¦‚å¿µ(class-free)çš„ï¼Œä½†æ˜¯å®ƒæœ‰ä¸€ä¸ªåŸå‹é“¾(prototype linkage)ã€‚javascriptå¯¹è±¡é€šè¿‡è¿™ä¸ªé“¾æ¥å®ç°ç»§æ‰¿å…³ç³»ã€‚</p>
<p>javascriptä¸­æœ‰ä¸€äº›<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects" target="_blank" rel="external">é¢„å®šä¹‰å¯¹è±¡</a>ï¼Œåƒæ˜¯<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="external">Object</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="external">Function</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="external">Date</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number" target="_blank" rel="external">Number</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="external">String</a>ã€<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">Array</a>ç­‰ã€‚</p>
<p>###å­—é¢é‡(literal)<br>javascriptä¸­çš„æ¯ç§ç±»å‹çš„å¯¹è±¡éƒ½å¯ä»¥é‡‡ç”¨<code>å­—é¢é‡(literal)</code>çš„æ–¹å¼åˆ›å»ºã€‚<br>å¯¹äºObjectå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>å¯¹è±¡å­—é¢é‡(Object literal)</code>æ¥åˆ›å»ºï¼Œä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var empty_object = &#123;&#125;;//åˆ›å»ºäº†ä¸€ä¸ªç©ºå¯¹è±¡</div><div class="line">//åˆ›å»ºäº†ä¸€ä¸ªæœ‰ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡</div><div class="line">var stooge = &#123;</div><div class="line">    &quot;first-name&quot;: &quot;Jerome&quot;,</div><div class="line">    &quot;last-name&quot;: &quot;Howard&quot;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ç”¨<code>new Object()</code>æˆ–<code>Object.create()</code>çš„æ–¹å¼æ¥åˆ›å»ºå¯¹è±¡ã€‚<br>å¯¹äº<code>Function</code>ã€<code>Array</code>å¯¹è±¡éƒ½æœ‰å…¶ç›¸åº”çš„å­—é¢é‡å½¢å¼ï¼Œåé¢ä¼šè®²åˆ°ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<p>###åŸå‹é“¾(prototype linkage)<br>javascriptä¸­çš„æ¯ä¸ªå¯¹è±¡éƒ½éšå¼å«æœ‰ä¸€ä¸ª<code>[[prototype]]</code>å±æ€§ï¼Œè¿™æ˜¯ECMAScriptä¸­çš„è®°æ³•ï¼Œç›®å‰å„å¤§æµè§ˆå™¨å‚å•†åœ¨å®ç°è‡ªå·±çš„javascriptè§£é‡Šå™¨æ—¶ï¼Œé‡‡ç”¨çš„è®°æ³•æ˜¯<code>__proto__</code>ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªå¯¹è±¡éƒ½éšå¼åŒ…å«ä¸€ä¸ª<code>__proto__</code>å±æ€§ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">var foo = &#123;</div><div class="line">    x: 10,</div><div class="line">    y: 20</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>fooè¿™ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„å­˜å‚¨ç»“æ„å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<center><br><br><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2vFhwbVXXXXc7XpXXXXXXXXXX_!!581166664.png" alt="basic-object"><br></center>

<p>å½“æœ‰å¤šä¸ªå¯¹è±¡æ—¶ï¼Œé€šè¿‡<code>__proto__</code>å±æ€§å°±èƒ½å¤Ÿå½¢æˆä¸€æ¡åŸå‹é“¾ã€‚çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var a = &#123;</div><div class="line">    x: 10,</div><div class="line">    calculate: function (z) &#123;</div><div class="line">        return this.x + this.y + z;</div><div class="line">    &#125;</div><div class="line">&#125;;</div><div class="line">var b = &#123;</div><div class="line">    y: 20,</div><div class="line">    __proto__: a</div><div class="line">&#125;;</div><div class="line">var c = &#123;</div><div class="line">    y: 30,</div><div class="line">    __proto__: a</div><div class="line">&#125;;</div><div class="line">// call the inherited method</div><div class="line">b.calculate(30); // 60</div><div class="line">c.calculate(40); // 80</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„ä»£ç åœ¨å£°æ˜å¯¹è±¡bã€cæ—¶ï¼ŒæŒ‡æ˜äº†å®ƒä»¬çš„åŸå‹ä¸ºå¯¹è±¡aï¼ˆaçš„åŸå‹é»˜è®¤æŒ‡å‘Object.prototypeï¼ŒObject.prototypeè¿™ä¸ªå¯¹è±¡çš„åŸå‹æŒ‡å‘nullï¼‰ï¼Œè¿™å‡ ä¸ªå¯¹è±¡åœ¨å†…å­˜ä¸­çš„ç»“æ„å¤§è‡´æ˜¯è¿™æ ·çš„ï¼š</p>
<center><br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2RwVEbVXXXXaCXpXXXXXXXXXX_!!581166664.png" alt="prototype-chain"><br></center>


<p>è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ç‚¹ï¼Œ<code>__proto__</code>ä¸æ˜¯ECMAScriptçš„è§„å®šï¼Œè€Œæ˜¯ç”±äºåœ¨javascriptæ—©æœŸï¼ŒECMAScriptæ²¡æœ‰æ˜ç¡®çš„è¯´æ˜å¦‚ä½•è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„åŸå‹ï¼Œæ‰€ä»¥å„å¤§å®ç°å•†é‡‡ç”¨äº†çº¦å®šä¿—æˆçš„<code>__proto__</code>è®°æ³•ã€‚<br>åœ¨ECMAScript 3.1åŠä»¥åçš„ç‰ˆæœ¬ä¸­ï¼Œä¸ºå†…ç½®å¯¹è±¡<code>Object</code>æ·»åŠ äº†è®¿é—®è®¾ç½®ã€å¯¹è±¡åŸå‹çš„æ–¹æ³•ï¼š</p>
<ul>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf" target="_blank" rel="external">getPropertyOf()</a>ï¼Œç”¨äºè·å–å¯¹è±¡çš„åŸå‹</li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create" target="_blank" rel="external">create()</a>ï¼Œåœ¨åˆ›å»ºå¯¹è±¡æ—¶è®¾ç½®å¯¹è±¡çš„åŸå‹ã€‚</li>
</ul>
<p>####__proto__ vs prototype<br>é™¤äº†æˆ‘ä»¬è¿™é‡Œè¯´çš„<code>__proto__</code>å±æ€§ï¼Œç›¸ä¿¡å¤§å®¶å¹³å¸¸æ›´å¸¸è§çš„æ˜¯<code>prototype</code>å±æ€§ã€‚æ¯”å¦‚ï¼ŒDateå¯¹è±¡ä¸­æ²¡æœ‰åŠ å‡ å¤©çš„å‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Date.prototype.addDays = function(n) &#123;</div><div class="line">    this.setDate(this.getDate() + n);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>é‚£ä¹ˆæ‰€æœ‰é€šè¿‡<code>new Date()</code>å¾—åˆ°çš„å¯¹è±¡å°±æ‹¥æœ‰<code>addDays</code>æ–¹æ³•äº†ï¼ˆåé¢è®²è§£ç»§æ‰¿æ˜¯ä¼šè§£é‡ŠåŸå› ï¼‰ã€‚é‚£ä¹ˆ<code>__proto__</code>å±æ€§ä¸<code>prototype</code>å±æ€§æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<blockquote>
<p>javascriptçš„æ¯ä¸ªå¯¹è±¡éƒ½æœ‰<code>__proto__</code>å±æ€§ï¼Œä½†æ˜¯åªæœ‰<code>å‡½æ•°å¯¹è±¡</code>æœ‰<code>prototype</code>å±æ€§ã€‚</p>
</blockquote>
<p>é‚£ä¹ˆåœ¨å‡½æ•°å¯¹è±¡ä¸­ï¼Œ è¿™ä¸¤ä¸ªå±æ€§çš„æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<ol>
<li><code>__proto__</code>è¡¨ç¤ºè¯¥å‡½æ•°å¯¹è±¡çš„åŸå‹</li>
<li><code>prototype</code>è¡¨ç¤ºä½¿ç”¨newæ¥æ‰§è¡Œè¯¥å‡½æ•°æ—¶ï¼ˆè¿™ç§å‡½æ•°ä¸€èˆ¬æˆä¸ºæ„é€ å‡½æ•°ï¼Œåé¢ä¼šè®²è§£ï¼‰ï¼Œæ–°åˆ›å»ºçš„å¯¹è±¡çš„åŸå‹ã€‚ä¾‹å¦‚ï¼š<pre><code>var d = new Date();
d.__proto__ === Date.prototype; //è¿™é‡Œä¸ºtrue
Date.__proto__ === Object.__proto__  //è¿™é‡Œä¸ºtrue
</code></pre></li>
</ol>
<p>çœ‹åˆ°è¿™é‡Œï¼Œå¸Œæœ›å¤§å®¶èƒ½å¤Ÿç†è§£è¿™ä¸¤ä¸ªå±æ€§çš„åŒºåˆ«äº†ã€‚</p>
<p>####instanceof</p>
<p>instanceofåœ¨javascriptä¸­æ˜¯ä¸ª<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Keywords" target="_blank" rel="external">å…³é”®å­—</a>ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code>obj instanceof constructorFunction
</code></pre><p>ç”¨äºæ£€æµ‹<code>constructorFunction.prototype</code>å¯¹è±¡æ˜¯å¦åœ¨<code>obj</code>çš„<code>åŸå‹é“¾</code>ä¸­ã€‚<br>å¦‚æœæˆ‘ä»¬è‡ªå·±å®ç°ç±»ä¼¼äº<code>instanceof</code>çš„å‡½æ•°ï¼Œå¯ä»¥è¿™ä¹ˆåšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function instanceOf(obj, constructorFunction) &#123;</div><div class="line">    while (obj != null) &#123;</div><div class="line">        if (obj === constructorFunction.prototype)</div><div class="line">            return true;</div><div class="line">        obj = Object.getPrototypeOf(obj);</div><div class="line">    &#125;</div><div class="line">    return false;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢çœ‹ä¸€ä¸ªä½¿ç”¨<code>instanceof</code>çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">function Car(make, model, year) &#123;</div><div class="line">  this.make = make;</div><div class="line">  this.model = model;</div><div class="line">  this.year = year;</div><div class="line">&#125;</div><div class="line">var mycar = new Car(&quot;Honda&quot;, &quot;Accord&quot;, 1998);</div><div class="line">mycar instanceof Car;    // trueï¼Œå› ä¸ºmycar.__proto__ === Car.prototype</div><div class="line">mycar instanceof Object; // trueï¼Œå› ä¸ºmycar.__proto__.__proto__ === Object.prototype</div></pre></td></tr></table></figure></p>
<p>åœ¨javascriptï¼ŒåŸå‹å’Œå‡½æ•°æ˜¯æœ€é‡è¦çš„ä¸¤ä¸ªæ¦‚å¿µï¼Œä¸Šé¢è¯´å®Œäº†åŸå‹ï¼Œä¸‹é¢è¯´è¯´å‡½æ•°å¯¹è±¡ã€‚</p>
<p>###å‡½æ•°å¯¹è±¡Function</p>
<p>é¦–å…ˆï¼Œå‡½æ•°åœ¨javascriptä¸­æ— éä¹Ÿæ˜¯ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½œä¸ºvalueèµ‹å€¼ç»™æŸä¸ªå˜é‡ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯å‡½æ•°èƒ½å¤Ÿè¢«æ‰§è¡Œã€‚</p>
<ul>
<li>ä½¿ç”¨å¯¹è±¡å­—é¢é‡æ–¹å¼åˆ›å»ºçš„å¯¹è±¡çš„<code>__proto__</code>å±æ€§æŒ‡å‘<code>Object.prototype</code>(<code>Object.prototype</code>çš„<code>__proto__</code>å±æ€§æŒ‡å‘<code>null</code>)ï¼›</li>
<li>ä½¿ç”¨å‡½æ•°å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡çš„<code>__proto__</code>å±æ€§æŒ‡å‘<code>Function.prototype</code>(<code>Function.prototype</code>å¯¹è±¡çš„<code>__proto__</code>å±æ€§æŒ‡å‘<code>Object.prototype</code>)ã€‚<br>å‡½æ•°å¯¹è±¡é™¤äº†<code>__proto__</code>è¿™ä¸ªéšå¼å±æ€§å¤–ï¼Œè¿˜æœ‰ä¸¤ä¸ªéšå¼çš„å±æ€§ï¼š</li>
</ul>
<ol>
<li>å‡½æ•°çš„ä¸Šä¸‹æ–‡(functionâ€™s context)</li>
<li>å®ç°å‡½æ•°çš„ä»£ç (the code that implements the functionâ€™s behavior)</li>
</ol>
<p>å’Œå¯¹è±¡å­—é¢é‡ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>å‡½æ•°å­—é¢é‡(function literal)</code>æ¥åˆ›å»ºå‡½æ•°ã€‚ç±»ä¼¼äºä¸‹é¢çš„æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//ä½¿ç”¨å­—é¢é‡æ–¹å¼åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå¹¶èµ‹å€¼ç»™addå˜é‡</div><div class="line">var add = function (a, b) &#123;</div><div class="line">    return a + b;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>ä¸€ä¸ªå‡½æ•°å­—é¢é‡æœ‰å››ä¸ªéƒ¨åˆ†ï¼š</p>
<ol>
<li>functionå…³é”®å­—ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>å‡½æ•°åï¼Œå¯é€‰é¡¹ã€‚ä¸Šé¢çš„ç¤ºä¾‹ä¸­å°±çœç•¥äº†å‡½æ•°åã€‚</li>
<li>ç”±åœ†æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€ç³»åˆ—å‚æ•°ï¼Œå¿…é€‰é¡¹ã€‚</li>
<li>ç”±èŠ±æ‹¬å·æ‹¬èµ·æ¥çš„ä¸€ç³»åˆ—è¯­å¥ï¼Œå¿…é€‰é¡¹ã€‚è¯¥å‡½æ•°æ‰§è¡Œæ—¶å°†ä¼šæ‰§è¡Œè¿™äº›è¯­å¥ã€‚</li>
</ol>
<p>####å‡½æ•°è°ƒç”¨ä¸this<br>ä¸€ä¸ªå‡½æ•°åœ¨è¢«è°ƒç”¨æ—¶ï¼Œé™¤äº†å£°æ˜çš„å‚æ•°å¤–ï¼Œè¿˜ä¼šéšå¼ä¼ é€’ä¸¤ä¸ªé¢å¤–çš„å‚æ•°ï¼š<code>this</code>ä¸<code>arguments</code>ã€‚<br>thisåœ¨OOPä¸­å¾ˆé‡è¦ï¼Œthisçš„å€¼éšç€è°ƒç”¨æ–¹å¼çš„ä¸åŒè€Œä¸åŒã€‚javascriptä¸­å…±æœ‰å››ç§è°ƒç”¨æ–¹å¼ï¼š</p>
<ol>
<li>method invocation patternã€‚å½“å‡½æ•°ä½œä¸ºæŸå¯¹è±¡ä¸€ä¸ªå±æ€§è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘è¿™ä¸ªå¯¹è±¡ã€‚thisèµ‹å€¼è¿‡ç¨‹å‘ç”Ÿåœ¨å‡½æ•°è°ƒç”¨æ—¶ï¼ˆä¹Ÿå°±æ˜¯è¿è¡Œæ—¶ï¼‰ï¼Œè¿™å«åšlate binding</li>
<li><p>function invocation patternã€‚å½“å‡½æ•°ä¸ä½œä¸ºå±æ€§è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆè¿™é‡Œçš„å…¨å±€å¯¹è±¡ä¾å®¿èˆç¯å¢ƒè€Œå¼‚ï¼Œåœ¨æµè§ˆå™¨ä¸­ï¼Œæ˜¯windowå¯¹è±¡ï¼‰ï¼Œè¿™æ˜¯ä¸ªè®¾è®¡ä¸Šçš„é”™è¯¯ï¼Œæ­£ç¡®çš„è¯ï¼Œå†…éƒ¨å‡½æ•°çš„thisåº”è¯¥æŒ‡å‘å¤–éƒ¨å‡½æ•°ã€‚å¯ä»¥é€šè¿‡åœ¨å‡½æ•°ä¸­å®šä¹‰ä¸€ä¸ªå˜é‡æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<pre><code>var add = function(a, b) {return a+b;}
var obj = {
    value: 3,
    double: function() {
        var self = this;//æŠŠthisèµ‹å€¼ç»™äº†self
        this.value = add(self.value, self.value);
    }
}
obj.double(); //obj.valueç°åœ¨ä¸º6
</code></pre></li>
<li><p>construct invocation patternã€‚javascriptæ˜¯ä¸€é—¨åŸå‹ç»§æ‰¿è¯­è¨€ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€å¯¹è±¡å¯ä»¥ç›´æ¥ä»å…¶ä»–å¯¹è±¡ä¸­ç»§æ‰¿å±æ€§ï¼Œæ²¡æœ‰ç±»çš„æ¦‚å¿µã€‚è¿™å’Œjavaä¸­çš„ç»§æ‰¿ä¸ä¸€æ ·ã€‚ä½†æ˜¯javascriptæä¾›äº†ä¸€ç§ç±»ä¼¼ä¸javaåˆ›å»ºå¯¹è±¡çš„è¯­æ³•ã€‚å½“ä¸€ä¸ªå‡½æ•°ç”¨newæ¥è°ƒç”¨æ—¶ï¼ŒthisæŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚è¿™æ—¶çš„å‡½æ•°é€šå¸¸ç§°ä¸ºæ„é€ å‡½æ•°ã€‚</p>
</li>
<li>apply invocation patternã€‚ä½¿ç”¨å‡½æ•°å¯¹è±¡çš„<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply" target="_blank" rel="external">applyæ–¹æ³•</a>æ¥æ‰§è¡Œæ—¶ï¼ŒthisæŒ‡å‘applyçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</li>
</ol>
<p>é™¤äº†thiså¤–ï¼Œå‡½æ•°åœ¨è°ƒç”¨æ˜¯é¢å¤–ä¼ å…¥çš„å¦ä¸€ä¸ªå‚æ•°æ˜¯<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments" target="_blank" rel="external">arguments</a>ã€‚å®ƒæ˜¯å‡½æ•°å†…éƒ¨çš„ä¸€ä¸ªå˜é‡ï¼ŒåŒ…å«å‡½æ•°è°ƒç”¨å¤„çš„æ‰€æœ‰å‚æ•°ï¼Œç”šè‡³åŒ…å«å‡½æ•°å®šä¹‰æ—¶æ²¡æœ‰çš„å‚æ•°ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">var sum = function () &#123;</div><div class="line">    var i, sum = 0;</div><div class="line">    for (i = 0; i &lt; arguments.length; i += 1) &#123;</div><div class="line">        sum += arguments[i];</div><div class="line">    &#125;</div><div class="line">    return sum;</div><div class="line">&#125;;</div><div class="line">sum(4, 8, 15, 16, 23, 42); // 108</div></pre></td></tr></table></figure></p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„argumentsä¸æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåªæ˜¯ä¸€ä¸ªæœ‰lengthå±æ€§çš„ç±»æ•°ç»„å¯¹è±¡(Array-like)ï¼Œå®ƒå¹¶ä¸æ‹¥æœ‰æ•°ç»„çš„å…¶ä»–æ–¹æ³•ã€‚<br>å…³äºå¯¹è±¡ï¼Œæœ€åè¯´ä¸€ä¸‹æ•°ç»„ï¼Œjavascriptä¸­çš„æ•°ç»„å’Œå¹³å¸¸ç¼–ç¨‹ä¸­çš„æ•°ç»„ä¸å¤§ä¸€æ ·ã€‚</p>
<p>###æ•°ç»„å¯¹è±¡Array<br>æ•°ç»„æ˜¯ä¸€ç§åœ¨å†…å­˜ä¸­çº¿æ€§åˆ†é…çš„æ•°æ®ç»“æ„ï¼Œé€šè¿‡ä¸‹æ ‡è®¡ç®—å‡ºå…ƒç´ åç§»é‡ï¼Œä»è€Œå–å‡ºå…ƒç´ ã€‚æ•°ç»„åº”è¯¥æ˜¯ä¸€ä¸ªå¿«é€Ÿå­˜å–çš„æ•°æ®ç»“æ„ï¼Œä½†æ˜¯åœ¨javascriptä¸­ï¼Œæ•°ç»„ä¸å…·å¤‡è¿™ç§ç‰¹æ€§ã€‚<br>æ•°ç»„åœ¨javascriptä¸­ä¸€ä¸ªå…·æœ‰ä¼ ç»Ÿæ•°ç»„ç‰¹æ€§çš„å¯¹è±¡ï¼Œè¿™ç§å¯¹è±¡èƒ½å¤ŸæŠŠæ•°ç»„ä¸‹æ ‡è½¬ä¸ºå­—ç¬¦ä¸²ï¼Œç„¶åæŠŠè¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå¯¹è±¡çš„keyï¼Œæœ€åå¯¹å–å‡ºå¯¹åº”è¯¥keyçš„valueï¼ˆè¿™åˆä¸€æ¬¡è¯´æ˜äº†å¯¹è±¡åœ¨javascriptä¸­å°±æ˜¯ä¸€ç³»åˆ—é”®å€¼å¯¹ï¼‰ã€‚</p>
<p>è™½ç„¶javascriptä¸­çš„æ•°ç»„æ²¡æœ‰ä¼ ç»Ÿè¯­è¨€ä¸­çš„æ•°ç»„é‚£ä¹ˆå¿«ï¼Œä½†æ˜¯ç”±äºjavascriptæ˜¯å¼±ç±»å‹çš„è¯­è¨€ï¼Œæ‰€ä»¥javascriptä¸­çš„æ•°ç»„å¯ä»¥å­˜æ”¾ä»»ä½•å€¼ã€‚æ­¤å¤–Arrayæœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ï¼Œå¤§å®¶å¯ä»¥å»<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="external">MDN Array</a>æŸ¥çœ‹ã€‚<br>javascriptä¹Ÿä¸ºæ•°ç»„æä¾›äº†å¾ˆæ–¹ä¾¿çš„<code>å­—é¢é‡(Array Literal)</code>å®šä¹‰æ–¹å¼ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">var arr = [1,2,3]</div></pre></td></tr></table></figure></p>
<p>é€šè¿‡æ•°ç»„å­—é¢é‡åˆ›å»ºçš„æ•°ç»„å¯¹è±¡çš„<code>__proto__</code>æŒ‡å‘Array.prototypeã€‚</p>
<p>##ç»§æ‰¿Inheritance</p>
<p>åœ¨Javaä¸­ï¼Œå¯¹è±¡æ˜¯æŸä¸ªç±»çš„å®ä¾‹ï¼Œä¸€ä¸ªç±»å¯ä»¥ä»å¦ä¸€ä¸ªç±»ä¸­ç»§æ‰¿ã€‚ä½†æ˜¯åœ¨åŸºäºåŸå‹é“¾çš„javascriptä¸­ï¼Œå¯¹è±¡å¯ä»¥ç›´æ¥ä»å¦ä¸€ä¸ªå¯¹è±¡åˆ›å»ºã€‚</p>
<p>åœ¨ä¸Šé¢è®²è§£å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬çŸ¥é“äº†åœ¨åˆ›å»ºä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œè¯¥å¯¹è±¡ä¼šè‡ªåŠ¨èµ‹äºˆä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œä½¿ç”¨å¯¹è±¡<code>å­—é¢é‡(Literal)</code>æ¥åˆ›å»ºå¯¹è±¡æ—¶ï¼Œjavascriptè§£é‡Šå™¨è‡ªåŠ¨ä¸º<code>__proto__</code>èµ‹å€¼ã€‚å½“æˆ‘ä»¬åœ¨javascriptä½¿ç”¨newæ“ä½œç¬¦åˆ›å»ºå¯¹è±¡æ—¶ï¼Œjavascriptè§£é‡Šå™¨åœ¨è°ƒç”¨æ„é€ å‡½æ•°æ—¶ï¼Œä¼šæ‰§è¡Œç±»ä¼¼äºä¸‹é¢çš„è¯­å¥<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">this.__proto__ = &#123;constructor: this&#125;;</div></pre></td></tr></table></figure></p>
<p>æ–°åˆ›å»ºçš„å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ª<code>__proto__</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§æœ‰ä¸€ä¸ª<code>constructor</code>å±æ€§ï¼Œå¹¶ä¸”è¿™ä¸ªå±æ€§æŒ‡å‘è¿™ä¸ªæ–°å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var d = new Date()</div><div class="line">d.__proto__.constructor === Date //è¿™é‡Œä¸ºtrue</div></pre></td></tr></table></figure></p>
<p>å¦‚æœnewä¸æ˜¯ä¸€ä¸ªæ“ä½œç¬¦ï¼Œè€Œæ˜¯ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œå®ƒçš„å®ç°ç±»ä¼¼äºä¸‹é¢çš„ä»£ç ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Function.prototype.new =  function () &#123;</div><div class="line">    // Create a new object that inherits from the constructor&apos;s prototype.</div><div class="line">    var that = Object.create(this.prototype);</div><div class="line">    // Invoke the constructor, binding â€“this- to the new object.</div><div class="line">    var other = this.apply(that, arguments);</div><div class="line">    // If its return value isn&apos;t an object, substitute the new object.</div><div class="line">    return (typeof other === &apos;object&apos; &amp;&amp; other) || that;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>ä¹‹å‰ä¹Ÿè¯´äº†ï¼ŒåŸºäºåŸå‹çš„ç»§æ‰¿æœºåˆ¶æ˜¯æ ¹æ®è¿è¡Œæ—¶çš„è¯­ä¹‰å†³å®šçš„ï¼Œè¿™å°±ç»™æˆ‘ä»¬æä¾›äº†å¾ˆå¤§çš„ä¾¿åˆ©ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æƒ³ä¸ºæ‰€æœ‰çš„Arrayæ·»åŠ ä¸€ä¸ªmapå‡½æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆåšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Array.prototype.map = function(f) &#123;</div><div class="line">    var newArr = [];</div><div class="line">    for(i=0; i&lt;this.length; i++) &#123;</div><div class="line">        newArr.push(f(this[i]));</div><div class="line">    &#125;</div><div class="line">    return newArr;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>å› ä¸ºæ‰€æœ‰çš„æ•°ç»„å¯¹è±¡çš„<code>__proto__</code>éƒ½æŒ‡å‘Array.prototypeå¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸ºè¿™ä¸ªå¯¹è±¡å¢åŠ æ–¹æ³•ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æ•°ç»„å¯¹è±¡å°±éƒ½æ‹¥æœ‰äº†è¿™ä¸ªæ–¹æ³•ã€‚<br>javascriptè§£é‡Šå™¨ä¼šé¡ºç€åŸå‹é“¾æŸ¥çœ‹æŸä¸ªæ–¹æ³•æˆ–å±æ€§ã€‚å¦‚æœæƒ³æŸ¥çœ‹æŸå¯¹è±¡çš„æ˜¯å¦æœ‰æŸä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨<code>Object.prototype.hasOwnProperty</code>æ–¹æ³•ã€‚</p>
<p>##æ€»ç»“</p>
<p>é€šè¿‡ä¸Šé¢å¤šæ¬¡è®²è§£ï¼Œå¸Œæœ›å¤§å®¶å¯¹<code>å¯¹è±¡åœ¨javascriptä¸­å°±æ˜¯ä¸€ç³»åˆ—çš„é”®å€¼å¯¹</code>ã€<code>åŸå‹</code>ä¸<code>å‡½æ•°</code>è¿™ä¸‰ä¸ªæ¦‚å¿µæœ‰æ›´åŠ æ·±åˆ»çš„è®¤è¯†ï¼Œä½¿ç”¨javascriptæ¥å†™å‰ç«¯ã€åç«¯ä¸è„šæœ¬ã€‚åœ¨<a href="http://conf.reactjs.com/" target="_blank" rel="external">React.js 2015å¤§ä¼š</a>ä¸Šï¼ŒFacebookå…¬å¸ƒäº†å³å°†å¼€æºçš„<a href="https://github.com/facebook/react" target="_blank" rel="external">React Native</a>ï¼Œè¿™æ„å‘³ç€ä»Šåæˆ‘ä»¬å¯ä»¥ç”¨javascriptæ¥å†™IOSã€Androidçš„åŸç”Ÿåº”ç”¨äº†ï¼Œè¿™å¯çœŸæ˜¯<code>learn-once, write-anywhere</code>ã€‚ç›¸ä¿¡éšç€ECMAScript 6çš„å‘å¸ƒï¼Œjavascriptè¿™é—¨è¯­è¨€è¿˜ä¼šæœ‰ä¸€ç³»åˆ—ç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼ŒStay Tunedã€‚:-)</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://dmitrysoshnikov.com/ecmascript/javascript-the-core/" target="_blank" rel="external">JavaScript. The core</a></li>
<li><a href="http://book.douban.com/subject/2994925/" target="_blank" rel="external">Javascript: The Good Parts</a></li>
<li>JQueryä½œè€…çš„ <a href="http://ejohn.org/blog/objectgetprototypeof/" target="_blank" rel="external">Object.getPrototypeOf</a></li>
<li>JS ä¹‹çˆ¶çš„ <a href="https://brendaneich.com/2011/06/new-javascript-engine-module-owner/" target="_blank" rel="external">New JavaScript Engine Module Owner</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å·¥ä½œä¸€ç›´åœ¨ç”¨nodejsåšå¼€å‘ï¼Œæœ‰äº†nodejsï¼Œå‰ç«¯ã€åç«¯ã€è„šæœ¬å…¨éƒ½å¯ä»¥ç”¨javascriptæå®šï¼Œå¾ˆæ˜¯æ–¹ä¾¿ã€‚ä½†æ˜¯javascriptçš„å¾ˆå¤šè¯­æ³•ï¼Œæ¯”å¦‚å¯¹è±¡ï¼Œå°±å’Œæˆ‘ä»¬å¸¸ç”¨çš„é¢å‘å¯¹è±¡(object oriented programming)çš„ç¼–ç¨‹è¯­è¨€ä¸åŒï¼›çœ‹æŸä¸ªjavas
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="mozilla" scheme="http://liujiacai.net/tags/mozilla/"/>
    
      <category term="JavaScript" scheme="http://liujiacai.net/tags/javascript/"/>
    
  </entry>
  
  <entry>
    <title>2014 å¹´ç»ˆæ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2014/12/29/review-2014/"/>
    <id>http://liujiacai.net/blog/2014/12/29/review-2014/</id>
    <published>2014-12-29T14:06:16.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸çŸ¥ä¸è§‰é—´ï¼Œåˆåˆ°ä¸€å¹´å°¾ï¼Œæƒ³æƒ³è‡ªå·±è¿™æ­£å¼å·¥ä½œä¹Ÿæœ‰å¤§åŠå¹´äº†ï¼ŒåŠ ä¸Šä¹‹å‰çš„å®ä¹ ï¼Œä¹Ÿç®—æ˜¯æœ‰ä¸€å¹´åŠå¤šâ€œå·¥ä½œç»éªŒâ€çš„äººäº†ã€‚åœ¨ä»Šå¹´çš„å…­æœˆä»½ï¼Œå¤§å­¦ä¹Ÿåˆ’ä¸Šäº†åœ†æ»¡çš„å¥å·ï¼Œè¿˜è®°å¾—å½“åˆå¤§ä¸€åˆšå»å­¦æ ¡æŠ¥é“æ—¶çš„ä¸€ä¸ªæ ‡è¯­â€”â€”â€œä»Šå¤©æˆ‘ä»¥çƒŸå¤§ä¸ºè£ï¼Œæ˜å¤©çƒŸå¤§ä»¥æˆ‘ä¸ºè£â€ï¼Œæˆ‘è‚¯å®šæ˜¯ä¸è¾¾æ ‡äº†ã€‚</p>
<p>â€œå¹´å¹´å²å²èŠ±ç›¸ä¼¼ï¼Œå²å²å¹´å¹´äººä¸åŒã€‚â€è¿™é¦–è¯—æˆ‘è®°å¾—æ¯å¹´çš„å¯’å‡ä½œä¸šä¸Šéƒ½ä¼šæœ‰å§ã€‚æƒ³æƒ³è¿™ä¸€å¹´ç»å†ï¼Œå¾ˆå¤šäº‹ï¼Œé…¸ç”œè‹¦è¾£ï¼Œåº”æœ‰å°½æœ‰ã€‚ä¸‹é¢ç®€å•æ•´ç†ä¸‹ï¼Œä¸ä»…ä»…æ˜¯ä¸ºäº†è®°ä½è¿™äº›äº‹ï¼Œæ›´é‡è¦çš„æ˜¯èƒ½å¤Ÿåœ¨è¿™äº›äº‹ä¸­å¸å–ç»éªŒï¼Œå…‹æœè‡ªèº«çš„ç¼ºç‚¹ã€‚</p>
<h2 id="å†è§ï¼ŒåŒ—äº¬ï¼ˆ2014-1ï½2014-3ï¼‰"><a href="#å†è§ï¼ŒåŒ—äº¬ï¼ˆ2014-1ï½2014-3ï¼‰" class="headerlink" title="å†è§ï¼ŒåŒ—äº¬ï¼ˆ2014.1ï½2014.3ï¼‰"></a>å†è§ï¼ŒåŒ—äº¬ï¼ˆ2014.1ï½2014.3ï¼‰</h2><p>å¹´åˆæ—¶ï¼Œæˆ‘è¿˜åœ¨æœå£³ç½‘å®ä¹ ï¼Œè¿™ä»½å®ä¹ ä»13å¹´æš‘å‡å¼€å§‹ï¼Œæˆ‘è¿˜è®°å¾—æ˜¯å’Œåˆ˜æ™“ä¸½ä¸€èµ·åç€ç«è½¦å»çš„ï¼Œå½“æ—¶è§‰å¾—å‡ºæ¥äº†å°±è¦æ··å‡ºä¸ªæ ·å­ï¼Œæ²¡æƒ³åˆ°æˆ‘å¹²äº†ä¸åˆ°ä¸€å¹´å°±å‘µå‘µäº†ã€‚åœ¨æœå£³ç½‘çš„å®ä¹ æ”¶è·ä¸»è¦æœ‰ä¸¤ç‚¹ï¼š</p>
<ol>
<li>å­¦ä¹ clojureï¼Œæ¥è§¦å‡½æ•°å¼ç¼–ç¨‹</li>
<li>å®Œæˆ<a href="https://github.com/jiacai2050/hebo" target="_blank" rel="external">heboé¡¹ç›®</a></li>
</ol>
<p>å…¶å®å½“åˆæ‰¾å·¥ä½œæƒ³æ³•æŒºç®€å•çš„ï¼Œèƒ½æœ‰ä¸ªåœ°æ–¹å®‰å¿ƒçš„å­¦ä¹ å°±å¤Ÿäº†ï¼Œæœå£³åº”è¯¥ç®—æ˜¯å®Œæˆäº†æˆ‘è¿™ä¸ªåˆè¡·ï¼Œæœå£³çš„å·¥ä½œæ°›å›´æ¯”è¾ƒæ¾ï¼ŒåŠ ç­çš„æƒ…å†µå¾ˆå°‘ï¼Œå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯å› ä¸ºæˆ‘æ˜¯å®ä¹ ç”Ÿï¼Œæ²¡æ¥è§¦ç”Ÿäº§ç¯å¢ƒã€‚æ˜¯<a href="http://cn.linkedin.com/pub/%E6%98%8E%E7%90%86-%E8%8B%91/0/1a1/153/zh-cn" target="_blank" rel="external">æ˜ç†</a>æŠŠæˆ‘æ‹›è¿›å»ï¼Œæˆ‘å½“æ—¶åœ¨æœå£³è¯æ¯”è¾ƒå°‘ï¼Œæ²¡æ€ä¹ˆå’Œæ˜ç†æ·±å…¥äº¤æµï¼Œæƒ³æƒ³ä¹ŸæŒºé—æ†¾çš„ã€‚<br>ç¦»èŒåº”è¯¥æ˜¯åœ¨3æœˆ25å·ï¼Œå½“æ—¶ç§Ÿæˆ¿å­çš„ä¸­ä»‹è·‘äº†ï¼Œæˆ¿ä¸œæ¥èµ¶æˆ‘ä»¬ï¼Œæƒ³æƒ³ä¸€èµ·ä½çš„å‡ ä¸ªäººï¼Œè¡Œè‰²åŒ†åŒ†ï¼Œåˆ°ç°åœ¨ä¹Ÿä¸çŸ¥é“äººå®¶å«ä»€ä¹ˆã€‚æ¯ä¸ªåœ¨åŒ—äº¬æ¼‚è¿‡çš„äººéƒ½åº”è¯¥çŸ¥é“ä¸€ä¸ªäººæ˜¯ä»€ä¹ˆæ»‹å‘³ã€‚<br>å½“æ—¶ä¹Ÿå»å‚åŠ è¿‡é˜¿é‡Œæ ¡æ‹›ï¼Œè¢«åˆ·ï¼ŒæŠ•ç®€å†ï¼Œè¢«åˆ·ã€‚åœ¨åŒ—äº¬è¿™ä¹ˆä¸ªåæ ¡äº‘é›†çš„åœ°æ–¹ï¼ŒçƒŸå¤§çš„ï¼Œæœ‰äº›è‡ªå‘ã€‚æ‰€ä»¥æˆ‘ç»™è‡ªå·±æ‰¾äº†ä¸ªå€Ÿå£â€”â€”æˆ‘è¦è€ƒç ”ã€‚è¾èŒåï¼Œå›å®¶çœ‹ä¹¦è€ƒç ”å»äº†ã€‚</p>
<h2 id="è€ƒç ”ä¹‹è·¯ï¼ˆ2014-4ï½2014-5ï¼‰"><a href="#è€ƒç ”ä¹‹è·¯ï¼ˆ2014-4ï½2014-5ï¼‰" class="headerlink" title="è€ƒç ”ä¹‹è·¯ï¼ˆ2014.4ï½2014.5ï¼‰"></a>è€ƒç ”ä¹‹è·¯ï¼ˆ2014.4ï½2014.5ï¼‰</h2><p>ä»åŒ—äº¬å›å®¶ï¼Œæƒ³ç€ä»å¤´å¼€å§‹ï¼Œä½†æ˜¯å¾€å¾€äº‹ä¸æ„¿è¿ã€‚åˆšå¼€å§‹è€ƒç ”çš„æ¿€æƒ…è¿˜æ¯”è¾ƒæµ“ï¼Œçœ‹ä¹¦ä»€ä¹ˆçš„ä¹Ÿè¿˜å¥½ï¼Œä½†æ˜¯æ…¢æ…¢çš„å°±å¼€å§‹çœ‹ä¸è¿›å»äº†ï¼Œè¿˜è®°å¾—å½“æ—¶ä¹°äº†é‚£æœ¬ã€ŠSICPã€‹ï¼Œæ¯å¤©å°±çœ‹å‡ é¡µï¼Œåšåšä¹ é¢˜ï¼Œä¹Ÿæ²¡æ€ä¹ˆè¿åŠ¨ï¼Œå¤©å¤©å°±æ˜¯åƒã€åƒã€ç¡ã€ç¡ï¼Œå®¶é‡Œç¯å¢ƒå¥½å‘€ï¼Œä¹Ÿæ²¡äººã€‚æµ‘æµ‘å™©å™©çš„ï¼Œå¾ˆå¿«å°±åˆ°äº†è¦å›å­¦æ ¡åšæ¯•ä¸šè®¾è®¡çš„æ—¶é—´äº†ã€‚å›å­¦æ ¡åå°±æ–­äº†è€ƒç ”çš„æƒ³æ³•ã€‚</p>
<p>å…¶å®å°±åƒæ¯ä¸ªæ¯•ä¸šç”Ÿéƒ½ä¼šç»å†çš„é‚£æ ·ï¼Œå°±ä¸šä¸è€ƒç ”åœ¨é‚£æ®µæ—¶é—´ä¹Ÿä¸€ç›´å›°æ‰°ç€æˆ‘ï¼Œä¸€ç›´åˆ°ä»Šå¤©ï¼ˆ2015-1-10ï¼‰å›å¤´å†çœ‹çœ‹ï¼Œä¹Ÿä¸çŸ¥é“è¿™æ¡è·¯é€‰çš„æ˜¯å¦æ­£ç¡®ã€‚</p>
<h2 id="æ¯•ä¸šè®¾è®¡ï¼ˆ2014-5ï½2014-6ï¼‰"><a href="#æ¯•ä¸šè®¾è®¡ï¼ˆ2014-5ï½2014-6ï¼‰" class="headerlink" title="æ¯•ä¸šè®¾è®¡ï¼ˆ2014.5ï½2014.6ï¼‰"></a>æ¯•ä¸šè®¾è®¡ï¼ˆ2014.5ï½2014.6ï¼‰</h2><p>ä»å®¶é‡Œå›åˆ°å­¦æ ¡åšæ¯•ä¸šè®¾è®¡åº”è¯¥æ˜¯åœ¨5æœˆ11å·å·¦å³ã€‚ä»å¤§ä¸‰æš‘å‡å°±å¼€å§‹å‡ºæ¥å®ä¹ ï¼Œåˆ°è¿™æ¬¡é‡æ–°å›æ¥ï¼Œç®—ç®—ä¹Ÿæ˜¯æœ‰åŠå¹´çš„æ—¶é—´äº†ï¼Œé‡æ–°å›åˆ°å­¦æ ¡ï¼Œæ„Ÿè§‰ä¸€åˆ‡æ˜¯é‚£ä¹ˆç†Ÿæ‚‰åˆé‚£ä¹ˆé™Œç”Ÿï¼Œç†Ÿæ‚‰çš„æ˜¯ç›¸åŒçš„æ•™å­¦æ¥¼ï¼Œé™Œç”Ÿçš„æ˜¯ä¸åŒçš„å¿ƒæƒ…ï¼Œä»¿ä½›æˆ‘å·²ç»ä¸å±äºè¿™ä¸ªåœ°æ–¹äº†ã€‚æ¯•ä¸šè®¾è®¡æ˜¯ç”¨çš„æˆ‘åœ¨æœå£³åšçš„heboé¡¹ç›®ï¼Œé‰´äºå‰æœŸä»£ç åŸºæœ¬å·²ç»å®Œæˆäº†ï¼Œè¿™æ¬¡å›å­¦æ ¡ä¸»è¦æ˜¯æ–‡æ¡£çš„ç¼–å†™ï¼Œå¯¼å¸ˆæˆ‘æ‰¾çš„æ˜¯å¼ è€å¸ˆï¼Œåˆä½œæŒºæ„‰å¿«çš„ï¼Œç»è¿‡å‡ æ¬¡ä¿®æ”¹åï¼Œæœ€åæˆ‘çš„è®ºæ–‡è¢«è¯„ä¸ºäº†ä¼˜ç§€ï¼Œä½œä¸ºå¥–åŠ±ï¼Œå‘äº†Â¥500RMBã€‚</p>
<p>æˆ‘åœ¨æ‰€æœ‰å®ä¹ çš„åŒå­¦ä¸­å›æ¥çš„ç®—æ˜¯æ—©çš„ï¼Œéšç€å¤§å®¶é™†é™†ç»­ç»­çš„å›æ¥ï¼Œç›¸äº’å¯’ç¢œå‡ å¥ï¼Œé—®é—®éƒ½æ‰¾äº†ä»€ä¹ˆæ ·çš„å…¬å¸ï¼Œå¾…é‡å¤šå°‘ï¼Œåˆšå¼€å§‹ä¹Ÿæƒ³ç€åœ¨å­¦æ ¡æ‰¾ä¸ªè‡ªä¹ å®¤ä»€ä¹ˆçš„ä¸Šä¸ªè‡ªä¹ è€ƒç ”çš„æ¥ï¼Œä½†æ˜¯è¿˜æ˜¯è§‰å¾—è‡ªå·±å¤ªæµ®èºäº†ï¼Œç°åœ¨åœ¨çœ‹ä¹¦ï¼Œæ ¹æœ¬é™ä¸ä¸‹å¿ƒæ¥äº†ï¼Œè¿™æœŸé—´ä¹ŸæŠ•äº†å‡ ä¸ªç®€å†ï¼Œå½“æ—¶åº”è¯¥æ˜¯æŠ•äº†è˜‘è‡è¡—ï¼Œè¿˜å› æ­¤å»äº†è¶Ÿæ­å·ï¼Œä¸è¿‡è¿˜æ˜¯è´¥ä¸‹é˜µäº†ï¼Œå½“æ—¶è®©æˆ‘å†™ä¸€ä¸ªç®—æ³•ï¼Œåº”è¯¥æ˜¯<a href="http://blog.csdn.net/v_july_v/article/details/6444021" target="_blank" rel="external">æ±‚è¿ç»­å­æ•°ç»„çš„æœ€å¤§å’Œ</a>ï¼Œæˆ‘å½“æ—¶å¤§æ¦‚ç”¨äº†åŠä¸ªå°æ—¶æ‰æŠŠè¿™ä¸ªç®—æ³•å†™å‡ºæ¥å§ï¼Œé¢è¯•å®˜å°è±¡æ˜¯ä¸ªå¾ˆâ€œçŸ­å°ç²¾æ¹›â€çš„å°ä¼™å­ï¼Œä¸ªå­ä¸é«˜ï¼Œç˜¦ç˜¦çš„ï¼Œä½†æ˜¯é€šè¿‡äº¤æµå°±çŸ¥é“æ˜¯ä¸ªç®—æ³•ç‹‚äººï¼Œä»–ä¹Ÿç»™æˆ‘æŒ‡å‡ºäº†æˆ‘çš„â€œç¡¬ä¼¤â€ï¼ŒåŸºæœ¬åŠŸä¸è¡Œï¼Œæˆ‘ç®€å†ä¸Šå†™äº†ä¼šluceneã€hadoopï¼ŒçŒ›åœ°ä¸€çœ‹å¾ˆå”¬äººï¼Œå…¶å®è‡ªå·±å°±æ˜¯è°ƒç”¨APIçº§åˆ«çš„èœé¸Ÿï¼Œå†…éƒ¨åŸç†ä¸ç”šäº†è§£ï¼Œä»¥å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡<a href="/blog/2014/05/19/go-into-java-world/">æ–‡ç« </a>æ€»ç»“ï¼Œäº‹è¿‡åŠå¹´äº†ï¼Œè²Œä¼¼è¿˜æ˜¯èœé¸Ÿã€‚</p>
<h2 id="æ­å·æ‰¾å·¥ä½œï¼ˆ2014-6ï½2014-7ï¼‰"><a href="#æ­å·æ‰¾å·¥ä½œï¼ˆ2014-6ï½2014-7ï¼‰" class="headerlink" title="æ­å·æ‰¾å·¥ä½œï¼ˆ2014.6ï½2014.7ï¼‰"></a>æ­å·æ‰¾å·¥ä½œï¼ˆ2014.6ï½2014.7ï¼‰</h2><p>åœ¨å­¦æ ¡æ˜¨æ™šæ¯•ä¸šè®¾è®¡ç­”è¾©åï¼Œå°±è§‰å¾—åº”è¯¥å»æ­å·ï¼Œé˜¿é‡Œå·´å·´å¯¹äºåƒæˆ‘è¿™æ ·çš„åº”å±Šç”Ÿè¿˜æ˜¯æœ‰è«å¤§çš„å¸å¼•åŠ›çš„ã€‚ä»ä¸Šæ¬¡é¢è¯•è˜‘è‡è¡—ï¼Œè¿™æ¬¡ç®—æ˜¯ç¬¬äºŒæ¬¡æ¥äº†ï¼Œè¿™æ¬¡æˆ‘ä¸»è¦æ˜¯åœ¨å†…æ¨ç½‘ä¸ŠæŠ•çš„ç®€å†ï¼Œæ¥ä¹‹å‰æŠ•äº†çš„åˆæ‹äº‘ï¼Œè¿™æ¬¡æ¥ä¸»è¦æ˜¯å…ˆæ˜¯é¢è¯•å®ƒï¼Œç°åœ¨è¿˜è®°å¾—ï¼Œå½“æ—¶æˆ‘åº”è¯¥æ˜¯ç§Ÿçš„æ–‡ä¸€è·¯çš„å¸ƒä¸æ—…é¦†ï¼Œåˆæ‹äº‘é¢è¯•å¾ˆé¡ºåˆ©ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸‹æ¥æ²¡é—®ä»€ä¹ˆå…·ä½“çš„æŠ€æœ¯ï¼Œå°±æ˜¯æ³›æ³›è°ˆè°ˆï¼Œä¹‹åå°±è®©å›å»ç­‰é€šçŸ¥äº†ï¼Œæˆ‘è¿˜è®°å¾—å½“æ—¶é¢è¯•å‡ºæ¥åï¼Œæˆ‘å°±ç»™å­¦å¤æ‰“äº†ä¸ªç”µè¯ï¼Œè¯´åº”è¯¥é—®é¢˜ä¸å¤§äº†ï¼Œåˆäº†è¿™ä¸ªä¿åº•çš„ï¼Œå°±æ²¡ä»€ä¹ˆç‰¹åˆ«æ‹…å¿ƒçš„äº†ï¼Œä½†æ˜¯åˆæ‹äº‘ä¸€ç›´æ²¡ç»™æˆ‘æœ€ç»ˆç»“æœï¼Œå¯¼è‡´æ—¶é—´è¶Šé•¿ï¼Œå°±è¶Šæ‹…å¿ƒï¼Œæ”¶åˆ°offeråº”è¯¥æ˜¯åœ¨ä¸€ä¸ªæ˜ŸæœŸåäº†ï¼Œæœ€åç»™æˆ‘å·¥èµ„å’Œæˆ‘é¢„æœŸå·®è·è¾ƒå¤§ï¼Œå‡ ç»çº ç»“åï¼Œè¿˜æ˜¯å†³å®šåœ¨æ‰¾æ‰¾çœ‹ï¼Œå½“æ—¶åœ¨å†…æ¨çœ‹åˆ°ucloudçš„æ‹›è˜ï¼ŒæŠ•é€’ç®€å†åï¼Œå…ˆæ˜¯è®©ä»–ä»¬é‚£è¾¹å®‰æ’äº†æ¬¡ç”µè¯é¢è¯•ï¼Œæˆ‘è¿˜è®°å¾—å½“æ—¶ç¬¬ä¸€æ¬¡çº¦çš„æ—¶é—´ä»–ä»¬é‚£è¾¹æ²¡ç»™æˆ‘æ‰“ï¼Œå¾—çŸ¥åˆæ‹äº‘çš„è–ªèµ„åï¼Œæˆ‘åˆå°è¯•ä¸»åŠ¨è”ç³»ä»–ä»¬ï¼Œç®€å•ç”µè¯èŠè¿‡ä¹‹åï¼Œè®©æˆ‘å»ä»–ä»¬å…¬å¸è¯•è¯•ï¼Œä¹‹åå°±æ˜¯æ¥ä¸Šæµ·é¢ï¼Œé‚£å¤©ä¸€æ—©ä»æ­å·å‡ºå‘ï¼Œå…¬äº¤åˆ°æ­å·åŸç«™ï¼ŒåŠ¨è½¦åˆ°æµ¦ä¸œç«™ï¼Œåœ°é“åˆ°ucloudï¼Œé¢è¯•ä¸€ä¸‹åˆï¼Œä¹‹ååŸè·¯çº¿è¿”å›ï¼Œå›åˆ°æ­å·å·²ç»æ™šä¸Š11ç‚¹äº†ã€‚</p>
<p>åˆ°å½“å‰å†™ä½œæ—¶é—´ï¼ˆ2015-1-10ï¼‰ï¼Œå·²ç»è¿‡å»å¤§åŠå¹´äº†ï¼Œä¸€ç›´åœ¨ucloudã€‚</p>
<p>##ucloudï¼ˆ2014.7ï½2014.12ï¼‰</p>
<p>ç¡®å®šåœ¨ä¸Šæµ·å·¥ä½œåï¼Œå°±å¼€å§‹ç§Ÿæˆ¿ï¼Œä¸Šæµ·ç§Ÿæˆ¿æ¯”åŒ—äº¬å¥½äº›ï¼Œé»‘ä¸­ä»‹å°‘äº›ã€‚</p>
<p>åˆ°ç°åœ¨ï¼Œå›æƒ³è¿™åŠå¹´çš„å·¥ä½œï¼Œæ­£å¥½å‰å‡ å¤©å…¬å¸çš„KPIè‡ªè¯„ï¼Œå‘ç°è‡ªå·±è¿˜æ˜¯ä¸è¡Œï¼Œä¸€ç›´æ²¡æ‰¾åˆ°æ„Ÿè§‰ï¼Œè¿˜æ˜¯æµ®èºï¼Œæ²¡æ‰¾åˆ°ç‚¹ä¸Šã€‚æ„Ÿè§‰å·¥ä½œå†…å®¹ä¹Ÿä¸€ç›´åœ¨å˜ï¼Œä»€ä¹ˆæ„Ÿè§‰è¯´ä¸å‡ºæ¥ï¼Œå°±æ˜¯æ²¡æ‰¾åˆ°å…´å¥‹ç‚¹ä¸Šã€‚éƒ¨é—¨é¢†å¯¼ä¹Ÿçœ‹å‡ºæ¥äº†ï¼Œä¸»åŠ¨å’Œæˆ‘äº¤æµï¼ŒæŒ‡å‡ºæˆ‘æœ‰å¦‚ä¸‹ä¸¤ä¸ªç¼ºç‚¹ï¼š</p>
<ol>
<li>ç©ºæƒ³ï¼Œæ²¡æœ‰å®é™…è¡ŒåŠ¨</li>
<li>è´£ä»»å¿ƒä¸å¼º</li>
</ol>
<p>è¿™ä¸¤ç‚¹å¾ˆå¥½ç†è§£ï¼Œç¬¬ä¸€ç‚¹ï¼Œæ¯ä¸ªäººéƒ½æƒ³æˆåŠŸï¼Œä½†æ˜¯æ€ä¹ˆåšå‘¢ï¼Œå…·ä½“åˆ°è¿™ä¸ªæœˆéœ€è¦è¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Œè¿™å‘¨éœ€è¦å®Œæˆä»€ä¹ˆå‘¢ï¼Œæ²¡æƒ³è¿‡ã€‚ç¬¬äºŒç‚¹ï¼Œè‡ªå·±åªé¡¾è‡ªå·±çš„ä¸€äº©ä¸‰åˆ†åœ°äº†ï¼Œä¸å»ç®¡åº”è¯¥ç”±ç”¨æˆ·æŠ›å‡ºæ¥çš„é—®é¢˜ï¼Œè§‰å¾—åˆ«äººå¯ä»¥è§£å†³æˆ–è€…è¿™å—ä¸å±äºæˆ‘ç®¡ï¼Œæˆ‘ä¸ç”¨å…³å¿ƒã€‚</p>
<p>é€šè¿‡è¿™æ¬¡KPIè‡ªè¯„ï¼Œè¿˜æ˜¯æ‰¾åˆ°ä¸€äº›éœ€è¦è§£å†³çš„é—®é¢˜ï¼Œä¸‹é¢åŠå¹´äº‰å–æœ‰ä¸ªè´¨çš„çªç ´ã€‚</p>
<h2 id="2015-ä½ å¥½"><a href="#2015-ä½ å¥½" class="headerlink" title="2015 ä½ å¥½"></a>2015 ä½ å¥½</h2><p>ä¸Šé¢ç®€å•æ¢³ç†äº†ä¸‹2014å¹´å‘ç”Ÿçš„äº‹æƒ…ï¼Œä¸‹é¢ç½—åˆ—ä¸€ä¸‹åœ¨2015å¹´éœ€è¦å¹²çš„äº‹æƒ…ã€‚</p>
<ol>
<li>å·¥ä½œæ€åº¦è¦ç«¯æ­£ï¼ŒKPIæ—¶æŒ‡å‡ºçš„ç¼ºç‚¹è¦å…‹æœï¼Œå·¥ä½œç”¨å¿ƒï¼Œå¤šæ€è€ƒï¼Œå¤šå®è·µï¼›ä½œä¸ºè¡¡é‡æŒ‡æ ‡ï¼Œæ¯å‘¨çš„å‘¨æŠ¥ä¸€å®šè¦æœ‰å¹²è´§ï¼Œæ¯ä¸ªæœˆè‡ªå·±åœ¨è¿›è¡Œä¸€æ¬¡æ€»ç»“ã€‚</li>
<li>çœ‹ä¹¦<blockquote>
<p>è¿™æ˜¯ä¸ªå¾ˆå®¹æ˜“æ‹–å»¶çš„è¯é¢˜ï¼Œæ¯•ç«Ÿç°åœ¨çœ‹ä¹¦å¤ªâ€œéš¾â€äº†ã€‚ä½†è¿˜æ˜¯è¦ç½—åˆ—ä¸‹15å¹´å¿…é¡»çœ‹å®Œçš„ä¹¦äº†ã€‚</p>
</blockquote>
</li>
</ol>
<ul>
<li><a href="http://book.douban.com/subject/1148282/" target="_blank" rel="external">SICP</a></li>
<li><a href="http://book.douban.com/subject/1885170/" target="_blank" rel="external">ç®—æ³•å¯¼è®º</a></li>
<li><a href="http://book.douban.com/subject/1291204/" target="_blank" rel="external">å“¥å¾·å°”ã€è‰¾èˆå°”ã€å·´èµ«</a></li>
</ul>
<p>è¿™ä¸‰æœ¬ä¹¦å®ä½“ç‰ˆéƒ½å·²ç»ä¹°æ¥äº†ï¼Œä¸ç®¡å·¥ä½œå¤šé‡ï¼Œä¹Ÿè¦æŠ½ä¸šä½™æ—¶é—´çœ‹å®Œã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸çŸ¥ä¸è§‰é—´ï¼Œåˆåˆ°ä¸€å¹´å°¾ï¼Œæƒ³æƒ³è‡ªå·±è¿™æ­£å¼å·¥ä½œä¹Ÿæœ‰å¤§åŠå¹´äº†ï¼ŒåŠ ä¸Šä¹‹å‰çš„å®ä¹ ï¼Œä¹Ÿç®—æ˜¯æœ‰ä¸€å¹´åŠå¤šâ€œå·¥ä½œç»éªŒâ€çš„äººäº†ã€‚åœ¨ä»Šå¹´çš„å…­æœˆä»½ï¼Œå¤§å­¦ä¹Ÿåˆ’ä¸Šäº†åœ†æ»¡çš„å¥å·ï¼Œè¿˜è®°å¾—å½“åˆå¤§ä¸€åˆšå»å­¦æ ¡æŠ¥é“æ—¶çš„ä¸€ä¸ªæ ‡è¯­â€”â€”â€œä»Šå¤©æˆ‘ä»¥çƒŸå¤§ä¸ºè£ï¼Œæ˜å¤©çƒŸå¤§ä»¥æˆ‘ä¸ºè£â€ï¼Œæˆ‘è‚¯å®šæ˜¯ä¸è¾¾æ ‡äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€œå¹´å¹´å²å²
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>æ­£åˆ™è¡¨è¾¾å¼â€œæ´¾åˆ«â€ç®€è¿°</title>
    <link href="http://liujiacai.net/blog/2014/12/07/regexp-favors/"/>
    <id>http://liujiacai.net/blog/2014/12/07/regexp-favors/</id>
    <published>2014-12-07T11:07:48.000Z</published>
    <updated>2017-07-08T12:33:09.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡å¤§å®¶å¯¹äºæ­£åˆ™è¡¨è¾¾å¼éƒ½ä¸é™Œç”Ÿï¼Œåœ¨æ–‡æœ¬å¤„ç†ä¸­æˆ–å¤šæˆ–å°‘çš„éƒ½ä¼šä½¿ç”¨åˆ°å®ƒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨linuxä¸‹çš„æ–‡æœ¬å¤„ç†å·¥å…·å¦‚awkã€sedç­‰æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è²Œä¼¼è¿˜ä¸ä¸€æ ·ï¼Œåœ¨awkä¸­èƒ½æ­£å¸¸å·¥ä½œçš„æ­£åˆ™ï¼Œåœ¨sedä¸­æ€»æ˜¯ä¸èµ·ä½œç”¨ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>è¿™ä¸ªé—®é¢˜äº§ç”Ÿçš„ç¼˜ç”±æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼ä¸æ–­æ¼”å˜çš„ç»“æœï¼Œä¸ºäº†å¼„æ¸…æ¥šè¿™äº›å·¥å…·ä½¿ç”¨çš„æ­£åˆ™è¯­æ³•çš„ä¸åŒï¼Œæˆ‘ä»¬æœ‰å¿…è¦å»ç®€å•äº†è§£ä¸‹æ­£åˆ™çš„æ¼”å˜è¿‡ç¨‹ï¼Œåšåˆ°çŸ¥å·±çŸ¥å½¼ã€‚å½“ç„¶è¿™ä¸ªè¿‡ç¨‹æœ¬èº«ä¹Ÿæ˜¯å¾ˆç²¾å½©çš„ï¼Œæˆ‘è¿™é‡ŒæŠ›ç –å¼•ç‰ï¼Œå¸Œæœ›å¯¹å¤§å®¶æ­£ç¡®ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æœ‰æ‰€å¸®åŠ©ã€‚</p>
<h2 id="è¯ç”ŸæœŸ"><a href="#è¯ç”ŸæœŸ" class="headerlink" title="è¯ç”ŸæœŸ"></a>è¯ç”ŸæœŸ</h2><p>æ­£åˆ™è¡¨ç¤ºå¼è¿™ä¸€æ¦‚å¿µæœ€æ—©å¯ä»¥è¿½æº¯åˆ°20ä¸–çºª40å¹´ä»£çš„ä¸¤ä¸ªç¥ç»ç‰©ç†å­¦å®¶Warren McCullochä¸Walter Pittsï¼Œä»–ä»¬å°†ç¥ç»ç³»ç»Ÿä¸­çš„ç¥ç»å…ƒæè¿°æˆå°è€Œç®€å•çš„è‡ªåŠ¨æ§åˆ¶å…ƒï¼›ç´§æ¥ç€ï¼Œåœ¨50å¹´ä»£ï¼Œæ•°å­¦å®¶1950å¹´ä»£ï¼Œæ•°å­¦å®¶<a href="http://en.wikipedia.org/wiki/Stephen_Cole_Kleene" target="_blank" rel="external">Stephen Kleene</a>åˆ©ç”¨ç§°ä¹‹ä¸ºâ€œæ­£åˆ™é›†åˆâ€çš„æ•°å­¦ç¬¦å·æ¥æè¿°æ­¤æ¨¡å‹ï¼Œå¹¶ä¸”å»ºè®®ä½¿ç”¨ä¸€ä¸ªç®€å•çš„æ¦‚å¿µæ¥è¡¨ç¤ºï¼Œäºæ˜¯regular expressionså°±æ­£å¼ç™»ä¸Šå†å²èˆå°äº†ã€‚æ’æ’­ä¸€ä¸‹ï¼Œè¿™ä¸ªKleeneå¯ä¸æ˜¯å‡¡äººï¼Œå¤§å®¶éƒ½çŸ¥é“å›¾çµæ˜¯ç°ä»£äººå·¥æ™ºèƒ½ä¹‹çˆ¶ï¼Œé‚£å›¾çµçš„åšå¯¼æ˜¯<a href="http://en.wikipedia.org/wiki/Alonzo_Church" target="_blank" rel="external">Alonzo Church</a>ï¼Œæå‡ºäº†lambdaè¡¨è¾¾å¼ï¼Œè€ŒChurchçš„è€å¸ˆï¼Œå°±æ˜¯Kleeneäº†ã€‚å…³äºlambdaï¼Œä¹‹å‰ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« ï¼Œå¤§å®¶å¯ä»¥å‚è€ƒ<a href="/blog/2014/10/12/lambda-calculus-introduction/">ç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculus</a>ã€‚</p>
<p>åœ¨æ¥ä¸‹æ¥çš„æ—¶é—´é‡Œï¼Œä¸€ç›´åˆ°60å¹´ä»£çš„è¿™äºŒåå¹´é‡Œï¼Œæ­£åˆ™è¡¨ç¤ºå¼åœ¨<a href="http://en.wikipedia.org/wiki/Pure_mathematics" target="_blank" rel="external">ç†è®ºæ•°å­¦é¢†ç•¥</a>å¾—åˆ°äº†é•¿è¶³çš„å‘å±•ï¼Œ<a href="http://www.cs.cornell.edu/home/rc/" target="_blank" rel="external">Robert Constable</a>ä¸ºæ•°å­¦å‘çƒ§å‹ä»¬å†™äº†ä¸€ç¯‡æ€»ç»“æ€§æ–‡ç« <a href="http://www.sciencedirect.com/science/article/pii/S0049237X08712539" target="_blank" rel="external">The Role of Finite Automata in the Development of Modern Computing Theory</a>ï¼Œç”±äºç‰ˆæƒé—®é¢˜ï¼Œæˆ‘åœ¨ç½‘ä¸Šæ²¡æ‰¾åˆ°è¿™ç¯‡æ–‡ç« ï¼Œå¤§å®¶æœ‰å…´è¶£çš„å¯ä»¥å‚è€ƒ<a href="http://cs.stanford.edu/people/eroberts/courses/soco/projects/2004-05/automata-theory/basics.html" target="_blank" rel="external">Basics of Automata Theory</a>ã€‚</p>
<p>Ken Thompsonå¤§ç‰›åœ¨1968å¹´å‘è¡¨äº†<a href="http://www.fing.edu.uy/inco/cursos/intropln/material/p419-thompson.pdf" target="_blank" rel="external">Regular Expression Search Algorithm</a>è®ºæ–‡ï¼Œç´§æ¥ç€Thompsonæ ¹æ®è¿™ç¯‡è®ºæ–‡çš„ç®—æ³•å®ç°äº†<a href="http://en.wikipedia.org/wiki/QED_%28text_editor%29" target="_blank" rel="external">qed</a>ï¼Œqedæ˜¯unixä¸Šç¼–è¾‘å™¨edçš„å‰èº«ã€‚edæ‰€æ”¯æŒçš„æ­£åˆ™è¡¨ç¤ºå¼å¹¶ä¸æ¯”qedçš„é«˜çº§ï¼Œä½†æ˜¯edæ˜¯ç¬¬ä¸€ä¸ªåœ¨éæŠ€æœ¯åœˆå¹¿æ³›ä¼ æ’­çš„å·¥å…·ï¼Œedæœ‰ä¸€ä¸ªå‘½ä»¤å¯ä»¥å±•ç¤ºæ–‡æœ¬ä¸­ç¬¦åˆç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„è¡Œï¼Œè¿™ä¸ªå‘½ä»¤æ˜¯<code>g/Regular Expression/p</code>ï¼Œåœ¨è‹±æ–‡ä¸­è¯»ä½œâ€œGlobal Regular Expression Printâ€ï¼Œç”±äºè¿™ä¸ªå‘½ä»¤éå¸¸å®ç”¨ï¼Œæ‰€ä»¥åæ¥æœ‰äº†grepã€egrepè¿™ä¸¤ä¸ªå‘½ä»¤ã€‚</p>
<h2 id="æˆé•¿æœŸ"><a href="#æˆé•¿æœŸ" class="headerlink" title="æˆé•¿æœŸ"></a>æˆé•¿æœŸ</h2><p>ç›¸æ¯”egrepï¼Œgrepåªæ”¯æŒå¾ˆå°‘çš„å…ƒç¬¦å·ï¼Œ<code>ï¼Š</code>æ˜¯æ”¯æŒçš„ï¼ˆä½†ä¸èƒ½ç”¨äºåˆ†ç»„ä¸­ï¼‰ï¼Œä½†æ˜¯<code>+</code>ã€<code>|</code>ä¸<code>?</code>æ˜¯ä¸æ”¯æŒçš„ï¼›è€Œä¸”ï¼Œåˆ†ç»„æ—¶éœ€è¦åŠ ä¸Šåæ–œçº¿è½¬ä¹‰ï¼Œåƒ<code>\( ...\)</code>è¿™æ ·æ‰è¡Œï¼Œç”±äºgrepçš„ç¼ºé™·æ€§æ—¥æ¸æ˜æ˜¾ï¼ŒAT&amp;Tçš„<a href="http://en.wikipedia.org/wiki/Alfred_Aho" target="_blank" rel="external">Alfred Aho</a>å®åœ¨å—ä¸äº†äº†ï¼Œäºæ˜¯egrepè¯ç”Ÿäº†ï¼Œè¿™é‡Œçš„eè¡¨ç¤ºextendedï¼ŒåŠ å¼ºç‰ˆçš„æ„æ€ï¼Œæ”¯æŒäº†<code>+</code>ã€<code>|</code>ä¸<code>?</code>è¿™ä¸‰ä¸ªå…ƒç¬¦å·ï¼Œå¹¶ä¸”å¯ä»¥åœ¨åˆ†ç»„ä¸­ä½¿ç”¨<code>*</code>ï¼Œåˆ†ç»„å¯ä»¥ç›´æ¥å†™æˆ<code>(...)</code>ï¼ŒåŒæ—¶ç”¨<code>\1,\2...</code>æ¥å¼•ç”¨åˆ†ç»„ã€‚</p>
<p>åœ¨grepã€egrepå‘å±•çš„åŒæ—¶ï¼Œawkã€lexã€sedç­‰ç¨‹åºä¹Ÿå¼€å§‹å‘å±•èµ·æ¥ï¼Œè€Œä¸”æ¯ä¸ªç¨‹åºæ‰€æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼éƒ½æˆ–å¤šæˆ–å°‘çš„å’Œå…¶ä»–çš„ä¸ä¸€æ ·ï¼Œè¿™åº”è¯¥ç®—æ˜¯æ­£åˆ™è¡¨è¾¾å¼å‘å±•çš„æ··ä¹±æœŸï¼Œå› ä¸ºè¿™äº›ç¨‹åºåœ¨ä¸æ–­çš„å‘å±•è¿‡ç¨‹ä¸­ï¼Œæœ‰æ—¶æ–°å¢åŠ çš„åŠŸèƒ½å› ä¸ºbugåŸå› ï¼Œåœ¨åæœŸçš„ç‰ˆæœ¬ä¸­å–æ¶ˆäº†è¯¥åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œå¦‚æœè®©grepæ”¯æŒå…ƒç¬¦å·<code>+</code>çš„è¯ï¼Œé‚£ä¹ˆgrepå°±ä¸èƒ½è¡¨ç¤ºå­—ç¬¦<code>+</code>äº†ï¼Œè€Œä¸”grepçš„è€ç”¨æˆ·ä¼šå¯¹è¿™å¾ˆåæ„Ÿã€‚</p>
<h2 id="æˆç†ŸæœŸ"><a href="#æˆç†ŸæœŸ" class="headerlink" title="æˆç†ŸæœŸ"></a>æˆç†ŸæœŸ</h2><p>è¿™ç§æ··ä¹±åº¦æƒ…å†µä¸€ç›´æŒç»­åˆ°äº†1986å¹´ã€‚åœ¨1986å¹´ï¼ŒPOSIXï¼ˆPortable Operating System Interfaceï¼‰æ ‡å‡†å…¬è¯¸äºä¸–ï¼ŒPOSIXåˆ¶å®šäº†ä¸åŒçš„æ“ä½œç³»ç»Ÿéƒ½éœ€è¦éµå®ˆçš„ä¸€å¥—è§„åˆ™ï¼Œå½“ç„¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä¹ŸåŒ…æ‹¬å…¶ä¸­ã€‚</p>
<p>å½“ç„¶ï¼Œé™¤äº†POSIXæ ‡å‡†å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªPerlåˆ†æ”¯ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨ç†ŸçŸ¥çš„PCREï¼Œéšç€Perlè¯­è¨€çš„å‘å±•ï¼ŒPerlè¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŠŸèƒ½è¶Šæ¥è¶Šå¼ºæ‚ï¼Œä¸ºäº†æŠŠPerlè¯­è¨€ä¸­æ­£åˆ™çš„åŠŸèƒ½ç§»æ¤åˆ°å…¶ä»–è¯­è¨€ä¸­ï¼ŒPCREå°±è¯ç”Ÿäº†ã€‚ç°åœ¨çš„ç¼–ç¨‹è¯­è¨€ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¤§éƒ¨åˆ†éƒ½å±äºPCREè¿™ä¸ªåˆ†æ”¯ã€‚</p>
<p>ä¸‹é¢åˆ†åˆ«æ‰€è¯´è¿™ä¸¤ä¸ªåˆ†æ”¯ã€‚</p>
<h3 id="POSIXæ ‡å‡†"><a href="#POSIXæ ‡å‡†" class="headerlink" title="POSIXæ ‡å‡†"></a>POSIXæ ‡å‡†</h3><p>POSIXæŠŠæ­£åˆ™è¡¨è¾¾å¼åˆ†ä¸ºä¸¤ç§ï¼ˆfavorï¼‰ï¼šBREï¼ˆBasic Regular Expressionsï¼‰ä¸EREï¼ˆExtended Regular Expressions ï¼‰ã€‚æ‰€æœ‰çš„POSIXç¨‹åºå¯ä»¥é€‰æ‹©æ”¯æŒå…¶ä¸­çš„ä¸€ç§ã€‚å…·ä½“è§„èŒƒå¦‚ä¸‹è¡¨ï¼š<br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2uVx6bpXXXXaDXpXXXXXXXXXX_!!581166664.png" alt=" posix-regexp-favor"></p>
<p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œæœ‰ä¸‰ä¸ªç©ºç™½æ ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯å°±æ„å‘³è¿™æ— æ³•ä½¿ç”¨è¯¥åŠŸèƒ½äº†å‘¢ï¼Ÿç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨ä½¿ç”¨çš„linuxå‘è¡Œç‰ˆï¼Œéƒ½æ˜¯é›†æˆGNUå¥—ä»¶çš„ï¼ŒGNUæ˜¯Gnuâ€™s Not Unixçš„ç¼©å†™ï¼ŒGNUåœ¨å®ç°äº†POXISæ ‡å‡†çš„åŒæ—¶ï¼Œåšäº†ä¸€å®šçš„æ‰©å±•ï¼Œæ‰€ä»¥ä¸Šé¢ç©ºç™½æ ä¸­çš„åŠŸèƒ½ä¹Ÿèƒ½ä½¿ç”¨ã€‚ä¸‹é¢ä¸€ä¸€è®²è§£ï¼š</p>
<ol>
<li>BREå¦‚ä½•ä½¿ç”¨<code>+</code>ã€<code>?</code>å‘¢ï¼Ÿéœ€è¦ç”¨<code>\+</code>ã€<code>\?</code></li>
<li>BREå¦‚ä½•ä½¿ç”¨<code>|</code>å‘¢ï¼Ÿéœ€è¦ç”¨<code>\|</code></li>
<li>EREå¦‚ä½•ä½¿ç”¨<code>\1</code>ã€<code>\2</code>â€¦<code>\9</code>è¿™æ ·çš„åå¼•ç”¨ï¼Ÿå’ŒBREä¸€æ ·ï¼Œå°±æ˜¯<code>\1</code>ã€<code>\2</code>â€¦<code>\9</code></li>
</ol>
<p>é€šè¿‡ä¸Šé¢æ€»ç»“ï¼Œå¯ä»¥å‘ç°ï¼šGNUä¸­çš„EREä¸BREçš„åŠŸèƒ½ç›¸åŒï¼Œåªæ˜¯è¯­æ³•ä¸åŒï¼ˆBREéœ€è¦ç”¨<code>\</code>è¿›è¡Œè½¬ä¹‰ï¼Œæ‰èƒ½è¡¨ç¤ºç‰¹æ®Šå«ä¹‰ï¼‰ã€‚ä¾‹å¦‚<code>a{1,2}</code>ï¼Œåœ¨EREè¡¨ç¤ºçš„æ˜¯<code>a</code>æˆ–<code>aa</code>ï¼Œåœ¨BREä¸­è¡¨ç¤ºçš„æ˜¯<code>a{1,2}</code>è¿™ä¸ªå­—ç¬¦ä¸²ã€‚ä¸ºäº†èƒ½å¤Ÿåœ¨Linuxä¸‹ç†Ÿç»ƒä½¿ç”¨æ–‡æœ¬å¤„ç†å·¥å…·ï¼Œæˆ‘ä»¬å¿…é¡»çŸ¥é“è¿™äº›å‘½ä»¤æ”¯æŒé‚£ç§æ­£åˆ™è¡¨è¾¾å¼ã€‚ç°å¯¹å¸¸è§çš„å‘½ä»¤æ€»ç»“å¦‚ä¸‹ï¼š</p>
<p>ï¼ ä½¿ç”¨BREè¯­æ³•çš„å‘½ä»¤æœ‰ï¼šgrepã€edã€sedã€vim<br>ï¼ ä½¿ç”¨EREè¯­æ³•çš„å‘½ä»¤æœ‰ï¼šegrepã€awkã€emacs</p>
<p>å½“ç„¶ï¼Œè¿™ä¹Ÿä¸æ˜¯ç»å¯¹çš„ï¼Œæ¯”å¦‚ sed é€šè¿‡-ré€‰é¡¹å°±å¯ä»¥ä½¿ç”¨EREäº†ï¼Œå¤§å®¶åˆ°æ—¶è‡ªå·±manä¸€ä¸‹å°±å¯ä»¥äº†ã€‚</p>
<p>è¿˜å€¼å¾—ä¸€æçš„æ˜¯POSIXè¿˜å®šä¹‰äº†ä¸€äº›shorthandï¼Œå…·ä½“å¦‚ä¸‹ï¼š</p>
<ul>
<li>[:alnum:]</li>
<li>[:alpha:]</li>
<li>[:cntrl:]</li>
<li>[:digit:]</li>
<li>[:graph:]</li>
<li>[:lower:]</li>
<li>[:print:]</li>
<li>[:punct:]</li>
<li>[:space:]</li>
<li>[:upper:]</li>
<li>[:xdigit:]</li>
</ul>
<p>åœ¨ä½¿ç”¨è¿™äº›shorthandæ—¶æœ‰ä¸€ä¸ªçº¦æŸï¼šå¿…é¡»åœ¨<code>[]</code>ä¸­ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœåƒåŒ¹é…0-9çš„æ•°å­—ï¼Œéœ€è¦è¿™ä¹ˆå†™<code>[[:alnum:]]</code>ï¼Œå–åå°±æ˜¯<code>[^[:alnum:]]</code>ã€‚shorhand åœ¨BREä¸EBEä¸­çš„ç”¨æ³•ç›¸åŒã€‚</p>
<p>å¦‚æœä½ å¯¹sedã€awkæ¯”è¾ƒç†Ÿæ‚‰ï¼Œä½ ä¼šå‘ç°æˆ‘ä»¬å¹³å¸¸åœ¨å˜æˆè¯­è¨€ä¸­ç”¨çš„<code>\d</code>ã€<code>\w</code>åœ¨è¿™äº›å‘½ä»¤ä¸­ä¸èƒ½ç”¨ï¼ŒåŸå› å¾ˆç®€å•ï¼Œå› ä¸ºPOSIXè§„èŒƒæ ¹æœ¬æ²¡æœ‰å®šä¹‰è¿™äº›shorthandï¼Œè¿™äº›æ˜¯ç”±ä¸‹é¢å°†è¦è¯´çš„PCREä¸­å®šä¹‰çš„ã€‚</p>
<h3 id="PCREæ ‡å‡†"><a href="#PCREæ ‡å‡†" class="headerlink" title="PCREæ ‡å‡†"></a>PCREæ ‡å‡†</h3><p>Perlè¯­è¨€ç¬¬ä¸€ç‰ˆæ˜¯ç”±<a href="http://en.wikipedia.org/wiki/Larry_Wall" target="_blank" rel="external">Larry Wall</a>å‘å¸ƒäº1987å¹´12æœˆï¼ŒPerlåœ¨å‘å¸ƒä¹‹åˆï¼Œå°±å› å…¶å¼ºå¤§çš„åŠŸèƒ½è€Œä¸€ç¥¨èµ°çº¢ï¼ŒPerlçš„å®šä½ç›®æ ‡å°±æ˜¯â€œå¤©å¤©è¦ä½¿ç”¨çš„å·¥å…·â€ã€‚Perlæ¯”è¾ƒæ˜¾è¯¸ç‰¹å¾ä¹‹ä¸€æ˜¯ä¸sedä¸awkå…¼å®¹ï¼Œè¿™é€ å°±äº†Perlæˆä¸ºç¬¬ä¸€ä¸ªé€šç”¨æ€§è„šæœ¬è¯­è¨€ã€‚</p>
<p>éšç€Perlçš„ä¸æ–­å‘å±•ï¼Œå…¶æ”¯æŒçš„æ­£åˆ™è¡¨è¾¾å¼çš„åŠŸèƒ½ä¹Ÿè¶Šæ¥è¶Šå¼ºå¤§ã€‚å…¶ä¸­å½±å“è¾ƒå¤§çš„æ˜¯äº1994å¹´10æœˆå‘å¸ƒçš„Perl 5ï¼Œå…¶å¢åŠ äº†å¾ˆå¤šç‰¹æ€§ï¼Œæ¯”å¦‚non-capturing parenthesesã€lazy quantifiersã€look-aheadã€å…ƒç¬¦å·\Gç­‰ç­‰ã€‚</p>
<p>æ­£å¥½è¿™æ—¶ä¹Ÿæ˜¯WWWå…´èµ·çš„æ—¶å€™ï¼Œè€ŒPerlå°±æ˜¯ä¸ºäº†æ–‡æœ¬å¤„ç†è€Œå‘æ˜çš„ï¼Œæ‰€ä»¥PerlåŸºæœ¬ä¸Šæˆäº†webå¼€å‘çš„é¦–é€‰è¯­è¨€ã€‚Perlè¯­è¨€åº”ç”¨æ˜¯å¦‚æ­¤å¹¿æ³›ï¼Œä»¥è‡³äºå…¶ä»–è¯­è¨€å¼€å§‹ç§»æ¤Perlï¼Œæœ€ç»ˆPerl compatibleï¼ˆå…¼å®¹ï¼‰çš„PCREè¯ç”Ÿäº†ï¼Œè¿™å…¶ä¸­åŒ…æ‹¬äº†Tcl, Python, Microsoftâ€™s .NET , Ruby, PHP, C/C++, Javaç­‰ç­‰ã€‚</p>
<p>å‰é¢è¯´äº†shorthandåœ¨POSIXä¸PCREæ˜¯ä¸åŒçš„ï¼ŒPCREä¸­æˆ‘ä»¬å¸¸ç”¨çš„æœ‰å¦‚ä¸‹è¿™äº›ï¼š</p>
<ul>
<li><code>\w</code> è¡¨ç¤º<code>[a-zA-Z]</code></li>
<li><code>\W</code> è¡¨ç¤º<code>[^a-zA-Z]</code></li>
<li><code>\s</code> è¡¨ç¤º<code>[ \t\r\n\f]</code></li>
<li><code>\S</code> è¡¨ç¤º<code>[^ \t\r\n\f]</code></li>
<li><code>\d</code> è¡¨ç¤º<code>[1-9]</code></li>
<li><code>\D</code> è¡¨ç¤º<code>[^1-9]</code></li>
<li><code>\&lt;</code> è¡¨ç¤ºä¸€ä¸ªå•è¯çš„èµ·å§‹</li>
<li><code>\&gt;</code> è¡¨ç¤ºä¸€ä¸ªå•è¯çš„ç»“å°¾</li>
</ul>
<p>å…³äºshorthandåœ¨ä¸¤ç§æ ‡å‡†çš„æ¯”è¾ƒï¼Œæ›´å¤šå¯å‚è€ƒ<a href="http://en.wikipedia.org/wiki/Regular_expression#Character_classes" target="_blank" rel="external">Wikipedia</a></p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ç›¸ä¿¡å¤§å®¶æœ€åˆæ¥è§¦æ­£åˆ™è¡¨è¾¾å¼ï¼ˆREï¼‰è¿™ä¸œè¥¿ï¼Œéƒ½æ˜¯åœ¨æŸä¸ªè¯­è¨€ä¸­ï¼Œåƒ Javaã€Pythonç­‰ï¼Œå…¶å®è¿™äº›è¯­è¨€çš„æ­£åˆ™è¡¨è¾¾å¼éƒ½æ˜¯åŸºäºPCREæ ‡å‡†çš„ã€‚<br>è€ŒLinuxä¸‹ä½¿ç”¨å„ç§å¤„ç†æ–‡æœ¬çš„å‘½ä»¤ï¼Œæ˜¯ç»§æ‰¿è‡ªPOSIXæ ‡å‡†ï¼Œä¸è¿‡æ˜¯ç”±GNUæ‰©å±•åçš„è€Œå·²ã€‚</p>
<p>å¤§å®¶å¦‚æœå¯¹ sedã€awkå‘½ä»¤ä¸ç†Ÿæ‚‰ï¼Œå¯ä»¥å‚è€ƒè€—å­å”ä¸‹é¢çš„ä¸¤ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://coolshell.cn/articles/9104.html" target="_blank" rel="external">sed ç®€æ˜æ•™ç¨‹</a></li>
<li><a href="http://coolshell.cn/articles/9070.html" target="_blank" rel="external">awk ç®€æ˜æ•™ç¨‹</a></li>
</ul>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://www.regular-expressions.info/gnu.html" target="_blank" rel="external">GNU Regular Expression Extensions</a></li>
<li><a href="http://www.regular-expressions.info/posixbrackets.html" target="_blank" rel="external">POSIX Bracket Expressions</a></li>
<li><a href="https://www.gnu.org/software/gnulib/manual/html_node/Regular-expression-syntaxes.html" target="_blank" rel="external">Different types of regular expressions Gnulib supports</a></li>
<li><a href="http://en.wikipedia.org/wiki/Regular_expression" target="_blank" rel="external">Regular_expression</a></li>
<li><a href="http://www.infoq.com/cn/news/2011/07/regular-expressions-6-POSIX" target="_blank" rel="external">Linux/Unixå·¥å…·ä¸æ­£åˆ™è¡¨è¾¾å¼çš„POSIXè§„èŒƒ</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç›¸ä¿¡å¤§å®¶å¯¹äºæ­£åˆ™è¡¨è¾¾å¼éƒ½ä¸é™Œç”Ÿï¼Œåœ¨æ–‡æœ¬å¤„ç†ä¸­æˆ–å¤šæˆ–å°‘çš„éƒ½ä¼šä½¿ç”¨åˆ°å®ƒã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨linuxä¸‹çš„æ–‡æœ¬å¤„ç†å·¥å…·å¦‚awkã€sedç­‰æ—¶ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„è¯­æ³•è²Œä¼¼è¿˜ä¸ä¸€æ ·ï¼Œåœ¨awkä¸­èƒ½æ­£å¸¸å·¥ä½œçš„æ­£åˆ™ï¼Œåœ¨sedä¸­æ€»æ˜¯ä¸èµ·ä½œç”¨ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜äº§ç”Ÿçš„ç¼˜ç”±æ˜¯å› ä¸ºæ­£åˆ™è¡¨
    
    </summary>
    
      <category term="Linux" scheme="http://liujiacai.net/categories/Linux/"/>
    
    
      <category term="regexp" scheme="http://liujiacai.net/tags/regexp/"/>
    
  </entry>
  
  <entry>
    <title>MacBook æœ€ä½³å®è·µ</title>
    <link href="http://liujiacai.net/blog/2014/11/23/first-taste-of-macbook/"/>
    <id>http://liujiacai.net/blog/2014/11/23/first-taste-of-macbook/</id>
    <published>2014-11-23T12:40:07.000Z</published>
    <updated>2017-07-28T10:38:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>MacBook å…¼å…·å‘½ä»¤è¡Œçš„é«˜æ•ˆä¸å›¾å½¢ç•Œé¢çš„é…·ç‚«ï¼Œå®åœ¨æ˜¯ç¨‹åºå‘˜å¿…å¤‡åˆ©å™¨ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»æˆ‘åœ¨ä¸¤å¹´çš„ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“å‡ºçš„ä¸€äº›æœ€ä½³å®è·µï¼Œä¾›å¤§å®¶å‚è€ƒã€å€Ÿé‰´ã€‚</p>
<p><img src="https://dn-mhke0kuv.qbox.me/cb49a18efb421a9624c5.png" alt="MacBook ä½ å€¼å¾—æ‹¥æœ‰"></p>
<h2 id="Mac-OS-ç®€ä»‹"><a href="#Mac-OS-ç®€ä»‹" class="headerlink" title="Mac OS ç®€ä»‹"></a>Mac OS ç®€ä»‹</h2><p>Mac OSå¯ä»¥è¢«åˆ†æˆæ“ä½œç³»ç»Ÿçš„ä¸¤ä¸ªç³»åˆ—ï¼š</p>
<ul>
<li>ä¸€ä¸ªæ˜¯è€æ—§ä¸”å·²ä¸è¢«æ”¯æŒçš„â€œClassicâ€Mac OSï¼ˆç³»ç»Ÿæ­è½½åœ¨1984å¹´é”€å”®çš„é¦–éƒ¨Macä¸å…¶åä»£ä¸Šï¼Œç»ˆæç‰ˆæœ¬æ˜¯Mac OS 9ï¼‰ã€‚é‡‡ç”¨Machä½œä¸ºå…§æ ¸ï¼Œåœ¨Mac OS 7.6.1ä»¥å‰ç”¨â€œSystem vX.Xâ€æ¥ç§°å‘¼ã€‚</li>
<li>æ–°çš„OS Xç»“åˆ<a href="http://zh.wikipedia.org/wiki/BSD" target="_blank" rel="external">BSD Unix</a>ã€OpenStepå’ŒMac OS 9çš„å…ƒç´ ã€‚å®ƒçš„æœ€åº•å±‚å»ºåŸºäºUnixåŸºç¡€ï¼Œå…¶ä»£ç è¢«ç§°ä¸ºDarwinï¼Œå®è¡Œçš„æ˜¯éƒ¨åˆ†å¼€æ”¾æºä»£ç ã€‚</li>
</ul>
<p>å…³äºä¸ºä»€ä¹ˆMacç³»ç»Ÿæ²¡æœ‰é‡‡ç”¨Linuxå†…æ ¸ï¼Œè€Œæ˜¯é‡‡ç”¨äº†BSDè¿˜æœ‰ä¸ªå°æ•…äº‹ï¼Œæ„Ÿå…´è¶£çš„å¤§å®¶å¯ä»¥çœ‹<a href="https://zhuanlan.zhihu.com/p/20263877" target="_blank" rel="external">Mac OS X èƒŒåçš„æ•…äº‹ï¼ˆäºŒï¼‰â€”â€”Linus Torvaldsçš„çŸ­è§†</a>è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>å°½ç®¡ Mac çš„æ–‡ä»¶ç³»ç»Ÿç›®å½•å’Œ Linux å·®ä¸å¤šï¼Œä½†è¿˜æ˜¯æœ‰äº›å·®è·ï¼Œå¯å‚è€ƒä¸‹é¢çš„è¡¨æ ¼ï¼š</p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2SgzpbXXXXXbSXpXXXXXXXXXX_!!581166664.png" alt="Mac-FileSystem"></p>
<h2 id="Mac-å¼€å‘ç¯å¢ƒéƒ¨ç½²"><a href="#Mac-å¼€å‘ç¯å¢ƒéƒ¨ç½²" class="headerlink" title="Mac å¼€å‘ç¯å¢ƒéƒ¨ç½²"></a>Mac å¼€å‘ç¯å¢ƒéƒ¨ç½²</h2><h3 id="åŒ…ç®¡ç†å™¨-Homebrew"><a href="#åŒ…ç®¡ç†å™¨-Homebrew" class="headerlink" title="åŒ…ç®¡ç†å™¨ Homebrew"></a>åŒ…ç®¡ç†å™¨ <a href="http://brew.sh/" target="_blank" rel="external">Homebrew</a></h3><blockquote>
<p>The missing package manager for macOS</p>
</blockquote>
<p><code>brew</code>ç›¸å½“äº<code>Ubuntu</code>ä¸‹çš„<code>apt-get</code>ï¼Œ<code>CentOS</code>ä¸­çš„<code>yum</code>ã€‚éå¸¸æ–¹ä¾¿å®ç”¨ï¼Œä¸€æ¡å‘½ä»¤å³å¯å®‰è£…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;</div></pre></td></tr></table></figure>
<ul>
<li><code>brew install &lt;cli-program&gt;</code>ï¼Œå®‰è£…å‘½ä»¤è¡Œå·¥å…·</li>
<li><code>brew cask install &lt;gui-program&gt;</code>ï¼Œå®‰è£…å›¾å½¢ç•Œé¢è½¯ä»¶ï¼Œè¿™å¾—ç›Šäº<a href="https://github.com/caskroom/homebrew-cask" target="_blank" rel="external">Homebrew-Cask</a>æ‰©å±•</li>
</ul>
<h3 id="æ–‡æœ¬ç¼–è¾‘å™¨-VSCode"><a href="#æ–‡æœ¬ç¼–è¾‘å™¨-VSCode" class="headerlink" title="æ–‡æœ¬ç¼–è¾‘å™¨ VSCode"></a>æ–‡æœ¬ç¼–è¾‘å™¨ <a href="https://code.visualstudio.com/" target="_blank" rel="external">VSCode</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install visual-studio-code</div></pre></td></tr></table></figure>
<p>æ–°æ—¶ä»£çš„æ–‡æœ¬ç¼–è¾‘å™¨ï¼ŒåŠŸèƒ½å’Œ Atom/Sublime å·®ä¸å¤šï¼Œä½†æ˜¯ä¸ä¼šå‡ºç°å¡é¡¿ç°è±¡ï¼Œè€Œä¸”å®˜æ–¹æä¾›äº† <a href="https://github.com/Microsoft/vscode-sublime-keybindings" target="_blank" rel="external">Sublime Text Keymap</a> æ’ä»¶ï¼Œå¦‚æœä¹‹å‰ç†Ÿæ‚‰ Sublimeï¼Œæ¨èå®‰è£…ã€‚ä¸‹é¢æ˜¯æˆ‘éå¸¸ä¾èµ–çš„å¿«æ·é”®ï¼š</p>
<ul>
<li>Multiple Selection: <code>Control+Command+G</code>ï¼ˆåœ¨ Linux/Windows ä¸‹ï¼Œæ˜¯ Alt+F3ï¼‰</li>
<li>é€‰ä¸­å¤šè¡Œ <code>Shift+Command+L</code></li>
<li>å¤šè¡Œåˆå¹¶ä¸ºä¸€è¡Œ<code>Command+J</code></li>
</ul>
<h3 id="ç¥ä¹‹ç¼–è¾‘å™¨-Emacs"><a href="#ç¥ä¹‹ç¼–è¾‘å™¨-Emacs" class="headerlink" title="ç¥ä¹‹ç¼–è¾‘å™¨ Emacs"></a>ç¥ä¹‹ç¼–è¾‘å™¨ <a href="https://www.emacswiki.org/emacs?interface=en" target="_blank" rel="external">Emacs</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew install --with-cocoa --srgb emacs</div><div class="line">brew install sbcl # é¡ºä¾¿æŠŠ common lisp ä¹Ÿè£…ä¸Š</div></pre></td></tr></table></figure>
<p>å…¶å® Mac æ˜¯æœ‰è‡ªå¸¦ Emacs çš„ï¼Œä½ç½®æ˜¯<code>/usr/bin/emacs</code>ï¼Œåªæ˜¯ç‰ˆæœ¬éå¸¸æ—§ï¼Œé€šè¿‡<code>brew</code>å®‰è£…çš„ä½ç½®åœ¨<code>/usr/local/bin/emacs</code>ï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤åˆ é™¤ Mac è‡ªå¸¦çš„ Emacsï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo rm /usr/bin/emacs</div><div class="line">sudo rm -rf /usr/share/emacs</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†èƒ½åœ¨ gitï¼Œç»ˆç«¯ä¸­é»˜è®¤ä½¿ç”¨ Emacsï¼Œéœ€è¦åšä»¥ä¸‹é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># ~/.bashrc</div><div class="line">export EDITOR=&quot;emacsclient -t -a=\&quot;\&quot;&quot;</div><div class="line">export ALTERNATE_EDITOR=&quot;&quot;</div><div class="line"></div><div class="line"># ~/.gitconfig</div><div class="line">[core]</div><div class="line">    editor = emacsclient -t -a=\\\&quot;\\\&quot;</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„é…ç½®ä¼šè°ƒç”¨ <code>emacsclient</code> å»è¿æ¥ <code>emacs daemon</code>æœåŠ¡ï¼Œå¦‚æœæœåŠ¡æ²¡å¯ï¼Œå°±å…ˆå¯åŠ¨æœåŠ¡å†å»è¿æ¥ã€‚</p>
<h3 id="API-æŸ¥é˜…å·¥å…·Dash"><a href="#API-æŸ¥é˜…å·¥å…·Dash" class="headerlink" title="API æŸ¥é˜…å·¥å…·Dash"></a>API æŸ¥é˜…å·¥å…·<a href="https://kapeli.com/dash" target="_blank" rel="external">Dash</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install dash</div></pre></td></tr></table></figure>
<blockquote>
<p>Dash gives your Mac instant offline access to 150+ API documentation sets.</p>
</blockquote>
<p>å®‰è£… Dash åï¼Œå°±å¯ä»¥ç¦»çº¿æŸ¥å„ç§è¯­è¨€/æ¡†æ¶çš„ API æ–‡æ¡£äº†ã€‚ğŸº</p>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2x_3QcNdkpuFjy0FbXXaNnpXa_!!581166664.png" alt=""></p>
<h3 id="æŠ“åŒ…å·¥å…·-Wireshark"><a href="#æŠ“åŒ…å·¥å…·-Wireshark" class="headerlink" title="æŠ“åŒ…å·¥å…· Wireshark"></a>æŠ“åŒ…å·¥å…· <a href="https://www.wireshark.org/" target="_blank" rel="external">Wireshark</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install wireshark</div></pre></td></tr></table></figure>
<p>ä¹Ÿè®¸æ˜¯æœ€å¼ºå¤§çš„æŠ“åŒ…å·¥å…·ï¼Œä»å…¶åå­—ä¸Šå°±èƒ½ä½“ç°å‡ºï¼šwireï¼ˆçº¿è·¯ï¼‰+ sharkï¼ˆé²¨é±¼ï¼‰ã€‚ä½†è¿™ä¸ªè½¯ä»¶åˆæ¬¡ä½¿ç”¨æ—¶æœ‰äº›éš¾åº¦ï¼Œæœ€é‡è¦çš„æ˜¯åŒºåˆ†ä¸¤ä¸ªæ¦‚å¿µï¼š</p>
<ul>
<li><code>capture filter</code>ï¼Œåœ¨æŠ“åŒ…å¼€å§‹æ—¶æŒ‡å®šã€‚<br><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2dcIUcHXlpuFjSszfXXcSGXXa_!!581166664.png" alt="capture filter"><br>å¸¸è§è¡¨è¾¾å¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># Capture only traffic to or from IP address 172.18.5.4:</div><div class="line">host 172.18.5.4</div><div class="line"></div><div class="line"># Capture traffic to or from a range of IP addresses:</div><div class="line">net 192.168.0.0/24</div><div class="line"></div><div class="line"># Capture non-HTTP and non-SMTP traffic on your server (both are equivalent):</div><div class="line">host www.example.com and not (port 80 or port 25)</div><div class="line">host www.example.com and not port 80 and not port 25</div><div class="line"></div><div class="line"># Capture traffic within a range of ports  with newer versions of libpcap (0.9.1 and later):</div><div class="line">tcp portrange 1501-1549</div><div class="line"></div><div class="line">#Capture only IPv4 traffic - the shortest filter, but sometimes very useful to get rid of lower layer protocols like ARP and STP:</div><div class="line">ip</div><div class="line"></div><div class="line"># Capture only unicast traffic - useful to get rid of noise on the network if you only want to see traffic to and from your machine, not, for example, broadcast and multicast announcements:</div><div class="line">not broadcast and not multicast</div></pre></td></tr></table></figure>
<ul>
<li><code>display filter</code>ï¼Œåœ¨æŠ“å–ä¸€å®šåŒ…åè¿›è¡Œè¿‡æ»¤ã€‚<br><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2L5U0cHJkpuFjy1zcXXa5FFXa_!!581166664.png" alt="display filter"><br>å¸¸è§è¡¨è¾¾å¼</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">ip.dst_host == 192.168.30.103 and tcp.dstport == 80</div><div class="line"></div><div class="line">ip.addr == 10.43.54.65</div><div class="line"># is equivalent to</div><div class="line">ip.src == 10.43.54.65 or ip.dst == 10.43.54.65</div></pre></td></tr></table></figure>
<h3 id="ç»ˆç«¯-iTerm-2"><a href="#ç»ˆç«¯-iTerm-2" class="headerlink" title="ç»ˆç«¯ iTerm 2"></a>ç»ˆç«¯ <a href="http://iterm2.com/" target="_blank" rel="external">iTerm 2</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install iterm2</div></pre></td></tr></table></figure>
<p>Macè‡ªå¸¦çš„ç»ˆç«¯ä¸æ˜¯å¾ˆå¼ºï¼Œç¨‹åºå‘˜ä»¬éœ€è¦ä¸€ä¸ªå¼ºåŠ²çš„ç»ˆç«¯æ¥å·¥ä½œï¼Œäºæ˜¯æœ‰äº† iTerm2ã€‚éœ€è¦è®¾ç½®ä¸€é¡¹ï¼šLeft Option act as +Escï¼ˆPreferencesâ€“&gt;Profilesâ€“&gt;Keysï¼‰ï¼Œè¿™æ · Option å°±å¯ä»¥ç”¨ä½œ Meta é”®äº†ã€‚</p>
<ul>
<li><code>Cmd + D</code> å‚ç›´åˆ†å± </li>
<li><code>Cmd + Shift + D</code> æ°´å¹³åˆ†å± </li>
<li><code>Cmd + T</code> å¼€å¤šä¸ªTab </li>
<li><code>Cmd + æ•°å­—</code> åœ¨å¤šä¸ªTabä¹‹é—´è¿›è¡Œåˆ‡æ¢ </li>
<li><code>Option + F/Bï¼ˆå‘å‰ã€å‘åï¼‰</code> æŒ‰å­—ç§»åŠ¨ã€‚Bash Shell å…‰æ ‡é»˜è®¤æŒ‰ç…§ Emacs é£æ ¼ç§»åŠ¨ï¼Œä¹Ÿå¯æ”¹ä¸º VIMï¼Œå¯å‚è€ƒ<a href="http://www.hypexr.org/bash_tutorial.php#set" target="_blank" rel="external">Modifying the Bash Shell with the set Command</a>ã€‚ </li>
<li><code>Ctrl + r</code> æœç´¢å†å²å‘½ä»¤</li>
<li><code>!!</code> æ‰§è¡Œä¸Šæ¡å‘½ä»¤</li>
<li><code>Ctrl+x Ctrl+e</code> è°ƒç”¨<a href="http://www.commandlinefu.com/commands/view/1446/rapidly-invoke-an-editor-to-write-a-long-complex-or-tricky-command" target="_blank" rel="external">é»˜è®¤ç¼–è¾‘å™¨å»ç¼–è¾‘ä¸€ä¸ªç‰¹åˆ«é•¿çš„å‘½ä»¤</a></li>
</ul>
<p>å½“ç„¶ï¼Œè¯´åˆ°äº† iTerm2ï¼Œä¸å¾—ä¸æåˆ°ç»ˆç«¯å¤ç”¨è½¯ä»¶ <a href="https://tmux.github.io/" target="_blank" rel="external">tmux</a>ï¼Œtmux é»˜è®¤é…ç½®æ–‡ä»¶åœ¨ Mac ä¸Šå¾ˆåˆ«æ‰­ï¼Œä½ å¯ä»¥å‚è€ƒæˆ‘è¿™é‡Œçš„<a href="https://github.com/jiacai2050/conf/blob/master/.tmux.conf" target="_blank" rel="external">é…ç½®æ–‡ä»¶</a>ï¼Œè¿™æ · tmux å°±å¯ä»¥åƒ vim ä¸€æ ·å®ç°å„ç§åˆ†å±çš„æ•ˆæœäº†ã€‚å¦‚æœä½ è¿˜ä¸çŸ¥é“ tmux ä¸ºä½•ç‰©ï¼Œå¼ºçƒˆæ¨èä½ çœ‹è¿™ä¸ª13åˆ†é’Ÿçš„<a href="http://pan.baidu.com/s/1gdLZzB9" target="_blank" rel="external">è§†é¢‘</a>ï¼Œç»å¯¹ç‰©è¶…æ‰€å€¼ï¼Œæ„Ÿè°¢ <a href="http://haoduoshipin.com/u/happypeter" target="_blank" rel="external">happypeter</a> çš„åˆ†äº«ã€‚</p>
<h3 id="bashrc"><a href="#bashrc" class="headerlink" title="~/.bashrc"></a>~/.bashrc</h3><p>Linux ä¸€èˆ¬é€šè¿‡<code>~/.bashrc</code>è¿›è¡Œç¯å¢ƒå˜é‡çš„é…ç½®ï¼Œä½†æ˜¯åœ¨ Mac ä¸‹é…ç½®åï¼Œå‘ç°æ ¹æœ¬æ²¡æœ‰æ•ˆæœï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ<br>å…¶å®è¿™æ˜¯ä¸ªæ¯”è¾ƒåŸºç¡€çš„é—®é¢˜ï¼Œshellæœ‰ä¸¤ç§ï¼šç™»å½•å¼shellä¸éç™»å½•å¼shellï¼Œç›´è§‚ç†è§£ï¼Œç™»å½•(login)å¼shellå°±æ˜¯åœ¨ä½ æ‰“å¼€shellè¦æ±‚ä½ è¾“å…¥ç”¨æˆ·åä¸å¯†ç çš„shellï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨æ¡Œé¢Linuxæ—¶ä¸€èˆ¬åªåœ¨ç™»å½•æ—¶æ¥è§¦åˆ°è¿™ç§shellï¼Œç­‰æˆ‘ä»¬è¿›å…¥ç³»ç»Ÿåï¼Œå†æ‰“å¼€çš„Terminalå°±æ˜¯éç™»å½•å¼shelläº†ã€‚è¿™ä¸¤ç§ shell è¯»å–é…ç½®çš„æ–‡ä»¶æ˜¯ä¸åŒçš„ï¼š</p>
<ul>
<li>ç™»å½•å¼Shellå¯åŠ¨æ—¶ä¼šå»è¯»å–<code>~/.profile</code>æ–‡ä»¶ï¼ˆRedhatã€Macä¸Šä¸º <code>~/.bash_profile</code>ï¼‰</li>
<li>éç™»å½•å¼Shellä¼šå»è¯»å–<code>~/.bashrc</code>æ–‡ä»¶</li>
</ul>
<p>è¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆåœ¨ Linux ç³»ç»Ÿä¸Šåªéœ€è¦ä¿®æ”¹ <code>~/.bashrc</code> åå³å¯ç”Ÿæ•ˆçš„åŸå› ã€‚ä½†åœ¨ Mac ä¸Šæœ‰äº›ä¸åŒï¼Œå¼€æœºåå†é€šè¿‡ Terminal.appï¼ˆæˆ–iTerm.appï¼‰ æ‰“å¼€ç»ˆç«¯æ—¶ï¼Œè¿™æ—¶çš„ shell æ˜¯ç™»å½•å¼shellï¼Œå› ä¸ºTerminal.appï¼ˆæˆ–iTerm.appï¼‰è¿™ä¸ªåº”ç”¨ç¨‹åºæ˜¯é€šè¿‡<code>/usr/bin/login</code>è¿™ä¸ªå‘½ä»¤æ‰“å¼€ç»ˆç«¯çš„ï¼Œæ‰€ä»¥ä¸ä¼šå»<code>source ~/.bashrc</code>äº†ã€‚<br>è§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨~/.bash_profileåŠ ä¸Šä¸‹é¢ä¸€å¥ä»£ç å°±okäº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[ -r ~/.bashrc ] &amp;&amp; source ~/.bashrc</div></pre></td></tr></table></figure></p>
<p>Macä¸‹<code>ls</code>å‘½ä»¤é»˜è®¤æ˜¯æ²¡æœ‰é¢œè‰²çš„ï¼Œä¸æ˜¯å¾ˆç›´è§‚ï¼Œå¯ä»¥è‡ªå·±è®¾ç½®ä¸€ä¸ªaliasï¼Œå‚è€ƒ<a href="http://apple.stackexchange.com/questions/33677/how-can-i-configure-mac-terminal-to-have-color-ls-output" target="_blank" rel="external">é“¾æ¥</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">export LSCOLORS=gxBxhxDxfxhxhxhxhxcxcx</div><div class="line">alias ls=&apos;ls -FG&apos;</div><div class="line">alias ll=&apos;ls -l&apos;</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†åœ¨å‘½ä»¤è¡Œæç¤ºç¬¦ä¸­æ˜¾ç¤ºæ—¶é—´ï¼Œå¯ä»¥è®¾ç½®<code>PS1</code>å˜é‡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">export PS1=&quot;\n\e[1;37m[\e[m\e[1;35m\u\e[m\e[1;36m@\e[m\e[1;37m\h\e[m \e[1;33m\t\e[m \w\e[m\e[1;37m]\e[m\e[1;36m\e[m\n\$ &quot;</div><div class="line"></div><div class="line"># æ•ˆæœå¦‚ä¸‹</div><div class="line">[liujiacai@macbook 22:02:13 ~]</div></pre></td></tr></table></figure></p>
<h3 id="ssh-config"><a href="#ssh-config" class="headerlink" title="~/.ssh/config"></a>~/.ssh/config</h3><p>åœ¨ macOS/OS X æˆªæ­¢åˆ° Yosemiteï¼Œssh-agent ä¼šä¸€ç›´è®°ä½ <code>ssh-add -K</code> æ·»åŠ çš„ keyï¼Œå³ä½¿é‡å¯ keychainï¼Œssh-agent ä¹Ÿä¼šè‡ªåŠ¨å»è¯»å–ä¿å­˜åœ¨ keychain ä¸­çš„å¯†ç ï¼ˆpassphraseï¼‰ã€‚ä½†åœ¨ Sierra ä¸­ï¼Œé‡å¯ keychain åï¼Œssh-agent å°±ä¸ä¼šå»è¯»å–äº†ã€‚Apple å¼€å‘è€…ä¹Ÿå¯¹è¿™ä¸€ç°è±¡ä½œå‡º<a href="https://openradar.appspot.com/27348363" target="_blank" rel="external">å›åº”</a>ï¼š</p>
<blockquote>
<p>Thatâ€™s expected. We re-aligned our behavior with the mainstream OpenSSH in this area. </p>
</blockquote>
<p>è§£å†³åŠæ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°†<code>ssh-add -A</code> æ”¾åˆ° <code>~/.bashrc</code> é‡Œé¢å°±å¯ä»¥äº†ã€‚é™¤äº†è¿™ç§æ–¹å¼ï¼Œè¿˜å¯ä»¥åœ¨<code>~/.ssh/config</code>é‡Œé¢åŠ å…¥å¦‚ä¸‹é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Host * (asterisk for all hosts or add specific host)</div><div class="line">  AddKeysToAgent yes</div><div class="line">  UseKeychain yes</div><div class="line">  IdentityFile &lt;key&gt; (e.g. ~/.ssh/userKey)</div></pre></td></tr></table></figure></p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://github.com/jirsbek/SSH-keys-in-macOS-Sierra-keychain" target="_blank" rel="external">Saving SSH keys in macOS Sierra keychain</a></li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå¯¹äº OpenSSH 4.0 ä»¥åŠä¹‹åçš„ç‰ˆæœ¬ï¼Œå¼•å…¥ä¸€æ–°åŠŸèƒ½ ControlMasterï¼Œå¯ä»¥å¤ç”¨ä¹‹å‰å·²ç»ç™»å½•çš„è¿æ¥ï¼Œå»ºè®®å¼€å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Host *</div><div class="line">  ControlMaster auto</div><div class="line">  ControlPath ~/.ssh/master-%r@%h:%p</div><div class="line">  ControlPersist 60m</div></pre></td></tr></table></figure></p>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a href="https://www.linux.com/news/accelerating-openssh-connections-controlmaster" target="_blank" rel="external">Accelerating OpenSSH connections with ControlMaster</a></li>
<li><a href="OpenSSH/Cookbook/Multiplexing">https://en.wikibooks.org/wiki/OpenSSH/Cookbook/Multiplexing</a></li>
</ul>
<h3 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install java</div><div class="line">brew install maven</div><div class="line">brew cask install intellij-idea-ce  # IDEï¼Œä¸è¦å‘Šè¯‰æˆ‘ä½ è¿˜åœ¨ç”¨ eclipse</div></pre></td></tr></table></figure>
<p>é€šè¿‡<code>brew cask</code>å®‰è£…åï¼Œå¯ä»¥é€šè¿‡æ‰§è¡Œ<code>/usr/libexec/java_home</code>è¿™ä¸ªå‘½ä»¤æ¥è·å–JAVA_HOME<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=&quot;$(/usr/libexec/java_home)&quot;</div></pre></td></tr></table></figure></p>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install docker</div></pre></td></tr></table></figure>
<p>å›½å†…è®¿é—® Docker Hub æœ‰æ—¶ä¼šé‡åˆ°å›°éš¾ï¼Œæœ€å¥½å¯ä»¥é…ç½®<a href="https://yeasy.gitbooks.io/docker_practice/install/mirror.html" target="_blank" rel="external">é•œåƒåŠ é€Ÿå™¨</a>ã€‚</p>
<h3 id="æ•°æ®åº“-GUI-å®¢æˆ·ç«¯"><a href="#æ•°æ®åº“-GUI-å®¢æˆ·ç«¯" class="headerlink" title="æ•°æ®åº“ GUI å®¢æˆ·ç«¯"></a>æ•°æ®åº“ GUI å®¢æˆ·ç«¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install sequel-pro # mysql</div><div class="line">brew cask install robo-3t    # mongodb</div><div class="line">brew cask install rdm        # redis</div></pre></td></tr></table></figure>
<h3 id="ç§‘å­¦ä¸Šç½‘-Shadowsocks"><a href="#ç§‘å­¦ä¸Šç½‘-Shadowsocks" class="headerlink" title="ç§‘å­¦ä¸Šç½‘ Shadowsocks"></a>ç§‘å­¦ä¸Šç½‘ Shadowsocks</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">brew install shadowsocks-libev</div></pre></td></tr></table></figure>
<p>Mac ä¸‹ä¸æ¨èå®‰è£… GUI ç‰ˆæœ¬ï¼Œå·²ç»å¾ˆä¹…æ²¡äººç»´æŠ¤äº†ã€‚å®‰è£…ä¹‹åç¼–è¾‘<code>/usr/local/etc/shadowsocks-libev.json</code>ï¼Œå¡«å…¥ server åœ°å€å³å¯ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># æµ‹è¯•</div><div class="line">ss-local -v -c /usr/local/etc/shadowsocks-libev.json</div><div class="line"># å¼€æœºå¯åŠ¨</div><div class="line">brew services start shadowsocks-libev</div></pre></td></tr></table></figure></p>
<p>ä¸ºäº†è®©ç»ˆç«¯å¯ä»¥ä½¿ç”¨ä»£ç†ï¼Œéœ€è¦å°† http(s) è½¬ä¸º socks æµé‡ã€‚ss å®˜æ–¹æ¨èçš„æ˜¯ <a href="https://github.com/shadowsocks/shadowsocks/wiki/Using-Shadowsocks-with-Command-Line-Tools" target="_blank" rel="external">proxychains</a>ï¼Œä½†æ˜¯åœ¨OS X 10.11 ä»¥åå¼•å…¥äº† <a href="https://developer.apple.com/library/content/releasenotes/MacOSX/WhatsNewInOSX/Articles/MacOSX10_11.html" target="_blank" rel="external">SIPå®‰å…¨æœºåˆ¶</a>ï¼Œå¯¼è‡´æ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œå…³é—­ SIP è²Œä¼¼ä¹Ÿä¸å¯å–ï¼Œå¯ä»¥é€‰ç”¨ <a href="https://www.privoxy.org/" target="_blank" rel="external">privoxy</a> æ¥æ›¿ä»£ proxychainsã€‚ï¼ˆ<a href="https://tech.jandou.com/to-accelerate-the-terminal.html" target="_blank" rel="external">å‚è€ƒ</a>ï¼‰<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">brew install privoxy</div><div class="line"># privoxy ä½¿ç”¨ 8118 ç«¯å£ï¼Œ ss ä½¿ç”¨ 1080</div><div class="line">echo &apos;listen-address 0.0.0.0:8118\nforward-socks5 / localhost:1080 .&apos; &gt;&gt; /usr/local/etc/privoxy/config</div><div class="line"># æµ‹è¯•ï¼ŒæŸ¥çœ‹ 8118 æœ‰æ²¡æœ‰åœ¨ç›‘å¬ï¼Œ netstat -an | grep 8118</div><div class="line">/usr/local/sbin/privoxy /usr/local/etc/privoxy/config</div><div class="line"># å¼€æœºå¯åŠ¨</div><div class="line">brew services start privoxy</div></pre></td></tr></table></figure></p>
<p>ç»è¿‡ä¸Šé¢è¿™å‡ æ­¥ <code>http(s)-&gt;socks5</code> å°±å®Œæˆï¼Œä¸‹é¢åªéœ€è¦è®©ç»ˆç«¯èµ°è¿™ä¸ªä»£ç†å³å¯ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">export http_proxy=&apos;http://localhost:8118&apos;</div><div class="line">export https_proxy=&apos;http://localhost:8118&apos;</div><div class="line"></div><div class="line"># å¯ä»¥å°†ä»¥ä¸‹å‡½æ•°æ”¾å…¥ ~/.bashrc ä¸­ï¼Œæ–¹ä¾¿å¼€å¯/å…³é—­ä»£ç†</div><div class="line">function proxy_off()&#123;</div><div class="line">    unset http_proxy</div><div class="line">    unset https_proxy</div><div class="line">    echo -e &quot;å·²å…³é—­ä»£ç†&quot;</div><div class="line">&#125;</div><div class="line">function proxy_on() &#123;</div><div class="line">    export no_proxy=&quot;localhost,127.0.0.1,localaddress,.localdomain.com&quot;</div><div class="line">    export http_proxy=&quot;http://127.0.0.1:8118&quot;</div><div class="line">    export https_proxy=$http_proxy</div><div class="line">    echo -e &quot;å·²å¼€å¯ä»£ç†&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="ç³»ç»Ÿå¿«æ·é”®"><a href="#ç³»ç»Ÿå¿«æ·é”®" class="headerlink" title="ç³»ç»Ÿå¿«æ·é”®"></a>ç³»ç»Ÿå¿«æ·é”®</h3><table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>å¿«æ·é”®</th>
</tr>
</thead>
<tbody>
<tr>
<td>æŸ¥çœ‹æ¡Œé¢</td>
<td><code>F11</code></td>
</tr>
<tr>
<td>æŸ¥çœ‹Dashboard</td>
<td><code>F12</code></td>
</tr>
<tr>
<td>HOME</td>
<td><code>Command + &lt;-</code></td>
</tr>
<tr>
<td>END</td>
<td><code>Command + -&gt;</code></td>
</tr>
<tr>
<td>é”å±</td>
<td><code>Shift + Control + ç”µæºé”®</code> ï¼ˆWindows ä¸‹ä¸º<code>Win+L</code>ï¼‰</td>
</tr>
<tr>
<td>å¼ºåˆ¶å…³é—­ç¨‹åº</td>
<td><code>Command + Option + esc</code>ï¼ˆWindows ä¸‹ä¸º<code>Ctrl+Alt+Delete</code>ï¼‰</td>
</tr>
<tr>
<td><a href="https://apple.stackexchange.com/questions/193937/shortcut-for-toggling-between-different-windows-of-same-app" target="_blank" rel="external">åœ¨åŒä¸€åº”ç”¨ä¸åŒçª—å£åˆ‡æ¢</a></td>
<td><code>Command + ~</code></td>
</tr>
<tr>
<td><a href="http://apple.stackexchange.com/questions/12391/why-is-it-not-possible-to-use-the-cut-command-to-manipulate-a-file-in-the-find" target="_blank" rel="external">Finder é‡Œé¢å‰ªåˆ‡</a></td>
<td><code>Cmd + Option + V</code></td>
</tr>
</tbody>
</table>
<h3 id="å®ç”¨å‘½ä»¤"><a href="#å®ç”¨å‘½ä»¤" class="headerlink" title="å®ç”¨å‘½ä»¤"></a>å®ç”¨å‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># ä¿®æ”¹hostname</div><div class="line">sudo scutil --set HostName &lt;name&gt;</div><div class="line"># æŸ¥çœ‹USBè®¾å¤‡</div><div class="line">system_profiler SPUSBDataType</div></pre></td></tr></table></figure>
<p>ä¸‹é¢çš„å‘½ä»¤éœ€è¦é€šè¿‡<code>brew</code>è¿›è¡Œå®‰è£…ååœ¨ä½¿ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"># æŸ¥çœ‹ç½‘ç»œè¯·æ±‚</div><div class="line">brew install httpstat</div><div class="line">$ httpstat baidu.com</div><div class="line">Connected to 180.149.132.47:80 from 172.17.10.80:54727</div><div class="line"></div><div class="line">HTTP/1.1 200 OK</div><div class="line">Date: Sat, 14 Jan 2017 13:49:16 GMT</div><div class="line">Server: Apache</div><div class="line">Last-Modified: Tue, 12 Jan 2010 13:48:00 GMT</div><div class="line">ETag: &quot;51-47cf7e6ee8400&quot;</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: 81</div><div class="line">Cache-Control: max-age=86400</div><div class="line">Expires: Sun, 15 Jan 2017 13:49:16 GMT</div><div class="line">Connection: Keep-Alive</div><div class="line">Content-Type: text/html</div><div class="line"></div><div class="line">Body stored in: /var/folders/2g/fxz_98ks0lgc79sjp5vn5cxc0000gn/T/tmpsawHq4</div><div class="line"></div><div class="line">  DNS Lookup   TCP Connection   Server Processing   Content Transfer</div><div class="line">[    69ms    |      37ms      |       33ms        |        0ms       ]</div><div class="line">             |                |                   |                  |</div><div class="line">    namelookup:69ms           |                   |                  |</div><div class="line">                        connect:106ms             |                  |</div><div class="line">                                      starttransfer:139ms            |</div><div class="line">                                                                 total:139ms</div><div class="line"></div><div class="line"># Swiss Army Knife for macOS !</div><div class="line">brew install m-cli</div><div class="line">$ m trash status</div><div class="line">Size:  51G</div><div class="line">Number of files: 252172</div></pre></td></tr></table></figure></p>
<h2 id="å¸¸ç”¨è½¯ä»¶"><a href="#å¸¸ç”¨è½¯ä»¶" class="headerlink" title="å¸¸ç”¨è½¯ä»¶"></a>å¸¸ç”¨è½¯ä»¶</h2><p>æ—¥å¸¸ä½¿ç”¨çš„è½¯ä»¶é¦–é€‰é€šè¿‡<code>App Store</code>è¿›è¡Œå®‰è£…ï¼Œé»˜è®¤å®‰è£…åœ¨<code>/Applications</code>ä¸‹ï¼Œä¸ªäººä»äº’è”ç½‘ä¸Šå•ç‹¬ä¸‹è½½çš„è½¯ä»¶æ”¾åœ¨è¿™é‡Œé¢å³å¯å‡ºç°åœ¨<code>Launchpad</code>ä¸­æ‰¾åˆ°ã€‚<br>å¯¹äºé€šè¿‡<code>App Store</code>å®‰è£…çš„è½¯ä»¶ï¼Œåœ¨<code>Launchpad</code>ç•Œé¢ï¼ŒæŒ‰ä½<code>Option</code>é”®å¯è¿›è¡Œåˆ é™¤ã€‚ä½†æ˜¯éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ—¶ï¼Œåº”ç”¨ç¨‹åºä¸€èˆ¬éƒ½ä¼šæœ‰äº›å†å²æ–‡ä»¶ï¼Œå­˜æ”¾çš„ä½ç½®æœ‰å¦‚ä¸‹ä¸‰å¤„</p>
<ul>
<li><code>~/Library/Application Support/&lt;Application name&gt;</code></li>
<li><code>~/Library/Cache/&lt;Application name&gt;</code></li>
<li><code>~/Library/Preferences/&lt;Application name&gt;.plist</code></li>
</ul>
<p>ä½¿ç”¨<code>find + grep</code>çš„æ–¹å¼å°±èƒ½è½»æ¾æ‰¾å‡ºæ¥äº†ã€‚ç½‘ä¸Šä¹Ÿæœ‰è¯¸å¦‚<a href="http://appcleaner.en.softonic.com/mac" target="_blank" rel="external">AppCleaner</a>ã€<a href="http://www.appzapper.com/" target="_blank" rel="external">AppZapper</a>çš„å°è½¯ä»¶ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®éœ€è¦è‡ªå–ä¹‹ã€‚</p>
<p>ä¸‹é¢ä»‹ç»ä¸‹æˆ‘æ—¥å¸¸ä½¿ç”¨çš„ä¸€äº›å…è´¹è½¯ä»¶ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚</p>
<blockquote>
<p>PS: Mac ä¸‹æœ‰å¾ˆå¤šéå¸¸å®ç”¨çš„æ”¶è´¹è½¯ä»¶ï¼Œæˆ‘ä¸ªäººç”¨çš„å¹¶ä¸å¤šï¼Œè¿™é‡Œå°±ä¸åœ¨åˆ—ä¸¾äº†ã€‚<br>å¤§å®¶å¯ä»¥å‚è€ƒçŸ¥ä¹ä¸Šçš„ <a href="https://www.zhihu.com/question/19550256" target="_blank" rel="external">macOS (OS X) å¹³å°ä¸Šæœ‰å“ªäº›å€¼å¾—æ¨èçš„å¸¸ç”¨è½¯ä»¶ï¼Ÿ</a></p>
</blockquote>
<h3 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h3><p>Mac ä¸Šè‡ªå¸¦çš„ Safari æ¯”è¾ƒè½»é‡ï¼Œè™½ç„¶æ¯”è¾ƒçœç”µï¼Œä½†æ‰©å±•æ€§è¿œä¸å¦‚ Chromeã€Firefoxï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªæ˜¯å¿…é¡»çš„ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">brew cask install firefox</div><div class="line">brew cask install google-chrome</div></pre></td></tr></table></figure></p>
<p>Chrome é»˜è®¤ä¼šæŒ‰ç…§ä¸€ä¸ª Update ç¨‹åºï¼Œåœ¨ <code>~/Library/Google/GoogleSoftwareUpdate</code>ï¼Œå¯ä»¥æ‰§è¡Œ<a href="https://superuser.com/a/1077420" target="_blank" rel="external">ä¸‹é¢å‘½ä»¤åˆ é™¤</a>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /Users/liujiacai/Library/Google/GoogleSoftwareUpdate/GoogleSoftwareUpdate.bundle/Contents/Resources/GoogleSoftwareUpdateAgent.app/Contents/Resources</div><div class="line"></div><div class="line">./ksinstall --nuke</div></pre></td></tr></table></figure></p>
<h3 id="å›¾ç‰‡æˆªå±ã€åˆå¹¶"><a href="#å›¾ç‰‡æˆªå±ã€åˆå¹¶" class="headerlink" title="å›¾ç‰‡æˆªå±ã€åˆå¹¶"></a>å›¾ç‰‡æˆªå±ã€åˆå¹¶</h3><p>Macä¸Šçš„æˆªå›¾å·¥å…·å·²ç»å¾ˆå¥½äº†ï¼Œ<code>Cmd + Shift + 3/4</code>å°±å¤Ÿç”¨äº†ï¼Œä½†æ˜¯å¦‚æœæƒ³åœ¨å›¾ç‰‡ä¸Šå†™äº›æ–‡å­—ï¼Œé©¬èµ›å…‹æŸéƒ¨åˆ†ï¼Œå°±ä¸è¡Œäº†ï¼Œæ¨èç”¨ Snipï¼Œæ‰ 2M å¤§å°ï¼Œè™½è¯´æ˜¯è…¾è®¯å¼€å‘çš„ï¼Œä½†æ˜¯ä¸æµæ°“ã€‚å¯ä»¥è®¾ç½®å¿«æ·é”®ï¼Œæˆ‘è®¾å®šçš„æ˜¯<code>Cmd + Shift + 6</code>ã€‚<br>æ›´é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼Œ<a href="http://snip.qq.com/" target="_blank" rel="external">Snip</a> å¯ä»¥è§£å†³Retinaä¸‹æˆªå±2xé—®é¢˜ï¼ˆå°±æ˜¯æˆªå‡ºæ¥çš„å›¾è¶…å¤§ï¼‰ï¼Œå°±å…‰è¿™ä¸ªç‰¹ç‚¹å°±è¶³ä»¥è®©ä½ ä½¿ç”¨snipã€‚</p>
<center><br><img width="500px" src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2UXoxbFXXXXXnXXXXXXXXXXXX_!!581166664.png" alt="æˆ‘çš„snipé…ç½®"><br></center><br>Macè‡ªå¸¦çš„ Preview å¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œæ—‹è½¬ã€è°ƒæ•´å¤§å°ã€æ·»åŠ æ–‡å­—ï¼Œä¸éœ€è¦åœ¨é¢å¤–å®‰è£…è½¯ä»¶ã€‚<br><center><br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2KtMobFXXXXXkXpXXXXXXXXXX_!!581166664.png" alt="Previewå·¥å…·æ "><br></center>

<p>æ­¤å¤–ï¼Œå¦‚æœè¦å¯¹ä¸¤å¼ å›¾ç‰‡è¿›è¡Œåˆå¹¶ï¼Œéœ€è¦é€šè¿‡å®‰è£… <a href="https://www.imagemagick.org" target="_blank" rel="external">ImageMagick</a>ï¼Œå¹¶ä¸”é€šè¿‡ä»¥ä¸‹å‘½ä»¤æ“ä½œï¼š<a href="http://apple.stackexchange.com/a/52882/103966" target="_blank" rel="external">å‡ºå¤„</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">brew install ImageMagick</div><div class="line"></div><div class="line"># ä¸‹é¢ä¸¤æ¡å‘½ä»¤éƒ½ä¼šæŠŠ left.png right.png åˆå¹¶åˆ° merged.png é‡Œé¢</div><div class="line">convert +append left.png right.png merged.png</div><div class="line"></div><div class="line">montage -geometry 100% left.jpg right.jpg merged.jpg</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ ä¾èµ–äºEvernoteï¼Œå¯ä»¥è¯•è¯•<a href="https://www.yinxiang.com/skitch/" target="_blank" rel="external">åœˆç‚¹</a>ï¼Œæ´‹åskitchï¼ŒåŒæ ·å¾ˆå¥½å¾ˆå¼ºå¤§ã€‚</p>
<h3 id="å½•å±-gif"><a href="#å½•å±-gif" class="headerlink" title="å½•å± gif"></a>å½•å± gif</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install licecap</div></pre></td></tr></table></figure>
<p>å¾ˆå¤šæ—¶å€™æˆ‘ä»¬éœ€è¦æŠŠè‡ªå·±çš„æ“ä½œå±•ç¤ºç»™åˆ«äººçœ‹ï¼Œæ¯”è¾ƒå¥½çš„åšæ³•æ˜¯é€šè¿‡å½•å±è½¯ä»¶å°†è‡ªå·±çš„æ“ä½œä¿å­˜æˆ gif æ ¼å¼çš„å›¾ç‰‡ã€‚<br><a href="https://github.com/lepht/licecap" target="_blank" rel="external">å¼€æºå…è´¹</a>çš„<a href="http://www.cockos.com/licecap/" target="_blank" rel="external">licecap</a> å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<p><img src="http://ww3.sinaimg.cn/mw690/5fee18eegw1f17799uiz1g20ci0cijs2.gif" alt="ä½¿ç”¨ licecap åˆ¶ä½œçš„ä¾‹å­"></p>
<h3 id="æµç¨‹å›¾åˆ¶ä½œå·¥å…·"><a href="#æµç¨‹å›¾åˆ¶ä½œå·¥å…·" class="headerlink" title="æµç¨‹å›¾åˆ¶ä½œå·¥å…·"></a>æµç¨‹å›¾åˆ¶ä½œå·¥å…·</h3><p>å¯¹äºç¨‹åºå‘˜æ¥è¯´ï¼Œæµç¨‹å›¾åº”è¯¥æ˜¯å†äº²åˆ‡ä¸è¿‡çš„äº†ï¼Œä¸€å¼ å›¾èƒœè¿‡åƒè¨€ä¸‡è¯­ã€‚ä¹‹å‰æˆ‘éƒ½æ˜¯ç”¨ Keynote æ¥ç”»ï¼Œä½†æ˜¯å®åœ¨æ˜¯ä¸å¥½ç”¨ï¼Œ<del>åæ¥åœ¨<a href="https://www.zhihu.com/question/19588698" target="_blank" rel="external">çŸ¥ä¹</a>ä¸Šå‘ç°äº†åœ¨çº¿ç‰ˆçš„<a href="https://www.processon.com/" target="_blank" rel="external">ProcessOn</a>ï¼Œå¤§å¤§å‡å°‘äº†æˆ‘ç”»æµç¨‹å›¾çš„æ—¶é—´ï¼Œä¸Šæ‰‹ä¹Ÿæ¯”è¾ƒå¿«ã€‚</del>ç°åœ¨ ProcessOn æœ‰äº†é™åˆ¶ï¼Œåªèƒ½ä¿ç•™ 9 å¼ æµç¨‹å›¾ã€‚æˆ‘åˆæ‰¾åˆ°äº†æ–°çš„å·¥å…·ï¼Œ<a href="https://www.draw.io" target="_blank" rel="external">draw.io</a>ï¼Œæ—¶åºå›¾ã€çŠ¶æ€å›¾ç»Ÿç»Ÿä¸åœ¨è¯ä¸‹ã€‚</p>
<p>å…¶æ¬¡ï¼Œå›½å¤–å¾ˆå¤šé¡¹ç›®çš„å›¾æ˜¯ç”¨çº¯æ–‡æœ¬ç”»çš„ï¼Œæ¯”è¾ƒå¥½ç”¨çš„åœ¨çº¿å·¥å…·æ˜¯ï¼š<a href="http://asciiflow.com/" target="_blank" rel="external">asciiflow</a>ã€‚</p>
<h3 id="Calibre-mobi-è½¬åŒ–å™¨"><a href="#Calibre-mobi-è½¬åŒ–å™¨" class="headerlink" title="Calibre mobi è½¬åŒ–å™¨"></a>Calibre mobi è½¬åŒ–å™¨</h3><p>å¦‚æœä½ æœ‰ Kinder é˜…è¯»å™¨ï¼Œé‚£ä¹ˆè¿™ä¸ªåº”è¯¥é€‚åˆä½ ï¼<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install calibre</div><div class="line"></div><div class="line">==&gt; Installing Cask calibre</div><div class="line">==&gt; Moving App &apos;calibre.app&apos; to &apos;/Applications/calibre.app&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre&apos; to &apos;/usr/local/bin/calibre&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-complete&apos; to &apos;/usr/local/bin/calibre-complete&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-customize&apos; to &apos;/usr/local/bin/calibre-customize&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-debug&apos; to &apos;/usr/local/bin/calibre-debug&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-parallel&apos; to &apos;/usr/local/bin/calibre-parallel&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-server&apos; to &apos;/usr/local/bin/calibre-server&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibre-smtp&apos; to &apos;/usr/local/bin/calibre-smtp&apos;.</div><div class="line">==&gt; Linking Binary &apos;calibredb&apos; to &apos;/usr/local/bin/calibredb&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-convert&apos; to &apos;/usr/local/bin/ebook-convert&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-device&apos; to &apos;/usr/local/bin/ebook-device&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-edit&apos; to &apos;/usr/local/bin/ebook-edit&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-meta&apos; to &apos;/usr/local/bin/ebook-meta&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-polish&apos; to &apos;/usr/local/bin/ebook-polish&apos;.</div><div class="line">==&gt; Linking Binary &apos;ebook-viewer&apos; to &apos;/usr/local/bin/ebook-viewer&apos;.</div><div class="line">==&gt; Linking Binary &apos;fetch-ebook-metadata&apos; to &apos;/usr/local/bin/fetch-ebook-metadata&apos;.</div><div class="line">==&gt; Linking Binary &apos;lrf2lrs&apos; to &apos;/usr/local/bin/lrf2lrs&apos;.</div><div class="line">==&gt; Linking Binary &apos;lrfviewer&apos; to &apos;/usr/local/bin/lrfviewer&apos;.</div><div class="line">==&gt; Linking Binary &apos;lrs2lrf&apos; to &apos;/usr/local/bin/lrs2lrf&apos;.</div><div class="line">==&gt; Linking Binary &apos;markdown-calibre&apos; to &apos;/usr/local/bin/markdown-calibre&apos;.</div><div class="line">==&gt; Linking Binary &apos;web2disk&apos; to &apos;/usr/local/bin/web2disk&apos;.</div></pre></td></tr></table></figure></p>
<h3 id="è§†é¢‘æ’­æ”¾å™¨ã€æˆªå–"><a href="#è§†é¢‘æ’­æ”¾å™¨ã€æˆªå–" class="headerlink" title="è§†é¢‘æ’­æ”¾å™¨ã€æˆªå–"></a>è§†é¢‘æ’­æ”¾å™¨ã€æˆªå–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install vlc</div></pre></td></tr></table></figure>
<p>Macä¸‹çš„è‡ªå¸¦çš„æ’­æ”¾å™¨QuickTimeï¼ŒåŠŸèƒ½å®åœ¨æ˜¯å¤ªå¼±äº†ï¼Œæ”¯æŒçš„æ ¼å¼æ—¢å°‘åˆéš¾ç”¨ï¼Œå¿«è¿›ä»€ä¹ˆçš„è²Œä¼¼éƒ½æ²¡å¿«æ·é”®ï¼Œåªèƒ½æ‰‹åŠ¨ç‚¹å‡»è¿›åº¦æ¡ï¼Œè¯•ç”¨äº†ä¸€æ®µæ—¶é—´çš„<a href="http://mplayerosx.ch/" target="_blank" rel="external">Mplayer</a>ï¼Œå‘ç°æ•ˆæœä¹Ÿä¸å¥½ï¼Œä¼šæœ‰è§†é¢‘å¡é¡¿çš„ç°è±¡ï¼Œæœ€ç»ˆé€‰æ‹©äº† <a href="http://www.videolan.org/vlc/download-macosx.html" target="_blank" rel="external">VLC</a>ï¼Œä¸€ç›´ç”¨çš„è¿˜ä¸é”™ã€‚<br>æ­¤å¤–ï¼Œ æœ‰ç½‘å‹è¡¥å……é“ <a href="https://mpv.io/" target="_blank" rel="external">mpv</a> æ‰æ˜¯ç¨‹åºå‘˜æœ€ä½³æ’­æ”¾å™¨ï¼Œå¤§å®¶ä¹Ÿå¯ä»¥å°è¯•ä¸‹ã€‚</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æˆªå–è§†é¢‘ä¸­çš„æŸä¸€æ®µè§†é¢‘ï¼Œæˆ–è€…ç®€å•çš„è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œè¿™æ—¶å€™å°±éœ€è¦ ffmpeg å‡ºé©¬äº†ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew  install ffmpeg</div><div class="line"></div><div class="line"># å°† mov æ ¼å¼çš„è§†é¢‘è½¬ä¸º mp4ï¼Œffmpeg èƒ½æ ¹æ®æ–‡ä»¶åç¼€åè‡ªåŠ¨è¯†åˆ«</div><div class="line">ffmpeg  -i foo.mov foo.mp4</div><div class="line"># ä»ç¬¬ 6 ç§’å¼€å§‹ï¼Œæˆªå–10s è§†é¢‘ï¼Œå¹¶ä¸”è½¬ä¸º mp4 æ ¼å¼</div><div class="line">ffmpeg -t 10 -ss 00:00:06 -i foo.mov smaller.mp4</div></pre></td></tr></table></figure></p>
<h3 id="éŸ³ä¹é¢‘æ’­æ”¾å™¨"><a href="#éŸ³ä¹é¢‘æ’­æ”¾å™¨" class="headerlink" title="éŸ³ä¹é¢‘æ’­æ”¾å™¨"></a>éŸ³ä¹é¢‘æ’­æ”¾å™¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install vox</div></pre></td></tr></table></figure>
<p>å®˜æ–¹çš„ iTunes å®åœ¨æ˜¯ä¸é€‚åº”ï¼Œå–œæ¬¢ç®€æ´æ¸…çˆ½çš„æœ‹å‹å¯ä»¥è¯•è¯• <a href="http://coppertino.com/" target="_blank" rel="external">VOX</a></p>
<h3 id="webarchive"><a href="#webarchive" class="headerlink" title="*.webarchive"></a>*.webarchive</h3><p>åœ¨windowsä¸‹ä¿å­˜ç½‘é¡µæ—¶ï¼Œå¦‚æœæƒ³æŠŠç½‘é¡µä¸Šçš„èµ„æºï¼Œæ¯”å¦‚cssã€jsã€imageç­‰ä¸€èµ·ä¸‹è½½ä¸‹æ¥ï¼Œä¼šå•ç‹¬ç”Ÿæˆä¸ªæ–‡ä»¶å¤¹ï¼Œä½†æ˜¯ç”¨ Mac ä¸Šçš„ Safari ä¿å­˜æ•´ä¸ªç½‘é¡µæ—¶ï¼Œæ˜¯ä»¥<code>webarchive</code>ä¸ºåç¼€åçš„æ–‡ä»¶è¿›è¡Œä¿å­˜çš„ï¼Œå¦‚ä½•æŠŠæ‰“å¼€è¿™ç§æ–‡ä»¶å‘¢ï¼Ÿæ¨èï¼š</p>
<p><a href="http://sourceforge.net/projects/webarchivext/" target="_blank" rel="external">http://sourceforge.net/projects/webarchivext/</a></p>
<h3 id="è™šæ‹Ÿæœº-Virtualbox"><a href="#è™šæ‹Ÿæœº-Virtualbox" class="headerlink" title="è™šæ‹Ÿæœº Virtualbox"></a>è™šæ‹Ÿæœº <a href="https://www.virtualbox.org/" target="_blank" rel="external">Virtualbox</a></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># å®‰è£…å‘½ä»¤</div><div class="line">brew cask install virtualbox</div></pre></td></tr></table></figure>
<p>åœ¨å¤©æœï¼Œå¾ˆå¤šç½‘ç«™æ˜¯åªæ”¯æŒ IE çš„ï¼ŒMac ä¸‹çš„ Firefox, Chrome, Safari è¿™æ—¶å€™éƒ½æ˜¾å¾—å¿ƒæœ‰åŠ›è€Œä¸è¶³äº†ï¼Œè€Œä¸”å¾ˆå¤šè½¯ä»¶ä¹Ÿåªæœ‰ Windows ç‰ˆï¼Œæ‰€ä»¥è£…ä¸ªè™šæ‹Ÿæœºæ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚ Virtualbox æ˜¯æˆ‘è‡ªç”¨ Ubuntu ä»¥æ¥ä¸€ç›´ç”¨çš„è™šæ‹Ÿæœºï¼Œå¼€æºå…è´¹ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i4/581166664/TB2aVGdcNlmpuFjSZPfXXc9iXXa_!!581166664.png" alt="Virtualbox"></p>
<h2 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h2><h3 id="ä¸èƒ½å†™-NTFS"><a href="#ä¸èƒ½å†™-NTFS" class="headerlink" title="ä¸èƒ½å†™ NTFS"></a>ä¸èƒ½å†™ NTFS</h3><p>ç”¨æƒ¯äº† Windows çš„å¤§å®¶éƒ½ä¹ æƒ¯ç”¨ NTFS æ–‡ä»¶ç³»ç»Ÿæ ¼å¼ï¼Œä½†æ˜¯å¾ˆé—æ†¾ï¼Œè¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿæ˜¯å¾®è½¯è‡ªå·±æå¾—ï¼Œä¸æ˜¯å¼€æ”¾çš„ï¼Œæ‰€ä»¥ Mac æ˜¯ä¸æ”¯æŒçš„ï¼Œå¦‚æœä½ ä»¥å‰çš„ NTFS æ ¼å¼çš„ç¡¬ç›˜æ”¾åˆ° Mac ä¸Šï¼Œä¼šå‘ç°åªèƒ½è¿›è¡Œè¯»æ“ä½œï¼Œä¸èƒ½å†™å…¥ï¼Œè¿™å±äºæ­£å¸¸ç°è±¡ï¼Œä¸è¦æƒŠæ…Œã€‚</p>
<p>è§£å†³çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠç§»åŠ¨ç¡¬ç›˜æ ¼å¼åŒ–æˆFAT32(å•ä¸ªæ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡4G)æˆ–FAText æ ¼å¼éƒ½å¯ä»¥ï¼ŒMac è‡ªå¸¦çš„ç£ç›˜å·¥å…·å°±å¯ä»¥è¿›è¡Œæ ¼å¼è½¬åŒ–ï¼Œå½“ç„¶ä½ éœ€è¦å…ˆæŠŠç§»åŠ¨ç¡¬ç›˜ä¸Šçš„æ•°æ®æ‹·è´å‡ºæ¥ã€‚</p>
<h3 id="Wi-Fi-æ—¶å¸¸ä¸­æ–­"><a href="#Wi-Fi-æ—¶å¸¸ä¸­æ–­" class="headerlink" title="Wi-Fi æ—¶å¸¸ä¸­æ–­"></a>Wi-Fi æ—¶å¸¸ä¸­æ–­</h3><p>Mac ç”Ÿäºä¹”å¸®ä¸»ä¹‹æ‰‹æ—¶ï¼Œä¸ºäº†å‡¸æ˜¾å°Šè´µï¼Œæ¥å£ä¸ä¸€èˆ¬çš„ç”µè„‘æœ‰å¾ˆå¤§ä¸åŒã€‚å¸¸è§çš„ç½‘çº¿æ²¡åŠæ³•ç›´æ¥è¿æ¥ Mac ç”µè„‘ï¼Œéœ€è¦å•ç‹¬è´­ä¹°ä¸€ä¸ª<a href="http://www.apple.com/cn/shop/product/MC704FE/A/apple-usb-ethernet-adapter" target="_blank" rel="external">ä»¥å¤ªç½‘è½¬æ¥å™¨</a>ï¼Œæ‰€ä»¥å¤§éƒ¨åˆ†åŒå­¦éƒ½æ˜¯ä½¿ç”¨æ— çº¿è¿æ¥ï¼Œä½† Mac è¿™é‡Œåº”è¯¥æ˜¯æœ‰ä¸ª bugï¼Œè€Œä¸”æ˜¯å¾ˆä¹…çš„ bugï¼Œæˆ‘ç”¨ Mac ä¸¤å¹´äº†ï¼Œå¶å°”ä¼šé‡åˆ°å‡ æ¬¡ï¼Œç½‘ä¸Šè§£å†³çš„æ–¹æ³•æœ‰å¦‚ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>ä¿®æ”¹ç½‘ç»œä½ç½®ï¼Œä¸æ˜¯å…¶é»˜è®¤çš„â€œè‡ªåŠ¨â€å°±å¥½</li>
<li>ä¿®æ”¹è·¯ç”±å™¨ï¼ŒæŠŠæ— çº¿ä¿¡é“æ”¹ä¸º6æˆ–9</li>
<li>å…³é—­è“ç‰™ï¼ŒMac ä¸­ï¼ŒåŒæ—¶æ‰“å¼€è“ç‰™ä¸ Wi-Fi ä¼šå†²çªã€‚<a href="http://apple.stackexchange.com/a/162406/103966" target="_blank" rel="external">è¯¦æƒ…</a></li>
</ol>
<p>å¦‚æœä½ çš„ Mac ä¹Ÿé‡åˆ°äº† Wi-Fi é—®é¢˜ï¼Œå¯ä»¥è¯•è¯•ä¸Šé¢ä¸‰ä¸ªè§£å†³æ–¹æ³•ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><blockquote>
<p>Once you get Mac, you never come back!</p>
</blockquote>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://havee.me/mac/2014-01/os-x-tips-and-tricks.html" target="_blank" rel="external">OS X çš„ä¸€äº›æŠ€å·§æ±‡æ€»</a></li>
</ul>
<h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul>
<li>2017/01/14ï¼Œå¢åŠ  emacsã€dashã€<code>brew cask</code>ã€<code>httpstat</code>ã€<code>m-cli</code></li>
<li>2017/06/03ï¼Œå¢åŠ  ffmpegã€asciiflow</li>
<li>2017/07/06ï¼Œä¿®æ”¹ iTerm2 éƒ¨åˆ†ï¼Œå¢åŠ  docker</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;MacBook å…¼å…·å‘½ä»¤è¡Œçš„é«˜æ•ˆä¸å›¾å½¢ç•Œé¢çš„é…·ç‚«ï¼Œå®åœ¨æ˜¯ç¨‹åºå‘˜å¿…å¤‡åˆ©å™¨ã€‚æœ¬æ–‡ä¸»è¦ä»‹ç»æˆ‘åœ¨ä¸¤å¹´çš„ä½¿ç”¨è¿‡ç¨‹ä¸­æ€»ç»“å‡ºçš„ä¸€äº›æœ€ä½³å®è·µï¼Œä¾›å¤§å®¶å‚è€ƒã€å€Ÿé‰´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://dn-mhke0kuv.qbox.me/cb49a18efb421a9624c
    
    </summary>
    
    
      <category term="æœ€ä½³å®è·µ" scheme="http://liujiacai.net/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    
  </entry>
  
  <entry>
    <title>è®©firefoxä¸chromeä¸€æ ·å¿«</title>
    <link href="http://liujiacai.net/blog/2014/11/08/secret-of-firefox-prefs/"/>
    <id>http://liujiacai.net/blog/2014/11/08/secret-of-firefox-prefs/</id>
    <published>2014-11-08T12:23:53.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨å¦‚ä»Šè¿™ä¸ªWebæ—¶ä»£ï¼Œæµè§ˆå™¨å¯ä»¥è¯´æ˜¯ä»…æ¬¡äºæ“ä½œç³»ç»Ÿçš„è½¯ä»¶äº†ï¼Œå„ç§åº”ç”¨éƒ½å¯ä»¥æ”¾åˆ°äº‘ç«¯ã€ç§»åŠ¨ç«¯éšæ—¶éšåœ°çš„ä½¿ç”¨ï¼Œ<a href="http://www.w3.org/TR/html5/" target="_blank" rel="external">HTML5æ ‡å‡†</a>çš„æœ€ç»ˆç‰ˆæ­£å¼<a href="http://www.w3.org/blog/news/archives/4167" target="_blank" rel="external">å‘å¸ƒ</a>ï¼Œ å†æ¬¡ä¸ºä½¿ç”¨WebæŠ€æœ¯å¼€å‘è·¨å¹³å°åº”ç”¨å¥ å®šäº†åŸºçŸ³ã€‚</p>
<p>HTML5ç°åœ¨æ˜¯æœ‰ç»Ÿä¸€æ ‡å‡†äº†ï¼Œä½†ç”¨æˆ·ä½¿ç”¨çš„æµè§ˆå™¨å¯æ˜¯äº”èŠ±å…«é—¨äº†ï¼Œèº«ä¸ºç¨‹åºå‘˜ï¼ŒIEå¯ä»¥å¿½ç•¥ï¼Œä¸€èˆ¬linuxä¸‹å°±æ˜¯chromeä¸firefoxï¼Œchromeå¿«æ˜¯å¿«ï¼Œå°±æ˜¯å¤ªåƒå†…å­˜ï¼Œæ‰€ä»¥åœ¨ä¸€äº›â€è€æœºå™¨â€œä¸Šä¸æ•¢ç”¨ï¼Œä¸‹é¢å°±å‰©ä¸‹firefoxäº†ï¼Œå…¶å®æˆ‘è‡ªä»çœ‹äº†ã€ŠCode Rushã€‹è¿™ä¸ªè®°å½•ç‰‡ä»¥åï¼Œååˆ†å´‡æ‹œä¸Šä¸ªä¸–çºªæœ‰é‚£ä¹ˆä¸€ç¾¤æå®¢èšåœ¨ä¸€èµ·ï¼Œå¼€å‘äº†å¾ˆå¤šä¿ƒè¿›äº†äº’è”ç½‘å‘å±•çš„æŠ€æœ¯ï¼Œä»¥å‰æˆ‘ä¹Ÿå†™çš„æ–‡ç« <a href="/blog/2014/09/14/mozilla-history/">ã€ŠMozillaå‰ä¸–ä»Šç”Ÿã€‹</a>è¯´è¿‡ï¼Œè¿™é‡Œå°±ä¸åœ¨å¤šè¯´äº†ã€‚</p>
<p>ä½†æ˜¯ä¸å¾—ä¸è¯´çš„æ˜¯firefoxç¡®å®æ¯”chromeæ…¢ï¼Œæœ‰æ—¶å€™æ„Ÿè§‰chromeåªéœ€è¦ä¸€çœ¨çœ¼å°±èƒ½æ‰“å¼€çš„ç½‘é¡µï¼Œè€Œfirefoxå´è¦ç­‰ä¸Šé‚£ä¹ˆ3ã€4ç§’ï¼Œæˆ‘çœŸæ˜¯æ— æ³•å¿å—äº†ã€‚è¶ç€è¿™å‡ å¤©å¼€å‘<a href="/gooreplacer/">gooreplacer</a>è¿™ä¸ªæ’ä»¶ï¼Œåˆæ·±å…¥äº†è§£äº†ä¸‹firefoxä¸€äº›å·¥ä½œæœºåˆ¶ï¼Œå‘ç°æˆ‘ä»¬å¯ä»¥åœ¨ä¸å‡çº§å†…å­˜çš„æƒ…å†µä¸‹åŠ é€Ÿfirefoxæ‰“å¼€ç½‘é¡µçš„æ—¶é—´ï¼Œæˆ‘è‡ªå·±äº²è‡ªå®éªŒäº†ä¸‹ï¼Œé€Ÿåº¦ç¡®å®æäº†ä¸å°‘ï¼Œç°ä¸å¤§å®¶åˆ†äº«ä¹‹ã€‚</p>
<p>firefoxçš„é…ç½®æˆ‘ä»¬ä¸€èˆ¬å¯ä»¥åœ¨â€å·¥å…· -&gt; é€‰é¡¹â€œèœå•ä¸­æ‰¾åˆ°ï¼Œä½†æ˜¯è¿˜æœ‰ä¸€äº›é…ç½®é¡¹å¹¶ä¸åœ¨è¿™é‡Œï¼Œåœ¨firefoxä¸­åœ°å€æ è¾“å…¥about:configï¼Œå›è½¦ï¼Œè¿›å…¥æ—¶åº”è¯¥ä¼šæœ‰ä¸ªè­¦å‘Šï¼Œå¿½ç•¥ä¹‹ï¼Œä¹‹åå°±åº”è¯¥èƒ½çœ‹åˆ°å¾ˆå¤šå¦‚ä¸‹çš„é…ç½®é¡¹äº†ã€‚</p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2L8ImaVXXXXcqXpXXXXXXXXXX_!!581166664.png" alt=" about-configæˆªå›¾"></p>
<p>è¿™äº›é…ç½®é¡¹å®šä¹‰äº†å¾ˆå¤šæµè§ˆå™¨çš„çš„é»˜è®¤å‚æ•°ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªå·±æ·»åŠ ã€‚ä½¿ç”¨ä¸Šæ–¹çš„æœç´¢è¾“å…¥æ¡†æˆ‘ä»¬èƒ½å¤Ÿå¾ˆå®¹æ˜“åœ°æ‰¾åˆ°æ„Ÿå…´è¶£çš„é…ç½®é¡¹ã€‚è¿™é‡Œçš„é…ç½®é¡¹ç±»å‹åˆ†ä¸‰ç§ï¼šintegerã€booleanã€stringã€‚è¿™äº›é…ç½®é¡¹ä¿å­˜åœ¨æœ¬åœ°ä¸€ä¸ªå«prefs.jsçš„æ–‡ä»¶ä¸­ï¼Œprefs.jsæ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒä½ç½®ä¸åŒï¼š</p>
<ul>
<li>Linxuä¸‹ï¼Œåœ¨<code>~/.mozilla/firefox/&lt;profile ID&gt;.default/</code>ä¸­</li>
<li>WinXPä¸‹ï¼Œåœ¨<code>C:\Documents and Settings\&lt;username&gt;\Application Data\Mozilla\Firefox\Profiles\&lt;profile ID&gt;.default\</code>ä¸­</li>
</ul>
<p>éœ€è¦è¯´æ˜ä¸€ç‚¹çš„æ˜¯ï¼Œæˆ‘ä»¬æœ€å¥½ä¸è¦ç›´æ¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œå¦‚æœéä¿®æ”¹ä¸å¯ï¼Œ<strong>æœ€å¥½äº‹å…ˆå¤‡ä»½ä¸€ä»½</strong>ã€‚<br>å¦‚æœä½ æƒ³æ‰¾åˆ°ä½ æœºå™¨ä¸Šprefs.jsæ–‡ä»¶åœ¨å“ªé‡Œï¼Œä½¿ç”¨æ“ä½œç³»ç»Ÿè‡ªå¸¦çš„æœç´¢åŠŸèƒ½å°±å¥½äº†ã€‚linuxä¸Šå¯ä»¥ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼š</p>
<pre><code>find ~/.mozilla/firefox | grep prefs.js
</code></pre><p>ä¸‹é¢é‡ç‚¹è¯´ä¸€äº›èƒ½å¤Ÿæ”¹å–„ç”¨æˆ·ä½“éªŒçš„é…ç½®é¡¹ã€‚<br>äº‹å…ˆè¯´æ˜ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œåªä»‹ç»äº†å¾ˆå°ä¸€éƒ¨åˆ†é…ç½®é¡¹ï¼Œæ›´å¤šçš„é…ç½®é¡¹ä»¥åŠæ¯ä¸ªé…ç½®é¡¹çš„å«ä¹‰å¤§å®¶å¯ä»¥åœ¨<a href="http://kb.mozillazine.org/Category:Preferences" target="_blank" rel="external">mozillazine</a>ä¸­æ‰¾åˆ°ã€‚</p>
<p>##æ¸²æŸ“(render)ç›¸å…³</p>
<p>###å‡å°‘æ¸²æŸ“å»¶è¿Ÿ<br>åˆ›å»ºä¸€ä¸ªæ•´å‹é…ç½®é¡¹<code>nglayout.initialpaint.delay</code>ï¼Œè¿™ä¸ªé…ç½®å®šä¹‰äº†firefoxåœ¨ä¸‹è½½å®ŒHTMLã€CSSç­‰èµ„æºåï¼Œåˆ°çœŸæ­£å¼€å§‹æ¸²æŸ“çš„æ—¶é—´é—´éš”ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä¸º250æ¯«ç§’ã€‚å¦‚æœè®¾ç½®ä¸º0,å°±èƒ½åœ¨ä½¿æµè§ˆå™¨ç«‹å³æ¸²æŸ“äº†ã€‚</p>
<p>åé¢æœ‰ç»†å¿ƒçš„è¯»è€…ç–‘é—®ä¸ºä»€ä¹ˆè¦æœ‰è¿™ä¸ªå»¶è¿Ÿï¼Œå»çœ‹<a href="http://kb.mozillazine.org/Nglayout.initialpaint.delay" target="_blank" rel="external">å®˜æ–¹è§£é‡Š</a>å°±å¾ˆæ¸…æ¥šäº†:</p>
<blockquote>
<p>Since the start of a web page normally doesnâ€™t have much useful information to display, Mozilla applications will wait a short interval before first rendering a page.</p>
</blockquote>
<p>###å‡å°‘reflowæ¬¡æ•°<br>å½“firefoxåŠ è½½ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œå®ƒä¼šåœ¨åŠ è½½è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®åŠ è½½çš„æ•°æ®ï¼Œä¸é—´æ–­çš„å¯¹é¡µé¢è¿›è¡Œ<a href="http://www.blueidea.com/tech/web/2007/4950.asp" target="_blank" rel="external">reflow</a>ã€‚åˆ›å»ºä¸€ä¸ªæ•´å‹é…ç½®é¡¹<code>content.notify.interval</code>ï¼Œå®ƒèƒ½å¤Ÿæ§åˆ¶ä¸¤æ¬¡reflowçš„é—´éš”ï¼Œå®ƒçš„å•ä½æ˜¯å¾®ç§’ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œé»˜è®¤ä¸º120000ï¼ˆå³0.12ç§’ï¼‰ã€‚å¦‚æœreflowæ¬¡æ•°è¿‡å¤šï¼Œå°±ä¼šä½¿å¾—æµè§ˆå™¨ååº”è¿Ÿé’äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬åº”è¯¥æŠŠè¿™ä¸ªå€¼è®¾çš„å¤§äº›ï¼Œ500000ï¼ˆå³0.5ç§’ï¼‰æˆ–1000000ï¼ˆå³1ç§’ï¼‰éƒ½å¯ä»¥ã€‚<br>éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼Œå¦‚æœè¦æ˜¯<code>content.notify.interval</code>è¿™ä¸ªé…ç½®é¡¹ç”Ÿæ•ˆï¼Œéœ€è¦å…ˆåˆ›å»ºä¸€ä¸ªå¸ƒå°”å‹çš„é…ç½®é¡¹<code>content.notify.ontimer</code>ï¼Œå¹¶ä¸”è®¾ä¸ºtrueã€‚<br>å…¶æ¬¡å¯ä»¥é€šè¿‡è®¾ç½®ä¸€ä¸ªæ•´å‹é…ç½®é¡¹<code>content.notify.backoffcount</code>æ§åˆ¶reflowæ‰§è¡Œçš„æœ€å¤§æ¬¡æ•°ï¼Œæˆ‘è¿™é‡Œè®¾ä¸º5ã€‚</p>
<p>###æ§åˆ¶â€ä¸å“åº”â€œæ—¶é—´<br>åœ¨æ¸²æŸ“ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œfirefoxä¼šé—´æ­‡æ€§åœ°åŠ é€Ÿæ¸²æŸ“è¿‡ç¨‹ï¼Œmozillaç§°ä¹‹ä¸ºtokenizingã€‚ä½†æ˜¯è¿™ä¸ªåŠ é€Ÿæ˜¯æœ‰ä»£ä»·çš„ï¼Œåœ¨tokenizingè¿‡ç¨‹ä¸­ï¼Œæµè§ˆå™¨ä¸èƒ½å“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œtokenizingçš„æ—¶é—´é•¿åº¦æ˜¯ç”±ä¸€ä¸ªæ•´å‹é…ç½®é¡¹<code>content.max.tokenizing.time</code>æ§åˆ¶çš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒæŠŠè¿™ä¸ªé…ç½®é¡¹çš„å€¼è®¾ä¸º<code>content.notify.interval</code>å€¼æˆ–è€…å®ƒçš„å€æ•°ã€‚å¦‚æœ<code>content.max.tokenizing.time</code>çš„å€¼å°äº<code>content.notify.interval</code>çš„å€¼ï¼Œæµè§ˆå™¨å°±ä¼šå› ä¸ºè¿‡å¤šå“åº”ç”¨æˆ·è¾“å…¥è€Œå¯¼è‡´æ•´ä¸ªåŠ è½½è¿‡ç¨‹å˜æ…¢ã€‚<br>éœ€è¦æ³¨æ„ä¸€ç‚¹çš„æ˜¯ï¼Œå¦‚æœè¦æ˜¯<code>content.max.tokenizing.time</code>è¿™ä¸ªé…ç½®é¡¹ç”Ÿæ•ˆï¼Œéœ€è¦å…ˆåˆ›å»ºä¸¤ä¸ªä¸ªå¸ƒå°”å‹çš„é…ç½®é¡¹<code>content.notify.ontimer</code>ä¸<code>content.interrupt.parsing</code>ï¼Œå¹¶ä¸”éƒ½è®¾ä¸ºtrueã€‚</p>
<p>###æ§åˆ¶â€é«˜å“åº”â€œæ—¶é—´<br>åœ¨æ¸²æŸ“ä¸€ä¸ªé¡µé¢æ—¶ï¼Œç”¨æˆ·å¦‚æœè¿›è¡Œäº†æŸäº›æ“ä½œï¼ˆæ¯”å¦‚å‘ä¸‹æ»šåŠ¨ï¼‰æ—¶ï¼Œfirefoxä¼šé¢„ç•™æ›´å¤šçš„æ—¶é—´æ¥å“åº”ç”¨æˆ·çš„è¾“å…¥ï¼Œè¿™é‡Œçš„æ—¶é—´é—´éš”æ˜¯ç”±ä¸€ä¸ªæ•´å‹é…ç½®é¡¹<code>content.switch.threshold</code>è®¾ç½®çš„ã€‚å®ƒçš„å€¼ä¸€èˆ¬æ˜¯<code>content.notify.interval</code>çš„ä¸‰å€ï¼Œ  ä½†æ˜¯å¦‚æœæˆ‘ä»¬æŠŠè¿™ä¸ªå€¼è°ƒå°äº›ï¼Œè¿™æ—¶firefoxè™½ç„¶å¯¹ç”¨æˆ·çš„å“åº”ä¸ä¼šé‚£ä¹ˆåŠæ—¶ï¼Œä½†æ˜¯ä¼šæ˜æ˜¾åŠ é€Ÿé¡µé¢çš„æ¸²æŸ“è¿‡ç¨‹ã€‚<br>å¦‚æœä½ å€¾å‘äºåœ¨ç½‘é¡µåŠ è½½å®Œæˆååœ¨è¿›è¡Œæ“ä½œï¼ˆæ¯”å¦‚å‘ä¸‹æ»šåŠ¨ï¼‰ï¼Œå¯ä»¥æŠŠ<code>content.max.tokenizing.time</code>å€¼è®¾çš„å¤§äº›ï¼Œ<code>content.switch.threshold</code>å€¼è®¾çš„å°äº›ï¼›</p>
<p>##ç½‘ç»œ(network)ç›¸å…³</p>
<p>ä¸ç½‘ç»œç›¸å…³çš„å‚æ•°ä¸€æ ·è¦æ…é‡è®¾ç½®ï¼Œå¦åˆ™ä½ çš„CPUä¼šé£™å‡åˆ°90%ä»¥ä¸Šã€‚ã€‚ã€‚</p>
<h3 id="pipelining"><a href="#pipelining" class="headerlink" title="pipelining"></a>pipelining</h3><p>æŠŠ<code>network.http.pipelining</code>ä¸<code>network.http.proxy.pipelining</code>è®¾ç½®ä¸ºtrue<br><code>network.http.pipelining.maxrequests</code>å¯æ ¹æ®å®é™…æƒ…å†µè®¾ç½®ï¼Œæˆ‘ç”µè„‘ä¸Šæ˜¯é»˜è®¤å€¼32.</p>
<h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>æŠŠ<code>network.dns.disableIPv6</code>è®¾ä¸ºtrueï¼Œå› ä¸ºç°åœ¨çš„ç½‘ç«™éƒ½æ˜¯ipv4,æ²¡å¬è¿‡é‚£ä¸ªç½‘ç«™æ˜¯v6çš„ã€‚<br><code>network.dnsCacheEntries</code>ï¼Œè¿™ä¸ªè®¾ç½®firefoxæœ€å¤šä¿å­˜dnsçš„æ•°ç›®ï¼Œå¯æ ¹æ®ä¸ªäººæƒ…å†µè®¾ç½®ï¼Œæˆ‘ç”µè„‘ä¸Šchromeå¤§çº¦ç¼“å­˜äº†1500å¤šä¸ªï¼Œè¿™æ˜¯chromeå¿«çš„åŸå› ä¹‹ä¸€ã€‚<br><code>network.dnsCacheExpiration</code>ï¼Œdnsçš„æœ‰é™æœŸé™ï¼Œå•ä½ä¸ºç§’ï¼Œå¯æ ¹æ®ä¸ªäººæƒ…å†µè®¾ç½®ã€‚</p>
<p>###å…¶ä»–</p>
<p>ä¸ç½‘ç»œç›¸å…³çš„é…ç½®é¡¹è¿˜æœ‰å¾ˆå¤šéƒ½æ˜¯ä»¥<code>network.http.</code>ï¼Œå¤§å®¶å¯è‡ªè¡Œä¿®æ”¹ä¹‹ã€‚</p>
<p>##å†…å­˜ï¼ˆmemoryï¼‰ç›¸å…³</p>
<h3 id="å¢å¤§ç¼“å­˜ç©ºé—´"><a href="#å¢å¤§ç¼“å­˜ç©ºé—´" class="headerlink" title="å¢å¤§ç¼“å­˜ç©ºé—´"></a>å¢å¤§ç¼“å­˜ç©ºé—´</h3><p>è¿™é‡Œè¯´çš„ç¼“å­˜ç©ºé—´å¯ä»¥ç”¨æ¥ç¼“å­˜ç½‘é¡µä¸­çš„å›¾ç‰‡ç­‰èµ„æºï¼Œæ•´å‹é…ç½®é¡¹<code>browser.cache.memory.capacity</code>è®¾ç½®äº†ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œå•ä½ä¸ºKBï¼Œå¤§å®¶æ ¹æ®è‡ªå·±éœ€æ±‚ä¿®æ”¹å³å¯ã€‚<br>æ•´å‹é…ç½®é¡¹<code>browser.cache.memory.max_entry_size</code>è®¾ç½®äº†æœ€å¤§ç¼“å­˜èµ„æºæ•°ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¦æ˜¯ä¸Šé¢ä¸¤ä¸ªé…ç½®é¡¹ç”Ÿæ•ˆï¼Œéœ€è¦æŠŠå¸ƒå°”å‹é…ç½®é¡¹<code>browser.cache.memory.enable</code>è®¾ç½®ä¸ºtrueã€‚</p>
<p>æŸ¥çœ‹å½“å‰firefoxä½¿ç”¨ç¼“å­˜çš„æƒ…å†µï¼Œå¯ä»¥åœ¨åœ°å€æ è¾“å…¥<code>about:cache?device=memory</code> æŸ¥çœ‹ã€‚</p>
<h3 id="å‡å°‘å†å²è®°å½•"><a href="#å‡å°‘å†å²è®°å½•" class="headerlink" title="å‡å°‘å†å²è®°å½•"></a>å‡å°‘å†å²è®°å½•</h3><p>firefoxä¼šæŠŠæˆ‘ä»¬å·²ç»è®¿é—®è¿‡å¾—ç½‘é¡µç¼“å­˜èµ·æ¥ï¼Œè¿™æ ·æ˜¯åŠ é€Ÿæˆ‘ä»¬ä¸‹æ¬¡æ‰“å¼€çš„é€Ÿåº¦ï¼Œä½†æ˜¯é»˜è®¤çš„å‚æ•°æœ‰äº›ç²—æš´äº†ï¼Œå¯ä»¥é€‚å½“ä¿®æ”¹ï¼Œæ¯•ç«Ÿè¿™äº›ä¸œè¥¿éƒ½æ˜¯å ç”¨å†…å­˜çš„ã€‚ä¸»è¦æœ‰ä¸‹é¢ä¸‰ä¸ªï¼ˆå¦‚æœæŸä¸ªé…ç½®é¡¹ä¸å­˜åœ¨ï¼Œå°±ç”¨çš„æ˜¯é»˜è®¤å€¼ï¼‰ï¼š</p>
<ul>
<li><code>browser.history_expire_days</code>è¿™ä¸ªé…ç½®é¡¹è®¾ç½®ç¼“å­˜å¤±æ•ˆçš„æ—¶é—´ï¼Œé»˜è®¤ä¸º180ï¼Œå¯ä»¥æ”¹ä¸º5å¤©ã€‚</li>
<li><code>browser.history_expire_days_min</code>å¾ˆæ˜æ˜¾ï¼Œè¿™æ˜¯ä¸ªé…ç½®é¡¹é™åˆ¶äº†æœ€å°çš„å¤±æ•ˆå¤©æ•°ï¼Œé»˜è®¤90ï¼Œå¯æ”¹ä¸º5</li>
<li><code>browser.history_expire_sites</code>è¿™ä¸ªé…ç½®é¡¹å†³å®šäº†ï¼Œå†å²è®°å½•ä¸­å¯ä»¥æœ€å¤šå­˜å‚¨å¤šå°‘ä¸ªç½‘ç«™ï¼Œé»˜è®¤ä¸º20000ï¼Œè¿˜æ˜¯è§‰å¾—æœ‰äº›å¤§äº†ï¼Œå¯æ”¹ä¸º500</li>
</ul>
<h2 id="å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰"><a href="#å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰" class="headerlink" title="å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰"></a>å³æ—¶ç¼–è¯‘ï¼ˆJITï¼‰</h2><p>è¿™é‡Œçš„JITä¸»è¦æŒ‡çš„æ˜¯JavaScriptï¼Œæˆ‘é¦–æ¬¡æ¥è§¦JITè¿˜æ˜¯åœ¨Javaä¸Šï¼Œæ–°ç‰ˆAndroidä¸ä¹Ÿæ˜¯é€šè¿‡JITæ¥æé«˜ç³»ç»Ÿçš„è¿è¡Œé€Ÿåº¦å˜›ã€‚<br>firefoxçš„JITæ˜¯é€šè¿‡<a href="https://wiki.mozilla.org/JavaScript:TraceMonkey" target="_blank" rel="external">TraceMonkey</a>è¿™ä¸ªJavaScriptå¼•æ“å®ç°çš„ï¼Œè¿™é‡Œä¸»è¦æœ‰ä¸¤ä¸ªå¸ƒå°”å‹é…ç½®é¡¹ï¼š</p>
<ul>
<li><code>javascript.options.jit.content</code>ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ç”¨æ¥JITç½‘é¡µä¸­çš„JSçš„ï¼Œè²Œä¼¼é»˜è®¤å°±æ˜¯true</li>
<li><code>javascript.options.jit.chrome</code>ï¼Œè¿™ä¸ªä¸»è¦æ˜¯ç”¨æ¥JITæ‰©å±•ï¼ˆXUL/chromeï¼‰ä¸­çš„JSçš„ï¼Œé»˜è®¤å¥½åƒæ²¡æœ‰è¿™ä¸ªé…ç½®é¡¹ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œè®¾ç½®ä¸ºtrueã€‚</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘å‘ç°firefoxæ¯”chromeæ…¢çš„åŸå› æ˜¯ï¼Œå¾ˆå¤šé…ç½®é¡¹firefoxè®¾ç½®çš„æ¯”è¾ƒä¿å®ˆï¼Œè¿™ä¹ˆåšæ— éæ˜¯ç…§é¡¾ä¸€äº›â€œè€æœºå™¨â€äº†ï¼ŒæŠŠæ›´å¤šçš„é€‰æ‹©æƒäº¤ç»™äº†ç”¨æˆ·ï¼›chromeçš„é»˜è®¤é…ç½®å°±æ¯”è¾ƒç®€å•æš´åŠ›äº†ï¼Œå…‰æ˜¯separate-process-per-tabè¿™ä¸ªå°±æŠŠå¤§å®¶ç”µè„‘çš„å†…å­˜å ç”¨äº†å¤§åŠã€‚Firefoxçš„<a href="https://wiki.mozilla.org/Electrolysis" target="_blank" rel="external">E10 projectä¹Ÿç§°Electrolysis</a>å…¶å®ä¹Ÿå¯¹è¿™é¡¹æŠ€æœ¯æä¾›äº†æ”¯æŒï¼Œä½†æ˜¯åªåœ¨<a href="http://nightly.mozilla.org/" target="_blank" rel="external">nightly</a>ç‰ˆæœ¬ä¸Šå¯ç”¨ï¼Œå› ä¸ºè¿™ä¸ªæŠ€æœ¯ä¼šå¯¼è‡´<a href="https://developer.mozilla.org/en-US/Add-ons/Working_with_multiprocess_Firefox" target="_blank" rel="external">å¾ˆå¤šæ’ä»¶æ— æ³•ä½¿ç”¨</a>ï¼Œæ‰€æœ‰æ²¡æœ‰é›†æˆåˆ°æ­£å¼ç‰ˆä¸Šï¼Œfirefoxæ›´çœ‹é‡è½¯ä»¶çš„å…¼å®¹æ€§ã€‚<br>å…¶å®chromeè‡ª2008å¹´9æœˆå‘å¸ƒï¼Œåœ¨å¾ˆçŸ­çš„æ—¶é—´å†…å°±è¶…è¿‡äº†firefoxçš„å¸‚åœºä»½é¢ï¼Œç©¶å…¶åŸå› å°±æ˜¯é¡ºåº”äº†å¤§å®¶å¯¹â€œç”¨æˆ·ä½“éªŒâ€çš„è¿½æ±‚ï¼Œç¡¬ä»¶å‡çº§ç°åœ¨å¾ˆç®€å•ï¼Œä¹°ä¸ªå†…å­˜æ¡ä¹Ÿå¾ˆä¾¿å®œï¼›è€Œä»ä¸Šä¸ªä¸–çºªèµ°è¿‡æ¥çš„firefoxï¼Œç›¸æ¯”ä¹‹ä¸‹æ˜¾å¾—ä¿å®ˆäº†ï¼Œè¿™ä¹Ÿå¯ä»¥ç†è§£ï¼Œæ¯•ç«Ÿæ—©æœŸå¤§å®¶çš„ç”µè„‘é…ç½®éƒ½ä¸é«˜ã€‚å¤§å®¶æœ‰å…´è¶£çš„å¯ä»¥å»çœ‹çœ‹<a href="https://www.mozilla.org/en-US/firefox/releases/" target="_blank" rel="external">Firefox Release Notes</a>äº†è§£Firefoxçš„ç‰ˆæœ¬æ›´æ–°ä¿¡æ¯ã€‚</p>
<p>Happy Hackingï¼</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="http://www.computerworld.com/article/2541429/networking/hacking-firefox--the-secrets-of-about-config.html" target="_blank" rel="external">Hacking Firefox: The secrets of about:config</a></li>
<li><a href="http://wikimatze.de/making-firefox-as-fast-as-chrome/" target="_blank" rel="external">Making Firefox as Fast as Chrome</a></li>
<li><a href="https://www.wikivs.com/wiki/Chrome_vs_Firefox" target="_blank" rel="external">Chrome_vs_Firefox</a></li>
<li><a href="http://www.quora.com/Mozilla-Firefox-Why-hasnt-firefox-adopted-a-chrome-like-model-of-having-each-tab-as-a-separate-process" target="_blank" rel="external">Why-hasnt-firefox-adopted-tab-as-a-separate-process-like-chrome</a></li>
<li><a href="https://areweslimyet.com/" target="_blank" rel="external">Firefox memory benchmark</a></li>
<li><a href="http://www.kuqin.com/shuoit/20091006/70402.html" target="_blank" rel="external">å¦‚ä½•ä¼˜åŒ–Firefoxæ‰èƒ½æ¯”Chromeæ›´å¿«</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨å¦‚ä»Šè¿™ä¸ªWebæ—¶ä»£ï¼Œæµè§ˆå™¨å¯ä»¥è¯´æ˜¯ä»…æ¬¡äºæ“ä½œç³»ç»Ÿçš„è½¯ä»¶äº†ï¼Œå„ç§åº”ç”¨éƒ½å¯ä»¥æ”¾åˆ°äº‘ç«¯ã€ç§»åŠ¨ç«¯éšæ—¶éšåœ°çš„ä½¿ç”¨ï¼Œ&lt;a href=&quot;http://www.w3.org/TR/html5/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HTML5æ ‡å‡†&lt;/a&gt;çš„æœ€ç»ˆç‰ˆ
    
    </summary>
    
    
      <category term="mozilla" scheme="http://liujiacai.net/tags/mozilla/"/>
    
      <category term="æœ€ä½³å®è·µ" scheme="http://liujiacai.net/tags/%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–ç¨‹è¯­è¨€çš„åŸºçŸ³â€”â€”Lambda calculus</title>
    <link href="http://liujiacai.net/blog/2014/10/12/lambda-calculus-introduction/"/>
    <id>http://liujiacai.net/blog/2014/10/12/lambda-calculus-introduction/</id>
    <published>2014-10-12T02:16:42.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>Lambda calculusæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º<a href="http://en.wikipedia.org/wiki/Lambda_calculus" target="_blank" rel="external">Î»æ¼”ç®—</a>ï¼Œæœ€æ—©æ˜¯ç”±<a href="http://en.wikipedia.org/wiki/Alonzo_Church" target="_blank" rel="external">é‚±å¥‡ï¼ˆAlonzo Churchï¼Œå›¾çµçš„åšå¯¼ï¼‰</a>åœ¨20ä¸–çºª30å¹´ä»£å¼•å…¥ï¼Œå½“æ—¶çš„èƒŒæ™¯æ˜¯è§£å†³<a href="http://en.wikipedia.org/wiki/Computable_function" target="_blank" rel="external">å‡½æ•°å¯è®¡ç®—çš„æœ¬è´¨</a>æ€§é—®é¢˜ï¼ŒåˆæœŸÎ»æ¼”ç®—æˆåŠŸçš„è§£å†³äº†åœ¨å¯è®¡ç®—ç†è®ºä¸­çš„<a href="http://en.wikipedia.org/wiki/Entscheidungsproblem" target="_blank" rel="external">åˆ¤å®šæ€§é—®é¢˜</a>ï¼Œåæ¥æ ¹æ®<a href="http://en.wikipedia.org/wiki/Church%E2%80%93Turing_thesis" target="_blank" rel="external">Churchâ€“Turing thesis</a>ï¼Œè¯æ˜äº†Î»æ¼”ç®—ä¸å›¾çµæœºæ˜¯ç­‰ä»·çš„ã€‚</p>
<p>å¥½äº†ï¼Œç»è¿‡ä¸Šè¾¹ç®€å•çš„ä»‹ç»ï¼Œå¤§å®¶åº”è¯¥å¯¹Î»æ¼”ç®—æœ‰äº†åˆæ­¥å°è±¡ã€‚ä¸‹é¢æˆ‘å°†é‡ç‚¹ä»‹ç»Î»æ¼”ç®—çš„å…·ä½“å†…å®¹ï¼Œå¹¶ä¸”é˜è¿°Î»æ¼”ç®—æ˜¯å¦‚ä½•å¥ åŸºäº†æˆ‘ä»¬ç°åœ¨å¸¸ç”¨çš„ç¼–ç¨‹è¯­è¨€ï¼ˆå¦‚ï¼šJavaã€pythonã€Lispç­‰ï¼‰ã€‚</p>
<h2 id="Î»æ¼”ç®—çš„è¯­æ³•ä¸æ±‚å€¼"><a href="#Î»æ¼”ç®—çš„è¯­æ³•ä¸æ±‚å€¼" class="headerlink" title="Î»æ¼”ç®—çš„è¯­æ³•ä¸æ±‚å€¼"></a>Î»æ¼”ç®—çš„è¯­æ³•ä¸æ±‚å€¼</h2><h3 id="è¯­æ³•-syntax"><a href="#è¯­æ³•-syntax" class="headerlink" title="è¯­æ³•(syntax)"></a>è¯­æ³•(syntax)</h3><p>å› ä¸ºÎ»æ¼”ç®—ç ”ç©¶çš„æ˜¯å‡½æ•°çš„æœ¬è´¨æ€§é—®é¢˜ï¼Œæ‰€ä»¥å½¢å¼æå…¶ç®€å•ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">E = x           variables</div><div class="line">  | Î»x. E       function creation(abstraction)</div><div class="line">  | E1 E2       function application</div></pre></td></tr></table></figure></p>
<p>ä¸Šé¢çš„Eç§°ä¸ºÎ»-è¡¨è¾¾å¼(expressions)æˆ–Î»-termsï¼Œå®ƒçš„å€¼æœ‰ä¸‰ç§å½¢å¼ï¼š</p>
<ol>
<li>å˜é‡(variables)ã€‚</li>
<li>å‡½æ•°å£°æ˜æˆ–æŠ½è±¡(function creation/abstraction)ã€‚éœ€è¦æ³¨æ„æ˜¯çš„ï¼Œå‡½æ•°ä¸­<strong>æœ‰ä¸”ä»…æœ‰</strong>ä¸€ä¸ªå‚æ•°ã€‚åœ¨Î»x. Eä¸­ï¼Œxæ˜¯å‚æ•°ï¼ŒEæ˜¯å‡½æ•°ä½“</li>
<li>å‡½æ•°åº”ç”¨(function application)ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬ç†è§£çš„å‡½æ•°è°ƒç”¨ï¼Œä½†å®˜æ–¹æœ¯è¯­å°±å«å‡½æ•°åº”ç”¨ï¼Œæœ¬æ–‡åé¢ä¹Ÿä¼šé‡‡ç”¨â€œåº”ç”¨â€çš„å«æ³•ã€‚</li>
</ol>
<h4 id="Î»è¡¨è¾¾å¼ä¾‹å­"><a href="#Î»è¡¨è¾¾å¼ä¾‹å­" class="headerlink" title="Î»è¡¨è¾¾å¼ä¾‹å­"></a>Î»è¡¨è¾¾å¼ä¾‹å­</h4><p>ä¸Šé¢å°±æ˜¯Î»æ¼”ç®—çš„è¯­æ³•äº†ï¼Œå¾ˆæ˜¯ç®€å•å§ã€‚ä¸‹é¢çœ‹å‡ ä¸ªä¾‹å­ï¼š</p>
<ol>
<li>æ’ç­‰å‡½æ•°<br><code>Î»x.x</code></li>
<li>ä¸€ä¸ªè¿”å›æ’ç­‰å‡½æ•°çš„å‡½æ•°<br><code>Î»y. (Î»x.x)</code><br>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„yå‚æ•°ç›´æ¥è¢«å¿½ç•¥äº†</li>
</ol>
<p>åœ¨ä½¿ç”¨Î»æ¼”ç®—æ—¶ï¼Œæœ‰ä¸€äº›æƒ¯ä¾‹éœ€è¦è¯´ä¸€ä¸‹ï¼š</p>
<ol>
<li><p>å‡½æ•°å£°æ˜æ—¶ï¼Œå‡½æ•°ä½“å°½å¯èƒ½çš„å‘å³æ‰©å±•ã€‚ä»€ä¹ˆæ„æ€å‘¢ï¼Œä¸¾ä¸ªä¾‹å­å¤§å®¶å°±æ˜ç™½äº†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Î»x.x Î»y.x y z åº”è¯¥ç†è§£ä¸º Î» x. (x (Î»y. ((x y) z)))</div></pre></td></tr></table></figure>
</li>
<li><p>å‡½æ•°åº”ç”¨æ—¶ï¼Œéµå¾ªå·¦ç»“åˆã€‚åœ¨ä¸¾ä¸ªä¾‹å­ï¼š<br>x y z åº”è¯¥è§£é‡Šä¸º (x y) z</p>
</li>
</ol>
<h4 id="Curryingå¸¦æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°"><a href="#Curryingå¸¦æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°" class="headerlink" title="Curryingå¸¦æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°"></a>Curryingå¸¦æœ‰å¤šä¸ªå‚æ•°çš„å‡½æ•°</h4><p>ä»ä¸Šé¢æˆ‘ä»¬çŸ¥é“ï¼ŒÎ»æ¼”ç®—ä¸­å‡½æ•°åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°çš„æ˜¯ä¸æ˜¯å°±æ²¡æ³•è¡¨ç¤ºäº†å‘¢ï¼Œé‚£Î»æ¼”ç®—çš„åŠŸèƒ½ä¹Ÿå¤ªå¼±äº†å§ï¼Œè¿™å°±æ˜¯Î»çš„ç¥å¥‡ä¹‹å¤„ï¼Œå‡½æ•°åœ¨æœ¬è´¨ä¸Šåªéœ€è¦ä¸€ä¸ªå‚æ•°å³å¯ã€‚å¦‚æœæƒ³è¦å£°æ˜å¤šä¸ªå‚æ•°çš„å‡½æ•°ï¼Œé€šè¿‡curryingæŠ€æœ¯å³å¯ã€‚ä¸‹é¢æ¥è¯´è¯´curryingã€‚<br><code>Î»x y. (+ x y)----&gt;Î»x. (Î» y. + x y)</code><br>ä¸Šé¢è¿™ä¸ªè½¬åŒ–å°±å«curryingï¼Œå®ƒå±•ç¤ºäº†ï¼Œæˆ‘ä»¬å¦‚ä½•å®ç°åŠ æ³•ï¼ˆè¿™é‡Œå‡è®¾+è¿™ä¸ªç¬¦å·å·²ç»å…·æœ‰ç›¸åŠ çš„åŠŸèƒ½ï¼Œåé¢æˆ‘ä»¬ä¼šè®²åˆ°å¦‚ä½•ç”¨Î»è¡¨è¾¾å¼æ¥å®ç°è¿™ä¸ª+çš„åŠŸèƒ½ï¼‰ã€‚<br>å…¶å®å°±æ˜¯æˆ‘ä»¬ç°åœ¨æ„ä¹‰ä¸Šçš„é—­åŒ…â€”â€”ä½ è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°è¿”å›å¦ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°ä¸­å­˜å‚¨ä¿ç•™äº†è°ƒç”¨å‡½æ•°çš„å˜é‡ã€‚curryingæ˜¯é—­åŒ…çš„é¼»ç¥–ã€‚<br>å¦‚æœç”¨Pythonæ¥è¡¨ç¤ºå°±æ˜¯è¿™æ ·çš„ä¸œè¥¿ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">def add(x):</div><div class="line">    return lambda y: x+y</div><div class="line"></div><div class="line">add(4)(3) //return 7</div></pre></td></tr></table></figure></p>
<p>å¦‚æœç”¨å‡½æ•°å¼è¯­è¨€clojureæ¥è¡¨ç¤ºå°±æ˜¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(defn add [x]</div><div class="line">  (fn [y] (+ x y)))</div><div class="line"></div><div class="line">((add 4) 3) ;return 7</div></pre></td></tr></table></figure>
<h3 id="æ±‚å€¼-evaluation"><a href="#æ±‚å€¼-evaluation" class="headerlink" title="æ±‚å€¼(evaluation)"></a>æ±‚å€¼(evaluation)</h3><p>åœ¨Î»æ¼”ç®—ä¸­ï¼Œæœ‰ä¸¤æ¡æ±‚å€¼è§„åˆ™ï¼š</p>
<ol>
<li>Alpha equivalence( or conversion )</li>
<li>Beta reduction</li>
</ol>
<h4 id="Alpha-equivalence"><a href="#Alpha-equivalence" class="headerlink" title="Alpha equivalence"></a>Alpha equivalence</h4><p>è¿™ä¸ªæ¯”è¾ƒç®€å•ä¹Ÿå¥½ç†è§£ï¼Œå°±æ˜¯è¯´Î»x.xä¸Î»y.yæ˜¯ç­‰ä»·çš„ï¼Œå¹¶ä¸å› ä¸ºæ¢äº†å˜é‡åè€Œæ”¹å˜å‡½æ•°çš„æ„ä¹‰ã€‚<br>ç®€å•å¹¶ä¸è¯´è¿™ä¸ªè§„åˆ™ä¸é‡è¦ï¼Œåœ¨ä¸€äº›å˜é‡è¦†ç›–çš„åœºåˆå¾ˆé‡è¦ï¼Œå¦‚ä¸‹è¿™ä¸ªä¾‹å­ï¼š<br><code>Î»x. x (Î»x. x)</code>å¦‚æœä½ è¿™ä¹ˆå†™çš„è¯ï¼Œç¬¬äºŒä¸ªå‡½æ•°å®šä¹‰ä¸­çš„xä¸ç¬¬ä¸€ä¸ªå‡½æ•°å®šä¹‰ä¸­çš„xé‡å¤äº†ï¼Œä¹Ÿå°±æ˜¯åœ¨ç¬¬äºŒä¸ªå‡½æ•°é‡ŒæŠŠç¬¬ä¸€ä¸ªçš„xç»™è¦†ç›–äº†ã€‚<br>å¦‚æœæ”¹ä¸º<code>Î»x. x (Î»y. y)</code>å°±ä¸ä¼šæœ‰æ­§ä¹‰äº†ã€‚</p>
<h4 id="Beta-reduction"><a href="#Beta-reduction" class="headerlink" title="Beta reduction"></a>Beta reduction</h4><p>è¿™ä¸ªè§„åˆ™æ˜¯Î»æ¼”ç®—ä¸­å‡½æ•°åº”ç”¨çš„é‡ç‚¹äº†ã€‚ä¸€å¥è¯æ¥è§£é‡Šå°±æ˜¯ï¼ŒæŠŠå‚æ•°åº”ç”¨åˆ°å‡½æ•°ä½“ä¸­ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼š<br>æœ‰è¿™ä¹ˆä¸€ä¸ªå‡½æ•°åº”ç”¨<code>(Î»x.x)(Î»y.y)</code>ï¼Œåœ¨è¿™é‡ŒæŠŠ<code>(Î»y.y)</code>å¸¦å…¥å‰é¢å‡½æ•°çš„xä¸­ï¼Œå°±èƒ½å¾—åˆ°æœ€ç»ˆçš„ç»“æœ<code>(Î»y.y)</code>ï¼Œè¿™é‡Œä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååˆè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™å°±æ˜¯æœ€ç»ˆçš„ç»“æœã€‚</p>
<h4 id="æ±‚å€¼é¡ºåº"><a href="#æ±‚å€¼é¡ºåº" class="headerlink" title="æ±‚å€¼é¡ºåº"></a>æ±‚å€¼é¡ºåº</h4><p>è€ƒè™‘ä¸‹é¢è¿™ä¸ªå‡½æ•°åº”ç”¨<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">(Î» y. (Î» x. x) y) E</div></pre></td></tr></table></figure></p>
<p>æœ‰ä¸¤ç§è®¡ç®—æ–¹æ³•ï¼Œå¦‚ä¸‹å›¾<br><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2fQf6aFXXXXa2XXXXXXXXXXXX_!!581166664.png" alt=" evaluation-order"><br>å¯ä»¥å…ˆè®¡ç®—å†…å±‚çš„å‡½æ•°è°ƒç”¨å†è®¡ç®—å¤–å±‚çš„å‡½æ•°è°ƒç”¨ï¼Œåä¹‹ä¹Ÿå¯ã€‚<br>æ ¹æ®<a href="http://en.wikipedia.org/wiki/Church%E2%80%93Rosser_theorem" target="_blank" rel="external">Churchâ€“Rosserå®šç†</a>ï¼Œè¿™ä¸¤ç§æ–¹æ³•æ˜¯ç­‰ä»·çš„ï¼Œæœ€ç»ˆä¼šå¾—åˆ°ç›¸ç­‰çš„ç»“æœï¼Œå¦‚ä¸Šå›¾æœ€åéƒ½å¾—åˆ°äº†Eã€‚<br>ä½†å¦‚æœæˆ‘ä»¬è¦è‡ªå·±å®ç°ä¸€ç§è¯­è¨€ï¼Œå°±æœ‰å¯èƒ½å¿…é€‰äºŒé€‰å…¶ä¸€ï¼Œäºæ˜¯æœ‰äº†ä¸‹é¢ä¸¤ç§æ–¹å¼ï¼š</p>
<ol>
<li><p>Call by Value(Eager EvaluationåŠæ—©æ±‚å€¼)<br>ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„innerï¼Œè¿™ç§æ–¹å¼åœ¨å‡½æ•°åº”ç”¨å‰ï¼Œå°±è®¡ç®—å‡½æ•°å‚æ•°çš„å€¼ã€‚å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(Î»y. (Î»x. x) y) ((Î»u. u) (Î»v. v)) ---&gt;</div><div class="line">(Î»y. (Î»x. x) y) (Î»v. v)  ---&gt;</div><div class="line">(Î»x. x) (Î»v. v)  ---&gt;</div><div class="line">Î»v. v</div></pre></td></tr></table></figure>
</li>
<li><p>Call by Name (Lazy Evaluationæƒ°æ€§æ±‚å€¼)<br>ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„outerï¼Œè¿™ç§æ–¹å¼åœ¨å‡½æ•°åº”ç”¨å‰ï¼Œä¸è®¡ç®—å‡½æ•°å‚æ•°çš„å€¼ï¼Œç›´åˆ°éœ€è¦æ—¶æ‰æ±‚å€¼ã€‚å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(Î»y. (Î»x. x) y) ((Î»u. u) (Î»v. v)) ---&gt;</div><div class="line">(Î»x. x) ((Î»u. u) (Î»v. v)) ---&gt;</div><div class="line">(Î»u. u) (Î»v. v) ---&gt;</div><div class="line">Î»v. v</div></pre></td></tr></table></figure>
</li>
</ol>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒCall by Nameè¿™ç§æ–¹å¼åœ¨æˆ‘ä»¬ç›®å‰çš„è¯­è¨€ä¸­ï¼Œåªæœ‰å‡½æ•°å¼è¯­è¨€æ”¯æŒã€‚</p>
<h2 id="Î»æ¼”ç®—ä¸ç¼–ç¨‹è¯­è¨€çš„å…³ç³»"><a href="#Î»æ¼”ç®—ä¸ç¼–ç¨‹è¯­è¨€çš„å…³ç³»" class="headerlink" title="Î»æ¼”ç®—ä¸ç¼–ç¨‹è¯­è¨€çš„å…³ç³»"></a>Î»æ¼”ç®—ä¸ç¼–ç¨‹è¯­è¨€çš„å…³ç³»</h2><p>åœ¨Î»æ¼”ç®—ä¸­åªæœ‰å‡½æ•°ï¼ˆå˜é‡ä¾é™„äºå‡½æ•°è€Œæœ‰æ„ä¹‰ï¼‰ï¼Œå¦‚æœè¦ç”¨çº¯Î»æ¼”ç®—æ¥å®ç°ä¸€é—¨ç¼–ç¨‹è¯­è¨€çš„è¯ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€äº›æ•°æ®ç±»å‹ï¼Œæ¯”å¦‚booleanã€numberã€listç­‰ï¼Œé‚£æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>Î»çš„å¼ºå¤§åˆå†ä¸€æ¬¡å±•ç°å‡ºæ¥ï¼Œæ‰€æœ‰çš„æ•°æ®ç±»å‹éƒ½èƒ½ç”¨å‡½æ•°æ¨¡æ‹Ÿå‡ºæ¥ï¼Œç§˜è¯€å°±æ˜¯<br><code>ä¸è¦å»å…³å¿ƒæ•°æ®çš„å€¼æ˜¯ä»€ä¹ˆï¼Œé‡ç‚¹æ˜¯æˆ‘ä»¬èƒ½å¯¹è¿™ä¸ªå€¼åšä»€ä¹ˆæ“ä½œ</code>ï¼Œç„¶åæˆ‘ä»¬ç”¨åˆæ³•çš„Î»è¡¨è¾¾å¼æŠŠè¿™äº›æ“ä½œè¡¨ç¤ºå‡ºæ¥å³å¯ã€‚</p>
<p>å¬ä¸Šå»å¾ˆäº›äº‘é‡Œé›¾é‡Œï¼Œä½†çœ‹äº†æˆ‘ä¸‹é¢çš„è®²è§£ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œç¼–ç¨‹è¯­è¨€åŸæ¥è¿˜å¯ä»¥è¿™ä¹ˆç©ï¼Œå¸Œæœ›æˆ‘èƒ½æŠŠè¿™éƒ¨åˆ†è®²æ¸…æ¥šäº›ï¼Œä¸ªäººæ„Ÿè§‰è¿™äº›ä¸œè¥¿å¤ªfunnyäº† :-)</p>
<p>å¥½äº†ï¼Œæˆ‘ä»¬å…ˆä»æœ€ç®€å•â€”â€”booleançš„å¼€å§‹ã€‚</p>
<h3 id="ç¼–ç Boolean"><a href="#ç¼–ç Boolean" class="headerlink" title="ç¼–ç Boolean"></a>ç¼–ç Boolean</h3><p>Askï¼šæˆ‘ä»¬èƒ½å¯¹booleanå€¼åšä»€ä¹ˆï¼Ÿ<br>Answerï¼šæˆ‘ä»¬èƒ½å¤Ÿè¿›è¡Œæ¡ä»¶åˆ¤æ–­ï¼ŒäºŒé€‰å…¶ä¸€ã€‚</p>
<p>å¥½ï¼ŒçŸ¥é“äº†èƒ½å¯¹booleançš„æ“ä½œï¼Œä¸‹é¢å°±ç”¨Î»è¡¨è¾¾å¼æ¥å®šä¹‰å®ƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">true = Î»x. Î»y. x</div><div class="line">false = Î»x. Î»y. y</div><div class="line">if E1 then E2 else E3 = E1 E2 E3</div></pre></td></tr></table></figure></p>
<p>æ¥ç®€å•è§£é‡Šä¸€ä¸‹ï¼Œbooleanå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå®ƒæœ‰ä¸¤ä¸ªå‚æ•°ï¼ˆé€šè¿‡curryingå®ç°ï¼‰ï¼Œè¿”å›å…¶ä¸­ä¸€ä¸ªã€‚ä¸‹é¢çœ‹ä¸ªä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">if true then u else v å¯ä»¥å†™æˆ   </div><div class="line">(Î»x. Î»y. x) u v ---&gt; (Î»y. u) v ---&gt; u</div></pre></td></tr></table></figure></p>
<p>å“ˆå“ˆï¼Œå¾ˆç¥å¥‡å§ï¼Œæ›´ç²¾å½©çš„è¿˜åœ¨åå¤´å‘¢ï¼Œç»§ç»­</p>
<h3 id="ç¼–ç pair"><a href="#ç¼–ç pair" class="headerlink" title="ç¼–ç pair"></a>ç¼–ç pair</h3><p>è¿™é‡Œç®€å•è§£é‡Šä¸‹pairï¼Œå…¶å®å°±æ˜¯åºåˆ—å¯¹ï¼Œå¦‚(1 2)ã€(hello world)ï¼Œè¿™äº›å°±æ˜¯pairï¼Œåªæœ‰ä¸¤ä¸ªå…ƒç´ ï¼Œä½†ä¸è¦å°çœ‹äº†pairï¼Œæˆ‘ä»¬ç”¨çš„listå°±æ˜¯é€šè¿‡pairè¿æ¥èµ·æ¥å½¢æˆçš„ã€‚</p>
<p>Askï¼šæˆ‘ä»¬èƒ½å¯¹pairåšä»€ä¹ˆï¼Ÿ<br>Answerï¼šæˆ‘ä»¬èƒ½å¤Ÿé€‰æ‹©pairä¸­çš„ä»»æ„ä¸€ä¸ªå…ƒç´ </p>
<p>å¥½ï¼ŒçŸ¥é“äº†èƒ½å¯¹pairçš„æ“ä½œï¼Œä¸‹é¢å°±ç”¨Î»è¡¨è¾¾å¼æ¥å®šä¹‰å®ƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkpair x y = Î»b. (b x y)</div><div class="line">fst p      = p true</div><div class="line">snd p      = p false</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œç”¨åˆ°äº†trueä¸falseçš„ç¼–ç ã€‚è§£é‡Šä¸€ä¸‹ï¼š<br>pairå°±æ˜¯è¿™ä¹ˆä¸€ä¸ªå‡½æ•°ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªbooleanå€¼ï¼Œæ ¹æ®è¿™ä¸ªå‚æ•°ç¡®å®šè¿”å›å€¼ã€‚è¿˜æ˜¯çœ‹ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fst (mkpair x y)---&gt;(mkpair x y) true---&gt;true x y---&gt;x</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½å–åˆ°pairçš„ç¬¬ä¸€ä¸ªå…ƒç´ äº†ã€‚å¾ˆå¥½ç©å§ï¼Œä¸‹é¢çš„æ›´æœ‰è¶£ï¼Œç»§ç»­</p>
<h3 id="ç¼–ç number"><a href="#ç¼–ç number" class="headerlink" title="ç¼–ç number"></a>ç¼–ç number</h3><p>è¿™é‡Œè®²çš„numberæ˜¯æŒ‡çš„è‡ªç„¶æ•°ã€‚</p>
<p>Askï¼šæˆ‘ä»¬èƒ½å¯¹numberåšä»€ä¹ˆï¼Ÿ<br>Answerï¼šæˆ‘ä»¬èƒ½å¤Ÿä¾æ¬¡éå†è¿™äº›æ•°å­—</p>
<p>å¥½ï¼ŒçŸ¥é“äº†èƒ½å¯¹numberçš„æ“ä½œï¼Œä¸‹é¢å°±ç”¨Î»è¡¨è¾¾å¼æ¥å®šä¹‰å®ƒï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">0 = Î»f. Î»s. s</div><div class="line">1 = Î»f. Î»s. f s</div><div class="line">2 = Î»f. Î»s. f (f s)</div><div class="line">......</div></pre></td></tr></table></figure></p>
<p>è§£é‡Šä¸€ä¸‹ï¼Œåˆ©ç”¨curryingï¼Œæˆ‘ä»¬çŸ¥é“ä¸Šé¢çš„å®šä¹‰å…¶å®ç›¸å½“äºä¸€ä¸ªå…·æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼šä¸€ä¸ªå‡½æ•°fï¼Œå¦ä¸€ä¸ªæ˜¯èµ·å§‹å€¼sï¼Œç„¶åä¸æ–­åº”ç”¨få®ç°éå†æ•°å­—çš„æ“ä½œã€‚å…ˆä¸è¦ç®¡ä¸ºä»€ä¹ˆè¿™ä¹ˆå®šä¹‰ï¼Œçœ‹äº†ä¸‹é¢æˆ‘ä»¬å¦‚ä½•å®šä¹‰åŠ æ³•ä¹˜æ³•çš„ä¾‹å­ä½ åº”è¯¥å°±ä¼šè±ç„¶å¼€æœ—äº†ï¼š<br>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªåç»§å‡½æ•°(The successor function)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">succ n = Î»f. Î»s. f (n f s)</div></pre></td></tr></table></figure></p>
<p>ç„¶åï¼Œå°±å¯ä»¥å®šä¹‰åŠ æ³•ä¸ä¹˜æ³•äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">add n1 n2 = n1 succ n2</div><div class="line">mult n1 n2 = n1 (add n2) 0</div></pre></td></tr></table></figure></p>
<p>åªçœ‹å®šä¹‰è¦æƒ³å¼„æ‡‚åº”è¯¥è¿˜æ˜¯æœ‰äº›å›°éš¾ï¼Œä¸‹é¢çœ‹ä¸ªå…·ä½“çš„ä¾‹å­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">add 0 = (Î»n1. Î»n2. n1 succ n2) 0  // è¿™é‡Œç›´æ¥æ ¹æ®ä¸Šé¢ add å®šä¹‰è¿›è¡Œå±•å¼€</div><div class="line"> </div><div class="line">-------å°† 0 å¸¦å…¥ n1ï¼Œå¯å¾—--------&gt;</div><div class="line">Î»n2. 0 succ n2 = Î»n2. (Î»f. Î»s. s) succ n2 </div><div class="line"> </div><div class="line">-------å°† succ å¸¦å…¥ fï¼Œn2 å¸¦å…¥ sï¼Œå¯å¾—--&gt;</div><div class="line">Î»n2. n2 = Î»x. x</div></pre></td></tr></table></figure></p>
<p>æˆ‘ç¬¬ä¸€æ¬¡çœ‹è¿™ä¸ªä¾‹å­æœ‰ä¸ªç–‘é—®ï¼Œaddä¸æ˜¯ä¸¤ä¸ªå‚æ•°å—ï¼Œä½ æ€ä¹ˆå°±åŠ ä¸€ä¸ª0å‘¢ï¼Ÿå…¶å®è¿˜æ˜¯curryingæ²¡ç†è§£å¥½ï¼Œä¸¤ä¸ªå‚æ•°çš„å‡½æ•°å†…éƒ¨ä¸ä¹Ÿæ˜¯ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°æ¥è¡¨ç¤ºçš„å˜›ï¼Œå¦‚æœåªä¼ é€’ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±çŸ¥é“è¿˜ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæœ¬ä¾‹ä¸­å°±æ˜¯<code>Î»x. x</code>ï¼Œè¿™æ˜¯æ’ç­‰å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´åŠ  0 ,ç›¸å½“äºä»€ä¹ˆä¹Ÿæ²¡åŠ ï¼Œè¿˜æ˜¯æœ¬èº«ã€‚</p>
<p>å“ˆå“ˆï¼Œçœ‹æ¥ä¹Ÿä¸è¿‡å¦‚æ­¤å˜›ï¼Œå¦‚æœä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼Œè¯´æ˜ä½ å·²ç»å¯¹lambdaæŒæ¡çš„å·®ä¸å¤šäº†ã€‚ä¸‹é¢å†æ¥çœ‹ä¸ªâ€œéš¾ç‚¹â€çš„ä¾‹å­â€”â€”<code>1+1</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">add 1 1 ---&gt;</div><div class="line">1 succ 1 ---&gt;</div><div class="line">succ 1 ---&gt;</div><div class="line">Î»f. Î»s. f (f s) ---&gt; 2</div></pre></td></tr></table></figure></p>
<p>æœ€åä¸€ä¸ªä¾‹å­ï¼Œ<code>2*2</code>ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">mult 2 2 ---&gt;</div><div class="line">2 (add 2) 0 ---&gt;</div><div class="line">(add 2) ((add 2) 0) ---&gt;</div><div class="line">2 succ (add 2 0) ---&gt;</div><div class="line">2 succ (2 succ 0) ---&gt;</div><div class="line">succ (succ (succ (succ 0))) ---&gt;</div><div class="line">succ (succ (succ (Î»f. Î»s. f (0 f s)))) ---&gt;</div><div class="line">succ (succ (succ (Î»f. Î»s. f s))) ---&gt;</div><div class="line">succ (succ (Î»g. Î»y. g ((Î»f. Î»s. f s) g y)))</div><div class="line">succ (succ (Î»g. Î»y. g (g y))) ---&gt;......---&gt; Î»g. Î»y. g (g (g (g y))) = 4</div></pre></td></tr></table></figure></p>
<p>ä¸è¦ä¸€çœ‹åˆ°è¿™ä¹ˆå¤šæ­¥éª¤å°±å“è·‘äº†ï¼ŒåŸåˆ™å¾ˆç®€å•ï¼Œå°±æ˜¯ä¸æ–­è¿›è¡Œå‡½æ•°åº”ç”¨ï¼Œéœ€è¦æ³¨æ„çš„å°±æ˜¯è¿™é‡Œçš„2ã€0ä¸å†æ˜¯å•çº¯çš„æ•°å­—äº†ï¼Œå®ƒæ˜¯ä»å…·æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°ï¼Œå¦‚æœä½ åº”ç”¨æ—¶åªä¼ å…¥ä¸€ä¸ªå‚æ•°ï¼Œè¯´æ˜å®ƒè¿˜ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚</p>
<p>ä¸ç®¡æ€æ ·ï¼Œå¦‚æœä½ å·²ç»çœ‹åˆ°äº†è¿™é‡Œï¼Œæˆ‘å¸Œæœ›ä½ èƒ½æŠŠä¸Šé¢è¿™ä¸ªä¹˜æ³•çš„ä¾‹å­çœ‹æ‡‚ï¼Œå°±æ˜¯ä¸æ–­è¿›è¡Œå‡½æ•°åº”ç”¨è€Œå·²ï¼Œæ²¡ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘è§‰å¾—éš¾ç‚¹åœ¨äºæ€ç»´çš„è½¬åŒ–ï¼Œå› ä¸ºä»¥å‰éƒ½å¾ˆç†æ‰€å½“ç„¶è®¤ä¸º2Ã—2=4äº†ï¼Œè€Œä¸çŸ¥é“è¿™ä¹ˆç®€å•çš„è®¡ç®—åé¢çš„æœ¬è´¨æ€§ä¸œè¥¿ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­ï¼Œå¸Œæœ›å¤§å®¶èƒ½æ˜ç¡®ä¸€ç‚¹ï¼š<code>å€¼æ˜¯ä»€ä¹ˆä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬èƒ½å¯¹è¿™ä¸ªå€¼è¿›è¡Œçš„æ“ä½œ</code>ã€‚</p>
<p>æœ€åå†æ¥ä¸€ä¸ªæ”¶å°¾èœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">å¦‚æœæƒ³è¦åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯å¦ä¸º0ï¼Œå¯ä»¥è¿™ä¹ˆå®šä¹‰                </div><div class="line">iszero n = n (Î»b. false) true</div></pre></td></tr></table></figure></p>
<h2 id="Î»-æ¼”ç®—ä¸å›¾çµæœº"><a href="#Î»-æ¼”ç®—ä¸å›¾çµæœº" class="headerlink" title="Î»-æ¼”ç®—ä¸å›¾çµæœº"></a>Î»-æ¼”ç®—ä¸å›¾çµæœº</h2><p>æœ¬æ–‡ä¸€å¼€å§‹å°±è¯´æ˜äº†ï¼ŒÎ»-æ¼”ç®—ä¸å›¾çµæœºæ˜¯ç­‰ä»·ï¼Œè¿™é‡Œç®€å•è¯´ä¸‹æˆ‘å¯¹å›¾çµæœºçš„ç†è§£ï¼š</p>
<blockquote>
<p>åœ¨ä¸€ä¸ªä¸é™æ—¶é—´ã€ä¸é™èµ„æºçš„å‰æä¸‹ï¼Œå›¾çµæœºé€šè¿‡å‰è¿›ã€åé€€ã€è·³è½¬ã€è¾“å‡º1æˆ–0è¿™å››ä¸ªç®€å•çš„å‘½ä»¤ï¼Œåœ¨ä¸€æ¡æ— é™é•¿çš„çº¸å¸¦ä¸Šæ‰§è¡Œäº‹å…ˆç¼–å¥½çš„ç¨‹åºã€‚</p>
</blockquote>
<p>æ ¹æ®ç›®å‰çš„è¯æ˜ï¼Œå›¾çµæœºæ˜¯å®‡å®™é—´æœ€å¼ºå¤§çš„æœºå™¨ï¼ˆç†æƒ³ä¸­çš„ï¼‰ï¼Œæˆ‘ä»¬ç°æœ‰çš„è®¡ç®—æœºéƒ½æ²¡æœ‰è¶…è¿‡å›¾çµæœºã€‚</p>
<p>å¦‚æœè¯´ä¸€ä¸ªè¯­è¨€æ˜¯å›¾çµå®Œå¤‡çš„ï¼Œå°±æ˜¯è¯´ï¼Œä¸–ç•Œä¸Šä»»ä½•å¯è®¡ç®—æ€§é—®é¢˜ï¼Œå®ƒéƒ½èƒ½è§£å†³ã€‚</p>
<p>æˆ‘ä»¬ç°æœ‰çš„å‘½ä»¤å¼è¯­è¨€ï¼Œå¦‚Cã€Javaç­‰å°±æ˜¯ä»¥å›¾çµæœºä¸ºåŸºç¡€çš„ã€‚å¦‚æœè¯´è¿™äº›è¯­è¨€å›¾çµå®Œå¤‡ï¼Œéœ€è¦å…·æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li>æœ‰ifã€gotoè¯­å¥ï¼ˆæˆ–whileã€forä¹‹ç±»çš„å¾ªç¯è¯­å¥ï¼‰</li>
<li>èƒ½å¤Ÿè¿›è¡Œèµ‹å€¼æ“ä½œï¼ˆä¹Ÿå°±æ˜¯æ”¹å˜å†…å­˜çŠ¶æ€ï¼‰</li>
</ol>
<p>ä¸å›¾çµæœºå¯¹åº”ï¼ŒÎ»-æ¼”ç®—çš„ç›´æ¥å½±å“æ˜¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚lispã€Haskellç­‰ï¼Œå¦‚æœè¯´è¿™äº›å‡½æ•°å¼è¯­è¨€å›¾çµå®Œå¤‡ï¼Œéœ€è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªç‰¹å¾ï¼š</p>
<ol>
<li>èƒ½å¤Ÿè¿›è¡Œå‡½æ•°æŠ½è±¡ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°å®šä¹‰ï¼‰</li>
<li>èƒ½å¤Ÿè¿›è¡Œå‡½æ•°åº”ç”¨ï¼ˆä¹Ÿå°±æ˜¯å‡½æ•°è°ƒç”¨ï¼‰</li>
</ol>
<p>é‰´åˆ«ä¸€ä¸ªè¯­è¨€æ˜¯ä¸æ˜¯å‡½æ•°å¼çš„æ ‡å‡†æ˜¯ï¼šè¿™ä¸ªè¯­è¨€èƒ½å¦åœ¨è¿è¡Œæ—¶åˆ›å»ºå‡½æ•°ï¼Œå¦‚æœèƒ½ï¼Œå°±æ˜¯å‡½æ•°å¼è¯­è¨€ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ä¸Šé¢é•¿ç¯‡å¤§è®ºï¼ˆå¸Œæœ›ä½ èƒ½æŠ½æ—¶é—´çœ‹å®Œï¼‰ï¼Œæˆ‘ä»¬ç”¨ä¸€äº›æ— æ„ä¹‰ç¬¦å·è¡¨è¾¾äº†æˆ‘ä»¬å·²ç»ç†ŸçŸ¥çš„ä¸€äº›æ¦‚å¿µï¼Œè¿™å°±æ˜¯Î»æ¼”ç®—çš„ç²¾é«“ä¹‹å¤„ï¼Œé€šè¿‡ä¸€å¥—å½¢å¼åŒ–çš„è§„åˆ™æ¥æè¿°è¿™äº›ä¸œè¥¿ï¼Œè¦çŸ¥é“ï¼Œè¿™é‡Œé¢çš„å¾ˆå¤šä¸œè¥¿æˆ‘ä»¬ç°å¦‚ä»Šæƒ³å½“ç„¶çš„æ¥å—äº†ï¼Œä½†å¦‚ä½•è®©ç¬¨é‡çš„è®¡ç®—æœºæ¥ç†è§£è¿™ä¸ªä¸–ç•Œå‘¢ï¼Œè¿™å°±éœ€è¦è¿™äº›å½¢å¼åŒ–çš„è§„åˆ™æ¥æŒ‡å¯¼äº†ã€‚</p>
<p>æˆ‘è¿™é‡Œä»‹ç»çš„lambda calculuså¹¶ä¸å®Œå…¨ï¼Œåªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œåƒ<a href="http://en.wikipedia.org/wiki/Lambda_calculus#Recursion_and_fixed_points" target="_blank" rel="external">é€’å½’</a>è¿™ä¸ªé‡è¦çš„ä¸œè¥¿å°±æ²¡è¯´ï¼Œå¤§å®¶å‡­å€Ÿå…´è¶£å†è‡ªå·±å»çœ‹å§ï¼Œæˆ‘è§‰å¾—æˆ‘è¿™ç¯‡æ–‡ç« å°±æ˜¯ä¸ªç –å¤´ï¼Œå¸Œæœ›èƒ½å¼•å‡ºå¤§å®¶çš„å®ç‰å°±å¥½ã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨çš„ç¼–ç¨‹è¯­è¨€è¶‹å‘äºå¤šèŒƒå¼åŒ–ï¼Œåƒpythonã€rubyçš„å…´èµ·å°±è¯´æ˜äº†è¿™ç‚¹ã€‚<br>å› ä¸ºçº¯å‡½æ•°å¼è¯­è¨€ä¸èƒ½æ”¹å˜å˜é‡çŠ¶æ€ï¼Œè¿™ä¸ªææ€•åœ¨å¾ˆå¤šåœºåˆä¸é€‚ç”¨å§ã€‚<br>çº¯OOä¹Ÿä¸å¥½ï¼Œå› ä¸ºæˆ‘ä»¬å¤§å¤šæ•°ç¨‹åºå‘˜ï¼Œéƒ½æ˜¯ç”¨OOçš„è¯­è¨€æ¥å†™è¿‡ç¨‹å¼çš„ç¨‹åºï¼Œçœ‹çœ‹å¤§å®¶æœ‰å¤šHelperç±»ï¼ŒUtilç±»å°±æ˜ç™½äº†ã€‚</p>
<p>æœ‰äº†å¯¹ lambda çš„è®¤è¯†åï¼Œå°±å¯ä»¥å°è¯•ä¸‹ä¸€ä¸ªä¸»é¢˜äº†â€”â€”Y ç®—å­ï¼Œä¸‹é¢ç»™å‡ºæˆ‘è§‰å¾—è®²è§£çš„æœ€å¥½çš„ä¸€ç¯‡æ–‡ç« ï¼š</p>
<ul>
<li><a href="http://shellfly.org/blog/2015/01/07/yi-the-y-combinator-slight-return/" target="_blank" rel="external">(è¯‘) The Y combinator (Slight Return)</a></li>
</ul>
<p>æœ€åï¼Œæ¨èç‹å çš„ä¸€ç¯‡æ–‡ç« ï¼Œä»¥é£¨è¯»è€…ï¼š</p>
<ul>
<li><a href="http://geek.csdn.net/news/detail/3603" target="_blank" rel="external">é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œå‡½æ•°å¼ç¼–ç¨‹çš„é—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Lambda calculusæˆ‘ä»¬ä¸€èˆ¬ç§°ä¸º&lt;a href=&quot;http://en.wikipedia.org/wiki/Lambda_calculus&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Î»æ¼”ç®—&lt;/a&gt;ï¼Œæœ€æ—©æ˜¯ç”±&lt;a href=&quot;http://en
    
    </summary>
    
      <category term="ç†è§£è®¡ç®—æœº" scheme="http://liujiacai.net/categories/aha-computer/"/>
    
    
      <category term="Lambda" scheme="http://liujiacai.net/tags/lambda/"/>
    
      <category term="Lisp" scheme="http://liujiacai.net/tags/lisp/"/>
    
  </entry>
  
  <entry>
    <title>Mozilla å‰ä¸–ä»Šç”Ÿ</title>
    <link href="http://liujiacai.net/blog/2014/09/14/mozilla-history/"/>
    <id>http://liujiacai.net/blog/2014/09/14/mozilla-history/</id>
    <published>2014-09-13T16:14:52.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”¨è¿‡ Firefox çš„åŒå­¦å¤šå¤šå°‘å°‘éƒ½åº”è¯¥å¯¹ Mozilla æœ‰äº›äº†è§£ï¼ŒMozilla ä½œä¸ºä¸€è€ç‰Œè½¯ä»¶å…¬å¸ï¼Œè¯ç”Ÿäº†å¾ˆå¤šä¼ å¥‡æ€§çš„æ•…äº‹å’Œäººç‰©ï¼Œç°åœ¨å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢ä¸Šä¸ªä¸–çºªä¹åå¹´ä»£å‘ç”Ÿçš„é‚£äº›æ¿€è¡äººå¿ƒçš„æ—¶åˆ»å§ã€‚</p>
<p>Mozillaè¿™ä¸ªè¯æœ‰ä¸‰ä¸ªå«ä¹‰:</p>
<ol>
<li>ä»¥å¼€å‘Firefoxæµè§ˆå™¨å‡ºåçš„<a href="http://en.wikipedia.org/wiki/Mozilla" target="_blank" rel="external">è½¯ä»¶å¥—ä»¶</a>ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œäº§å“è¿˜æœ‰<a href="http://en.wikipedia.org/wiki/Mozilla_Thunderbird" target="_blank" rel="external">Thunderbird</a>ã€ <a href="http://en.wikipedia.org/wiki/Firefox_Mobile" target="_blank" rel="external">Firefox_Mobile</a>ã€<a href="http://en.wikipedia.org/wiki/Firefox_OS" target="_blank" rel="external">Firefox OS</a></li>
<li>æŒ‡<a href="http://en.wikipedia.org/wiki/Mozilla_Foundation" target="_blank" rel="external">Mozilla Foundation</a>ï¼Œæˆç«‹äº2003-7-15,ä¸€ä¸ªæ”¯æŒå¹¶ä¸”é¢†å¯¼å¼€å‘Mozillaé¡¹ç›®çš„éç›ˆåˆ©ç»„ç»‡</li>
<li>æŒ‡<a href="http://en.wikipedia.org/wiki/Mozilla_Corporation" target="_blank" rel="external">Mozilla Corporation</a>ï¼Œæˆç«‹äº2005-8-3ï¼Œæ˜¯Mozilla Foundationçš„é™„å±å…¬å¸ï¼Œåˆ›å»ºCorporationçš„ç›®çš„æ˜¯è§£å†³Foundationç¨åŠ¡ç›¸å…³çš„é—®é¢˜ï¼Œå…¶è‘£äº‹ä¼šæˆå‘˜å¾ˆå¤§éƒ¨åˆ†éƒ½æ˜¯Foundationçš„äººå‘˜ï¼Œè¿™é‡Œä¸ç”¨åŒºåˆ†è¿™ä¸¤ä¸ªç»„ç»‡ã€‚</li>
</ol>
<p>è¦æƒ³äº†è§£Mozillaä¸çš„ä¸æä¸Šä¸ªä¸–çºªæœ«çš„<a href="http://en.wikipedia.org/wiki/Netscape_Communications_Corporation" target="_blank" rel="external">Netscapeå…¬å¸</a>ä¸<a href="http://en.wikipedia.org/wiki/Browser_wars#First_browser_war" target="_blank" rel="external">ç¬¬ä¸€æ¬¡æµè§ˆå™¨å¤§æˆ˜</a>,ä¸‹é¢æˆ‘å°±ä»1990å¹´å¼€å§‹å…´èµ·çš„<a href="http://en.wikipedia.org/wiki/World_Wide_Web" target="_blank" rel="external">WWW</a>å¼€å§‹ï¼Œç®€å•è¯´ä¸€ä¸‹ä¸»æµæµè§ˆå™¨çš„å‘å±•è¿‡ç¨‹ã€‚</p>
<p>WWWæ˜¯ä¸€ä»½<a href="http://www.w3.org/Proposal" target="_blank" rel="external">å…·æœ‰hypertextæ–‡æ¡£ç³»ç»Ÿ</a>ï¼Œä¸»è¦æ˜¯ä¸ºInternetè®¾è®¡ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ç°åœ¨çœ‹åˆ°çš„ç½‘é¡µäº†ï¼Œhypertextå°±æ˜¯ç½‘é¡µä¸­çš„è¶…é“¾æ¥ï¼Œè¿™ä»½æ–‡æ¡£ä¹Ÿæå‡ºäº†å¹¿ä¸ºæ‰€çŸ¥çš„URLã€HTTPã€HTMLã€‚<a href="http://en.wikipedia.org/wiki/Tim_Berners-Lee" target="_blank" rel="external">Tim Berners-Lee</a>è¢«è®¤ä¸ºæ˜¯WWWä¹‹çˆ¶ï¼ŒTimä¹Ÿè®¾è®¡å‡ºäº†ä¸–ç•Œä¸Šç¬¬ä¸€ä¸ªæµè§ˆå™¨<a href="http://en.wikipedia.org/wiki/WorldWideWeb" target="_blank" rel="external">WorldWideWeb</a>,å½“ç„¶ï¼Œå‘å¸ƒçš„ç¬¬ä¸€ç‰ˆæ˜¯å‘½ä»¤è¡Œæ“ä½œçš„ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2N9C8apXXXXaoXXXXXXXXXXXX_!!581166664.gif" alt="WorldWideWeb"></p>
<p>Tim Berners-LeeåŒæ—¶è¿˜å¼€å‘äº†Libwwwè¿™ä¸ªæ¥å£ï¼Œç”¨ä»¥æ„å»ºæµè§ˆå™¨ï¼ŒLine Mode Browserã€ViolaWWWã€Erwiseã€MidasWWWå’ŒMacWWWç­‰æµè§ˆå™¨éƒ½æ˜¯ä»¥Libwwwä¸ºåŸºç¡€ã€‚</p>
<p>ç¬¬ä¸€ä¸ªå…·æœ‰GUIä¸”è¾ƒä¸ºé€šç”¨çš„æµè§ˆå™¨æ˜¯<a href="http://en.wikipedia.org/wiki/Erwise" target="_blank" rel="external">Erwise</a>ï¼Œä¹‹åä¸€ç›´åˆ°äº†1993å¹´ï¼Œ<a href="http://en.wikipedia.org/wiki/Marc_Andreessen" target="_blank" rel="external"> Marc Andreessen</a>ä¸ä»–é›‡çš„å…¨èŒç¨‹åºå‘˜<a href="http://en.wikipedia.org/wiki/Eric_Bina" target="_blank" rel="external">Eric Bina</a>åœ¨<a href="http://en.wikipedia.org/wiki/University_of_Illinois_at_Urbana-Champaign" target="_blank" rel="external">UIUC</a>çš„<a href="http://en.wikipedia.org/wiki/National_Center_for_Supercomputing_Applications" target="_blank" rel="external">NCSA</a>å¼€å‘å‡ºäº†<a href="http://en.wikipedia.org/wiki/Mosaic_%28web_browser%29" target="_blank" rel="external">Mosaic</a>ï¼ŒAndreessenä¹Ÿæ˜¯åœ¨NCSAäººæ˜¯Time Berners-Leeçš„ã€‚å½“å¹´Andreessenåœ¨UIUCæ¯•ä¸šåå»åŠ å·å·¥ä½œï¼Œåœ¨åŠ å·è®¤è¯†äº†<a href="http://en.wikipedia.org/wiki/James_H._Clark" target="_blank" rel="external">Jim Clark</a>,Clarkè§‰å¾—Mosaicéå¸¸æœ‰å•†ä¸šä»·å€¼ï¼Œæƒ³ä¸Andreessenåˆä½œå¼€ä¸ªè½¯ä»¶å…¬å¸ï¼Œå°±è¿™æ ·ï¼Œ<a href="http://en.wikipedia.org/wiki/Mosaic_Communications_Corporation" target="_blank" rel="external">Mosaic_Communications_Corporation</a>åœ¨1994å¹´åŠ å·æˆç«‹äº†ï¼ŒUIUCå¤§å­¦ä¸æ»¡æ„ä»–ä»¬çš„å…¬å¸åå­—ä¸­æœ‰Mosaicï¼ˆæœ‰å¯èƒ½ä¾µçŠ¯äº†å•†æ ‡æƒï¼‰ï¼Œæœ€åå…¬å¸åå­—æ”¹ä¸º<a href="http://en.wikipedia.org/wiki/Netscape" target="_blank" rel="external">Netscape Communications</a>ï¼Œæ——èˆ°(flagship)äº§å“å½“ç„¶æ˜¯<a href="http://en.wikipedia.org/wiki/Netscape_Navigator" target="_blank" rel="external">Netscape_Navigator</a>ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼ŒNavigatorä¸­æ²¡æœ‰ä½¿ç”¨NCSA Mosaicä¸­çš„ä»£ç ã€‚</p>
<p>Netscapeåœ¨1995å¹´8æœˆ9å·ï¼ŒIPOéå¸¸æˆåŠŸï¼Œè‚¡ç¥¨ç”±å¼€å§‹çš„æ¯è‚¡$14ï¼Œåˆ°æœ€åæ¶¨çš„$28ï¼Œç¿»äº†ä¸€å€ã€‚è°éƒ½æ²¡æƒ³åˆ°Netscapeä¼šä¸€å¤œæš´å¯Œã€‚Andreessenä¹Ÿä¸Šäº†å½“å¹´çš„<a href="http://content.time.com/time/covers/0,16641,1101960219,00.html" target="_blank" rel="external">Time Magazineå°é¢</a>ã€‚</p>
<p>Netscapeçš„å£å·æ˜¯â€the web is for everyoneâ€ï¼Œå¹¶å£°æ˜ä»–ä»¬çš„ç›®æ ‡æ˜¯ä¸ºä¸åŒæµè§ˆå™¨å¹³å°æä¾›ä¸€è‡´çš„æµè§ˆä½“éªŒã€‚å¤§å®¶ä¸è¦å¿˜äº†ï¼Œè¿™æ—¶å€™Microsoftåœ¨PCç«¯å‘å±•è¿…çŒ›ï¼Œè€Œä¸”MSæ„è¯†åˆ°Netscapeçš„æµè§ˆå™¨å¯¹ä»–ä»¬æ˜¯ä¸ªæ½œåœ¨çš„å®šæ—¶ç‚¸å¼¹ï¼Œå› ä¸ºç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•æ“ä½œç³»ç»Ÿä¸Šä½¿ç”¨ä»–ä»¬æµè§ˆå™¨ï¼Œä¹Ÿå°±æ˜¯è¯´ç”¨æˆ·ä»Windowsåˆ‡æ¢åˆ°å…¶ä»–æ“ä½œç³»ç»Ÿï¼ŒåŸºæœ¬æ²¡æœ‰ä»€ä¹ˆéšœç¢ã€‚å¯è§GatesçœŸçš„æ˜¯ä¸ªæœ‰è¿œè§çš„ä¼ä¸šå®¶ï¼Œåœ¨1995å¹´å°±é‡è§åˆ°ç°åœ¨ç§»åŠ¨äº’è”ç½‘çš„æƒ…æ™¯äº†ï¼Œç˜¦å®¢æˆ·ç«¯çš„å…´èµ·ï¼ŒBSæ¶æ„ä¹Ÿé€æ¸æ›¿ä»£CSæ¶æ„ã€‚æ®æŸäº›ä¸å¯è€ƒå¯Ÿçš„è¨€è®ºè¯´ï¼šMSçš„è¡Œæ”¿é¢†å¯¼æ›¾åœ¨1995å¹´6æœˆæ‹œè®¿è¿‡Netscapeï¼Œå»ºè®®åˆ†å‰²å¸‚åœºï¼Œå³Windowsä¸Šç”±MSæ¥å¼€å‘æµè§ˆå™¨ï¼Œå…¶ä»–æ“ä½œç³»ç»Ÿç”±Netscapeå¼€å‘æ“ä½œç³»ç»Ÿï¼ˆå½“ç„¶å¦è®¤äº†è¿™äº›è¨€è®ºï¼Œå¦‚æœä¸ºçœŸçš„è¯ï¼ŒMSå°±è§¦çŠ¯äº†åå„æ–­æ³•ï¼‰ã€‚</p>
<p>MSåœ¨<a href="http://en.wikipedia.org/wiki/Windows_95" target="_blank" rel="external">Windows 95</a><a href="http://en.wikipedia.org/wiki/Microsoft_Plus!" target="_blank" rel="external">Plus Pack</a>ä¸Šå‘è¡Œäº†<a href="http://en.wikipedia.org/wiki/Internet_Explorer" target="_blank" rel="external">Internet Explorer</a> 1.0ï¼Œæ®æ›¾ç»åœ¨Spyglasså·¥ä½œè¿‡çš„ç¨‹åºå‘˜<a href="http://en.wikipedia.org/wiki/Eric_Sink" target="_blank" rel="external">Eric Sink</a><a href="http://www.ericsink.com/Browser_Wars.html" target="_blank" rel="external">æè¿°</a>ï¼šIEä¸æ˜¯ä»¥NSCA Mosaicä¸ºåŸºç¡€çš„ï¼Œè€Œæ˜¯ç”±Spyglasså¼€å‘çš„Mosaicç‰ˆæœ¬ï¼Œè€ŒSpyglassçš„ç‰ˆæœ¬æ˜¯åŸºäºNSCAçš„ã€‚</p>
<p>MSä¸ºäº†è¿…é€ŸæŠ¢å å¸‚åœºï¼Œä½¿ç”¨äº†è½¯ä»¶æ†ç»‘ï¼Œå³åœ¨å‘å¸ƒWindowsæ—¶é¢„è£…IEï¼Œè€Œä¸”æ˜¯å…è´¹çš„ï¼Œè¿™æ ·å¯¹Netscapeæ¥è¯´æ— ç–‘æ˜¯é‡åˆ›ï¼Œæƒ³æƒ³å’±ä»¬ä¸­å›½çš„æ€æ¯’è¡Œä¸šçš„360,ä¸ä¹Ÿæ˜¯é å…è´¹æŠŠé‡‘å±±ã€æ±Ÿæ°‘ã€ç‘æ˜Ÿç­‰ç­‰ç»™æ‰“çš„ä¸æˆæ ·å­äº†å˜›ã€‚</p>
<p>MSä¹‹åä¸Netscapeå±•å¼€äº†ç¬¬ä¸€æ¬¡æµè§ˆå™¨å¤§æˆ˜ï¼Œè¿™ä¸¤ä¸ªå…¬å¸éƒ½åœ¨é€šè¿‡ä¸æ–­ç ”å‘æ–°åŠŸèƒ½æ¥äº‰å¤ºå¸‚åœºï¼Œä½†IEåœ¨è´¢åŠ›ã€èµ„æºä¸Šæ›´èƒœä¸€ç­¹ï¼Œæ¯•ç«ŸMSæ˜¯é å–Windowsä¸OfficeæŒ£é’±çš„ï¼Œè€ŒNetscapeè™½ç„¶ä¹Ÿæœ‰å…¶ä»–äº§å“ï¼Œä½†ä¸»è¦çš„å°±æ˜¯æµè§ˆå™¨ï¼Œæ— ç–‘Netscapeå¤„äºåŠ£åŠ¿ã€‚åˆ°IE3.0æ—¶ï¼ŒIEçš„åŠŸèƒ½åŸºæœ¬å°±ä¸Netscape Communicatorçš„ç›¸å½“äº†ï¼Œåˆ°IE4.0,Windowså·²ç»æ¯”Macintoshç³»ç»Ÿæ›´ä¸ºç¨³å®šã€‚åŒæ—¶ï¼ŒMSå¼€å§‹ç ”å‘Netscapeå…¶äº§å“çš„æ›¿ä»£å“ï¼Œåƒ<a href="http://en.wikipedia.org/wiki/Internet_Information_Server" target="_blank" rel="external">IIS</a>,ä¸Windows NTæ†ç»‘åœ¨ä¸€èµ·ã€‚</p>
<p><a href="http://en.wikipedia.org/wiki/Netscape" target="_blank" rel="external">Netscape</a>åœ¨æ­¤æœŸé—´ç ”å‘å‡ºæ¥ç°åœ¨ä¾ç„¶å¹¿ä¸ºä½¿ç”¨çš„<a href="http://en.wikipedia.org/wiki/Transport_Layer_Security" target="_blank" rel="external">SSL</a>ä¸<a href="http://en.wikipedia.org/wiki/JavaScript" target="_blank" rel="external">JavaScript</a>ã€‚</p>
<p>Netscapeç›´åˆ°1998å¹´1æœˆæ‰å‘å…¬ä¼—å…è´¹å‘æ”¾Netscape Navigatorï¼Œè€ŒIEä¸IISåˆ™ä¸€ç›´æ˜¯å…è´¹ä¸Windowsæ“ä½œç³»ç»Ÿæ†ç»‘åœ¨ä¸€èµ·çš„ã€‚</p>
<p>åœ¨MSä¸Netscapeç«äº‰æ—¶ä¹Ÿæœ‰ä¸€äº›å¥½ç©çš„äº‹ï¼Œæˆ‘è¿™é‡Œè¯´ä¸€ä»¶<a href="http://home.snafu.de/tilman/mozilla/stomps.html" target="_blank" rel="external">mozilla stomps IE</a>ã€‚</p>
<p>äº‹æƒ…çš„ç®€å•ç»è¿‡å°±æ˜¯MSåœ¨å‘å¸ƒIE4.0æ—¶ï¼ŒæŠŠä¸€ä¸ªå¾ˆå¤§çš„IE logoï¼ˆè€Œä¸”è²Œä¼¼æ˜¯ç”±â€œé‡â€é‡‘å±æ‰“é€ è€Œæˆï¼‰åœ¨Netscapeå…¬å¸å‰é¢çš„è‰åªä¸Šï¼Œè€Œä¸”æ˜¯åœ¨å¤§æ™šä¸Šçš„ï¼Œè¿™æ ·ç¬¬äºŒå¤©æœ‰å¯èƒ½ä¼šæœ‰ä¸€äº›è®°è€…çœ‹åˆ°å¹¶ä¸”å‘è¡¨å‡ºæ¥ã€‚ä½†æ˜¯äº‹æƒ…æ˜¾ç„¶æ²¡æœ‰MSæƒ³çš„é‚£ä¹ˆç®€å•ï¼ŒNetscapeä¸ä»…åœ¨å¤§æ™šä¸Šçš„å°±å‘ç°äº†ï¼Œè€Œä¸”è¿˜æŠŠä¸€ä¸ªèº«é«˜7è‹±å°ºï¼ˆå¤§çº¦2ç±³å¤šï¼‰Mozillaçš„å¡é€šåƒæ”¾åˆ°IE logoä¸Šï¼Œå¹¶ä¸”Mozillaæ‰‹ä¸Šæ‹¿è¿™ç€ä¸ªç‰Œå­ï¼Œä¸Šé¢å†™ç€â€œNetscape 72, Microsoft 18â€ï¼Œè¿™æ˜¯å½“æ—¶ä»–ä»¬çš„å¸‚åœºä»½é¢ã€‚<br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB23EOTapXXXXarXpXXXXXXXXXX_!!581166664.jpg" alt="mozilla-stomps-ie"></p>
<p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œåœ¨1998å¹´1æœˆï¼ŒNetscapeå‘åŠ¨äº†<a href="http://en.wikipedia.org/wiki/Mozilla" target="_blank" rel="external">Mozilla</a>å¼€æºé¡¹ç›®ï¼ˆå“ˆå“ˆï¼Œç»ˆäºè¿›å…¥æ­£é¢˜äº†ï¼‰ï¼ŒMozillaè¿™ä¸ªåå­—æ˜¯ç»§Netscape Navigatorä»£ç å·ä¹‹åï¼Œç”±<a href="http://en.wikipedia.org/wiki/Mosaic_%28web_browser%29" target="_blank" rel="external">Mosaic</a>ä¸<a href="http://en.wikipedia.org/wiki/Godzilla" target="_blank" rel="external">Godzilla</a>åˆæˆè€Œæ¥ã€‚<a href="http://en.wikipedia.org/wiki/Jamie_Zawinski" target="_blank" rel="external">Jamie Zawinski</a>è¯´æ˜¯åœ¨ä¸€æ¬¡Netscapeå‘˜å·¥ä¼šè®®ä¸Š<a href="http://www.davetitus.com/mozilla/" target="_blank" rel="external">æƒ³åˆ°è¿™ä¸ªåå­—çš„</a>ã€‚</p>
<p>Mozillaè¿™ä¸ªå¼€æºé¡¹ç›®ä¸€å¼€å§‹çš„ç›®çš„æ˜¯ä¸ºåƒNetscapeè¿™æ ·çš„å…¬å¸æä¾›æŠ€æœ¯æœåŠ¡ï¼Œè€Œåè¿‡æ¥Netscapeè¿™äº›å…¬å¸å¯ä»¥æŠŠ<a href="http://www-archive.mozilla.org/hacking/coding-introduction.html" target="_blank" rel="external">Mozillaçš„ä»£ç </a>å•†ä¸šåŒ–ã€‚</p>
<p>è¿™é‡Œæœ‰ä¸ª<a href="http://v.youku.com/v_show/id_XNjA2NDI2MTUy.html" target="_blank" rel="external">çºªå½•ç‰‡ã€ŠCode Rushã€‹</a>ï¼Œè®°å½•çš„æ˜¯1998å¹´3æœˆåˆ°1999å¹´4æœˆNetscapeå†…éƒ¨çš„ä¸€äº›çœŸå®æƒ…å†µï¼Œå¾ˆå€¼å¾—ä¸€çœ‹ã€‚</p>
<p>å¾ˆé—æ†¾ï¼ŒNetscapeè¿™ä¹ˆä¸€ä¸ªç”±hackerç»„æˆçš„ä¼˜ç§€å…¬å¸ä¹Ÿå…ä¸äº†è¢«æ”¶è´­çš„å‘½è¿ï¼ŒNetscapeä¸AOLçš„æ”¶è´­è°ˆåˆ¤è‡ª1998å¹´12æœˆ24å·å¼€å§‹ï¼Œåˆ°1999å¹´3æœˆ17å·ç»“æŸï¼Œæ”¶è´­åå¾ˆå¤šä¼˜ç§€çš„ç¨‹åºå‘˜ä¹Ÿé€‰æ‹©äº†ç¦»å¼€ã€‚</p>
<p>AOLæ¥ç®¡Netscapeä¹‹åä¹Ÿå‘å¸ƒè¿‡å‡ æ¬¡Navigatorçš„ç‰ˆæœ¬ï¼Œä½†åˆ°2003å¹´7æœˆï¼ŒAOLå¼€å§‹ç¼©å‡å¼€å‘Mozillaçš„æŠ•å…¥ï¼Œä¹Ÿå°±åœ¨è¿™æ—¶å€™ï¼Œ<a href="http://www.mozilla.org/en-US/press/mozilla-foundation.html" target="_blank" rel="external">mozilla.org</a>åº”æ—¶è€Œå‡ºï¼Œå®£å¸ƒæˆç«‹Mozilla Foundationï¼Œè¿™ä¹‹åï¼ŒMozilla Foundation æ”¾å¼ƒäº†Mozillaå¥—ä»¶(suite)ï¼Œè½¬è€Œç ”å‘åŠŸèƒ½ç‹¬ç«‹çš„åº”ç”¨ï¼Œä¸»è¦å°±æ˜¯<a href="http://en.wikipedia.org/wiki/Firefox" target="_blank" rel="external">Firefox</a>æµè§ˆå™¨ä¸<a href="http://en.wikipedia.org/wiki/Mozilla_Thunderbird" target="_blank" rel="external">Thunderbird</a>é‚®ä»¶å®¢æˆ·ç«¯ã€‚</p>
<p>æœ€è¿‘åœ¨ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒMozillaæ¨å‡ºäº†<a href="http://en.wikipedia.org/wiki/Firefox_OS" target="_blank" rel="external">Firefox OS</a>ï¼ŒåŸºäºWEBçš„è®¤è¯ç³»ç»Ÿ<a href="http://en.wikipedia.org/wiki/Mozilla_Persona" target="_blank" rel="external">Mozilla Persona</a>,ä»¥åŠä¸ºå¼€å‘HTML5åº”ç”¨çš„marketplaceã€‚</p>
<p>ä¸ç®¡æ€ä¹ˆè¯´ï¼Œæˆ‘è¿˜æ˜¯å¾ˆç”±è¡·çš„æ•¬ä½©ä¸Šä¸ªä¸–çºªæœ«çš„è¿™ç¾¤æœ‰æƒ³æ³•çš„hackersï¼Œä¸€æ–¹é¢ä¸ºäº†ä¸ºæŠ€æœ¯è€Œç—´è¿·ï¼Œå¦ä¸€æ–¹é¢ä¸ºäº’è”ç½‘çš„å¼€é˜”å¥ å®šäº†åŸºç¡€ã€‚</p>
<p>æœ€åæˆ‘é™„ä¸Šæˆ‘åœ¨çœ‹çºªå½•ç‰‡<a href="http://www.imdb.com/title/tt0499004/" target="_blank" rel="external">ã€ŠCode Rushã€‹</a>çš„ä¸€äº›æˆªå›¾ï¼Œå…‰çœ‹åˆ°è¿™äº›æˆªå›¾ï¼Œæˆ‘å°±èƒ½æ„Ÿåˆ°å½“æ—¶çš„ç«è¯å‘³äº†ã€‚Enjoy :-)</p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2_jO2apXXXXcHXXXXXXXXXXXX_!!581166664.png" alt=" Brendan-Eich"><br>æ²¡é”™ï¼Œå°±æ˜¯<a href="http://en.wikipedia.org/wiki/Brendan_Eich" target="_blank" rel="external">Eichè¿™å®¶ä¼™</a>ï¼Œç”¨äº†10å¤©æ—¶é—´å¼€å‘å‡ºæ¥JavaScriptï¼Œå…¶ä»–ä¸€å¼€å§‹ä»–æ˜¯æƒ³æŠŠSchemeç§»æ¤åˆ°Navigatorä¸Šçš„,åæ¥å‘ç°ä¸è¡Œï¼Œäºæ˜¯jså‡ºæ¥äº†</p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2L4eSapXXXXbtXpXXXXXXXXXX_!!581166664.png" alt=" CEO-of-mozilla"><br><a href="http://en.wikipedia.org/wiki/Jim_Barksdale" target="_blank" rel="external">Jim Barksdale</a>åœ¨çºªå½•ç‰‡çš„ç¬¬15åˆ†é’Ÿåœ¨å®¡åˆ¤å¾®è½¯å„æ–­çš„æ³•æ¡ˆæ—¶è¯´çš„ä¸€æ®µè¯ï¼š</p>
<blockquote>
<p>â€œHow many of you use Intel-based PCs in this audience, not Macintoshes?â€ Most people in the room raised their hands. â€œOf that group who use PCs? How many of you use a PC without Microsoftâ€™s operating system?â€. All of the hands went down. He said to the Senate panel, â€œGentlemen, that is a monopoly.â€</p>
</blockquote>
<p><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2d4K0apXXXXX4XpXXXXXXXXXX_!!581166664.png" alt="Tara-Hernandez"><br><a href="http://www.linkedin.com/pub/tara-hernandez/3/b26/755" target="_blank" rel="external">Tara-Hernandez</a>è¿™æ˜¯å½“æ—¶çš„æµ‹è¯•å·¥ç¨‹å¸ˆå§ï¼Œå¥¹è´Ÿè´£Navigatorä¸Šçº¿å‰çš„æœ€åæ£€æŸ¥ã€‚</p>
<p><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB28GG4apXXXXb_XXXXXXXXXXXX_!!581166664.png" alt=" Jamie-Zawinski"><br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2w7eVapXXXXacXpXXXXXXXXXX_!!581166664.png" alt=" Jamie-Zawinskiè‡ªç”±å¼€æºè½¯ä»¶å¸ƒé“å¸ˆ"><br><a href="http://en.wikipedia.org/wiki/Jamie_Zawinski" target="_blank" rel="external">Jamie-Zawinski</a>å‘å‹å¥½å¸…ï¼Œæ˜¯ä¸ªLISPç¨‹åºå‘˜ï¼Œ<a href="http://www.xemacs.org/" target="_blank" rel="external">xemacs</a>ã€<a href="http://www.jwz.org/xscreensaver/" target="_blank" rel="external">xscreensaver</a>ä½œè€…ï¼Œ<a href="http://www.jwz.org" target="_blank" rel="external">ä¸ªäººåšå®¢</a></p>
<p><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB20A96apXXXXasXXXXXXXXXXXX_!!581166664.png" alt="Jim-Roskind"><br>å“¥ï¼Œchromeå¿«æ˜¯å¿«ï¼Œä½†æ˜¯ä½ çŸ¥é“ä»–æœ‰å¤šå å†…å­˜å—ï¼<a href="http://www.roskind.com/" target="_blank" rel="external">ä¸ªäººåšå®¢</a></p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2n.S1apXXXXXfXpXXXXXXXXXX_!!581166664.png" alt=" Scott-Collins"><br>æ¯”è¾ƒä½è°ƒçš„èƒ–å­ï¼Œç½‘ä¸Šå°±æ‰¾åˆ°è¿™ä¹ˆ<a href="http://arstechnica.com/information-technology/2004/06/collins-interview/" target="_blank" rel="external">ä¸€ç¯‡å…³äºä»–çš„é‡‡è®¿</a>ã€‚</p>
<p><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2oB5QapXXXXbYXpXXXXXXXXXX_!!581166664.png" alt=" Stuart-Parmenter"><br><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2e090apXXXXXxXpXXXXXXXXXX_!!581166664.png" alt=" Stuart-Pamener2"><br>åˆæ˜¯ä¸€ä¸ªç‰›å‰çš„å°èƒ–å­ï¼Œ<a href="https://blog.mozilla.org/blog/author/pavlovmozilla-com/" target="_blank" rel="external">Mozillaå®˜æ–¹åšå®¢</a>ï¼Œåˆ›åŠ<a href="http://www.rise.us/" target="_blank" rel="external">rise</a>ï¼Œå¹¶ä¸”æ˜¯CTOã€‚</p>
<p>å¥½äº†ï¼Œçºªå½•ç‰‡æˆªå›¾å°±è¿™äº›ï¼Œçœ‹å®Œåæˆ‘è§‰å¾—ä½ ä¹Ÿä¸€å®šä¼šå¿ä¸ä½çœ‹ä¸€éå§ã€‚Go ahead, buddy!</p>
<p>æˆ‘ä»Mozillaå¼€å§‹ï¼ŒåŸºæœ¬ä¸ŠæŠŠå›´ç»•Mozillaçš„ä¸€äº›é‡è¦çš„äº‹æƒ…éƒ½æ•´ç†äº†ä¸€è¾¹ï¼Œå¤§éƒ¨åˆ†èµ„æ–™éƒ½æ¥è‡ª<a href="http://en.wikipedia.org" target="_blank" rel="external">wikipedia</a>ï¼Œæœ€åæˆ‘åœ¨å‰¯ä¸Šä¸€å¼ å›¾ï¼Œè®©å¤§å®¶äº†è§£ä¸‹æµè§ˆå™¨å‘å±•å²ä¸Šç™¾å®¶äº‰é¸£çš„åœºé¢ã€‚</p>
<p><img src="/images/Timeline_of_web_browsers.svg" alt="Timeline_of_web_browsers" title="Timeline_of_web_browsers"><br>å›¾æ¯”è¾ƒå¤§ï¼Œå»ºè®®å¤§å®¶ä¿å­˜åˆ°æœ¬åœ°åæ…¢æ…¢å“å‘³ã€‚Enjoyï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨è¿‡ Firefox çš„åŒå­¦å¤šå¤šå°‘å°‘éƒ½åº”è¯¥å¯¹ Mozilla æœ‰äº›äº†è§£ï¼ŒMozilla ä½œä¸ºä¸€è€ç‰Œè½¯ä»¶å…¬å¸ï¼Œè¯ç”Ÿäº†å¾ˆå¤šä¼ å¥‡æ€§çš„æ•…äº‹å’Œäººç‰©ï¼Œç°åœ¨å°±è®©æˆ‘ä»¬ä¸€èµ·æ¥æ¢ç´¢ä¸Šä¸ªä¸–çºªä¹åå¹´ä»£å‘ç”Ÿçš„é‚£äº›æ¿€è¡äººå¿ƒçš„æ—¶åˆ»å§ã€‚&lt;/p&gt;
&lt;p&gt;Mozillaè¿™ä¸ªè¯æœ‰ä¸‰ä¸ªå«ä¹‰:&lt;/p&gt;
&lt;ol&gt;
&lt;
    
    </summary>
    
    
      <category term="mozilla" scheme="http://liujiacai.net/tags/mozilla/"/>
    
  </entry>
  
  <entry>
    <title>Yarnæ¦‚è¿°</title>
    <link href="http://liujiacai.net/blog/2014/09/07/yarn-intro/"/>
    <id>http://liujiacai.net/blog/2014/09/07/yarn-intro/</id>
    <published>2014-09-07T14:07:51.000Z</published>
    <updated>2017-07-08T12:28:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>Yarnæ˜¯éšç€hadoopå‘å±•è€Œå‚¬ç”Ÿçš„æ–°æ¡†æ¶ï¼Œå…¨ç§°æ˜¯Yet Another Resource Negotiatorï¼Œå¯ä»¥ç¿»è¯‘ä¸ºâ€œå¦ä¸€ä¸ªèµ„æºç®¡ç†å™¨â€ã€‚yarnå–ä»£äº†ä»¥å‰hadoopä¸­jobtrackerï¼ˆåé¢ç®€å†™JTï¼‰çš„è§’è‰²ï¼Œå› ä¸ºä»¥å‰JTçš„ä»»åŠ¡è¿‡é‡ï¼Œè´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦ã€è·Ÿè¸ªã€å¤±è´¥é‡å¯ç­‰è¿‡ç¨‹ï¼Œè€Œä¸”åªèƒ½è¿è¡Œmapreduceä½œä¸šï¼Œä¸æ”¯æŒå…¶ä»–ç¼–ç¨‹æ¨¡å¼ï¼Œè¿™ä¹Ÿé™åˆ¶äº†JTä½¿ç”¨èŒƒå›´ï¼Œè€Œyarnåº”è¿è€Œç”Ÿï¼Œè§£å†³äº†è¿™ä¸¤ä¸ªé—®é¢˜ã€‚</p>
<p>ä¸ºäº†è¡¨è¿°æ¸…æ¥šï¼Œå¤§å®¶å¯ä»¥å…ˆçœ‹<a href="http://blog.csdn.net/jiacai2050/article/details/8656279" target="_blank" rel="external">hadoopç‰ˆæœ¬è¯´æ˜</a>è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘è¿™é‡Œè¦è¯´çš„æ˜¯hadoop2.0,ä¹Ÿå°±æ˜¯æ–°å¢äº†yarnä¹‹åçš„ç‰ˆæœ¬ã€‚</p>
<h2 id="1-Yarn-æˆ–ç§°MRv2"><a href="#1-Yarn-æˆ–ç§°MRv2" class="headerlink" title="1. Yarn(æˆ–ç§°MRv2)"></a>1. Yarn(æˆ–ç§°MRv2)</h2><p>YarnæŠŠjobtrackerçš„ä»»åŠ¡åˆ†è§£å¼€æ¥ï¼Œåˆ†ä¸ºï¼š</p>
<ul>
<li>ResourceManagerï¼ˆç®€å†™RMï¼‰è´Ÿè´£ç®¡ç†åˆ†é…å…¨å±€èµ„æº</li>
<li>ApplicationMasterï¼ˆç®€å†™AMï¼‰ï¼ŒAMä¸æ¯ä¸ªå…·ä½“ä»»åŠ¡å¯¹åº”ï¼Œè´Ÿè´£ç®¡ç†ä»»åŠ¡çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…çš„æ‰€æœ‰äº‹å®œ</li>
</ul>
<p>é™¤äº†ä¸Šé¢ä¸¤ä¸ªä»¥å¤–ï¼Œtasktrackerè¢«NodeManagerï¼ˆç®€å†™NMï¼‰æ›¿ä»£ï¼ŒRMä¸NMæ„æˆäº†é›†ç¾¤çš„è®¡ç®—å¹³å°ã€‚è¿™ç§è®¾è®¡å…è®¸NMä¸Šé•¿æœŸè¿è¡Œä¸€äº›è¾…åŠ©æœåŠ¡ï¼Œè¿™äº›è¾…åŠ©æœåŠ¡ä¸€èˆ¬éƒ½æ˜¯åº”ç”¨ç›¸å…³çš„ï¼Œé€šè¿‡é…ç½®é¡¹æŒ‡å®šï¼Œåœ¨NMå¯åŠ¨æ—¶åŠ è½½ã€‚ä¾‹å¦‚åœ¨yarnä¸Šè¿è¡Œmapreduceç¨‹åºæ—¶ï¼Œshuffleå°±æ˜¯ä¸€ä¸ªç”±NMåŠ è½½èµ·æ¥çš„è¾…åŠ©æœåŠ¡ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨hadoop 0.23ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œshuffleæ˜¯tasktrackerçš„ä¸€éƒ¨åˆ†ã€‚</p>
<p>ä¸æ¯ä¸ªåº”ç”¨ç›¸å…³çš„AMæ˜¯ä¸€ä¸ªæ¡†æ¶ç±»åº“ï¼Œå®ƒä¸RMæ²Ÿé€šåå•†å¦‚ä½•åˆ†é…èµ„æºï¼Œä¸NMååŒæ‰§è¡Œå¹¶ä¸”ç›‘æµ‹åº”ç”¨çš„æ‰§è¡Œæƒ…å†µã€‚åœ¨yarnçš„è®¾è®¡ä¸­ï¼Œmapreduceåªæ˜¯ä¸€ç§ç¼–ç¨‹æ¨¡å¼ï¼Œyarnè¿˜å…è®¸åƒMPI(message passing interface)ï¼ŒSparkç­‰åº”ç”¨æ„æ¶éƒ¨ç½²åœ¨yarnä¸Šè¿è¡Œã€‚</p>
<h2 id="2-Yarnè®¾è®¡"><a href="#2-Yarnè®¾è®¡" class="headerlink" title="2. Yarnè®¾è®¡"></a>2. Yarnè®¾è®¡</h2><p><img src="http://img.blog.csdn.net/20140818230608465" width="550" height="500"><br>ä¸Šå›¾æ˜¯ä¸€ä¸ªå…¸å‹çš„YARNé›†ç¾¤ã€‚å¯ä»¥çœ‹åˆ°RMæœ‰ä¸¤ä¸ªä¸»è¦æœåŠ¡ï¼š</p>
<ul>
<li>å¯æ’æ‹”çš„Schedulerï¼Œåªè´Ÿè´£ç”¨æˆ·æäº¤ä»»åŠ¡çš„è°ƒåº¦</li>
<li>ApplicationsMasterçš„ï¼ˆç®€å†™AsMï¼‰è´Ÿè´£ç®¡ç†é›†ç¾¤ä¸­æ¯ä¸ªä»»åŠ¡çš„ApplicationMasterï¼ˆç®€å†™AMï¼‰ï¼Œè´Ÿè´£ä»»åŠ¡çš„ç›‘æ§ã€å¤±è´¥é‡èµ·ç­‰</li>
</ul>
<p>åœ¨hadoop1.0æ—¶ï¼Œèµ„æºåˆ†é…çš„å•ä½æ˜¯slotï¼Œå†å…·ä½“åˆ†ä¸ºmapçš„slotä¸reduceçš„slotï¼Œè€Œä¸”è¿™äº›slotçš„ä¸ªæ•°æ˜¯åœ¨ä»»åŠ¡è¿è¡Œå‰äº‹å…ˆå®šä¹‰çš„ï¼Œåœ¨ä»»åŠ¡è¿è¡Œè¿‡ç¨‹ä¸­ä¸èƒ½æ”¹å˜ï¼Œå¾ˆæ˜æ˜¾ï¼Œè¿™ä¼šé€ æˆèµ„æºçš„åˆ†é…ä¸å‡é—®é¢˜ã€‚åœ¨haodop2.0ä¸­ï¼Œyarné‡‡ç”¨äº†containerçš„æ¦‚å¿µæ¥åˆ†é…èµ„æºã€‚æ¯ä¸ªcontainerç”±ä¸€äº›å¯ä»¥åŠ¨æ€æ”¹å˜çš„å±æ€§ç»„æˆï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œä»…æ”¯æŒå†…å­˜ã€cpuä¸¤ç§ã€‚ä½†æ˜¯yarnçš„è¿™ç§èµ„æºç®¡ç†æ–¹å¼æ˜¯é€šç”¨çš„ï¼Œç¤¾åŒºä»¥åä¼šåŠ å…¥æ›´å¤šçš„å±æ€§ï¼Œæ¯”å¦‚ç½‘ç»œå¸¦å®½ï¼Œæœ¬åœ°ç¡¬ç›˜å¤§å°ç­‰ç­‰ã€‚</p>
<h2 id="3-Yarnä¸»è¦ç»„ä»¶"><a href="#3-Yarnä¸»è¦ç»„ä»¶" class="headerlink" title="3. Yarnä¸»è¦ç»„ä»¶"></a>3. Yarnä¸»è¦ç»„ä»¶</h2><p>åœ¨è¿™å°èŠ‚é‡Œï¼Œä¸»è¦ä»‹ç»yarnå„ä¸ªç»„ä»¶ï¼Œä»¥åŠä»–ä»¬ä¹‹é—´æ˜¯å¦‚ä½•é€šä¿¡çš„ã€‚</p>
<h3 id="3-1-Client-lt-â€“-gt-RM"><a href="#3-1-Client-lt-â€“-gt-RM" class="headerlink" title="3.1 Client&lt;â€“&gt;RM"></a>3.1 Client&lt;â€“&gt;RM</h3><p><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2LOpuapXXXXXXXpXXXXXXXXXX_!!581166664.png_620x10000.jpg" width="450" height="400"></p>
<p>ä¸Šé¢è¿™ä¸ªå›¾æ˜¯Clientå‘RMæäº¤ä»»åŠ¡æ—¶çš„æµç¨‹ã€‚<br>(1) Clienté€šè¿‡New Application Requestæ¥é€šçŸ¥RMä¸­çš„AsMç»„å»º<br>(2) AsMä¸€èˆ¬ä¼šè¿”å›ä¸€ä¸ªæ–°ç”Ÿæˆçš„å…¨å±€IDï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¼ é€’çš„ä¿¡æ¯è¿˜æœ‰é›†ç¾¤çš„èµ„æºçŠ¶å†µï¼Œè¿™æ ·Clientå°±å¯ä»¥åœ¨éœ€è¦æ—¶è¯·æ±‚èµ„æºæ¥è¿è¡Œä»»åŠ¡çš„ç¬¬ä¸€ä¸ªcontainerå³AMã€‚<br>(3) ä¹‹åï¼ŒClientå°±å¯ä»¥æ„é€ å¹¶å‘é€ASCäº†ã€‚ASCä¸­åŒ…æ‹¬äº†è°ƒåº¦é˜Ÿåˆ—ï¼Œä¼˜å…ˆçº§ï¼Œç”¨æˆ·è®¤è¯ä¿¡æ¯ï¼Œé™¤äº†è¿™äº›åŸºæœ¬çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜åŒ…æ‹¬ç”¨æ¥å¯åŠ¨AMçš„CLCä¿¡æ¯ï¼Œä¸€ä¸ªCLCä¸­åŒ…æ‹¬jaråŒ…ã€ä¾èµ–æ–‡ä»¶ã€å®‰å…¨tokenï¼Œä»¥åŠè¿è¡Œä»»åŠ¡è¿‡ç¨‹ä¸­éœ€è¦çš„å…¶ä»–æ–‡ä»¶ã€‚</p>
<p>ç»è¿‡ä¸Šé¢è¿™ä¸‰æ­¥ï¼Œä¸€ä¸ªClientå°±å®Œæˆäº†ä¸€æ¬¡ä»»åŠ¡çš„æäº¤ã€‚ä¹‹åï¼ŒClientå¯ä»¥ç›´æ¥é€šè¿‡RMæŸ¥è¯¢ä»»åŠ¡çš„çŠ¶æ€ï¼Œåœ¨å¿…è¦æ—¶ï¼Œå¯ä»¥è¦æ±‚RMæ€æ­»è¿™ä¸ªåº”ç”¨ã€‚å¦‚ä¸‹å›¾ï¼š<br><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2WzhzapXXXXbcXXXXXXXXXXXX_!!581166664.png_620x10000.jpg" width="450" height="400"></p>
<h3 id="3-2-RM-lt-â€“-gt-AM"><a href="#3-2-RM-lt-â€“-gt-AM" class="headerlink" title="3.2 RM&lt;â€“&gt;AM"></a>3.2 RM&lt;â€“&gt;AM</h3><p>RMåœ¨æ”¶åˆ°Clientç«¯å‘é€çš„ASCåï¼Œå®ƒä¼šæŸ¥è¯¢æ˜¯å¦æœ‰æ»¡è¶³å…¶èµ„æºè¦æ±‚çš„containeræ¥è¿è¡ŒAMï¼Œæ‰¾åˆ°åï¼ŒRMä¼šä¸é‚£ä¸ªcontaineræ‰€åœ¨æœºå™¨ä¸Šçš„NMé€šä¿¡ï¼Œæ¥å¯åŠ¨AMã€‚ä¸‹é¢è¿™ä¸ªå›¾æè¿°äº†è¿™å…¶ä¸­çš„ç»†èŠ‚ã€‚<br><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB21l0xapXXXXcUXXXXXXXXXXXX_!!581166664.png"></p>
<p>(1) AMå‘RMæ³¨å†Œï¼Œè¿™ä¸ªè¿‡ç¨‹åŒ…æ‹¬handshakingè¿‡ç¨‹ï¼Œå¹¶ä¸”ä¼ é€’ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…æ‹¬AMç›‘å¬çš„RPCç«¯å£ã€ç”¨äºç›‘æµ‹ä»»åŠ¡è¿è¡ŒçŠ¶æ€çš„URLç­‰ã€‚<br>(2) RMä¸­çš„Scheduleréƒ¨ä»¶åšå›åº”ã€‚è¿™ä¸ªè¿‡ç¨‹ä¼šä¼ é€’AMæ‰€éœ€çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¿™ä¸ªé›†ç¾¤çš„æœ€å¤§ä¸æœ€å°èµ„æºä½¿ç”¨æƒ…å†µç­‰ã€‚AMåˆ©ç”¨è¿™äº›ä¿¡æ¯æ¥è®¡ç®—å¹¶è¯·æ±‚ä»»åŠ¡æ‰€éœ€çš„èµ„æºã€‚<br>(3) è¿™ä¸ªè¿‡ç¨‹æ˜¯AMå‘RMè¯·æ±‚èµ„æºã€‚ä¼ é€’çš„ä¿¡æ¯ä¸»è¦åŒ…å«è¯·æ±‚containerçš„åˆ—è¡¨ï¼Œè¿˜æœ‰å¯èƒ½åŒ…å«è¿™ä¸ªAMå·²ç»é‡Šæ”¾çš„containerçš„åˆ—è¡¨ã€‚<br>(4) åœ¨AMç»è¿‡(3)è¯·æ±‚èµ„æºä¹‹åï¼Œåœ¨ç¨å¾®æ™šäº›æ—¶å€™ï¼Œä¼šæŠŠå¿ƒè·³åŒ…ä¸ä»»åŠ¡è¿›åº¦ä¿¡æ¯å‘é€ç»™RM<br>(5) Scheduleråœ¨æ”¶åˆ°AMçš„èµ„æºè¯·æ±‚åï¼Œä¼šæ ¹æ®è°ƒåº¦ç­–ç•¥ï¼Œæ¥åˆ†é…containerä»¥æ»¡è¶³AMçš„è¯·æ±‚ã€‚<br>(6) åœ¨ä»»åŠ¡å®Œæˆåï¼ŒAMä¼šç»™RMå‘é€ä¸€ä¸ªç»“æŸæ¶ˆæ¯ï¼Œç„¶åé€€å‡ºã€‚</p>
<p>åœ¨ä¸Šé¢(5)ä¸(6)ä¹‹é—´ï¼ŒAMåœ¨æ”¶åˆ°RMè¿”å›çš„containeråˆ—è¡¨åï¼Œä¼šä¸æ¯ä¸ªcontaineræ‰€åœ¨æœºå™¨çš„NMé€šä¿¡ï¼Œæ¥å¯åŠ¨è¿™ä¸ªcontainerï¼Œä¸‹é¢å°±è¯´è¯´è¿™ä¸ªè¿‡ç¨‹ã€‚</p>
<h3 id="3-2-AM-lt-â€“-gt-NM"><a href="#3-2-AM-lt-â€“-gt-NM" class="headerlink" title="3.2 AM&lt;â€“&gt;NM"></a>3.2 AM&lt;â€“&gt;NM</h3><p><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2FQ4AapXXXXaDXXXXXXXXXXXX_!!581166664.png"><br>(1) AMå‘containeræ‰€åœ¨æœºå™¨çš„NMå‘é€CLCæ¥å¯åŠ¨container<br>(2)(3) åœ¨containerè¿è¡Œè¿‡ç¨‹ä¸­ï¼ŒAMå¯ä»¥æŸ¥è¯¢å®ƒçš„è¿è¡ŒçŠ¶æ€</p>
<h2 id="4-API"><a href="#4-API" class="headerlink" title="4. API"></a>4. API</h2><p>é€šè¿‡ä¸Šé¢çš„æè¿°ï¼Œå¼€å‘è€…åœ¨å¼€å‘YARNä¸Šçš„åº”ç”¨æ—¶ä¸»è¦éœ€è¦å…³æ³¨ä»¥ä¸‹æ¥å£ï¼š</p>
<ul>
<li><p><a href="http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/yarn/api/ApplicationClientProtocol.html" target="_blank" rel="external">ApplicationClientProtocol</a></p>
<blockquote>
<p>Clientä½¿ç”¨è¿™ä¸ªåè®®æ¥ä¸RMé€šä¿¡ï¼Œæ¥å¯åŠ¨ä¸€ä¸ªæ–°åº”ç”¨ï¼Œæ£€æŸ¥ä»»åŠ¡çš„è¿è¡ŒçŠ¶æ€æˆ–æ€æ­»ä»»åŠ¡</p>
</blockquote>
</li>
<li><p><a href="http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/yarn/api/ApplicationMasterProtocol.html" target="_blank" rel="external">ApplicationMasterProtocol</a></p>
<blockquote>
<p>AMä½¿ç”¨è¿™ä¸ªåè®®æ¥å‘RMæ³¨å†Œ/æ’¤é”€ï¼Œè¯·æ±‚èµ„æºæ¥è¿è¡Œä»»åŠ¡ã€‚</p>
</blockquote>
</li>
<li><p><a href="http://hadoop.apache.org/docs/stable/api/org/apache/hadoop/yarn/api/ContainerManagementProtocol.html" target="_blank" rel="external">ContainerManagementProtocol</a></p>
<blockquote>
<p>AMä½¿ç”¨è¿™ä¸ªåè®®æ¥ä¸NMé€šä¿¡ï¼Œæ¥å¯åŠ¨/åœæ­¢containerï¼ŒæŸ¥è¯¢containerçš„çŠ¶æ€ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="5-æ€»ç»“"><a href="#5-æ€»ç»“" class="headerlink" title="5. æ€»ç»“"></a>5. æ€»ç»“</h2><p>ç”¨æˆ·åœ¨ä½¿ç”¨hadoop1.0 APIç¼–å†™çš„MapReduceå¯ä»¥ä¸ç”¨ä¿®æ”¹ç›´æ¥è¿è¡Œåœ¨yarnä¸Šï¼Œä¸è¿‡éšç€yarnçš„å‘å±•ï¼Œå‘åå…¼å®¹æ€§è¿˜ä¸çŸ¥é“æ€ä¹ˆæ ·ã€‚ä¸ç®¡æ€æ ·ï¼Œæ–°çš„yarnå¹³å°ç»å¯¹å€¼å¾—æˆ‘ä»¬ä½¿ç”¨ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Yarnæ˜¯éšç€hadoopå‘å±•è€Œå‚¬ç”Ÿçš„æ–°æ¡†æ¶ï¼Œå…¨ç§°æ˜¯Yet Another Resource Negotiatorï¼Œå¯ä»¥ç¿»è¯‘ä¸ºâ€œå¦ä¸€ä¸ªèµ„æºç®¡ç†å™¨â€ã€‚yarnå–ä»£äº†ä»¥å‰hadoopä¸­jobtrackerï¼ˆåé¢ç®€å†™JTï¼‰çš„è§’è‰²ï¼Œå› ä¸ºä»¥å‰JTçš„ä»»åŠ¡è¿‡é‡ï¼Œè´Ÿè´£ä»»åŠ¡çš„è°ƒåº¦ã€è·Ÿè¸ªã€å¤±è´¥
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://liujiacai.net/categories/bigdata/"/>
    
    
      <category term="hadoop" scheme="http://liujiacai.net/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>ä¸¤ä¸ªæ°´å£¶é—®é¢˜</title>
    <link href="http://liujiacai.net/blog/2014/08/16/two-pot-question/"/>
    <id>http://liujiacai.net/blog/2014/08/16/two-pot-question/</id>
    <published>2014-08-16T05:04:37.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>é—®é¢˜æè¿°æ˜¯è¿™æ ·çš„ï¼š<br>å‡è®¾æœ‰ä¸€ä¸ªæ± å¡˜ï¼Œé‡Œé¢æœ‰æ— ç©·å¤šçš„æ°´ã€‚ç°æœ‰2ä¸ªç©ºæ°´å£¶aï¼Œbï¼Œå…¶å®¹ç§¯åˆ†åˆ«ä¸º6å‡å’Œ5å‡ã€‚å¦‚ä½•åªç”¨è¿™2ä¸ªæ°´å£¶ä»æ± å¡˜é‡Œå–å¾—3å‡çš„æ°´**ï¼ˆæœ€åï¼Œè¿™ä¸‰å‡æ°´ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªå£¶é‡Œï¼‰ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜ä¸éš¾ï¼Œå¤§å®¶è‡ªå·±å®Œæˆå¯ä»¥æ¨ç†å‡ºæ¥ï¼Œä½†æ˜¯å¦‚ä½•è®©è®¡ç®—æœºç¨‹åºè‡ªå·±æ¨ç®—å‡ºæ¥å‘¢ï¼Ÿä¸€èˆ¬è€Œè¨€ï¼Œæƒ³æŠŠè®¡ç®—æœºç†è§£è¿™äº›è‡ªç„¶é—®é¢˜ï¼Œéœ€è¦æŸäº›æ•°å­¦ç†è®ºä½œä¸ºæ”¯æ’‘ï¼Œè¿™é‡Œçªç„¶æƒ³èµ·å‰äº›å¤©çœ‹<a href="http://www.ituring.com.cn/article/117596" target="_blank" rel="external">ç å†œ13æœŸLispä¹‹çˆ¶çº¦ç¿°â€¢éº¦å¡é”¡â€”â€”ä¸èµ°å¯»å¸¸è·¯çš„å¸¸è¯†é€»è¾‘å­¦å®¶</a>çš„ä¸€æ®µå…³äºç”¨é€»è¾‘æè¿°äº‹å®çš„è¯ï¼š</p>
<blockquote>
<p>åˆ©ç”¨é€»è¾‘è¡¨è¾¾ä¸–ç•Œä¸­çš„äº‹å®çš„è¿›å±•ä¸€ç›´éƒ½å¾ˆç¼“æ…¢ã€‚äºšé‡Œå£«å¤šå¾·æ²¡æœ‰å‘æ˜å½¢å¼ä½“ç³»ã€‚è±å¸ƒå°¼èŒ¨æ²¡æœ‰å‘æ˜å‘½é¢˜æ¼”ç®—ï¼Œå°½ç®¡è¿™ç§å½¢å¼ä½“ç³»æ¯”ä»–å’Œç‰›é¡¿åŒæ—¶å‘æ˜çš„å¾®ç§¯åˆ†æ›´åŠ ç®€å•ã€‚ä¹”æ²»Â·å¸ƒå°”å‘æ˜äº†å‘½é¢˜æ¼”ç®—ï¼Œå´æ²¡æœ‰å‘æ˜è°“è¯æ¼”ç®—ã€‚æˆˆç‰¹æ´›å¸ƒÂ·å¼—é›·æ ¼å‘æ˜äº†è°“è¯æ¼”ç®—ï¼Œä½†ä»æœªå°è¯•è¿‡å°†éå•è°ƒæ¨ç†å½¢å¼åŒ–ã€‚æˆ‘æƒ³æˆ‘ä»¬äººç±»æ˜ç™½ï¼Œè¦æ˜ç¡®åœ°è¡¨å¾æˆ‘ä»¬æ€ç»´è¿‡ç¨‹ä¸­çš„å„ç§äº‹å®ï¼Œè¡¨é¢æ¥çœ‹ä¼¼ä¹ç®€å•ï¼Œå®é™…ä¸Šæ˜¯å¾ˆå›°éš¾çš„ã€‚</p>
</blockquote>
<p>æˆ‘è§‰å¾—å¤§å®¶å¯ä»¥åœ¨çœ‹å®Œæˆ‘è¿™ç¯‡æ–‡ç« åå»å®Œæ•´çš„çœ‹çœ‹è¿™ç¯‡æ–‡ç« ã€‚</p>
<p>è¨€å½’æ­£è½¬ï¼Œæ¥ç€è¯´å’±ä»¬çš„æ°´å£¶é—®é¢˜ã€‚</p>
<p>çœ‹åˆ°è¿™ç§ç±»ä¼¼çš„é¢˜ç›®ï¼Œæˆ‘å°±ç‰¹æƒ³çŸ¥é“ï¼Œé¢˜ç›®è¦æ±‚æˆ‘ä»¬å–å¾—3å‡æ°´ï¼Œä¸ºä»€ä¹ˆä¸æ˜¯2å‡æˆ–4å‡ï¼Œè¿™å…¶ä¸­æ˜¯ä¸æ˜¯è¯´æœ‰äº›å€¼å–ä¸åˆ°ï¼Œæ¢ä¸€ä¸ªé€šä¿—è¯´æ³•ï¼Œç»™äº†å®¹é‡ä¸ºaï¼Œbçš„ä¸¤ä¸ªæ°´å£¶ï¼Œèƒ½å¤Ÿå–å‡ºï¼ˆæµ‹é‡å‡ºï¼‰çš„æ°´çš„ä½“ç§¯å¯ä»¥æ˜¯å¤šå°‘ï¼Ÿæ˜¯ä¸æ˜¯æœ‰ä¸ªå…¬å¼å¯ä»¥å¥—ç”¨ï¼Ÿ</p>
<p>æˆ‘è§‰å¾—è¿™ç§å¯¹äºé¢˜ç›®æœ¬èº«çš„åé—®å¯¹äºç†è§£é¢˜ç›®æœ¬èº«ååˆ†æœ‰å¸®åŠ©ï¼Œå®ƒèƒ½å¤Ÿæœ‰åŠ©äºä½ çœ‹å‡ºé¢˜ç›®åˆ°åº•æƒ³è€ƒæŸ¥é‚£éƒ¨åˆ†æ•°å­¦çŸ¥è¯†ï¼Œæˆ‘ä»¬ç›®å‰æ°´å¹³è§£å†³çš„é—®é¢˜éƒ½æ˜¯æœ‰æ®å¯å¯»çš„ï¼Œä¹Ÿå°±æ˜¯è¯´è‚¯å®šæ˜¯è€ƒæŸ¥çš„å¯¹æŸä¸€ä¸ªæˆ–å¤šä¸ªçŸ¥è¯†ç‚¹çš„ç†è§£ä¸è¿ç”¨ï¼ˆå½“ç„¶ï¼Œç‰›äººä»¬é‡åˆ°çš„é—®é¢˜å¯èƒ½éœ€è¦è‡ªå·±åˆ›é€ æ–°ç†è®ºï¼‰ã€‚</p>
<p>æŠŠæˆ‘ä¸Šé¢çš„çŒœæµ‹ç”¨æ•°å­¦è¯­è¨€æè¿°å‡ºæ¥å°±æ˜¯</p>
<blockquote>
<p>5x+6y=n   #æˆ‘ä»¬è¿™ä¸ªé¢˜ç›®n=3</p>
</blockquote>
<p>çœ‹åˆ°è¿™é‡Œï¼Œå¦‚æœä½ çš„æ•°å­¦è¿˜ç®—å¯ä»¥ï¼Œåº”è¯¥ä¼šæƒ³åˆ°æ•°è®ºä¸­ä¸‹çš„çš„å®šç†ï¼š</p>
<blockquote>
<p>å¦‚æœgcd(x,y) = 1  #gcdå‡½æ•°ç”¨ä»¥è®¡ç®—ä¸¤ä¸ªæ•°çš„æœ€å¤§å…¬çº¦æ•°greatest common divisorç®€å†™<br>é‚£ä¹ˆè‚¯å®šæœ‰æ•´æ•°ï¼ˆæ­£çš„æˆ–è´Ÿçš„ï¼‰mä¸nï¼Œä½¿å¾—<br>mx + ny = 1</p>
</blockquote>
<p>å¤§å®¶ä»ç›´è§‚ä¸Šä¹Ÿå¾ˆå¥½ç†è§£è¿™ä¸ªå®šç†ï¼Œä¸¤ä¸ªæ•°çš„çº¿æ€§ç»„åˆè‚¯å®šæ˜¯èƒ½å‡‘å‡ºå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°çš„å‘€ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœè¿™é‡Œçš„aï¼Œbä¸¤ä¸ªæ°´å£¶çš„ä½“ç§¯äº’è´¨ï¼Œå¯ä»¥æµ‹é‡å‡ºçš„æ°´çš„èŒƒå›´xæ˜¯</p>
<blockquote>
<p>1&lt;=x&lt;=max(a,b)</p>
</blockquote>
<p>å¾ˆå¤šé¢˜ç›®å‡ºçš„æ—¶å€™ï¼ˆæ¯”å¦‚æœ¬é¢˜ï¼‰ï¼Œä¸€èˆ¬ä¹Ÿéƒ½ä¼šè®©aï¼Œbäº’è´¨ï¼Œå› ä¸ºè¿™æ ·æ›´å…·æœ‰ä¸€èˆ¬æ€§ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬çŸ¥é“åœ¨ç»™å®šæ°´å£¶å®¹é‡ä¸º5å‡ä¸6å‡çš„å‰æä¸‹ï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿæµ‹é‡å‡ºä½“ç§¯ä¸º3å‡çš„æ°´äº†ï¼Œä¸‹é¢å°±æ˜¯å¦‚ä½•å¦‚ä½•æ“ä½œäº†ï¼Œå¤„äº21ä¸–çºªçš„æˆ‘ä»¬æ˜¯å¹¸è¿çš„ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜æ—©åœ¨2000å¤šå¹´å‰ï¼Œå°±è¢«æ¬§å‡ é‡Œå¾—ç»™è§£å†³äº†ã€‚æ²¡é”™å°±æ˜¯<a href="http://zh.wikipedia.org/wiki/%E8%BE%97%E8%BD%AC%E7%9B%B8%E9%99%A4%E6%B3%95" target="_blank" rel="external">è¾—è½¬ç›¸é™¤æ³•</a>ã€‚è¿™ä¸ªæ–¹æ³•å¤§å®¶æ—©å°±åœ¨ä¸­å­¦é˜¶æ®µå°±ç›´æ¥æ¥è§¦äº†ï¼Œä½†è¿™ä¸ªç®—æ³•æœ¬èº«æ‰€è•´æ¶µçš„ä¸œè¥¿è¿œæ¯”è¯¾æœ¬ä¸Šé‚£äº›å…¬å¼æ¥çš„æ·±åˆ»ã€‚ä½†ä¸ºäº†æè¿°ï¼Œè¿˜æ˜¯è¦ç”¨å…¬å¼ï¼Œ</p>
<blockquote>
<p>gcd(a,b)=gcd(b,a-b) #è¿™é‡Œå‡è®¾a&gt;b</p>
</blockquote>
<p>ä¸Šé¢è¿™ä¸ªå°±æ˜¯è¾—è½¬ç›¸é™¤æ³•çš„ç²¾é«“ï¼Œç®€æ´(simple)å·§å¦™(ingenious)ï¼Œè€Œè¿™å°±æ˜¯<a href="http://www.oxforddictionaries.com/us/definition/american_english/elegant?q=elegant" target="_blank" rel="external">ä¼˜é›…ï¼ˆelegantï¼‰</a>ã€‚</p>
<p>æŠŠè¾—è½¬ç›¸é™¤æ³•è¿ç”¨åˆ°æˆ‘ä»¬çš„ä¸¤ä¸ªæ°´å£¶aï¼ˆ6å‡ï¼‰ï¼Œbï¼ˆ5å‡ï¼‰ä¸Šï¼Œå°±æ˜¯ä¸æ–­æŠŠaçš„æ°´å‘bé‡Œé¢å€’ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p>
<ol>
<li>æŸ¥çœ‹aï¼Œbå£¶ä¸­æ°´çš„ä½“ç§¯æ˜¯å¦ä¸ºç›®æ ‡tï¼ˆæˆ‘ä»¬è¿™ä¸ªé¢˜ç›®ä¸­t=3å‡ï¼‰ï¼Œå¦‚æœæ˜¯ï¼Œåœæ­¢è¿ç®—ï¼Œå¦åˆ™åˆ°2</li>
<li>å¦‚æœaå£¶ç©ºï¼Œå°±è£…æ»¡ï¼Œå¦åˆ™ï¼Œåˆ°3</li>
<li>å¦‚æœaå£¶æ»¡ï¼Œå°±æŠŠæ°´å€’æ‰ï¼Œå¦åˆ™åˆ°4</li>
<li>å°½å¯èƒ½å¤šçš„ä»aå£¶å‘bå£¶å€’æ°´</li>
</ol>
<p>é‡å¤é€’å½’æ‰§è¡Œæ­¥éª¤1-4å³å¯å¾—åˆ°æœ€ç»ˆçš„ç»“æœã€‚<br>è¿™æ ·åšå¯è¡Œï¼ŒåŸå› å¯ä»¥ä»ä¸¤æ–¹é¢è®²ï¼š</p>
<ol>
<li>å› ä¸ºaï¼Œbå£¶å®¹é‡äº’è´¨ï¼Œæ‰€ä»¥åœ¨ä¸æ–­é‡å¤1-4æ—¶è‚¯å®šä¼šæµ‹é‡å‡ºä½“ç§¯ä¸º1å‡çš„æ°´æ¥ï¼ˆæˆ‘ä»¬è¿™é‡Œå¯ä»¥åˆ¤æ–­1å‡æ°´ç¬¬ä¸€æ¬¡å‡ºç°ä¸€å®šåœ¨aå£¶é‡Œï¼Œå› ä¸º6-5=1,ä¹Ÿå°±æ˜¯è¯´åªéœ€è¦è¿›è¡Œä¸€è¾¹1-4æ­¥éª¤ï¼Œå°±èƒ½å¤Ÿå¾—åˆ°1å‡æ°´ï¼‰</li>
<li>ä¸ºäº†å¾—åˆ°æˆ‘ä»¬çš„ç›®æ ‡â€”â€”3å‡æ°´ï¼Œæˆ‘ä»¬ä»6-5=1è¿™ä¸ªç®—å¼åˆ†æï¼Œåªè¦ç­‰å·ä¸¤è¾¹åŒæ—¶ä¹˜ä»¥3,å°±èƒ½å¾—åˆ°æˆ‘ä»¬çš„ç›®æ ‡ï¼Œæ‰€ä»¥è¯´æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠç©ºå£¶aåŠ æ»¡3æ¬¡ï¼ŒæŠŠè£…æ»¡æ°´çš„bå£¶å€’æ‰3æ¬¡ï¼Œå°±èƒ½å¾—åˆ°ç»“æœã€‚</li>
</ol>
<p>æˆ‘æƒ³åˆ†æåˆ°è¿™é‡Œï¼Œä½ ä¹Ÿè‚¯å®šæ˜¯å¤§è…¿ä¸€æ‹ï¼Œâ€œåŸæ¥è¿™ä¹ˆç®€å•ï¼Œå°å­¦æ•°å­¦å˜›â€ï¼</p>
<p>ä½†å…¶å®æˆ‘ä»¬åˆ°è¿™é‡Œåªæ˜¯æˆåŠŸäº†ä¸€åŠï¼Œå› ä¸ºgcd(a,b)=gcd(b,a)ï¼Œå¯¹åº”æˆ‘ä»¬è¿™ä¸ªé¢˜ï¼Œå°±æ˜¯è¯´aå£¶å‘bå£¶å€’èƒ½å¾—åˆ°æœ€ç»ˆ3å‡æ°´ï¼Œbå‘aå€’ä¹Ÿèƒ½å¾—åˆ°æœ€ç»ˆçš„3å‡æ°´ã€‚</p>
<p>è¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†å…¶å®è¿™æ¶‰åŠåˆ°æˆ‘ä»¬å¯¹æ•°å­—ï¼Œè´Ÿæ•°ä¸€äº›æœ¬è´¨ä¸Šçš„ç†è§£ï¼Œæˆ‘è¿™é‡Œæœ‰æ”¶è—çš„<a href="http://pan.baidu.com/s/1i321Tvn" target="_blank" rel="external">Matrix67å¤§ç¥ä¸€ä¸ªå…³äºè´Ÿæ•°çš„è§†é¢‘</a>ï¼Œå¤§å®¶å¯ä»¥è‡ªè¡Œçœ‹ä¹‹ï¼ŒMatrix67è¿™ä¹ˆæ€»ç»“äº†ä¸€å¥ï¼šè´Ÿæ•°çš„çœŸæ­£æ¶µä¹‰æ˜¯æŠŠå‡æ³•å˜ä¸ºåŠ æ³•ã€‚å¥½äº†åˆ°è¿™é‡Œä¸€åˆ‡æ˜æœ—äº†ï¼Œæˆ‘ä»æ–°æ•´ç†ä¸€éã€‚</p>
<blockquote>
<p>gcd(5,6)=gcd(5,5+(-6))=gcd(6,5)=gcd(6,6+(-5))</p>
</blockquote>
<p>ä¹Ÿå°±æ˜¯è¯´ä¸ç®¡æˆ‘ä»¬æ˜¯ä»aå‘bå€’æ°´ï¼Œè¿˜æ˜¯ä»bå‘aå€’æ°´ï¼Œå…¶æœ¬è´¨ä¸Šè¿›è¡Œçš„éƒ½æ˜¯åŠ æ³•æ“ä½œã€‚å¦‚æœä½ å¯¹è¿™å¥è¯è¿˜æ˜¯æœ‰ç–‘é—®ï¼Œæƒ³æƒ³Matrix67è¯´çš„ï¼Œä»€ä¹ˆæ ·çš„åŠ¨ç‰©æœ‰è´Ÿæ•°åªè…¿å§ã€‚</p>
<p>é€šè¿‡ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬è§£é¢˜çš„æœ€ç»ˆæ€è·¯ç»Ÿä¸€èµ·æ¥äº†ï¼Œéƒ½æ˜¯ç”¨çš„åŠ æ³•ã€‚å†ä¸€æ¬¡è¯æ˜äº†ä¼˜é›…çš„å«ä¹‰â€”â€”ç®€æ´å·§å¦™ã€‚</p>
<p>ç†è®ºéƒ¨åˆ†ç®—æ˜¯è¯´å®Œäº†ï¼Œä¸‹é¢ç¼–ç å®ç°äº†ï¼Œæˆ‘è¿™é‡Œé‡‡ç”¨äº†Clojureè¯­è¨€ï¼Œå¥½ä¹…æ²¡ç”¨äº†ï¼Œå¤ä¹ ä¸€ä¸‹ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">(defn gcd [a b]</div><div class="line">  (if (zero? b)</div><div class="line">    a</div><div class="line">    (recur b (rem a b))))</div><div class="line"></div><div class="line">(defn pot[t a b] ;tè¡¨ç¤ºç›®æ ‡å®¹é‡;aï¼Œbè¡¨ç¤ºä¸¤ä¸ªå£¶çš„å®¹é‡</div><div class="line">  (defn solve[p q]</div><div class="line">    (let [pour-volumn #(min p (- b q))] ;è¿”å›aå£¶èƒ½å¤Ÿå‘bå£¶å€’å…¥çš„æœ€å¤§å€¼</div><div class="line">      (println &quot; -&gt; &quot; p &quot; &quot; q)    </div><div class="line">      (cond</div><div class="line">        (or (= p t) (= q t)) (println &quot;------- OK! ------&quot;)</div><div class="line">        (= p 0) (do (print &quot;Fill A full&quot;) (solve a q))</div><div class="line">        (= q b) (do (print &quot;Empty pot B&quot;) (solve p 0))</div><div class="line">        :else (do (print &quot;Pour A to B&quot;) (solve (- p (pour-volumn)) (+ q (pour-volumn)))))))</div><div class="line">  (cond</div><div class="line">    (or (&lt; a 1) (&lt; b 1) (&lt; t 0) (&gt; t (max a b))) (print &quot;Arg out of range&quot;)</div><div class="line">    (not (= (rem t (gcd a b)) 0)) (print &quot;No solve!&quot;)</div><div class="line">    :else</div><div class="line">      (do (print &quot;Start with &quot;) (solve 0 0))))</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯REPLä¸­çš„è°ƒç”¨ç»“æœï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">user=&gt; (pot 3 5 6)</div><div class="line">Start with  -&gt;  0   0</div><div class="line">Fill A full -&gt;  5   0</div><div class="line">Pour A to B -&gt;  0   5</div><div class="line">Fill A full -&gt;  5   5</div><div class="line">Pour A to B -&gt;  4   6</div><div class="line">Empty pot B -&gt;  4   0</div><div class="line">Pour A to B -&gt;  0   4</div><div class="line">Fill A full -&gt;  5   4</div><div class="line">Pour A to B -&gt;  3   6</div><div class="line">------- OK! ------</div><div class="line"></div><div class="line">user=&gt; (pot 3 6 5)</div><div class="line">Start with  -&gt;  0   0</div><div class="line">Fill A full -&gt;  6   0</div><div class="line">Pour A to B -&gt;  1   5</div><div class="line">Empty pot B -&gt;  1   0</div><div class="line">Pour A to B -&gt;  0   1</div><div class="line">Fill A full -&gt;  6   1</div><div class="line">Pour A to B -&gt;  2   5</div><div class="line">Empty pot B -&gt;  2   0</div><div class="line">Pour A to B -&gt;  0   2</div><div class="line">Fill A full -&gt;  6   2</div><div class="line">Pour A to B -&gt;  3   5</div><div class="line">------- OK! ------</div></pre></td></tr></table></figure></p>
<p>é¢˜ç›®æ¥æºï¼š</p>
<p><a href="http://www.ituring.com.cn/article/117608" target="_blank" rel="external">http://www.ituring.com.cn/article/117608</a></p>
<p>PSï¼šç¬¬ä¸€æ¬¡å†™ç®—æ³•æ–¹é¢çš„æ€»ç»“ï¼Œå…¶å®æœ‰äº›è§‚ç‚¹å¾ˆæ—©å‰å°±æœ‰äº†ï¼Œä½†æ˜¯ä¸€ç›´å­˜åœ¨äºè„‘æµ·ä¸­ï¼Œç°åœ¨å†™å‡ºæ¥è§‰å¾—ä¸ä¸€å®šèƒ½å¤Ÿæè¿°æ¸…æ¥šï¼Œæ„Ÿè§‰å¾ˆå¤šåœ°æ–¹å†™çš„æœ‰äº›ç½—å—¦ï¼Œåº”è¯¥æ˜¯è¿˜æ²¡ç†è§£é€ï¼Œä»¥åæœ‰äº†æ›´æ·±åˆ»çš„ç†è§£å†æ¥ä¿®æ”¹å§ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é—®é¢˜æè¿°æ˜¯è¿™æ ·çš„ï¼š&lt;br&gt;å‡è®¾æœ‰ä¸€ä¸ªæ± å¡˜ï¼Œé‡Œé¢æœ‰æ— ç©·å¤šçš„æ°´ã€‚ç°æœ‰2ä¸ªç©ºæ°´å£¶aï¼Œbï¼Œå…¶å®¹ç§¯åˆ†åˆ«ä¸º6å‡å’Œ5å‡ã€‚å¦‚ä½•åªç”¨è¿™2ä¸ªæ°´å£¶ä»æ± å¡˜é‡Œå–å¾—3å‡çš„æ°´**ï¼ˆæœ€åï¼Œè¿™ä¸‰å‡æ°´ï¼Œåœ¨å…¶ä¸­ä¸€ä¸ªå£¶é‡Œï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé—®é¢˜ä¸éš¾ï¼Œå¤§å®¶è‡ªå·±å®Œæˆå¯ä»¥æ¨ç†å‡ºæ¥ï¼Œä½†æ˜¯å¦‚ä½•è®©è®¡ç®—æœºç¨‹åºè‡ªå·±æ¨ç®—å‡ºæ¥å‘¢
    
    </summary>
    
      <category term="ç®—æ³•" scheme="http://liujiacai.net/categories/algorithm/"/>
    
    
      <category term="gcd" scheme="http://liujiacai.net/tags/gcd/"/>
    
  </entry>
  
  <entry>
    <title>inter- intra- cept -ee -erè¯ç¼€è®²è§£</title>
    <link href="http://liujiacai.net/blog/2014/08/09/inter-intra-cept-ee-er/"/>
    <id>http://liujiacai.net/blog/2014/08/09/inter-intra-cept-ee-er/</id>
    <published>2014-08-09T07:46:12.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ•…äº‹æ˜¯è¿™ä¹ˆå¼€å§‹çš„ï¼Œæˆ‘é‡åˆ°äº†inter-organizationalä¸intra-organizationalè¿™ä¹ˆä¸¤ä¸ªè¯ç»„ï¼Œå…¶å®ä¹Ÿå¾ˆå¥½åŒºåˆ†ï¼Œå‰é¢æ˜¯â€œä¸åŒç»„ç»‡ä¹‹é—´çš„â€ï¼Œåè€…æ˜¯â€œåŒä¸€ç»„ç»‡å†…éƒ¨çš„â€ï¼Œæè®¡ç®—æœºçš„åº”è¯¥çŸ¥é“æœ‰ä¸ªå«intranetçš„ç½‘ï¼Œå®ƒæ˜¯ä¸internetä¸ä¸€æ ·çš„ï¼Œä¸“æŒ‡ä¼ä¸šå†…éƒ¨ç½‘ç»œã€‚æˆ‘è¿™é‡Œæƒ³ä»¥è¿™ä¸¤ä¸ªè¯ç¼€ä¸ºåŸºå‡†ï¼Œå±•å¼€ä¸€ç³»åˆ—è”æƒ³ï¼Œå­¦è‹±è¯­çš„ä¹è¶£ä¸å°±åœ¨äºæ­¤å˜›ã€‚</p>
<p>##inter-<br>a prefix occurring in loanwords from Latin, where it meant â€œbetween,â€ â€œamong,â€ â€œin the midst of,â€ â€œmutually,â€ â€œreciprocally,â€ â€œtogether,â€ â€œduringâ€</p>
<blockquote>
<p>interceptã€€æ‹¦æˆªã€‚åœ¨é‡Œé¢ï¼ˆinterï¼‰æ¡ä½ï¼ˆceptï¼‰ï¼Œæƒ³æƒ³å°æ—¶ä¾¯ç«™åœ¨æ²³é‡Œç”¨æ‰‹æŠ“é±¼çš„åœºæ™¯å§</p>
<blockquote>
<p>ceptä¹Ÿæ˜¯è¯æ ¹ï¼Œæ„ä¸ºtakeã€holdã€seizeâ€œæ‹¿ï¼ŒæŠ“ï¼Œæ¡ä½â€<br>deceptiveã€€deå+ceptæ‹¿,æŠ“,æ¡ä½+iveâ€¦â€¦çš„â†’æ‹¿åçš„ä¸œè¥¿æ¥â†’éª—äººçš„ï¼› é ä¸ä½çš„ï¼› è¿·æƒ‘çš„ï¼› è™šä¼ªçš„<br>susceptibleã€€sus+cept+ibleâ†’èƒ½è¢«æ‹¿ä¸‹â†’æ˜“å—å½±å“</p>
<blockquote>
<p>suså‰ç¼€ï¼Œè¡¨ç¤ºåœ¨â€¦ä¸‹é¢<br>suspect(sus+pectçœ‹â†’åœ¨ä¸‹é¢çœ‹ä¸€çœ‹â†’æ€€ç–‘)<br>suspendæ‚¬æŒ‚ï¼Œä¸­æ­¢(sus+pendæŒ‚â†’æŒ‚åœ¨ä¸‹é¢â†’æ‚¬æŒ‚)<br>suspireå¹æ¯ï¼Œæ¸´æœ›(sus+spirå‘¼å¸+eâ†’å–æœ›)</p>
<blockquote>
<p>conspire æé˜´è°‹ï¼› ååŠ›ä¿ƒæˆ (conå…±åŒ+spir+eâ†’ä¸€èµ·å‘¼å¸â†’å…±è°‹ã€é˜´è°‹)</p>
</blockquote>
<p>sustainæ”¯æ’‘;æ‰¿å—(sus+tainæ¡ä½â†’åœ¨ä¸‹é¢æ¡ä½â†’æ”¯æ’‘)</p>
</blockquote>
<p>accept(acå†+ceptæ‹¿,æŠ“,æ¡ä½â†’ä¸€å†æ‹¿â†’æ¥å—)<br>excepté™¤å¤– (exå‡º+ceptæ‹¿,æŠ“,æ¡ä½â†’æ‹¿å‡º)<br>perceptionç†è§£;æ„ŸçŸ¥,æ„Ÿè§‰ (perå…¨éƒ¨+ceptæ‹¿,æŠ“,æ¡ä½+ionçŠ¶æ€â†’å…¨éƒ¨æŠ“ä½â†’ç†è§£;æ„ŸçŸ¥)<br>conceptè§‚å¿µ, æ¦‚å¿µ (conå…±åŒ+ceptæ‹¿,æŠ“,æ¡ä½â†’å…±åŒæŠŠæ¡â†’å…±åŒçš„æƒ³æ³•â†’è§‚å¿µ,æ¦‚å¿µ)<br>receiptæ”¶æ®,æ”¶åˆ° (reå†+ceipt=ceptæŠ“â†’å†æ¬¡æ‹¿åˆ°â†’å¾—åˆ°çš„æ”¶æ®)</p>
</blockquote>
<p>interest(interåœ¨â€¦â€¦ä¸­+estå­˜åœ¨,å®è´¨â†’å®è´¨åœ¨ä»€ä¹ˆé‡Œé¢â†’å…´è¶£ï¼Œçˆ±å¥½ï¼Œåˆ©ç›Š)</p>
</blockquote>
<p>è§£é‡Šinter-å«ä¹‰æ—¶å‡ºç°äº†ä¸ªè¯loanwordï¼Œloanå°±æ˜¯è´·æ¬¾çš„æ„æ€ï¼Œé‚£loanæ¥ï¼‹wordå­—â†’å¤–æ¥è¯ï¼Œå€Ÿç”¨è¯ã€‚</p>
<p>##intra-<br>a prefix meaning â€œwithin,â€ used in the formation of compound words</p>
<blockquote>
<p>intramuralæ ¡å†…çš„(åä¹‰intermural)ï¼›å¸‚å†…çš„(åä¹‰extramural)(intra+muralæŠ½è±¡æ¦‚å¿µçš„â€å¢™â€)<br>intra respiration èƒå†…å‘¼å¸</p>
</blockquote>
<p>è¯´å®è¯ï¼Œeeã€eråç¼€æ˜¯æˆ‘çœ‹åˆ°loanåæƒ³åˆ°çš„</p>
<p>##-ee</p>
<ol>
<li><p>a suffix forming from transitive verbs nouns which denote a person who is the object or beneficiary of the act specified by the verb ( addressee; employee; grantee  ); recent formations now also mark the performer of an act, with the base being an intransitive verb ( escapee; returnee; standee ) or, less frequently, a transitive verb ( attendee  ) or another part of speech ( absentee; refugee  ).<br>æˆ‘ç®€å•ç¿»è¯‘ä¸‹ä¸Šé¢çš„è§£é‡Šã€‚-eeåç¼€ä¸€èˆ¬çš„åŠŸèƒ½æ˜¯æŠŠä¸€ä¸ªåŠ¨è¯è½¬åŒ–ä¸ºå…·æœ‰è¯¥åŠ¨è¯æ€§è´¨çš„äººï¼Œé€šå¸¸æ˜¯è¢«åŠ¨çš„ï¼Œåƒloanee(å€ºåŠ¡äººï¼Œå€Ÿå…¥è€…)ã€employeeï¼ˆå‘˜å·¥ï¼‰ã€addressee(æ”¶ä»¶äºº)ã€grantee(å—é¢èµ è€…)ã€‚<br>ä½†æ˜¯æœ€è¿‘ä¸€äº›å¹´ä¹Ÿèƒ½è¡¨è¾¾ä¸»åŠ¨çš„æ¦‚å¿µï¼Œåƒescapeeé€ƒè„±è€…ã€returneeå›å›½äººå‘˜ï¼ˆreturneræŒ‡é‡è¿”å·¥ä½œå²—ä½çš„äººï¼Œå°¤æŒ‡ç”Ÿå®Œå°å­©çš„å¥³æ€§<br>ï¼‰ã€standeeç«™ç€çœ‹çš„äººï¼Œï¼ˆå…¬å…±æ±½è½¦ä¸Šçš„ç«™å®¢ï¼› ç«™ç«‹çš„ä¹˜å®¢ï¼Œä½†è¿™äº›åŠ¨è¯ä¸€èˆ¬éƒ½æ˜¯éåŠç‰©åŠ¨è¯ã€‚åŠç‰©åŠ¨è¯å å¾ˆå°‘ä¸€éƒ¨åˆ†ï¼Œå…¸å‹çš„æœ‰attendeeï¼ˆä¼šè®®ç­‰çš„ï¼‰å‡ºå¸­è€…ã€absenteeç¼ºå¸­è€…ã€refugeeé¿éš¾è€…ã€‚</p>
</li>
<li><p>é™¤äº†ä¸Šé¢çš„å«ä¹‰å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ„æ€ï¼Œindicating a diminutiveå°å‹çš„ form of somethingï¼Œå…¸å‹çš„ä¾‹å­æœ‰booteeå¥³äººçš„çŸ­é´</p>
</li>
</ol>
<p>##-er</p>
<ol>
<li>ä»äººæ‰€å ç”¨çš„ç‰©å“æ¥æŒ‡æ˜äººçš„èº«ä»½ã€‚<blockquote>
<p>hatterå¸½å­åˆ¶é€ è€…<br>tilerç›–ç“¦å·¥äºº<br>tinneré”¡çŸ¿å·¥äºº<br>moonshinerçƒˆé…’èµ°ç§è€…ï¼ˆæ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œmoonshineé™¤äº†æœˆå…‰å¤–ï¼Œè¿˜æœ‰å¦„æƒ³ã€ç§é…’çš„æ„æ€ï¼Œè²Œä¼¼åé¢è¿™ä¸¤ä¸ªæ„æ€ä¸€èˆ¬éƒ½æ˜¯åœ¨æœ‰æœˆå…‰çš„å¤§æ™šä¸Šå¹²çš„å“ˆï¼‰</p>
</blockquote>
</li>
<li>ä»ä¸€äº›ç‰¹å¾æˆ–ç¯å¢ƒæ¥æŒ‡æ˜æŸäººçš„èº«ä»½<blockquote>
<p>six-footerèº«é«˜å…­è‹±å°ºçš„äººï¼Œå…­è‹±å°ºé•¿çš„ä¸œè¥¿<br>three-master ä¸‰æ¡…çš„èˆ¹ï¼› ä¸‰æ¡…èˆ¹<br>teetotaler ç»å¯¹ç¦é…’è€…ï¼Œç¦é…’ä¸»ä¹‰è€…<br>fiverã€€&lt;è‹±Â·éæ­£&gt;äº”é•‘é’ç¥¨a five-pound noteï¼›&lt;ç¾&gt;äº”å…ƒé’a five-dollar bill.<br>tenner &lt;ç¾&gt;åç£…çº¸å¸ï¼Œåå…ƒçº¸å¸</p>
</blockquote>
</li>
<li>ç”¨äºåŠ¨è¯ï¼Œè¡¨æ˜åŠ¨ä½œå…·æœ‰åå¤çš„æ€§è´¨<blockquote>
<p>flickeré—ªçƒï¼› é£˜æ‰¬ï¼Œæ‘†åŠ¨<br>flutteré£˜åŠ¨ï¼› é¼“ç¿¼<br>shiverå‘æŠ–ï¼Œé¢¤æŠ–<br>shudderæˆ˜æ —ï¼› å‘æŠ–ï¼› éœ‡åŠ¨ï¼› é¢¤åŠ¨</p>
</blockquote>
</li>
</ol>
<p>##å•è¯å‚è€ƒ</p>
<ol>
<li><a href="http://dictionary.reference.com/" target="_blank" rel="external">http://dictionary.reference.com/</a></li>
<li><a href="http://www.iciba.com/" target="_blank" rel="external">http://www.iciba.com/</a></li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ•…äº‹æ˜¯è¿™ä¹ˆå¼€å§‹çš„ï¼Œæˆ‘é‡åˆ°äº†inter-organizationalä¸intra-organizationalè¿™ä¹ˆä¸¤ä¸ªè¯ç»„ï¼Œå…¶å®ä¹Ÿå¾ˆå¥½åŒºåˆ†ï¼Œå‰é¢æ˜¯â€œä¸åŒç»„ç»‡ä¹‹é—´çš„â€ï¼Œåè€…æ˜¯â€œåŒä¸€ç»„ç»‡å†…éƒ¨çš„â€ï¼Œæè®¡ç®—æœºçš„åº”è¯¥çŸ¥é“æœ‰ä¸ªå«intranetçš„ç½‘ï¼Œå®ƒæ˜¯ä¸internetä¸ä¸€æ ·çš„ï¼Œä¸“æŒ‡ä¼
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
  </entry>
  
  <entry>
    <title>Yarnçš„å®‰å…¨æ¨¡å¼ä¸é«˜å¯é æ€§å®‰è£…æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2014/08/06/cdh-yarn-ha-kerberos/"/>
    <id>http://liujiacai.net/blog/2014/08/06/cdh-yarn-ha-kerberos/</id>
    <published>2014-08-06T14:36:08.000Z</published>
    <updated>2017-07-08T12:29:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å‡ å¤©åˆé‡æ–°æŠŠcdhçš„å®‰å…¨æ¨¡å—ä¸é«˜å¯é æ€§æ¨¡å—é‡æ–°æ­å»ºäº†ä¸€éï¼Œè¿™æ¬¡ç”¨æ˜¯çš„ç›®å‰æœ€æ–°çš„5.1.0çš„taråŒ…å®‰è£…ï¼Œä»¥å‰æŠŠMRv1æ­å»ºäº†å¥½ï¼Œè¿™æ¬¡ä¸»è¦æ˜¯ç†Ÿæ‚‰å®‰è£…è¿‡ç¨‹ï¼Œå¹¶ä¸”æŠŠYARNçš„å®‰å…¨æ¨¡å—ä¸HAæ¨¡å—æˆåŠŸæ­å»ºèµ·æ¥ã€‚é‡åˆ°çš„é”™è¯¯è¿˜æ˜¯ä¸å°‘ï¼Œå®‰è£…è¿‡ç¨‹ä¹Ÿæ˜¯åºŸäº†æˆ‘å¥½å‡ å¤©ï¼Œç°åœ¨æƒ³æƒ³å¾ˆå¤šé”™è¯¯éƒ½æ¯”è¾ƒå…¸å‹ï¼Œç°åœ¨æ­¤è®°å½•ä¸‹æˆ‘æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯ä¸å¿ƒå¾—ï¼Œä¸€æ–¹é¢ä¸ºè‡ªå·±ä»¥åæŸ¥é˜…ï¼Œå¦ä¸€æ–¹é¢å¸Œæœ›ä¹Ÿèƒ½å¯¹é‡åˆ°åŒæ ·é—®é¢˜çš„äººæœ‰æ‰€å¯å‘ã€‚<br><a id="more"></a><br>å…ˆè¯´ä¸‹æˆ‘çš„ç¯å¢ƒï¼Œcentos6.5, cdhç”¨çš„ç›®å‰æœ€æ–°çš„5.1.0çš„taråŒ…ã€‚</p>
<p>ä¸‹é¢åœ¨å…ˆè¯´è¯´YARNçš„å®‰å…¨æ¨¡å—ä¸HAå®‰è£…æ—¶çš„é‡åˆ°çš„é”™è¯¯ï¼Œä¹‹ååœ¨è¯´è¯´æˆ‘åœ¨å®‰è£…æ•´ä¸ªCDHçš„HDFSã€MRv1ã€YARNæ—¶ä¸€äº›ä¸å®¹æ˜“æ³¨æ„ä½†å¾ˆéš¾åœ°ä½çš„é”™è¯¯ã€‚</p>
<h3 id="ï¼ˆä¸€ï¼‰-YARNçš„å®‰å…¨æ¨¡å—ä¸HAå®‰è£…æ—¶é‡åˆ°çš„é”™è¯¯"><a href="#ï¼ˆä¸€ï¼‰-YARNçš„å®‰å…¨æ¨¡å—ä¸HAå®‰è£…æ—¶é‡åˆ°çš„é”™è¯¯" class="headerlink" title="ï¼ˆä¸€ï¼‰ YARNçš„å®‰å…¨æ¨¡å—ä¸HAå®‰è£…æ—¶é‡åˆ°çš„é”™è¯¯"></a>ï¼ˆä¸€ï¼‰ YARNçš„å®‰å…¨æ¨¡å—ä¸HAå®‰è£…æ—¶é‡åˆ°çš„é”™è¯¯</h3><h4 id="å®‰å…¨æ¨¡å—"><a href="#å®‰å…¨æ¨¡å—" class="headerlink" title="å®‰å…¨æ¨¡å—"></a>å®‰å…¨æ¨¡å—</h4><ol>
<li>å¯¹äºcontainer-executoræ–‡ä»¶ï¼ŒtaråŒ…ä¸­æ²¡æœ‰ï¼Œéœ€è¦è‡ªå·±ç¼–è¯‘</li>
<li>æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_yarn_security.html" target="_blank" rel="external">å®˜æ–¹æ•™ç¨‹</a>åšé…ç½®åï¼Œæ‰§è¡Œ mapreduce ä»»åŠ¡æ—¶ï¼Œåœ¨ shuffle é˜¶æ®µï¼Œä¼šæŠ¥ä¸‹é¢çš„é”™è¯¯ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">2014-08-03 00:34:19,619 WARN [main] org.apache.hadoop.mapred.YarnChild: Exception running child : org.apache.hadoop.mapreduce.task.reduce.Shuffle$ShuffleError: error in shuffle in fetcher#4</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Shuffle.run(Shuffle.java:134)</div><div class="line">        at org.apache.hadoop.mapred.ReduceTask.run(ReduceTask.java:376)</div><div class="line">        at org.apache.hadoop.mapred.YarnChild$2.run(YarnChild.java:167)</div><div class="line">        at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">        at javax.security.auth.Subject.doAs(Subject.java:415)</div><div class="line">        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1554)</div><div class="line">        at org.apache.hadoop.mapred.YarnChild.main(YarnChild.java:162)</div><div class="line">Caused by: java.io.IOException: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.ShuffleSchedulerImpl.checkReducerHealth(ShuffleSchedulerImpl.java:323)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.ShuffleSchedulerImpl.copyFailed(ShuffleSchedulerImpl.java:245)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:347)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:165)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>åœ¨nodemangeræœåŠ¡å™¨ä¸Šï¼Œåœ¨æ‰§è¡Œè¯¥jobçš„containerçš„syslogæ—¥å¿—ä¸­è¿˜å¯ä»¥æ‰¾åˆ°ä¸‹é¢çš„é”™è¯¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">2014-08-03 00:34:19,614 WARN [fetcher#3] org.apache.hadoop.mapreduce.task.reduce.Fetcher: Invalid map id</div><div class="line">java.lang.IllegalArgumentException: TaskAttemptId string : TTP/1.1 500 Internal Server Error</div><div class="line">Content-Type: text/plain; charset=UTF is not properly formed</div><div class="line">        at org.apache.hadoop.mapreduce.TaskAttemptID.forName(TaskAttemptID.java:201)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyMapOutput(Fetcher.java:386)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Fetcher.copyFromHost(Fetcher.java:341)</div><div class="line">        at org.apache.hadoop.mapreduce.task.reduce.Fetcher.run(Fetcher.java:165)</div><div class="line">2014-08-03 00:34:19,614 WARN [fetcher#4] org.apache.hadoop.mapreduce.task.reduce.Fetcher: Invalid map id</div><div class="line">java.lang.IllegalArgumentException: TaskAttemptId string : TTP/1.1 500 Internal Server Error</div></pre></td></tr></table></figure></p>
<p><a href="http://mail-archives.apache.org/mod_mbox/hadoop-hdfs-user/201211.mbox/%3CBD42F346AE90F544A731516A805D1B8AD8548A@SMAIL1.prd.mpac.ca%3E" target="_blank" rel="external">ç½‘ä¸Šå¾ˆå¤šè¯´</a><strong>Shuffle$ShuffleError: error in shuffle in fetcher#4</strong>è¿™ä¸ªé”™è¯¯ä¸å†…å­˜ï¼Œå¾ˆæ˜æ˜¾ï¼Œæˆ‘è¿™é‡Œä¸æ˜¯è¿™ç§æƒ…å†µï¼Œå› ä¸ºä»<strong> TTP/1.1 500 Internal Server Error</strong>å°±åº”è¯¥çŸ¥é“æ˜¯resourcemanagerå†…éƒ¨çš„é”™è¯¯ã€‚</p>
<p>ç»è¿‡æˆ‘éªŒè¯ï¼Œè¿™æ—¶ç”±äºtaråŒ…é»˜è®¤å¹¶ä¸åŒ…å«nativeçš„libï¼Œä½ç½®åœ¨<code>&lt;hadoop&gt;/lib/native</code>æ–‡ä»¶å¤¹ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–è¯‘ï¼ŒæŠŠç¼–è¯‘å¥½çš„nativeæ–‡ä»¶æ‹·è´åˆ°è¿™é‡Œå³å¯ã€‚</p>
<h4 id="HA"><a href="#HA" class="headerlink" title="HA"></a>HA</h4><p>æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Installation-Guide/cdh5ig_yarn_cluster_deploy.html?scroll=topic_11_4_10_unique_1" target="_blank" rel="external">å®˜æ–¹æ•™ç¨‹</a>ï¼Œå…ˆç›´æ¥å®‰è£…YARNæ—¶æœ‰ç‚¹å°é”™è¯¯ï¼Œå°±æ˜¯historyserverè¿›ç¨‹å¼€å¯ï¼ˆç”±maprdç”¨æˆ·å¼€å¯ï¼‰åæ— æ³•aggregate logï¼Œæˆ‘å‘ç°æ˜¯æœ‰ä¸¤ä¸ªé—®é¢˜å¯¼è‡´ï¼š</p>
<ol>
<li><p>æˆ‘æœåŠ¡å™¨ä¸Šçš„mapredç”¨æˆ·åªå±äºmapredç”¨æˆ·ç»„ï¼ˆuseradd mapredè¿™æ¡å‘½ä»¤æ‰§è¡Œåï¼Œå°±ä¼šåˆ›å»ºmapredç”¨æˆ·ï¼Œå¹¶ä¸”å±äºmapredç»„ï¼‰ï¼Œè€Œç”±mapredå¯åŠ¨çš„historyserveréœ€è¦è®¿é—®${yarn.app.mapreduce.am.staging-dir}/history/done_intermediate/${username}æ–‡ä»¶å¤¹ä¸‹ä¸åŒç”¨æˆ·çš„æ–‡ä»¶ï¼Œè€Œè¿™ä¸ªæ–‡ä»¶å¤¹çš„æƒé™æ˜¯770,ownä¸º${username}:hadoopï¼Œæ‰€ä»¥historyserveræ²¡æœ‰æƒé™è¯»å–ï¼Œæˆ‘è¿™é‡ŒæŠŠmapredæ·»åŠ åˆ°hadoopç”¨æˆ·ç»„å»å³å¯ï¼šs<br>è¿™é‡Œmapredç”¨æˆ·ä¹Ÿéœ€è¦å±äºmapredç»„ï¼Œæ˜¯å› ä¸ºä¹Ÿéœ€è¦å‘${yarn.nodemanager.remote-app-log-dir}/${username}ç›®å½•ä¸‹å†™ä¸€äº›æ—¥å¿—ï¼ˆå› ä¸ºå¼€å¯äº†log-aggregationï¼‰ï¼Œè€Œè¿™ä¸ªç›®å½•æƒé™ä¹Ÿæ˜¯770,ownä¸º${username}:mapredã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">usermod -a G hadoop mapred #è¿™é‡Œéœ€è¦-aé€‰é¡¹ï¼Œè¿™æ ·mapredç”¨æˆ·å³å±äºmapredç»„åˆå±äºhadoopç»„</div></pre></td></tr></table></figure>
</li>
<li><p>æ•™ç¨‹ä¸Šè¯´çš„å¼€å¯log-aggregationçš„é…ç½®ä¸å¯¹ï¼Œæ•™ç¨‹ä¸Šå†™çš„æ˜¯</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.log.aggregation.enable&lt;/name&gt;</div><div class="line">    &lt;value&gt;true&lt;/value&gt; </div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
</li>
</ol>
<p>åº”æ”¹ä¸º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</div><div class="line">    &lt;value&gt;true&lt;/value&gt; </div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<p>â€”â€”â€”â€”â€”ä¸‹é¢æ­£å¼è¯´HAâ€”â€”â€”â€”â€”â€”</p>
<p>YARNçš„HAæƒ³å¯¹äºhdfsä¸MRv1çš„ç®€å•äº†è®¸å¤šï¼Œè‡ªåŠ¨Failoverä¹Ÿä¸éœ€è¦å¦èµ·ä¸ªè¿›ç¨‹ï¼ŒResourceManagerä¸­ä¸€ä¸ªActiveStandbyElectorï¼Œå®ƒè´Ÿè´£Automatic failoverã€‚è¿™é‡Œåªéœ€è¦ä¿®æ”¹yarn-site.xmlæ–‡ä»¶å³å¯ã€‚<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/cdh5hag_rm_ha_config.html" target="_blank" rel="external">å®˜æ–¹æ•™ç¨‹</a>çš„ç»™å‡ºçš„é»˜è®¤é…ç½®æ”¹ä¸€é¡¹å°±èƒ½è¿è¡ŒæˆåŠŸã€‚</p>
<p>æŠŠ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.zk.state-store.address&lt;/name&gt;</div><div class="line">    &lt;value&gt;localhost:2181&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<p>æ”¹æˆ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.zk-address&lt;/name&gt;</div><div class="line">    &lt;value&gt;localhost:2181&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<p>å…¶å®ä¸Šé¢çš„è¡¨æ ¼è¯´çš„å¾ˆè¯¦ç»†äº†ï¼Œä¸çŸ¥é“ä¸ºä»€ä¹ˆç»™å‡ºçš„ç¤ºä¾‹æ²¡å†™ï¼Œä¸è¿‡è¿™ä¸ªé”™ä¹Ÿæ¯”è¾ƒå¥½æ‰¾ï¼Œå› ä¸ºæŒ‰ç…§ä¸Šé¢é…ç½®çš„å¼€å¯RMæ—¶ä¼šæŠ¥<strong>yarn.resourcemanager.zk-address</strong>æ²¡å®šä¹‰ã€‚</p>
<p>å…¶æ¬¡éœ€è¦æ³¨æ„çš„æ˜¯<strong>yarn.resourcemanager.ha.id</strong>åœ¨activeä¸standbyçš„æœåŠ¡å™¨ä¸Šçš„å€¼æ˜¯ä¸ä¸€æ ·çš„ï¼ŒæŒ‰ç…§å®˜æ–¹ç»™çš„é…ç½®ï¼Œé‚£å°±ä¸€ä¸ªæ˜¯rm1,ä¸€ä¸ªæ˜¯rm2ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬åœ¨å¼€å¯äº†å®‰å…¨æ¨¡å¼è¿˜éœ€è¦ä¿®æ”¹ä¸€å¤„propertyå³<strong>yarn.resourcemanager.hostname</strong>ï¼Œhaä¸­çš„ä¸¤ä¸ªRMè¿™ä¸ªpropertyå€¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œåˆ†åˆ«ä¸ºå…¶hostnameã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨é…ç½®yarnçš„principalæ—¶ç”¨äº†<strong>yarn/_HOST</strong>è¿™ç§æ–¹å¼ï¼Œè€Œ_HOSTå¯¹äºNNä¸RMæ¥è¯´ï¼Œä¸æ˜¯æŒ‰ç…§hostnameæ¥æ›¿æ¢çš„ï¼Œè€Œæ˜¯åˆ†åˆ«æŒ‰ç…§<strong>fs.defaultFS</strong>ä¸<strong>yarn.resourcemanager.hostname</strong>è¿™ä¸¤ä¸ªpropertyçš„å€¼æ¥æ›¿æ¢çš„ã€‚DNä¸NMæ˜¯æŒ‰ç…§æ¯ä¸ªæœåŠ¡å™¨çš„hostnameæ¥æ›¿æ¢çš„ã€‚æ›¿æ¢è§„åˆ™ä¹Ÿåœ¨<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_secure_hdfs_config.html" target="_blank" rel="external">HDFSçš„å®‰å…¨æ¨¡å¼æ–‡æ¡£</a>ä¸­æœ‰è¯´æ˜ã€‚</p>
<p>ä¸‹é¢æ˜¯æˆ‘rm1æœåŠ¡å™¨ä¸Šè¿™ä¸¤ä¸ªpropertyçš„é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.ha.id&lt;/name&gt;</div><div class="line">    &lt;value&gt;rm1&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</div><div class="line">    &lt;value&gt;master&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<p>ä¸‹é¢æ˜¯æˆ‘rm2æœåŠ¡å™¨ä¸Šè¿™ä¸¤ä¸ªpropertyçš„é…ç½®ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.ha.id&lt;/name&gt;</div><div class="line">    &lt;value&gt;rm2&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div><div class="line">&lt;property&gt;</div><div class="line">    &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</div><div class="line">    &lt;value&gt;master2&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<h3 id="ï¼ˆäºŒï¼‰-CDHå„ä¸ªæ¨¡å—å®‰è£…æ€»ç»“"><a href="#ï¼ˆäºŒï¼‰-CDHå„ä¸ªæ¨¡å—å®‰è£…æ€»ç»“" class="headerlink" title="ï¼ˆäºŒï¼‰ CDHå„ä¸ªæ¨¡å—å®‰è£…æ€»ç»“"></a>ï¼ˆäºŒï¼‰ CDHå„ä¸ªæ¨¡å—å®‰è£…æ€»ç»“</h3><p>è¿˜æ˜¯å…ˆè¯´äº›æˆ‘åœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›ä¸èµ·çœ¼ä½†é‡åˆ°åå°±å¾ˆéš¾å®šä½çš„é”™è¯¯ã€‚</p>
<ol>
<li>å¦‚æœæŠŠhadoopæ”¾åˆ°/rootä¸‹ï¼Œåƒhdfsã€yarnè¿™äº›ç”¨æˆ·æ˜¯æ²¡æ³•æ‰§è¡Œbinã€sbinä¸‹é¢çš„è„šæœ¬çš„ï¼Œå› ä¸º/rootçš„é»˜è®¤æƒé™æ˜¯550ï¼Œæˆ‘å®‰è£…æ—¶ç›´æ¥æ”¾åˆ°/optä¸‹ã€‚</li>
<li>åœ¨å®‰è£…HDFSçš„å®‰å…¨æ¨¡å—æ—¶ï¼Œå¼€å¯æŸä¸ªè¿›ç¨‹ï¼Œæ¯”å¦‚namenodeæ—¶ï¼Œç»å¸¸ä¼šå‡ºç°æŸä¸ªæ–‡ä»¶æ‰¾ä¸åˆ°ï¼Œè¿™æ˜¯å› ä¸ºæˆ‘åœ¨å‰åå¼€å¯ã€å…³é—­ã€æ ¼å¼åŒ–namenodeè¿‡ç¨‹ä¸­ï¼Œå…ˆåç”¨äº†rootä¸hdfsï¼Œç”¨rootç”¨æˆ·å¼€å¯çš„namenodeåœ¨æœ¬åœ°å†™æ–‡ä»¶hdfsç”¨æˆ·æ˜¯æ²¡æ³•è¯»å–çš„ã€‚è¿™é‡Œä¸€å®šè¦è°¨è®°ï¼Œé™¤äº†å¼€å¯datanodeæ—¶éœ€è¦ç”¨rootç”¨æˆ·ï¼Œä¸namenodeç›¸å…³çš„éƒ½æ˜¯ç”¨hdfsç”¨æˆ·ï¼ŒåŒ…æ‹¬namenodeçš„formatã€startä¸stopã€‚</li>
<li>è¿˜æœ‰ä¸ªæ¯”è¾ƒtrickyçš„é—®é¢˜ï¼Œæœ¬æ¥çš„journalnodeæ˜¯å¼€å¯åœ¨slavesèŠ‚ç‚¹ä¸Šçš„ï¼Œæˆ‘ç°åœ¨æƒ³æŠŠå®ƒä»¬åˆ†å¼€ï¼Œæˆ‘é›†ç¾¤å†…çš„hostsæ–‡ä»¶æ˜¯è¿™æ ·çš„<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">127.0.0.1   localhost</div><div class="line">10.4.13.85  master</div><div class="line">10.4.15.239 master2 zk1 jn1  #hostnameä¸ºmaster2</div><div class="line">10.4.9.14   zk2 jn2          #hostnameä¸ºzk2</div><div class="line">10.4.14.123 zk3 jn3          #hostnameä¸ºzk3</div><div class="line">10.4.13.63  node1</div><div class="line">10.4.13.2   node2</div><div class="line">10.4.11.89  node3</div></pre></td></tr></table></figure>
</li>
</ol>
<p>æˆ‘è¿™é‡Œä¸ºä¸€å°æœåŠ¡å™¨é…ç½®å¤šä¸ªdomain.nameæ˜¯æ–¹ä¾¿æˆ‘åœ¨åé¢çš„é…ç½®æ—¶åšåˆ°è§åçŸ¥æ„ï¼Œæ¯”å¦‚ï¼Œæˆ‘åœ¨é…ç½®journalnodeæ—¶æˆ‘å¯ä»¥è¿™ä¹ˆé…ç½®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;</div><div class="line">&lt;value&gt;qjournal://jn1:8485;jn2:8485;jn3:8485/ljc&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div><div class="line">&lt;property&gt;</div><div class="line">&lt;name&gt;dfs.journalnode.kerberos.principal&lt;/name&gt;</div><div class="line">&lt;value&gt;hdfs/_HOST@MY-REALM&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div><div class="line">â€¦â€¦â€¦â€¦</div></pre></td></tr></table></figure></p>
<p>ä½†è¿™é‡Œé—®é¢˜æ¥äº†ï¼Œå› ä¸ºjournalnodeä»activeçš„NameNodeé‚£é‡Œå–æ•°æ®æ—¶éœ€è¦éªŒè¯èº«ä»½ï¼Œè€Œæˆ‘è¿™é‡Œçš„principalç”¨äº†<strong>_HOST</strong>ï¼ŒæŒ‰ç†è¯´CDHåœ¨è¿è¡Œæ—¶ä¼šè‡ªåŠ¨æŠŠ _HOSTæ›¿æ¢ä¸ºhostnameï¼Œè€Œä¸”æˆ‘åœ¨ç”Ÿäº§keytabæ—¶ä¹Ÿæ˜¯æ ¹æ®hostnameæ¥ç”Ÿæˆçš„ï¼Œæ¯”å¦‚å¯¹äºmaster2,æˆ‘ä¼šç”Ÿäº§ä¸‹é¢çš„principalï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">hdfs/master2@MY-REALM</div><div class="line">HTTP/master2@MY-REALM</div><div class="line">mapred/master2@MY-REALM</div><div class="line">yarn/master2@MY-REALM</div></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯æˆ‘è¿™æ ·é…ç½®åï¼Œå¼€å¯ç¬¬ä¸€ä¸ªæ—¶namenodeå°±ä¼šæŠ¥é”™ï¼Œ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">2014-08-06 18:27:05,929 WARN org.apache.hadoop.security.UserGroupInformation: PriviledgedActionException as:hdfs/master@MY-REALM (auth:KERBEROS) cause:java.io.IOException: org.apache.hadoop.security.authentication.client.AuthenticationException: GSSException: No valid credentials provided (Mechanism level: Server not found in Kerberos database (7) - UNKNOWN_SERVER)</div><div class="line">2014-08-06 18:27:05,929 ERROR org.apache.hadoop.hdfs.server.namenode.EditLogInputStream: caught exception initializing http://jn3:8480/getJournal?jid=ljc&amp;segmentTxId=1&amp;storageInfo=-55%3A845458164%3A0%3ACID-b6f3e623-e3c0-45d0-a44c-ec3f01d57ea3</div><div class="line">java.io.IOException: org.apache.hadoop.security.authentication.client.AuthenticationException: GSSException: No valid credentials provided (Mechanism level: Server not found in Kerberos database (7) - UNKNOWN_SERVER)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream$URLLog$1.run(EditLogFileInputStream.java:406) </div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream$URLLog$1.run(EditLogFileInputStream.java:398)</div><div class="line">    at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">    at javax.security.auth.Subject.doAs(Subject.java:415)</div><div class="line">    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1554)</div><div class="line">    at org.apache.hadoop.security.SecurityUtil.doAsUser(SecurityUtil.java:448)</div><div class="line">    at org.apache.hadoop.security.SecurityUtil.doAsCurrentUser(SecurityUtil.java:442)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream$URLLog.getInputStream(EditLogFileInputStream.java:397)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream.init(EditLogFileInputStream.java:139)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream.nextOpImpl(EditLogFileInputStream.java:188)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream.nextOp(EditLogFileInputStream.java:239)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogInputStream.readOp(EditLogInputStream.java:83)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogInputStream.skipUntil(EditLogInputStream.java:140)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.RedundantEditLogInputStream.nextOp(RedundantEditLogInputStream.java:178)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogInputStream.readOp(EditLogInputStream.java:83)</div><div class="line"></div><div class="line">Caused by: org.apache.hadoop.security.authentication.client.AuthenticationException: GSSException: No valid credentials provided (Mechanism level: Server not found in Kerberos database (7) - UNKNOWN_SERVER)</div><div class="line">    at org.apache.hadoop.security.authentication.client.KerberosAuthenticator.doSpnegoSequence(KerberosAuthenticator.java:306)</div><div class="line">    at org.apache.hadoop.security.authentication.client.KerberosAuthenticator.authenticate(KerberosAuthenticator.java:196)</div><div class="line">    at org.apache.hadoop.security.authentication.client.AuthenticatedURL.openConnection(AuthenticatedURL.java:232)</div><div class="line">    at org.apache.hadoop.hdfs.web.URLConnectionFactory.openConnection(URLConnectionFactory.java:164)</div><div class="line">    at org.apache.hadoop.hdfs.server.namenode.EditLogFileInputStream$URLLog$1.run(EditLogFileInputStream.java:403)</div><div class="line">    ... 30 more</div><div class="line">Caused by: GSSException: No valid credentials provided (Mechanism level: Server not found in Kerberos database (7) - UNKNOWN_SERVER)</div><div class="line">    at sun.security.jgss.krb5.Krb5Context.initSecContext(Krb5Context.java:710)</div><div class="line">    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:248)</div><div class="line">    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:179)</div><div class="line">    at org.apache.hadoop.security.authentication.client.KerberosAuthenticator$1.run(KerberosAuthenticator.java:285)</div><div class="line">    at org.apache.hadoop.security.authentication.client.KerberosAuthenticator$1.run(KerberosAuthenticator.java:261)</div><div class="line">    at java.security.AccessController.doPrivileged(Native Method)</div><div class="line">    at javax.security.auth.Subject.doAs(Subject.java:415)</div></pre></td></tr></table></figure></p>
<p>å¤§è‡´æ„æ€æ˜¯è¯´æ— æ³•è¯»å–journalnodeé‚£é‡Œçš„editsï¼Œè®¤è¯å¤±è´¥äº†ï¼Œæ²¡æœ‰æƒé™ã€‚æˆ‘è¿˜ä»¥ä¸ºæ˜¯æˆ‘ç”Ÿäº§çš„keytabæœ‰é”™ï¼Œæˆ‘å»jn1æ‰€åœ¨æœåŠ¡å™¨ï¼ˆhostnameä¸ºmaster2ï¼‰ä¸Šç”¨kinitåŠ ä¸Štabkeyä¹Ÿèƒ½çš„åˆ°TGTï¼Œåæ¥æˆ‘æŠŠé…ç½®æ”¹æˆè¿™æ ·ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">&lt;name&gt;dfs.namenode.shared.edits.dir&lt;/name&gt;</div><div class="line">&lt;value&gt;qjournal://master2:8485;zk2:8485;zk3:8485/ljc&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±èƒ½å§Namenodeèµ·æ¥äº†ï¼Œè¯æ˜è¿™é‡Œ<strong>_HOST</strong>è¢«ç›´æ¥æ›¿æ¢æˆäº†æˆ‘è¿™é‡Œçš„domain.nameäº†ï¼Œè€Œä¸æ˜¯æ¯ä¸ªæœåŠ¡å™¨ä¸Šçš„hostnameï¼Œæˆ‘è¿™é‡Œä¸ç”¨domain.nameï¼Œç›´æ¥æ¢ä¸ºipï¼Œä¹Ÿæ²¡é—®é¢˜ã€‚è¦æ˜¯æƒ³äº†è§£è¿™ä¸ªç»†èŠ‚ï¼Œéœ€è¦çœ‹æºä»£ç äº†ï¼Œä»¥ååœ¨çœ‹å§ã€‚</p>
<ol>
<li>å¦‚æœé‡åˆ°<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Exception in thread &quot;main&quot; org.apache.hadoop.HadoopIllegalArgumentException: HA is not enabled for this namenode.</div><div class="line">        at org.apache.hadoop.hdfs.tools.DFSZKFailoverController.create(DFSZKFailoverController.java:121)</div><div class="line">        at org.apache.hadoop.hdfs.tools.DFSZKFailoverController.main(DFSZKFailoverController.java:172)</div></pre></td></tr></table></figure>
</li>
</ol>
<p>è¯´æ˜ <strong>dfs.nameservices</strong> é…ç½®æœ‰è¯¯ï¼Œæˆ‘å½“æ—¶æŠŠå€¼é…ç½®æˆ <strong>hdfs://ljc</strong> äº†ï¼Œå…¶å®åº”è¯¥é…æˆ <strong>ljc</strong> å°±å¯ä»¥äº†ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»ç†Ÿæ‚‰hadoopå„ä¸ªæ¨¡å—å¼€å§‹ï¼Œåˆ°ç°åœ¨æŠŠæœ€åŸºæœ¬çš„ç¯å¢ƒæ­å»ºèµ·æ¥ï¼Œå‰å‰ååä¹Ÿæ˜¯æœ‰ä¸€ä¸ªæœˆçš„æ—¶é—´äº†ï¼Œæˆ‘å‘ç°æˆ‘è€—æ—¶æ¯”è¾ƒå¤šçš„æ˜¯é‡åˆ°é—®é¢˜åï¼Œæ²¡æœ‰çœ‹æºç çš„æ„è¯†ï¼Œå»ç½‘ä¸Šæœï¼Œè™½ç„¶æœ‰å¯èƒ½æœ‰äººä¹Ÿé‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æ˜æ˜¾å’Œæˆ‘çš„ä¸ç›¸ç¬¦ï¼Œè¿™æ—¶æˆ‘å°±ä»”ç»†æ£€æŸ¥æˆ‘çš„é…ç½®æ–‡ä»¶ï¼Œçœ‹çœ‹æ˜¯å¦é—æ¼å®˜æ–¹æ•™ç¨‹ä¸Šçš„æŸä¸€é¡¹ï¼Œæœ‰äº›ç›²ç›®ï¼Œæœ€è¿‘å¼€å§‹æŠŠcdhçš„srcå¯¼å…¥äº†eclipseï¼Œé‡åˆ°ä¸€äº›é”™è¯¯åå¼€å§‹æ…¢æ…¢çœ‹æºä»£ç ï¼Œæˆ‘å‘ç°è¿™æ ·èƒ½å¾ˆå¿«å®šä½åˆ°é—®é¢˜å‡ºé”™çš„èŒƒå›´ï¼Œä»¥åä¸€å®šå¤šå°è¯•ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯æœåŠ¡å™¨æ¯”è¾ƒå¤šï¼Œhadoopä¹Ÿéœ€è¦é…ç½®ä¸å°‘ä¸œè¥¿ï¼Œè¿™å°±éœ€è¦è‡ªåŠ¨åŒ–æ¥å¸®åŠ©äº†ï¼Œæˆ‘æœ€è¿‘æŠŠshellè„šæœ¬åˆç†Ÿæ‚‰èµ·æ¥ï¼Œå†™äº†ä¸€äº›ç”¨äºç®¡ç†hadoopçš„è„šæœ¬ï¼ŒåŠ ä¸Šä½¿ç”¨äº†<a href="http://en.wikipedia.org/wiki/Salt_(software)" target="_blank" rel="external">salt</a>è¿™ä¸ªè‡ªåŠ¨åŒ–å·¥å…·ï¼Œè¿™æ ·æ–¹ä¾¿å¤šäº†ã€‚ä½†æ˜¯shellæˆ‘è¿˜ä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œåƒæ•°ç»„çš„ä½¿ç”¨ï¼Œå¾ˆæ¶å¿ƒæœ‰æœ¨æœ‰ï¼Œäº¤äº’å¼shellåŠ è½½ç¯å¢ƒå˜é‡ä¸éäº¤äº’å¼ï¼ˆssh -t -t hostname cmdè¿™ç§æ–¹å¼å°±æ˜¯éäº¤äº’å¼ï¼‰çš„ä¸ä¸€æ ·ï¼Œç­‰å›æ¥è¿˜è¦æ…¢æ…¢æ€»ç»“ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å‡ å¤©åˆé‡æ–°æŠŠcdhçš„å®‰å…¨æ¨¡å—ä¸é«˜å¯é æ€§æ¨¡å—é‡æ–°æ­å»ºäº†ä¸€éï¼Œè¿™æ¬¡ç”¨æ˜¯çš„ç›®å‰æœ€æ–°çš„5.1.0çš„taråŒ…å®‰è£…ï¼Œä»¥å‰æŠŠMRv1æ­å»ºäº†å¥½ï¼Œè¿™æ¬¡ä¸»è¦æ˜¯ç†Ÿæ‚‰å®‰è£…è¿‡ç¨‹ï¼Œå¹¶ä¸”æŠŠYARNçš„å®‰å…¨æ¨¡å—ä¸HAæ¨¡å—æˆåŠŸæ­å»ºèµ·æ¥ã€‚é‡åˆ°çš„é”™è¯¯è¿˜æ˜¯ä¸å°‘ï¼Œå®‰è£…è¿‡ç¨‹ä¹Ÿæ˜¯åºŸäº†æˆ‘å¥½å‡ å¤©ï¼Œç°åœ¨æƒ³æƒ³å¾ˆå¤šé”™è¯¯éƒ½æ¯”è¾ƒå…¸å‹ï¼Œç°åœ¨æ­¤è®°å½•ä¸‹æˆ‘æ­å»ºè¿‡ç¨‹ä¸­é‡åˆ°çš„é”™è¯¯ä¸å¿ƒå¾—ï¼Œä¸€æ–¹é¢ä¸ºè‡ªå·±ä»¥åæŸ¥é˜…ï¼Œå¦ä¸€æ–¹é¢å¸Œæœ›ä¹Ÿèƒ½å¯¹é‡åˆ°åŒæ ·é—®é¢˜çš„äººæœ‰æ‰€å¯å‘ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://liujiacai.net/categories/bigdata/"/>
    
    
      <category term="hadoop" scheme="http://liujiacai.net/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>hadoop1.0 é«˜å¯é æ€§(HA)å®‰è£…ä¸æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2014/07/17/cdh-ha-installation/"/>
    <id>http://liujiacai.net/blog/2014/07/17/cdh-ha-installation/</id>
    <published>2014-07-17T15:07:34.000Z</published>
    <updated>2017-07-08T12:29:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»§ä¸Šæ¬¡<a href="/blog/2014/07/15/cdh-kerberos-installation/">å®‰è£…å®ŒKerberoså®‰å…¨è®¤è¯</a>åï¼Œç°åœ¨æˆ‘åœ¨è¿™åŸºç¡€ä¸Šï¼Œåˆç»™CDHåŠ ä¸Šäº†HAï¼ˆhigh availabilityï¼‰ï¼Œä¹Ÿå°±æ˜¯é«˜å¯é æ€§ï¼Œå…·ä½“æ¥è®²å°±æ˜¯åŒNameNodeï¼ŒåŒJobtrackerï¼ˆæˆ‘è¿˜æ˜¯åœ¨MRv1æ¨¡å¼ä¸‹ï¼‰ï¼Œæœ‰äº†HAåï¼Œè¿™ä¸‹é›†ç¾¤çš„å¥å£®æ€§å°±èƒ½å¤Ÿå¾—åˆ°å¾ˆå¥½çš„ä¿è¯äº†ã€‚</p>
<p>æˆ‘è¿˜æ˜¯æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/CDH5-High-Availability-Guide.html" target="_blank" rel="external">å®˜æ–¹æ–‡æ¡£</a>æ¥æ“ä½œçš„ï¼Œæœ‰äº†ä¸Šæ¬¡çš„ç»éªŒï¼Œå»ºè®®å¤§å®¶åœ¨å…·ä½“æ“ä½œå®æ–½å‰ï¼Œå…ˆå¿«é€Ÿé˜…è¯»ä¸€éï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œæˆ‘è¿˜é˜…è¯»äº†<a href="http://hadoop.apache.org/docs/r2.3.0/hadoop-yarn/hadoop-yarn-site/HDFSHighAvailabilityWithNFS.html" target="_blank" rel="external">Apacheå®˜æ–¹çš„è¯´æ˜</a>ï¼Œä¹Ÿä¸ç”¨æ€ä¹ˆè¯¦ç»†ï¼Œå¤§æ¦‚çŸ¥é“æ€ä¹ˆå›äº‹å°±è¡Œäº†ã€‚<br><a id="more"></a><br>é¦–å…ˆè¯´æ˜ä¸€ç‚¹çš„å°±æ˜¯ï¼ŒCDH5 åªæ”¯æŒQuorum Journal Manager(QJM)æ¨¡å¼ä¸‹çš„HAï¼Œä¸æ”¯æŒNFSæ¨¡å¼çš„ï¼Œè¿™ç‚¹å’ŒApacheå®˜æ–¹çš„ä¸ä¸€æ ·ï¼Œå¤§å®¶è¦ç•™æ„ä¸‹ã€‚</p>
<p>ä¸‹é¢è¯´è¯´æˆ‘é‡åˆ°çš„å‘ï¼š</p>
<ul>
<li>æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/cdh5hag_hdfs_ha_software_config.html" target="_blank" rel="external">software_config</a>ä¸Šé¢è¯´çš„é…ç½®ä¸€æ­¥æ­¥æ¥ï¼Œå¦‚æœè¦å®ç°è‡ªåŠ¨çš„Failoverï¼Œéœ€è¦å®‰è£…zookeeperï¼Œå®‰è£…ä¹Ÿå¾ˆç®€å•ï¼Œä»<a href="http://archive.cloudera.com/cdh5/cdh/5/" target="_blank" rel="external">http://archive.cloudera.com/cdh5/cdh/5/</a>ä¸‹è½½<a href="http://archive.cloudera.com/cdh5/cdh/5/zookeeper-3.4.5-cdh5.0.2.tar.gz" target="_blank" rel="external">zookeeper-3.4.5-cdh5.0.2.tar.gz</a>ï¼Œç„¶åæŒ‰ç…§<a href="http://archive.cloudera.com/cdh5/cdh/5/zookeeper/zookeeperStarted.html" target="_blank" rel="external">zookeeperçš„å®‰è£…è¯´æ˜</a>å®‰è£…å³å¯ï¼Œå®˜æ–¹æ¨èzookeeperçš„é›†ç¾¤æ•°ç›®ä¸ºå¥‡æ•°ï¼Œæ¨èå€¼ä¸º3,æˆ‘è¿™æ ·ä¹Ÿé…ç½®äº†3å°ï¼ŒzookeeperæœåŠ¡åœ¨åœ¨å¯åŠ¨æ—¶ä¼šå‘é›†ç¾¤å†…å…¶ä»–æœåŠ¡å™¨å‘é€è®¤è¯æ•°æ®ï¼Œä½†æ˜¯åœ¨ç¬¬ä¸€æ¬¡å¯åŠ¨æ—¶éš¾å…æœ‰ä¸ªå…ˆåé¡ºåºï¼Œæ‰€ä»¥å…ˆå¯åŠ¨çš„èŠ‚ç‚¹å‘è¿˜æ²¡æœ‰å¯åŠ¨çš„æœåŠ¡å™¨å‘ç”Ÿæ•°æ®æ—¶ä¼šæŠ¥é”™ï¼Œç±»å‹ä¸‹é¢çš„é”™è¯¯ä¿¡æ¯<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">2014-07-17 14:49:06,151 [myid:1] - INFO  [WorkerReceiver[myid=1]:FastLeaderElection@542] - Notification: 1 (n.leader), 0x100000106 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x2 (n.peerEPoch), LOOKING (my state)</div><div class="line">2014-07-17 14:49:06,153 [myid:1] - WARN  [WorkerSender[myid=1]:QuorumCnxManager@368] - Cannot open channel to 2 at election address node1/10.4.13.63:3888</div><div class="line">java.net.ConnectException: Connection refused</div><div class="line">    at java.net.PlainSocketImpl.socketConnect(Native Method)</div><div class="line">    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)</div><div class="line">    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)</div><div class="line">    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)</div><div class="line">    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)</div><div class="line">    at java.net.Socket.connect(Socket.java:579)</div><div class="line">    at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:354)</div><div class="line">    at org.apache.zookeeper.server.quorum.QuorumCnxManager.toSend(QuorumCnxManager.java:327)</div><div class="line">    at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.process(FastLeaderElection.java:393)</div><div class="line">    at org.apache.zookeeper.server.quorum.FastLeaderElection$Messenger$WorkerSender.run(FastLeaderElection.java:365)</div><div class="line">    at java.lang.Thread.run(Thread.java:745)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œç­‰3å°å…¨éƒ¨å¯åŠ¨åï¼Œæœ‰å¦‚ä¸‹æ—¥å¿—å°±è¯æ˜æ²¡é—®é¢˜äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">2014-07-17 11:26:44,425 [myid:3] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@542] - Notification: 3 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 3 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)</div><div class="line">2014-07-17 11:26:44,426 [myid:3] - INFO  [WorkerReceiver[myid=3]:FastLeaderElection@542] - Notification: 2 (n.leader), 0x0 (n.zxid), 0x1 (n.round), LOOKING (n.state), 1 (n.sid), 0x0 (n.peerEPoch), LOOKING (my state)</div></pre></td></tr></table></figure></p>
<ul>
<li>åœ¨é…ç½®Securing access to ZooKeeperè¿™æ­¥æ—¶ï¼Œæˆ‘ä¹Ÿèƒ½å¾—åˆ°åƒå®˜æ–¹æ•™ç¨‹ä¸Šè¯´çš„<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">digest:hdfs-zkfcs:vlUvLnd8MlacsE80rDuu6ONESbM=:rwcda</div></pre></td></tr></table></figure>
</li>
</ul>
<p>ä¸è¿™ä¸ªç±»ä¼¼çš„ä¿¡æ¯ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œzkfc -formatZKæ—¶ï¼Œè€æ˜¯è¯´çš„æˆ‘å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼ˆâ€™-&gt;â€™ åé¢çš„é‚£éƒ¨åˆ†ï¼‰ä¸å¯¹ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯å“ªæ­¥å°‘äº†ä»€ä¹ˆï¼Œå› ä¸ºzookeeperé›†ç¾¤åœ¨å†…ç½‘ï¼Œé›†ç¾¤å†…å®‰å…¨æ€§ä¸€èˆ¬ä¸ç”¨è€ƒè™‘ï¼Œæˆ‘è¿™é‡Œå°±ç›´æ¥å¿½ç•¥äº†è¿™æ­¥ï¼Œä»¥åæœºä¼šå†æ‰¾åŸå› ã€‚</p>
<ul>
<li><p>åœ¨é…ç½®Fencing Configurationæ—¶ï¼Œæˆ‘ç”¨äº†sshfenceçš„æ–¹å¼ï¼Œè¿™é‡Œéœ€è¦é…ç½®sshçš„å¯†é’¥ï¼Œæˆ‘ç›´æ¥æŠŠhdfsç”¨æˆ·çš„å¯†é’¥è·¯å¾„ç»™ä¸Šï¼Œåæ¥åœ¨æˆ‘éªŒè¯åŒNamenodeæ˜¯å¦ç”Ÿæ•ˆï¼ˆé€šè¿‡killæ‰activeçš„NNï¼Œçœ‹çœ‹standbyçš„NNèƒ½ä¸èƒ½å˜ä¸ºactiveçš„NNï¼‰å‘ç°ä¸å¯¹ï¼Œè€æ˜¯æŠ¥é”™ï¼Œè¿æ¥ä¸ä¸Šå¦ä¸€ä¸ªNamenodeï¼Œåæ¥å‘ç°éœ€è¦ç”¨rootçš„å¯†é’¥ï¼Œä½†æ˜¯hdfsç”¨æˆ·åˆä¸èƒ½è¯»å–rootçš„å¯†é’¥ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç›´æ¥æŠŠrootçš„.sshæ–‡ä»¶ä¸‹çš„æ–‡ä»¶å…¨copyåˆ°hdfsç”¨æˆ·çš„$HOMEä¸‹ï¼Œå¹¶è®¾ç½®ä¸ºhdfsä¸ºå…¶ownerï¼ˆæˆ‘çš„rootç”¨æˆ·åœ¨é›†ç¾¤å†…ä¹Ÿæ˜¯å¯ä»¥å…å¯†ç ç™»å½•çš„ï¼‰ï¼Œè¿™æ ·å°±æ²¡é—®é¢˜äº†ã€‚</p>
</li>
<li><p>éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨å¼€å¯namenodeä¹‹å‰ï¼Œå¿…é¡»å…ˆå¼€å¯journalnodeï¼Œå› ä¸ºnamenodeå¼€å¯æ—¶ä¼šå»è¿æ¥journalnode</p>
</li>
<li><p>ç„¶åå°±æ˜¯å¼€å¯åŒNamenodeçš„æ­¥éª¤äº†ï¼Œä¸‹é¢è®°å½•ä¸€äº›éœ€è¦ç”¨åˆ°çš„å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">sudo -u hdfs bin/hdfs zkfc -formatZK</div><div class="line">sudo -u hdfs sbin/hadoop-daemon.sh start journalnode #å¼€å¯journalnodeè¿›ç¨‹</div><div class="line"></div><div class="line">sudo -u hdfs sbin/hadoop-daemon.sh start zkfc #å¼€å¯automatic failoverè¿›ç¨‹</div><div class="line"></div><div class="line">sudo -u hdfs bin/hdfs namenode -initializeSharedEdits #æŠŠä¸€ä¸ªnon-HAçš„NameNodeè½¬ä¸ºHAæ—¶ç”¨åˆ°</div><div class="line"></div><div class="line">sudo -u hdfs bin/hdfs namenode -bootstrapStandby </div><div class="line">sudo -u hdfs sbin/hadoop-daemon.sh start namenode</div><div class="line">#ä¸Šé¢å‘½è¿™ä¸¤ä¸ªå‘½ä»¤åœ¨è¿è¡Œç¬¬äºŒä¸ªNamenodeæœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼Œå¿…é¡»å…ˆæ‰§è¡Œ-bootstrapStandby è¿™è¡Œå‘½ä»¤å†å¼€å¯namenode </div><div class="line"></div><div class="line"></div><div class="line">#ä¸‹é¢è¿™äº›å‘½ä»¤ä¹‹å‰ï¼Œéœ€è¦ä»¥hdfsç”¨æˆ·ç”¨kinitæ‹¿åˆ°TGTï¼Œå¦åˆ™ä¼šæŠ¥é”™</div><div class="line">sudo -u hdfs bin/hdfs haadmin -getServiceState nn1 #æŸ¥çœ‹nn1æ˜¯activeçš„è¿˜æ˜¯standbyçš„</div></pre></td></tr></table></figure>
</li>
<li><p>æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/cdh5hag_jt_ha_config.html" target="_blank" rel="external">jobtrackerçš„HAå®˜æ–¹é…ç½®</a>è¿›è¡Œé…ç½®åï¼Œä½¿ç”¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo -u mapred sbin/hadoop-daemon.sh start jobtrackerha</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å‘½ä»¤å¼€å¯jobtrackerha</p>
<ul>
<li>é€šè¿‡<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#è¿è¡Œä¸‹é¢è¿™äº›å‘½ä»¤ä¹‹å‰ï¼Œè¦å…ˆä»¥mapredç”¨æˆ·ç”¨kinitæ‹¿åˆ°TGTï¼Œå¦åˆ™ä¼šæŠ¥é”™</div><div class="line"></div><div class="line">sudo -u mapred bin/hadoop mrhaadmin -getServiceState jt1</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æŸ¥çœ‹jt1æ˜¯activeçš„è¿˜æ˜¯standbyçš„</p>
<ul>
<li><p>æœ€åä¸€ä¸ªï¼Œè¿˜æ˜¯å…³äºHDFSçš„æƒé™é—®é¢˜ï¼Œå› ä¸ºmapreduceåœ¨æ‰§è¡Œä»»åŠ¡æ—¶ä¼šå‘HDFSä¸Šå†™ä¸€äº›ä¸´æ—¶æ–‡ä»¶ï¼Œå¦‚æœæƒé™ä¸å¯¹ï¼Œè‚¯å®šå°±ä¼šæŠ¥é”™äº†ï¼Œä¸è¿‡è¿™ç§é”™è¯¯ä¹Ÿå¾ˆå¥½è¯¥ï¼Œæ ¹æ®é”™è¯¯ä¿¡æ¯å°±èƒ½çŸ¥é“é‚£ä¸ªç›®å½•æƒé™ä¸å¯¹ï¼Œç„¶åæ”¹è¿‡æ¥å°±è¡Œäº†ï¼Œæˆ‘è¿™é‡Œè¿›è¡Œä¸‹æ€»ç»“ï¼š</p>
</li>
<li><p>æ ¹æ®å®˜æ–¹çš„æ•™ç¨‹é…ç½®æ•™ç¨‹ï¼Œé…ç½®äº†å¦‚ä¸‹é€‰é¡¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;mapred.job.tracker.persist.jobstatus.dir&lt;/name&gt;</div><div class="line">  &lt;value&gt;/jobtracker/jobsInfo&lt;/value&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ‰€ä»¥éœ€è¦åœ¨HDFSä¸Šåˆ›å»ºç›¸åº”ç›®å½•ï¼Œå¹¶ä¿®æ”¹å…¶ownerä¸ºmapred</p>
<ul>
<li>å…¶æ¬¡æ˜¯stagingç›®å½•ï¼Œå¦‚æœæ²¡æœ‰é…ç½®ï¼Œå…¶é»˜è®¤å€¼ä»<a href="http://archive.cloudera.com/cdh4/cdh/4/hadoop/hadoop-mapreduce-client/hadoop-mapreduce-client-core/mapred-default.xml" target="_blank" rel="external">é»˜è®¤é…ç½®</a>å¯ä»¥çœ‹åˆ°mapreduce.jobtracker.staging.root.dirçš„å€¼ä¸º${hadoop.tmp.dir}/mapred/stagingï¼Œè€Œ${hadoop.tmp.dir}çš„å€¼ä»<a href="http://archive.cloudera.com/cdh4/cdh/4/hadoop/hadoop-project-dist/hadoop-common/core-default.xml" target="_blank" rel="external">è¿™é‡Œ</a>å¯ä»¥çœ‹åˆ°å€¼é»˜è®¤æ˜¯/tmp/hadoop-${user.name}ï¼Œæœ‰å› ä¸ºæˆ‘ä»¬ä½¿ç”¨mapredç”¨æˆ·æ¥æ‰§è¡Œtasktrackerè¿›è¡Œçš„ï¼Œæ‰€ä»¥éœ€è¦åˆ›å»º/tmp/hadoop-mapred/mapred/stagingæ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å…¶ownerä¸ºmapredï¼Œæƒé™ä¸º1777ï¼Œå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥å®ç°ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">sudo -u hdfs bin/hdfs dfs -mkdir -p /tmp/hadoop-mapred/mapred/staging</div><div class="line">sudo -u hdfs bin/hdfs dfs -chown mapred /tmp/hadoop-mapred/mapred/staging</div><div class="line">sudo -u hdfs bin/hdfs dfs -chmod 1777 /tmp/hadoop-mapred/mapred/staging</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ­¤å¤–ï¼Œè¿˜éœ€è¦é…ç½®mapreduce.jobtracker.system.diræŒ‡å®šçš„æ–‡ä»¶ï¼Œé»˜è®¤ä¸º${hadoop.tmp.dir}/mapred/systemï¼Œæ‰€ä»¥è¿˜éœ€è¦æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo -u hdfs bin/hdfs dfs -mkdir -p /tmp/hadoop-mapred/mapred/system</div><div class="line">sudo -u hdfs bin/hdfs dfs -chown mapred /tmp/hadoop-mapred/mapred/system</div></pre></td></tr></table></figure></p>
<p>è¿™ä¸ªç›®å½•åªç”±mapredç”¨æˆ·æ¥å†™å…¥ï¼Œæ‰€ä»¥ä¸ç”¨å†ä¿®æ”¹å…¶æƒé™ï¼ˆçš„755å³å¯ï¼‰ã€‚</p>
<p>æ€»ç»“ï¼šè¿™æ¬¡é…ç½®HAçš„æ•´ä¸ªè¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒé¡ºåˆ©çš„ï¼Œé™¤äº†çƒ¦äººçš„å„ç§æƒé™é—®é¢˜ï¼Œæˆ‘è§‰å¾—è¿™ä¹Ÿæ˜¯æˆ‘æ²¡æœ‰å¼„æ˜ç™½hadoopå„ä¸ªè¿›ç¨‹æ˜¯å¦‚ä½•å·¥ä½œå¯¼è‡´çš„ï¼Œé€šè¿‡æ”¯æŒé…ç½®HAï¼Œç®—æ˜¯å¯¹jobçš„è¿è¡Œåˆæœ‰äº†æ›´æ·±çš„çš„è®¤è¯†ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç»§ä¸Šæ¬¡&lt;a href=&quot;/blog/2014/07/15/cdh-kerberos-installation/&quot;&gt;å®‰è£…å®ŒKerberoså®‰å…¨è®¤è¯&lt;/a&gt;åï¼Œç°åœ¨æˆ‘åœ¨è¿™åŸºç¡€ä¸Šï¼Œåˆç»™CDHåŠ ä¸Šäº†HAï¼ˆhigh availabilityï¼‰ï¼Œä¹Ÿå°±æ˜¯é«˜å¯é æ€§ï¼Œå…·ä½“æ¥è®²å°±æ˜¯åŒNameNodeï¼ŒåŒJobtrackerï¼ˆæˆ‘è¿˜æ˜¯åœ¨MRv1æ¨¡å¼ä¸‹ï¼‰ï¼Œæœ‰äº†HAåï¼Œè¿™ä¸‹é›†ç¾¤çš„å¥å£®æ€§å°±èƒ½å¤Ÿå¾—åˆ°å¾ˆå¥½çš„ä¿è¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿˜æ˜¯æŒ‰ç…§&lt;a href=&quot;http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/CDH5-High-Availability-Guide.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;æ¥æ“ä½œçš„ï¼Œæœ‰äº†ä¸Šæ¬¡çš„ç»éªŒï¼Œå»ºè®®å¤§å®¶åœ¨å…·ä½“æ“ä½œå®æ–½å‰ï¼Œå…ˆå¿«é€Ÿé˜…è¯»ä¸€éï¼Œåšåˆ°å¿ƒä¸­æœ‰æ•°ï¼Œæˆ‘è¿˜é˜…è¯»äº†&lt;a href=&quot;http://hadoop.apache.org/docs/r2.3.0/hadoop-yarn/hadoop-yarn-site/HDFSHighAvailabilityWithNFS.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Apacheå®˜æ–¹çš„è¯´æ˜&lt;/a&gt;ï¼Œä¹Ÿä¸ç”¨æ€ä¹ˆè¯¦ç»†ï¼Œå¤§æ¦‚çŸ¥é“æ€ä¹ˆå›äº‹å°±è¡Œäº†ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://liujiacai.net/categories/bigdata/"/>
    
    
      <category term="hadoop" scheme="http://liujiacai.net/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>hadoop1.0 å®‰å…¨è®¤è¯(kerberos)å®‰è£…ä¸æ€»ç»“</title>
    <link href="http://liujiacai.net/blog/2014/07/15/cdh-kerberos-installation/"/>
    <id>http://liujiacai.net/blog/2014/07/15/cdh-kerberos-installation/</id>
    <published>2014-07-15T13:56:28.000Z</published>
    <updated>2017-07-08T12:29:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¿—è¯è¯´å¾—å¥½ï¼Œä¸‡äº‹å¼€å¤´éš¾ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œç¯å¢ƒéƒ¨ç½²è¦ç®—æ˜¯ç¬¬ä¸€é—¨æ§›äº†ã€‚æˆ‘æœ€è¿‘æŠ˜è…¾äº†ä¸€å‘¨æ—¶é—´æŠŠcdh5.0.2.tar.gzç‰ˆæœ¬åœ¨MRv1æ¨¡å¼ä¸‹ï¼ŒæˆåŠŸé›†æˆäº†Kerberoså®‰å…¨è®¤è¯ï¼Œå¹¶ä¸”æ˜¯åœ¨å…¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ã€‚ç»è¿‡è¿™æ¬¡å®‰è£…è¿‡ç¨‹ï¼Œå¯¹hadoopçš„äº†è§£åˆæ·±å…¥äº†ä¸€å±‚ã€‚ç°åœ¨è¶ç€è‡ªå·±åˆšæ­å»ºå®Œç¯å¢ƒï¼Œè„‘å­è¿˜æ—¶ä¸æ—¶çš„é—ªç°é‡åˆ°çš„é”™è¯¯ï¼ŒæŠŠæˆ‘çš„å®‰è£…è¿‡ç¨‹è®°å½•äºæ­¤ï¼Œä¸€æ–¹é¢æ–¹ä¾¿è‡ªå·±ä»ŠåæŸ¥é˜…ï¼Œå¦ä¸€æ–¹é¢å¸Œæœ›å¯¹ä»Šåé‡åˆ°åŒæ ·é—®é¢˜äººæœ‰æ‰€å¯å‘ã€‚<br><a id="more"></a><br>é¦–å…ˆè¯´ä¸‹ä¸ºä»€ä¹ˆè¦ç”¨tarballå®‰è£…ï¼Œcdhæä¾›äº†ä¸€ç§manageræ–¹å¼è¿›è¡Œå®‰è£…ï¼Œå¯¹Debianç³»åˆ—æä¾›apt-getï¼Œå¯¹Redhatç³»åˆ—æä¾›yumå®‰è£…ï¼Œä½†æ˜¯è¿™äº›å®‰è£…æ–¹å¼æŠŠä¸€äº›ç»†èŠ‚éƒ½æ›¿æˆ‘ä»¬åšäº†ï¼Œå¦‚æœæˆ‘ä»¬ä»Šåå¸Œæœ›é‡åˆ°å‡ºç°ä»€ä¹ˆæƒ…å†µï¼Œä¸æ–¹ä¾¿è°ƒè¯•ã€‚å¦å¤–ï¼Œä½œä¸ºä¸€ä¸ªçˆ±æŠ˜è…¾çš„äººï¼Œtar.gzä¹Ÿæ˜¯æˆ‘æŒ‰ç…§è½¯ä»¶çš„é¦–é€‰ã€‚</p>
<p>å…ˆè¯´ä¸‹æˆ‘çš„æ­å»ºç¯å¢ƒï¼Œ4å°Centos6.5æœåŠ¡å™¨ï¼Œä¸€å°åšmasterï¼Œè¿è¡Œnamenodeã€jobtracker;å¦å¤–ä¸‰å°è¿è¡Œdatanodeã€tasktrackerã€‚æ­¤å¤–masteræœºå™¨ä¸Šè¿˜è¿è¡ŒKerberosæœåŠ¡å™¨ã€‚JDKçš„ç‰ˆæœ¬æ˜¯1.7.60ã€‚å…³äº5.0.2ç‰ˆæœ¬çš„ç¯å¢ƒè¦æ±‚å¯ä»¥å‚è€ƒ<a href="http://www.cloudera.com/content/support/en/downloads/cdh/cdh-5-0-2.html#SystemRequirements" target="_blank" rel="external">http://www.cloudera.com/content/support/en/downloads/cdh/cdh-5-0-2.html#SystemRequirements</a>ã€‚</p>
<p>è¿™ç¯‡æ–‡ç« ä¸»è¦æ˜¯æˆ‘åœ¨å‚ç…§cloudera<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_cdh5_hadoop_security.html" target="_blank" rel="external">å®˜ç½‘çš„æ•™ç¨‹</a>æ—¶é‡åˆ°çš„å‘ã€‚å¤§å®¶å¯ä»¥å…ˆå»çœ‹çœ‹è¿™ä¸ªæ•™ç¨‹ï¼Œå†æ¥çœ‹æˆ‘çš„æ–‡ç« ã€‚</p>
<p>cdh5.0.2è¿™é‡Œä¸å†ä½¿ç”¨hadoopç”¨æˆ·ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯mapredç”¨æˆ·ä¸hdfsç”¨æˆ·ï¼Œè¿™é‡Œéœ€è¦åˆ†åˆ«ä¸ºå®ƒä»¬ç”Ÿäº§sshçš„å…¬é’¥ä¸ç§˜é’¥ï¼Œå¹¶ä¸”é…ç½®å…å¯†ç ç™»å½•ï¼ˆå½“ç„¶ä½ å¯ä»¥ä¸ºå…¶ä¸­ä¸€ä¸ªç”Ÿäº§ï¼Œç„¶åç›´æ¥copyè¿‡å»ï¼‰ã€‚</p>
<h2 id="1-Kerberoså®‰è£…"><a href="#1-Kerberoså®‰è£…" class="headerlink" title="1. Kerberoså®‰è£…"></a>1. Kerberoså®‰è£…</h2><p>é¦–å…ˆï¼ŒKerberosçš„åŸç†ã€å®‰è£…ä»€ä¹ˆå¤§å®¶è‡ªå·±å»ç»´åŸºç™¾ç§‘å»æŸ¥ï¼Œå…·ä½“å‘½ä»¤åƒkinitã€kadminæ€ä¹ˆç”¨ä¹Ÿæ˜¯å¤§å®¶è‡ªå·±æŸ¥ï¼Œä»¥åæœ‰æ—¶é—´æˆ‘ä¼šå•ç‹¬æŠ½æ—¶é—´è®²è®²Kerberosã€‚<br>å¤§å®¶ç°åœ¨å¯ä»¥æŒ‰ç…§è¿™ä¸ªæ–‡ç« æ¥è¿›è¡Œæ“ä½œï¼š<a href="https://www.centos.org/docs/5/html/5.2/Deployment_Guide/s1-kerberos-server.html" target="_blank" rel="external">Kerberos deploy guide</a>ã€‚</p>
<p>åé¢éœ€è¦ä¸ºé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹çš„mapredä¸hdfsç”¨æˆ·ç”Ÿæˆå„è‡ªçš„principalä¸keytabï¼Œæ‰€ä»¥è¿™é‡Œå¤§å®¶ä¸€å®šè¦ç†Ÿæ‚‰kerberosçš„å‘½ä»¤ï¼ŒæŠŠè¿™äº›ä¸œè¥¿åšæˆè„šæœ¬ï¼Œè¦ä¸èƒ½çƒ¦æ­»ä½ ã€‚</p>
<h2 id="2-CDH5-0-2-tar-gzå®‰è£…"><a href="#2-CDH5-0-2-tar-gzå®‰è£…" class="headerlink" title="2. CDH5.0.2.tar.gzå®‰è£…"></a>2. CDH5.0.2.tar.gzå®‰è£…</h2><h3 id="2-1-ä¸‹è½½ç›¸å…³taråŒ…"><a href="#2-1-ä¸‹è½½ç›¸å…³taråŒ…" class="headerlink" title="2.1 ä¸‹è½½ç›¸å…³taråŒ…"></a>2.1 ä¸‹è½½ç›¸å…³taråŒ…</h3><p>é¦–å…ˆåœ¨è¿™é‡Œ<a href="http://archive.cloudera.com/cdh5/cdh/5/" target="_blank" rel="external">http://archive.cloudera.com/cdh5/cdh/5/</a>ä¸‹è½½5.0.2çš„hadoopçš„taråŒ…<a href="http://archive.cloudera.com/cdh5/cdh/5/hadoop-2.3.0-cdh5.0.2.tar.gz" target="_blank" rel="external">hadoop-2.3.0-cdh5.0.2.tar.gz</a>ï¼Œé™¤äº†è¿™ä¸ªå¤–ï¼Œä¸ºäº†é›†æˆKerberosï¼Œè¿˜éœ€è¦ä¸‹è½½<a href="http://archive.cloudera.com/cdh5/cdh/5/bigtop-jsvc-1.0.10-cdh5.0.2.tar.gz" target="_blank" rel="external">bigtop-jsvc-1.0.10-cdh5.0.2.tar.gz</a>ã€‚</p>
<h3 id="2-2-YARNæ¨¡å¼æ”¹æˆMRv1æ¨¡å¼"><a href="#2-2-YARNæ¨¡å¼æ”¹æˆMRv1æ¨¡å¼" class="headerlink" title="2.2 YARNæ¨¡å¼æ”¹æˆMRv1æ¨¡å¼"></a>2.2 YARNæ¨¡å¼æ”¹æˆMRv1æ¨¡å¼</h3><p>è¿™é‡Œéœ€è¦è®²ä¸€ç‚¹æ˜¯ï¼Œ5.0.2 tarballç‰ˆæœ¬æ¨¡å¼æ˜¯YARNæ¨¡å¼ï¼Œæˆ‘è¿™é‡Œæ­å»ºçš„æ˜¯MRv1ï¼ˆä¹Ÿå°±æ˜¯æ™®é€šçš„MapReduceï¼‰æ¨¡å¼ï¼Œæ‰€ä»¥éœ€è¦å¯¹taråŒ…è§£å‹å‡ºçš„æ–‡ä»¶åšä¸€äº›ä¿®æ”¹ã€‚</p>
<p>æŠŠhadoop-2.3.0-cdh5.0.2.tar.gzè§£å‹ï¼Œå‡è®¾ä½ è§£å‹åˆ°äº†/optç›®å½•ä¸‹ï¼ŒæŠŠhadoop-2.3.0-cdh5.0.2ç›´æ¥é‡å‘½åä¸ºhadoopï¼ˆç°åœ¨ä½ çš„cdhæ ¹ç›®å½•æ˜¯/opt/hadoopï¼‰ï¼Œä¸‹é¢è¿›è¡Œæˆ‘ä»¬çš„ä¿®æ”¹å·¥ä½œï¼š</p>
<ol>
<li>æŠŠbin-mapreduce1çš„æ‰€ä»¥æ–‡ä»¶æ‹·è´åˆ°binä¸‹ï¼Œå¯¹äºç›¸åŒçš„æ–‡ä»¶ï¼Œç›´æ¥è¦†ç›–å³å¯ã€‚</li>
<li>åœ¨/opt/hadoop/share/hadoopæ–‡ä»¶å¤¹ä¸‹æœ‰å¦‚ä¸‹çš„æ–‡ä»¶ç»“æ„<br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB20NG9apXXXXaoXXXXXXXXXXXX_!!581166664.png" alt="share/hadoopç›®å½•ç»“æ„"></li>
</ol>
<p>æŠŠå…¶ä¸­çš„mapreduceè¿™ä¸ªè½¯é“¾æ¥æ–‡ä»¶åˆ é™¤ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåŒåçš„è½¯é“¾æ¥æŒ‡å‘mapreduce1<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /opt/hadoop/share/hadoop/</div><div class="line">rm mapreduce -rf</div><div class="line">ln -s mapreduce1 mapreduce</div></pre></td></tr></table></figure></p>
<p>ç»è¿‡ä¸Šé¢è¿™ä¸¤æ­¥åï¼Œå°±é»˜è®¤å¯ç”¨äº†MRv1æ¨¡å¼äº†ï¼Œå¤§å®¶å¯ä»¥å…ˆæŠŠä¸å¸¦Kerberoså®‰å…¨è®¤è¯çš„å…¨åˆ†å¸ƒå¼æ­å»ºèµ·æ¥ï¼Œç­‰åˆ°ä¸å¸¦Kerberoså®‰å…¨è®¤è¯çš„å…¨åˆ†å¸ƒå¼æ­å»ºèµ·æ¥åï¼ˆå¯å‚è€ƒ<a href="http://blog.csdn.net/jiacai2050/article/details/8630329" target="_blank" rel="external">Hadoopå…¨åˆ†å¸ƒå¼æ­å»º</a>ï¼‰ï¼Œå†è¿›è¡Œä¸‹é¢çš„æ“ä½œã€‚</p>
<h3 id="2-3-é…ç½®HDFS"><a href="#2-3-é…ç½®HDFS" class="headerlink" title="2.3 é…ç½®HDFS"></a>2.3 é…ç½®HDFS</h3><p>ä¸‹é¢å¤§å®¶å°±å¯ä»¥æŒ‰ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_cdh5_hadoop_security.html" target="_blank" rel="external">å®˜ç½‘çš„æ•™ç¨‹</a>è¿›è¡Œæ“ä½œï¼Œä¸‹é¢è¯´ä¸‹æˆ‘é‡åˆ°çš„å‘ï¼š</p>
<ul>
<li>åœ¨STEP 2ä¸­ï¼Œå¿…é¡»å‚ç…§<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Installation-Guide/cdh5ig_mr_cluster_deploy.html#topic_11_3" target="_blank" rel="external">MRv1 cluster deploy</a>ï¼Œåœ¨hdfsä¸­åˆ›å»º/tmpï¼Œä¸mapred.system.diråˆ¶å®šçš„ç›®å½•ï¼Œå¹¶ä¸”ä¿®æ”¹ä¸ºç›¸åº”çš„æƒé™ã€‚</li>
<li>åœ¨STEP 7ä¸­ï¼Œæœ€åçš„dfs.http.policyè¿™ä¸ªpropertyä¸ç”¨é…ç½®ï¼Œå¦åˆ™åœ¨åé¢å¯åŠ¨namnodeæ˜¯ä¼šæŠ¥.keystoreæ–‡ä»¶æ‰¾ä¸åˆ°çš„å¼‚å¸¸ã€‚</li>
<li>STEP 8ã€9ã€10å¯é€‰ï¼Œé…ä¸é…éƒ½è¡Œ</li>
<li>åœ¨STEP 11ä¸­ï¼Œéœ€è¦é…ç½®JSVC_HOMEè¿™ä¸ªå±æ€§ï¼Œè¿™é‡ŒæŠŠæˆ‘ä»¬ä¸€å¼€å§‹ä¸‹è½½çš„bigtop-jsvc-1.0.10-cdh5.0.2.tar.gzè§£å‹åï¼Œæ”¾åˆ°å®ƒåˆ¶å®šçš„ä½ç½®ä¸Šå³å¯ã€‚</li>
<li>åœ¨STEP 12ã€13,å¯åŠ¨datanodeã€namenodeæ—¶ï¼Œç”¨sbinä¸‹çš„å‘½ä»¤<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sbin/hadoop-daemon.sh start namenode</div><div class="line">sbin/hadoop-daemons.sh start datanode</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™ä¸¤æ¡å‘½ä»¤éƒ½æ˜¯ç”¨rootç”¨æˆ·æ‰§è¡Œã€‚</p>
<p>åœ¨è¿™è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé‡åˆ°ä»€ä¹ˆlogsæ–‡ä»¶å¤¹ä¸èƒ½å†™å…¥ï¼Œå°†å…¶æƒé™æ”¹ä¸º777å³å¯ã€‚</p>
<h3 id="2-4-é…ç½®mapreduce"><a href="#2-4-é…ç½®mapreduce" class="headerlink" title="2.4 é…ç½®mapreduce"></a>2.4 é…ç½®mapreduce</h3><p>é…ç½®mapreduceæ¥ç€å‚è€ƒå®˜æ–¹çš„<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_mrv1_security.html" target="_blank" rel="external">æ•™ç¨‹</a>ï¼Œä¸‹é¢ç»§ç»­è¯´æˆ‘é‡åˆ°çš„å‘ï¼š</p>
<ul>
<li>é¦–å…ˆæ˜¯taskcontroller.cfgæ–‡ä»¶é—®é¢˜ï¼Œhadoopä¼šåœ¨<path of="" task-controller="" binary=""></path>/../../conf/ä¸‹å»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨/opt/hadoopä¸‹é¢ï¼ˆä¹Ÿå°±æ˜¯æˆ‘ä»¬è§£å‹åçš„æ ¹ç›®å½•ä¸‹ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªconfæ–‡ä»¶ï¼Œç„¶ååœ¨æŒ‰ç…§å®˜æ–¹è¯´çš„é…ç½®å°±è¡Œäº†ï¼Œå®˜æ–¹æ•™ç¨‹ä¸­æœ‰ä¸€æ¡<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">banned.users=mapred,hdfs,bin</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™é‡Œè¿™æ ·é…ç½®åï¼Œåé¢è¿è¡Œwordcountä¼šæŠ¥å¼‚å¸¸ï¼Œè¿™é‡Œå¯ç›´æ¥å°†å…¶å€¼é…ç½®ä¸ºbinå³å¯</p>
<ul>
<li>ç„¶åå°±æ˜¯task-controllerè¿™ä¸ªæ–‡ä»¶çš„æƒé™é—®é¢˜äº†ï¼Œä¸€å®šè¦ç”¨ä¸‹é¢å‘½ä»¤è¿›è¡Œä¿®æ”¹<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">chown root:mapred task-controller</div><div class="line">chmod 4754 task-controller</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶è§£é‡Šä¹Ÿåœ¨<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-Security-Guide/cdh5sg_other_hadoop_security.html#topic_18_unique_2" target="_blank" rel="external">å®˜ç½‘</a>ä¸Šæœ‰ã€‚</p>
<ul>
<li>å½“è¿™ä¸€åˆ‡éƒ½é…ç½®å¥½åï¼Œå¯åŠ¨jobtrackerä¸tasktrackerè¿˜æ˜¯æœ‰é”™ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">2014-07-15 18:15:25,722 ERROR org.apache.hadoop.mapred.TaskTracker: Can not start task tracker because java.io.IOException: Secure IO is necessary to run a secure task tracker.</div><div class="line">        at org.apache.hadoop.mapred.TaskTracker.checkSecurityRequirements(TaskTracker.java:943)</div><div class="line">        at org.apache.hadoop.mapred.TaskTracker.initialize(TaskTracker.java:976)</div><div class="line">        at org.apache.hadoop.mapred.TaskTracker.&lt;init&gt;(TaskTracker.java:1780)</div><div class="line">        at org.apache.hadoop.mapred.TaskTracker.main(TaskTracker.java:4124)</div></pre></td></tr></table></figure>
</li>
</ul>
<p>è¿™ä¸ªé”™è¯¯æ˜¯å› ä¸ºç¼ºå°‘nativeåŒ…æ‰€è‡´ï¼Œè¿™ä¸ªåŒ…åº”è¯¥æ˜¯åœ¨/opt/hadoop/lib/native/ï¼Œå¾ˆé—æ†¾ï¼Œè¿™äº›ä¸œè¥¿éœ€è¦æˆ‘ä»¬è‡ªå·±ç¼–è¯‘ï¼Œå› ä¸ºæ¯ä¸ªç‰ˆæœ¬éƒ½ä¸ä¸€æ ·ï¼Œæˆ‘æŠŠapache hadoopçš„nativeç›´æ¥copyè¿‡å»ä¹Ÿä¸è¡Œã€‚<del>è¿™é‡Œæˆ‘å·äº†ä¸ªæ‡’ï¼Œç›´æ¥ä»åŒäº‹é‚£é‡Œcopyè¿‡æ¥äº†ã€‚ä»¥åä¼šè¯´è¯´å¦‚ä½•ä»æºç ç¼–è¯‘ã€‚</del>ä¸‹é¢è¯´è¯´å¦‚ä½•ç¼–è¯‘ã€‚<br>cdhçš„æºç éƒ½æ”¾åœ¨srcæ–‡ä»¶å¤¹ä¸‹ï¼Œå®‰è£…å¥½mavenåç›´æ¥åˆ°è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ç¼–è¯‘å°±å¯ä»¥ï¼Œæˆ‘è¿™é‡Œä½¿ç”¨çš„æ˜¯centos6.5ç¼–è¯‘çš„ï¼Œé‡åˆ°çš„é—®é¢˜ä¸»è¦æœ‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">1. maven repositoryç»å¸¸è¿æ¥ä¸ä¸Šï¼Œéœ€è¦å¤šæ¬¡é‡å¤æ“ä½œã€‚ä»¥åæœ€å¥½åšä¸€ä¸ªæœ¬åœ°repo</div><div class="line">2. centosä¸Šéœ€è¦è‡ªå·±å®‰è£…ä¸€äº›ä¾èµ–ï¼Œå¦åˆ™å›æŠ¥å„ç§é”™è¯¯ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤ </div><div class="line">   yum install -y glibc-headers gcc-c++ zlib-devel openssl-devel </div><div class="line">3. ä¸€äº›testé€šè¿‡ä¸äº†ï¼Œéœ€è¦è·³è¿‡ï¼Œç”¨ä¸‹é¢è¿™æ¡å‘½ä»¤è¿›è¡Œç¼–è¯‘</div><div class="line">   mvn package -Pdist,native -DskipTests</div></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œå¦‚æœåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è¿˜æ˜¯é‡åˆ°ä»€ä¹ˆä¾èµ–ç¼ºå¤±ï¼Œç›´æ¥å»googleä¸‹å°±okäº†ã€‚</p>
<ul>
<li>åœ¨ç”¨rootå¯åŠ¨jobtrackerä¸tasktrackerå‘½ä»¤è¡Œä¼šæœ‰é”™è¯¯ä¿¡æ¯ï¼Œæç¤ºæˆ‘ä»¬ä¸èƒ½ç›´æ¥ç”¨rootå¯åŠ¨è¿™ä¸¤ä¸ªè¿›ç¨‹ï¼Œåœ¨haooop-env.shé…ç½®ä¸‹é¢çš„ä¿¡æ¯å°±å¥½äº†<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">export HADOOP_JOBTRACKER_USER=mapred</div><div class="line">export HADOOP_TASKTRACKER_USER=mapred</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å¯åŠ¨çš„å‘½ä»¤æ˜¯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sbin/hadoop-daemon.sh start jobtracker</div><div class="line">sbin/hadoop-daemons.sh start tasktracker</div></pre></td></tr></table></figure></p>
<p>ä¹Ÿæœ‰ç”±rootå¯åŠ¨ã€‚</p>
<h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3. æ€»ç»“"></a>3. æ€»ç»“</h2><p>è¿™æ¬¡æ­å»ºè¿‡ç¨‹å‰å‰ååç”¨äº†ä¸€ä¸ªæ˜ŸæœŸï¼Œéº»çƒ¦æ˜¯ä¸€å›äº‹ï¼Œå„ç§æƒé™é—®é¢˜ï¼Œæœ€ä¸»è¦æ˜¯è¿˜æ˜¯æˆ‘å¯¹hadoopçš„åŸºæœ¬ç»„æˆä¸å¤Ÿäº†è§£ï¼Œhadoopçš„å„ä¸ªéƒ¨åˆ†éƒ½æ˜¯åˆ†å¼€çš„ï¼Œåœ¨share/hadoopç›®å½•ä¸‹çš„æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½å¯¹åº”ä¸ä¸€ä¸ªåŠŸèƒ½ï¼Œæˆ‘ä¸€å¼€å§‹å°±æƒ³ç€æŠŠä»–ä»¬éƒ½æ”¾ä¸€èµ·ï¼Œå¯¼è‡´ä¸åŒæ¨¡å—çš„é…ç½®æ–‡ä»¶é‡å¤å¹¶äº§ç”Ÿå†²çªï¼Œæœ€åå¯¼è‡´è¿›ç¨‹èµ·ä¸æ¥ï¼Œä»Šåè¿˜æ˜¯è¦åŠ å¼ºå¯¹åŸºæœ¬æ¦‚å¿µçš„ç†è§£ã€‚å…¶æ¬¡æ˜¯é‡åˆ°é”™è¯¯å¤šçœ‹çœ‹æ—¥å¿—æ–‡ä»¶ï¼Œå¾ˆå¤šé”™è¯¯èƒ½å¤Ÿç›´æ¥æ ¹æ®é”™è¯¯ä¿¡æ¯å°±èƒ½å¤Ÿæ”¹æ­£ã€‚</p>
<p>è¿˜æœ‰éœ€è¦åæ§½çš„å°±æ˜¯ä¸èƒ½å®Œå…¨æŒ‰éƒ¨å°±ç­çš„ç…§ç€æ•™ç¨‹æ¥æ“ä½œï¼Œåº”è¯¥å…ˆçœ‹çœ‹åƒfaqè¿™äº›ä¿¡æ¯ï¼Œåšåˆ°æœ‰ä¸ªæ•´ä½“ä¸Šçš„æŠŠæ¡ï¼Œä¸è‡³äºæ‹†äº†ä¸œå¢™è¡¥è¥¿å¢™ï¼Œåˆ°æœ€åä¹Ÿæ²¡èƒ½å®Œå…¨è§£å†³é—®é¢˜ã€‚</p>
<p>ä¸‹é¢è¿›è¡Œ<a href="http://www.cloudera.com/content/cloudera-content/cloudera-docs/CDH5/latest/CDH5-High-Availability-Guide/CDH5-High-Availability-Guide.html" target="_blank" rel="external">HAçš„ç¯å¢ƒæ­å»º</a>ï¼Œè¿™æ¬¡ä¸€å®šè¦æé«˜æ•ˆç‡äº†ï¼ï¼ï¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¿—è¯è¯´å¾—å¥½ï¼Œä¸‡äº‹å¼€å¤´éš¾ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œç¯å¢ƒéƒ¨ç½²è¦ç®—æ˜¯ç¬¬ä¸€é—¨æ§›äº†ã€‚æˆ‘æœ€è¿‘æŠ˜è…¾äº†ä¸€å‘¨æ—¶é—´æŠŠcdh5.0.2.tar.gzç‰ˆæœ¬åœ¨MRv1æ¨¡å¼ä¸‹ï¼ŒæˆåŠŸé›†æˆäº†Kerberoså®‰å…¨è®¤è¯ï¼Œå¹¶ä¸”æ˜¯åœ¨å…¨åˆ†å¸ƒå¼æ¨¡å¼ä¸‹ã€‚ç»è¿‡è¿™æ¬¡å®‰è£…è¿‡ç¨‹ï¼Œå¯¹hadoopçš„äº†è§£åˆæ·±å…¥äº†ä¸€å±‚ã€‚ç°åœ¨è¶ç€è‡ªå·±åˆšæ­å»ºå®Œç¯å¢ƒï¼Œè„‘å­è¿˜æ—¶ä¸æ—¶çš„é—ªç°é‡åˆ°çš„é”™è¯¯ï¼ŒæŠŠæˆ‘çš„å®‰è£…è¿‡ç¨‹è®°å½•äºæ­¤ï¼Œä¸€æ–¹é¢æ–¹ä¾¿è‡ªå·±ä»ŠåæŸ¥é˜…ï¼Œå¦ä¸€æ–¹é¢å¸Œæœ›å¯¹ä»Šåé‡åˆ°åŒæ ·é—®é¢˜äººæœ‰æ‰€å¯å‘ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="å¤§æ•°æ®" scheme="http://liujiacai.net/categories/bigdata/"/>
    
    
      <category term="hadoop" scheme="http://liujiacai.net/tags/hadoop/"/>
    
  </entry>
  
  <entry>
    <title>JVM çš„ç±»åˆå§‹åŒ–æœºåˆ¶</title>
    <link href="http://liujiacai.net/blog/2014/07/12/order-of-initialization-in-java/"/>
    <id>http://liujiacai.net/blog/2014/07/12/order-of-initialization-in-java/</id>
    <published>2014-07-12T05:02:29.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>å½“ä½ åœ¨ Java ç¨‹åºä¸­<code>new</code>å¯¹è±¡æ—¶ï¼Œæœ‰æ²¡æœ‰è€ƒè™‘è¿‡ JVM æ˜¯å¦‚ä½•æŠŠé™æ€çš„å­—èŠ‚ç ï¼ˆbyte codeï¼‰è½¬åŒ–ä¸ºè¿è¡Œæ—¶å¯¹è±¡çš„å‘¢ï¼Œè¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†æ¸…æ¥šçš„åŒå­¦ç›¸ä¿¡ä¹Ÿä¸ä¼šå¤ªå¤šï¼Œè¿™ç¯‡æ–‡ç« é¦–å…ˆä»‹ç» JVM ç±»åˆå§‹åŒ–çš„æœºåˆ¶ï¼Œç„¶åç»™å‡ºå‡ ä¸ªæ˜“å‡ºé”™çš„å®ä¾‹æ¥åˆ†æï¼Œå¸®åŠ©å¤§å®¶æ›´å¥½ç†è§£è¿™ä¸ªçŸ¥è¯†ç‚¹ã€‚</p>
<h2 id="Loading-Linking-and-Initialization"><a href="#Loading-Linking-and-Initialization" class="headerlink" title="Loading, Linking, and Initialization"></a>Loading, Linking, and Initialization</h2><p>JVM å°†å­—èŠ‚ç è½¬åŒ–ä¸ºè¿è¡Œæ—¶å¯¹è±¡åˆ†ä¸ºä¸‰ä¸ªé˜¶æ®µï¼Œåˆ†åˆ«æ˜¯ï¼šloading ã€Linkingã€initializationã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i1/581166664/TB2kGtOc88lpuFjy0FnXXcZyXXa_!!581166664.gif" alt="The beginning of a class&#39;s lifetime"></p>
<p>ä¸‹é¢åˆ†åˆ«ä»‹ç»è¿™ä¸‰ä¸ªè¿‡ç¨‹ï¼š</p>
<h3 id="Loading"><a href="#Loading" class="headerlink" title="Loading"></a>Loading</h3><p>Loading è¿‡ç¨‹ä¸»è¦å·¥ä½œæ˜¯ç”±<code>ClassLoader</code>å®Œæˆã€‚è¯¥è¿‡ç¨‹å…·ä½“åŒ…æ‹¬ä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>æ ¹æ®ç±»çš„å…¨åï¼Œç”Ÿæˆä¸€ä»½äºŒè¿›åˆ¶å­—èŠ‚ç æ¥è¡¨ç¤ºè¯¥ç±»</li>
<li>å°†äºŒè¿›åˆ¶çš„å­—èŠ‚ç è§£ææˆ<a href="http://www.artima.com/insidejvm/ed2/jvm5.html" target="_blank" rel="external">æ–¹æ³•åŒº</a>å¯¹åº”çš„æ•°æ®ç»“æ„</li>
<li>æœ€åç”Ÿæˆä¸€ <code>Class</code> å¯¹è±¡çš„å®ä¾‹æ¥è¡¨ç¤ºè¯¥ç±»</li>
</ol>
<p><img src="https://img.alicdn.com/imgextra/i2/581166664/TB2HtNyc4dkpuFjy0FbXXaNnpXa_!!581166664.gif" alt="ClassLoader ç»§æ‰¿å…³ç³»ï¼Œä¸åŒ CL è´Ÿè´£åŠ è½½ä¸åŒç±»"></p>
<p>JVM ä¸­é™¤äº†æœ€é¡¶å±‚çš„<code>Boostrap ClassLoader</code>æ˜¯ç”¨ C/C++ å®ç°å¤–ï¼Œå…¶ä½™ç±»åŠ è½½å™¨å‡ç”± Java å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨<code>getClassLoader</code>æ–¹æ³•æ¥è·å–å½“å‰ç±»çš„ç±»åŠ è½½å™¨ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">public class ClassLoaderDemo &#123;</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line">        System.out.println(ClassLoaderDemo.class.getClassLoader());</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"># sun.misc.Launcher$AppClassLoader@30a4effe</div><div class="line"># AppClassLoader ä¹Ÿå°±æ˜¯ä¸Šå›¾ä¸­çš„ System Class Loader</div></pre></td></tr></table></figure></p>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬åœ¨å¯åŠ¨<code>java</code>ä¼ å…¥<code>-verbose:class</code>æ¥æŸ¥çœ‹åŠ è½½çš„ç±»æœ‰é‚£äº›ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">java -verbose:class ClassLoaderDemo</div><div class="line"></div><div class="line">[Opened /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.Object from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.io.Serializable from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.Comparable from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.CharSequence from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line"></div><div class="line">....</div><div class="line">....</div><div class="line"></div><div class="line">[Loaded java.security.BasicPermissionCollection from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded ClassLoaderDemo from file:/Users/liujiacai/codes/IdeaProjects/mysql-test/target/classes/]</div><div class="line">[Loaded sun.launcher.LauncherHelper$FXHelper from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.Class$MethodArray from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.Void from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">sun.misc.Launcher$AppClassLoader@2a139a55</div><div class="line">[Loaded java.lang.Shutdown from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div><div class="line">[Loaded java.lang.Shutdown$Lock from /Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home/jre/lib/rt.jar]</div></pre></td></tr></table></figure></p>
<h3 id="Linking"><a href="#Linking" class="headerlink" title="Linking"></a>Linking</h3><h4 id="Verification"><a href="#Verification" class="headerlink" title="Verification"></a>Verification</h4><p><code>Verification</code> ä¸»è¦æ˜¯ä¿è¯ç±»ç¬¦åˆ Java è¯­æ³•è§„èŒƒï¼Œç¡®ä¿ä¸ä¼šå½±å“ JVM çš„è¿è¡Œã€‚åŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹äº‹é¡¹ï¼š</p>
<ul>
<li>bytecode çš„å®Œæ•´æ€§ï¼ˆintegrityï¼‰</li>
<li>æ£€æŸ¥<code>final</code>ç±»æ²¡æœ‰è¢«ç»§æ‰¿ï¼Œ<code>final</code>æ–¹æ³•æ²¡æœ‰è¢«è¦†ç›–</li>
<li>ç¡®ä¿æ²¡æœ‰ä¸å…¼å®¹çš„æ–¹æ³•ç­¾å</li>
</ul>
<h4 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h4><p>åœ¨ä¸€ä¸ªç±»å·²ç»è¢«<code>load</code>å¹¶ä¸”é€šè¿‡<code>verification</code>åï¼Œå°±è¿›å…¥åˆ°<code>preparation</code>é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJVM ä¼šä¸ºç±»çš„æˆå‘˜å˜é‡åˆ†é…å†…å­˜ç©ºé—´å¹¶ä¸”èµ‹äºˆé»˜è®¤åˆå§‹å€¼ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯è¿™ä¸ªé˜¶æ®µä¸ä¼šæ‰§è¡Œä»»ä½•ä»£ç ï¼Œè€Œåªæ˜¯æ ¹æ®<code>å˜é‡ç±»å‹</code>å†³å®šåˆå§‹å€¼ã€‚å¦‚æœä¸è¿›è¡Œé»˜è®¤åˆå§‹åŒ–ï¼Œåˆ†é…çš„ç©ºé—´çš„å€¼æ˜¯éšæœºçš„ï¼Œæœ‰ç‚¹ç±»å‹cè¯­è¨€ä¸­çš„<a href="http://zh.wikipedia.org/zh/%E8%BF%B7%E9%80%94%E6%8C%87%E9%92%88" target="_blank" rel="external">é‡æŒ‡é’ˆ</a>é—®é¢˜ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">Type	Initial Value</div><div class="line">int	0</div><div class="line">long	0L</div><div class="line">short	(short) 0</div><div class="line">char	&apos;\u0000&apos;</div><div class="line">byte	(byte) 0</div><div class="line">boolean	false</div><div class="line">reference	null</div><div class="line">float	0.0f</div><div class="line">double	0.0d</div></pre></td></tr></table></figure></p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒJVM ä¹Ÿå¯èƒ½ä¼šä¸ºæœ‰åŠ©äºæé«˜ç¨‹åºæ€§èƒ½çš„æ•°æ®ç»“æ„åˆ†é…å†…å­˜ï¼Œå¸¸è§çš„ä¸€ä¸ªç§°ä¸º<code>method table</code>çš„æ•°æ®ç»“æ„ï¼Œå®ƒåŒ…å«äº†æŒ‡å‘æ‰€æœ‰ç±»æ–¹æ³•ï¼ˆä¹ŸåŒ…æ‹¬ä¹Ÿä»çˆ¶ç±»ç»§æ‰¿çš„æ–¹æ³•ï¼‰çš„æŒ‡é’ˆï¼Œè¿™æ ·å†è°ƒç”¨çˆ¶ç±»æ–¹æ³•æ—¶å°±ä¸ç”¨å†å»æœç´¢äº†ã€‚</p>
<h4 id="Resolution"><a href="#Resolution" class="headerlink" title="Resolution"></a>Resolution</h4><p><code>Resolution</code> é˜¶æ®µä¸»è¦å·¥ä½œæ˜¯ç¡®è®¤ç±»ã€æ¥å£ã€å±æ€§å’Œæ–¹æ³•åœ¨ç±»<code>run-time constant pool</code>çš„ä½ç½®ï¼Œå¹¶ä¸”æŠŠè¿™äº›ç¬¦å·å¼•ç”¨ï¼ˆsymbolic referencesï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆdirect referencesï¼‰ã€‚</p>
<blockquote>
<p>locating classes, interfaces, fields, and methods referenced symbolically from a typeâ€™s constant pool, and replacing those symbolic references with direct references.</p>
</blockquote>
<p>è¿™ä¸ªè¿‡ç¨‹ä¸æ˜¯å¿…é¡»çš„ï¼Œä¹Ÿå¯ä»¥å‘ç”Ÿåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªç¬¦å·å¼•ç”¨æ—¶ã€‚</p>
<p><img src="https://img.alicdn.com/imgextra/i3/581166664/TB2iQhEcYFlpuFjy0FgXXbRBVXa_!!581166664.png" alt="JVM_Internal_Architecture"></p>
<h3 id="Initialization"><a href="#Initialization" class="headerlink" title="Initialization"></a>Initialization</h3><p>ç»è¿‡äº†ä¸Šé¢çš„<code>load</code>ã€<code>link</code>åï¼Œ<code>ç¬¬ä¸€æ¬¡</code> <code>ä¸»åŠ¨è°ƒç”¨</code>æŸç±»çš„æœ€åä¸€æ­¥æ˜¯<code>Initialization</code>ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¼šå»æŒ‰ç…§ä»£ç ä¹¦å†™é¡ºåºè¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™ä¸ªé˜¶æ®µä¼šå»çœŸæ­£æ‰§è¡Œä»£ç ï¼Œæ³¨æ„åŒ…æ‹¬ï¼šä»£ç å—ï¼ˆstaticä¸staticï¼‰ã€æ„é€ å‡½æ•°ã€å˜é‡æ˜¾å¼èµ‹å€¼ã€‚å¦‚æœä¸€ä¸ªç±»æœ‰çˆ¶ç±»ï¼Œä¼šå…ˆå»æ‰§è¡Œçˆ¶ç±»çš„<code>initialization</code>é˜¶æ®µï¼Œç„¶ååœ¨æ‰§è¡Œè‡ªå·±çš„ã€‚</p>
<p>ä¸Šé¢è¿™æ®µè¯æœ‰ä¸¤ä¸ªå…³é”®è¯ï¼š<code>ç¬¬ä¸€æ¬¡</code>ä¸<code>ä¸»åŠ¨è°ƒç”¨</code>ã€‚<code>ç¬¬ä¸€æ¬¡</code>æ˜¯è¯´åªåœ¨ç¬¬ä¸€æ¬¡æ—¶æ‰ä¼šæœ‰åˆå§‹åŒ–è¿‡ç¨‹ï¼Œä»¥åå°±ä¸éœ€è¦äº†ï¼Œå¯ä»¥ç†è§£ä¸ºæ¯ä¸ªç±»<code>æœ‰ä¸”ä»…æœ‰ä¸€æ¬¡</code>åˆå§‹åŒ–çš„æœºä¼šã€‚é‚£ä¹ˆä»€ä¹ˆæ˜¯<code>ä¸»åŠ¨è°ƒç”¨</code>å‘¢ï¼Ÿ<br>JVM è§„å®šäº†ä»¥ä¸‹å…­ç§æƒ…å†µä¸º<code>ä¸»åŠ¨è°ƒç”¨</code>ï¼Œå…¶ä½™çš„çš†ä¸º<code>è¢«åŠ¨è°ƒç”¨</code>ï¼š</p>
<ol>
<li>ä¸€ä¸ªç±»çš„å®ä¾‹è¢«åˆ›å»ºï¼ˆ<code>new</code>æ“ä½œã€åå°„ã€<code>cloning</code>ï¼Œååºåˆ—åŒ–ï¼‰</li>
<li>è°ƒç”¨ç±»çš„<code>static</code>æ–¹æ³•</li>
<li>ä½¿ç”¨æˆ–å¯¹ç±»/æ¥å£çš„<code>static</code>å±æ€§è¿›è¡Œèµ‹å€¼æ—¶ï¼ˆè¿™ä¸åŒ…æ‹¬<code>final</code>çš„ä¸åœ¨ç¼–è¯‘æœŸç¡®å®šçš„å¸¸é‡è¡¨è¾¾å¼ï¼‰</li>
<li>å½“è°ƒç”¨ API ä¸­çš„æŸäº›åå°„æ–¹æ³•æ—¶</li>
<li>å­ç±»è¢«åˆå§‹åŒ–</li>
<li>è¢«è®¾å®šä¸º JVM å¯åŠ¨æ—¶çš„å¯åŠ¨ç±»ï¼ˆå…·æœ‰<code>main</code>æ–¹æ³•çš„ç±»ï¼‰</li>
</ol>
<p>æœ¬æ–‡åé¢ä¼šç»™å‡ºä¸€ä¸ªç¤ºä¾‹ç”¨äºè¯´æ˜<code>ä¸»åŠ¨è°ƒç”¨</code>çš„<code>è¢«åŠ¨è°ƒç”¨</code>åŒºåˆ«ã€‚</p>
<p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæ‰§è¡Œä»£ç çš„é¡ºåºéµå¾ªä»¥ä¸‹ä¸¤ä¸ªåŸåˆ™ï¼š</p>
<ol>
<li>æœ‰staticå…ˆåˆå§‹åŒ–staticï¼Œç„¶åæ˜¯éstaticçš„</li>
<li>æ˜¾å¼åˆå§‹åŒ–ï¼Œæ„é€ å—åˆå§‹åŒ–ï¼Œæœ€åè°ƒç”¨æ„é€ å‡½æ•°è¿›è¡Œåˆå§‹åŒ–</li>
</ol>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><h3 id="å±æ€§åœ¨ä¸åŒæ—¶æœŸçš„èµ‹å€¼"><a href="#å±æ€§åœ¨ä¸åŒæ—¶æœŸçš„èµ‹å€¼" class="headerlink" title="å±æ€§åœ¨ä¸åŒæ—¶æœŸçš„èµ‹å€¼"></a>å±æ€§åœ¨ä¸åŒæ—¶æœŸçš„èµ‹å€¼</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">class Singleton &#123;</div><div class="line"></div><div class="line">    private static Singleton mInstance = new Singleton();// ä½ç½®1</div><div class="line">    public static int counter1;</div><div class="line">    public static int counter2 = 0;</div><div class="line"></div><div class="line">//    private static Singleton mInstance = new Singleton();// ä½ç½®2</div><div class="line"></div><div class="line">    private Singleton() &#123;</div><div class="line">        counter1++;</div><div class="line">        counter2++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static Singleton getInstantce() &#123;</div><div class="line">        return mInstance;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class InitDemo &#123;</div><div class="line"></div><div class="line">    public static void main(String[] args) &#123;</div><div class="line"></div><div class="line">        Singleton singleton = Singleton.getInstantce();</div><div class="line">        System.out.println(&quot;counter1: &quot; + singleton.counter1);</div><div class="line">        System.out.println(&quot;counter2: &quot; + singleton.counter2);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å½“<code>mInstance</code>åœ¨ä½ç½®1æ—¶ï¼Œæ‰“å°å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">counter1: 1</div><div class="line">counter2: 0</div></pre></td></tr></table></figure></p>
<p>å½“<code>mInstance</code>åœ¨ä½ç½®2æ—¶ï¼Œæ‰“å°å‡º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">counter1: 1</div><div class="line">counter2: 1</div></pre></td></tr></table></figure></p>
<p><code>Singleton</code>ä¸­çš„ä¸‰ä¸ªå±æ€§åœ¨<code>Preparation</code>é˜¶æ®µä¼šæ ¹æ®ç±»å‹èµ‹äºˆé»˜è®¤å€¼ï¼Œåœ¨<code>Initialization</code>é˜¶æ®µä¼šæ ¹æ®æ˜¾ç¤ºèµ‹å€¼çš„è¡¨è¾¾å¼å†æ¬¡è¿›è¡Œèµ‹å€¼ï¼ˆæŒ‰é¡ºåºè‡ªä¸Šè€Œä¸‹æ‰§è¡Œï¼‰ã€‚æ ¹æ®è¿™ä¸¤ç‚¹ï¼Œå°±ä¸éš¾ç†è§£ä¸Šé¢çš„ç»“æœäº†ã€‚</p>
<h3 id="ä¸»åŠ¨è°ƒç”¨-vs-è¢«åŠ¨è°ƒç”¨"><a href="#ä¸»åŠ¨è°ƒç”¨-vs-è¢«åŠ¨è°ƒç”¨" class="headerlink" title="ä¸»åŠ¨è°ƒç”¨ vs. è¢«åŠ¨è°ƒç”¨"></a>ä¸»åŠ¨è°ƒç”¨ vs. è¢«åŠ¨è°ƒç”¨</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">class NewParent &#123;</div><div class="line"></div><div class="line">    static int hoursOfSleep = (int) (Math.random() * 3.0);</div><div class="line"></div><div class="line">    static &#123;</div><div class="line">        System.out.println(&quot;NewParent was initialized.&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class NewbornBaby extends NewParent &#123;</div><div class="line"></div><div class="line">    static int hoursOfCrying = 6 + (int) (Math.random() * 2.0);</div><div class="line"></div><div class="line">    static &#123;</div><div class="line">        System.out.println(&quot;NewbornBaby was initialized.&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class ActiveUsageDemo &#123;</div><div class="line"></div><div class="line">    // Invoking main() is an active use of ActiveUsageDemo</div><div class="line">    public static void main(String[] args) &#123;</div><div class="line"></div><div class="line">        // Using hoursOfSleep is an active use of NewParent,</div><div class="line">        // but a passive use of NewbornBaby</div><div class="line">        System.out.println(NewbornBaby.hoursOfSleep);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    static &#123;</div><div class="line">        System.out.println(&quot;ActiveUsageDemo was initialized.&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ç¨‹åºæœ€ç»ˆè¾“å‡ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ActiveUsageDemo was initialized.</div><div class="line">NewParent was initialized.</div><div class="line">1</div></pre></td></tr></table></figure></p>
<p>ä¹‹æ‰€ä»¥æ²¡æœ‰è¾“å‡º<code>NewbornBaby was initialized.</code>æ˜¯å› ä¸ºæ²¡æœ‰ä¸»åŠ¨å»è°ƒç”¨<code>NewbornBaby</code>ï¼Œå¦‚æœæŠŠæ‰“å°çš„å†…å®¹æ”¹ä¸º<code>NewbornBaby.hoursOfCrying</code> é‚£ä¹ˆè¿™æ—¶å°±æ˜¯ä¸»åŠ¨è°ƒç”¨<code>NewbornBaby</code>äº†ï¼Œç›¸åº”çš„è¯­å¥ä¹Ÿä¼šæ‰“å°å‡ºæ¥ã€‚</p>
<h3 id="é¦–æ¬¡ä¸»åŠ¨è°ƒç”¨æ‰ä¼šåˆå§‹åŒ–"><a href="#é¦–æ¬¡ä¸»åŠ¨è°ƒç”¨æ‰ä¼šåˆå§‹åŒ–" class="headerlink" title="é¦–æ¬¡ä¸»åŠ¨è°ƒç”¨æ‰ä¼šåˆå§‹åŒ–"></a>é¦–æ¬¡ä¸»åŠ¨è°ƒç”¨æ‰ä¼šåˆå§‹åŒ–</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">public class Alibaba &#123;</div><div class="line"></div><div class="line">    public static int k = 0;</div><div class="line">    public static Alibaba t1 = new Alibaba(&quot;t1&quot;);</div><div class="line">    public static Alibaba t2 = new Alibaba(&quot;t2&quot;);</div><div class="line">    public static int i = print(&quot;i&quot;);</div><div class="line">    public static int n = 99;</div><div class="line">    private int a = 0;</div><div class="line">    public int j = print(&quot;j&quot;);</div><div class="line">    &#123;</div><div class="line">        print(&quot;æ„é€ å—&quot;);</div><div class="line">    &#125;</div><div class="line">    static &#123;</div><div class="line">        print(&quot;é™æ€å—&quot;);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public Alibaba(String str) &#123;</div><div class="line">        System.out.println((++k) + &quot;:&quot; + str + &quot;   i=&quot; + i + &quot;    n=&quot; + n);</div><div class="line">        ++i;</div><div class="line">        ++n;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static int print(String str) &#123;</div><div class="line">        System.out.println((++k) + &quot;:&quot; + str + &quot;   i=&quot; + i + &quot;    n=&quot; + n);</div><div class="line">        ++n;</div><div class="line">        return ++i;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    public static void main(String args[]) &#123;</div><div class="line">        Alibaba t = new Alibaba(&quot;init&quot;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸Šé¢è¿™ä¸ªä¾‹å­æ˜¯é˜¿é‡Œå·´å·´åœ¨14å¹´çš„æ ¡æ‹›é™„åŠ é¢˜ï¼Œæˆ‘å½“æ—¶çœ‹åˆ°è¿™ä¸ªé¢˜ï¼Œå°±è§‰å¾—ä¸é˜¿é‡Œæ— ç¼˜äº†ã€‚å›§</p>
<pre><code>1:j   i=0    n=0
2:æ„é€ å—   i=1    n=1
3:t1   i=2    n=2
4:j   i=3    n=3
5:æ„é€ å—   i=4    n=4
6:t2   i=5    n=5
7:i   i=6    n=6
8:é™æ€å—   i=7    n=99
9:j   i=8    n=100
10:æ„é€ å—   i=9    n=101
11:init   i=10    n=102
</code></pre><p>ä¸Šé¢æ˜¯ç¨‹åºçš„è¾“å‡ºç»“æœï¼Œä¸‹é¢æˆ‘æ¥ä¸€è¡Œè¡Œåˆ†æä¹‹ã€‚</p>
<ol>
<li>ç”±äº<code>Alibaba</code>æ˜¯ JVM çš„å¯åŠ¨ç±»ï¼Œå±äºä¸»åŠ¨è°ƒç”¨ï¼Œæ‰€ä»¥ä¼šä¾æ­¤è¿›è¡Œ loadingã€linkingã€initialization ä¸‰ä¸ªè¿‡ç¨‹ã€‚</li>
<li>ç»è¿‡ loadingä¸ linking é˜¶æ®µåï¼Œæ‰€æœ‰çš„å±æ€§éƒ½æœ‰äº†é»˜è®¤å€¼ï¼Œç„¶åè¿›å…¥æœ€åçš„ initialization é˜¶æ®µã€‚</li>
<li>åœ¨ initialization é˜¶æ®µï¼Œå…ˆå¯¹ static å±æ€§èµ‹å€¼ï¼Œç„¶ååœ¨é static çš„ã€‚<code>k</code> ç¬¬ä¸€ä¸ªæ˜¾å¼èµ‹å€¼ä¸º 0 ã€‚</li>
<li><p>æ¥ä¸‹æ¥æ˜¯<code>t1</code>å±æ€§ï¼Œç”±äºè¿™æ—¶<code>Alibaba</code>è¿™ä¸ªç±»å·²ç»å¤„äº initialization é˜¶æ®µï¼Œstatic å˜é‡æ— éœ€å†æ¬¡åˆå§‹åŒ–äº†ï¼Œæ‰€ä»¥å¿½ç•¥ static å±æ€§çš„èµ‹å€¼ï¼Œåªå¯¹é static çš„å±æ€§è¿›è¡Œèµ‹å€¼ï¼Œæ‰€æœ‰æœ‰äº†å¼€å§‹çš„ï¼š</p>
<pre><code>1:j   i=0    n=0
2:æ„é€ å—   i=1    n=1
3:t1   i=2    n=2
</code></pre></li>
<li><p>æ¥ç€å¯¹<code>t2</code>è¿›è¡Œèµ‹å€¼ï¼Œè¿‡ç¨‹ä¸t1ç›¸åŒ</p>
<pre><code>4:j   i=3    n=3
5:æ„é€ å—   i=4    n=4
6:t2   i=5    n=5
</code></pre></li>
<li><p>ä¹‹ååˆ°äº† static çš„ <code>i</code> ä¸ <code>n</code>ï¼š</p>
<pre><code>7:i   i=6    n=6
</code></pre></li>
<li><p>åˆ°ç°åœ¨ä¸ºæ­¢ï¼Œæ‰€æœ‰çš„staticçš„æˆå‘˜å˜é‡å·²ç»èµ‹å€¼å®Œæˆï¼Œæ¥ä¸‹æ¥å°±åˆ°äº† static ä»£ç å—</p>
<pre><code>8:é™æ€å—   i=7    n=99
</code></pre></li>
<li><p>è‡³æ­¤ï¼Œæ‰€æœ‰çš„ static éƒ¨åˆ†èµ‹å€¼å®Œæ¯•ï¼Œæ¥ä¸‹æ¥æ˜¯é static çš„ <code>j</code></p>
<pre><code>9:j   i=8    n=100
</code></pre></li>
<li><p>æ‰€æœ‰å±æ€§éƒ½èµ‹å€¼å®Œæ¯•ï¼Œæœ€åæ˜¯æ„é€ å—ä¸æ„é€ å‡½æ•°</p>
<pre><code>10:æ„é€ å—   i=9    n=101
11:init   i=10    n=102
</code></pre></li>
</ol>
<p>ç»è¿‡ä¸Šé¢è¿™9æ­¥ï¼Œ<code>Alibaba</code>è¿™ä¸ªç±»çš„åˆå§‹åŒ–è¿‡ç¨‹å°±ç®—å®Œæˆäº†ã€‚è¿™é‡Œé¢æ¯”è¾ƒå®¹æ˜“å‡ºé”™çš„æ˜¯ç¬¬3æ­¥ï¼Œè®¤ä¸ºä¼šå†æ¬¡åˆå§‹åŒ– static å˜é‡æˆ–ä»£ç å—ã€‚è€Œå®é™…ä¸Šæ˜¯æ²¡å¿…è¦ï¼Œå¦åˆ™ä¼šå‡ºç°å¤šæ¬¡åˆå§‹åŒ–çš„æƒ…å†µã€‚</p>
<p>å¸Œæœ›å¤§å®¶èƒ½å¤šæ€è€ƒæ€è€ƒè¿™ä¸ªä¾‹å­çš„ç»“æœï¼ŒåŠ æ·± JVM åˆå§‹åŒ–ç±»è¿‡ç¨‹çš„ç†è§£ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ç»è¿‡æœ€åè¿™ä¸‰ä¸ªä¾‹å­ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ JVM çš„ç±»åŠ è½½æœºåˆ¶éƒ½æœ‰äº†æ›´æ·±çš„ç†è§£ï¼Œå¦‚æœå¤§å®¶è¿˜æ˜¯æœ‰ç–‘é—®ï¼Œæ¬¢è¿ç•™è¨€è®¨è®ºã€‚</p>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><ul>
<li><a href="https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-5.html" target="_blank" rel="external">Java Virtual Machine Specification Chapter 5</a></li>
<li><a href="http://www.artima.com/insidejvm/ed2/lifetypeP.html" target="_blank" rel="external">Chapter 7 of Inside the Java Virtual Machine</a></li>
<li><a href="http://blog.jamesdbloom.com/JVMInternals.html" target="_blank" rel="external">JVM Internals</a></li>
<li><a href="https://www.quora.com/What-kind-of-method-is-Constructor-static-or-non-static" target="_blank" rel="external">What kind of method is Constructor, static or non static?</a></li>
<li><a href="http://www.ibm.com/developerworks/java/tutorials/j-classloader/j-classloader.html" target="_blank" rel="external">Understanding the Java ClassLoader</a></li>
</ul>
<h2 id="æ›´æ–°æ—¥å¿—"><a href="#æ›´æ–°æ—¥å¿—" class="headerlink" title="æ›´æ–°æ—¥å¿—"></a>æ›´æ–°æ—¥å¿—</h2><ul>
<li>2014-07-12, æ ¹æ®æ ¡æ‹›ç»éªŒï¼Œå®Œæˆ<a href="https://github.com/jiacai2050/jiacai2050.github.io/blob/c7a3e971d8906841eb2ac8b592ea2453d3ad2533/source/_posts/2014-07-12-order-of-initialization-in-java.markdown" target="_blank" rel="external">åˆç¨¿</a>ï¼Œå¾ˆå¤šåœ°æ–¹æ²¡å†™æ¸…æ¥š</li>
<li>2017-01-15ï¼Œå…¨éƒ¨é‡å†™ï¼Œå¢åŠ  Loadã€Linkã€Initialization è¿‡ç¨‹ä¸ä¸‰ä¸ªç¤ºä¾‹</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å½“ä½ åœ¨ Java ç¨‹åºä¸­&lt;code&gt;new&lt;/code&gt;å¯¹è±¡æ—¶ï¼Œæœ‰æ²¡æœ‰è€ƒè™‘è¿‡ JVM æ˜¯å¦‚ä½•æŠŠé™æ€çš„å­—èŠ‚ç ï¼ˆbyte codeï¼‰è½¬åŒ–ä¸ºè¿è¡Œæ—¶å¯¹è±¡çš„å‘¢ï¼Œè¿™ä¸ªé—®é¢˜çœ‹ä¼¼ç®€å•ï¼Œä½†æ¸…æ¥šçš„åŒå­¦ç›¸ä¿¡ä¹Ÿä¸ä¼šå¤ªå¤šï¼Œè¿™ç¯‡æ–‡ç« é¦–å…ˆä»‹ç» JVM ç±»åˆå§‹åŒ–çš„æœºåˆ¶ï¼Œç„¶åç»™å‡ºå‡ ä¸ªæ˜“å‡ºé”™çš„å®ä¾‹æ¥åˆ†æï¼Œå¸®åŠ©
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æ€ç»´ä¹‹ä¸‰è¯­ä¹‰ç¬¦å·åŒ–è¡¨è¾¾ä¸è®¡ç®—</title>
    <link href="http://liujiacai.net/blog/2014/06/06/computational-thinking-3/"/>
    <id>http://liujiacai.net/blog/2014/06/06/computational-thinking-3/</id>
    <published>2014-06-06T13:13:30.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>##0å’Œ1ä¸é€»è¾‘â€”â€”æ€ç»´ç¬¦å·åŒ–è¡¨è¾¾ä¸é€»è¾‘è¿ç®—<br><a id="more"></a><br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2G2hDapXXXXacXXXXXXXXXXXX_!!581166664.png" alt="è¯­ä¹‰ç¬¦å·åŒ–è¡¨è¾¾ä¸è®¡ç®—"></p>
<p>æœ‰ä¸Šå›¾å¯çŸ¥ï¼Œåœ¨è¿›è¡Œè¯­ä¹‰ç¬¦å·åŒ–è¡¨è¾¾ä¸è®¡ç®—è¿‡ç¨‹ä¸­åˆ†ä¸ºå¦‚å›¾æ‰€ç¤ºçš„å…­æ­¥ï¼Œä¸‹é¢åˆ†åˆ«è¿›è¡Œé˜è¿°ã€‚</p>
<h3 id="1-è¯­ä¹‰ç¬¦å·åŒ–ä¸ç¬¦å·è®¡ç®—åŒ–"><a href="#1-è¯­ä¹‰ç¬¦å·åŒ–ä¸ç¬¦å·è®¡ç®—åŒ–" class="headerlink" title="1. è¯­ä¹‰ç¬¦å·åŒ–ä¸ç¬¦å·è®¡ç®—åŒ–"></a>1. è¯­ä¹‰ç¬¦å·åŒ–ä¸ç¬¦å·è®¡ç®—åŒ–</h3><h4 id="1-1-è‡ªç„¶ç°è±¡"><a href="#1-1-è‡ªç„¶ç°è±¡" class="headerlink" title="1.1 è‡ªç„¶ç°è±¡"></a>1.1 è‡ªç„¶ç°è±¡</h4><p>è€å¸ˆç”¨çš„ä¾‹å­æ˜¯æˆ‘ä»¬ä¸­å›½çš„ç»å…¸è‘—ä½œã€Šæ˜“ç»ã€‹è®²è¿°çš„ï¼Œé¦–å…ˆè®²è§£å¦ç›¸ï¼Œæœ€åŸºæœ¬çš„ä¸¤ç±»å…ƒç´ æ˜¯â€œé˜´â€ä¸â€œé˜³â€ï¼Œæœ‰è¿™ä¸¤ç§å…ƒç´ çš„ä¸åŒç»„åˆï¼Œå¯ä»¥å¾—åˆ°æ›´å¤šçš„å¦ç›¸;æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹â€œé˜´â€ä¸â€œé˜³â€è¿›è¡Œè¯­ä¹‰åŒ–ï¼Œæ¯”å¦‚â€œé˜´â€ä»£è¡¨â€œå‡‰â€ï¼Œâ€œé˜³â€ä»£è¡¨â€œçƒ­â€ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å¾—åˆ°äºŒåå››èŠ‚æ°”çš„å˜åŒ–å›¾ã€‚</p>
<p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2z4tzapXXXXbkXXXXXXXXXXXX_!!581166664.png" alt="äºŒåå››èŠ‚æ°”"></p>
<h4 id="1-2-æ€ç»´ç¬¦å·åŒ–ä¸é€»è¾‘è¿ç®—"><a href="#1-2-æ€ç»´ç¬¦å·åŒ–ä¸é€»è¾‘è¿ç®—" class="headerlink" title="1.2 æ€ç»´ç¬¦å·åŒ–ä¸é€»è¾‘è¿ç®—"></a>1.2 æ€ç»´ç¬¦å·åŒ–ä¸é€»è¾‘è¿ç®—</h4><p>é€»è¾‘æ˜¯æŒ‡äº‹ç‰©å› æœä¹‹é—´æ‰€éµå¾ªçš„è§„å¾‹ï¼Œæ˜¯ç°å®ä¸­æ™®é€‚çš„æ€ç»´æ–¹å¼ã€‚</p>
<p>é€»è¾‘çš„åŸºæœ¬è¡¨ç¤ºå½¢å¼æ˜¯<strong>å‘½é¢˜</strong>ä¸<strong>æ¨ç†</strong>ï¼Œæ¨ç†å³æ ¹æ®ç”±ç®€å•å‘½é¢˜çš„åˆ¤æ–­æ¨å¯¼å¾—å‡ºå¤æ‚å‘½é¢˜çš„åˆ¤æ–­ç»“è®ºçš„è¿‡ç¨‹ã€‚å‘½é¢˜ç”±è¯­å¥è¡¨è¿°ï¼Œå³å†…å®¹ä¸ºâ€œçœŸâ€æˆ–ä¸ºâ€œå‡â€çš„ä¸€ä¸ªåˆ¤æ–­è¯­å¥ï¼</p>
<p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨ä¸€æ¬¡ä¸­å­¦æµ‹éªŒè¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸‰ä½è€å¸ˆåšäº†æµ‹è¯„ï¼šA.å­¦ä¹ å§”å‘˜åŠæ ¼;B.æœ‰äººä¸åŠæ ¼;C.å…¨ç­éƒ½ä¸åŠæ ¼ã€‚åœ¨è€ƒè¯•åï¼Œè¯æ˜åªæœ‰ä¸€ä¸ªè€å¸ˆçš„é¢„æµ‹æ˜¯å¯¹çš„ï¼Œè¯·é—®è°å¯¹è°é”™ï¼Ÿ</p>
<p>æ±‚è§£è¿‡ç¨‹ï¼š</p>
<ul>
<li>å‘½é¢˜Aï¼šâ€œå­¦ä¹ å§”å‘˜åŠæ ¼ï¼ˆæœ‰äººåŠæ ¼ï¼‰â€</li>
<li>å‘½é¢˜Bï¼šâ€œæœ‰äººä¸åŠæ ¼â€</li>
<li>å‘½é¢˜Cï¼šâ€œå…¨ç­éƒ½ä¸åŠæ ¼â€</li>
</ul>
<p>ç”±é¢˜ç›®å‡è®¾å’Œå‘½é¢˜ä¹‹é—´çš„å…³ç³»å¾—å‡ºâ€œå·²çŸ¥â€ï¼šAã€Bã€Cåªæœ‰ä¸€ä¸ªä¸ºçœŸ</p>
<ul>
<li>å¦‚æœAçœŸï¼Œåˆ™Cå‡;å¦‚æœCçœŸï¼Œåˆ™Aå‡</li>
<li>å¦‚æœBçœŸï¼Œè€ŒAï¼ŒCå¯èƒ½æœ‰ä¸€ä¸ªä¸ºçœŸï¼Œä¸é¢˜ç›®çŸ›ç›¾ï¼Œæ‰€ä»¥Bä¸ºå‡ã€‚</li>
<li>å¦‚æœBå‡ï¼Œåˆ™â€œå…¨ç­éƒ½åŠæ ¼â€ä¸ºçœŸï¼Œè€Œç”±æ­¤æ¨æ–­Cä¸ºå‡ã€‚</li>
</ul>
<p>ç”±ä¸Šâ€œå·²çŸ¥â€ï¼Œæ¨ç†ï¼šAä¸ºçœŸã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å°†é€»è¾‘è¡¨è¾¾ä¸º0å’Œ1åŠå…¶è¿ç®—ï¼š1ä¸ºçœŸï¼Œ0ä¸ºå‡ï¼Œè¿ç®—è§„åˆ™æœ‰â€œANDâ€ã€â€œORâ€ã€â€œNOTâ€ã€â€œXORâ€ã€‚</p>
<p>ä¸€ä¸ªå‘½é¢˜ç”¨Aã€Bç­‰ç¬¦å·è¡¨è¾¾ï¼Œå…¶ä¸­ç¬¦å·çš„å€¼å¯èƒ½ä¸º0ä¹Ÿå¯èƒ½ä¸º1</p>
<p>æ±‚è§£è¿‡ç¨‹ï¼š</p>
<ul>
<li>å‘½é¢˜Aï¼šâ€œå­¦ä¹ å§”å‘˜åŠæ ¼ï¼ˆæœ‰äººåŠæ ¼ï¼‰â€</li>
<li>å‘½é¢˜Bï¼šâ€œæœ‰äººä¸åŠæ ¼â€</li>
<li>å‘½é¢˜Cï¼šâ€œå…¨ç­éƒ½ä¸åŠæ ¼â€</li>
</ul>
<p>å·²çŸ¥ï¼š</p>
<ul>
<li>( A AND (NOT C) ) OR ( (NOT A) AND C ) = 1</li>
<li>(NOT B) AND ( ( A AND (NOT C) ) OR ( (NOT A) AND C ) ) = 1</li>
<li>(NOT B) AND (NOT C) = 1</li>
</ul>
<p>ç»„åˆå½¢æˆæ‰€æœ‰å¯èƒ½è§£ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&lt;A=1,B=0,C=0&gt;,&lt;A=0,B=1,C=0&gt;,&lt;A=0,B=0,C=1&gt;&#125;</div></pre></td></tr></table></figure></p>
<p>å°±ä¸Šé¢è¿™ä¸‰ç§æƒ…å†µï¼Œå°†è¿™ä¸‰ç§æƒ…å†µåˆ†åˆ«å¸¦å…¥åˆ°å·²çŸ¥æ¡ä»¶ä¸­ï¼Œéƒ½æ»¡è¶³çš„ä¾¿æ˜¯é—®é¢˜çš„è§£ï¼š</p>
<a=1,b=0,c=0>

<p>####æ·±å…¥çŸ¥è¯†ï¼š</p>
<ul>
<li>äºšé‡Œå£«å¤šå¾·ï¼ˆå…¬å…ƒå‰384-322ï¼‰ï¼Œå¤å¸Œè…Šå“²å­¦å®¶ï¼šå½¢å¼é€»è¾‘</li>
</ul>
<blockquote>
<p>å…¸å‹æ¦‚å¿µï¼šå‘½é¢˜ã€æ¨ç†ã€ä¸‰æ®µè®º</p>
</blockquote>
<ul>
<li>è±å¸ƒå°¼èŒ¨ï¼ˆ1646-1716ï¼‰ï¼Œå¾·å›½æ•°å­¦å®¶ï¼šæ•°ç†é€»è¾‘</li>
</ul>
<blockquote>
<p>å…¸å‹æ¦‚å¿µï¼šè°“è¯ã€è°“è¯æ¼”ç®—</p>
</blockquote>
<ul>
<li>å¸ƒå°”ï¼ˆ1815-1864ï¼‰ï¼Œå¾·å›½æ•°å­¦å®¶ï¼šå¸ƒå°”ä»£æ•°</li>
</ul>
<blockquote>
<p>å…¸å‹æ¦‚å¿µï¼šå¸ƒå°”é‡ã€å¸ƒå°”å€¼ã€å¸ƒå°”è¿ç®—ã€å¸ƒå°”æ“ä½œ</p>
</blockquote>
<ul>
<li>å…¶ä»–ï¼šæ—¶åºé€»è¾‘ï¼ˆTemporal Logicsï¼‰ã€æ¨¡æ€é€»è¾‘ï¼ˆModel Logicsï¼‰ã€å½’çº³é€»è¾‘ï¼ˆInductive Logicsï¼‰ã€æ¨¡ç³Šé€»è¾‘ï¼ˆFuzzy Logicsï¼‰ã€ç²—ç³™é€»è¾‘ï¼ˆRough Logicsï¼‰ã€éå•é€»è¾‘ç­‰</li>
</ul>
<p>æ•´ä¸ªç¬¬ä¸€å¤§èŠ‚æ‰€è¯´ä¸ºè¯­ä¹‰ç¬¦å·åŒ–è¡¨è¾¾ä¸è®¡ç®—è¿‡ç¨‹çš„å‰ä¸¤æ­¥çš„å†…å®¹ã€‚</p>
<p><a name="buma"></a></p>
<h3 id="2-è®¡ç®—0-1åŒ–"><a href="#2-è®¡ç®—0-1åŒ–" class="headerlink" title="2. è®¡ç®—0/1åŒ–"></a>2. è®¡ç®—0/1åŒ–</h3><p>è¿™ä¸€éƒ¨åˆ†ä¸»è¦æ˜¯æ•°å€¼ä¸éæ•°å€¼çš„æ•°å­—åŒ–è¡¨ç¤ºã€‚</p>
<h4 id="2-1-æ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º"><a href="#2-1-æ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º" class="headerlink" title="2.1 æ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º"></a>2.1 æ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º</h4><p>æ•°å€¼ä¿¡æ¯æ¯”è¾ƒå¥½è¡¨ç¤ºï¼Œæ— éå°±æ˜¯åŸç ã€åç ã€è¡¥ç è¿™äº›ä¸œè¥¿ï¼Œå…¶ä¸­æˆ‘æœ‰ç–‘é—®çš„æ˜¯ä¸ºä»€ä¹ˆä½¿ç”¨è¡¥ç åå°±å¯ä»¥åœ¨è¿›è¡Œç®—æ•°è¿ç®—æ—¶æŠŠç¬¦å·ä½ä¹Ÿç®—è¿›å»ï¼Ÿï¼Ÿ<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//ä¸¾ä¸ªä¾‹å­ï¼Œç”¨5ä½äºŒè¿›åˆ¶ä¸ºè¡¨ç¤ºæ•°å­—ï¼Œå…¶ä¸­ä¸€ä½ä¸ºç¬¦å·ä½ï¼Œè®¡ç®—10-3=ï¼Ÿ, -5-7=?</div><div class="line">    0 1010            1 1011        </div><div class="line">+)  1 1101         +) 1 1001  </div><div class="line">------------    ------------</div><div class="line">    0 0111            1 0100</div><div class="line">    è¿™æ˜¯7çš„åç         è¿™æ˜¯-12çš„åç </div></pre></td></tr></table></figure></p>
<p>ç»è¿‡<a href="http://www.douban.com/note/223507364/" target="_blank" rel="external">ä¸€ç•ªgoogle</a>åå‘ç°äº†å…¶ä¸­çš„å¥¥ç§˜ï¼Œå› ä¸ºç°åœ¨è®¡ç®—æœºä¸­åªæœ‰åŠ æ³•å™¨ï¼Œ<font color="red">æ²¡æœ‰å‡æ³•å™¨ï¼ˆè¿™é‡Œæˆ‘è¿˜ä¸çŸ¥é“ä¸ºä»€ä¹ˆè®¡ç®—æœºè®¾è®¡æ—¶æ²¡ä»€ä¹ˆæ²¡æœ‰å‡æ³•å™¨ï¼Œä¸çŸ¥é“æ˜¯å‡ºäºä»€ä¹ˆè€ƒè™‘ï¼‰</font>ï¼Œæ‰€ä»¥è®¡ç®—æœºéœ€è¦æŠŠæ‰€æœ‰çš„è¿ç®—ï¼ˆåŒ…æ‹¬å‡æ³•ï¼Œä¹˜æ³•ï¼Œé™¤æ³•ï¼‰è½¬åŒ–ä¸ºåŠ æ³•è¿ç®—ï¼Œè¡¥ç å°±æ˜¯ä¸ºäº†å°†å‡æ³•è¿è¡Œè½¬åŒ–ä¸ºåŠ æ³•è¿ç®—è€Œæå‡ºçš„æ¦‚å¿µã€‚è¡¥ç çš„æœ¬è´¨å°±æ±‚æ¨¡è¿ç®—ï¼Œå¯ä»¥è¿™ä¹ˆæƒ³ï¼Œä»¥æˆ‘ä»¬å¸¸è§çš„åˆ†é’Ÿï¼ˆæ¨¡ä¸º60ï¼‰ä¸ºä¾‹ï¼Œå‡è®¾ç°åœ¨æ˜¯30åˆ†ï¼Œè¦æƒ³å›åˆ°20åˆ†ï¼Œæœ‰ä¸¤ç§é€”å¾„ï¼š</p>
<ul>
<li>åœ¨30åˆ†çš„åŸºç¡€ä¸Šï¼Œå‡å»10åˆ†é’Ÿï¼Œ30-10=20</li>
<li>åœ¨30åˆ†çš„åŸºç¡€ä¸Šï¼ŒåŠ ä¸Š50åˆ†é’Ÿï¼Œå¦‚æœä¸è€ƒè™‘å°æ—¶çš„å¤§å°ï¼Œé‚£ä¹ˆ30+50-60=20,ä¹Ÿæ˜¯å›åˆ°äº†20åˆ†</li>
</ul>
<p>æˆ‘ä»¬éƒ½çŸ¥é“è´Ÿæ•°çš„è¡¥ç =åç +1ï¼Œç°åœ¨æœ‰äº†æ¨¡çš„æ¦‚å¿µï¼Œæˆ‘ä»¬è¿˜æœ‰è¿™ä¹ˆä¸ªå…¬å¼ï¼Œè¡¥ç =æ¨¡-|è´Ÿæ•°|ã€‚</p>
<p>ä¸Šé¢æ—¶é—´çš„ä¾‹å­ï¼Œè¦æƒ³å¾—åˆ°-10åˆ†é’Ÿçš„è¡¥ç ï¼Œæˆ‘ä»¬ç”¨60-10å³å¯å¾—åˆ°è¡¥ç 50,åœ¨ç”¨æ¨¡çš„æ€æƒ³æ¥è€ƒè™‘è¡¥ç æ—¶ï¼Œå°±æ²¡æœ‰ä»€ä¹ˆç¬¦å·ä½çš„æ¦‚å¿µäº†ï¼Œç¬¦å·ä½å’Œå…¶ä»–æ•°ç ä½ä¸€æ ·ï¼Œå°±æ˜¯é€šè¿‡æ¨¡å‡å»è´Ÿæ•°çš„ç»å¯¹å€¼å¾—åˆ°çš„ï¼Œæœ€é«˜ä½è¯¥æ˜¯0å°±æ˜¯0ï¼Œè¯¥æ˜¯1å°±æ˜¯1ï¼Œæ¯”å¦‚ä¸ºä»€ä¹ˆ-128çš„è¡¥ç æ˜¯1000 0000å‘¢ï¼Œå› ä¸º<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//ç”¨æ¨¡çš„æ¦‚å¿µæ¥æ±‚åç </div><div class="line">    1 0000 0000</div><div class="line">-)    1000 0000</div><div class="line">-----------------</div><div class="line">      1000 0000</div></pre></td></tr></table></figure></p>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼Œæ¨¡å°±æ˜¯ç°æœ‰äºŒè¿›åˆ¶èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼ˆåœ¨8ä½äºŒè¿›åˆ¶ä¸­ï¼Œè¡¨ç¤ºèŒƒå›´ä¸º0ï½255,å³256ä¸ªä¸åŒçš„å…ƒç´ ï¼‰ã€‚å¦‚æœè¿›ä¸€æ­¥æ¨å¯¼å¯ä»¥å¾—åˆ°1 0000 0000 = 1111 1111 + 1ï¼Œé‚£ä¹ˆæ±‚-128çš„è¡¥ç çš„è¿‡ç¨‹è¿˜å¯ä»¥è¿™ä¹ˆåšï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">//è¡¥ç =åç +1 çš„æœ¬è´¨</div><div class="line">      1111 1111</div><div class="line">-)    1000 0000</div><div class="line">-----------------</div><div class="line">      0111 1111</div><div class="line">+)    0000 0001          </div><div class="line">-----------------</div><div class="line">      1000 0000</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·æ±‚è´Ÿæ•°è¡¥ç çš„è¿‡ç¨‹å°±å¯¹åº”äº†ï¼š</p>
<ol>
<li>å…ˆæ±‚ä¸€ä¸ªè´Ÿæ•°çš„åç ï¼ˆå‡æ³•è¿‡ç¨‹ï¼‰</li>
<li>åç +1ï¼ˆåŠ 1è¿‡ç¨‹ï¼‰</li>
</ol>
<p>å½“ç„¶ï¼Œæ¨¡çš„æ¦‚å¿µæ˜¯æˆ‘ä»¬äººä¸ºçš„ç†è§£ï¼Œè®¡ç®—æœºè‚¯å®šä¸ä¼šè¿™ä¹ˆâ€œç†è§£â€ï¼Œå®ƒæ˜¯ä¸¥æ ¼æŒ‰ç…§è¡¥ç =åç +1çš„å…¬å¼æ¥è¿ä½œçš„ï¼Œå› ä¸ºé‡‡ç”¨æ¨¡çš„æ€è·¯æ¥è®¡ç®—è¡¥ç æ—¶éœ€è¦ç”¨åˆ°å‡æ³•ï¼Œè€Œè®¡ç®—æœºæ˜¯ä¸ä¼šåšå‡æ³•çš„ã€‚</p>
<p><center>å›¾2. 8ä½äºŒè¿›åˆ¶çš„è¡¥ç è¡¨</center><br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2OJ54apXXXXXXXpXXXXXXXXXX_!!581166664.jpg" alt="è¡¥ç "></p>
<p>å¦‚å›¾2æ‰€ç¤ºï¼Œ8ä½äºŒè¿›åˆ¶çš„è¡¥ç è¡¨ç¤ºçš„æ•°å€¼èŒƒå›´åœ¨-128ï½+127ä¹‹é—´ï¼Œä¹‹æ‰€ä»¥è´Ÿæ•°æ¯”æ­£æ•°çš„ç»å¯¹å€¼å¤§1æ˜¯å› ä¸ºåªæœ‰+0,æ²¡æœ‰-0,åœ¨è¡¥ç =åç +1å…¬å¼ä¸­çš„+1æ“ä½œæŠŠ-0åŠ æ²¡äº†ï¼Œè€Œä¸ä¹‹å¯¹åº”çš„æ˜¯è´Ÿæ•°çš„å¦ä¸€ç«¯å‘å‰ï¼ˆå‘è´Ÿæ•°è½´æ–¹å‘ï¼‰åŠ 1ä¸å°±å¾—åˆ°äº†-128äº†å˜›ã€‚</p>
<h4 id="2-2-éæ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º"><a href="#2-2-éæ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º" class="headerlink" title="2.2 éæ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º"></a>2.2 éæ•°å€¼ä¿¡æ¯çš„è¡¨ç¤º</h4><p>è¿™é‡Œæ— éå°±æ˜¯å„ç§ç¼–ç ï¼ŒåƒASCIIï¼ŒBCDç ,Unicodeç¼–ç ã€‚è¿™é‡Œä¸åŒçš„ç¼–ç æ‰€ç”¨çš„å­—èŠ‚é•¿åº¦æ˜¯ä¸ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å£°æ˜å˜é‡æ˜¯éœ€è¦æŒ‡å®šå˜é‡çš„ç±»å‹ã€‚</p>
<ul>
<li>æ±‰å­—å†…ç ï¼Œæ±‰å­—åœ¨è®¡ç®—æœºå†…éƒ¨é‡‡ç”¨æ±‰å­—å†…ç ç¼–ç ï¼Œæ±‰å­—å†…ç æ˜¯ä¸€ä¸¤å­—èŠ‚ä¸”æœ€é«˜ä½å‡ä¸º1çš„ç¼–ç </li>
<li>æ±‰å­—è¾“å…¥ç ï¼Œæ˜¯ç”¨é”®ç›˜ä¸Šçš„å­—æ¯ç¬¦å·ç¼–ç æ¯ä¸€ä¸ªæ±‰å­—çš„ç¼–ç ï¼Œå¸¸è§çš„æœ‰ï¼šæ‹¼éŸ³ç ã€å­—å‹ç ã€åŒºä½ç â€¦â€¦</li>
<li>æ±‰å­—å­—å‹ç ï¼Œç”¨0å’Œ1ç¼–ç æ— äº®ç‚¹å’Œæœ‰äº®ç‚¹åƒç´ ï¼Œå½¢æˆæ±‰å­—å­—å‹çš„ä¸€ç§ç¼–ç ã€‚</li>
</ul>
<h3 id="3-è‡ªåŠ¨åŒ–0-1ï¼Œåˆ†å±‚æ„é€ åŒ–ï¼Œæ„é€ é›†æˆåŒ–"><a href="#3-è‡ªåŠ¨åŒ–0-1ï¼Œåˆ†å±‚æ„é€ åŒ–ï¼Œæ„é€ é›†æˆåŒ–" class="headerlink" title="3. è‡ªåŠ¨åŒ–0/1ï¼Œåˆ†å±‚æ„é€ åŒ–ï¼Œæ„é€ é›†æˆåŒ–"></a>3. è‡ªåŠ¨åŒ–0/1ï¼Œåˆ†å±‚æ„é€ åŒ–ï¼Œæ„é€ é›†æˆåŒ–</h3><p>å®ç°0å’Œ1çš„åŸºæœ¬å…ƒå™¨ä»¶ï¼šç”µä¿¡å·å’Œç»§ç”µå™¨å¼€å…³ã€äºŒæç®¡ã€ä¸‰æç®¡ã€‚è¯è¯´è¿™ä¸€éƒ¨é—¨ä¸»è¦æ˜¯æ•°å­—é€»è¾‘éƒ¨åˆ†çš„çŸ¥è¯†ã€‚è¿™è®©æˆ‘æƒ³èµ·äº†æˆ‘å¤§å­¦çš„æ²™è€å¸ˆã€‚ä¸‹é¢ç»™å‡ å¼ ç”µè·¯å›¾æ‰¾æ‰¾æ„Ÿè§‰ï¼š<br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2MHSVapXXXXbDXpXXXXXXXXXX_!!581166664.png" alt="ç”¨äºŒæç®¡å®ç°é—¨ç”µè·¯"></p>
<p><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2li94apXXXXXmXpXXXXXXXXXX_!!581166664.png" alt="åŠ æ³•å™¨"></p>
<p><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2PP54apXXXXcFXXXXXXXXXXXX_!!581166664.png" alt="2-4è¯‘ç å™¨"></p>
<p>å¤æ‚çš„é€»è¾‘å™¨ä»¶æ˜¯é€šè¿‡å·²è¯æ˜æ— è¯¯çš„ç®€å•å™¨ä»¶æ„æˆã€‚è¿™ä½“ç°äº†åˆ†å±‚å¤„ç†é—®é¢˜çš„æ€æƒ³ï¼Œå’Œè®¡ç®—æœºç½‘ç»œä¸Šçš„ISO/OSIä¸ƒå±‚åè®®ä¸€æ ·ã€‚</p>
<p><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2Lwa6apXXXXcdXXXXXXXXXXXX_!!581166664.png" alt=" 0-1-conclusion"><br>æœ€åè¿™å¼ å›¾ç‰‡æ˜¯è¿™éƒ¨åˆ†çš„ä¸€ä¸ªæ€»ç»“ã€‚</p>
</a=1,b=0,c=0>]]></content>
    
    <summary type="html">
    
      0å’Œ1ä¸é€»è¾‘â€”â€”æ€ç»´ç¬¦å·åŒ–è¡¨è¾¾ä¸é€»è¾‘è¿ç®—
    
    </summary>
    
    
      <category term="mooc" scheme="http://liujiacai.net/tags/mooc/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æ€ç»´ä¹‹äºŒè®¡ç®—ä¹‹æ ‘</title>
    <link href="http://liujiacai.net/blog/2014/06/06/computational-thinking-2/"/>
    <id>http://liujiacai.net/blog/2014/06/06/computational-thinking-2/</id>
    <published>2014-06-06T05:07:27.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ¬¡ä»è®¡ç®—æœºçš„å®è§‚è§’åº¦å¯¹æ•´ä¸ªè®¡ç®—æœºè¡Œä¸šåšä¸ªå‰–æï¼Œè¿™é‡Œè€å¸ˆå¼•å…¥ä¸€ä¸ªè®¡ç®—ä¹‹æ ‘çš„æ¨¡å‹ã€‚<br><a id="more"></a></p>
<p><center>å›¾1.è®¡ç®—ä¹‹æ ‘å…¨è²Œ</center><br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2x7JuapXXXXXUXpXXXXXXXXXX_!!581166664.png" alt=" è®¡ç®—ä¹‹æ ‘"></p>
<h2 id="1-è®¡ç®—ä¹‹æ ‘ç¬¬ä¸€ç»´åº¦â€”â€”è®¡ç®—æ€ç»´çš„å¥ åŸºè¡Œæ€ç»´"><a href="#1-è®¡ç®—ä¹‹æ ‘ç¬¬ä¸€ç»´åº¦â€”â€”è®¡ç®—æ€ç»´çš„å¥ åŸºè¡Œæ€ç»´" class="headerlink" title="1. è®¡ç®—ä¹‹æ ‘ç¬¬ä¸€ç»´åº¦â€”â€”è®¡ç®—æ€ç»´çš„å¥ åŸºè¡Œæ€ç»´"></a>1. è®¡ç®—ä¹‹æ ‘ç¬¬ä¸€ç»´åº¦â€”â€”è®¡ç®—æ€ç»´çš„å¥ åŸºè¡Œæ€ç»´</h2><ul>
<li>0å’Œ1æ€ç»´â€”&gt;ç¬¦å·è¯â€”&gt;è®¡ç®—åŒ–â€”&gt;è‡ªåŠ¨åŒ–</li>
<li>â€œç¨‹åºâ€æ€ç»´â€”&gt;åƒå˜ä¸‡åŒ–å¤æ‚åŠŸèƒ½çš„æ„é€ ã€è¡¨è¾¾ä¸æ‰§è¡Œ</li>
<li>â€œé€’å½’â€æ€ç»´â€”&gt;æ— é™äº‹ç‰©åŠé‡å¤è¿‡ç¨‹çš„è¡¨è¾¾ä¸æ‰§è¡Œ</li>
</ul>
<h2 id="2-è®¡ç®—ä¹‹æ ‘ç¬¬äºŒç»´åº¦â€”â€”é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´"><a href="#2-è®¡ç®—ä¹‹æ ‘ç¬¬äºŒç»´åº¦â€”â€”é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´" class="headerlink" title="2. è®¡ç®—ä¹‹æ ‘ç¬¬äºŒç»´åº¦â€”â€”é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´"></a>2. è®¡ç®—ä¹‹æ ‘ç¬¬äºŒç»´åº¦â€”â€”é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´</h2><ul>
<li>å†¯.è¯ºä¾æ›¼è®¡ç®—æœºï¼Œç¨‹åºåœ¨å†…å­˜ä¸­ç›´æ¥æ‰§è¡Œ</li>
<li>ä¸ªäººè®¡ç®—æœºï¼Œç¨‹åºä¸€èˆ¬éƒ½å­˜æ”¾åœ¨å¤–å­˜ä¸­ï¼Œéœ€è¦æ“ä½œç³»ç»ŸæŠŠå®ƒä»¬åŠ è½½åˆ°å†…å­˜</li>
<li>å¹¶è¡Œåˆ†å¸ƒè®¡ç®—ç¯å¢ƒ</li>
<li>äº‘è®¡ç®—ç¯å¢ƒ</li>
</ul>
<p>ç¨‹åºæ‰§è¡Œç¯å¢ƒ:ç”±CPU-å†…å­˜ç¯å¢ƒâ€”&gt;åˆ°CPU-å­˜å‚¨ä½“ç³»ç¯å¢ƒâ€”&gt;åˆ°å¤šCPU-å¤šå­˜å‚¨å™¨ç¯å¢ƒâ€”&gt;äº‘è®¡ç®—è™šæ‹Ÿè®¡ç®—ç¯å¢ƒ</p>
<p><center>å›¾2. é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´</center><br><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2zBXwapXXXXXQXpXXXXXXXXXX_!!581166664.png" alt="è®¡ç®—ä¹‹æ ‘ç¬¬äºŒç»´åº¦â€”â€”é€šç”¨ç¯å¢ƒçš„æ¼”åŒ–æ€ç»´"></p>
<h2 id="3-è®¡ç®—ä¹‹æ ‘ç¬¬ä¸‰ç»´åº¦â€”â€”-äº¤æ›¿ä¿ƒè¿›ä¸å…±åŒè¿›åŒ–çš„é—®é¢˜æ±‚è§£æ€ç»´"><a href="#3-è®¡ç®—ä¹‹æ ‘ç¬¬ä¸‰ç»´åº¦â€”â€”-äº¤æ›¿ä¿ƒè¿›ä¸å…±åŒè¿›åŒ–çš„é—®é¢˜æ±‚è§£æ€ç»´" class="headerlink" title="3. è®¡ç®—ä¹‹æ ‘ç¬¬ä¸‰ç»´åº¦â€”â€” äº¤æ›¿ä¿ƒè¿›ä¸å…±åŒè¿›åŒ–çš„é—®é¢˜æ±‚è§£æ€ç»´"></a>3. è®¡ç®—ä¹‹æ ‘ç¬¬ä¸‰ç»´åº¦â€”â€” äº¤æ›¿ä¿ƒè¿›ä¸å…±åŒè¿›åŒ–çš„é—®é¢˜æ±‚è§£æ€ç»´</h2><blockquote>
<p>ç®—æ³•ï¼šé—®é¢˜æ±‚è§£çš„ä¸€ç§æ‰‹æ®µâ€”â€”æ„é€ ä¸è®¾è®¡ç®—æ³•<br></p>
<blockquote>
<p>ç®—æ³•æ˜¯è®¡ç®—çš„çµé­‚;ç®—æ³•å¼ºè°ƒæ•°å­¦å»ºæ¨¡;ç®—æ³•è€ƒè™‘çš„æ˜¯å¯è®¡ç®—è¡Œä¸è®¡ç®—å¤æ‚åº¦;ç®—æ³•ç ”ç©¶é€šå¸¸è¢«è®¤ä¸ºæ˜¯è®¡ç®—å­¦ç§‘çš„ç†è®ºç ”ç©¶ã€‚</p>
</blockquote>
<p>ç³»ç»Ÿï¼šé—®é¢˜æ±‚è§£çš„å¦ä¸€ä¸­æ‰‹æ®µâ€”â€”æ„é€ ä¸è®¾è®¡ç³»ç»Ÿ<br></p>
<blockquote>
<p>ç³»ç»Ÿæ˜¯æ”¹é€ è‡ªç„¶çš„æ‰‹æ®µ;ç³»ç»Ÿå¼ºè°ƒéæ•°å­¦å»ºæ¨¡;ç³»ç»Ÿè€ƒè™‘çš„æ˜¯å¦‚ä½•åŒ–è´Ÿè´£ä¸ºç®€å•ï¼ˆä½¿å…¶èƒ½å¤Ÿè¢«åšå‡ºæ¥ï¼‰;ç³»ç»Ÿå¼ºè°ƒç»“æ„æ€§ã€å¯é æ€§ã€å®‰å…¨æ€§ç­‰ã€‚</p>
</blockquote>
</blockquote>
<p>ç³»ç»Ÿæ˜¯é¾™ï¼Œç®—æ³•æ˜¯ç›ï¼Œç”»é¾™è¦ç‚¹ç›ã€‚</p>
<h2 id="4-è®¡ç®—ä¹‹æ ‘ç¬¬å››ç»´åº¦â€”â€”è®¡ç®—ä¸ç¤¾ä¼š-è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´"><a href="#4-è®¡ç®—ä¹‹æ ‘ç¬¬å››ç»´åº¦â€”â€”è®¡ç®—ä¸ç¤¾ä¼š-è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´" class="headerlink" title="4. è®¡ç®—ä¹‹æ ‘ç¬¬å››ç»´åº¦â€”â€”è®¡ç®—ä¸ç¤¾ä¼š/è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´"></a>4. è®¡ç®—ä¹‹æ ‘ç¬¬å››ç»´åº¦â€”â€”è®¡ç®—ä¸ç¤¾ä¼š/è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´</h2><p>å‘ç”Ÿè¿™ä¸¤ç§èåˆçš„æœ¬è´¨å°±åœ¨äºæŠ½è±¡ä¸è‡ªåŠ¨åŒ–ï¼Œå¦‚ä¸‹å›¾3æ‰€ç¤ºï¼š</p>
<ul>
<li>å·¦è¾¹ï¼Œä»æ ‘æåˆ°æ ‘å¹²çš„è¿‡ç¨‹ï¼Œæ˜¯æŠ½è±¡çš„è¿‡ç¨‹ï¼ŒæŠŠç¤¾ä¼šä¸­çš„é—®é¢˜æŠ½è±¡æˆå¯ä»¥ç”¨è®¡ç®—æœºè¡¨ç¤ºçš„æ¨¡å‹;</li>
<li>å³è¾¹ï¼Œä»æ ‘å¹²åˆ°æ ‘æçš„è¿‡ç¨‹ï¼Œæ˜¯è‡ªåŠ¨åŒ–çš„è¿‡ç¨‹ï¼ŒæŠŠè®¡ç®—æœºç®—å‡ºçš„æ•°æ®å±•ç¤ºç»™ç”¨æˆ·</li>
</ul>
<p>åœ¨è§£å†³äººã€æœºå™¨ã€ä¸šåŠ¡ç­‰æ²Ÿé€šæ—¶æŠ½è±¡å‡ºæ¥äº†ä»¥ä¸‹å‡ ä¸ªäº‹ç‰©ï¼š</p>
<ul>
<li>æ¨¡å‹ä¸ç³»ç»Ÿï¼Œè§£å†³äº†ä¸šåŠ¡-è®¡ç®—çš„é—®é¢˜</li>
<li>è¯­è¨€ä¸ç¼–è¯‘å™¨ï¼Œè§£å†³äº†äºº-è®¡ç®—æœºçš„é—®é¢˜</li>
<li>åè®®ä¸ç¼–ç /è§£ç ï¼Œè§£å†³äº†æœºå™¨ä¸æœºå™¨ã€ç‰©ä½“ä¸ç‰©ä½“é€šä¿¡çš„é—®é¢˜</li>
</ul>
<p><center>å›¾3. è®¡ç®—ä¸ç¤¾ä¼š/è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´</center><br><img src="http://img01.taobaocdn.com/imgextra/i1/581166664/TB2pNBzapXXXXbzXXXXXXXXXXXX_!!581166664.png" alt="è®¡ç®—ä¹‹æ ‘ç¬¬å››ç»´åº¦â€”â€”è®¡ç®—ä¸ç¤¾ä¼š/è‡ªç„¶ç¯å¢ƒçš„èåˆæ€ç»´"></p>
<h2 id="5-è®¡ç®—ä¹‹æ ‘ç¬¬äº”ã€å…­ç»´åº¦â€”â€”ç½‘ç»œåŒ–æ€ç»´å’Œæ•°æ®åŒ–æ€ç»´"><a href="#5-è®¡ç®—ä¹‹æ ‘ç¬¬äº”ã€å…­ç»´åº¦â€”â€”ç½‘ç»œåŒ–æ€ç»´å’Œæ•°æ®åŒ–æ€ç»´" class="headerlink" title="5. è®¡ç®—ä¹‹æ ‘ç¬¬äº”ã€å…­ç»´åº¦â€”â€”ç½‘ç»œåŒ–æ€ç»´å’Œæ•°æ®åŒ–æ€ç»´"></a>5. è®¡ç®—ä¹‹æ ‘ç¬¬äº”ã€å…­ç»´åº¦â€”â€”ç½‘ç»œåŒ–æ€ç»´å’Œæ•°æ®åŒ–æ€ç»´</h2>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ¬¡ä»è®¡ç®—æœºçš„å®è§‚è§’åº¦å¯¹æ•´ä¸ªè®¡ç®—æœºè¡Œä¸šåšä¸ªå‰–æï¼Œè¿™é‡Œè€å¸ˆå¼•å…¥ä¸€ä¸ªè®¡ç®—ä¹‹æ ‘çš„æ¨¡å‹ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="mooc" scheme="http://liujiacai.net/tags/mooc/"/>
    
  </entry>
  
  <entry>
    <title>è®¡ç®—æ€ç»´ä¹‹ä¸€åºè¨€ç¯‡</title>
    <link href="http://liujiacai.net/blog/2014/06/06/computational-thinking-1/"/>
    <id>http://liujiacai.net/blog/2014/06/06/computational-thinking-1/</id>
    <published>2014-06-06T03:58:43.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™ä¸€ç³»åˆ—ç¬”è®°æ˜¯æˆ‘åœ¨ä¸Šä¸€ä¸ªmoocè¯¾<a href="http://www.icourse163.org/course/hit/hit001?tid=7001" target="_blank" rel="external">å¤§å­¦è®¡ç®—æœºâ€”è®¡ç®—æ€ç»´å¯¼è®º</a>ä¸Šçš„ç¬”è®°ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå®ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨çŸ¥è¯†çˆ†ç‚¸çš„å¦‚ä»Šï¼Œå¦‚ä½•æ‰¾åˆ°ä¸€ç§ç§‘å­¦çš„å­¦ä¹ æ–¹å¼ï¼Œå‡†ç¡®ç†è§£äº‹ç‰©çš„æœ¬è´¨æ˜¯éå¸¸é‡è¦çš„èƒ½åŠ›ã€‚</p>
<p>##1. å­¦ä¹ ä¸‰ç§å¢ƒç•Œ<br><a id="more"></a><br>é¦–å…ˆï¼Œè€å¸ˆè®²äº†ä¸€ä¸‹ç‹å›½ç»´å…³äºå­¦ä¹ ä¸‰ç§å¢ƒç•Œçš„æ€»ç»“ï¼Œè¿™ä¸‰ä¸ªå¢ƒç•Œæˆ‘å§åœ¨æˆ‘ä¸Šé«˜ä¸­çš„æ—¶å€™ä¹Ÿç»™æˆ‘è¯´è¿‡ï¼Œå¦‚ä»Šå†æ¬¡æåŠï¼Œæœ‰ç§é†é†çŒé¡¶çš„æ„Ÿè§‰ï¼Œå…·ä½“å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>çœ‹å±±æ˜¯å±±ï¼Œçœ‹æ°´æ˜¯æ°´ <strong>æ¦‚å¿µä¸çŸ¥è¯†</strong></li>
<li>çœ‹å±±ä¸æ˜¯å±±ï¼Œçœ‹æ°´ä¸æ˜¯æ°´ <strong>è”æƒ³ä¸è´¯é€š</strong></li>
<li>çœ‹å±±è¿˜æ˜¯å±±ï¼Œçœ‹æ°´è¿˜æ˜¯æ°´ <strong>è®­ç»ƒä¸å®è·µ</strong></li>
</ul>
<p>ä¹Ÿå°±æ˜¯è¯´å¯¹ä¸€ä¸ªçŸ¥è¯†å…ˆä»åŸºæœ¬æ¦‚å¿µå…¥æ‰‹ï¼Œæœ‰ä¸ªå¤§æ¦‚äº†è§£;ç„¶åé€šè¿‡ä¸æ–­å®è·µä¸éªŒè¯ï¼Œå¯¹è‡ªå·±å…ˆå‰çš„ç†è§£äº§ç”Ÿè´¨ç–‘;æœ€åæ˜¯é€šè¿‡ä¸€æ®µæ—¶é—´çš„æ€»ç»“ä¸å½’çº³ï¼Œå¯¹è¿™ä¸ªæ–°çŸ¥è¯†ç‚¹æœ‰äº†è‡ªå·±çš„ç†è§£æ–¹å¼ã€‚</p>
<p>å¾ˆåˆç†çš„å­¦ä¹ è¿›é˜¶æ–¹å¼ï¼Œå¸Œæœ›è‡ªå·±åœ¨ä»Šåçš„å­¦ä¹ è¿‡ç¨‹ä¸­ä¸¥æ ¼æŒ‰ç…§ä¸Šè¿°ä¸‰ä¸ªæ­¥éª¤æ¥è¿›è¡Œï¼ŒæŠŠçœ‹è¿‡çš„æ¯ä¸ªçŸ¥è¯†ç‚¹éƒ½è½¬åŒ–ä¸ºè‡ªå·±çš„ä¸œè¥¿ã€‚</p>
<p>##2. ä¸‰ç§æ€ç»´</p>
<p>è®²å®Œäº†å­¦ä¹ çš„ä¸‰ç§å¢ƒç•Œåï¼Œè€å¸ˆè®²äº†ç°åœ¨ç¤¾ä¼šä¸­äººä»¬åº”è¯¥å…·å¤‡çš„ä¸‰ç§æ€ç»´ï¼š</p>
<ul>
<li>å®éªŒæ€ç»´ï¼šå®éªŒâ€”&gt;è§‚å¯Ÿâ€”&gt;å‘ç°ã€æ¨æ–­æ€»ç»“ã€‚  <strong>å½’çº³ä¸è§‚å¯Ÿ</strong></li>
<li>ç†è®ºæ€ç»´ï¼šå‡è®¾/é¢„è®¾â€”&gt;å®šä¹‰/æ€§è´¨/å®šç†â€”&gt;è¯æ˜ã€‚  <strong>æ¨ç†å’Œæ¼”ç»</strong></li>
<li>è®¡ç®—æ€ç»´ï¼šè®¾è®¡ï¼Œæ„é€ ä¸è®¡ç®—  <strong>è®¾è®¡ä¸æ„é€ </strong></li>
</ul>
<p>è¿™ä¸ªmoocè¯¾ä¸»è¦è®²è§£è®¡ç®—æ€ç»´ï¼Œå®éªŒæ€ç»´ä¸ç†è®ºæ€ç»´æˆ‘ä»¬åœ¨ä¸­å­¦é˜¶æ®µçš„åŒ–å­¦ä¸æ•°å­¦è¯¾ç¨‹ä¸­å·²ç»æ¥è§¦è¿‡äº†ã€‚</p>
<p>è®¡ç®—æ€ç»´çš„æœ¬è´¨æ˜¯æŠ½è±¡ï¼ˆabstractionï¼‰ä¸è‡ªåŠ¨åŒ–ï¼ˆautomationï¼‰ï¼Œå³åœ¨<strong>ä¸åŒå±‚é¢</strong>è¿›è¡ŒæŠ½è±¡ï¼Œä»¥åŠå°†è¿™äº›æŠ½è±¡â€œæœºå™¨åŒ–â€ã€‚</p>
<p>##3. è‡ªåŠ¨è®¡ç®—çš„æ¢ç´¢ï¼ˆæ•°æ®è¡¨ç¤ºâ€”â€”è‡ªåŠ¨å­˜å‚¨â€”â€”è‡ªåŠ¨æ‰§è¡Œçš„è§’åº¦ï¼‰</p>
<ul>
<li>Pascalï¼ˆ1623-1662ï¼‰æœºï¼šå‘Šè¯‰äººä»¬â€œç”¨çº¯æœºæ¢°è£…ç½®å¯ä»£æ›¿äººçš„æ€ç»´ä¸è®°å¿†â€ï¼Œå¼€è¾Ÿäº†â€œè‡ªåŠ¨è®¡ç®—â€çš„é“è·¯ã€‚</li>
<li>Leibnizè±å¸ƒå°¼èŒ¨ï¼ˆ1646-1716ï¼‰æœºï¼šè¿ç»­é‡å¤è‡ªåŠ¨æ‰§è¡Œã€‚æå‡ºäºŒè¿›åˆ¶åŠå…¶è®¡ç®—è§„åˆ™ã€‚æ•°ç†é€»è¾‘åˆ›å§‹äººã€‚</li>
<li>1834å¹´ï¼Œå·´è´å¥‡â€”â€”åˆ†ææœº</li>
<li>1805å¹´ï¼Œæ°å¡å¾·â€”â€”æ‰“å­”å¡</li>
<li>1854å¹´ï¼Œå¸ƒå°”åˆ›ç«‹äº†å¸ƒå°”ä»£æ•°ï¼Œä¸ºæ•°å­—è®¡ç®—æœºçš„ç”µè·¯è®¾è®¡æä¾›äº†ç†è®ºåŸºç¡€</li>
<li>â€¦â€¦</li>
</ul>
<p>å†¯.è¯ºä¾æ›¼çš„åˆ›æ–°ï¼šå°†è¿ç®—ä¸å­˜å‚¨åˆ†ç¦»whyã€howï¼Ÿï¼Ÿ</p>
<p>###3.1 è‡ªåŠ¨è®¡ç®—è¿‡ç¨‹ä¸­å…ƒå™¨ä»¶çš„å‘å±•</p>
<ul>
<li>ç”µå­ç®¡ï¼šå¯è‡ªåŠ¨æ§åˆ¶0å’Œ1å˜åŒ–çš„å…ƒä»¶</li>
<li>æ™¶ä½“ç®¡ï¼šä½“ç§¯å˜å°</li>
<li>é›†æˆç”µè·¯ï¼šå…ƒä»¶ç›´æ¥çš„è¿æ¥æ€§é—®é¢˜</li>
</ul>
<p>ç”µå­ç®¡â€”&gt;æ™¶ä½“ç®¡<br>ä½“ç§¯æ›´å°ã€å¯é æ€§æ›´é«˜ã€å¯æ§åˆ¶æ€§æ›´çµæ´» whyã€howï¼Ÿ</p>
<p>æ™¶ä½“ç®¡â€”&gt;é›†æˆç”µè·¯1959å¹´ J.Kilbyâ€”&gt;è¶…å¤§è§„æ¨¡é›†æˆç”µè·¯ï¼ˆIntelçš„æ‘©å°”å‘æ˜ï¼Œmoreæ‘©å°”å®šå¾‹ï¼‰â€”&gt;1981å¹´ï¼Œç¬¬ä¸€å°ä¸ªäººè®¡ç®—æœºè¯ç”Ÿã€‚</p>
<p>##4. è®¡ç®—æœºç³»ç»Ÿè¦è§£å†³çš„å‡ ä¸ªé—®é¢˜</p>
<ul>
<li>æ§åˆ¶ä¸è®¡ç®—â€”â€”å¾®å¤„ç†å™¨</li>
</ul>
<blockquote>
<p>å­—é•¿ï¼š8ä¸ºâ€”&gt;16â€”&gt;32â€”&gt;64<br><br>ä¸»é¢‘ï¼šå‡ åMHzâ€”&gt;å‡ ç™¾MHz<br><br>æ™¶ä½“ç®¡æ•°é‡ä¸åŠŸèƒ½è§„æ¨¡ï¼šå¾®å¤„ç†å™¨â€”&gt;å¾®å¤„ç†å™¨+åå¤„ç†å™¨ï¼ˆæµ®ç‚¹è¿ç®—ï¼‰â€”&gt;å¾®å¤„ç†å™¨+å›¾å½¢è¿ç®—å•å…ƒGPUâ€”&gt;å¾®å¤„ç†å™¨+3Då¤„ç†å™¨+å¤šåª’ä½“å¤„ç†å™¨â€”&gt;å¤šæ ¸å¾®å¤„ç†å™¨</p>
</blockquote>
<ul>
<li>è¾“å…¥â€”â€”å¤–éƒ¨ä¿¡æ¯å¦‚ä½•è¾“å…¥åˆ°è®¡ç®—æœºä¸­</li>
<li>è¾“å‡ºâ€”â€”è®¡ç®—æœºå¦‚ä½•å°†ä¿¡æ¯è¾“å‡ºåˆ°å¤–éƒ¨</li>
<li>æ°¸ä¹…æ€§å­˜å‚¨ä¸ä¸´æ—¶æ€§å­˜å‚¨â€”â€”è®¡ç®—æœºçš„ä¿¡æ¯å¦‚ä½•æ°¸ä¹…ä¿æŒæˆ–ä¸´æ—¶ä¿æŒ</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ä¸€ç³»åˆ—ç¬”è®°æ˜¯æˆ‘åœ¨ä¸Šä¸€ä¸ªmoocè¯¾&lt;a href=&quot;http://www.icourse163.org/course/hit/hit001?tid=7001&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¤§å­¦è®¡ç®—æœºâ€”è®¡ç®—æ€ç»´å¯¼è®º&lt;/a&gt;ä¸Šçš„ç¬”è®°ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå®ç”¨ï¼Œå°¤å…¶æ˜¯åœ¨çŸ¥è¯†çˆ†ç‚¸çš„å¦‚ä»Šï¼Œå¦‚ä½•æ‰¾åˆ°ä¸€ç§ç§‘å­¦çš„å­¦ä¹ æ–¹å¼ï¼Œå‡†ç¡®ç†è§£äº‹ç‰©çš„æœ¬è´¨æ˜¯éå¸¸é‡è¦çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;##1. å­¦ä¹ ä¸‰ç§å¢ƒç•Œ&lt;br&gt;
    
    </summary>
    
    
      <category term="mooc" scheme="http://liujiacai.net/tags/mooc/"/>
    
  </entry>
  
  <entry>
    <title>æœç´¢å¼•æ“æ¦‚è²Œ</title>
    <link href="http://liujiacai.net/blog/2014/05/22/search-engine-overview/"/>
    <id>http://liujiacai.net/blog/2014/05/22/search-engine-overview/</id>
    <published>2014-05-22T07:28:26.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-å‰è¨€"><a href="#1-å‰è¨€" class="headerlink" title="1. å‰è¨€"></a>1. å‰è¨€</h2><p>ä»¥å‰å‚åŠ é½é²è½¯ä»¶å¤§å¸ˆæ—¶ç”¨è¿‡luceneï¼Œä½†æ˜¯ä»…ä»…åªæ˜¯åœç•™åœ¨APIè°ƒç”¨å±‚é¢ä¸Šï¼Œè¿™æ¬¡å€Ÿç€çœ‹ã€Šlucene in actionã€‹ç¬¬äºŒç‰ˆçš„æœºä¼šæŠŠä¸luceneå’Œæœç´¢ç›¸å…³çš„çŸ¥è¯†ç³»ç»Ÿæ•´ç†ä¸€éã€‚ä»¥ä¸‹å†…å®¹æ¥è‡ªlucene in actionçš„ç¿»è¯‘åŠ ä¸Šæˆ‘è‡ªå·±çš„ç†è§£ï¼Œå¦‚æœ‰ç–‘é—®æˆ–é”™è¯¯ï¼Œè¯·æŒ‡å‡ºï¼Œè°¢è°¢ã€‚<br><a id="more"></a><br>é¦–å…ˆæ¥çœ‹ä¸€ä¸ªæœç´¢çš„å®è§‚å¸ƒå±€å›¾</p>
<p>å›¾1. æœç´¢çš„ä¸€èˆ¬æ¶æ„<br><br><img src="http://img02.taobaocdn.com/imgextra/i2/581166664/TB2810wapXXXXclXXXXXXXXXXXX_!!581166664.png" alt=" search-arch"></p>
<font color="red">å…¶ä¸­æ·±é¢œè‰²éƒ¨åˆ†æ˜¯ä½¿ç”¨Luceneçš„åœ°æ–¹ï¼Œæµ…é¢œè‰²éƒ¨åˆ†éœ€è¦ç¨‹åºå‘˜ä½¿ç”¨å…¶ä»–å·¥å…·æ¥å®Œæˆã€‚</font>

<h2 id="2-Luceneä¸æœç´¢å¼•æ“æ¦‚è²Œ"><a href="#2-Luceneä¸æœç´¢å¼•æ“æ¦‚è²Œ" class="headerlink" title="2. Luceneä¸æœç´¢å¼•æ“æ¦‚è²Œ"></a>2. Luceneä¸æœç´¢å¼•æ“æ¦‚è²Œ</h2><p>Luceneåªæ˜¯ä¸€ä¸ªå®Œæ•´æœç´¢å¼•æ“ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå®ƒä¸»è¦æ˜¯æä¾›äº†indexï¼ˆå»ºç«‹ç´¢å¼•ï¼‰ä¸searchï¼ˆæœç´¢ï¼‰çš„åŠŸèƒ½ã€‚åœ¨å…·ä½“å­¦ä¹ Luceneä½¿ç”¨ä¹‹å‰ï¼Œäº†è§£æœç´¢å¼•æ“çš„æ¦‚è²Œå¯¹ä»¥åLuceneçš„å­¦ä¹ å¤§æœ‰è£¨ç›Šã€‚</p>
<h3 id="1-1-ç´¢å¼•ç›¸å…³éƒ¨åˆ†ï¼ˆComponents-for-indexingï¼‰"><a href="#1-1-ç´¢å¼•ç›¸å…³éƒ¨åˆ†ï¼ˆComponents-for-indexingï¼‰" class="headerlink" title="1.1 ç´¢å¼•ç›¸å…³éƒ¨åˆ†ï¼ˆComponents for indexingï¼‰"></a>1.1 ç´¢å¼•ç›¸å…³éƒ¨åˆ†ï¼ˆComponents for indexingï¼‰</h3><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ä¸€äº›æ–‡ä»¶ä¸­æœç´¢æŸäº›è¯ç»„ï¼Œæ¯”å¦‚â€œä¸­å›½â€ï¼Œæœ€ç›´æ¥çš„æ–¹å¼å°±æ˜¯ä¾æ¬¡éå†è¿™äº›æ–‡ä»¶ï¼Œå¯¹æ¯ä¸ªæ–‡ä»¶è¿›è¡Œå­—ç¬¦ä¸²åŒ¹é…ï¼Œæ˜¾ç„¶è¿™ç§æ–¹å¼æ¯”è¾ƒä½æ•ˆï¼Œè€Œä¸”ä¸å®¹æ˜“æ‰©å±•ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å¯¹è¿™äº›æ–‡ä»¶ä¸­çš„å†…å®¹å»ºç«‹ç´¢å¼•ï¼Œåœ¨luceneä¸­ä½ å¯ä»¥æƒ³è±¡ç´¢å¼•æ˜¯ä¸€ç§åŠ é€Ÿè·å–æ–‡ä»¶ä¸­å†…å®¹çš„æ•°æ®ç»“æ„ï¼Œä¸€èˆ¬æœç´¢å¼•æ“éƒ½é‡‡ç”¨å€’æ’ç´¢å¼•ã€‚å»ºç«‹ç´¢å¼•ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºä¸€ä¸‹å‡ æ­¥ï¼š</p>
<h4 id="1-1-1-è·å–æ•°æ®ï¼ˆAcquire-Contentï¼‰"><a href="#1-1-1-è·å–æ•°æ®ï¼ˆAcquire-Contentï¼‰" class="headerlink" title="1.1.1 è·å–æ•°æ®ï¼ˆAcquire Contentï¼‰"></a>1.1.1 è·å–æ•°æ®ï¼ˆAcquire Contentï¼‰</h4><p>è¿™é‡Œçš„æ•°æ®æ ¹æ®å…·ä½“çš„ä¸šåŠ¡è€Œå®šï¼Œæœ‰çš„åœ¨æ•°æ®åº“é‡Œã€æœ‰çš„åœ¨docã€pdfç­‰æ–‡æ¡£é‡Œï¼Œæ›´ä¸€èˆ¬çš„æ˜¯é€šè¿‡ç½‘ç»œçˆ¬è™«ï¼ˆcrawlerï¼‰æŠ“å–äº’è”ç½‘ä¸Šçš„ç½‘é¡µæ•°æ®ã€‚</p>
<p>ä¸ºäº†è·å–ä¸åŒçš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸åŒçš„å·¥å…·ï¼šæ•°æ®åº“çš„è¯å¯ä»¥ç›´æ¥ä½¿ç”¨JDBCæ¥è¯»å–;docç­‰æ–‡æ¡£å¯ä»¥ä½¿ç”¨Tikaç­‰ç¬¬ä¸‰åº“å®Œæˆ;ç½‘ç»œçˆ¬è™«å¯ä»¥ä½¿ç”¨ä¸€äº›å¼€æºçš„é¡¹ç›®ï¼š</p>
<ul>
<li><a href="http://lucene.apache.org/solr/" target="_blank" rel="external">Solr</a>â€”â€”ä¸€ä¸ªLuceneçš„å§å¦¹é¡¹ç›®ï¼Œå¯ä»¥è·å–å…³ç³»å‹æ•°æ®åº“æˆ–xmlä¸­çš„æ•°æ®ï¼Œé€šè¿‡é›†æˆTikaå¯ä»¥è·å–å¯Œæ–‡æœ¬ï¼ˆrich documentsï¼‰ä¸­çš„ä¿¡æ¯ã€‚</li>
<li><a href="http://nutch.apache.org/" target="_blank" rel="external">Nutch</a>â€”â€”Luceneå¦ä¸€ä¸ªå§å¦¹é¡¹ç›®ï¼Œé€šè¿‡ä¸€ä¸ªé«˜æ‰©å±•æ€§çš„ç½‘ç»œçˆ¬è™«</li>
<li><a href="http://sourceforge.net/projects/grub/" target="_blank" rel="external">Grub</a>â€”â€”ä¸€ä¸ªæµè¡Œçš„å¼€æºç½‘ç»œçˆ¬è™«,æˆªè‡³æœ¬æ–‡å†™ä½œæ—¶é—´ï¼Œæœ€åä¸€æ¬¡æ›´æ–°ä¸º2013-04-03ï¼Œç”¨C++ç¼–å†™</li>
</ul>
<h4 id="1-1-2-åˆ›å»ºæ–‡æ¡£ï¼ˆBUILD-DOCUMENTï¼‰"><a href="#1-1-2-åˆ›å»ºæ–‡æ¡£ï¼ˆBUILD-DOCUMENTï¼‰" class="headerlink" title="1.1.2 åˆ›å»ºæ–‡æ¡£ï¼ˆBUILD DOCUMENTï¼‰"></a>1.1.2 åˆ›å»ºæ–‡æ¡£ï¼ˆBUILD DOCUMENTï¼‰</h4><p>æ•°æ®è·å–å®Œæˆåï¼Œå°±éœ€è¦æŠŠè¿™äº›åŸå§‹æ•°æ®è½¬åŒ–ä¸ºæœç´ å¼•æ“ç†è§£çš„å•å…ƒï¼Œè¿™ä¸ªå•å…ƒåœ¨Luceneä¸­å«åšDocumentï¼Œä½ å¯ä»¥æŠŠä¸€ä¸ªæ–‡æ¡£ã€ä¸€ä¸ªç½‘é¡µã€ä¸€å°ç”µå­é‚®ä»¶çœ‹ä½œä¸€ç¯‡æ–‡æ¡£ï¼Œè€Œåƒæ–‡ç« çš„titleã€dateã€authorç­‰ä¿¡æ¯ä½œä¸ºDocumentçš„Fieldï¼Œä¸Šè¿°æƒ…å½¢Documentæ¯”è¾ƒå¥½åŒºåˆ†ï¼Œä½†æ˜¯çœŸå®ç¯å¢ƒä¸­å¾ˆæœ‰å¯èƒ½å¹¶ä¸æ˜¯é‚£ä¹ˆå¥½åŒºåˆ†ï¼Œæ¯”å¦‚è¯´é‚®ä»¶ä¸­çš„é™„ä»¶ï¼Œæ˜¯ä½œä¸ºå¦ä¸€ä¸ªDocumentä¸æ­£æ–‡çš„Documentç›¸å…³è”è¿˜æ˜¯åŒ…å«åœ¨æ­£æ–‡Documentçš„Fieldé‡Œé¢å‘¢ï¼Ÿ</p>
<p>æœ‰äº†ä¸€ä¸ªDocumentä»¥åæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„å®šåˆ¶æœç´¢ç»“æœï¼Œæ¯”å¦‚å¦‚æœæŸä¸ªDocumentæ¯”è¾ƒé‡è¦ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹Documentçš„boostæ¥å®ç°æé«˜å®ƒåœ¨æœç´¢ä¸­çš„æ’åã€‚</p>
<p>Luceneä¸ºå»ºç«‹Documentæä¾›äº†ä¸€å¥—ç®€å•æ–¹ä¾¿çš„APIï¼Œåé¢å†ä»‹ç»ã€‚</p>
<h4 id="1-1-3-åˆ†ææ–‡æ¡£ï¼ˆANALYZE-DOCUMENTï¼‰"><a href="#1-1-3-åˆ†ææ–‡æ¡£ï¼ˆANALYZE-DOCUMENTï¼‰" class="headerlink" title="1.1.3 åˆ†ææ–‡æ¡£ï¼ˆANALYZE DOCUMENTï¼‰"></a>1.1.3 åˆ†ææ–‡æ¡£ï¼ˆANALYZE DOCUMENTï¼‰</h4><p>è¿™é‡Œä¸»è¦æ˜¯æŒ‡åœ¨å¯¹åŸå§‹å†…å®¹è¿›è¡Œåˆ†è¯ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½æŠŠä¸€æ•´ç¯‡æ–‡æ¡£æ”¾åˆ°ä¸€ä¸ªFieldä¸­ï¼Œåœ¨Luceneä¸­æ¯ä¸ªåˆ†è¯åçš„ç»“æœç§°ä¸ºtokenï¼Œè‹±æ–‡ä¸­è¿˜ç¨å¾®ç®€å•ä¸€äº›ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç©ºæ ¼é”®åŒºåˆ†ï¼Œä½†åœ¨éä¸­æ–‡ç¯å¢ƒä¸­ï¼Œæ¯”å¦‚æˆ‘ä»¬æ±‰è¯­ï¼Œåˆ†è¯æ˜¯ä¸ªæ¯”è¾ƒéš¾çš„é—®é¢˜ï¼Œä½†ç½‘ä¸Šå…è´¹çš„åˆ†è¯å™¨ä¹Ÿæœ‰ä¸å°‘ï¼Œåƒ<a href="https://code.google.com/p/ik-analyzer/" target="_blank" rel="external">IKAnalyzer</a>ã€<a href="http://www.ictclas.org/" target="_blank" rel="external">ICTCLAS</a>ã€<a href="https://code.google.com/p/paoding/" target="_blank" rel="external">åº–ä¸è§£ç‰›åˆ†è¯å™¨</a>ï¼Œä¸è¿‡è²Œä¼¼å•†ä¸šç”¨çš„è¯ï¼Œåƒç™¾åº¦ã€æ·˜å®è¿™æ ·çš„ï¼Œä¸€èˆ¬éƒ½æ˜¯è‡ªå·±å†™çš„ã€‚</p>
<h4 id="1-1-4-å»ºç«‹ç´¢å¼•"><a href="#1-1-4-å»ºç«‹ç´¢å¼•" class="headerlink" title="1.1.4 å»ºç«‹ç´¢å¼•"></a>1.1.4 å»ºç«‹ç´¢å¼•</h4><p>å®Œæˆä¸Šé¢è¿™äº›ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨luceneæä¾›çš„apiå»ºç«‹ç´¢å¼•äº†ã€‚</p>
<h3 id="1-2-æœç´¢ç›¸å…³éƒ¨åˆ†ï¼ˆComponents-for-searchingï¼‰"><a href="#1-2-æœç´¢ç›¸å…³éƒ¨åˆ†ï¼ˆComponents-for-searchingï¼‰" class="headerlink" title="1.2 æœç´¢ç›¸å…³éƒ¨åˆ†ï¼ˆComponents for searchingï¼‰"></a>1.2 æœç´¢ç›¸å…³éƒ¨åˆ†ï¼ˆComponents for searchingï¼‰</h3><p>æœç´¢å°±æ˜¯åœ¨ç´¢å¼•ä¸­æŸ¥è¯¢ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—çš„è¿‡ç¨‹ã€‚è¯„ä»·æœç´¢çš„è´¨é‡æœ‰ä¸¤ä¸ªæŒ‡æ ‡</p>
<ul>
<li>å‡†ç¡®ç‡ï¼ˆprecisionï¼‰â€”â€”æŒ‡åœ¨æœç´¢ç»“æœä¸­è¿‡æ»¤æ‰æ— å…³Documentçš„ç¨‹åº¦ï¼ˆmeasures how well the search system find relevant documentsï¼‰</li>
<li>å¬å›ç‡ï¼ˆrecallï¼‰â€”â€”æŒ‡åœ¨æœç´¢ç»“æœä¸­Documentä¸ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—çš„ç›¸å…³æ€§ï¼ˆmeasures how well the system filters out the irrelevant documentsï¼‰</li>
</ul>
<p>é€šè¿‡Luceneçš„contribä¸­çš„benchmarkå¯ä»¥æ£€æµ‹æˆ‘ä»¬æœç´¢ç³»ç»Ÿä¸­çš„å‡†ç¡®ç‡ä¸å¬å›ç‡ã€‚</p>
<h4 id="1-2-1-æœç´¢æ¥å£ï¼ˆSEARCH-USER-INTERFACEï¼‰"><a href="#1-2-1-æœç´¢æ¥å£ï¼ˆSEARCH-USER-INTERFACEï¼‰" class="headerlink" title="1.2.1 æœç´¢æ¥å£ï¼ˆSEARCH USER INTERFACEï¼‰"></a>1.2.1 æœç´¢æ¥å£ï¼ˆSEARCH USER INTERFACEï¼‰</h4><p>è¦æƒ³æœç´¢é¦–å…ˆéœ€è¦æä¾›ä¸€ä¸ªæœç´¢ç•Œé¢ï¼Œè¿™é‡Œä¸€èˆ¬æ˜¯æŒ‡çš„ç½‘é¡µåº”ç”¨ä¸­ï¼Œè¿™ä¸ªæ˜¯å¾ˆé‡è¦çš„ä¸€æ­¥ï¼Œç°åœ¨éƒ½å¼ºè°ƒç”¨æˆ·ä½“éªŒï¼Œå¦‚æœä½ çš„æœç´¢ç•Œé¢è®©ç”¨æˆ·æ„Ÿåˆ°åŒçƒ¦ï¼Œç”¨æˆ·æ€ä¹ˆå¯ä»¥æœ‰ä½¿ç”¨ä½ äº§å“çš„æ¬²æœ›å‘¢ã€‚</p>
<p>æœç´¢ç•Œé¢ä¸»è¦æ˜¯å¼ºè°ƒç®€æ´ï¼Œåƒç™¾åº¦ã€googleé‚£æ ·ï¼Œåœ¨æœç´¢ç»“æœé¡µé¢ä¸­ï¼ŒDocumentç»“æœçš„å±•ç¤ºä¹Ÿå¿…é¡»æ°åˆ°å¥½å¤„ï¼Œä¸èƒ½æ˜¾ç¤ºå¤ªå¤šçš„æ–‡å­—ï¼Œä¹Ÿä¸èƒ½æ˜¾ç¤ºå¤ªå°‘çš„æ–‡å­—ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œç”¨æˆ·å¿…é¡»å¯ä»¥å¾ˆæ–¹ä¾¿çš„æ‰¾åˆ°â€œç›¸å…³æœç´¢â€ã€â€œç»“æœè¿‡æ»¤â€ç­‰åŠŸèƒ½ï¼Œå¦‚æœä½ å¯¹æœç´¢ç»“æœè¿›è¡Œäº†å®šåˆ¶ï¼ˆé€šè¿‡ä¿®æ”¹Documentçš„boostï¼‰ï¼Œå¿…é¡»è®©ç”¨æˆ·çŸ¥é“ï¼Œè€Œä¸”å¿…é¡»æä¾›ä¸€ä¸ªå…³é—­å®šåˆ¶çš„é€‰é¡¹ã€‚</p>
<h4 id="1-2-2-åˆ›å»ºQuery-BUILD-QUERY"><a href="#1-2-2-åˆ›å»ºQuery-BUILD-QUERY" class="headerlink" title="1.2.2 åˆ›å»ºQuery(BUILD QUERY)"></a>1.2.2 åˆ›å»ºQuery(BUILD QUERY)</h4><p>ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—åœ¨ä¼šè¢«Luceneå¤„ç†ä¸ºä¸€ä¸ªQueryç±»çš„å¯¹è±¡ï¼ŒQueryæœ‰å¾ˆå¤šå­ç±»ï¼Œå¯ä»¥å®ç°é€»è¾‘ä¸Šçš„â€œä¸æˆ–éâ€çš„BooleanQueryï¼Œæ¯”å¦‚æˆ‘ä»¬æœç´¢æ—¶å¯ä»¥æ”¶å…¥ä¸‹é¢çš„å…³é”®å­—â€œjava &amp; ä¹¦ç±â€ï¼Œ è¯´æ˜æˆ‘ä»¬æƒ³è¦æœç´¢çš„æ˜¯ä¸javaæœ‰å…³çš„ä¹¦ç±ã€‚luceneä¸­æœ‰å„ç§Queryï¼Œluceneä¸ºäº†æ–¹ä¾¿ç”¨æˆ·ä½¿ç”¨ï¼Œæä¾›äº†ä¸€ä¸ªQueryParserå¯¹è±¡ï¼Œå®ƒå¯ä»¥è‡ªåŠ¨è§£æç”¨æˆ·è¾“å…¥çš„å…³é”®å­—è½¬ä¸ºç›¸åº”çš„queryå¯¹è±¡</p>
<h4 id="1-2-3-æœç´¢Queryï¼ˆSEARCH-QUERYï¼‰"><a href="#1-2-3-æœç´¢Queryï¼ˆSEARCH-QUERYï¼‰" class="headerlink" title="1.2.3 æœç´¢Queryï¼ˆSEARCH QUERYï¼‰"></a>1.2.3 æœç´¢Queryï¼ˆSEARCH QUERYï¼‰</h4><p>å½“Queryæ„å»ºå¥½åï¼Œå°±å¯ä»¥è¿›è¡Œæœç´¢äº†ã€‚ä¸€èˆ¬æœ‰ä¸‰ç§å®ç”¨çš„æœç´¢æ¨¡å‹ï¼š</p>
<ul>
<li>é€»è¾‘æ¨¡å‹ï¼ˆPure Boolean modelï¼‰â€”â€”æ¯ä¸ªDocumentè¦ä¹ˆåŒ…å«è¿™ä¸ªæŸ¥è¯¢çš„å†…å®¹ï¼Œè¦ä¹ˆä¸åŒ…å«ï¼Œå°±è¿™ä¸¤ç§æƒ…å†µã€‚åœ¨è¿™ç§æ¨¡å‹ä¸‹ï¼ŒåŒ…å«æŸ¥è¯¢å†…å®¹çš„Documentsæ²¡æœ‰ç›¸å…³æ€§çš„å¼ºå¼±ä¹‹åˆ†ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ä¹Ÿå°±æ²¡æœ‰åŠæ³•ä¸ºç»“æœæ’åºã€‚</li>
<li>å‘é‡ç©ºé—´æ¨¡å‹ï¼ˆVector space modelï¼‰â€”â€”Queryå¯¹è±¡ä¸Documentå¯¹è±¡éƒ½ç”¨é«˜ç»´å‘é‡è¡¨ç¤ºï¼Œæ²¡ä¸€ä¸ªtermå°±æ˜¯ä¸€ä¸ªç»´åº¦ã€‚é€šè¿‡è®¡ç®—queryä¸documentå¯¹è±¡çš„è·ç¦»ï¼ˆä½™å¼¦å®šç†ï¼‰å¯ä»¥å¾—åˆ°Documentç›¸å…³æ€§çš„å¼ºå¼±ï¼Œè¿™æ ·ä¹Ÿå°±å¯ä»¥ä¸ºç»“æœæ’åºäº†ã€‚</li>
<li>æ¦‚ç‡æ¨¡å‹ï¼ˆProbabilistic modelï¼‰â€”â€”é€šè¿‡å…¨æ¦‚ç‡æ–¹æ³•è®¡ç®—æ¯ä¸ªDocumentç¬¦åˆæŸ¥è¯¢queryçš„æ¦‚ç‡æ¥è¡¨ç¤ºç›¸å…³æ€§ã€‚ï¼ˆIn this model, you compute the probability that a document<br>is a good match to a query using a full probabilistic approachï¼‰</li>
</ul>
<h4 id="1-2-4-ç»“æœå±•ç¤ºï¼ˆRENDER-RESULTSï¼‰"><a href="#1-2-4-ç»“æœå±•ç¤ºï¼ˆRENDER-RESULTSï¼‰" class="headerlink" title="1.2.4 ç»“æœå±•ç¤ºï¼ˆRENDER RESULTSï¼‰"></a>1.2.4 ç»“æœå±•ç¤ºï¼ˆRENDER RESULTSï¼‰</h4><p>åœ¨Luceneä¸­ï¼Œç»“åˆäº†é€»è¾‘æ¨¡å‹ä¸å‘é‡ç©ºé—´æ¨¡å‹æ¥åŒ¹é…queryï¼Œå¾—åˆ°äº†åŒ¹é…çš„Documentå¯¹è±¡åï¼Œä½ éœ€è¦è´Ÿè´£æŠŠç»“æœå‹å¥½çš„å±•ç°å‡ºæ¥ï¼Œè¿™ä¸€æ­¥å†³å®šäº†ç”¨æˆ·çš„ä½“éªŒç¨‹åºå¥½åã€‚</p>
<h3 id="1-3-æœç´¢çš„å…¶ä»–æ–¹é¢ï¼ˆThe-rest-of-the-search-applicationï¼‰"><a href="#1-3-æœç´¢çš„å…¶ä»–æ–¹é¢ï¼ˆThe-rest-of-the-search-applicationï¼‰" class="headerlink" title="1.3 æœç´¢çš„å…¶ä»–æ–¹é¢ï¼ˆThe rest of the search applicationï¼‰"></a>1.3 æœç´¢çš„å…¶ä»–æ–¹é¢ï¼ˆThe rest of the search applicationï¼‰</h3><p>å®Œæˆäº†å»ºç«‹ç´¢å¼•ä¸æœç´¢è¿™ä¸¤å¤§æ¨¡å—åï¼Œè¿˜æœ‰ä¸€äº›å·¥ä½œè¦å»åšï¼Œè¿™äº›å·¥ä½œä¸€èˆ¬éƒ½å­˜åœ¨äºwebé¡¹ç›®ä¸­ã€‚ç¬¬ä¸€ï¼Œéœ€è¦æä¾›ä¸€ä¸ªç®¡ç†ç•Œé¢ï¼Œç”¨æ¥è·Ÿè¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œé…ç½®åº”ç”¨çš„ä¸åŒéƒ¨åˆ†ï¼Œå¼€å¯ä¸å…³é—­æœåŠ¡å™¨ç­‰ã€‚ç¬¬äºŒï¼Œè¿˜å¿…é¡»è¦åŒ…æ‹¬åˆ†æå·¥å…·ï¼Œå¯ä»¥ä½ å°±å¯ä»¥çŸ¥é“ç”¨æˆ·éƒ½çƒ­è¡·äºæœç´¢é‚£äº›å…³é”®è¯ï¼Œè¿™æ ·ä½ å°±èƒ½æ›´å¥½çš„ç»´æŠ¤ä½ çš„åº”ç”¨ã€‚ç¬¬ä¸‰ï¼Œä¸€ä¸ªå¥å£®çš„æœç´¢å¼•æ“ä¸€èˆ¬éƒ½æ”¯æŒæ‰©å±•æ€§ï¼ˆscalingï¼‰ã€‚ä¸‹é¢å¯¹ä¸Šé¢è¯´çš„è¿™ä¸‰ç‚¹åˆ†åˆ«è¿›è¡Œé˜è¿°ã€‚</p>
<h4 id="1-3-1-ç®¡ç†å‘˜ç•Œé¢ï¼ˆADMINISTRATION-INTERFACEï¼‰"><a href="#1-3-1-ç®¡ç†å‘˜ç•Œé¢ï¼ˆADMINISTRATION-INTERFACEï¼‰" class="headerlink" title="1.3.1 ç®¡ç†å‘˜ç•Œé¢ï¼ˆADMINISTRATION INTERFACEï¼‰"></a>1.3.1 ç®¡ç†å‘˜ç•Œé¢ï¼ˆADMINISTRATION INTERFACEï¼‰</h4><p>ç°åœ¨çš„æœç´¢å¼•æ“ä¸€èˆ¬éƒ½æ˜¯ä¸ªè´Ÿè´£çš„ç³»ç»Ÿï¼Œæœ‰è®¸å¤šéƒ¨åˆ†éƒ½éœ€è¦é…ç½®æ‰èƒ½ä½¿ç³»ç»Ÿå‘æŒ¥æœ€å¥½çš„æ€§èƒ½ã€‚å¦‚æœä½ ç”¨çˆ¬è™«æŠ“å–ç½‘é¡µï¼Œä½ å¯ä»¥é€šè¿‡ç®¡ç†ç•Œé¢ç»™å‡ºéœ€è¦çˆ¬çš„æ ¹ç½‘é¡µï¼Œçˆ¬çš„èŒƒå›´ã€é€Ÿåº¦ç­‰å‚æ•°ã€‚</p>
<p>Luceneæœ‰è®¸å¤šå¯ä»¥é…ç½®çš„åœ°æ–¹ã€‚æ¯”å¦‚RAM bufferçš„å¤§å°ï¼Œæäº¤ä¿®æ”¹ç´¢å¼•çš„é¢‘ç‡ä¸ä¼˜åŒ–ç´¢å¼•ä¸­çš„åˆ é™¤é¡¹ç­‰ç­‰ä¸ä¸€è€Œè¶³ã€‚</p>
<h4 id="1-3-2-åˆ†æç•Œé¢ï¼ˆANALYTICS-INTERFACEï¼‰"><a href="#1-3-2-åˆ†æç•Œé¢ï¼ˆANALYTICS-INTERFACEï¼‰" class="headerlink" title="1.3.2 åˆ†æç•Œé¢ï¼ˆANALYTICS INTERFACEï¼‰"></a>1.3.2 åˆ†æç•Œé¢ï¼ˆANALYTICS INTERFACEï¼‰</h4><p>é€šè¿‡å¯¹ç”¨æˆ·æœç´¢è¡Œä¸ºçš„å­¦ä¹ ä¸åˆ†æï¼Œç³»ç»Ÿèƒ½å¤Ÿæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚åœ¨ä¸Luceneç›¸å…³çš„åˆ†æä¸€èˆ¬åŒ…æ‹¬ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
<ul>
<li>ä¸åŒç§ç±»å‹çš„queryï¼Œæ¯”å¦‚single termï¼Œphraseï¼Œboolean queryçš„ä½¿ç”¨é¢‘ç‡</li>
<li>å“ªäº›queryçš„æœç´¢ç»“æœæ¯”è¾ƒå°‘ï¼ˆQueries that hit low relevanceï¼‰</li>
<li>å¯¹äºå“ªäº›queryç”¨æˆ·æ²¡å»å†æ¬¡ç‚¹å‡»ç»“æœ</li>
<li>æœç´¢çš„æ—¶é—´</li>
</ul>
<h4 id="1-3-3-æ‰©å±•ï¼ˆscalingï¼‰"><a href="#1-3-3-æ‰©å±•ï¼ˆscalingï¼‰" class="headerlink" title="1.3.3 æ‰©å±•ï¼ˆscalingï¼‰"></a>1.3.3 æ‰©å±•ï¼ˆscalingï¼‰</h4><p>æœç´¢å¼•æ“çš„æ‰©å±•ä¸€èˆ¬åŒ…æ‹¬ä¸¤ä¸ªæ–¹é¢ï¼š</p>
<ul>
<li>ç´¢å¼•æ•°æ®çš„æ‰©å±•</li>
<li>ç”¨æˆ·å¹¶å‘æœç´¢çš„æ‰©å±•</li>
</ul>
<p>å¯æ‰©å±•æ˜¯ä¸€ä¸ªç³»ç»Ÿå¾ˆé‡è¦çš„ç‰¹æ€§ï¼Œæƒ³æƒ³å¦‚æœæä¾›æœç´¢çš„æœåŠ¡å™¨åªæœ‰ä¸€å°ï¼Œé‚£ä¹ˆå¦‚æœè¯¥æœåŠ¡å™¨failäº†ï¼Œé‚£æ•´ä¸ªæœç´¢å°±æ²¡æ³•ç”¨äº†ï¼Œè¿™æ˜¯ä¸èƒ½å¿å—äº†ï¼Œè¿™æ—¶å¾€å¾€éœ€è¦ç”¨ä¸¤å°æˆ–å¤šå°æœåŠ¡å™¨æ¥æä¾›æœç´¢æœåŠ¡ã€‚å¤šå°æœºå™¨åŒæ—¶æä¾›æœç´¢è¿˜æ˜¯æ¯”è¾ƒå›°éš¾çš„ï¼Œæ¯”å¦‚ï¼Œåœ¨ç”¨æˆ·è¾“å…¥ä¸€ä¸ªqueryåï¼Œç³»ç»Ÿéœ€è¦æœ‰ä¸€ä¸ªfront-endæ¥å°†è¿™ä¸ªqueryè½¬å‘ç»™åå°çš„æœåŠ¡å™¨ï¼Œç”±äºå„ä¸ªæœåŠ¡å™¨æ˜¯å­¤ç«‹çš„ï¼Œæ¯ä¸ªæœåŠ¡å™¨åœ¨å°†æœç´¢ç»“æœè¿”å›æ—¶å¦‚ä½•æ’åºæ˜¯ä¸ªå¤§é—®é¢˜ã€‚</p>
<p>Luceneæ²¡æœ‰ä¸ºæ‰©å±•åšä¸“é—¨çš„å¤„ç†ï¼Œéœ€è¦ç”¨æˆ·è‡ªå·±è§£å†³ã€‚ä½†æ˜¯åœ¨ç”¨æˆ·è‡ªå·±åŠ¨æ‰‹å®ç°scalingä¹‹å‰ï¼Œå¯ä»¥å…ˆå‚ç…§å¼€æºä¸–ç•Œä¸­çš„<a href="http://lucene.apache.org/solr/" target="_blank" rel="external">Solr</a>ä¸<a href="http://nutch.apache.org/" target="_blank" rel="external">Nutch</a>ï¼Œè¿™ä¸¤ä¸ªéƒ½æ˜¯luceneçš„å§å¦¹é¡¹ç›®ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰<a href="http://katta.sourceforge.net/" target="_blank" rel="external">Katta</a>ä¸<a href="http://www.elasticsearch.com/" target="_blank" rel="external">ElasticSearch</a>ï¼Œä»–ä»¬éƒ½ä¸ºæœç´¢æä¾›äº†å¾ˆå¥½çš„æ‰©å±•æ€§ã€‚</p>
<p>PS: åœ¨æœ¬æ–‡å†™ä½œæœŸé—´ï¼Œkattaè²Œä¼¼å·²ç»åœæ­¢äº†æ›´æ–°ï¼Œæœ€åä¸€æ¬¡æ›´æ–°æ˜¯åœ¨2010å¹´ï¼ŒElasticSearchåˆ™æ¯”è¾ƒæ´»è·ƒï¼Œè€Œä¸”åœ¨<a href="https://www.found.no/" target="_blank" rel="external">found.no</a>å¯ä»¥æ‰¾åˆ°å¾ˆè¯¦ç»†çš„å‚è€ƒçš„èµ„æ–™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-å‰è¨€&quot;&gt;&lt;a href=&quot;#1-å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;1. å‰è¨€&quot;&gt;&lt;/a&gt;1. å‰è¨€&lt;/h2&gt;&lt;p&gt;ä»¥å‰å‚åŠ é½é²è½¯ä»¶å¤§å¸ˆæ—¶ç”¨è¿‡luceneï¼Œä½†æ˜¯ä»…ä»…åªæ˜¯åœç•™åœ¨APIè°ƒç”¨å±‚é¢ä¸Šï¼Œè¿™æ¬¡å€Ÿç€çœ‹ã€Šlucene in actionã€‹ç¬¬äºŒç‰ˆçš„æœºä¼šæŠŠä¸luceneå’Œæœç´¢ç›¸å…³çš„çŸ¥è¯†ç³»ç»Ÿæ•´ç†ä¸€éã€‚ä»¥ä¸‹å†…å®¹æ¥è‡ªlucene in actionçš„ç¿»è¯‘åŠ ä¸Šæˆ‘è‡ªå·±çš„ç†è§£ï¼Œå¦‚æœ‰ç–‘é—®æˆ–é”™è¯¯ï¼Œè¯·æŒ‡å‡ºï¼Œè°¢è°¢ã€‚&lt;br&gt;
    
    </summary>
    
      <category term="æœç´¢å¼•æ“" scheme="http://liujiacai.net/categories/search-engine/"/>
    
    
      <category term="lucene" scheme="http://liujiacai.net/tags/lucene/"/>
    
  </entry>
  
  <entry>
    <title>æ·±å…¥Javaä¸–ç•Œ</title>
    <link href="http://liujiacai.net/blog/2014/05/19/go-into-java-world/"/>
    <id>http://liujiacai.net/blog/2014/05/19/go-into-java-world/</id>
    <published>2014-05-19T00:18:39.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>ä¿—è¯è¯´çš„å¥½ï¼šä¸ç»ä¸€äº‹ï¼Œä¸é•¿ä¸€æ™ºã€‚<br><a id="more"></a><br>æœ€è¿‘çŠ¶æ€å¾ˆä¸å¥½ï¼Œè€ƒç ”ä¸æ‰¾å·¥ä½œçš„äº‹ä¸€ç›´è®©æˆ‘çº ç»“åˆ°ç°åœ¨ï¼Œç°åœ¨åœ¨å­¦æ ¡é‡Œå’Œä¸€äº›åŒå­¦èŠå¤©å¾—çŸ¥ï¼Œè½¯ä»¶å·¥ç¨‹è¯»ç ”ä¹Ÿæ˜¯åç†è®ºæ–¹é¢ï¼Œæ¯•ç«Ÿæ˜¯å·¥ç¨‹å­¦ç§‘å˜›ï¼Œç†è®ºåŠŸå¤«è¦åšè¶³ã€‚æ‰€ä»¥ï¼Œæˆ‘åœ¨å†…æ¨ç½‘ä¸Šè¯•ç€æŠ•äº†ä¸€ä»½ç®€å†ï¼Œæƒ³ç€è¦æ˜¯èƒ½æœ‰ä¸ªåˆé€‚çš„å·¥ä½œï¼Œå­¦ä¹ çš„äº‹åœ¨å·¥ä½œä¸Šä¹Ÿå¯ä»¥è¿›è¡Œå˜›ï¼Œç»“æœæ˜¯æˆ‘æƒ³çš„å¤ªè¿‡ç¾å¥½äº†ï¼Œè‡ªå·±å®åŠ›ä¸è¡Œï¼Œåˆ«äººæ€ä¹ˆå›å»è¦ä½ å‘¢ï¼Œæ˜¨å¤©ç”µè¯é¢è¯•çš„ï¼Œæˆ‘å½“æ—¶æ­£åœ¨ä¿®æ”¹æ¯•ä¸šè®ºæ–‡ï¼Œå…¶å®æˆ‘å¯ä»¥å‘åé€€é€€çš„ï¼Œä½†æ˜¯å½“æ—¶å°±ç›´æ¥é¢äº†ï¼Œè¿™æ¬¡ç›´æ¥æš´éœ²å‡ºè‡ªå·±çš„é’»ç ”ç²¾ç¥ä¸å¤Ÿçš„é—®é¢˜ï¼Œè¿™æ¬¡é¢è¯•ä¸»è¦æœ‰ä¸‹é¢å‡ ä¸ªé¢˜ï¼š</p>
<ul>
<li>javaä¸­çš„classloaderæœ‰å“ªäº›ï¼Ÿ</li>
<li>javaä¸­ä¸treeæœ‰å…³çš„æ•°æ®ç»“æ„çš„åŸç†ï¼Ÿ</li>
<li>javaä¸­Collectionä¸­çš„å¸¸è§ç±»çš„ç†è§£ï¼Ÿ</li>
<li>çº¢é»‘æ ‘å‰ªæé—®é¢˜ä»¥åŠå¸¸è§çš„æ ‘æœ‰å“ªäº›ï¼Ÿ</li>
<li>lispä¸ºä»€ä¹ˆæ²¡æœ‰æµè¡Œèµ·æ¥ï¼Ÿ</li>
</ul>
<p>ä¸»è¦æ˜¯å°±æ˜¯è¿™å‡ ä¸ªé—®é¢˜ï¼Œæˆ‘å›ç­”çš„æ˜¯ä¸€å¡Œç³Šæ¶‚ï¼Œæ ¹æœ¬å°±æ²¡åœ¨èŠ‚æ‹ä¸Šï¼Œè¿æœ€åä¸€ä¸ªå¼€æ”¾æ€§é—®é¢˜æˆ‘å›ç­”çš„ä¹Ÿä¸å¥½ï¼Œå…¶å®è¿™ä¸ªé—®é¢˜æˆ‘ä»¥å‰æƒ³è¿‡ä¸å°‘ï¼Œç”µè¯é¢è¯•æ—¶å°±æ‡µäº†ï¼Œå…¶å®å®Œå…¨å¯ä»¥ä»lispè¯­è¨€çš„ä¸»è¦é¢å‘å¯¹è±¡æ¥è°ˆçš„ï¼Œæˆ‘å½“æ—¶ç›´æ¥å°±è¯´äº†ç±»åº“å°‘ï¼Œé‚£javaä¸€å¼€å§‹ä¸ä¹Ÿæ²¡å‡ ä¸ªç±»åº“å˜›ï¼Œé‚£javaä¸ºä»€ä¹ˆè¿™ä¹ˆç«å‘¢ï¼Ÿï¼Ÿï¼ï¼å½“æ—¶æ€è·¯å®Œå…¨æ²¡æœ‰æ‰“å¼€ï¼Œäº‹åæ‰¾åˆ°ä¸€ç¯‡æ¯”è¾ƒé è°±çš„æ–‡ç« <a href="http://locklessinc.com/articles/why_lisp_failed/" target="_blank" rel="external">why lisp failed</a>ã€‚</p>
<p>å…¶æ¬¡å°±æ˜¯javaç›¸å…³çš„çŸ¥è¯†ï¼Œåƒclassloaderçš„åˆ†ç±»ï¼Œè¯´å®è¯è¿™ä¸ªclassloaderç›¸å…³çš„çŸ¥è¯†çœŸçš„æ˜¯çœ‹è¿‡ï¼Œä½†ä¸çŸ¥é“æ˜¯é‚£æ—¶å€™çš„äº‹äº†ï¼Œè¿™ä¹ˆä¸€é—®æˆ‘ï¼Œæˆ‘æ˜¯çœŸçš„ä¸çŸ¥é“ï¼Œè¿™ä¹Ÿåæ˜ å‡ºäº†æˆ‘çš„é’»ç ”ç²¾ç¥ä¸å¤Ÿï¼Œå¤©å¤©ç”¨javaï¼Œå´ä¸çŸ¥é“javaçš„åŠ è½½æœºåˆ¶ï¼Œç”¨çš„å®‰å¿ƒå—ï¼Ÿå…¶å®å¾ˆå¤šä¸œè¥¿æˆ‘éƒ½ç†è§£çš„ä¸å¤Ÿæ·±å…¥ï¼Œjavaçš„helloworldç¨‹åºå¤ªç®€å•äº†ï¼Œä½†æ˜¯è¦æƒ³æ·±å…¥è¿›å»ï¼Œä¸è¦è€æ˜¯åœç•™åœ¨è¡¨é¢é‚£äº›apiè°ƒç”¨ä¸Šï¼Œè¿˜éœ€è¦ä¸‹ä¸å°‘åŠŸå¤«ã€‚</p>
<p>è¯´å®è¯ï¼Œç°åœ¨è€ƒç ”çš„ç›®çš„æ€§ä¸æ˜¯é‚£ä¹ˆå¼ºäº†ï¼Œæ¯•ç«Ÿè€ƒç ”å’Œç›´æ¥å·¥ä½œéœ€è¦æŒæ¡çš„ä¸œè¥¿åˆä¸ä¸€æ ·ï¼Œå·¥ä½œä¸‰å¹´ä¸ä¸Šè€ƒä¸‰å¹´å„æœ‰åˆ©å¼Šï¼Œæ²¡æœ‰è°èƒ½è¯´å“ªä¸ªæ¯”å“ªä¸ªå¥½ï¼Œå¯æ€•çš„æ˜¯è‡ªå·±ä¹Ÿä¸çŸ¥é“å¦‚ä½•é€‰æ‹©ï¼Œè€æ˜¯å¾˜å¾Šä¸å®šï¼Œç°åœ¨æˆ‘å°±æ˜¯è¿™ä¸ªçŠ¶æ€ï¼Œç®—æ³•ä¸è¡Œï¼Œä»£ç èƒ½åŠ›ä¸å¤Ÿï¼Œå¥½æ‚²æƒ¨çš„è¯´ã€‚</p>
<p>è¿‘é˜¶æ®µéœ€è¦åšçš„æ˜¯æ·±å…¥javaï¼Œç„¶åå†æŠ•ç®€å†ï¼Œçœ‹çœ‹è‡ªå·±åˆ°åº•æ˜¯å‡ æ–¤å‡ ä¸¤ã€‚ä¸‹é¢æ˜¯javaå®˜æ–¹ä¸€äº›å¥½çš„èµ„æºï¼š</p>
<ul>
<li><a href="http://docs.oracle.com/javase/tutorial/" target="_blank" rel="external">java turtorial</a></li>
<li><a href="http://docs.oracle.com/javase/tutorial/collections/index.html" target="_blank" rel="external">Trail: Collections</a></li>
<li><a href="http://docs.oracle.com/javase/7/docs/index.html" target="_blank" rel="external">Java Platform Standard Edition 7 Documentation</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¿—è¯è¯´çš„å¥½ï¼šä¸ç»ä¸€äº‹ï¼Œä¸é•¿ä¸€æ™ºã€‚&lt;br&gt;
    
    </summary>
    
      <category term="ç¼–ç¨‹è¯­è¨€" scheme="http://liujiacai.net/categories/PL/"/>
    
    
      <category term="Java" scheme="http://liujiacai.net/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>ä¸€ä¸ªéŸ³ä¹ç›²å¦‚ä½•æ‰èƒ½å¬&#39;æ‡‚&#39;ä¸¥è‚ƒéŸ³ä¹ï¼Ÿ</title>
    <link href="http://liujiacai.net/blog/2014/05/09/understand-serious-music/"/>
    <id>http://liujiacai.net/blog/2014/05/09/understand-serious-music/</id>
    <published>2014-05-09T03:59:40.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>##åˆè¯†å¤å…¸</p>
<p>ä»Šå¤©æ”¶è·å¤ªå¤§äº†ï¼Œæˆ‘ä¹Ÿç»ˆäºèƒ½äº«å—â€œä¸¥è‚ƒâ€éŸ³ä¹äº†ã€‚</p>
<p>äº‹æƒ…çš„ç»è¿‡æ˜¯è¿™ä¹ˆæ ·çš„ï¼Œä»¥å‰äº†è§£è¿‡<a href="http://book.douban.com/subject/1291204/" target="_blank" rel="external">GEB</a>ï¼Œéƒ½è¯´ä»–æ€ä¹ˆæ€ä¹ˆå¥½ï¼Œæ€ä¹ˆæŠŠå·´èµ«çš„éŸ³ä¹ä¸è‰¾èˆå°”çš„ç”»ç›¸å¯¹æ¯”ï¼Œæˆ‘æ˜¯ä¸ªéŸ³ä¹ç›²ï¼Œå¹³æ—¶ä¹Ÿå°±æ˜¯å¬å¬æµè¡Œæ­Œæ›²ï¼Œä¸Šå“ªé‡Œå»å¬æ‡‚è€å·´èµ«çš„éŸ³ä¹ï¼Œå¯¹éŸ³ä¹çš„å”¯ä¸€ä¸€ç‚¹è®°å¿†æ˜¯é«˜ä¸‰æ—¶ä¸ŠåŸºæœ¬èƒ½åŠ›è¯¾æ—¶ï¼Œä¸€ä¸ªæœ‰æ¿€æƒ…çš„éŸ³ä¹è€å¸ˆè®²è¿‡å·´èµ«å¦‚ä½•ç‰›å‰ï¼Œä½†æ˜¯å½“æ—¶åº”ä»˜é«˜è€ƒï¼Œè°å»è®¤çœŸç†ç¬è¿™60åˆ†çš„åŸºæœ¬èƒ½åŠ›å‘€ã€‚</p>
<p>ç°åœ¨ä½œä¸ºä¸€ä¸ªç¨‹åºå‘˜ï¼ŒèŒä¸šä¹ æƒ¯è®©æˆ‘å¯¹ä»»åŠ¡äº‹æƒ…éƒ½æœ‰åˆ¨æ ¹é—®é¢˜çš„å…´è¶£ï¼Œæƒ³å¼„æ˜ç™½å®ƒçš„æœ¬è´¨åˆ°åº•æ˜¯æ€ä¹ˆæ ·çš„ï¼Œç°åœ¨è¿™ä¸ªç–‘æƒ‘è·‘åˆ°äº†éŸ³ä¹èº«ä¸Šã€‚ä¸ºä»€ä¹ˆæˆ‘å°±ä¸èƒ½â€œå¬æ‡‚â€å·´èµ«éŸ³ä¹ä¸­æ‰€è¡¨è¾¾å‡ºçš„æ„å¢ƒå‘¢ï¼Œæ˜¯æˆ‘æ²¡æœ‰ä¹ç†çŸ¥è¯†å˜›ï¼Œä¸ºäº†è¿™ä¸ªæˆ‘è¿˜ä¸‹è½½äº†<a href="http://www.56.com/w43/album-aid-8156170.html" target="_blank" rel="external">å®‹å¤§å”æ•™éŸ³ä¹</a>,ä½†æ˜¯æ²¡èƒ½å¬ä¸‹ï¼Œç„¶åæˆ‘æƒ³äº†ä¸‡èƒ½çš„çŸ¥ä¹ï¼Œæˆ‘ä¸Šæäº†ä¸€é—®é¢˜<a href="http://www.zhihu.com/question/23698905" target="_blank" rel="external">ä¸€ä¸ªéŸ³ä¹ç›²å¦‚ä½•æ‰èƒ½å¬æ‡‚è«æ‰ç‰¹ã€è´å¤šèŠ¬ã€å·´èµ«çš„ä½œå“ï¼Ÿ</a>,å¸Œæœ›çŸ¥å‹ä»¬èƒ½ç»™æˆ‘æŒ‡æ¡æ˜é“ï¼Œè®©æˆ‘å°½å¿«èƒ½å¤ŸæŒæ¡éŸ³ä¹å…¥é—¨æ–¹æ³•ã€‚</p>
<p>ä¸å‡ºæ‰€æ–™ï¼Œåœ¨å¼ºå¤§çš„çŸ¥å‹å¸®åŠ©ä¸‹æˆ‘æ‰¾äº†ä¸€ä¸ªè§†é¢‘<a href="http://www.tudou.com/programs/view/6ULRRxqmBFM/" target="_blank" rel="external">èµ°è¿›éŸ³ä¹ä¸–ç•Œ</a>ï¼Œè¿™è²Œä¼¼åº”è¯¥æ˜¯ä¸€ä¸ªä¸­å¤®æ°‘æ—å¤§å­¦çš„è€å¸ˆåšçš„ä¸€ä¸ªæ¼”è®²ï¼ŒçœŸçš„æ˜¯å¤ªèµäº†ï¼Œè¿™ä½å‘¨è€å¸ˆè®²çš„å®åœ¨æ˜¯å¤ªå¥½äº†ï¼Œé“å‡ºäº†æƒ³æˆ‘è¿™æ ·çš„â€œéŸ³ä¹å‡¡äººâ€ä¸ºä»€ä¹ˆå¬ä¸æ‡‚æƒ³å·´èµ«çš„â€œé«˜é›…â€éŸ³ä¹çš„åŸå› ï¼Œå¯¹éŸ³ä¹æ„Ÿå…´è¶£çš„äººæ¨èå»çœ‹è¿™ä¸ªè§†é¢‘ï¼Œè¿™ä¸ªè§†é¢‘2ä¸ªå¤šå°æ—¶ï¼Œä½†ç»å¯¹èƒ½è®©ä½ ç‰©æœ‰æ‰€å€¼ã€‚</p>
<p>å¾ˆå–œæ¬¢å‘¨è€å¸ˆçš„å¼€åœºï¼Œè§†é¢‘ä¸€å¼€å§‹å‘¨è€å¸ˆå°±ä»å¤§å®¶éƒ½çŸ¥é“çš„å…¸æ•…<a href="http://baike.baidu.com/view/42504.htm?fr=aladdin#2" target="_blank" rel="external">ä¿ä¼¯ç‰™å’Œé’Ÿå­æœŸçš„æ•…äº‹</a>åˆ‡é¢˜ï¼Œé€šè¿‡è¿™ä¸¤ä¸ªäººçš„æ•…äº‹ï¼Œå¤§å®¶éƒ½æ‡‚çš„äº†çŸ¥éŸ³éš¾æ±‚çš„é“ç†ï¼Œä½†æ˜¯åˆ°ç°åœ¨å‡ åƒå¹´æ¥æˆ‘ä»¬å¯¹éŸ³ä¹çš„æ¬£èµæ°´å¹³è¿˜æ˜¯æ²¡å˜ã€‚ </p>
<p>é€šè¿‡è¿™ä¸ªåˆ‡é¢˜æˆ‘å°±èƒ½çŸ¥é“è¿™ä¸ªå‘¨è€å¸ˆç»å¯¹æ˜¯ä¸ªåšæ‰å¤šå­¦çš„äººï¼Œé€šè¿‡çœ‹å®Œè¿™ä¸ªè§†é¢‘ä¹Ÿè¯æ˜äº†è¿™ä¸€ç‚¹ã€‚å‘¨è€å¸ˆè¯´éŸ³ä¹è‰ºæœ¯çš„åŸºæœ¬ææ–™æ˜¯éŸ³å“ï¼Œè€ŒéŸ³å“æœ‰ä¸¤ä¸ªåŸºæœ¬å±æ€§ï¼š</p>
<blockquote>
<ul>
<li>æ²¡æœ‰é€ å‹æ€§ï¼Œè¿™è¯´æ˜éŸ³å“ä¸èƒ½<strong>ç›´æ¥</strong>ä¼ è¾¾è§†è§‰å½¢è±¡</li>
<li>æ²¡æœ‰è¯­ä¹‰æ€§ï¼Œè¿™è¯´æ˜éŸ³å“ä¸èƒ½<strong>ç›´æ¥</strong>ä¼ è¾¾æ€æƒ³æ¦‚å¿µ</li>
</ul>
</blockquote>
<p> è¿™ä¹Ÿå°±è¯´æ˜äº†æˆ‘ä»¬ä¸ºä»€ä¹ˆå¬ä¸æ‡‚ï¼Œå› ä¸ºéŸ³ä¹æœ¬èº«ä¸èƒ½ç›´ä¼ è¾¾ä½œè€…çš„æ€æƒ³ï¼Œä¸ä»…ä»…æˆ‘ä»¬ä¸æ‡‚ï¼Œé‚£ä¹ˆä¸“ä¸šæéŸ³ä¹çš„äººä¹Ÿä¸æ‡‚ã€‚çœ‹åˆ°å‘¨è€è¯´è¿™äº›è¯æˆ‘çœŸæ˜¯å…¨èº«èˆ’ç•…ï¼ŒåŸæ¥å¤§å®¶éƒ½æ˜¯ä¸æ‡‚è£…å‘€ã€‚å“ˆå“ˆï¼</p>
<p>ä½†æ˜¯éŸ³ä¹ä½œä¸ºä¸€é—¨è®©æ— æ•°äººç€è¿·çš„è‰ºæœ¯ï¼Œä¸å¯èƒ½è£…äº†å‡ åƒå¹´å§ï¼Œè‚¯å®šè¿˜æ˜¯å°‘äº†äº›ä»€ä¹ˆå§ã€‚å‘¨è€å¸ˆè¯´è¿™é‡Œçš„å…³é”®æ˜¯<strong>è”è§‰</strong>ï¼Œå…¶å®è¿™ä¸ªå¤§å®¶å¹³æ—¶ä¹Ÿéƒ½çŸ¥é“ï¼Œå°±æ˜¯æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°ä¸€ç§ä¸œè¥¿è”æƒ³åˆ°å¦ä¸€ç§ä¸œè¥¿çš„èƒ½åŠ›ï¼Œè¿™ç§èƒ½åŠ›æ˜¯æˆ‘ä»¬æ¯ä¸ªäººä¸ç”Ÿä¿±æ¥çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¯ä¸ªäººéƒ½èƒ½å¬â€œæ‡‚â€éŸ³ä¹ã€‚</p>
<blockquote>
<ul>
<li>é«˜éŸ³ï¼Œè½»å¿«ã€æ´»æ³¼</li>
<li>ä½éŸ³ï¼Œæ²‰é‡ã€å‹æŠ‘</li>
</ul>
</blockquote>
<p>è¿™å°±æ˜¯éŸ³ä¹ä¸­ç»™äººæœ€ç›´æ¥çš„æ„Ÿå—</p>
<p>æ¯”è¾ƒæœ‰æ„æ€çš„æ˜¯ï¼Œå‘¨è€å¸ˆè¿˜çˆ†æ–™äº†ä»–ä»¬éŸ³ä¹åœˆä¸€äº›ä¼—æ‰€å‘¨çŸ¥çš„ç§˜å¯†ï¼Œå…¶å®è¯´éŸ³ä¹é‰´èµè¯¾éƒ½æ˜¯æ‰¯æ·¡ï¼Œè¯„è®ºéƒ½æ˜¯åäººåŠ ä¸Šå»çš„ï¼Œè¦ä¸ç„¶æ²¡æ³•å–å‘€ï¼Œå¤§å®¶æƒ³æƒ³è‡ªå·±ä¹°å›æ¥ä¸€ç¢ŸéŸ³ä¹å…‰ç›˜ï¼Œå‘ç°é‡Œé¢æ²¡æœ‰ä»€ä¹ˆè®²è§£ï¼Œä¼šä¸ä¼šå¾ˆå¤±æœ›ï¼Œè¿™å°±æ˜¯å•†ä¸šä¸è‰ºæœ¯çš„å·®åˆ«ã€‚å†™è¯„è®ºä¸»è§‚å› ç´ å¾ˆå¤§ï¼Œæ‰€ä»¥è¿™å°±å¯¼è‡´äº†æˆ‘ä»¬å¬ä¸æ‡‚ã€‚å‘¨è€å¸ˆä»¥å‰å°±å¹²è¿‡ä¸å°‘ä¸ºéŸ³ä¹ä½œå“å†™è¯„è®ºçš„äº‹ï¼Œå‘¨è€å¸ˆè¯´è¿™é‡Œæœ‰ä¸ªç§˜è¯€ï¼ŒæŠŠè¯„è®ºå†™çš„æŠ½è±¡äº›ï¼Œæ¯”å¦‚â€œå€¾è¯‰â€ï¼Œå…·ä½“ä»€ä¹ˆå†…å®¹éƒ½å¯ä»¥ï¼Œè¿™æ ·æœ€èµ·ç ä¸ä¼šè·‘é¢˜äº†å§ã€‚å‘¨è€å¸ˆç¡®å®å¾ˆå¯çˆ±æœ‰æ²¡æœ‰ã€‚</p>
<p>åˆ°è¿™é‡Œæˆ‘å°±è±ç„¶å¼€æœ—äº†ï¼Œä»¥å‰æ¥å—çš„æ•™è‚²éƒ½æ˜¯é”™è¯¯çš„ï¼Œä¸ºä»€ä¹ˆå¬éŸ³ä¹å‰<strong>å¿…é¡»</strong>äº†è§£ä½œè€…çš„ç»å†ï¼Œåˆ›ä½œèƒŒæ™¯ä¸€ç±»çš„ä¸œè¥¿å‘€ï¼Œéƒ½æ˜¯æ‰¯æ·¡ï¼Œå¬éŸ³ä¹å°±æ˜¯æ”¾æ¾çš„ï¼Œæ ¹æœ¬æ²¡å¿…è¦å»åšé‚£ä¹ˆå¤šçš„å‡†å¤‡ï¼Œå¥½å¬å°±å¬ï¼Œä¸å¥½å¬å°±æ¢ä¸€ä¸ªï¼Œè¿™ä¹Ÿæ˜¯çŸ¥å‹ä»¬æ‰€è¯´çš„ã€‚</p>
<p>æœ€åå‘¨è€å¸ˆæŠŠéŸ³ä¹é‰´èµä¸Šå‡åˆ°å›½å®¶è½¯å®åŠ›é—®é¢˜ä¸Šäº†ï¼Œä¸ºä»€ä¹ˆå¤§å®¶ä¹°æ‰‹æœºéƒ½è¯´ä¸è¦ä¹°å›½äº§æ‰‹æœºï¼Œå°±å› ä¸ºè®¾è®¡ä¸å¥½å‘—ï¼Œä¸ºä»€ä¹ˆä¸å¥½ï¼Œè¿™é‡Œçš„æ ¹æœ¬åŸå› æ˜¯ï¼Œ<strong>æ„Ÿæ€§æ„è¯†</strong>å·®ï¼Œæˆ‘ä»¬ä»å°çš„æ•™è‚²éƒ½æ˜¯å¸¦æœ‰åŠŸåˆ©æ€§çš„ï¼Œå»æ˜¥æ¸¸å›æ¥å¿…é¡»å†™æ—¥è®°ï¼Œå¯¼è‡´ç©ä¹Ÿç©çš„ä¸ç—›å¿«ï¼Œæƒ³æˆ‘å¬å·´èµ«çš„éŸ³ä¹éè¦ç”Ÿæ¬ç¡¬å¥—åˆ°è‰¾èˆå°”çš„ç”»ä¸Šï¼Œä¹Ÿæ˜¯æ•™è‚²ä½“åˆ¶çš„å—å®³è€…ã€‚é•¿æ­¤ä»¥å¾€ä¸‹å»ï¼Œå¯¼è‡´æˆ‘ä»¬å¤±å»äº†å¯¹äº‹ç‰©æ„Ÿæ€§çš„è®¤è¯†ï¼Œå…¶å®è¿™ç‚¹å’Œç°åœ¨æ‰€å€¡å¯¼çš„â€œç”¨æˆ·ä½“éªŒâ€å¾ˆç›¸ä¼¼ï¼Œæˆ‘ä»¬åœ¨è®¾è®¡ä¸€ä¸ªäº§å“æ˜¯åŠŸèƒ½å†å¼ºå¤§ï¼Œä½†æ˜¯ç•Œé¢ä¸‘é™‹æ— æ¯”ï¼Œæˆ‘ç›¸ä¿¡ä¹Ÿæ˜¯æ²¡äººä¼šç”¨çš„ï¼Œè¿™ä¹Ÿç»™æˆ‘æäº†ä¸ªé†’ï¼ŒæŠ€æœ¯è¦ä¸å¸‚åœºç»“åˆï¼Œéœ€è¦æ·±å…¥æŒæ¡ç”¨æˆ·çš„å¿ƒç†ï¼Œæ€ä¹ˆè®¾è®¡è®©ç”¨æˆ·ç”¨ç€èˆ’æœï¼Œæ€ä¹ˆæ‰èƒ½æä¾›ç”¨æˆ·æ›´å¥½çš„ä½“éªŒï¼Œè¿™éƒ½æ˜¯é‡ä¸­ä¹‹é‡çš„é—®é¢˜ã€‚</p>
<p>ä¸­å›½äººä¸€ç›´è®¤ä¸º<strong>å®ç”¨</strong>çš„ä»·å€¼å¤§äº<strong>æ„Ÿæ€§</strong>çš„è®¤è¯†ï¼Œè¿™ä¹Ÿå°±å¯¼è‡´äº†æˆ‘ä»¬çš„å•æ‰€ä¸ºä»€ä¹ˆè¿™ä¹ˆè„ï¼Œèƒ½ç”¨å°±è¡Œå‘—ï¼</p>
<p>è¯´äº†ä¸å°‘äº†ï¼Œå› ä¸ºè¿™ä¸ªé—®é¢˜å›°æ‰°äº†æˆ‘å¥½ä¹…ï¼Œåœ¨å‘¨è€å¸ˆçš„è§†é¢‘å’ŒçŸ¥å‹ä»¬çš„è§£ç­”ä¸‹ç»ˆäºè®©æˆ‘åˆæœ‰äº†æ–°çš„è®¤è¯†ï¼Œæ„Ÿè§‰çœŸçš„æ˜¯å¤ªå¥½äº†ã€‚</p>
<p>PS:ç™¾åº¦åå‘ç°è¿™ä½å‘¨è€å¸ˆç«Ÿæ˜¯ä¸­å¤®éŸ³ä¹å­¦é™¢çš„å‰¯æ ¡é•¿ï¼Œç½‘ä¸Šçš„å¥½è¯„ä¹Ÿæ˜¯ä¸æ–­ã€‚<br>æœ€åé™„ä¸Šå‘¨è€å¸ˆæ¼”è®²çš„pptä¸ä¸ºæˆ‘ä»¬å‡†å¤‡çš„éŸ³ä¹èµ„æºï¼ˆæŒ‰ç±»åˆ«åˆ†å¥½ï¼‰<br><img src="http://img03.taobaocdn.com/imgextra/i3/581166664/TB2m4K_apXXXXX5XXXXXXXXXXXX_!!581166664.png" alt="å‘¨æµ·å®åŠŸèƒ½éŸ³ä¹10CD MP3"></p>
<p><a href="">http://pan.baidu.com/s/1kTr5fy3</a></p>
<p>##æ›´æ–°è®¤è¯†ï¼Œ2014.5.19</p>
<p>æˆ‘çš„è¿™ä¸ªé—®é¢˜åœ¨<a href="http://www.zhihu.com/question/23698905" target="_blank" rel="external">çŸ¥ä¹</a>ã€<a href="http://v2ex.com/t/111959" target="_blank" rel="external">v2ex</a>ä¸Šå‘èµ·çš„é—®é¢˜è®¨è®ºååˆ†çƒ­çƒˆï¼Œä¸»è¦æ˜¯å›´ç»•è¿™å¯¹éŸ³ä¹çš„æ€åº¦ï¼Œå…¶ä¸­<a href="http://www.zhihu.com/people/han-edward" target="_blank" rel="external">Han Edwar</a>ä»ä¸“ä¸šè§’åº¦å‡ºå‘ï¼Œå¼ºè°ƒå¿…é¡»å»å¼„æ‡‚ä¸€é¦–æ›²å­ä¸­æ‰€ä¼ é€’çš„æ„æ€ï¼Œå…³äºè¿™ä¸ªé—®é¢˜æˆ‘æƒ³çš„æ˜¯æˆ‘æƒ³è¯•ç€å»å¬å¬å¤å…¸éŸ³ä¹å§ï¼Œè€æ˜¯ç©ºè¯´ä¹Ÿæ²¡ä»€ä¹ˆç”¨ï¼Œè¿˜éœ€è¦ç”¨å®è·µæ¥è¯æ˜ä¸€ä¸‹ã€‚</p>
<p>##æ›´æ–°è®¤è¯†ï¼Œ2015.4.19</p>
<p>å°†è¿‘ä¸€å¹´åå†æ¥çœ‹çœ‹è¿™ä¸ªé—®é¢˜ï¼Œè²Œä¼¼å’Œå½“åˆå·®ä¸å¤šå°‘ï¼Œç°åœ¨å¶å°”ä¹Ÿä¼šåœ¨ç½‘ä¸Šæ‰¾ä¸€äº›å¤å…¸éŸ³ä¹å¬å¬ï¼Œä½†è¿˜æ˜¯æ²¡èƒ½å¬å‡ºæ„Ÿè§‰ï¼Œçœ‹æ¥æˆ‘çš„è·¯è¿˜å¾ˆé•¿ã€‚è¿™ä¸ªé—®é¢˜åœ¨çŸ¥ä¹ä¸Šæœ‰äº†875ä¸ªå…³æ³¨äº†ï¼Œçœ‹æ¥å¤§å®¶å¯¹è¿™ä¸ªé—®é¢˜éƒ½è¿˜è›®æ„Ÿå…´è¶£çš„ã€‚å…¶ä¸­æœ‰ä¸ª<a href="http://www.zhihu.com/question/23698905/answer/34179234" target="_blank" rel="external">åŒ¿åçš„å›å¤</a>ï¼Œä»GEBè¿™æœ¬ä¹¦é˜è¿°çš„ä¸­å¿ƒæ€æƒ³å…¥æ‰‹ï¼Œå€’æ˜¯ç»™äº†æˆ‘ä¸å°‘çš„å¯å‘ã€‚æ€•ä»¥åæ‰¾ä¸åˆ°äº†ï¼Œåœ¨è¿™é‡Œç•™ä¸ªå­˜æ ¹ï¼š</p>
<pre><code>éŸ³ä¹æˆ‘ä¸ç†Ÿï¼ŒGEBé‚£æœ¬ä¹¦æˆ‘å¾ˆå–œæ¬¢ï¼Œè¿™é‡Œç»™é¢˜ä¸»æä¾›å¦ä¸€ä¸ªçœ‹é—®é¢˜çš„è§’åº¦ã€‚

é¦–å…ˆï¼ŒGEBè¿™æœ¬ä¹¦è®²çš„æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæ¢è®¨çš„æ˜¯â€œä»€ä¹ˆæ˜¯è‡ªæˆ‘â€ã€‚

è‡ªæˆ‘è¿™ä¸ªæ¦‚å¿µï¼Œæ˜¯äººä¸çœ¼ä¸‹ä¸–é—´ä¸‡ç‰©çš„åŒºåˆ«ï¼ˆå› ä¸ºæˆ‘ä»¬è¿˜æ²¡å‘ç°å¤–æ˜Ÿæ™ºæ…§ã€ä¹Ÿæ²¡å‘ç°åœ°çƒä¸Šçš„å…¶ä»–ç”Ÿç‰©æœ‰è‡ªæˆ‘æ„è¯†ï¼‰ã€‚
é‚£ä¹ˆï¼Œå¦‚æœæœºå™¨ï¼Œæˆ–è€…ä¸¥æ ¼çš„è¯´ï¼Œç¨‹åºï¼Œæœ‰äº†è‡ªæˆ‘æ„è¯†ï¼Œè¿™ç¨‹åºï¼Œè¯¥å«ä»€ä¹ˆï¼Ÿå®ƒæ˜¯ä¸æ˜¯äººï¼ŸåŒæ—¶ï¼Œæˆ‘ä»¬æ€æ ·æ‰èƒ½åˆ¤æ–­æŸç¨‹åºæœ‰äº†è‡ªæˆ‘æ„è¯†ï¼Ÿ

ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œç›®å‰å¤§å®¶æœ‰æ¯”è¾ƒä¸€è‡´çš„ç­”æ¡ˆï¼Œå€¾å‘äºå«å®ƒâ€œäººå·¥æ™ºèƒ½â€ï¼ˆæ²¡é”™ï¼ŒAIå°±æ˜¯ä»è¿™å„¿æ¥çš„ï¼ï¼‰ã€‚
ä½†æ˜¯å¯¹ç¬¬äºŒä¸ªé—®é¢˜ï¼Œä¸åŒçš„äººæœ‰ä¸åŒçš„çœ‹æ³•ã€‚

ä»¥å›¾çµä¸ºé¦–çš„è®¡ç®—æœºç§‘å­¦å®¶å€¾å‘äºä»è¡Œä¸ºä¸Šåˆ¤æ–­ã€‚ä»è‘—åçš„â€œä¸­æ–‡å°å±‹â€ï¼ˆå›¾çµæµ‹è¯•çš„å‡ºå¤„ï¼‰åˆ°ä»Šå¤©çš„è°·æ­Œç¿»è¯‘ã€æœºå™¨å­¦ä¹ ï¼Œéƒ½å¯ä»¥å½’äºè¿™ä¸ªå­¦æ´¾ã€‚

ä¾¯å£«è¾¾ï¼ˆGEBçš„ä½œè€…ï¼‰ä¸è¿™ä¹ˆçœ‹ã€‚ä»–åšæŒè®¤ä¸ºï¼Œæœ‰self-consciousnessçš„ç¨‹åºæ‰å«äººå·¥æ™ºèƒ½ã€‚åœ¨æ·±åº¦å­¦ä¹ å‡ ä¹è¦å¸­å·ä¸–ç•Œçš„ä»Šå¤©ï¼Œä»–æˆäº†å°‘æ•°æ´¾ï¼›ä½†æ˜¯åœ¨å‡ºç‰ˆGEBçš„ä¸Šä¸–çºªä¸ƒåå¹´ä»£æœ«å…«åå¹´ä»£åˆï¼Œæ­£æ˜¯å­¦ç•Œåæ€äº”åå¹´ä»£æå‡ºçš„â€œäººå·¥æ™ºèƒ½â€æ¦‚å¿µçš„æ—¶æœŸã€‚æ‰€ä»¥ä»–çš„è¿™ç§è§‚ç‚¹åœ¨å½“æ—¶å¹¶ä¸åƒä»Šå¤©å¬æ¥è¿™ä¹ˆç¦»ç»å›é“ï¼Œåè€Œè¿˜æœ‰ç‚¹è¿½æœ¬æº¯æºçš„æ„æ€ã€‚
å…³é”®æ˜¯ï¼Œä»–æ–‡ç¬”å¥½å•Šã€‚è¿™æœ¬ä¹¦ä¸€å‡ºï¼Œç«‹åˆ»å¼•çˆ†äº†æµè¡Œï¼Œè£è·æ™®åˆ©ç­–å¥–å’Œç¾å›½å›½å®¶å›¾ä¹¦å¥–ã€‚ç¾å›½äººæ°‘ä¸€èµ·ç«–å¤§æ‹‡æŒ‡ï¼šåŸæ¥æCSçš„äººä¹Ÿå¯ä»¥èŒèŒçš„ï¼

æ‰¯è¿œäº†ã€‚
ä¾¯å£«è¾¾è™½ç„¶è®¤ä¸ºè‡ªæˆ‘å¾ˆé‡è¦ï¼Œæ˜¯åˆ¤æ–­äººå·¥æ™ºèƒ½çš„æ ‡å‡†ã€‚ä½†æ˜¯ä½ æ€ä¹ˆæè¿°è‡ªæˆ‘å‘¢ï¼Ÿ
æˆ‘å½“ç„¶å¯ä»¥æŒ‡ç€é¼»å­è¯´ï¼šâ€œæˆ‘å°±æ˜¯æˆ‘ï¼Œæ˜¯é¢œè‰²ä¸ä¸€æ ·çš„çƒŸç«ã€‚â€
ä½†æ˜¯æœºå™¨äººä¹Ÿå¯ä»¥æŒ‡ç€è‡ªå·±çš„é¼»å­/æ˜¾ç¤ºå™¨è¿™ä¹ˆè¯´ã€‚
ä½ æ€ä¹ˆè¯æ˜ï¼Œæœºå™¨äººæŒ‡ç€è‡ªå·±çš„é¼»å­ï¼Œè·Ÿä½ æŒ‡ç€è‡ªå·±çš„é¼»å­ï¼Œä¸¤ä»¶äº‹å½“ä¸­æœ‰æŸäº›å†³å®šæ€§çš„åŒºåˆ«å‘¢ï¼Ÿ

GEBæ•´æœ¬ä¹¦å°±è¯•å›¾å¹²è¿™ä»¶äº‹ã€‚
ä¾¯å£«è¾¾åˆ°å¤„æœé›†ã€è‡ªå·±åˆ›ä½œäº†å¤§é‡çš„ä¾‹å­ï¼Œæƒ³è¦å±•ç¤ºç»™è¯»è€…ï¼Œè‡ªæˆ‘æ˜¯ä»€ä¹ˆï¼Œè‡ªæˆ‘æ„è¯†æ˜¯æ€ä¹ˆå›äº‹ï¼Œä»€ä¹ˆæ ·çš„è¡Œä¸ºä¸­ä½“ç°äº†è‡ªæˆ‘æ„è¯†ã€‚
æ¯”æ–¹è¯´ï¼Œä¸€å°å”±æœºï¼ˆå°±æ˜¯æ”¾å”±ç‰‡çš„æœºå™¨ï¼Œç°åœ¨å¾ˆå°‘è§åˆ°äº†ï¼‰Xï¼Œæ’­æ”¾äº†ä¸€å¼ å«â€œæˆ‘ä¸èƒ½åœ¨å”±æœºXä¸Šæ’­æ”¾â€çš„å”±ç‰‡åï¼Œå°±çˆ†ç‚¸äº†ã€‚
ä»–ä¸æ–­å±•ç¤ºï¼Œæ˜¯å› ä¸ºä»–æ„è¯†åˆ°â€œè‡ªæˆ‘â€æˆ–è®¸ä¸æ˜¯ä¸€ä¸ªå¯ä»¥è¯æ˜çš„ä¸œè¥¿ã€‚ä½†æ˜¯ä»–çŸ¥é“è¿™ä¸œè¥¿å­˜åœ¨ï¼Œä½ ä¹Ÿå¯ä»¥æ„Ÿå—åˆ°è¿™ä¸œè¥¿çš„å­˜åœ¨ã€‚å°±å¥½æ¯”ç¦…å®—é‡Œå¸¸è¯´çš„â€œä¸è¦æŠŠæˆ‘çš„æ‰‹æŒ‡å½“æˆæœˆäº®â€ã€‚ï¼ˆæ˜¯çš„ï¼Œä¾¯å£«è¾¾ä¹Ÿå¾ˆå–œæ¬¢ç¦…å®—å…¬æ¡ˆï¼‰


æ¥ä¸‹æ¥ï¼Œè‡ªæˆ‘è·Ÿå·´èµ«çš„éŸ³ä¹æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ
å¦‚ä¸Šæ‰€è¿°ï¼Œä¾¯å£«è¾¾çš„è¿™æœ¬ä¹¦æœ€åæˆäº†ä¸€æœ¬è‡ªæŒ‡æ¡ˆä¾‹å¤§å…¨ï¼ˆèº«ä¸ºç¨‹åºå‘˜çš„ä½ ï¼Œæ˜¯ä¸æ˜¯çœ‹åˆ°æ­¤æ—¶äº§ç”Ÿäº†å·¨å¤§çš„ç†Ÿæ‚‰æ„Ÿï¼Ÿï¼‰ã€‚
è‡ªæŒ‡ä¸ä»…åŒ…æ‹¬é€’å½’ï¼Œä¹ŸåŒ…æ‹¬å…ƒå°è¯´ï¼ˆmetafictionï¼Œä¹Ÿå¯ä»¥å«è¶…å°è¯´ï¼Œåè®¾å°è¯´ç­‰ç­‰ï¼‰ï¼Œå­—è°œç­‰ç­‰ä¼—å¤šå½¢æ€ã€‚

ä¾¯å£«è¾¾è®¤ä¸ºæœ€äº†ä¸èµ·çš„è‡ªæŒ‡çš„ä¾‹å­ï¼Œå°±æ˜¯æ ‡é¢˜é‡Œè¿™ä¸‰ä¸ªäººçš„åˆ›ä½œï¼š
å“¥å¾·å°”ä¸å®Œå¤‡æ€§å®šç†çš„è¯æ˜ï¼›
è‰¾èˆå°”çš„çŸ³æ¿ç”»ï¼›
å·´èµ«çš„èµ‹æ ¼ã€å¡å†œç­‰ä½œå“ã€‚

åœ¨ä»–çœ‹æ¥ï¼ˆæˆ‘æ‡‚çš„å°‘ï¼Œå½“ç„¶èµæˆä»–çš„çœ‹æ³•äº†ï¼‰ï¼Œè¿™ä¸‰è€…æ˜¯è‡ªæŒ‡è¿™ä¸€æ¦‚å¿µåœ¨ä¸‰ä¸ªä¸åŒé¢†åŸŸçš„æœ€é«˜æˆå°±ï¼Œæ˜¯ä»–è¿™æœ¬ä¹¦æƒ³è¦è¡¨è¾¾çš„ä¸»é¢˜çš„å®Œç¾å†ç°ã€‚
æ‰€ä»¥ï¼Œä½ ä¹Ÿå¯ä»¥è®¤ä¸ºè¿™æœ¬ä¹¦å°±æ˜¯é’ˆå¯¹â€œè‡ªæˆ‘â€è¿™ä¸ªä¸»é¢˜çš„ä¸æ–­é‡å¤ã€å˜å½¢ã€å¼ºåŒ–ã€‚

èº«ä¸ºç¨‹åºå‘˜ï¼Œæƒ³å¿…ä½ å·²ç»äº†è§£äº†å“¥å¾·å°”ä¸å®Œå¤‡æ€§å®šç†è¯æ˜çš„æ€è·¯ã€‚
è‰¾èˆå°”ç”»ä¸­çš„è‡ªæŒ‡ï¼Œåªè¦è§†åŠ›æ­£å¸¸çš„äººä¹Ÿå¯ä»¥ä¸€çœ¼çœ‹å‡ºã€‚
æ‰€ä»¥å¯¹ä½ æ¥è¯´ï¼Œå¯èƒ½ç†è§£çš„å”¯ä¸€éšœç¢å°±æ˜¯â€œå·´èµ«çš„éŸ³ä¹åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿâ€

ç®€è€Œè¨€ä¹‹ï¼Œä½ å¯ä»¥æŠŠå®ƒç†è§£æˆä¸‹å›¾çš„éŸ³ä¹ç‰ˆï¼š
</code></pre><p><img src="http://img04.taobaocdn.com/imgextra/i4/581166664/TB2J1Y2cpXXXXc_XXXXXXXXXXXX_!!581166664.jpg" alt="è·å…°ç”»å®¶åŸƒèˆå°”çš„è§†è§‰è¿·å®«"></p>
<pre><code>æ¥ä¸‹æ¥ï¼Œå›åˆ°åŸé—®é¢˜çš„å­é—®é¢˜ï¼Œå¦‚ä½•æ¬£èµå·´èµ«çš„ä½œå“ï¼Ÿ
ä¸çŸ¥é“ä½ å¬æ²¡å¬è¿‡ã€Šèµ‹æ ¼çš„è‰ºæœ¯ã€‹å’Œã€ŠéŸ³ä¹çš„å¥‰çŒ®ã€‹ï¼Œå¦‚æœè¿˜æ²¡å¬ï¼Œä¸å¦¨ä¸€è¯•ï¼š
The Art of Fugue / Musical Offeringä¸“è¾‘ï¼Œåœ°å€ï¼šhttp://www.xiami.com/album/488768

ç®€å•ï¼ˆä¸”ä¸å‡†ç¡®çš„ï¼‰æ¥è¯´ï¼Œå¡å†œå°±æ˜¯åªæœ‰ä¸€æ®µæ—‹å¾‹ï¼Œå¤åˆ¶åé€šè¿‡æ—¶åºæ’åˆ—å½¢æˆâ€œå’Œè°ç»„åˆâ€ã€‚
- éš¾åº¦æ¯”ç®€å•çš„å’Œå£°åˆ›ä½œè¦å¤§ã€‚å› ä¸ºå‡è®¾ä¸éŸ³ç¬¦aå’Œè°çš„éŸ³ç¬¦æœ‰cã€eã€Aï¼Œé‚£ä¹ˆåˆ›ä½œå’Œå£°æ—¶aä¸‹æ–¹å¯¹åº”çš„éŸ³ç¬¦å°±æœ‰3ä¸ªé€‰æ‹©ï¼Œaåé¢çš„éŸ³ç¬¦ä¹Ÿå¯ä»¥ä»»æ„é€‰æ‹©ï¼›è€Œåˆ›ä½œå¡å†œæ—¶å‡è®¾ä¸‹æ–¹çš„æ—‹å¾‹åºåˆ—æ¯”ä¸Šæ–¹æ™šä¸€æ‹ï¼Œé‚£ä¹ˆaåé¢çš„éŸ³ç¬¦å°±åªæœ‰3ä¸ªé€‰æ‹©ï¼ˆå› ä¸ºè¦ä¸aå’Œè°ï¼‰ï¼Œä¸”è¯¥é€‰æ‹©è¦ä¸ä¸‹ä¸€ä¸ªéŸ³ç¬¦å’Œè°ï¼Œè€ŒåŒæ—¶è¦é¿å…æ¨ªå‘åºåˆ—ä¸èƒ½å¬â€¦â€¦
èµ‹æ ¼å°±æ˜¯å…è®¸æŠŠç¬¬ä¸€æ®µæ—‹å¾‹Xåšå˜å½¢åå¾—åˆ°Yï¼ŒXä¸Yé€šè¿‡æ—¶åºæ’åˆ—å½¢æˆâ€œå’Œè°ç»„åˆâ€ã€‚

å·´èµ«çš„å‰å®³ä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä»…æŒæ¡äº†è¿™äº›è§„åˆ™ã€åœ¨è§„åˆ™ä¸‹åˆ›ä½œå‡ºäº†â€œå¥½å¬â€çš„éŸ³ä¹ï¼Œè€Œä¸”è¿˜å¯ä»¥ç©èŠ±æ´»å„¿ï¼š[æœå£³æ¬è¿] å·´èµ«èƒèŸ¹å¡å†œè§†è§‰å›¾è§£ï¼Œåœ°å€ï¼šhttp://www.iqiyi.com/w_19rr9svtnh.html

æœ‰äº†ç±»ä¼¼è§†é¢‘çš„å¸®åŠ©ï¼Œå·´èµ«çš„ä½œå“å°±ä¸åªæ˜¯ä¸€æ®µè«åå…¶å¦™çš„å£°éŸ³ï¼Œè€Œå…·å¤‡äº†ä¸å“¥å¾·å°”ã€è‰¾èˆå°”çš„è§†è§‰å¯æ¯”æ€§ã€‚
è¿™ç§ç»“æ„/å½¢å¼çš„å®Œç¾æ€§ä½“ç°å‡ºçš„ä¹è¶£ï¼Œæˆ‘ç›¸ä¿¡æ˜¯æ“…é•¿ç¼–ç¨‹çš„äººéƒ½å¯ä»¥è½»æ˜“ä½“ä¼šåˆ°çš„ã€‚

æœ€åï¼Œå›åˆ°ä½ çš„åŸé—®é¢˜ï¼šå¦‚ä½•å¬æ‡‚è«æ‰ç‰¹ã€è´å¤šèŠ¬ã€å·´èµ«çš„éŸ³ä¹ï¼Ÿ
å¦‚æœè¦â€œæ‡‚â€ï¼Œå‰é¢é™ˆå£®å£®è¯´çš„æ‡‚ä¹å™¨ã€è¿™é‡Œè¯´çš„ç©ç»“æ„ã€è¿˜æœ‰æ™“æ¸”èµæˆçš„æƒ…æ„Ÿä½“éªŒå’Œåå¯¹çš„å†å²èƒŒæ™¯äº†è§£ï¼Œä½ æœ€å¥½éƒ½è¦æ¶‰åŠï¼›ä½†å¦‚æœåªæƒ³â€œæ¬£èµâ€ï¼Œé‚£æˆ‘è§‰å¾—æ€æ ·èƒ½è®©ä½ è§‰å¾—â€œæœ‰æ‰€å¾—â€ï¼Œä½ å°±æ€æ ·æ¥ã€‚
å³ä½¿æ˜¯çŸ¥ä¹ä¸Šç‚®è½°çš„â€œè£…å¤‡å…šâ€ï¼ˆæ°´ç”µå’Œç«ç”µå“ªä¸ªæ›´é€‚åˆå¬å¤å…¸ï¼Ÿï¼‰ã€è±†ç“£ä¸Šè®½åˆºçš„â€œçœ‹è°±å…šâ€ï¼ˆåªé€šè¿‡çœ‹ä¹è°±æ¬£èµå¤å…¸ä¹ï¼‰ã€çˆ±ä¹ç¾¤ä½“ä¸­çš„â€œç‰ˆæœ¬å…šâ€ï¼ˆçƒ­è¡·äºæ¯”è¾ƒä¸åŒæ¼”å¥å®¶ã€ä¸åŒå¹´ä»£å½•åˆ¶çš„å¤å…¸ä¹å”±ç‰‡ç‰ˆæœ¬é—´çš„ä¼˜åŠ£ï¼‰ï¼Œä¹Ÿéƒ½ä»å¤å…¸ä¹ä¸­è·å¾—äº†è‡ªå·±æƒ³è¦çš„ä¹è¶£ã€‚

æ‰€ä»¥ï¼Œè¿™æœ€åçš„é—®é¢˜ï¼Œéœ€è¦é—®é¢˜ä¸»ä½ ï¼šä½ æƒ³ä»å¤å…¸ä¹ä¸­è·å¾—ä»€ä¹ˆï¼Ÿ
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;##åˆè¯†å¤å…¸&lt;/p&gt;
&lt;p&gt;ä»Šå¤©æ”¶è·å¤ªå¤§äº†ï¼Œæˆ‘ä¹Ÿç»ˆäºèƒ½äº«å—â€œä¸¥è‚ƒâ€éŸ³ä¹äº†ã€‚&lt;/p&gt;
&lt;p&gt;äº‹æƒ…çš„ç»è¿‡æ˜¯è¿™ä¹ˆæ ·çš„ï¼Œä»¥å‰äº†è§£è¿‡&lt;a href=&quot;http://book.douban.com/subject/1291204/&quot; target=&quot;_blank&quot; rel=&quot;exter
    
    </summary>
    
      <category term="çƒ­çˆ±ç”Ÿæ´»" scheme="http://liujiacai.net/categories/life/"/>
    
    
      <category term="music" scheme="http://liujiacai.net/tags/music/"/>
    
      <category term="GEB" scheme="http://liujiacai.net/tags/GEB/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å¯ä¸ªäººåšå®¢ä¹‹æ—…</title>
    <link href="http://liujiacai.net/blog/2014/05/07/hello-weblog/"/>
    <id>http://liujiacai.net/blog/2014/05/07/hello-weblog/</id>
    <published>2014-05-07T07:14:41.000Z</published>
    <updated>2017-07-04T14:43:37.000Z</updated>
    
    <content type="html"><![CDATA[<p>è¿™æ˜¯ç¬¬ä¸€ç¯‡ç”¨octopressæŠ˜è…¾çš„åšå®¢çœŸæ˜¯åºŸäº†ä¸å°‘åŠ²ï¼Œä»¥åå°±ä»¥è¿™é‡Œä¸ºå¤§æœ¬è¥äº†ã€‚</p>
<p>â€”â€”updateâ€”â€”â€”</p>
<p>octopressç”±äºæ–‡ç« ç”Ÿæˆé€Ÿåº¦å¤ªæ…¢ï¼Œç°åœ¨å·²ç»æ¢æˆhexoã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™æ˜¯ç¬¬ä¸€ç¯‡ç”¨octopressæŠ˜è…¾çš„åšå®¢çœŸæ˜¯åºŸäº†ä¸å°‘åŠ²ï¼Œä»¥åå°±ä»¥è¿™é‡Œä¸ºå¤§æœ¬è¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;â€”â€”updateâ€”â€”â€”&lt;/p&gt;
&lt;p&gt;octopressç”±äºæ–‡ç« ç”Ÿæˆé€Ÿåº¦å¤ªæ…¢ï¼Œç°åœ¨å·²ç»æ¢æˆhexoã€‚&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
</feed>
